**********************************************************************
                               PXELINUX

    A bootloader for Linux using the PXE network booting protocol

                Copyright (C) 1994-2001 H. Peter Anvin

This program is provided under the terms of the GNU General Public
License, version 2 or, at your option, any later version.  There is no
warranty, neither expressed nor implied, to the function of this
program.  Please see the included file COPYING for details.

----------------------------------------------------------------------

PXELINUX is a SYSLINUX derivative, for booting Linux off a network
server, using a network ROM conforming to the Intel PXE (Pre-Execution
Environment) specification.  PXELINUX is *not* a program that is
intended to be flashed or burned into a PROM on the network card; if
you want that, check out NILO (http://www.nilo.org/).  NILO can also
be used to create a PXE-compliant boot PROM for most network cards
which have drivers for Linux or FreeBSD.


    ++++ HOW TO CONFIGURE PXELINUX ++++

PXELINUX operates in many ways like SYSLINUX.  If you are not familiar
with SYSLINUX, read syslinux.doc first, since this documentation only
explains the differences.

On the TFTP server, create the directory "/tftpboot", and copy the
following files to it:

        pxelinux.bin            - from the SYSLINUX distribution

        any kernel or initrd images you want to boot

Finally, create the directory "/tftpboot/pxelinux.cfg".  The
configuration file (equivalent of syslinux.cfg -- see syslinux.doc for
the options here) will live in this directory.  Because more than one
system may be booted from the same server, the configuration file name
depends on the IP address of the booting machine.  PXELINUX will
search for its config file on the boot server in the following way:

  First, it will search for the config file using its own IP address
  in upper case hexadecimal, e.g. 192.0.2.91 -> C000025B.

  If that file is not found, it will remove one hex digit and try
  again.  Ultimately, it will try looking for a file named "default"
  (in lower case).

  As an example, for 192.0.2.91, it will try C000025B, C000025,
  C00002, C0000, C000, C00, C0, C, and default, in that order.

It should be noted that all filename references are relative to the
directory pxelinux.bin lives in (usually /tftpboot).  PXELINUX
generally requires that filenames (including any relative path) are 31
characters or shorter in length.

PXELINUX does not support MTFTP, and I have no immediate plans of
doing so.  It is of course possible to use MTFTP for the initial boot,
if you have such a setup.  MTFTP server setup is beyond the scope of
this document.


    ++++ SOME NOTES ON THE TFTP SERVER ++++

PXELINUX currently requires that the boot server has a TFTP server
which supports the "tsize" TFTP option (RFC 1784/RFC 2349).  The
"tftp-hpa" TFTP server, which support options, is available at:

        http://www.kernel.org/pub/software/network/tftp/
        ftp://www.kernel.org/pub/software/network/tftp/

... and on any kernel.org mirror (see http://www.kernel.org/mirrors/).

Another TFTP server which supports this is atftp by Jean-Pierre
Lefebvre:

        ftp://ftp.mamalinux.com/pub/atftp/

Unfortunately, the Intel LANDesk Service Agent II prior to version
0.99h (PXE PDK V2.4) seems to have a rather serious bug: it requests
the TFTP "blksize" option, but will be mortally confused if this
option is actually accepted by the server!  There are three possible
workarounds for this bug:

1. Use a TFTP server with doesn't support "blksize".

   Unfortunately, PXELINUX requires the "tsize" option to be
   supported, and it is very unusual for TFTP servers to implement one
   and not the other.  Both the tftp-hpa and atftp TFTP servers (see
above) therefore can be configured to disable the blksize option.
   Use "-r blksize" for tftp-hpa, "--no-blksize" for atftp.

2. Use MTFTP for the initial bootstrap.  You need an MTFTP server with
   the appropriate DHCP setup to do this.

3. Use appropriate DHCP options that the client will attempt MTFTP
   before trying conventional TFTP.  It seems that the client will not
   request the "blksize" option if it has tried MTFTP and failed.
   These DHCP options are beyond the scope of this document.


    ++++ SETTING UP THE DHCP SERVER ++++

The PXE protocol uses a very complex set of extensions to DHCP or
BOOTP.  Some PXE implementations can be coaxed to operate with a
normal DHCP server; unfortunately so far no "magic bullet" which works
with all PXE implementations work.

The best one currently known, using ISC dhcp 2.0 dhcpd.conf syntax:

        allow booting;
        allow bootp;

        filename "/tftpboot/pxelinux.bin" ;
        option dhcp-class-identifier "PXEClient";
        option vendor-encapsulated-options 09:0f:80:00:0c:4e:65:74:77:6f:72:6b:20:62:6f:6f:74:0a:07:00
:50:72:6f:6d:70:74:06:01:02:08:03:80:00:00:47:04:80:00:00:00:ff;
        next-server <TFTP-server>;
        # server-identifier <TFTP-server>;      # Illegal! See below

        option domain-name "<domain name>";
        option subnet-mask <subnet mask>;
        option broadcast-address <broadcast address>;
        option domain-name-servers <dns servers>;
        option routers <default router>;

        # Skip everything below if you want to use dynamic IP
        # address assignment
        host <hostname> {
                hardware ethernet <ethernet address>;
                fixed-address <hostname>;
        }

However, some PXE implementations will only work this way if the
"dhcp-class-identifier" and "vendor-encapsulated-options" are *not*
present.  Intel Boot Client 3.0 and later are known to fall into this
category.  Arguably, that would have been the right thing from the
beginning.

Note that if your particular TFTP daemon runs under chroot (tftp-hpa
will do this if you specify the -s (secure) option; this is
recommended), you most likely should not include the /tftpboot prefix.

If the DHCP and TFTP servers are not on the same machine, you are
supposed to set up a DHCP server on port 4011 on the TFTP server; this
is the "PXE boot server", which uses the DHCP protocol.  If this is
not possible, you can try adding the directive "server-identifier
<TFTP-server>;"  Unfortunately this is a violation of DHCP
protocol, but some PXE implementations do not accept the next-server
directive without it or the "boot server".

I have successfully booted an Intel N440BX ("Nightshade") motherboard
with onboard Ethernet and "Intel LANDesk(R) Service Agent II version
0.99c" (derived from the Intel PXE PDK V2.0) and the Intel PRO/100+
Management Adapter "Boot agent 2.6 (build 071)" (derived from the
Intel PXE PDK V3.0 bld 071) using the configuration above and ISC
dhcpd 2.0.


    ++++ SOME NOTES ++++

If the boot fails, PXELINUX (unlike SYSLINUX) will not wait forever;
rather, if it has not received any input for approximately five
minutes after displaying an error message, it will reset the machine.
This allows an unattended machine to recover in case it had bad enough
luck of trying to boot at the same time the TFTP server goes down.


    ++++ PXELINUX IS STILL BETA ++++

PXELINUX is still very much beta; however, I'd be interested in
hearing about any experiences you might have with it, good or bad.  If
you have any comments, please use the SYSLINUX mailing list mentioned
at the end of syslinux.doc.  Thanks!

Currently known problems:

+ Requires a TFTP server which supports the "tsize" option.
+ The error recovery routine doesn't work quite right.  For right now,
  it just does a hard reset - seems good enough.
+ There may be funnies with memory management.  The PXE spec has no
  decent way of telling it to free up all memory and unchain any
  interrupts; it allows the base stack to be unloaded, but not the
  UNDI driver.
+ There seems to be a problem with sending ACK "storms"; a number of
  ACK packets fired off without the proper delay in between.  I
  suspect this is a PXE firmware problem, rather than a PXELINUX
  problem.
+ We should probably call the UDP receive function in the keyboard
  entry loop, so that we answer ARP requests.
+ Boot sectors don't work yet... they probably need auxilliary information
  (such as device) to work at all.
* No way to chain-load onto a hard disk.

 more /usr/share/doc/syslinux-1.52/pxelinux.doc
**********************************************************************
on porsche siggy27may04
/home/linux/SED
/home/linux/NOTES
/home/linux/KS

**********************************************************************
more /usr/share/doc/syslinux-1.52/pxelinux.doc

**********************************************************************
ISO files

mount <iso image> <mount point> -t iso9660 -o ro,loop=/dev/loop0

sudo mount -t iso9660 -o loop <iso image> <mount point>

**********************************************************************
Making boot disk(s)

Build boot disk

# dd if=/hosts/tyrant/LINUX/dist/redhat7.2/RedHat/images/boot.img of=/dev/fd0 bs=1024

Build a boot disk (rescue)

uname -a

mkbootdisk <kernel version>

**********************************************************************
Linux Screensaver

/usr/bin/kcmshell screensaver

**********************************************************************
fuser <path>

gives you the PID(s) of who is useing the path

**********************************************************************
3DEqualizer lics are served from RAIDERS

lic lives in /var/tmp

setenv DISPLAY host:0.0

ps -ef | grep flc

./flcadm

	Start Server
	Stop Server
	Add
	  keys in email (Password = keys)

**********************************************************************
RPM files

mkdir temp
cp rpm temp
rpm2cpio <rpmname> | cpio -i -d

**********************************************************************
rsync

# rsync srcfile dsthost:/dstfile

# rsync srchost:/srcfile dstfile

26Apr05 --siggy

rsync -a (-gopt) saves permissions, ownership, modtime

rsync -a -e ssh source/ username@remtemachine.com:/path/to /destination
&&&&&
Trailing Slashes Do Matter...Sometimes

This isn't really an article about rsync, but I would like to take a 
momentary detour to clarify one potentially confusing detail about its 
use. You may be accustomed to commands that don't care about trailing 
slashes. For example, if a and b are two directories, then cp -a a b is 
equivalent to cp -a a/ b/. However, rsync does care about the trailing 
slash, but only on the source argument. For example, let a and b be two 
directories, with the file foo initially inside directory a. 
Then this command:

rsync -a a b

produces b/a/foo, whereas this command:

rsync -a a/ b

produces b/foo. The presence or absence of a trailing slash on the destination 
argument (b, in this case) has no effect.

17Aug16  --siggy
updatupdate REPUBLIC from thumbdrive

rsync -auPX --update /media/siggy-BU/REPUBLIC /home/siggy/

update thumbdrive with RESUME

rsync -auPX --update /home/siggy/RESUME /media/siggy-BU/e REPUBLIC from thumbdrive

rsync -auPX --update /media/siggy-BU/REPUBLIC /home/siggy/

update thumbdrive with RESUME

rsync -auPX --update /home/siggy/RESUME /media/siggy-BU/

2Dec16  --siggy at DTS

rsync -aP ~dsiegfriedt/JOBS/DISNEYTS/ /mnt/JOBS/



&&&&&
1jul08  --siggy

http://ubuntuforums.org/archive/index.php/t-163110.html
LordHunter317					April 21st, 2006, 11:36 AM

The correct way to do this is complicated, but does work. 

Here, "server" means whatever is receiving the backups and client means the side sending the backups. 

1) Create a user on the remote side to run the backup jobs. backup is a fine name, or even rsync. 
2) Give it a home directory, but no password. 
3) Create a passwordless SSH keypair for this user. Do this on the local machine, as whatever user will 
   	  kick off the job. 
4) Put the public key in ~/.ssh/authorized_keys on the remote box, with the following 
       restrictions added:no-port-forwarding,no-agent-forwarding,no-pty,no-X11-forwardingAnd perhaps a 
       from="192.0.0.1" Where that is your local IP or DNS entry. The sshd(8) manpage describes the 
       restictions in more detail. 
6) Add the following entry to /etc/sudoers on the remote side:backup ALL = NOPASSWD: /usr/bin/rsync
       You could change the ALL host designation to just that host, if you prefer.
7) Run rsync on the local side like so:rsync -e 'ssh -l backup -i /home/example/.ssh/id_dsa_backup' --rsync-path='sudo rsync' -a /home/backup remote:/home/backupDone. Modify as appropriate. 

Not tested recently, but I'm fairly confident it will work.
&&&&&
### as root on pl1rad719.admin.edmunds.com
rsync -e 'ssh -l backup -i /home/backup/.ssh/id_rsa' --rsync-path='sudo rsync' -a pl1rns700.admin.edmunds.com:/etc/auto.net /tmp

copies files with the correct owner/group/permission/time
&&&&&
14Jul08  --siggy

To get rsync to grab from a remote machine (pull).  First set up a passwd-less login 
account (backup in this case).  pl1rns700 is a machine in the DMZ.

Make sure you have sudoers set up on remote machine.  Add to /etc/sudoers:
     backup	ALL= NOPASSWD:/usr/bin/rsync

rsync -e 'ssh -l backup -i /home/backup/.ssh/id_rsa' --rsync-path='sudo rsync' -a \
pl1rns700.admin.edmunds.com:'/etc/hosts /etc/auto.misc /etc/auto.net' /tmp > /dev/null 2>&1

1) -e selects the shell you will use.  
   'ssh -l backup -i /home/backup/.ssh/id_rsa' will allow you to login passwd-less as backup

2) "--rsync-path='sudo rsync' -a" will run rsync through sudo

3) -a in rsync stands for archive and it is the same as "-rlptgoD" (see man rsync)

4) pl1rns700.admin.edmunds.com: is the remote host

5) '/etc/hosts /etc/auto.misc /etc/auto.net' are the 3 remote files I used to test

6) /tmp is the destination location I used when testing

7) > /dev/null 2>&1 redirects ooutput to /dev/null
&&&&&
5Oct09  --siggy

To EXCLUDE a dir from rsync

rsync -r --exclude archives /nfs/common/named/chroot-production/var/named/zones-views pl1rns703.admin.edmunds.com://tmp

10jan14  --siggy 
#to rsync/create a directory
rsync -a CARs /media/20C2-3D5C/

#to update all the files in a directory
rsync -a DOCs/* /media/20C2-3D5C/DOCs

#to update all the files in a directory while excluduing specific types of file (.vmdk .mf .ovf .mf)
rsync -a --exclude-from 'exclude-list.txt' REPUBLIC/* /media/20C2-3D5C/REPUBLIC/

dsiegfri@la1000440d:~ $ cat exclude-list.txt 
*.zip
*.vmdk
*.mf
*.ovf

24Jan14  --siggy
One additional option that you might want to try is --dry-run, which will do everything but copy the data (great for testing); 
the --stats option, which outputs some file transfer statistics; and the --progress option, which indicates the progress of 
the copy operation.

**********************************************************************
chkconfig amd on 
chkconfig nfs on 
chkconfig rsh on 
chkconfig rlogin on 
chkconfig telnet on 

chkconfig atd off 
chkconfig ipchains off 
chkconfig iptables off 
chkconfig sshd off 
chkconfig apmd off 

 rpm -e logwatch 

cd /root 
vi .tcshrc 
add this line at the end of the file to get rid of the lang errors 
setenv LANG C 
setenv PAGER /bin/more 
  

cd / 
ln -s /hosts/bryce/images/LINUX/dist dist 
mkdir /js 
mkdir /usr/lsf 
mkdir /usr/lsf/mnt 
mkdir /usr/local/flexlm 

cd / 
chmod images 777 
chmod usr 777 
cd /etc 
mv amd.net amd.hosts 
cp amd.conf amd.conf.orig 

vi amd.conf 

     # 
     # amd default config file 
     # 
     # check amd.conf(5) man page for details about options in this file 
     # 

     # GLOBAL OPTIONS SECTION 
     [ global ] 
     normalize_hostnames =   no 
     print_pid =             yes 
     pid_file =              /var/run/amd.pid 
     restart_mounts =        yes 
     auto_dir =              /.automount 
     log_file =              /var/log/amd 
     #log_file =             syslog 
     log_options =           all 
     #debug_options =        all 
     plock =                 no 
     selectors_on_default =  yes 
     print_version =         no 
     # set map_type to "nis" for NIS maps, or comment it out to search for all 
     # types 
     map_type =              file 
     search_path =           /etc 
     browsable_dirs =        yes 
     show_statfs_entries =   no 
     fully_qualified_hosts = no 
     cache_duration =        1800 

     # DEFINE AN AMD MOUNT POINT 
     [ /hosts ] 
     map_name =              amd.hosts 
     map_type =              file

/etc/init.d/amd/restart 

To check out what matrix fstab looks like 
rsh matrix cat /etc/fsatab 
add last three lines 

     LABEL=/                   /                   ext3    defaults           1 1 
     LABEL=/boot               /boot               ext3    defaults           1 2 
     none                      /dev/pts            devpts  gid=5,mode=620     0 0 
     LABEL=/images             /images             ext3    defaults           1 2 
     none                      /proc               proc    defaults           0 0 
     none                      /dev/shm            tmpfs   defaults           0 0 
     LABEL=/tmp                /tmp                ext3    defaults           1 2 
     LABEL=/usr                /usr                ext3    defaults           1 2 
     /dev/hda3                 swap                swap    defaults           0 0 
     /dev/fd0                  /mnt/floppy         auto    noauto,owner,kudzu 0 0 
     gate-netapp:/images/js    /js                 nfs     exec,dev,suid,rw   1 1 
     ducati:/usr/local/flexlm  /usr/local/flexlm   nfs     exec,dev,suid,rw   1 1 
     ducati:/usr/lsf/mnt       /usr/lsf/mnt        nfs     exec,dev,suid,rw   1 1

Now the /etc/host file 
add the name of the machine and a few others ... Note the localhost line is changes 

     # Do not remove the following line, or various programs 
     # that require network functionality will fail. 
     127.0.0.1      localhost.localdomain                localhost 
     10.1.10.182    clone10.hollywood.cinesite.com       clone10 
     10.1.10.26     gige-netapp.hollywood.cinesite.com   gige-netapp    netapp 
     150.246.4.188  gate-netapp.hollywood.cinesite.com   gate-netapp 
     150.246.4.199  yamaha.hollywood.cinesite.com        yamaha 
     150.246.4.200  ducati.hollywood.cinesite.com       ducati

This is all that is in the /etc/exports file 

     /images (rw)

change the passwd file so root is tcsh not bash 

     root:gobeldygook:0:0:root:/root:/bin/tcsh

run the setup script 
cd /hosts/gladys/images/dist/scripts 
./prod-setup.csh 

Install al the software ... maya4.0 , maya3.0, timed, mtor (rpm -ivh --nodeps rat4.5), pamfix rendermand 3.9.1 (.2 is beta) 
/hosts/bryce/images/LINUX/dist 

Change the date and time 
 Time with ntpd 

cd /hosts/bryce/images/LINUX/dist/Pam_fix/ 
./pamfix 

install All the Software 
 install linux software 

[siggy@grit ATI]# fireglinfo
display: :0.0  screen: 0
OpenGL vendor string: ATI
OpenGL renderer string: FireGL2 / FireGL3 (Pentium4)
OpenGL version string: 1.2.2083 (1.9.8)

**********************************************************************
Adding a passwd to grub

# /sbin/grub-md5-crypt
Password: <type your passwd>

it will return the passwd-hash

in ks.cfg

add the lines:

### GRUB Passwd (regular desktop passwd)
bootloader --md5pass=$1$YlkMZ/$im1ed8gQYUg0ZMlhlybBV0

and your build will have a grub that is passwd protecdted
**********************************************************************
For text files,lines in Windows usually is terminated by  CR-LF (0D 0A in Hex),
however, usually lines in Linux terminated only by LF (0A in Hex).
To remove the CR (carriage-return), you can use tr command (see man tr)

Try this:

tr -d '\015' < input_file > output_file

This will delete all CRs (\015 in octal)  in input_file.

#! /bin/sh tr 'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ'\ 
'nopqrstuvwxyzabcdefghijklmNOPQRSTUVWXYZABCDEFGHIJKLM' 

Better versions of "tr" should allow this syntax:
#! /bin/sh tr 'a-zA-Z' 'n-za-mN-ZA-M'

When files from Cinesite were burned onto a CD a Mac was used.  SCREWED up 
the CR/LF set up on PERL scripts (maybe other stuff too).  below fixed it    
3aug04 siggy

tr '\r' '\n' < Macfile.txt > unixfile.txt

To convert a Mac OS text file to a Unix text file using Perl, at the Unix 
shell prompt, enter: 
perl -p -e 's/\r/\n/g' < macfile.txt > unixfile.txt
To convert from a Unix text file to a Mac OS text file with Perl, at the Unix 
shell prompt, enter: 
perl -p -e 's/\n/\r/g' < unixfile.txt > macfile.txt

**********************************************************************
find / -local -type f '(' -name core -o -name dead.letter ')' -atime +7 -mtime +7 -exec rm -f '{}' ';'
**********************************************************************
for i in `cat rpmpkgs | sed s/.i386.rpm//`; do echo $i >>
~siggy/su-rpms; rpm -ql $i | grep /bin/su >> ~siggy/su-rpms; done

Will tell you that /bin/su

lives in  "coreutils"

SO... rpm -ql `rpm -qa | grep coreutils`  confirms that... 

rpm -qa | grep coreutils gives you the version we need to crack open to
fix your problem

To find a file that a RPM provides.  

for f <what you are looking for>
    for i in *.rpm; do
        rpm -qpl | grep -q $f && echo $i;
    done
done

ALSO:

rpm -q --whatprovides

**********************************************************************
3sep07  --siggy
find . -name ".jpg" -exec cp '{}' /tmp/siggy ';'

**********************************************************************
TCPdump NOTES

tcpdump
-N -vv -w /tmp/ks-testing -q -P host poboxx 

-q host poboxx -w /tmp/ks-testing

-l #line buffered

host <HOSTNAME>  #for traffic to and from <HOSTNAME>

#25jul02 for testing dhcp connectivity to poboxx
#as root on poboxx
tcpdump -l host poboxx > dat4

**********************************************************************
# Updated paths 23Apr04 --siggy  &&& KickStart &&&

When adding to ~linux/??/KS/RedHat/RPMS  as a link or just a RPM
you must run genhdlist.

# chmod -R 777 RedHat

# /usr/lib/anaconda-runtime/genhdlist /home/linux/RH-80/

[con1]{/usr/home/linux/72/KS/DW}(8)> ./genhdlist ~linux/72/KS/
**********************************************************************
rpm2html

**********************************************************************
cdlabelgen      make CD jewel case cards

**********************************************************************
dia  like Visio

**********************************************************************
Q.C7- How can I swap mouse buttons? How do I get an XFree86 for Left-Handers?

Run xmodmap -e "pointer = 3 2 1" in an xterm or put such a command into your .xinitrc file.
See also the xmodmap(1) man page.

**********************************************************************
To test plugins type "about:plugins" in a URL window

Mozilla links:

cd /usr/lib/mozilla/plugins  
If it is not there (if netscape isn't installed) create it

for java:

OLD ln -s /usr/java/jre1.3.1_04/plugin/i386/ns600/libjavaplugin_oji.so libjavaplugin_oji.so

As of 18dec03	(ns610-gcc32 is used with RH8.0 and greater)
ln -s /usr/java/j2re1.4.2_02/plugin/i386/ns610-gcc32/libjavaplugin_oji.so libjavaplugin_oji.so
cp ~siggy/LINUX/RPMs/MOZILLA/libflashplayer.so /usr/local/mozilla/plugins
cp ~siggy/LINUX/RPMs/MOZILLA/flashplayer.xpt /usr/local/mozilla/plugins

copy of /usr/local/mozilla/plugins can be found in ~siggy/LINUX/plugins.SAFE

RPM installed mozilla looks for plugins in your home account.  
Mozilla installed mozilla looks for plugins in /usr/local.

for others:

ln -s ../../../lib/netscape/plugins/<enter .so name here> <re-enter .so name here>

ln -s /usr/lib/netscape/plugins/ShockwaveFlash.class ShockwaveFlash.class
ln -s /usr/lib/netscape/plugins/cpPack1.jar cpPack1.jar
ln -s /usr/lib/netscape/plugins/libflashplayer.so libflashplayer.so

  -- 4May06 added
use  "about:buildconfig" to find out the gcc version of your firefox

**********************************************************************
ISO files

mount <iso image> <mount point> -t iso9660 -o ro,loop=/dev/loop0

**********************************************************************
Making boot disk(s)

Build boot disk

# dd if=/hosts/tyrant/LINUX/dist/redhat7.2/RedHat/images/boot.img of=/dev/fd0 bs=1024

Build a boot disk (rescue)

uname -a

mkbootdisk <kernel version>

**********************************************************************
Linux Screensaver

/usr/bin/kcmshell screensaver

**********************************************************************
fuser <path>

gives you the PID(s) of who is useing the path

**********************************************************************
3DEqualizer lics are served from RAIDERS

lic lives in /var/tmp

setenv DISPLAY host:0.0

ps -ef | grep flc

./flcadm

        Start Server
        Stop Server
        Add
          keys in email (Password = keys)

**********************************************************************
RPM files

mkdir temp
cd temp
cp rpm temp

rpm2cpio <rpmname> | cpio -i -d

**********************************************************************
Rsync

# rsync srcfile dsthost:/dstfile

# rsync srchost:/srcfile dstfile

**********************************************************************
tcpdump-notes

-N -vv -w /tmp/ks-testing -q -P host poboxx

-q host poboxx -w /tmp/ks-testing

-l #line buffered

host <HOSTNAME>  #for traffic to and from <HOSTNAME>

#25jul02 for testing dhcp connectivity to poboxx
#as root on poboxx
tcpdump -l host poboxx > dat4

**********************************************************************
  --siggy1jul05
better site www.vanemery.com/Linux/Serial/serial-console.html

(google for redhat 9 serial only boot)



In lilo.conf to set machine to console-less booting

 serial= parameters

      enables control from a serial line. The specified serial port is initialized 
and the boot loader is accepting input from it and from the PC's keyboard. Sending 
a break on the serial line corresponds to pressing a shift key on the console in 
order to get the boot loader's attention. All boot images should be password-protected 
if the serial access is less secure than access to the console, e.g. if the line is 
connected to a modem. The parameter string has the following syntax:

    <port>[,<bps>[<parity>[<bits>]]]

<port>: the number of the serial port, zero-based. 0 corresponds to COM1 alias 
/dev/ttyS0, etc. All four ports can be used (if present). 

<bps>: the baud rate of the serial port. The following baud rates are 
supported: 110, 150, 300, 600, 1200, 2400, 4800 and 9600 bps. Default is 2400 bps. 

<parity>: the parity used on the serial line. The boot loader ignores input 
parity and strips the 8th bit. The following (upper or lower case) characters 
are used to describe the parity: n for no parity, e for even parity and o for 
odd parity. 

<bits>: the number of bits in a character. Only 7 and 8 bits are supported. 
Default is 8 if parity is "none", 7 if parity is "even" or "odd". If `serial' 
is set, the value of `delay' is automatically raised to 20. 
Example: serial=0,2400n8 initializes COM1 with the default parameters.

********************************************************************
tar cBpf - web | rsh webslave "(cd / && tar xBpf -)"

**********************************************************************
du -sh * gives TTL by directory

**********************************************************************
Maitred:

on raiders
as alfred
type:
	alfred -maitred

if that fails... try umounting /home/alfred (after logging out of alfred)
 and retry

**********************************************************************
 hwclock -r or hwclock --show
       hwclock -w or hwclock --systohc
       hwclock -v or hwclock --version
       hwclock --set --date=newdate

--systohc
              Set the Hardware Clock to the current System  Time.


--show Read the Hardware Clock and print the time on Stan
              dard Output.  The time is  always  in  local  time,
              even if you keep your Hardware Clock in Coordinated
              Universal Time.  See the --utc option.

 --date=date_string
              Specifies  the  time  to  which to set the Hardware
              Clock.  The value of this option is an argument  to
              the date(1) program.  For example,

              hwclock --set --date="9/22/96 16:45:05"

--utc

       --localtime
              Indicates that the Hardware Clock is kept in  Coor
              dinated Universal Time or local time, respectively.
              It is your choice whether to keep your clock in UTC
              or local time, but nothing in the clock tells which
              you've chosen.  So this option is how you give that
              information to hwclock.

              If  you  specify the wrong one of these options (or
              specify neither and take  a  wrong  default),  both
              setting  and querying of the Hardware Clock will be
              messed up.

              If you specify neither --utc nor --localtime ,  the
              default  is  whichever  was specified the last time
              hwclock was used to set the clock (i.e. hwclock was
              successfully  run  with  the --set , --systohc , or
              --adjust options), as recorded in the adjtime file.
              If  the  adjtime file doesn't exist, the default is
              local time.


 hwclock --systohc  (sets the hardware clock from the system time)
 hwclock --hctosys (sets the system time from the hardware clock)

1Sep11  --siggy   Uptime in minute 
awk  '{print $0/60;}' /proc/uptime

**********************************************************************
more /proc/net/arp

Will give you IP and MAC Address

16sep10

/etc/udev/rules.d/70-persistant-net.rules

**********************************************************************
To convert a pic to 640x480

convert -size 640x480 mvc-884f-siggy.jpg -resize 640x480 thumbnail.jpg 

**********************************************************************
in /etc/X11/XF86Config-4

Section "Files"

# The location of the RGB database.  Note, this is the name of the
# file minus the extension (like ".txt" or ".db").  There is normally
# no need to change the default.

    RgbPath	"/usr/X11R6/lib/X11/rgb"

# Multiple FontPath entries are allowed (they are concatenated together)
# By default, Red Hat 6.0 and later now use a font server independent of
# the X server to render fonts.

    FontPath   "unix/:7100"

EndSection
**********************************************************************
NIS sever names

ypcat -k ypservers | awk -F . '{ print $1}'

laurel
lewis
abbott
lennon
sirens
broncos
raiders

foreach i ( `ypcat -k ypservers | awk -F . '{ print $1}'` )
foreach? echo "now entering " $i
foreach? ypcat -k ypservers | awk -F . '{ print $1}'
foreach? end
**********************************************************************
to add "10.1.10." to the begining of every line.

sed s/^/10.1.10./g db.10.1.10 > tpm.10
**********************************************************************
ssh-keygen -t rsa -N scarethedark -f barf
Generating public/private rsa key pair.
Your identification has been saved in barf.
Your public key has been saved in barf.pub.
The key fingerprint is:
9e:d6:a9:d4:54:c8:eb:3b:d2:42:fa:c5:c9:f9:db:70 siggy@grodd
[grodd] (/home/siggy) 109 > more barf.pub
ssh-rsa AAAAB3NzaC1yc2EAAAABIwAAAIEA3cseSdwLpma77tnEzRQ42uU4hxHKFyzxdRbZ6kmXvLyTKH2N3cvU3pZBAgw7eNrAIAchyazhV7cRF5+qPwWP/4yjZeJ
nLfOb3c7WDca/xHbV2+hL+iHK0FtB0PQ7L+z+GLKwCYPvlgfNYuh6ps4EZKJyCBg2sev5Tx4/DwAMSx8= siggy@grodd

25Apr05  --siggy

ssh-keygen generates 2 files in ~/.ssh
id_rsa			PRIVATE
id_rsa.pub		PUBLIC

for passwdless login cp the other hosts PUBLIC key in ~/.ssh/authorized_keys

Jon Hart  --2jul08

To test a passwdless login from root:

# ssh -i ~backup/.ssh/id_rsa backup@pl1rns700.admin.edmunds.com 

This tells ssh where the non-public key is.

**********************************************************************
KDE editing  15Feb03

in  /home/siggy/.kde/share/apps/kicker/default_apps removed 

Internet/konqbrowser.desktop
Help.desktop
**********************************************************************

In linux it is really easy to do MAC address spoofing. All you need is the trust 
command line tool ifconfig.
> Enter the command as follows:
> ifconfig eth0 hw ether 00:00:AA:AA:AA:AA
> Change eth0 to your card name and "00:00:AA:AA:AA:AA" to the address you want to spoof.
> Before issuing the command you need to take down the card by issuing 
"ifconfig eth0 down". Then afterwards issue "ifconfig eth0 up". And you will be in business.
>
**********************************************************************
Duh, so KDE uses its own screensaver?  What's the binary called?
something like:
/usr/lib/libkscreensaver.la
/usr/lib/libkscreensaver.so.3
/usr/lib/libkscreensaver.so.3.0.0

>  > and
>  >
>  > /usr/bin/kbanner.kss
>  > /usr/bin/kblankscrn.kss
>  > /usr/bin/kblob.kss
>  > /usr/bin/kbouboule.kss
>  > /usr/bin/klines.kss
>  > ....
>  > oll of them has .kss extension
> And when the screensaver is running, what is the name of the running
> binary?

i tested it now, and two lines of ps -ef .... :

suti     22377     1  0 09:51 ?        00:00:00 kdeinit: kdesktop
.
.
.
suti     23374 22377  0 15:16 ?        00:00:00 /usr/bin/kmatrix.kss -root
so it means kdesktop start the screensaver, and i used the matrix
screensaver, so it called kmatrix.kss, and it is an ELF format binary
**********************************************************************
RPM/command pwgen ~siggy/linux/RPMs  will generate random passwd
installed on grodd

10Oct12  --siggy   
http://www.linux-magazine.com/Online/Features/Password-Tools?utm_source=Linux+Newsletter&utm_campaign=c6c562a99d-Linux_Update_19_MediaGoblin_09_10_2012&utm_medium=email

apg -m 12 -s -t -M SNCL

pwqcheck
cracklib-check
**********************************************************************
MD5 passwd are 31 characters long and start with $1$

grodd] (/home/siggy) 94 > grub-md5-crypt
Password: t42n24t
$1$q00/j/$M8g31mUbcTn6PofowZahh/

^^^^^
28Oct15  --siggy   additional hash info

salt and hashed password OR a status exception value e.g.:

"$id$salt$hashed", the printable form of a password hash as produced by crypt (C), where "$id" is the algorithm used. 
(On GNU/Linux, "$1$" stands for MD5, "$2a$" is Blowfish, "$2y$" is Blowfish (correct handling of 8-bit chars), "$5$" 
is SHA-256 and "$6$" is SHA-512, crypt(3) manpage, other Unix may have different values, like NetBSD. 

^^^^^w
30Oct15  --siggy  sha512 (default) passwd hash
#OT left and we are changing the passwd

dsiegfri@la1002073d:~ $ grub-crypt
Password: 
Retype password: 
$6$OV1HunJ4kAEUViOB$yitafQHkuslxKxCg3Ig9AFKeEogHhr82IEzv8nWMJ/ceyYzlZksUjwqicrRGdc6Bor5TbEPpZFI2FUgzVLmnb0

dsiegfri@la1002073d:~ $ grub-crypt -h
Usage: grub-crypt [OPTION]...
Encrypt a password.

  -h, --help              Print this message and exit
  -v, --version           Print the version information and exit
  --md5                   Use MD5 to encrypt the password
  --sha-256               Use SHA-256 to encrypt the password
  --sha-512               Use SHA-512 to encrypt the password (default)

Report bugs to <bug-grub@gnu.org>.
EOF
^^^^^w

**********************************************************************
http://bluearc3:81 to get to the bluearc GUI
**********************************************************************
foreach i ( `ls` )
foreach? echo $i
foreach? cd $i
foreach? grep '<=>' *
foreach? cd ..
foreach? end
**********************************************************************

passwd -l <login> will add a "!" to the passwd field
**********************************************************************
Console-less rendits:

more /boot/grub/grub.conf
# grub.conf generated by anaconda
#
# Note that you do not have to rerun grub after making changes to this file
# NOTICE:  You have a /boot partition.  This means that
#          all kernel and initrd paths are relative to /boot/, eg.
#          root (hd0,0)
#          kernel /vmlinuz-version ro root=/dev/hda2
#          initrd /initrd-version.img
#boot=/dev/hda
serial -unit=0 -speed=115200				<*****
terminal -timeout=10 serial console			<*****
default=0
timeout=10
#Comment out grapical display				<*****
#splashimage=(hd0,0)/grub/splash.xpm.gz			<***** Just commented out
password --md5 $1$fh90j/$x9kwgLF4hiuK8IDAEb.t31
title Red Hat Linux (2.4.7-10smp)
        root (hd0,0)
        kernel /vmlinuz-2.4.7-10smp ro root=/dev/hda2
        initrd /initrd-2.4.7-10smp.img
title Red Hat Linux-up (2.4.7-10)
        root (hd0,0)
        kernel /vmlinuz-2.4.7-10 ro root=/dev/hda2
            console=ttyS0,115200			<*****
        initrd /initrd-2.4.7-10.img

<***** mark the lines added

I got my info from:
http://www.dell.com/us/en/esg/topics/power_ps1q03-stanton.htm


Added 16Jan06  --siggy

After booting check that you have tty(s) available.
dmesg | grep tty
setserial -g /dev/ttyS[01]

Next edit /etc/inittab
#adding serial console availability to this machine 16Jan06  --siggy
S0:2345:respawn:/sbin/mgetty -b -r -s 9600 -p "Serial Console Login: " ttyS0
place this after the existing "mingetty" lines

Edit /etc/securetty and add:
ttyS0

Stop the kudzu service
chkconfig kudzu off
service kudzu stop

Edit the /etc/inittab file and add the italisized fields.
# grub.conf generated by anaconda
#
# Note that you do not have to rerun grub after making changes to this file
# NOTICE:  You have a /boot partition.  This means that
#          all kernel and initrd paths are relative to /boot/, eg.
#          root (hd0,0)
#          kernel /vmlinuz-version ro root=/dev/hda2
#          initrd /initrd-version.img
#boot=/dev/hda
serial -unit=0 -speed=9600				<*****
terminal -timeout=15 console serial			<*****
default=0
timeout=10
#splashimage=(hd0,0)/grub/splash.xpm.gz			<***** Just commented out
title Red Hat Linux (2.4.7-10smp)
        root (hd0,0)
        kernel /vmlinuz-2.4.7-10smp ro root=/dev/hda2 console=ttyS0,9600		<*****
        initrd /initrd-2.4.7-10smp.img
title Red Hat Linux-up (2.4.7-10)
        root (hd0,0)
        kernel /vmlinuz-2.4.7-10 ro root=/dev/hda2 console=ttyS0,9600			<*****
        initrd /initrd-2.4.7-10.img

<***** mark the lines added

from the command line type "init q".  This will re-read the /etc/inittab file and the serial console should be active at this point.

I got my info from:
<http://www.dell.com/us/en/esg/topics/power_ps1q03-stanton.htm>
http://www.rajeevnet.com/linux/grub_serial_console.html

**********************************************************************
GRUB (29mar03 -siggy)

as root

# grub
> root (hd0,0)
NOTE: ,0=ext2fs  ,1 reiserfs
> setup (hd0)
> quit

This will setup grub to boot correctly (hopefully!)

ALSO you can run ~CS/bin/grub_conv.pl
**********************************************************************
7jul03 grub passwd update  (make sure you have the correct kernel)

/home/CS/bin/slurc -linux -file /home/siggy/SLord/bin/machines 
		   -ex grodd,lex 
 		   -c "cp -f /home/siggy/grub.conf /boot/grub/grub.conf"

Failure if wrong kernel is stated
Failure if wrong partition is stated (some machines are /boot some are /)
**********************************************************************
NIS (28may03 -siggy)

/usr/lib/yp/ypxfr -h laurel -p /etc/NIS/cinedom <mapname>
**********************************************************************
dsh to change root passwd on all machines (2jun03 -siggy)

The server passwd are changed by:
edit /etc/NIS/passwd.h (cut and past from a /etc/passwd file)
make

the desktop machines root passwd are changed by:

edit /home/CS/bin/rsync_files for linux and sgi

as root on a trusted host

setenv WCOLL /home/siggy/docs/PERL/alive 
(list of machines names generated by /home/siggy/docs/PERL/active-mach-list or
you can use laurel:/etc/NIS/hosts)

/home/siggy/DISH/dsh/dsh /home/CS/bin/ras
**********************************************************************
To tar-up a dir

tar -cjvf ldap.bz2 LDAP
**********************************************************************
Wacom install	(24jun03 madonna)

cp ~CS/wacom/XF86Config-4.underdog /etc/X11
mv XF86Config-4 XF86Config-4.ORIG
mv XF86Config-4.underdog XF86Config-4

cp ~CS/wacom/wacom.o /lib/modules/2.4.7-10/kernel/drivers/usb/

restart "X"

also see ~CS/wacom
**********************************************************************
grep trick 13mar01 (Chris Johnson)

grep -B6 -A2 moon <filename>

-B = before (6 lines)
-A = after  (2 lines)
moon = search for string
<filename> = filename
**********************************************************************
File Maker Pro (1jul03)

If it doesn't show you a server list change from Appletalk to TCP/IP
**********************************************************************
8jul03 Clearing disk drives 

Bookmark folder called DriveKiller

OR

dd if=/dev/zero of=/dev/fd0 bs=512 count=2880

OR

diskzapper (July LinuxJournal pg.12)

OR

This will zero out the mbr.
dd if=/dev/zero of=/dev/fd0 bs=512 count=1

~siggy/LINUX/DISKZAPR

dd if=~siggy/LINUX/DISKZAPR/diskzapr.flp of=/dev/fd0 bs=1440

Will create a bootable floppy that will wipe hard disks.

17Dec10  --siggy

http://www.cyberciti.biz/faq/linux-remove-all-partitions-data-empty-disk/

The simplest command to remove everything from Linux hard drive is:
# fdisk /dev/sdb
# dd if=/dev/zero of=/dev/sdb  bs=512  count=1
# fdisk -l /dev/sdb
**********************************************************************
29jul03 Pavel

on SGI this will remotely restart the network:

( /etc/init.d/network stop ; /etc/init.d/network start ) & 
**********************************************************************
Foundry email from Suri 5Aug03 and 11Aug03

telnet 192.168.0.254
login: foundry
passwd:
en
login: foundry
passwd:
telnet@Core-BI8K# config t
telnet@Core-BI8K(config)# vlan 13
telnet@Core-BI8K(config)# show config

bunch-O-stuff

telnet@Core-BI8K(config-vlan-13)#vlan 14				#switch to this vlan
telnet@Core-BI8K(config-vlan-14)#no untag e 4/19 e 4/20 e 4/21 		#remove ports from this vlan
telnet@Core-BI8K(config-vlan-14)#vlan 13				#switch to this vlan
telnet@Core-BI8K(config-vlan-13)#untag e 4/19 to 4/21			#add this port
added untagged port ethe 4/19 to 4/21 to port-vlan 13.	
telnet@Core-BI8K(config-vlan-13)#wr mem					#write out changes
.Write startup-config in progress.
.Write startup-config done.
Sync config data in flash...Done 

other commands:

inst e <port number>

for switch support find the port that the switch is plugged into and:
telnet@Core-BI8K>en
User Name:foundry
Password:
telnet@Core-BI8K#config t
telnet@Core-BI8K(config)#vlan 14
telnet@Core-BI8K(config-vlan-14)#tag e 3/16
added tagged port ethe 3/16 to port-vlan 14.
telnet@Core-BI8K(config-vlan-14)#wr mem
.Write startup-config in progress.
.Write startup-config done.
Sync config data in flash...Done

This added vlan 14 support to switch 10.1.10.7 (3524 on 20nov03 with help from Suri)

Looking at the config of a port:

sh int e BLADE/PORT

telnet@Core-BI8K#sh int e 1/2
GigabitEthernet1/2 is down, line protocol is down
  Hardware is GigabitEthernet, address is 0004.8084.1c01 (bia 0004.8084.1c01)
  Configured speed 1Gbit, actual unknown, configured duplex fdx, actual unknown
  Member of L2 VLAN ID 10, port is untagged, port state is BLOCKING
  STP configured to OFF, priority is level0, flow control enabled
  mirror disabled, monitor disabled
  Not member of any active trunks
  Not member of any configured trunks
  No port name
  MTU 1518 bytes, encapsulation ethernet
  30 second input rate: 0 bits/sec, 0 packets/sec, 0.00% utilization
  30 second output rate: 0 bits/sec, 0 packets/sec, 0.00% utilization
  0 packets input, 0 bytes, 0 no buffer
  Received 0 broadcasts, 0 multicasts, 0 unicasts
  0 input errors, 0 CRC, 0 frame, 0 ignored
  0 runts, 0 giants, DMA received 0 packets
  0 packets output, 0 bytes, 0 underruns
  Transmitted 0 broadcasts, 0 multicasts, 0 unicasts
  0 output errors, 0 collisions, DMA transmitted 0 packets
**********************************************************************
Cisco 3524 vlan switch	(pavel)

telnet (upper one is 10.1.10.7; lower one is 10.1.10.17)
enable
config terminal
interface fastethernet 0/20
switchport access vlan 10
exit
exit
write m
exit
**********************************************************************
dd + bzip2		(pavel)

To compress a disk (/dev/sda)
dd if=/dev/sda bs=4k | bzip2 -zc > /hosts/netapp/vol/images/snoopy_dd_bs4k.bz2

To decompress "b.bz2" and output to xv.jpg (I think)
bzip2 -dc b.bz2 | dd of=xv.jpg

**********************************************************************
to locally mount netapp home accounts.

# mount netapp:/vol/homes/users /grodd1 -t nfs
**********************************************************************
to look at the GUI interface to the netapp 

in a browser type:

http://10.1.10.26/na_admin

Login: root
PW:    server PW
**********************************************************************
 machines siggy3Oct03

domainname is in /var/yp/ypdomain

ypxfr lives in /usr/lib/yp
**********************************************************************
LINUX machines siggy27may04

domainname is set in /etc/sysconfig/network 
Or in
/etc/resolv.conf
**********************************************************************
SGI machine to the new SANs suri/siggy 20Oct03

Six (11) steps:

1) upgrade to 6.5.16(f or m)
 	cd /home/dist/SGI/OS/IRIX_6.5.16/dist
	as root type SoftwareManager
	Click Custom Installation
	add  /home/dist/SGI/OS/IRIX_6.5
	add  /home/dist/SGI/OS/IRIX_6.5.16
	Done
	reboot

2) install Navisphere
	cd /home/dist/LINUX/emc/irix
	inst -f 640_agentcli

3) install CVFS
	cd /home/dist/APPS/CVFS/adic/39
	cp cvfsdist.IRIX650[f or m].tar /var/tmp
	cd /var/tmp
	tar xvf cvfsdist.IRIX650[f or m].tar
	cd /var/tmp/cvfsdist/sgi/dist
	inst -f dist6.5[f or m]
		i cv_base* cv_clnt* 

4) cp ~dist/LINUX/emc/agent.config.irix /etc/Navisphere/agent.config

5) cp ~dist/LINUX/emc/fsnameservers /usr/cvfs/config/fsnameservers

6) chkconfig sesdaemon off ; /etc/init.d/sesdaemon stop

7) remove /sans(1-8) mount points
	rm -rf /sans /sans{2,3,4,5,6,7,8,9}

8) create mount points
        mkdir -p /sans/master{1,2,3} /sans/paint{1,2,3} /sans/scanrec{1,2,3}

9) edit /etc/fstab add:

cat >> /etc/fstab << EOF
master1                 /sans/master1    cvfs    verbose=yes 0 0
paint1                  /sans/paint1     cvfs    verbose=yes 0 0
scanrec1                /sans/scanrec1     cvfs    verbose=yes 0 0
master2                 /sans/master2    cvfs    verbose=yes 0 0
paint2                  /sans/paint2     cvfs    verbose=yes 0 0
scanrec2                /sans/scanrec2     cvfs    verbose=yes 0 0
master3                 /sans/master3    cvfs    verbose=yes 0 0
paint3                  /sans/paint3     cvfs    verbose=yes 0 0
scanrec3                /sans/scanrec3     cvfs    verbose=yes 0 0
EOF

10) reboot with one of the fibers unplugged.

When booted replug the fiber
	hinv (find the controller number of the Fiber Chanel)
	scsiha -pr (Fiber Channel controller number)
	ioconfig -f /hw

Allocate space on the SANs

chkconfig cvfs on

reboot again
**********************************************************************
network monitoring

mii-tool
**********************************************************************
MAIL 29Oct03

ssh martin -l root

mailq		Lists queued mail
mailq -q 	Attempts to deliver queued mail

/var/mail/<username>
**********************************************************************
Navisphere Engineering Mode		Alvin Chan 6Nov03

Ctrl-Shift-F12
	PW=messner
**********************************************************************
du -Sh <directory name>
**********************************************************************
LINUX monitor resolution change

edit /etc/X11/XF86Config-4

Chand the "Sceen"  section to the resolution you want.

***** Standard monitors will be: *****
Section "Screen"
        Identifier "Screen0"
        Device "NVIDIA GeForce 2 (generic)"
        Monitor "SGI 21-inch GDM-5411"
        DefaultDepth 24
        Subsection "Display"
                Depth 24
                Modes "1280x1024"
        EndSubSection


***** Cleo has a 24" monitor *****
Section "Screen"
        Identifier "Screen0"
        Device "NVIDIA GeForce 2 (generic)"
        Monitor "SGI 21-inch GDM-5411"
        DefaultDepth 24
        Subsection "Display"
                Depth 24
                Modes "1900x1024"
        EndSubSection

**********************************************************************
Cisco Registered User		1dec03 (siggy)

Your CCO User ID is - siggy
Your CCO new p/w is - ngashoch

**********************************************************************
apt-get (ampl) 3dec03

freshrpm.net
	download/install rpm
apt-get update		#to update the rpm db
apt-get upgrade 	#will list all the blessed rpm from RH
			#and ask if you want to install
**********************************************************************
x86 (486 and above),
i686 (Pentium Pro, Pentium II, Athlon/Duron and above)
Pentium III
Pentium 4
Athlon XP 

CPU types SCLUG 8jan04

If you're really going for the "bleeding edge" performance edge, there 
are some packages (e.g. RedHat stock kernels) that come precompiled for 
the AMD Athlon (".k7" in the filename).  For the Pentium III on up, and 
Celeron, you would use the ".i686" versions.  Most people, especially 
those new to Linux, have no need to use these.

**********************************************************************
To scroll through the tabs on mozilla

CTRL-PageUp/PageDown 

**********************************************************************
Stolen from Pavel's NOTES 18dec03

to break a lock on redhat 7.x kde
rlogin as root (or switch to console ctrl+alt+f1)
su to user and issue following command:
dcop kdesktop KScreensaverIface quit

for RedHat8.0 you can ps -ef | grep lock and kill that process.

**********************************************************************
lp on IRIX boxes 24dec03

lpq does not work use "lpstat -t" for listings
lprm does not work use "cancel shredder-<number from lpstat>"

Correct files can be found in ~siggy/LP (luxor was the test machine)

1) new /etc/printcap
2) new /var/spool/lp/interface/shredder
3) new /var/spool/lp/model/netface
4) chown lp.lp <2 and 3>
5) setenv DISPLAY grodd:0.0
	# printers
	   Printers
	     Change Connection
	       non SGI remote spooler
6) /etc/init.d/lp stop / start
**********************************************************************
Ethernet loopback	(Philip 16jan04)

wht/org ----------|
org/wht -----|    |
wht/grn      |    |
blu/wht ---- | -- |
wht/blu -----|
grn/wht
wht/brn
brn/wht

connect wht/blu and org/wht
connect wht/org and blu/wht
**********************************************************************
&&& KickStart &&& --siggy 23apr04

Kickstart is dumb about travesing the filesystem.  Maxumum of 2 up and 
1 down.  Which means you have to put stuff close to .../RedHat/RPMS.  
I created a directory (at the same level as RedHat) called Custom-RPMS
That can be used.  You can put RPMs in this directory and soft link
them in the RPMS directory.  The genhdlist will find them this way.
**********************************************************************
http://www.ram.org/computing/linux/linux_cluster.html#toc4 (3mar04)

install one machine exactly the way I want to. I then create a tar and gzipped 
file of the entire system and place it on a CD-ROM which I then clone on each 
machine in my cluster.

The commands I use to create the tar file are as follows:

tar -czvlps --same-owner --atime-preserve -f /maxa/slash.tgz /
 
I use have a script called go that takes a hostname and IP address as its 
arguments and untars the slash.tgz file on the CD-ROM and replaces the hostname 
and IP address in the appropriate locations. A version of the go script and the 
input files for it can be accessed at: 

http://www.ram.org/computing/linux/linux/cluster/

This script will have to be edited based on your cluster design.

 To make this work, I also use Tom's Root Boot package ( http://www.toms.net/rb/) 
to boot the machine and clone the system. The go script can be placed on a CD-ROM 
or on the floppy containing Tom's Root Boot package (you need to delete a few 
programs from this package since the floppy disk is stretched to capacity).

*********************************************************************
19mar04 -siggy

Netmasking

192.168.1.1/24
            ^^ are the netmask indicators

First 24 bits of the netmask are set = 255.255.255.0 (class "C")

  8  7  6  5 4 3 2 1

128 64 32 16 8 4 2 1

  1  1  1  1 1 1 1 1 =255 

------------------------------
| 8 bits per octet           |
| 8 bits "set" =255          |
| 3 octets "set" = class "C" |
------------------------------

192.168.1.1/16 is a netmask of 255.255.0.0 (class "B")

www.linuxjournal.com/article.php?sid=3400

/23 = 512 hosts
/24 = 256 hosts
/25 = 128 hosts
**********************************************************************
set prompt  = '[%m]{%/}(%h) # '

%m = hostname
%/ = fullpath
%h = number of commands

NOTE:  The # should be changed to % for a user AND don't forget the space

**********************************************************************
23mar04 -siggy

Converting from Ext2 to Ext3 use tune2fs -j /dev/sdb
**********************************************************************
24mar04 --siggy   While trying to figure out how to restore from Ghost 
I found this:

My desktop has only two partitions on it, / and /boot. Let's say I want to 
image them separately. Here's what I would do. First, I would create a file 
called 'tar_ignore' in the root directory of whichever file system I am 
currently going to image. In this file I will include a list of directories 
I don't want to be included in the archive. Mine looks like this for my / partition:

    dev
    proc
    tmp
    mnt

This allows your command line to be quite a bit shorter, and also allows you 
to change which directories you want/don't want without having to alter the 
command line you use. This is helpful if you use a shell script to create 
the archive. I will then create the archive with the following command line:

# tar -cvplP -X tar_ignore -f /tmp/root.tar /

What are my switches doing?
# 'c' is 'create'
# 'v' is verbose (only use if you actually want to see what is going on. I 
don't use this one normally.)
# 'p' maintains file permission information
# 'l' will only archive directories within the current filesystem (i.e., if 
you are archiving /, it will automatically skip any directories which are 
part of other file systems)
# 'P' does not strip the leading backslashes on file names
# 'X' specifies the file to read to get a list of files to leave out of the 
archive (in my case 'tar_ignore')
# 'f' specifies the name of the file to create ('/tmp/root.tar' in this case)

The final backslash specifies what file I want to archive, which is / in this case.

This creates a file called 'root.tar' in my /tmp directory. This file is an 
image of my / file system, minus any directories I don't need archived. I'd 
repeat the procedure for my /boot partition, but I don't need a 'tar_ignore' 
file there. There isn't anything I want to skip for that partition.

**********************************************************************
tar with all the bells and whistles 25mar04

tar --atime-preserve --same-owner cjvplPf - test.bz2 test

What are my switches doing?
# `--atime-preserve` don~t change access times on dumped files
# `--same-owner` create extracted files with the same ownership
# 'c' is 'create'
# `j` filter the archive through bzip2
# 'v' is verbose (only use if you actually want to see what is going on. I 
don't use this one normally.)
# 'p' maintains file permission information
# 'l' will only archive directories within the current filesystem (i.e., if 
you are archiving /, it will automatically skip any directories which are 
part of other file systems)
# `P` extract all protection information
# 'f' specifies the name of the file to create ('/tmp/root.tar' in this case)

**********************************************************************
25mar04 -siggy

to remove a file/dir beginig with a "-"

rm -- --atime-preserve
**********************************************************************
2apr04 -siggy

line numbering in (x)emacs

M-x setnu-mode <CR>
**********************************************************************
&&& KickStart &&& --siggy 23apr04

Kickstart is dumb about travesing the filesystem.  Maxumum of 2 up and
1 down.  Which means you have to put stuff close to .../RedHat/RPMS.
I created a directory (at the same level as RedHat) called Custom-RPMS
That can be used.  You can put RPMs in this directory and soft link
them in the RPMS directory.  The genhdlist will find them this way.

**********************************************************************
##from the web....17may04 --siggy  Didn't work for what I wanted but 
  introduced "cut"

mkdir /tmp/tftpboot 
mount 192.168.100.50:/home/linux/RH-80/tftpboot /tmp/tftpboot
perl -e 'printf(uc(sprintf("%02x", 192).sprintf("%02x", 168).sprintf("%02x", ` \
ifconfig eth0 | grep inet | cut -d. -f3`).sprintf("%02x", `ifconfig eth0 | grep inet \
| cut -d. -f4 | cut -d" " -f1`)))' > /tmp/hextoremove || failed
hexip=`cat /tmp/hextoremove`
rm /tmp/tftpboot/pxelinux.cfg/$hexip
umount /tmp/tftpboot

This one works....... 21may04  --siggy

# This will automatically delete the symlink on server to keep from loop building machines
# in ...pxelinux.cfg you will have to touch the hexip-hostname-IPaddress as in:
# C0A86433-toyota-192.168.100.51 to get this to work
# xargs from Tom Laporte (THANKS) 17May04
echo "deleting link"
mkdir /siggy
mount 192.168.100.50:/home/linux/RH-80/tftpboot/pxelinux.cfg /siggy
cd /siggy

# this is more elegant but if DNS is not available it will fail.
# ls | grep `hostname -i` | sed 's/-.*.//' | xargs -n1 /bin/rm -f

ls | grep `ifconfig | grep Bc | sed s/inet// | sed s/addr:// | sed 's/Bcast.*.'// | sed 's/^[ \t]*//'` | sed 's/-.*.//'| xargs -n1 /bin/rm -f
umount /siggy


NOTE:  make note to where the backtics "`" are! They are used to get to a certain point.
**********************************************************************
more sed commands from porsche-ks.cfg  24May04  --siggy
for creating a GATEWAY entry in /etc/sysconfig/network

{/etc}(203)# ifconfig | grep Bc | sed s/inet// | sed s/addr:// | sed 's/Bcast.*.'// | sed 's/[ \t]*$//' | sed 's/^[ \t]*//' | cut -d. -f1-3 | sed 's/$/.1/'
192.168.100.1

{/etc}(205)# hostname -i | cut -d. -f1-3 | sed 's/$/.1/'
192.168.100.1
**********************************************************************
Found on web 27may04  --siggy

This is the appropriate section in my XF86Config-4:

Section "InputDevice"
Identifier "mouse"
Driver "mouse"
Option "Protocol" "PS/2"
# Option "Protocol" "IMPS/2"

# /dev/mouse should point to /dev/psaux if the mouse is PS/2.
# /dev/mouse should point to /dev/input/mice if the mouse is USB.
Option "Device" "/dev/mouse"
Option "ZAxisMapping" "4 5"
Option "Emulate3Buttons" "no"
EndSection
**********************************************************************
Found http://fedoranews.org  27May04  --siggy

Here is the command to rotate an image from the jpegtran man page:

              jpegtran -rot 90 -trim foo.jpg > foo90.jpg
              jpegtran -rot 270 -trim foo.jpg > foo90.jpg

This will keep the original jpeg data and not lose any information. 
- submitted by Richard A. Bray.
**********************************************************************
Using rsync for Quick Backup

http://fedoranews.org/mweber/rsync/rsync_intro.shtml
http://www.mikerubel.org/computers/rsync_snapshots/#Rsync
**********************************************************************
EMACS or rather .emacs 3jun04  --siggy  This will give you a non-posix 
dired sort

(custom-set-variables
  ;; custom-set-variables was added by Custom -- don't edit or cut/paste it!
  ;; Your init file should contain only one such instance.
 '(case-fold-search t)
 '(current-language-environment "UTF-8")
 '(default-input-method "rfc1345")
 '(vc-dired-listing-switches "-alvh"))
(custom-set-faces
  ;; custom-set-faces was added by Custom -- don't edit or cut/paste it!
  ;; Your init file should contain only one such instance.
 )

XEMACS 6jun04  --siggy

~siggy/.xemacs/custom.el contain
(custom-set-variables
 '(dired-listing-switches "-alvh"))
(custom-set-faces)

Open xemacs &
  Options
    Advanced (Customize)
      EMACS
        EMACS
	  Environment
	    Dired
	      Programs
		Dired Listing Switches
	 	  add "vh" to the "-al"

**********************************************************************
4aug04  --siggy
Insert key toggles overwrite-mode

**********************************************************************
EMACS and XEMACs 6jun04  --siggy

~siggy/.xemacs/custom.el contain
(custom-set-variables
 '(dired-listing-switches "-alvh")
 '(list-directory-verbose-switches "-lahv"))
(custom-set-faces)

**********************************************************************
SED  8jun04  --siggy

sed -i 's///'  will overwrite the file you are working on.
**********************************************************************
from DW notes 22jun04
howto make an RPM

3Feb09  --siggy better NOTES in ~/BURN-IN/SYSBASHER/RPM/RPMbuild-NOTES
                                ~/SIGGY_2/linux/SRC/RPMbuild-NOTES (same just in 2 different places)
install
tar
cp tar to /usr/src/redhat/SOURCES
make .spec file in /usr/src/redhat/SPECS
rpmbuild -ba specname.spec

source RPM will be in and RPMS will be in SRPM

There is more to it than that but that is a start
**********************************************************************
"Linux Programming by 
Example" by Kurt Wall. 

**********************************************************************
20Apr04 --siggy

set prompt = "[%m]{%/}(%h)> "

%n = home (login)
%op = time
%c = current directory
%d = day
%h = number of commands
%l = tty
%m = hostname
%w = month
%b = BOLD
%D = day of month
%m = FQMN
%u = underline
%W = number of month
%y = year
%/ = full path name

**********************************************************************
5aug04  --siggy   @@@ teh ";" is the field seperator

cat group | sort -t ; -k3 (sort by third field but unix style sort)

cat group | sort -t ; -k3 -n 

@@@ t = field seperator
@@@ k = key (what field to sort on)
**********************************************************************
10Aug04  --siggy

shutdown -h +10 "Saturn3 going down to be rebuilt. -siggy"
This will give you a wall every min (for 10 min) with the message in quotes.
**********************************************************************
18Jun15  --siggy
# man 5 crontab

 cron(8) examines cron entries once every minute.

       The time and date fields are:

              field          allowed values
              -----          --------------
              minute         0-59
              hour           0-23
              day of month   1-31
              month          1-12 (or names, see below)
              day of week    0-7 (0 or 7 is Sun, or use names)
min hour DoM M DoW <command>


EXAMPLE CRON FILE for /etc/crontab 28sep04
# run five minutes after midnight, every day
5 0 * * *       $HOME/bin/daily.job >> $HOME/tmp/out 2>&1
# run at 2:15pm on the first of every month -- output mailed to paul
15 14 1 * *     $HOME/bin/monthly
# run at 10 pm on weekdays, annoy Joe
0 22 * * 1-5   mail -s "It's 10pm" joe%Joe,%%Where are your kids?%
23 0-23/2 * * * echo "run 23 minutes after midn, 2am, 4am ..., everyday"
5 4 * * sun     echo "run at 5 after 4 every sunday"

mail -s See also : 1May08, 22May08, 10Feb09
**********************************************************************
IRIX ypserv = nsd 28sep04
/usr/etc/rpcinfo -p will give you what daemons are running.

/var/ns/domainename/*/ contains the maps

**********************************************************************
chkconfig level meanings	1Oct04  --siggy

When I use chkconfig --list atria it returns service atria does not
support chkconfig, which is the same response when I try and do 
chkconfig --add atria.

Your file needs to be in the proper format.  Checkconfig wants a line:
# chkconfig: 345 40 60
Where 3, 4, and 5 are the levels to start at.  40 is the start value,
and 60 is the kill value.  (The symlinks will be named S40 and K60...)
**********************************************************************
USB  11Oct04  --siggy

http://www.linux-usb.org/USB-guide/c122.html

add to /etc/fstab
none	/proc/bus/usb	usbdevfs	defaults	0   0

To mount the filesystem, you need to be root. Use the mount command: mount -t usbdevfs none /proc/bus/usb

19Sep11  --siggy  mount filetypes

      -t, --types vfstype
              The argument following the -t is used to indicate the filesystem type.  The filesys-
              tem types which are currently supported include: adfs,  affs,  autofs,  cifs,  coda,
              coherent,  cramfs,  debugfs, devpts, efs, ext, ext2, ext3, ext4, hfs, hfsplus, hpfs,
              iso9660, jfs, minix, msdos, ncpfs, nfs, nfs4, ntfs,  proc,  qnx4,  ramfs,  reiserfs,
              romfs,  squashfs,  smbfs,  sysv, tmpfs, ubifs, udf, ufs, umsdos, usbfs, vfat, xenix,
              xfs, xiafs.  Note that coherent, sysv and xenix are equivalent and  that  xenix  and
              coherent  will be removed at some point in the future use sysv instead. Since ker-
              nel version 2.1.21 the types ext and xiafs do not exist anymore. Earlier, usbfs  was
              known as usbdevfs.  Note, the real list of all supported filesystems depends on your
              kernel.

*********************************************************************

22Oct04 LINUX NIS master and IRIX NIS slave
http://www.linux-nis.org/nis-howto/

Linux as NIS master will not work with a Irix 6.5.x NIS slave server
Irix 6.5.x doesn't allow TCP connections for all ypserv functions. Please add the ypserv-1.3.7a.diff patch from ftp.kernel.org for yppush or update to the latest ypserv version. ypserv 1.3.8 and later should be ok.

Irix 6.5.x NIS slave server crashes Linux NIS master
A Irix 6.5.x NIS slave server which is bound to the Linux NIS master server could crash the Linux ypserv. As workaround please make sure that the Irix workstation is bound to itself (localhost).

ypinit -s master fails due a ypxfr seg.fault.
You use a Linux libc 5.x with NYS support. There is a well know problem with this libc: If a service in /etc/nsswitch.conf isn't available, the libc seg.faults. Fix: Add your NIS master server to /etc/hosts.

I couldn't login on a client
You have read the old NIS-HOWTO and put a "*" in the password field of the last /etc/passwd line? Forget it. With libc 5 or glibc 2 (libc 6) you will overwrite your password with this. Remove the "*" from "+:*:::::".

**********************************************************************
netbackup command 10/26/04  Vivian

1.	set tape to expire
cd /usr/openv/netbackup/bin/admincmd
bpexpdate -ev 000016 -d 0

2.	check for available media
cd /usr/openv/netbackup/bin/goodies
available_media

**********************************************************************
elearning 1Nov04  ps command  --siggy

The f option, without a dash, uses ASCII characters to graphically represent a hierarchical view of the parent-child relationships between processes.  

# ps f -ef
**********************************************************************
elearning 1Nov04  kill command  --siggy

-1 or SIHUP
-9 or SIGKILL
-15 or SIGTERM
-19 or SIGSTOP
-20 or SIGSTP
-18 or SIGCONT
-10 or SIGUSR1

**********************************************************************
WHat is on a SGI CD  4nov04 Brian Stone(SGI)

insert CD into drive
open Netscape
in url windoiw:
	file:/CDROM/WhatsNew/install/cds_frame.html
**********************************************************************
On SGI machines  11Nov04  Chris Duffy from SGI

cd /etc/init.d
./network stop; route -F flush; ./network start
**********************************************************************
14dec04  --siggy
from: http://www.linuxdevcenter.com/pub/a/linux/excerpt/lnxckbk_1/index.html

You can use standard Linux utilities to generate a pre-installation list of all files on your system. 
Then generate a post-installation list, and diff the two lists to make a list of newly-installed files. 
This example uses JOE: Joe's Own Editor:

# find / | grep -v -e ^/proc/ -e ^/tmp/ -e ^/dev/ > joe-preinstall.list
Compile and install your new program, then generate the post-installation list:
# find / | grep -v -e ^/proc/ -e ^/tmp/ -e ^/dev/ > joe-postinstall.list
Then create a list of files installed by Joe by diffing the two lists:
$ diff joe-preinstall.list joe-postinstall.list > joe-installed.list

**********************************************************************
to configure "X" 13jul04  --siggy

# redhat-config-xfree86
#startx

in Fedora Core3 6May05
# vim /etc/X11/xorg.conf

**********************************************************************
&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&
&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&
**********************************************************************
The following is taken from linux101 21jan05
Not sure if therre is anything good....
**********************************************************************
To use this doc, use the find command on your browser 
to search the text for your area of interest.
-------------------------------------------------
BASIC SURVIVAL STUFF FOR LINUX
-------------------------------------------------
To shutdown the computer
	halt   -> "shutdown -h 0"
	reboot -> "reboot"
---------------------------------------------------------
lilo -u will uninstall lilo but will not repair bmr
---------------------------------------------------------
CAN'T BOOT!!!
  @ "boot:" type "linux init=/bin/sh"
If that doesn't work, 
  boot off floppy, 
  @ "boot:" type "linux root=/dev/hda1 initrd="

Boot only to "li"
  I solved my "li" lilo problem on one system. It turnes out the system has 
  no serail ports, and it was cloned from a system with serial ports.  The 
  first 2 lines of lilo.conf contain:
 serial=1,9600n8
append="console=ttyS1,600 consloe=tty1
Once I erased the lines and ran lilo, the system was bootable.

------------------------------------------------------------
Boot Process
------------------------------------------------------------
init 	- father of all processes, 
	- launches the kernl.
	- suppresses 'signal 9' (the halt process)
	- location of init /sbin/init in SuSE
	- location of configuration /etc/inittab (specifies run levels)
		- run levels specifed in inittab are in 
			/sbin/init.d/ in SuSE, 
			/etc/init.d on RedHat 
		After booting, the system starts in Run Level speified in /etc/inittab, line "initdefault".
		Change Run Level by becoming super user, "init <runlevel>".
Halt system with "init 0",
Restart system with "init 6"

init config file = /etc/inittab
line syntax:	 cc:states:action:process
action keywords: 
   wait		-wait for process to finish before running next
   respawn	-auto restart if it dies.
   once		-start process if not already runing, no wait
   boot		-only execute at boot time, no wait
   bootwait	-only execute and wait before running next
   initdefault	-specify default run level (usually 2 or 3, or 5 for linux)
   sysinit	-execute before init accesses the system console (driver loading)
   off		-if a process is running, kill it
----------------------------------------------------
Start xwindows by default by changing /etc/inittab, 
on a redhat system, append this line to the end of /etc/inittab:
        # syntax=   cc:states:action:process
	# xdm is now a separate service  
	x:5:respawn:/etc/X11/prefdm -nodaemon
-----------------------------------------------------
/etc/X11/prefdm should look likethis:
#!/bin/sh

PATH=/sbin:/usr/sbin:/bin:/usr/bin:/usr/X11R6/bin

# We need to source this so that the login screens get translated
. /etc/profile.d/lang.sh

# Run preferred X display manager
preferred=
if [ -f /etc/sysconfig/desktop ]; then
	if grep -q GNOME /etc/sysconfig/desktop 2>/dev/null; then
		preferred=gdm
	elif grep -q KDE /etc/sysconfig/desktop 2> /dev/null; then
		preferred=kdm
	elif grep -q AnotherLevel /etc/sysconfig/desktop 2> /dev/null; then
                preferred=xdm
	fi
fi
if [ -z "$preferred" ]; then
	if which gdm >/dev/null 2>&1; then
		preferred=gdm
	elif which kdm >/dev/null 2>&1; then
		preferred=kdm
	elif which xdm >/dev/null 2>&1; then
		preferred=xdm
	fi
fi
if [ -n "$preferred" ] && which $preferred >/dev/null 2>&1; then 
	exec `which $preferred` $*
fi
exit 1	
-----------------------------------------------------
Configure xdm's chooser for host selection
http://www.linuxdoc.org/HOWTO/Tips-HOWTO-3.html#ss3.8	
1.Edit the file that launches xdm most likely /etc/rc/rc.6 or /etc/rc.local) so that it contains the following lines in the xdm startup section.                
    /usr/bin/X11/xdm
    exec /usr/bin/X11/X -indirect hostname
2.Edit /usr/lib/X11/xdm/Xservers and comment out the line which starts the server on the local machine (i.e. starting 0:) 
3.Reboot the machine and you're home and away. 	
-----------------------------------------------------
SUSE vs. RedHat gdm
    Config files for RedHat gdm are located in /etc/X11/gdm
    Config files for SuSE gdm is located in /etc/opt/gnome/gdm
 Modify login image by editing gdm.conf, Logo=<path to new image>
-----------------------------------------------------
- Process of changing run levels, 'stop scipts' of the current run level shut down system,	
   then 'start scripts' launch the new run leve.
-init reads /etc/iniitab, which specifies the path to /sbin/init.d/rc <run level>
-'rc' calls stop scripts on any process which will not be started in the new run level.
-comparison between /sbin/init.d/rc<current runlevel>.d && /sbin/init.d/rc<new run level>.d
-Stop scripts in rc#.d start with the letter 'K'
-Start scripts in rc#.d start with the letter 'S'

2 types of scripts (directly vs. indirectly stared by init)
	-directy:  boot time, power failure, Ctrl-Alt-Del
	-indirectly: changing run levels, init starts 'rc' which runs a script.

init starts 'boot', configured from /sbin/init.d/boot.d
	-file system is checked, 
	-kernel daemon is launced, 
	-files are deleted from /var/lock, 
	-network loopback is activated (specified in /etc/rc.config), 
	-system time set, 
	-'isapnp' starts plug-n-play hardware.
	-init starts 'boot.local'
	-Sononomous to Autoexec.bat
	-boot.setup 
------------------------------------------------------------------------
System information:
------------------------------------------------------------------------
  utils:		  Modem: 
  /usr/bin/control-panel  /usr/bin/modemtool
  /bin/linuxconf	  /usr/bin/rp3
  /bin/xconf		  /usr/bin/kppp
			  /bin/netconf

  mouse:		  networking:
  /usr/sbin/mouseconfig	  /usr/sbin/netconfig #non-gui
			  /bin/netstat
  process monitoring:	  /bin/netconf
  /usr/bin/top		  /sbin/ifconfig -a
			  /usr/sbin/lsof -i tcp # protocal-port bonding
			  /etc/nsswitch.conf
			  /etc/pcmcia/network.opts (SUSE) 
				
  starup items:		print:	
  /usr/X11R6/bin/tksysv	/usr/bin/printtool
-------------------------------------------	
Finding a command:
  which <command name>
  type whereis <command name>

Kernl version, network name for machine, processor:
   type 'uname -a'

Switch to the other shells
What is your current shell?
  type env |grep SHELL

Customizing your prompt and enviornment in this file:
  Shell		Config File
  ksh, ash, sh	.profile
  bash		.bashrc
   ----> for bash env variables, type `shopt`
   -----> enable one dimentional arrays with extglob=on

  csh, tcsh	.cshrc
  zsh		.zshrc
  
 The prompt is set based on the shell:
 type PS1="[\u@\h \W]\\$ "

Type man <shell name> to see the settings for each env.
	to tell you the truth, I've learned most of it from people,
	but a man page is more accessable.

If you use bash (shell) use the tab for filename compleation. 
 Type the first part and press tab to coplete the name.  
 If it doesn't finish the word, press tab again.
 If multiple matches exist, they will print.
 If no matches exist, nothing is displayed.
	
Open Tar files ( *.tar and *.tar.gz, *.tgz) 
	tar -xzvpf <package.tar.gz> <package.tgz>
	gzip -d  <package.tar.gz> 
	 then tar -xvpf <package.tar>

To compile and install a program:	 
	untar the package.
	Inside the dir read the 'README' and/or 'INSTALL'.  
	type './configure'
	type 'make'
	type 'make install'
	If it fails for some reason, get on the news groups and read.

Ctrl-Alt-stuff:
	restart Xserver  	ctrl-alt-backspace 
	Switch terminals	ctrl-alt-F1 to F7 will Work.
        change resolution	ctrl-alt-- and ctrl-alt-+	
--------------------------------------------------
dual boot- install 9x then nt then linux.
	lilo prompt is configurable. edit /etc/lilo.conf and man lilo
	commercial versons of suse, caldara.

	For Imac- Yellow Dog distriblution of Linux.
	*Mandrake is the only distribution to take advantabe of the pentium
	instructions.
Text Editors:
	Linuses favorite editor is nedit
	http://www.nedit.org/
	Slick edit costs too much

Utility on the web for checking PNP devices, and tells you the right settings:
	www.lunux.org/hardware has a link.
	sunsite.unc.edu linux section.
-----------------------------------------------------------
floppy mount
    mount /dev/fd0 /mnt/floppy -r vfat
----------------------------------------------------------------
cd mount
    mount /dev/cdrom /mnt/cdrom
-------------------------------------------------------------------
zip mount
    mkdir /mnt/zip
    mount -t vfat /dev/hdd4 /mnt/zip
-------------------------------------------------------------------
Copy contents of floppy to home directory
    cp -r /mnt/floppy/* /home/username/
       r stands for recursive
Enable Color ls
  type "ls --color=auto"
  if it worked, 
  type "alias ls='ls --color=auto'" 
  make it perminent by putting the alias in /etc/bashrc
-------------------------------------------------
Recording your commands to a file
  type "script ~/<filename>"
  
  * Use this before someone starts doing stuff on your system.
  
  <ctrl>-S to pause recording, 
  <ctrl>-Q to restart recording,
  <ctrl>-D or <ctrl>-C to kill the recorded information.
  
  When you are done with a script it will need some cleaning 
	(due to control chars)
  Run this command on the file:
	sed 's/\^M//' <filename> <cleaned-filename>
	use this command to do global search and replace.
---------------------------------------------------------
Network card setup
  looked for my nic on the web by searching for linux and card number.
  they refered me to 
  modprobe *.o
  depmod
  insmod
  
  cd /lib/modules/2.2.5-15/pcmcia
  depmod 3c589_cs.o

  start linuxconf
	go into basic host information
	go to adapter 1
	chose eth0 for Net device
	chose dhcp or give static IP.
	quit, quit, quit
        type /etc/rc.d/init.d/network restart
-----------------------------------------------------------
DHCP refresh:
	type pump -R
-----------------------------------------------------------
Set DNS manually:
	vi /etc/resolve.conf
Control the order of name resolution:
	vi /etc/nsswitch.conf
Now you need to restart the service
	/etc/rc.d/init.d/network restart all
-----------------------------------------------------------
Why does sendmail hang for 5 minutes on startup with RedHat?
  /etc/hosts file: 
    change to 
    127.0.0.1               localhost
    10.56.142.1             yourbox     <<---this will be your ip insted
----------------------------------------------------------
Find files over a certian size  Find big files ( big large files )
    find / -xdev -size +100000c
----------------------------------------------------------
    du -ks cache  w gives the size 
    tar czpvf root.tgz root  
----------------------------------------------------------
RPM rpm help, common commands:
   Adding RPM packages
	install: 		rpm -i <package name>
	upgrading: 		rpm -R <package name>
   List installed rpm's and grep for a particular one, 
        rpm -qa |grep <part of package name> 
        i.e. This will show you the version numbers:
             rpm -qa | grep XFree86
        i.e. Find all the files that belong to a rpm
             rpm -la |grep XFree86
   Show the owner rpm for an installed command/program
     rpm -qf `which X`
   Check the sig of the rpms on Suse:
   fingerprint = 79C1 79B2 E1C8 20C1 890F 9994 A84E DAE8 9C80 0ACA   
  	pushd /var/lib/YaST/patches/i386/update/7.2/ 
	 for direct in $dir
	 do   
	   cd $direct
	   files=`ls`
	   for file in $files
	   do
	         rpm -v --checksig $file
	   done
	   cd ..
	 done    
  Building rpm's:
    # determine what paths your installation of RPM expects
    rpm --showrc	
	# _sourcedir    =Where RPM looks for source files (tar files, etc.)
        # _srcrpmdir    =Where RPM puts new source RPM files
        # _rpmdir       =Where RPM will put new binary RPM files (in an architecture-specific subdirectory) 
----------------------------------------------------------
Configuring my sound card:
    sndconfig does not support my laptop sound card
    A perfect site for the IBM ThinkPad 600's:
http://www.pc.ibm.com/qtechinfo/MIGR-4BP6Q6.html
    first it will play a stupid test, and then it plays a cool midi test.
    mine is working.  
    It replaced a file /etc/conf.modules and renamed it conf.modules.bak
-------------------------------
Sample /usr/sbin/sound_control:

#!/bin/bash
#a script to load/unload the sound modules
#on an IBM ThinkPad 600e
#1999 Ben Brillat - brillb@rpi.edu
#thanks to the linux kernel people for their instructions on the CS4232 chip.
#this file should be named:
#  /root/scripts/sound_control
#this should ONLY be called from the APM scripts
# REMOVE ALL /etc/rc.d/rcN.d/S85sound files!!! (check rc3.d and rc5.d) 
#source function library
. /etc/rc.d/init.d/functions
case "$1" in
  start)
/sbin/modprobe sound dmabuf=1
/sbin/insmod ad1848
/sbin/insmod uart401
/sbin/insmod cs4232 io=0x530 irq=5 dma=0 dma2=1
sleep 1
/usr/bin/aumix -f /etc/aumixrc -L > /dev/null
  stop)
/usr/bin/aumix -f /etc/aumixrc -S
/sbin/rmmod cs4232
/sbin/rmmod uart401
/sbin/rmmod ad1848
/sbin/rmmod sound
/sbin/rmmod soundcore
  restart)
$0 stop
sleep 5
$0 start
  *)
echo "Usage: $0 {start|stop|restart}"
exit 1
esac
exit 0
--------------------------------------
Sample /etc/conf.modules

alias eth0 tulip
keep

options thinkpad enable_smapi=1 enable_superio=1 enable_rtcmosram=1 #   Added by tpctlify
keep #                                                                  Added by tpctlify
keep #                                                                  Added by tpctlify
path[thinkpad]=-? #                                                     Added by tpctlify
alias char-major-10-170 thinkpad #                                      Added by tpctlify

--------------------------------------
disk hard drive partition table run fdisk --help or fdisk -l

--------------------------------------------------
Caldare and Red Hat will look the same.
Suse is much different.
	Fry's Electronics didn't have all this last year last year!!!!!
	SUSE 7.0		(kernel 2.2.16)
	SUSE 6.4		(kernel 2.2.14)
	SUSE 6.3 		(kernel 2.2.13),
	TurboLinux6.0 		(kernel 2.2.13)
	Corel (it didn't say on the box, but it comes with Civilization)
	Slackware 7 		(kernel 2.2.13,
	Redhat 6.2 		(kernel 2.2.14)
	Redhat 6.1 		(kernel 2.2.12)
	Caldara OpenLinux 2.3 	(kernel 2.2.10)
macs->  YelloDog Linux 1.2	(http://www.yellowdoglinux.com/)
--------------------------------------------------
dos utils rawrite.exe to creat boot 
unix command to crate the floppies would be:
  dd if=bare of =/dev/rfd0 obs=18k
  dd if=lnx.img of=/dev/fd0 
--------------------------------------------------
Cable modem users:  
  if you have a cable modem, and want to server web pages, go to:
  www.powerpegwin.net register your computer on there domain, and 
  run a pirl script that will update your IP as the cable modem ip 
  changes.
--------------------------------------------------
ctrl-alt-backspace will restart xwidows, but not the computer.
--------------------------------------------------
Samba Stuff
--------------------------------------------------
client side:
    Find all servers on network:
   /usr/bin/smbclient -L <pdc ip> -W <domain name> -U<username> -d1
    List shares on a srver:
   /usr/bin/smbclient -L <server> -W  <domain name> -U<username> -d1
   
bouce server (smbd):
	/etc/rc.d/init.d/smb restart
from clinet check the samba shares:
	smbclient -L <smbd server ip>
	nmblookup -S <smbd server ip>
mount a share
	mkdir -p /mnt/<servername>/<sharename>
	smbmount //<servername>/<sharename> /mnt/<servername>/<sharename> username=<user>/<group>

let any user run smbmount
	people say use setuid to let a user run a command as root
	they never tell you how to do it.
	which smbmount #to find the path
	chmod +s /usr/local/smbmount #to set the setuid bit on the file
	ls -l /usr/local/smbmount #now you will see an S insted of an x
fstab can contain smbmounts like this:
	//<server>/<share> /<mountpoint>/    smb username=<user>/<workgroup>,password=<passwrod> 0 0

gui browsers you may want to use:
	xSMBrowser (im using 2.2.9)              http://www.bnro.de/~schmidjo
	LinNeighborhood looks better (0.4.3)	 www.public.iastate.edu/~chadspen/

Config files are in /etc/smb.conf.sample /etc/smb.conf
Read this file, since it will tell you about each area.
I uncommneted the following lines:
	workgroup=<myworkgroup>
	server string = <give your server a name>
	hosts allow = (i.e. 192.168.1. 127. )
	printcap name = /etc/printcap
	load printers = yes
	guest account = nobody
	max log size = 500000000
	smbpasswd file = /etc/smbpasswd
	username map = /etc/smbusers
	socket options = TCP_NODELAY SO_RCVBUF=1892 SO_SNDBUF=8192
	interfaces = <ip of the nic that will be serving>
	encrypt passwords = no
	map to guest = never
	password level = 0
	null passwords = no
	;    allow hosts = <hosts names or ip's on you lan> 
	deny hosts = no
	os level = 0
	preferred master = no
	domain master = no
	wins support = yes
	dead time = 0
	debug level = 0
	comment = Mother
# sample share to my drive /dev/sdz5
	[sda5]
    	    comment = Local sda5 Drive
    	    browseable = yes
    	    writable = yes
    	    public = yes
    	    path = /mnt/sda5
	[printers]
	    comment = All Printers
	    path = /var/spool/samba
	    browseable = no
	    guest ok = yes
	    writable = yes
	    printable = yes
	[netlogon]
	    comment = all
	    path


start samba for the first time
samba start

go to localhost:901 for the web administration

for samba www.flux.org for links to setup cable modem/dsl 
  
CREATE SAMBA USER AND GROUPS
coas/system/accounts/
add smbuser (useradd smbuser)
make group (groupadd -g 505 smb)

make directory for samba and public (
cd /home/
mkdir samba
mkdir public
chown smbuser:smb /home/public
chmod 2777 /home/public
----------------------------------------------------
licq
the only one that has come close to working.
latest one can be found at http://licq.wibble.net/
this is what i did:
	logon as root
	down load to /root/
	type configure and a directory will be made
	cd into the directory
	type make
	type make install
	cd into the plugins dir, and cd into one of the available plugins
	type configure 
	type make
	type make install
	type cd /user/local/bin
	type licq&
	a box will appear telling you to reg a new user, so click ok
	select system/user 
----------------------------------------------------------------   
php (personal home page) of 3.0: 
	to get this to work you must have the librarys, no mater what system you use. 
	Is analagous to active server pages.   
	Works on appachi on a unix machine, by default. 
	Works on a nt machine if the ODBC drivers are present. 
	Tutorial at http://www.php.net/als99/
-----------------------------------------------------------------------------
xscreensave screensaver screen saver problems

When you type xscreensaver in a terminal you get 
# xscreensaver
Xlib: connection to ":0.0" refused by server
Xlib: Client is not authorized to connect to Server
-or-
# xscreensaver -display
Xlib: connection to ":0.0" refused by server
Xlib: Client is not authorized to connect to Server
xscreensaver: Can't open display: :0
xscreensaver: initial effective uid/gid was root/root (0/0)
xscreensaver: running as nobody/nobody (99/99)
xscreensaver: Errors at startup are usually authorization problems.
              Did you read the manual?  Specifically, the parts
              that talk about XAUTH, XDM, and root logins?

              http://www.jwz.org/xscreensaver/man.html
Fix:
Don't logon as Root and try to run the xscreensaver, or hack it.
man xhost
xhost +localhost
xhost+root@johns.ohlone.cc.ca.us
xhost +root@johns.ohlone.cc.ca.us
xscreensaver -display localhost:0.0
xscreensaver -display johns.ohlone.cc.ca.us:0.0

to lock
Ctrl-Alt-l
or
xscreensaver-command -lock
-------------------------------------------------------------------------------
export display
su root -
xhost +127.0.0.1
xeyes -display 127.0.0.1:0.0
this will pop up on the remote machine (or 127.0.0.1 in this case)
-------------------------------------------------------------------------------
apache web server
start apache by typing /usr/local/apache/bin/apachectl start
----------------------------
etherial
netxray
snif your self!
---------------------------
# display all your serial settings
setserial -g -a /dev/ttyS0 /dev/ttyS1 /dev/ttyS2 /dev/ttyS3 /dev/ttyS4

fix serial problems ttyS0 - 4
man setserial
/etc/rc.local -> look for rc.serial
---------------------------
if you have more than 64 mb ram, need to append to the lilo.conf file the line "mem=<amount shown at boot up>"
I have 128mb ram, so I entered mem=130496
---------------------------------
Install ssh on 2 machines.  I used sshd version 1.2.27 [i586-unknown-linux]
	Redhat 6.1 setup:
	1. su root
	2. tar -xzvpf ssh-1.2.27.tar.gz
	3. cd ssh-1.2.27
	4. ./configure
	5. make
asroot->6. make install
	7. ./sshd
	8. Each user account will  need to run "ssh-keygen"
Replace "telnet <ip or machine name>" with "ssh <ip or machine name>"
Replace "ftp <ip>" with "scp <file/dir> <remote_user>@<ip>:~/
	9. from one system, copy your key to the other system:
		scp ~/.ssh/identity.pub <remote_user>@<ip>:~/.ssh/authorized_keys
	11.type ssh <ip of the remote ssh server>

The user creates his/her RSA key pair by running
       ssh-keygen(1).  
       The private key in ~/.ssh/identity
       The public key  in  ~/.ssh/identity.pub 
       The user  should then copy the identity.pub to .ssh/authorized_keys in his/her home
       The directory on the remote machine (the authorized_keys file corresponds to the conventional .rhosts file, and has
       one key per line, though the lines can be very long).  After this, the user can log in without giving the pass
       word.  RSA authentication is much more secure than rhosts authentication.

If you need to replace the machine's /etc/ssh_host_key and /etc/ssh_host_key.pub 
       Type ssh-keygen -f /etc/ssh_host_key -N '' 
       Remove any enteries from all users ~/.ssh/known_hosts
       
---------------------------------------
Syntax for the Secure copy:
scp <local_file> <username>@<remote ip or name>:/home/<username>/

-----------------------------------------------------
Adding your applications to the right tool bar:
	When you seee applications listed in a tool bar, in any window manager they are located in only a few places:
Case in point, I found all the locations for Identifying the instance of "Applications"
	/etc/X11/applnk/Applications
	/usr/share/gnome/apps/Applications
	/usr/share/applnk/Applications 
	/usr/share/applnk/Settings/Applications
so I created a dir, in tach palce and tried to see what worked.
 mkdir /etc/X11/applnk/MySit_MoFo
 mkdir  /usr/share/gnome/apps/MySit_MoFo
 mkdir /usr/share/applnk/MySit_MoFo
 mkdir /usr/share/applnk/Settings/MySit_MoFo
<none of my addtions did anything prior to restarting the window manager. 
-------------------------------------------------------
So you used gmenu and deleted your gnome Applications links
 on suse, you need to get a machine that you didn't mess up.
 go to the /opt/gnome/share/gnome/ directory
 tar -czvpf apps.tar.gz /opt/gnome/share/gnome/apps 
 scp apps.tar.gz looser@hozedhost:~/
 mv apps.tar.gz /opt/gnome/share/gnome/
 cd /opt/gnome/share/gnome/
 tar -xzvpf apps.tar.gz
 logout and login
 This, however, will leave you with gmenu not working any more.
 "Unable to retrieve GNOME installation directory"
----------------------------------------------------
linuxconf will not start.  
prints "Segment Fault" when it is run.
	Problem:  One of our config files got corrupted characters in it.
	Fix:	  check the last config files you were editing for bogus chars.
		  replace the file with a different one, or restore from backup.
-----------------------------------------------------
Problem: netscape displays funny fonts and java crashes
Fix: chkfontpath --list
     chkfontpath --add /usr/X11R6/lib/X11/fonts/75dpi
--------------------------------
The netscape.cfg belongs in the app-defaults directory. 
The location of the app-defaults directory varies with the
version of X you are running. Here are two specific locations: 
SunOS and Solaris: /usr/openwin/lib/app-defaults/
IRIX: /usr/lib/X11/app-defaults/ 
my redhat: /opt/netscape/
----------------------------------
When composing a new message, you want to add text to the top of the message:1. In $HOME/.netscape/preferences.js add
        user_pref("mailnews.reply_on_top", 1);
2. Under EDIT > Preferences > Mail & Newsgroups > Formatting:
        Use the HTML Editor to Compose Messages
3. Under EDIT > Preferences > Mail & Newsgroups > Identity:
        You *must* specify signature file.
-------------------------------------
disk wont' boot.  lilo messed up

make backup of mbr 
dd if=/dev/hda of=backup-archive-date bs=512 count=1
su
fdisk /dev/hda
p <enter> for listing the partitions
/dev/hda was not active
a <enter>to make a partion active
1 <enter>to select partiion 1
------------------------------------------
Backup for entire Linux System 
# The cool people at Road Warrior made this possible
# Soren Curry helped me run rsync
# 2/9/2000 by: John Stile                               
#====================================================
#       Clone disk using bullet drive:
#====================================================
#

# Partition new disk
fdisk to crate a 6Gb partition of ext2 file system.
# I don't have the details.

# Make sure the drive is empty
# ** If you have to restart this process, start here **
/sbin/mke2fs /dev/hde1

# create a place to mount the drive.
mkdir /mnt/harddrive2

# mount the drive
mount /dev/hde /mnt/harddrive2 -t ext2

# Now shut off some basic things that drag on cpu
kill -9 `ps -el |grep xlock |awk '{print $4}'`
kill -9 `ps -el |grep x-scereensaver |awk '{print $4}'`

# setup a monitor: gdiskfree or use a while loop
        # gdiskfree is a graphical display of drive space
        gdiskfree
        # while loop runs in a terminal, displaying disk usage
        # once you hit <enter> after end, the loop begins. 
        # If you want, also add ls /mnt/harddrive2
        while (1)
        df -k 
        sleep 1
        end 

# In another window start rsync
# options a is archive to preserves attributes, v is verbose
# [!mpl]* means everything that does not start with m, p, or l in
current dir.
# 
rsync -av [!mpl]* lib /mnt/htt2

# when this process is over, make a proc and mnt directory
mkdir /mnt/harddrive2/proc
mkdir /mnt/harddrive2/mnt

# move everything in /mnt except /mnt/harddrive2 
cd /mnt
rsync -av [!h]* /mnt/htt2/mnt/

Reboot and pray it works

Mine didn't work, and I was left with a macine that read LI at boot time
I got no help from anyone, because it was soo easy for them.
So I made a boot floppy form anohte macine:
su 
mkbootdisk --device /dev/fd0 2.2.12-20


	
But that didn't fix the problem, so I started messing with files in /boot
This resulted in breaking things further, with ony a LIL- at boot time

So I made a new boot disk off another macine, and at lilo: I typed
linux root=/dev/hda1 initrd=/boot/vmlinuz-2.2.12-20
--------------------------------------------
Advanced stuff 
============================================
man and learn uniq
man and learn sort
--------------------------------------------
Mail all users on a system
   mail `cat /etc/passwd |awk '{print $1}'` < memo_file.txt
--------------------------------------------
clean file system and get drive space back (drivespace)
--------------------------------------------
Find the biggest files
as root type:   du -S / | sort -n
                ls -lR / | sort +4n

as joe user type:   du -S / | sort -n 2> /dev/null


Find the total size of many directoryies directory
  du -skd /*

find all core dumps on system:
  ls -laF `find / -name core`

see the size of the directoryies in an a directory:
ls -lAF /datatel/ |du -sbr * 

look at specific lines in an output use awk:
ls -lAF |awk '{print $6, $7, $8, $9}'

awk -F. '{print $1}' shsed1.txt

find 
  find / -name '*nfs*' |grep sbin
./portmap start
  948  ./nfs start

mount localhost:/ ~jstile/damn
ps -aux |grep '*nfs*'

find what is using the files in a directory:
find ./ <pattern> |xargs fuser {}

list files in a dir, print just the file name, and remove the last .# characters.
ls -lF |awk '{print $9}' |
-------------------------------------------
How-to sed:

sed 's/LookForThis/ReplaceWithThis/' file   # s = subsitute
sed 's/Unix/UNIX/g' file      # g=global

sed -n '1,2p' file	      # -n=only print lines that match pattern
			      # print just first 2 lines of a file
sed -n '/UNIX/p' file	      # print just lines containing UNIX

sed '1,2d' file		      # d=delete.  delete first 2 lines of the file
sed '/UNIX/d' file	      # delete lines containing UNIX
sed '5d' file		      # delete first 5 lines
sed '1,3d' -e 's/Unix/UNIX/g' file      #First delete the top 3 lines, and then
					upcase the occurance of all Unix
sed '/west/,/east/s/$/***VAC***/' datafile 
			      #from the first line in a file that contains the word west,
			      #to the the next line in a file that contains the word east, 
			      #append ***VAC*** to the end of each line. 
---------------------------------------------
pipes
>>  append or create with std out
>   create or replace with std out
2>  create or replace with std error
<   feed with std in
---------------------------------------------
glob-expressions/file name substitution:
*       = zero or more characters
?       = single character
[ ... ] = specifies any character enclosed between the brackets for a single postion.
---------------------------------------------
regurlar expressions:
.       = single character
.*      = zero or more characters
^       = match the beginning of a line
$       = match the end of a line
\       = treat next char as literal (not special)
^\.     = match files that begin with .
[^A-Z]  = match lines that begin with A thorugh Z
.$      = match a single character at the end of a line.
^$      = match line with no characters.
^ $     = match line with single space
\(  \)  = load pattern into register
----------------------------------------------
Math with variables:
  ----------------------
  this does not work
  ----------------------
  i=1
  i=$i+1
  echo $i
    1+1
  ----------------------- 
  in bash
  -----------------------
  i=1
  let i=$i+1
  echo $i
    2
  -----------------------
  sh
  -----------------------
  sh
  i=1
  i=`expr $i + 1`
  echo $i
    2
  -----------------------
  precedence */ % -+
  -----------------------
   expr 10 + 20 / 2
    20

  ------------------------
  match chars in the first argument against a regex in the second arg.
    expr "$file" : ".*"
    
  ------------------------
  grep for more than one thing:
  egrep 'thing1|thing2|thing3'
  
----------------------------------------------
NFS 
----------------------------------------------
Keywords: 	rpcinfo -p, 
		nfs [start,stop,status]
		exportfs -a 
		/etc/export 
		etc/fstab
		/var/log/syslog
----------------------------------------------
RUNLEVEL SETTINGS
control-panel, click nfs/add/runlevel5/id 61
control-panel, click nfs/start/start/done
ps -aux |grep '*nfs*" -> [nfsd]

 usr/sbin/rpcinfo -p localhost
 program vers proto   port
    100000    2   tcp    111  portmapper
    100000    2   udp    111  portmapper
    100003    2   udp   2049  nfs
START/STOP
	/etc/rc.d/init.d/nfs [start/stop/status]
	this will not work without /etc/exports file
CREATE SHARE
mkdir /export
vi /etc/exports and type this:
rp#
#NFS share for the network
#
/export/ johns2(rw)
:wq
Reload file in rpc.nfsd and rpc.mountd type:
/usr/sbin/exportfs -a
<this locked my system, so I rebooted and it was fine>
ADD TO THE SHARE WITH SYMBOLIC LINKS	
ln -s  /usr/local/download/ /export/download		

ACCESS SHARE
/etc/fstab 	file config on client.
--------------------------------------------------
# Create 2 users that will share one home dir:
--------------------------------------------------
1.  add umask=002 into .profile, local.cshrc,
2.  vi etc/passwd make group 106 the primary group for lweiner
3.  useradd -u 1079 -g 106 -d /export/htdocs/computer_st/lweirner   -s /sbin/
sh pyoung
4.  chgrp -hR 106 lweirner
5.  chmod 775 lweirner
6.  chmod 664 .profile local.*
7.  vi .profile, local.profile, local.cshrc, and local.login
    to each, add "umask 002"   
---------------------------------------------------
# Send all syslogs from one server to another server
---------------------------------------------------
1. On the syslog reciever system:
	vi rc-script for starting syslogd 
	a.  Allow the domain:  syslog -r -s my.domain.name
	b.  Allow a host: 	syslog -r -l <list file>
2. On the syslog sender system:
	vi /etc/syslog.conf # add the line *.*		log.server.fqdn
	restart syslogd from rc-scripts
----------------------------------------------------
# Quotas, quotas, setup quotas
---------------------------------------------------
# trun it on
edit /etc/fstab appending usrquota
	/dev/sda7   /home  etc2   default,usrquota  1  2
touch /home/quota.user /home/quota.group
chmod 600  /home/quota.user /home/quota.group
reboot

 #Edit quotas (soft and hard)
 edquota -u <user to edit>

 edit /etc/security/limits.conf
	@users	soft	item value # set for all users in group
	john	hard	item value # set for one user
	items= core, cpu, nproc, or maxlogins	

 #ulimits are as follows:
 #ulimit shell command to set system wide limits

  -- or --

 edit /etc/profile
	ulimit -n 512
 # -a	Display all limits
 # -c 	Max core file size
 # -d	Max size fo a process's data segment
 # -f 	Max size of files created by the shell
 # -m	Max resident set size
 # -n	Max open files
 # -p	Pipe size
 # -s	Max stack size
 # -t	Max CPU time in seconds
 # -u	Max processes
 # -v	Max virtual memory

edit /etc/security/limits.conf
---------------------------------------------------
# Security
# Audit for programs that can run as root (setuid bit)
---------------------------------------------------
Display all the vulnerable files:
	find / -perm -4000 -uid 0 
only fix is to turn them all off. 
i.e. 	chmod u-s /bin/ping
	chmod u-s /bin/mount
	chmod u-s /bin/umount
	could make /bin/su executable only by the wheel group
	chmod u-s /sbin/dump (backup utility)
	chmod u-s /sbin/restore (backup utility)
	chmod u-s /usr/bin/at ; chkconfig atd off (use cron insted)
	chmod u-s /usr/bin/chage (password ageing)
	chmod u-s /usr/bin/chsh (lets users change their default shell)
	chmod u-s /usr/bin/crontab (only root should have use cron) 
	chmod u-s /usr/bin/gpasswd (change group passwd in /etc/gshadow)
	chmod 0000  /usr/bin/{rcp,rlogin,rsh}
	chmod u-s /usr/sbin/traceroute 
	chmod u-s /usr/sbin/userhelper (lets users chagne pw with a gui, known vulner.)
	chmod u-s /usr/sbin/usernetctl (allows users to bring down network interface)
	
ok /usr/sbin/sendmail (if you want users to send mail)
ok /usr/libexec_ptchown (used by terminal programs and the like to grab pty's)
ok /usr/bin/sperl5.00503
ok /usr/bin/procmail (Unless you receive no mail on this host) 
ok /usr/bin/{lpq, lpr, lprm} (if you print from the machine, leave it alone)
ok /usr/X11R6/bin/Xwrapper
ok /usr/bin/passwd
? /sbin/unix_chkpwd 
? /sbin/pwdb_chkpwd

	
Four ways to limit the danger of SUID root programs:
1.Strip the SUID bit, so the program runs as the running user, instead of running as root.
2.Define a special group for the program and make the program executable by members of the group
3.Strip the world(other)-execute bit, leaving it executable by the owner and group, but still SUID
4.Strip SUID and use Sudo to allow only certain users to run this command.
--------------------------------------------------------------
changing the ip : moble ip ipswitcher network config
--------------------------------------------------------------
I use my computer at work and home, so I need to change the network settings.
1st, I configure my laptop at work with yast, 
then copied /etc/pcmcia/network.opts to /etc/pcmcia/network.opts.work

2nd, when I went home I used yast to configure my laptop for home, 
and I copied /etc/pcmcia/network.opts to /etc/pcmcia/network.opts.home

for work, I run:
	cp /etc/pcmcia/network.opts.work /etc/pcmcia/network.opts
3rd, pop the card out and put it back in, or 
	type /etc/pcmcia/network check
And that's it.
This is so simple, no wonder I couldn't find anything on it.
---------------------------------------------------------------
Lessons from Tim Tuck
     ctrl-a takes you to the beginning of a prompt line,
     ctrl-u erases everything on the right
     ntsysv interface for runleves
     crtl-t transpose the last 2 letters of a line
     crtl-r gives a reverse search
     ctrl-w does same as ctrl-u
------------------------------------------------------------------
more shell stuff:
  upcase contents of a variable:
	TESTSTUFF='abaelkjlakdjf'
	typeset -u TESTSTUFF
	echo $TESTSTUFF
		ABAELKJLAKDJF
  truncate to 8 chars and lowercase everything.
	TESTSTUFF='ABAELKJLAKDJF'
        typeset -l8L TESTSTUFF
	echo $TESTSTUFF
		abaelkjl
------------------------------------------------------------------
xinetd	- the replacemnet for inetd

  Text menu for changeing run levels:
     ntsysv
  
  To list whats running: 
    chkconfig --list
  
  To disable services at all but run level 2 use: 
    chkconfig --level service off 
  
  To delete a services use: 
    chkconfig --delete service
    ntsysv
------------------------------------------------------------------
Setup a nic
------------------------------------------------------------------
	4 commands 2NO : ficonfig, route, ping, traceroute, netstat
	
	ifconfig to assign the ip and subnet of the nic:
	--------------------------------------------------------------------
	Desc: command		nic	host ip			subnet-mask
	--------------------------------------------------------------------
	loop back setup
	i.e. /sbin/ifconfig 	lo	127.0.0.1	netmask 255.0.0.0
	
	ipaddress setup
	i.e. /sbin/ifconfig	eth0	192.168.1.100	netmask 255.255.255.0
	
	route to setup a default gateway or route to network
	--------------------------------------------------------------------
	Desc: command		option	option	Subnet		
	--------------------------------------------------------------------
	loop back route
	i.e. /sbin/route 	add	-host	127.0.0.1
	
	route to local network
	i.e. /sbin/route 	add	-net	192.168.1.0
	
	default gateway   (the last ip is the gateway server/router on your subnet)
	ie.  /sbin/route	add	-net	default	gw 192.168.1.10
	
	--------------------------------------------------------------------
 	Resolution:  the order in which name resulition will occur:
 	--------------------------------------------------------------------
	order of name resolution
	/etc/hosts.conf:	
		order hosts, bind, dns
	
	order of name resolution
	/etc/nsswitch.conf
		hosts:  	files dns
		networks:       files dns
 
 	Local HosName to IP resolution
	/etc/hosts:
		127.0.0.1	localhost
		192.168.1.100	linux_workstation_1.mydomain.com linux_workstation_1 lw1
	
	Local NetworkID to IP resolution
	/etc/network:
		192.168.1.0	mydomain.com
		192.168.2.0	my_second_domain.com
    ------------------------------------------------------------------------------
    Persistant Multihome ip's: eth0:0 eth0:1 eth0:2:
    ------------------------------------------------------------------------------
    To add new IP addresses to network interface in FreeBSD you need to manually edit /etc/sysconfig file. 
    Just add one line per IP. Format of the file is self-explanatory. To see the current network interface configuration use: 
      ifconfig -a. 
    To add IPs in LINUX you need to create a new file per each IP in /etc/sysconfig/network-scripts directory. 
    You will find in this directory file with a name 'ifcfg-eth0' or very similar. 
    Open it in editor, you will easily recognize the first ip of your computer and figure out file format. 
    Now copy this file: $
      cp ifcfg-eth0 ifcfg-eth0:0 
    Now edit a new file: you need to change original ip to a second one. 
    Save edited file. 
    To add a third ip: 
      cp ifcfg-eth0  ifcfg-eth0:1 
    Again edit it to change the first ip to a third one.
    Now you have three similar files in directory
       /etc/sysconfig/network-scripts: ifcfg-eth0, ifcfg-eth0:0, ifcfg-eth0:1.
   Please notice filename format: it is mandatory. 
   Each of these files will provide IP information for a network initialising script. 
   To activate new IPs just reboot a computer. 
   You could activate new IPs by running network initialization script. 
   In LINUX:
      /etc/rc.d/init.d/network -reload
   In Windows NT you add IPs in
      Settings > Control Panel > Network >Protocols > TCP/IP > Properties > Ad
----------------------------------------------------------------------
#### The package iproute2 adds a bunch of kernel routing capabitity
/usr/sbin/ip link
	1: lo: <LOOPBACK,UP> mtu 16436 qdisc noqueue 
	    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
	2: eth0: <BROADCAST,MULTICAST,UP> mtu 1500 qdisc pfifo_fast qlen 100
	    link/ether 00:10:a4:e5:bc:12 brd ff:ff:ff:ff:ff:ff
	3: sit0@NONE: <NOARP> mtu 1480 qdisc noop 
	    link/sit 0.0.0.0 brd 0.0.0.0
/usr/sbin/ip address show
	shows your ip's
/usr/sbin/ip route show
	shows your route
 /usr/sbin/ip neigh show
	shows your ARP table
/usr/sbin/ip neigh delete 9.3.76.43 dev eth0
	delete the ARP entery for 9.3.76.43 from the table
/usr/sbin/ip rule list
	List the routing rules used by the kernel
	Default of 3 rules
	For policy based routing, compile kernel with 
		IP::advanced router and IP:policy routing
ip route list table local
	List all 
/usr/sbin/ip route list table main
/usr/sbin/ip route ls
	List the current routing table in CIDR
  # source routing example
   # create a new table in the table index file 
   echo 200 Rule1 >> /etc/iproute2/rt_tables
   ip rule add from 10.0.0.10 table Rule1 
   ip route add default via 192.96.98.253 dev ppp2 table Rule1
   ip route flush cache
#-------------------------------------------------------------
#Subnet Mask	Binary					CIDR
#-------------------------------------------------------------
#255.0.0.0	11111111.00000000.00000000.00000000	/8
#255.255.0.0	11111111.11111111.00000000.00000000	/16
#255.255.255.0	11111111.11111111.11111111.00000000	/32
#-------------------------------------------------------------

----------------------------------------------------------------------
#        Tunnels: IP-IP, GRE, PPTP
##IP-IP: 
   insmod ipip new_tunnel
   network A:			network B:
   network 10.0.1.0		10.0.2.0
   netmask 255.255.255.0	255.255.255.0
   router  10.0.1.1		10.0.2.1
           172.16.17.18		172.19.20.21
   RouterA: ifconfig tunl0 10.0.1.1 pointtopoint 172.16.17.18
	    route add -net 10.0.2.0 netmask 255.255.255.0 dev tunl0
   RouterB: ifconfig tunl0 10.0.2.1 pointtopoint 172.19.20.21
	    route add -net 10.0.1.0 netmask 255.255.255.0 dev tunl0
##GRE Tunnel:
   insmod ip_gre
   RouterA: ip tunnel add tunl0 mode gre remote 172.19.20.21 local 172.16.17.18 ttl 255
	    ip link set tunl0 up
	    ip addr add 10.0.1.1 dev tunl0
	    ip route add 10.0.2.0/24 dev tunl0 
   RouterB: ip ip tunnel add tunl0 mode gre remote 172.16.17.18 local 172.19.20.21 ttl 255
	    ip link set tunl0 up
            ip addr add 10.0.2.1 dev tunl0
            ip route add 10.0.1.0/24 dev tunl0
##IPsec: Not Done Yet ): sorry. 
	
  Load Sharing between 2 adapters:
        Filters put traffic in queues.  Use fwmark for netfilter filters
	Queues decide the order stuff is sent. ClassBasedQueue
   IF roterA has 2 nics, and routerB has 2 nics, and we want the nics to laod balance:
   These commands must be run on both machines 
    tc qdisc add dev eth1 root teql0
    tc qdisc add dev eth2 root teql0
   RouterA: ip addr add dev eth1 10.0.0.0/30
	    ip addr add dev eth2 10.0.0.2/30
	    ip addr add dev teql0 10.0.0.4/30
   RouterB: ip addr add dev eth1 10.0.0.1/30
	    ip addr add dev eth2 10.0.0.3/30 
	    ip addr add dev teql0 10.0.0.5/30
----------------------------------------------------------------------
Enlightenment interface:  Im still figuring it out but 
   type eesh
  then type help
  for each thing you can type help <thing> for more info.
----------------------------------------------------------------------
Changeing directories with push and pop commands
  cd /home/jstile
  pushd 
  cd /usr/locla
  pwd
    /usr/local
  popd
  pwd 
    /home/jstile
----------------------------------------------------------------------
Command history in bash can be recalled in a few ways.
  $! 		# last line of last command
  !! 		# last line
  !* 		# vererything but the command from the last line
  ^foo ^bar   	# in the last command, change foo to bar
  !!		# reexecute previous command
  !N		# execute the Nth command from history
  !-N		# execute the Nth command back from the current
  fc -l 100-1	# put your history in a list
  fc -s sting	# access command starting with a string
ctrl-r		# search history
ctrl-p ctrl-n	# scroll history (also use arrow keys).
ctrl-k		# erase, from curser to end of line
ctrl-a 		# move to beginning of a line 
ctrl-e		# move to end  of a line
----------------------------------------------------------------------
Common xwindows issues: MIT-MAGIC-COOKIE-1 Error
------------------------------------------------
   Running a gui window as root,  in a regular user's x-winodws session
   resutls in this error:

   root@nost_name:/home/jstile > nedit
    Xlib: connection to ":0.0" refused by server
    Xlib: Client is not authorized to connect to Server
    NEdit: Can't open display
Solution:  
  As joe user extract your ~/.Xauthority info:
  1. List all your magic cookies
     # the <hostname>/unix:0 is the one we want to move
     xauth list
     #  hostname.stilen.com:0  MIT-MAGIC-COOKIE-1  07e77a9f3793622f25640047c600a956
     #  webber/unix:0  MIT-MAGIC-COOKIE-1  07e77a9f3793622f25640047c600a956
  2. Save it to one to a tmp file
     xauth  extract /tmp/foo webber/unix:0
     # for perminance, As Root, add the current display authority to root's /root/.Xauthority:
  3.  Load the MAGIC-COOKIE into root's /root/.Xauthority
     xaut xauth merge /tmp/foo
  4. Verify that it loaded
    xauth list
    #  127.0.0.2:0  MIT-MAGIC-COOKIE-1  edda6146f1ae2293bc5b8005a21c6abe
    #  host_name/unix:0  MIT-MAGIC-COOKIE-1  07e77a9f3793622f25640047c600a956
  5. Launch the xwindows application.
    nedit 
Better Solution:  
  Important points to know about pam_xauth:
  pam_xauth (8) - forward xauth keys between users without manually doing it.
  			
		session optional /lib/security/pam_xauth.so arguments
			
		when  you  run  su  from  an xterm sesssion, you will be able to run 
		X programs without explicitly dealing with the xauth command 
		or ~/.Xauthority files.
			
		Source users can add  the  names of other users that they trust 
		as target users in the file ~/.xauth/export
			
		Similarly,   pam_xauth   looks   at   the   target  user's ~/.xauth/import 
		file if the target user  wants  to  accept xauth keys from the source user
			
		pam_xauth will do nothing  if you create the empty file ~/.xauth/import 
		and pam_xauth will do nothing  to  neither  import  keys, nor remove keys.
			
		pam_xauth  will  only forward keys if xauth can list a key connected to 
		the $DISPLAY environment variable.

		reference counts are kept in  the  file  ~/.xauth/refcount/targetname/keyname  along with the keys. 
			
		pam_xauth will work only if  it  is  used  from  a  setuid application
       			
		If you wish the root account to collect all possible keys and never remove 
		them from the database, you should
			
		Disable pam_xauth key import:
		  mv ~root/.xauth/import ~root/.xauth/import.bak
		  touch ~root/.xauth/import
			
		Add this to root's .profile:  
       		  if [ -n "$DISPLAY" -a -n "$LOGNAME" -a "$LOGNAME" != root ]
       		  then
           	    su -c $LOGNAME xauth -iq nextract - "$DISPLAY" | \
               	    xauth nmerge -
       		  fi


		Setup: 
		  mkdir ~/.xauth
       		  chmod 700 ~/.xauth
		  # Don't export any  xauth keys
		   touch ~/.xauth/import
		  # Want X to work when su'ed to any user.
		   echo '*' > ~/.xauth/export
		  # Frank trusts Bill and the root user, but no one else
		   echo 'root
       		   bill' > ~/.xauth/export
		
----------------------------------------------------------------------
Common xwindows issues: Running many xservers on one workstation
-----------------------------------------------------------------
  You want to start a second xserver on the workstation, 
  to run one as root and one as joe-user at the same time.
  1.  On the command line, become root.
    su
  2. Launch the xserver to ctrl-alt-F8:
    startx -- :1&
-----------------------------------------------------------------
Burning an iso image
-----------------------------------------------------------------
  1.  To create an iso file:
 	mkisofs -o mynewcd.iso /path/of/the/shit/i/stick/in/the/iso/ /and/this/one/too/
  2.  Scan the buss for the cdr device id
	cdrecord -scanbus
		0,6,0	6) 'SONY   ' 'CD-R  CDU926S  ' '1.1f' Removable CD-ROM
  3.  burn the cd
        cdrecord -dev=0,6,0 speed=2 -v -eject blahblah.iso    

DVD burinig and mounting  --siggy  19Dec07

1) mkisofs -r -J -o NOTES.iso NOTES.txt

2) dvdrecord -v -eject dev=/dev/dvd NOTES.iso

3) sudo mount -t iso9660 -o ro,loop=/dev/loop0 /dev/dvd /mnt

-----------------------------------------------------------------
SUSE
-----
Use /etc/rc.config  to set all kinds of options:
edit this file and execute /sbin/SuSEconfig
  ------------------------------------------------
  MAIL_REPORTS_TO="you@your_email_address.com"
  TIMEZONE="US/Pacific"		
  IFCONFIG_0="192.168.2.68 broadcast 192.168.2.255 netmask 255.255.255.0 up"
  DEFAULT_PRINTER="hplj4050"
  FQHOSTNAME="johns2.ohlone.cc.ca.us"
  OWNER_TO_KEEP_IN_TMP="root"
  START_CRYPTO_FILESYSTEMS="yes"
  MOUSE="/dev/psaux"
  KEYTABLE="us.map.gz"
  COCONSOLE_FONT="lat1-16.psfu"
  NSOLE_FONT="lat1-16.psfu"
  START_GPM="yes"
  GPM_PARAM="-t ps2 -m /dev/mouse"
  DISPLAYMANAGER="gdm"
  DEFAULT_WM="kde"
  SERIAL_CONSOLE="ttyS0,9600"
  CRON="yes"
  START_PCMCIA="yes"
  START_ATD="yes"
  START_FAM="no"
  START_IDEDMA="no"
  START_ISAPNP="yes"
  START_USB="yes"
  KDM_SHUTDOWN="root"  
  START_AUTOFS="yes"
  START_PORTMAP="no"
  START_XNTPD="yes"
  CREATE_YP_CONF="yes"
Firewall:
  START_FW="no"
  START_SSHD="yes"
  START_ALSA="no"
  START_ALSA_SEQ="no"
  YAST2_LOADFTPSERVER="yes"
               START_HTTPD="yes"
  START_DHCPD="no"
  START_SMB="no"
               START_SNMPD="no"
  START_ZEBRA="no"
  START_BGPD="no"
  START_RIP="no"
  START_HYLAFAX="no"
  START_TOMCAT="no"
  TOMCAT_HOME="/opt/jakarta"
  START_RADIUSD="no"
  START_IPSEC="no"
  START_MYSQL="yes"
  BOOT_SPLASH="yes"
 START_POSTGRES="no"
--------------------------------------------------------------------------
NTP servers:  To setup 3 servers to act as peers, and update off different time servers.
Everything about setup of a clock on linux.	
	 http://www.linuxsa.org.au/tips/time.html 
Quick fix:
	# set the hardware clock
	/sbin/hwclock --utc --set --date="10/29/2001 08:36:16"
	# set os clock based on hardware clock	
	/sbin/hwclock --hctosys --utc 
For auto daylight savings, check /etc/sysconfig/clock:
	UTC=true
--------------------------------------------------------------------------
hylafax:  
  setup
	run faxsetup and answer yes to everything
	run faxaddmodem
	  Wich device is your modem set to?  answer modem or ttySx
	  W
  sed a test message
	sendfax -n -D -d 123-4567 test_txt_file
  Config files
	/var/spool/etc/config.ttyS0 
-------------------------------------------------------------------------- 
 netcat :<snipp from the README>
  Outbound or inbound connections, TCP or UDP, to or from any ports
    outbound:  nc host port
 	echo -e "GET http://mason.stearns.org HTTP/1.0\n\n" | nc mason.stearns.org 80 | less 
  Full DNS forward/reverse checking, with appropriate warnings
  Ability to use any local source port
  Ability to use any locally-configured network source address
  Built-in port-scanning capabilities, with randomizer
  Built-in loose source-routing capability
  Can read command line arguments from standard input
  Slow-send mode, one line every N seconds
  Hex dump of transmitted and received data
  Optional ability to let another program service established connections
  Optional telnet-options responder 

http://www.admin-magazine.com/Articles/Netcat-The-Admin-s-Best-Friend
-------------------------------------------------------------------------
Quotas:
 repquota -u -v		# Command to list users on a filesystem
 repquota -g -v		# Command to list groups on a filesystem
 edquota -u		# Edit user quota
 edquota -g		# Edit group quota
 quota -v -u		# Check user quota
 quota -v -g		# Check group quota
 edquota -u -p		# Command to copy a user's quota
 edquota -g -p		# Command to copy a group's quota
 quotaon -u		# Command to turn on user quotas
 quotaon -g		# Command to turn on group quotas
 quotaoff -u		# Command to turn off user quotas
 quotaoff -g		# Command to turn off group quotas
 quotacheck -u -g	# Command to check quotas
 edquota -u -t		# Command to edit user grace times
 edquota -g -t		# Command to edit group grace times 
-------------------------------------------------------------------------
qmail queue reset:   
	Stop qmail
	for i in bounce info intd local mess remote todo; do
           find /var/qmail/queue/$i -type f -exec rm {} \;
     	done
	Restart qmail 
------------------------------------------------------------------------- 
serial port communication between computers: 
  1.  Attach a null-modem cable between the serial port on 2 linux boxes.  
  2.  On the Sender, type:  cat < /dev/ttyS0 
  3.  On the Reciver, type: echo Hello > /dev/ttyS0 
------------------------------------------------------------------------ 
LDAP/ldap ---I need to make a cheet sheet for ldap.  
   CN= myserver, Manager, joe user  (can have more than one cn) 
   OU= Sales, Marketing, Ops 
   O=  Stilen Corp, Pervasive Netwroks 
   C=  US 
   DN= Distinguishing name (i.e. dn="cn=Manager,ou=Ops,o=Stilen Corp,c=US,dc=stilen,dc=com") 
Search: 
   ldapsearch -b "my_search_base" "(search filter)" \ 
		-H ldap://localhost \ 
		-p 389 \ 
		-D "dn to bind as" 
		-W \ 
		-s "list of attribs" 

# this found and returned just jstile's cn.
 ldapsearch -H ldap://localhost \
	    -p 389 \
	     -D 'uid=jstile,ou=People,dc=test1,dc=com' \
	    -x \
	    -b 'ou=People,dc=test1,dc=com' \
	    -LLL  "(uid=jstile)" cn
 
# this found and returned just jstile's password
 ldapsearch -H ldap://localhost  \
 	    -p 389 \
	    -D 'uid=jstile,ou=People,dc=test1,dc=com' \
	    -x \
	    -b 'ou=People,dc=test1,dc=com' \
	    -LLL  "(uid=jstile)" userpassword

# this found and returned all users password
 ldapsearch -H ldap://localhost  \
 	    -p 389 \
	    -D 'uid=jstile,ou=People,dc=test1,dc=com' \
	    -x \
	    -b 'ou=People,dc=test1,dc=com' \
	    -LLL  "(uid=*)" userpassword


# this failed 
 ldapsearch -H ldap://localhost  \
 	    -p 389 \
	    -D 'uid=jstile,ou=People,dc=test1,dc=com' \
	    -X 'uid=jstile,ou=People,dc=test1,dc=com' \
	    -W \
	    -b 'ou=People,dc=test1,dc=com' \
	    -LLL  "(uid=*)" userpassword

------------------------------------------------------------------------ 
Is a "smurf amplifier" (i.e. it responds to ICMP broadcasts):
  cat /proc/sys/net/ipv4/icmp_echo_ignore_broadcasts
    if it is a 0
    then 
	# you are a  "smurf amplifier"
	#insert this line in /etc/init.d/boot.local
	echo "1" > /proc/sys/net/ipv4/icmp_echo_ignore_broadcasts
    if it is a 1
    then
	# you are not a "smurf amplifier"
	# don't need to do anything
------------------------------------------------------------------------
Linux Standard Base (LSB): LSB1.1 is Final
 	http://www.linuxbase.org/spec/
------------------------------------------------------------------------
Need to see which pam libraries are authenicating a user with ssh?
   Strace the ssh daemon on another port sending 
   the output to the file ssd.output 
 	strace -ossd.output -f /usr/sbin/sshd -p 6666
   From another terminal connect with ssh:
	ssh -p localhost -p 6666
   Look for the word pam in the ssd.output file:
	grep pam ssd.output
------------------------------------------------------------------------
**********************************************************************
Bash script  11Mar05 --siggy

ALL spaces needed

#!/bin/bash
T1="foo"
T2="bar"
if [ "$T1" = "$T2" ]; then
    echo expression evaluated as true
else
    echo expression evaluated as false
fi
**********************************************************************
/etc/default/login 4May05 --siggy
chgrp wheel /usr/bin/su and /usr/sbin/su
chmod 4750 /usr/bin/su and /usr/sbin/su

FOR SGI and SUN
***************

>>I work on a site where all Solaris 8 machines have this setting in /etc/default/login
>> 
>> CONSOLE=/dev/null
>> 
>> This in effect means that root cannot login to the machine from anywhere. The only 
>> way to gain root access is to login as a normal user, them su to root.
>> 

FOR LINUX
*********
Solution make sure /etc/securetty exists; just enter "tty1" through
"tty8", one per line and make the file owned by root and mode 600.

Even when entering the correct password, Linux says "Login incorrect"

linux# more /etc/securetty
tty1
tty2
tty3
tty4
tty5
tty6
tty7
tty8
**********************************************************************

PERL Telnet  26Apr05  --siggy

#!/usr/bin/perl

use Net::Telnet();

$t = new Net::Telnet ( Timeout=>10, Errmode=>'die');
$t->open('192.168.100.105');
$t->waitfor('/Username: /');
$t->print('siggy');
$t->waitfor('/Password: /');
$t->print('siggy');
$t->waitfor('/> /');
$t->print('who');
$output = $t->waitfor('/> /');
print $output;
**********************************************************************
DNS  24May05  --siggy

Turns a named map to a hosts file

more /var/named/named.hosts | awk '{print $4, $1 ".ss.xontech.com", $1}' > test-host-siggy

cat test-host-siggy | sort -t . -nk 4
**********************************************************************
vi adding things to .exrc for vi prefs  --siggy13jun05

map q :q!   # allow you to type q in stead of :q!
set number  # sets line numbers
**********************************************************************
h2n  /etc/hosts to DNS maps (forward and backward)  --siggy 13jun05

h2n

-s server_name    (DNS server name)
-d domain_name    (Domain name)
-n network        (Network 1)
-n network        (Network 2)
-n network        (Network 3)
-y                (Create serial number)
-M                (Don't create MX record, there a better ways to deal with this)
 
From pavel  13jun05

contents of h2n-cinesite.com:

-T RR='         A ???.???.???.???'
-d cinesite.com
-n ???.???.???
-h <hostname>.cinesite.com.
-u postmaster.cinesite.com.
-M

 **********************************************************************
Passwd-less rsh 10Feb06  --siggy

For passwordless login (via rlogin) you usually have to change a line in /etc/pam.d/rlogin  to;

auth     sufficient     pam_securetty.so

 by default it will be set to  "required".

rsh and rlogin are usually under xinetd control so you also need to add the -h
flag on the server startup line to allow root rsh.

You should also restrict rsh and rlogin to your local cluster subnet with the
"only_from" option.

Here's my rsh file in /etc/xinet.d

service shell
{
        socket_type     = stream
        protocol        = tcp
        flags           = NAMEINARGS
        wait            = no
        user            = root
        group           = root
        log_on_success  += USERID
        log_on_failure  += USERID
    only_from        = 192.168.1.0/24
        server          = /usr/sbin/tcpd
        server_args     = /usr/sbin/in.rshd -haL
        disable         = no
}

You could also put restrictions in /etc/hosts.allow and deny since xinetd will
use tcp wrappers if it's configured

Best wishes
-Don 
**********************************************************************
26Apr06  --siggy

http://www.mjmwired.net/resources/mjm-canon-s500.html

fetching pics off camera

gphoto2 --summary
        will tell you if the camera is recognized
gphoto2 --get-all-files
        will download all files from camera
**********************************************************************
  --siggy 6May06        encrypting files (list of passwds)

From: http://www.bigbold.com/snippets/posts/show/341

To encrypt:
openssl des3 -salt -in infile.txt -out encryptedfile.txt

To decrypt:
openssl des3 -d -salt -in encryptedfile.txt -out normalfile.txt

REMEBER to delete original (plane text) file

**********************************************************************
  --siggy 8May06  writting into /var/log/messages

From:
http://linuxhelp.blogspot.com/2005/09/enabling-centralized-logging-in-linux.html

Generate a log message on your local machine using the logger command:

$ logger -i -t ravi "I am just testing this. This message can be
ignored."

logger -t BOOTPOST "blah blah blah"
**********************************************************************
fdformat /dev/fd0
**********************************************************************
13mar06  --siggy

To use NIS map for automounting home....

mv /etc/auto.home /etc/auto.home.ORIG

edit /etc/auto.master
        /-      /etc/auto.home  --timeout=1200  

# service autofs restart

11Nov10  --siggy
NIS automount maps

[root@els-e64307 ~]# ypcat -x
Use "ethers"	for map "ethers.byname"
Use "aliases"	for map "mail.aliases"
Use "services"	for map "services.byname"
Use "protocols"	for map "protocols.bynumber"
Use "hosts"	for map "hosts.byname"
Use "networks"	for map "networks.byaddr"
Use "group"	for map "group.byname"
Use "passwd"	for map "passwd.byname"

[root@els-e64307 ~]# ypcat -k auto.master
/projects yp:auto.projects	nosuid --ghost
/users yp:auto.home		nosuid

[root@els-e64307 ~]# ypcat -k auto.home | grep dsiegfriedt
dsiegfriedt -soft,bg,nosuid     fsrec1:/dsk1/dsiegfriedt

**********************************************************************
20Aug06  --siggy
NIC speed check

# mii-tool -v

17Aug11  --siggy

#ethtool eth?

**********************************************************************
20Aug06  --siggy

/etc/sysconfig/hwconf
**********************************************************************
13Dec06  --siggy

http://www.tuxfiles.org/linuxhelp/changeman.html

< Changing the default window manager - 1.0 >

Learn how to change your default window manager or desktop. Switching window managers isn't hard, but 
it's still one of the hardest things to figure out. I'm not covering kdm or gdm here, this tuXfile tea
ches you how to change the default window manager if you're using xdm or starting the X Window System 
manually with the startx command.

Alright, you've installed a really fancy new window manager and want to try it out? If you're booting 
to command line and starting X manually with the startx command, you're probably wondering how to make
 that new fancy window manager your default. Or, if you use xdm as your display manager, you're probab
ly wondering the same thing because it doesn't provide you with any menu that lets you change your win
dow manager. You need some other way of telling X what window manager you want to use.

The good news is that changing the default window manager or desktop in Linux is really simple: you ju
st need to edit a little config file. For editing that file you can use any text editor you're familia
r with.


< startx and .xinitrc >

If you use the startx command for starting up the X Window System, you'll need to edit a file called .
xinitrc that is located in your home directory. If the file already is there, just open it with your f
avorite text editor. If you don't have such a file in your home directory, create a new file with that
 name. Note the dot in the file name - it shows you that the file is a hidden file and doesn't show wh
en you do a normal directory listing.

If you already have a .xinitrc file in your home directory, it may be a huge scary-looking text file w
ith a lot of text that makes just as much sense as a file produced with a random number generator and 
encrypted after writing. If you want to make a backup of this file, rename it to something like .xinit
rc.backup or whatever you wish:
mv .xinitrc .xinitrc.backup

Now you can use your text editor for creating a new, blank .xinitrc file. Although the file may be a c
omplicated multi-line geeky script, it can be very simple, too. In its simplest it just contains a sin
gle line with the name of your new window manager. So, add a line like this to your file:
exec windowmanager
where windowmanager is the command that starts the window manager you want to be your default. For exa
mple, to make Window Maker your default window manager, you'd have a line like this:
exec wmaker

The commands for starting some popular window managers and desktop environments are:

    * KDE = startkde
    * Gnome = gnome-session
    * Blackbox = blackbox
    * FVWM = fvwm (or, for FVWM2 it's fvwm2, surprise)
    * Window Maker = wmaker
    * IceWM = icewm

After editing the .xinitrc file, save your changes. The next time you do a startx, the new window mana
ger will be your default.
**********************************************************************
file permissions with chmod
        6Feb06  --siggy

The  letters 'rwxXstugo' select the new permissions for the affected users: 
read (r), write (w), execute (or access for directories) (x), 

execute only if the file is a directory or already has execute permission for some user (X), 
set user or group ID on execution(s), sticky(t), 

the permissions granted to the user who owns the file (u), 
the permissions granted to  other  users  who are  members of the file's group (g), 
and the permissions granted to users that are in neither of the two preceding categories (o).


The first digit selects the set user ID (4) and set group ID (2) and sticky (1) attributes.  
The second digit selects permissions  for  the  user  who owns the file: read (4), write (2), and exec
ute (1); 
The third digit selects permissions for other users in the file's group, with the same values.
The fourth digit selects permission for other users not in the file's group, with the same values.

tmp    1777
passwd  644
**********************************************************************
NFS FAQ 9Aug07  --siggy

# Question from ValueClick interview that I didn't know.

root squash     This is a security feature that denies the super-user on the specified hosts any speci
al access rights by mapping requests from uid 0 on the client to uid 65534 (-2) on the server. This ui
d should be associated with the user nobody.

http://www.linuxvalley.it/encyclopedia/ldp/manpage/man5/exports.5.php

User ID Mapping
       nfsd bases its access  control  to  files  on  the  server
       machine  on  the  uid  and  gid  provided  in each NFS RPC
       request. The normal behavior a user would expect  is  that
       she  can  access her files on the server just as she would
       on a normal file system. This requires that the same  uids
       and  gids  are  used on the client and the server machine.
       This is not always true, nor is it always desirable.

       Very often, it is not desirable that the root  user  on  a
       client  machine  is  also  treated  as root when accessing
       files on the NFS server. To this end, uid  0  is  normally
       mapped  to  a  different  id:  the  so-called anonymous or
       nobody uid. This mode of operation (called  `root  squash<AD>
       ing')   is  the  default,  and  can  be  turned  off  with
       no_root_squash.

23Sep11  --siggy  /etc/exports

rw		Allows read and write access to the share
ro  	   	Only allows read access, writing is blocked
all_squash  	Forces all connecting users to "nobody" account and permissions
no_root_squash  Allows root account on client to access export share on server as the root account
anonuid  	Forces all anonymous connections to predefined UID on server
anongid  	Forces all anonymous connections to predefined GID on server

**********************************************************************
18Aug07  --siggy

Login to localhost with LDAP server not available you need to edit:

/etc/pam.d/system-auth and add (the 2nd line AFTER the first line)

account     required      /lib/security/pam_unix.so
account     sufficient    /lib/security/pam_localuser.so 
**********************************************************************
Picture scraping with wget

  --siggy 25Aug07 (hint from Perry)
 wget -r -l1 --no-parent -A.jpg http://www.rainbow-galleries.com/ddg/valerie_cortez/

for i in `ls`; do echo $i;mv $i valerie_cortez-$i; done

rm -rf rainbow-galleries.com/

rm -rf www.rainbow-galleries.com/
**********************************************************************
29Aug07  --siggy

for i in `cat rpmpkgs | sed s/.i386.rpm//`; do echo $i >> ~siggy/su-rpms; rpm -ql $i \ 
| grep /bin/su >> ~siggy/su-rpms; d

**********************************************************************
fdisk to look at partitions
**********************************************************************
22Feb05 SUN package adding

as root
unzip <filename>
pkgadd -d ./<filename>
**********************************************************************
21Mar06  --siggy

cat /etc/hosts | sort -t . -k 4 -n

-t . = field seperator of a "."
-k # = key (position)
-n = numeric sort

27oct09  --siggy
cat db.admin.edmunds.com | grep 10.69.37 | sort -t . -k4 -n

will sort the IP addresses in numerical order (as long as they are 
all in the same subdomain)
**********************************************************************
To re-sync time to a ntpserver  dlowe 9May06

/sbin/service ntpd stop
/usr/sbin/ntpdate <ntp server name>
/sbin/service ntpd start

**** NEW new way ... see 29May18

29Feb16  --siggy
nixmgt@lasysmon ~]$ cat /etc/ntp.conf | grep -v "#" | sed /^$/d
restrict default kod nomodify notrap nopeer
restrict 127.0.0.1
server 0.us.pool.ntp.org
server 1.us.pool.ntp.org
driftfile /etc/ntp.drift

**********************************************************************
To increase the number of weeks the log rotate keeps edit

/etc/logrotate.conf

and increase the "rotate" number to the number of weeks you want
**********************************************************************
9feb07  --siggy  umask hint

To calculate permissions that result from specific umask
values, subtract the umask from 666 for files and 777 for
directories
**********************************************************************
FC5

foreach i (`find /home/siggy/Ciprico`)
echo $i
chksum $i >> TESTFILE
end
**********************************************************************
RH8

for i in `find.`
do 
  cksum$i >> /root/SIGSUMS
done
**********************************************************************
For inventory

find <dirname> -maxdepth 5 > /root/RAID2-INVENTORY
**********************************************************************
multiple dd

for i in b c d e 
do 
  dd if=/dev/sda of=/dev/sd$i bs=1024k 
done
**********************************************************************
sed -e `12,$d` /etc/fstab > /etc/fstab.NEW
    deletes from line 12 to EOF
**********************************************************************
cat /etc/hosts | sort -t . -k 4 -n
                       ^    ^    ^
        field seperator|    |    |
              key (position)|    |
	                 numeric |
**********************************************************************
sed -n `$p`
    prints last line
**********************************************************************
Ctrl-Alt-Del  5Aug06  --siggy

controlled in /etc/inittab

# Trap CTRL-ALT-DELETE
# ca::ctrlaltdel:/sbin/shutdown -t3 -r now
ca::ctrlaltdel:echo "WRONG KEY!!! Try again"
**********************************************************************
Bash IFs need space  --siggy 14Sep06

#!/bin/bash

# a test for work

HERE=`uname -r`

if [ "$HERE" == "2.6.15-1.2054_FC5" ];then
        echo It passed the first test
else
   if  [ "$HERE" == "2.6.15-1.2054_FC4" ];then
        echo DONE
   fi
fi
**********************************************************************
3Jan07  --siggy

use the "split" command

To break up large .iso or .bz2 files

CD has 680MB of space

split -b 675000000 <filename>

in that directory you will get 675MB files with the name starting with 
xaa, xab, etc. etc.

so a DVD has 4.2GB of space

split -b 395000000000 <filename>

`-b BYTES'
`--bytes=BYTES'
     Put the first BYTES bytes of INPUT into each output file.
     Appending `b' multiplies BYTES by 512, `k' by 1024, and `m' by
     1048576.
**********************************************************************
14Mar07  --siggy  RPM flags

rpm -i -prefix=/path/to/where/you/want/it rpmname.rpm

    May not work if tarball was created with absolute paths rather than
    relative paths
**********************************************************************
14mar07  --siggy

EVERY file (in UNIX) comes with 3 default descriptors
      standard in	(0)
      standard out	(1)
      standard error	(2)
**********************************************************************
19Mar07  --siggy
mounting a thumb drive

mount -t vfat /dev/sdc1 /mnt
**********************************************************************
2nd LUN mounting  --siggy 28Jun07  (see book 4)

cat /proc/scsi/scsi

To add a new device, use the command:
echo "scsi add-single-device <h> <b> <t> <l>" > /proc/scsi/scsi
where h = host, b = bus (channel), t = target (scsi id), and l = lun

For example, the command
echo "scsi add-single-device 4 0 11 1" > /proc/scsi/scsi

will add the device at SCSI id 11, LUN 1 attaached to scsi4, controller 0.
You may also be required to update the max number of SCSI devices,

append="max_scsi_luns=128"

in the /etc/lilo.conf file.  Then run /sbin/lilo to reinstall the boot loader.

BTW, to remove a device, you would use the command:
echo "scsi remove-single-device <h> <b> <t> <l>" > /proc/scsi/scsi
where h = host, b = bus (channel), t = target (scsi id), and l = lun
**********************************************************************
10Sep07  --siggy

/sbin/e2label /dev/sda<partition number>
**********************************************************************
18Sep07  --siggy

Littera Delenda Est: On the Removal of Files with Unusual Characters in 
Their Filenames, Part One

http://www.unixreview.com/documents/s=10130/ur0705h/ur0705h.html
**********************************************************************

rpm -ihv -prefix=/opt/put/it/here <RPM name>
**********************************************************************
3 Default descriptors

stdin (0)
stdout (1)
stderror (2)
**********************************************************************
From email 28Jan07  --siggy

Saving RPM downloaded by YUM

1) edit /etc/yum.conf
   change "keepcache=0" (we'll have to figure out what.  I think it my be # of versions)

2) /var/cache/yum/???/packages will have all the RPMs that were just loaded. (we'll have to 
			       poke around to find where in the cache it puts them)
3) if you/we feel ambitious we could start our own yum repository... so you could have a cron 
     job do update automagically

10mar11  --siggy

yumdownloader <RPMname>   (need yum -y install yumdownloader)

yum update $i -y --downloadonly --downloaddir=/home/linux/F13/Packages

reposync -p repos --repoid=updates

14Nov13  --siggy  install local RPMS with yum

yum -y localinstall RPM1 RPM2 RPM3...

2Jan18  

@@@ If you download (d when asked y or n)  look in /tmp/yum_save_tx..... 
@@@ will give you the repo to look in for the RPM

[root@dts3329 ~]# cat /tmp/yum_save_tx.2018-01-02.14-22.NGc8qC.yumtx 
2315:2648e1ec707086ca18eb095cc627be0491f8eb59
0
1
installed:2316:2355559d3ca974793954988eb9c21c0ead4672c4
1
mbr: open-vm-tools,x86_64,0,9.10.2,5.el7_2 70
  repo: rhel-7-workstation-rpms
  ts_state: u
  output_state: 20
  isDep: False
  reason: user
  reinstall: False


[root@dts3329 ~]# ll -rt /var/cache/yum/x86_64/7Workstation/rhel-7-workstation-rpms/packages/total 480
-rw-r--r--. 1 root root 483716 Aug  3  2016 open-vm-tools-9.10.2-5.el7_2.x86_64.rpm
[root@dts3329 ~]# 


**********************************************************************
Consoleless RH 28Sep06 --siggy

On Dell 2[6-8]50s you will have to edit the BIOS to output to serial after boot.

After booting check that you have tty(s) available.
dmesg | grep tty
setserial -g /dev/ttyS[01]

Next edit /etc/inittab
#adding serial console availability to this machine 16Jan06  --siggy
S0:2345:respawn:/sbin/mgetty -b -r -s 9600 -p ~Serial Console Login: ~ ttyS0
place this after the existing ~mingetty~ lines

Edit /etc/securetty and add:
ttyS0

Stop the kudzu service
chkconfig kudzu off
service kudzu stop

Edit the /etc/grub.conf file and add the marked fields.
# grub.conf generated by anaconda
#
# Note that you do not have to rerun grub after making changes to this file
# NOTICE:  You have a /boot partition.  This means that
#          all kernel and initrd paths are relative to /boot/, eg.
#          root (hd0,0)
#          kernel /vmlinuz-version ro root=/dev/hda2
#          initrd /initrd-version.img
#boot=/dev/hda
serial -unit=0 -speed=9600				<*****
terminal -timeout=10 console serial			<*****
default=0
timeout=10
#splashimage=(hd0,0)/grub/splash.xpm.gz			<***** Just commented out
title Red Hat Linux (2.4.7-10smp)
        root (hd0,0)
        kernel /vmlinuz-2.4.7-10smp ro root=/dev/hda2 console=ttyS0,9600		<*****
        initrd /initrd-2.4.7-10smp.img
title Red Hat Linux-up (2.4.7-10)
        root (hd0,0)
        kernel /vmlinuz-2.4.7-10 ro root=/dev/hda2 console=ttyS0,9600			<*****
        initrd /initrd-2.4.7-10.img

<***** mark the lines added

from the command line type ~init q~.  This will re-read the /etc/inittab file and the serial 
console should be active at this point.

I got my info from:
http://www.dell.com/us/en/esg/topics/power_ps1q03-stanton.htm
http://www.rajeevnet.com/linux/grub_serial_console.html
**********************************************************************
21jan08  --siggy
printer GUI setup

/usr/bin/system-config-printer
**********************************************************************
11feb08  --siggy

logger will add to /var/log/messages any message you want.

logger -p local1.info "Sys Admin siggy is sniffing packets...BEWARE!!!"
**********************************************************************
11Feb08  --siggy

typing "umask" will give you the umsk of local directory
**********************************************************************
1May08  --siggy

from note (book4, 19Apr07)

mail -s "qmgr-call" root < memofile.txt

  Will send mail to "root" with "qmgr-call" as the subject and the contents of 
  memofile.txt as the body of the message.

3feb09 --siggy  Edmunds
cron that mails notice when # of LDAP processes exceed 1000

in crontab -l
* * * * * /usr/local/bin/file_report.sh >/dev/null

[root@pl1rad702 dsiegfriedt]# more /usr/local/bin/file_report.sh
#!/bin/sh

# The number of files that if we exceed, we will start tracking more data
# The max open files for the ldap user is 1024
THRESHOLD=1000

# END CONFIG

# Get a count of files opened by the ldap user
OPENFILES=`/usr/sbin/lsof -u ldap | wc -l`

# Write the number to our log file
echo "[`date`] $OPENFILES"

if [ "$OPENFILES" -gt $THRESHOLD ]
then
    echo "The number of open files ( $OPENFILES ) exceeds the threshold of $THRESHOLD on `hostname -s`" 
    /usr/sbin/lsof -u ldap | mail -s "LDAP Server `hostname -s` Warning - Open File Number is ${OPENFILES}, Threshold is ${THRESHOLD}" sysops@edmunds.com
fi

10Feb09  --siggy

# this is at the end of "burnin-test-script" (instead of having a separate message file)
echo "sysbasher has completed on $HOSTNAME" | mail -s "$HOSTNAME has completed the sysbasher test" sysops@edmunds.com

See also: 28Sep04, 1May08, 22May08
**********************************************************************
2May08

If you are ever working on a sensitive session that you cannot afford to lose 
even if you get disconnected, there is a handy utility that can be of use.
There is a utility that allows you to keep a session open even if you get punted 
off an ssh session. This can be helpful when making critical changes or editing 
a file where you cannot afford to start over again from scratch.

Hope you find this useful:
 
How to use screen:
For this you need to install the screen package. You can use following commands to install the package 

For RHEL 4 
# up2date screen

For RHEL 5 
# yum install screen 
 
Solaris
Need to use pkgadd (not sure of the pkg name)

Following are the steps to use the screen utility

1. Login to the remote server via SSH. 
2. Start the screen session. 

# screen

After this you will get the same bash shell as u have earlier.
3. Here you can run commands.
start to edit any file or any other command you want to be able to recover in the event of disconnection
# vi test.sh
4. If you want to come out of screen then use "Ctrl-a" "d".
Now you will come out of the screen session to the normal SSH session.
5. Now you can exit from the SSH session.
# exit.
6. To take control back to the "vi" process, 
Again login to system using SSH.
7. To list the currently running screen sessions use following command 
# screen -ls 
following is the sample output.

<snip>
[root@test~]# screen -ls
There is a screen on:
        7920.pts-3.test     (Detached)
1 Socket in /var/run/screen/S-root.

</snip>

8. Connect to the screen session.
# screen -r 7920.pts-3.test

For more details on screen you can refer following 
# man screen 
Also go through following URL 
http://www.rackaid.com/resources/linux-tutorials/general-tutorials/linux-screen.cfm
 
Matthew Sacks
Edmunds Inc.
Systems Administrator, AppOps
(b) 310-309-3570
(m) 310-913-0409

25jul13 --siggy

screen
Ctrla d
       disconnect
screen -ls
       lists open screens
screen -r <screen names from list above>
       reconnect

You can open as many screens as you want..... gets VERY confusing 
 
**********************************************************************
17dec04  --siggy
from: http://www.metaweb.com/wiki/wiki.phtml?title=Shorthand
from: http://www.imanewbie.com/dictionary/dic-main.shtml

"Phonetic" spellings

"d00d" for "dude"
"joo" for "you", also written as "j00" or "_|00"
"ph" for "f", as in "phear" for "fear" (as in "ph34r my l33t skillz")
 b4k4^2 or |34|<4^2 for " baka Ni". Baka is the Japanese word for "idiots" or "stupidity", 
 while Ni is the Japanese word for "two", so it is meant to be read as "Baka raised to the 
 second power" or "baka squared" (meaning quite stupid) (see Baka-Ni t-shirt). The term is 
 used by the character Ruri Hoshino (as baka baka) in the anime series Martian Successor 
 Nadesico, but subsequently popularized by MegaTokyo. 

1337 = leet, as in elite
A=4
E=3
I=!
O=0
U=|_|

c00l, kewl, k00l, k3wl, d00d, d00dz

and btw, it's \/\/h0r3, not \/\/hOr3

woot!	dood speak expression kinda like "Yahoo!" or "Whoopie"

r0x0r, rOxXoR = rocks

**********************************************************************
   --siggy 6May06       encrypting files (list of passwds)

From: http://www.bigbold.com/snippets/posts/show/341

To encrypt:
openssl des3 -salt -in infile.txt -out encryptedfile.txt

To decrypt:
openssl des3 -d -salt -in encryptedfile.txt -out normalfile.txt

REMEBER to delete original (plain text) file
**********************************************************************
  --siggy 8May06

From: http://linuxhelp.blogspot.com/2005/09/enabling-centralized-logging-in-linux.html

Generate a log message on your local machine using the logger command:

$ logger -i -t ravi "I am just testing this. This message can be ignored."
**********************************************************************
settting bash env  --siggy 31May06

To make a temporary change the value of an environment variable enter the command:
   VARNAME=value_of_variable
This value will remain until you logout from the system or exit from the shell you are working in.
To make other programs that use the variable aware of the new value enter the command:
   export VARNAME

Shortcut....... export VARNAME=value_of_variable

**********************************************************************
Matlab r14sp3 problem:
1/10/06  vdinh

Allen Marcus got the following problem when launching remote matlab thru Hummingbird:

Problem:  Warning:  Initializing Java preferences failed in matlabrc.  This indicates a potentially serious problem in your MATLAB setup, which should be resolved as soon as possible.  Error detected was:  MATLAB:UndefinedFunction
Undefined function or variable 'initdesktoputils'.
?	In matlabrc at 130

Solution:  It's  pathdef problem , try to following: 
	# restoredefaultpath; matlabrc
	#savepath
	#exit
	Re-lauch MATLAB
	
Matlab Tech support:  (508) 647-7000 #5, #1
Case # 24A294

**********************************************************************
13May08  --siggy

to show existing static routes type:

# ip route show
**********************************************************************
22May08  --siggy

mail -s "from test" dsiegfriedt@edmunds.com -- -f siggy56@pacbell.net < /root/memofile.txt

sends email with:

Subjetct: from test
To: dsiegfriedt@edmunds.com
From: siggy56@pacbell.com (this address is spoofed (as in a script to send mail))
with the message body that is in /root/memofile.txt


#!/bin/bash
# haccount-size tests for 5GB directoy size
for i in `find /misc/ -maxdepth 1 -type d ! -name "."`
do
SIZE=`du -bs $i | awk '{print $1}'`
	if [ $SIZE -gt 5000000000 ]; then
#	echo $i" needs to be pruned"
   	mail -s "$i home account size" dsiegfriedt@edmunds.com -c sysops@edmunds.com -- -f sysops@edmunds.com < /root/
memofile.txt
fi
done

**********************************************************************
6Jun08  --siggy

to find FQHN ssh pl1rns702.admin.edmunds.com

cd /nfs/common/named/chroot-production/var/named/zones-forward

grep <machine name> (ie. pl1rns700) *
**********************************************************************
10jun08 --siggy

found on:
http://www.linuxjournal.com/content/highlight-your-shell-prompt-when-working-root-0

To make the prompt red when you're running as root add this to /root/.bashrc:
 
   PS1="\[\e[31m\]\h:\w#\[\e[m\] "

To make the prompt green when running as a normal user add this to ~/.bashrc:

  PS1="\[\e[32m\]\u@\h:\w\$\[\e[m\] "

**********************************************************************
difference between RedHat EL AS  --siggy 30jun08

http://forums11.itrc.hp.com/service/forums/questionanswer.do?admit=109447626+1214839054688+28353475&threadId=1003246
  	
Red Hat Enterprise Linux AS : the top of the line RHEL solution, this product supports 
the largest x86-compatible servers and is available with the highest leveles of support.

Red Hat Enterprise Linux ES : for the entry level or mid-range departal servers. RHEL ES 
provides the same core capabilities as AS, for systems with up to two phisical CPUs and 
up to 8 GB of main memory.

**********************************************************************
 3jul08

http://www.redhatmagazine.com/2008/06/03/run-levels-create-use-modify-and-master

Tip:
If you happen to get yourself in this pickle, there is a way out. You can interrupt the 
Grub boot loader and press "A", and then append the word "emergency" to the 
end of the kernel arguments. This will boot the operating system without using init. 
Then, you can fix what you altered by copying back the original version of /etc/inittab. 

**********************************************************************
14Jul08  --siggy

logging in without LDAP available

http://www.centos.org/modules/newbb/viewtopic.php?topic_id=9832

LDAP Blocking Local User Logins
	
I solved my issue with

passwd: files [!NOTFOUND=return] ldap
shadow: files [!NOTFOUND=return] ldap
group: files [!NOTFOUND=return] ldap

In the /etc/nsswitch.conf

The above change will initially query libnss_files.so and if the query succeeded, 
it will stop and authenticate the local user. If it does not find the user on the 
local system, it will query the LDAP server.
**********************************************************************
24jul08  --siggy

to stop output from a command (when you put it into a script/cron) add:

/path/name/to/command > /dev/null 2>&1

to the end of the command
**********************************************************************
31jul08  --siggy

sar 

* Thu Jan 22 2004 Nils Philippsen <nphilipp(at)redhat.com> 5.0.0-0.6
  - let user configure how long to keep logs through /etc/sysconfig/sysstat
    (#81294)

[root@pl1rad719 etc]# cd /usr/lib/sa
[root@pl1rad719 sa]# ll
total 80
drwxr-xr-x   2 root root  4096 May 12 10:56 .
drwxr-xr-x  50 root root 24576 Jun 20 04:02 ..
-rwxr-xr-x   1 root root   284 Oct  2  2006 sa1
-rwxr-xr-x   1 root root   559 Oct  2  2006 sa2
-rwxr-xr-x   1 root root 27032 Oct  2  2006 sadc
[root@pl1rad719 sa]# more sa1
#!/bin/sh
# PREFIX/lib/sa/sa1.sh
# (C) 1999-2004 Sebastien Godard (sysstat <at> wanadoo.fr)
#
umask 0022
DATE=`date +%d`
ENDIR=/usr/lib/sa
DFILE=/var/log/sa/sa${DATE}
cd ${ENDIR}
if [ $# = 0 ]
then
	exec ${ENDIR}/sadc -F -L 1 1 ${DFILE}
else
	exec ${ENDIR}/sadc -F -L $* ${DFILE}
fi

[root@pl1rad719 sa]# more sa2
#!/bin/sh
# /usr/lib/sa/sa2.sh
# (C) 1999-2004 Sebastien Godard (sysstat <at> wanadoo.fr)
#
# Changes:
# - 2004-01-22 Nils Philippsen <nphilipp@redhat.com>
#   make history configurable
HISTORY=7
[ -r /etc/sysconfig/sysstat ] && . /etc/sysconfig/sysstat
S_TIME_FORMAT=ISO ; export S_TIME_FORMAT
umask 0022
DATE=`date  +%d`
RPT=/var/log/sa/sar${DATE}
ENDIR=/usr/bin
DFILE=/var/log/sa/sa${DATE}
[ -f "$DFILE" ] || exit 0
cd ${ENDIR}
${ENDIR}/sar $* -f ${DFILE} > ${RPT}
find /var/log/sa \( -name 'sar??' -o -name 'sa??' \) -mtime +"$HISTORY" -exec rm -f {} \;

**********************************************************************
 To add a swap file:

   1.  Determine the size of the new swap file and multiple by 1024 to determine the block size. 
       For example, the block size of a 64 MB swap file is 65536.
   2  At a shell prompt as root, type the following command with count being equal to the desired block size:
      dd if=/dev/zero of=/swapfile bs=1024 count=65536
   3. Setup the swap file with the command:
       mkswap /swapfile
   4. To enable the swap file immediately but not automatically at boot time:
      swapon /swapfile
   5.  To enable it at boot time, edit /etc/fstab to include:
      /swapfile               swap                    swap    defaults        0 0
      The next time the system boots, it will enable the new swap file.
   6.  After adding the new swap file and enabling it, make sure it is enabled by viewing the output of the command cat /proc/swaps or free. 
**********************************************************************
GPG key for fedora9  19aug08  --siggy

To verify Fedora ISO go to:
http://fedoraproject.org/en/verify
**********************************************************************
From Ron/Perry date trick   19aug08

[root@pl1rad719 repos]# date -d 'last week'
Tue Aug 12 10:16:08 PDT 2008
[root@pl1rad719 repos]# date -d 'yesterday'
Mon Aug 18 10:16:23 PDT 2008
[root@pl1rad719 repos]# date -d 'tomorrow'
Wed Aug 20 10:16:36 PDT 2008

date -r <epoc time>

6may09  --siggy
date +%A" "%B" "%e", "%C%y" "%H":"%M = Wednesday May  6, 2009 13:10
date +%A" "%B" "%e", "%C%y" "%I":"%M" "%p = Wednesday May  6, 2009 01:15 PM

date +%s # seconds since epoc

29MAr16  --siggy  find the date/time from epoc seconds
root@phdvb:~# date --date @1458097202
Wed Mar 16 03:00:02 GMT 2016

14Mar12  --siggy findng dates in the past
http://www.commandlinefu.com/commands/browse
date --date="90 days ago"
Gets any date since today. Other examples of recognized expressions
are "2 years 4 days ago", "7 months" (in the future), "next Sunday", 
"yesterday", "tomorrow", etc.

3Oct13  --siggy
[root@laccapdv4 ~]# date
Thu Oct  3 11:57:49 PDT 2013
[root@laccapdv4 ~]# date -d '25 days ago'
Sun Sep  8 11:57:51 PDT 2013

14May14  --siggy epoch time in human readable form
$ date --date='@1268727836'
Tue Mar 16 01:23:56 PDT 2010

**********************************************************************
2Sep08  --siggy

http://toannguyen.net/moresed.html

Print the binary equivalent of the word 'fire'
 perl -e 'print unpack "B*","fire"' ; perl -e 'print "\n"'

Print the hex equivalent of the word 'fire'
 perl -e 'print unpack "H*","fire"' ; perl -e 'print "\n"'

To reverse the translated string back, use pack instead of unpack 
**********************************************************************
6Oct08  --siggy

diff --side-by-side file1 file2

4oct10  --siggy
sdiff -s -w156 file1 file2 | more

This places the lines of file1 above those of file2, if they differ.  "-w156"
makes corresponding columns line up in an 80-column text window

**********************************************************************
7Oct08  --siggy

to "delete" an exported variable
Could not find this anywhere in the net...... :^(

unset <variable name>
**********************************************************************
12Oct08  --siggy

[root@pl1rad719 gfontejon]# more scripts/ping_test.sh 
#!/bin/sh
echo "" > $1_ping_test_output.txt

for i in `cat $1`
do
	ping -c 1 -W 1 $i
	if [ $? -eq 0 ]
	then 
		echo $i >> $1_ping_test_output.txt
	fi
done


-c = count
-W = timeout; Time to wait for a response,
**********************************************************************
16Oct08  --siggy

http://www.linuxtopia.org/online_books/advanced_bash_scripting_guide/communications.html

[dsiegfriedt@pl1rad719 SCRIPTS]$ ipcalc -h pl1nne705-out
ipcalc: bad ip address: pl1nne705-out

**********************************************************************
17Oct08  --siggy

addition to .bashrc, OR to /etc/profile for global appeal, will add a timestamp to your history (so you can see when they EFed up)

export HISTTIMEFORMAT=%d%b%y::%H"-"%M"-"%S"  " looks like this  204  08Aug14::08-54-25  history

export HISTTIMEFORMAT="(%m.%d.%Y) %H:%M "  looks like this      1  (08.01.2014) 13:41 netstat -natu

export HISTTIMEFORMAT="%F %T " looks like this			1003  2014-08-08 08:50:45 history
**********************************************************************
vi 30oct08  --siggy

Search and Replace
This is about as complicated as it gets in vi, since search and replace sytnax is taken from the UNIX sed (stream editor) command.

>> Global search and replace  -->  :1,$ s/old/new/g
                                     ^  ^  ^   ^  ^
In english, this means:              |  |  |   |  |
                                     |  |  |   |  |
            From 1 to $ (end of file)   |  |   |  |
                                        |  |   |  |
            substitute -----------------/  |   |  |
                                           |   |  |
            occurrences of "old" ----------/   |  |
                                               |  |
            with occurrences of "new" --------/   |
                                                  |
            globally (i.e., all instances of "old")

**********************************************************************
ping flags  --siggy 3nov08


ping -c 1 -w 1 -W 1 -n $<IP ADDRESS>

 -c count
              Stop after sending count ECHO_REQUEST packets. With deadline option, 
	      ping waits for count ECHO_REPLY packets, until the timeout expires.
 -w deadline
              Specify  a  timeout,  in  seconds,  before  ping exits regardless of how 
	      many packets have been sent or received. In this case ping does not stop 
	      after count packet are sent, it waits either for deadline expire or until 
	      count probes are answered or for some error notification from network.
 -W timeout
              Time to wait for a response, in seconds. The option affects only timeout 
	      in absense of any responses, otherwise ping waits for two RTTs.

 -n           Numeric output only.  No attempt will be made to lookup symbolic names 
	      for host addresses.

**********************************************************************
LDAP db rebuild  --siggy 6nov08

Starting slapd in the forground with the following command:
[root@pl1rad702 ldap]# /usr/sbin/slapd -d 255

Displayed the following error:
slapd startup: initiated.
bdb_db_open: dc=edmunds,dc=com
bdb_db_open: dbenv_open(/var/lib/ldap)
bdb(dc=edmunds,dc=com): PANIC: fatal region error detected; run recovery
bdb_db_open: dbenv_open failed: DB_RUNRECOVERY: Fatal error, run database recovery (-30978)
backend_startup: bi_db_open(0) failed! (-30978)
slapd shutdown: initiated
====> bdb_cache_release_all
bdb(dc=edmunds,dc=com): DB_ENV->lock_id_free interface requires an environment configured for the locking subsystem
slapd shutdown: freeing system resources.
bdb(dc=edmunds,dc=com): txn_checkpoint interface requires an environment configured for the transaction subsystem
bdb_db_destroy: txn_checkpoint failed: Invalid argument (22)
slapd stopped.
connections_destroy: nothing to destroy.
Running a db_recovery as suggested in the error seems to have resolved the issue:

[root@pl1rad702 ldap]# cd /var/lib/ldap

[root@pl1rad702 ldap]# db41_recover
db_recover: unable to join the environment
db_recover: Ignoring log file: log.0000000002: unsupported log version 8
db_recover: Invalid log file: log.0000000002: Invalid argument
db_recover: PANIC: Invalid argument
db_recover: PANIC: DB_RUNRECOVERY: Fatal error, run database recovery
db_recover: fatal region error detected; run recovery
db_recover: DB_ENV->open: DB_RUNRECOVERY: Fatal error, run database recovery

[root@pl1rad702 ldap]# /etc/init.d/ldap restart
Stopping slapd: [FAILED]
/var/lib/ldap/__db.004 is not owned by "ldap" [WARNING]
/var/lib/ldap/__db.005 is not owned by "ldap" [WARNING]
/var/lib/ldap/__db.002 is not owned by "ldap" [WARNING]
/var/lib/ldap/__db.003 is not owned by "ldap" [WARNING]
/var/lib/ldap/__db.001 is not owned by "ldap" [WARNING]
Checking configuration files for slapd: [ OK ]
Starting slapd: [ OK ]
Starting slurpd: [ OK ]

[root@pl1rad702 ldap]# chown -R ldap:ldap .

[root@pl1rad702 ldap]# /etc/init.d/ldap restart
Stopping slapd: [FAILED]
Checking configuration files for slapd: [ OK ]
Starting slapd: [ OK ]
Starting slurpd: [ OK ]

[root@pl1rad702 ldap]# ps -eaf | grep slapd
ldap 5204 1 5 10:54 ? 00:00:00 /usr/sbin/slapd -u ldap -h ldap:/// ldaps:///
root 5223 2853 0 10:54 pts/13 00:00:00 grep slapd

  
**********************************************************************
sorting IP addresses  11nov08  --siggy

cat etc-hosts-admin | sort -n -t . -k 1,1 -k 2,2 -k 3,3 -k 4,4 >> etc-hosts-admin-sorted

sorted (by IP) etc-hosts type file  24mar09  --siggy

cat db.drac.edmunds.com | grep 10. | sed -e /\;/d -e /^$/d | sort  -n -t. -k 1,1 -k 2,2 -k 3,3 -k 4,4 | awk '{print $3"\t\t"$1".drac.edmunds.com"}'
**********************************************************************
DNS change tools from csv files  13nov08  --siggy

cat etc-hosts-admin | grep 204.16.222 | sort -t. -k4 -n >> etc-hosts-admin-sorted

# reverse map
cat 1-QA-NRE_IP_and_ports_assignment.csv | grep ql1rwe | awk -F, '{print $7"\t\tPTR\t"$1".media.edmunds.com."}' | sed s/10\.96\.199\.//

# the rdb listing is different because of IPC IP addresses
cat 1-QA-NRE_IP_and_ports_assignment.csv | grep rdb | awk -F, '{print $8"\t\tPTR\t"$1".media.edmunds.com."}'

**********************************************************************
EMACS trick  --siggy  3Dec08

Highlight region
M-x sort-lines  
**********************************************************************
IOZONE stress test --siggy 4Dec08

(I disassembled the rpm to get JUST the files)

cd ~dsiegfriedt/BURN-IN/

...IOZONE/opt/iozone/bin/iozone -a

...PHOR/phoronix-test-suite
**********************************************************************
Caret substitution  --siggy 11dec08

Substitution

There are two forms of substitution:

    * caret substitution:

      There's a special case for making a change to the previous command since this is something that is often useful. 
      Use carets to show the old string and the new string:

      % ls foopar
      foopar not found
      % ^foopar^foobar^
      ls foobar

      You can leave off the trailing caret. Note that this substitution is not global, i.e., it only changes the first 
      occurrence of the first string ("^o^x" would only change "foopar" into "fxopar", not "fxxpar"). Also note that the 
      caret substitution isn't very forgiving of whitespace in its patterns, and will say "Modifier failed." at its first 
      sign of confusion. At which point, you'll have to resort to the general substitution method since the prior command 
      is now your failed caret substitution, not the command you're trying to modify.

      Also note that substitution is not subject to expansion of shell meta-characters, so you can substitute *s and things 
      without strange things happening.

    * General substitution:

      General substitution is done with the ":s" operator: ":s/old/new/".

      "!!:s/foo/bar/" is equivalent to "^foo^bar^" in all respects: the trailing delimiter can be omitted, the second pattern 
      can be ommitted to delete the first pattern, white space is not well tolerated.

      However, the ":s//" method is more flexible since it can be used with any retrieved command whereas the caret substitution only works with the previous command.

      The ":s//" substitution can also be extended to replace all occurrences of the string by prefacing the "s" with a "g" as in the following:

      % mv foo.c foo.cc
      % !!:gs/foo/bar
      mv bar.c bar.cc


**********************************************************************
19dec08  --siggy

to background a job and have it survive the terminal process death

nohup ./sys_basher -t -v -th 4

19Feb16  --siggy

to re-attache to that job (if you loose connection AND the job was put into the background (&))
fg %JOBID

http://www.tecmint.com/keep-remote-ssh-sessions-running-after-disconnection/
Executing command using disown in background..
disown -h %1

**********************************************************************
26feb09  --siggy

to check version of RPM (i386 or x86_64)

rpm -qa --queryformat "%{NAME}-%{VERSION}.%{RELEASE} (%{ARCH})\n" | grep whateveryouwatntedtoknow

ie.
rpm -qa --queryformat "%{NAME}-%{VERSION}.%{RELEASE} (%{ARCH})\n" | grep java
java-1.4.2-gcj-compat-1.4.2.0.40jpp.112 (i386)
**********************************************************************
6mar09  --Corey Johnson

[root@pl1rdb307 ~]# hdparm -t /dev/mapper/vg01-root

/dev/mapper/vg01-root:
 Timing buffered disk reads:  610 MB in  3.01 seconds = 202.88 MB/sec
[root@pl1rdb307 ~]# hdparm -T /dev/mapper/vg01-root

/dev/mapper/vg01-root:
 Timing cached reads:   4984 MB in  2.00 seconds = 2492.13 MB/sec
[root@pl1rdb307 ~]#
**********************************************************************
18mar09  from Roderick'e email Recover delete files with lsof

http://www.linux.com/articles/58142?theme=print
**********************************************************************
adding to the begining of a file (like colum headers)
8apr09  --siggy

echo "add this line" | cat - foo
**********************************************************************
27apr09  --siggy

DELL DRAC commands

racadm help # Will give you a list of available commands

ssh pl1rap934.drac.edmunds.com racadm getsysinfo
The authenticity of host 'pl1rap934.drac.edmunds.com (10.96.112.238)' can't
be established.  RSA key fingerprint is ea:af:0a:85:15:11:3b:f0:a1:d3:80:4f:f8:dd:34:a8.
Are you sure you want to continue connecting (yes/no)? yes
Warning: Permanently added 'pl1rap934.drac.edmunds.com,10.96.112.238' (RSA)
to the list of known hosts.
root@pl1rap934.drac.edmunds.com's password:

RAC Information:
RAC Date/Time           = Mon Apr 27 20:34:11 2009
Firmware Version        = 1.33
Firmware Build          = 08.03.10
Last Firmware Update    = NA
Hardware Version        = A01
Current IP Address      = 10.96.112.238
Current IP Gateway      = 10.96.112.1
Current IP Netmask      = 255.255.252.0
DHCP Enabled            = 0
MAC Address             = 00:1e:4f:3a:49:f9
Current DNS Server 1    = 0.0.0.0
Current DNS Server 2    = 0.0.0.0
DNS Servers from DHCP   = 0
Register DNS RAC Name   = 0
DNS RAC Name            = rac-7H4L4G1
Current DNS Domain      =

System Information:
System Model            = PowerEdge 1950
System BIOS Version     = 2.2.6
BMC Firmware Version    = 2.05
Service Tag             = 7H4L4G1
Host Name               =
OS Name                 =
Power Status            = ON

Watchdog Information:
Recovery Action         = None
Present countdown value = 15 seconds
Initial countdown value = 15 seconds

**********************************************************************
30apr09  --siggy
# Make sure only root can run our script
if [ "$(id -u)" != "0" ]; then
   echo "This script MUST be run as root" 1>&2
   exit 1
fi

# Make sure you are on the correct machine
if [ "$HOSTNAME" != "pl1rad702.admin.edmunds.com" ]; then
   echo "You MUST be on pl1rad702 for this script to run" 1>&2
   exit 0
fi

**********************************************************************
5may09  ping test

Hey, Don, here is the simple script I used to check these out, perhaps it could help you

for i in `cat /tmp/list `; do echo "######################## $i ######################"; ping -c 1 -w 2 ${i}; if [ $? != 0 ]; then echo "##### $i NOT RESPONDING "; else echo "##### $i IS GOOD #####"; fi; done


Heheeh, even though it worked for me, I am really just harrassing you :-D

Jason
**********************************************************************
18may09  security check

If a malicious user manages to set $user to root\000 (i.e., root followed by a NULL byte), the 
test will think that the name is not root and will allow the Perl script to continue. But when 
that string is passed to the underlying C library, the string will be treated as just root, and 
the user will have walked right past the security check. If not caught, this same exploit will 
allow access to random files and other resources on the system. The easiest way to avoid being 
caught by this exploit is to sanitize your input with something like this:

$input =~ tr/\000//d;
**********************************************************************
22may09  IM from Matt Nguyen

CIDR notation (subnet boundries)

Me: OK I have a DNS record 10.96.169.239/28 (I understand that to be from 239 plus 16 IP addresses
is that correct?

Matt: nope
"/28" means 16 address blocks, you got that part right
but....
regardless of the host address (in this case 10.96.169.239) you have to start at the subnet boundary.....
10.96.169.239 falls in the boundary of 10.96.169.224 - .239

so the subnet boundaries for "/28"  .0, .16, .32, .48, .64, .80, .96, .112, .128, .144, .160, .176, .192, .208, .224, .240, .256
**********************************************************************
9jun09  --siggy

to put a time stamp on your history file

HISTTIMEFORMAT=[%d/%b/%Y %T] 
**********************************************************************
9jun09  --siggy (from Jon Hart)

to show non-printing characters
cat -e <filename>

in vi....
:set list

**********************************************************************
15jun09  --siggy

Network speed

Open the file:
# vi /etc/sysconfig/network-scripts/ifcfg-eth0

Append following line:
ETHTOOL_OPTS="speed 100 duplex full autoneg off"

Save and close the system. It will set the eth0 device to 100Mbs, full duplex, with the auto 
negotiation off at boot time.  You can simply restart the networking (it will disconnect all 
ssh or ftp session) or restart the server. Depend upon traffic and load it may take upto 1 
minute to setup a new port speed:

# /etc/init.d/network restart

If you want 1000Mbs set line as follows:
ETHTOOL_OPTS="speed 1000 duplex full autoneg off
"Update: if above command failed to work for 1000Mbps use following command 
(see below in comment sections for discussion) :
ETHTOOL_OPTS="speed 1000 duplex full autoneg on"
**********************************************************************
15jun09 --siggy

backup tar command
tar cvjf /Volumes/SEA_DISK/MAC-BU-15jun09 -X ./exclude-list dsiegfriedt/

(dsiegfriedt)[ /Users ] {46} > cat exclude-list 
Desktop
Documents
Downloads
Library
jython2.5rc2


25oct09 MAC BACKUP

25Oct09::09-24-09  sudo tar cvjf /Volumes/SEA_DISK/MAC-BU-25oct09 -X dsiegfriedt/exclude-list dsiegfriedt/
25Oct09::09-37-17  sudo tar cjf /Volumes/SEA_DISK/MAC-linux-BU-25oct09.bz2 -X dsiegfriedt/exclude-list linux/
25Oct09::09-48-32  sudo tar cvjf /Volumes/SEA_DISK/MAC-PRIVATE-STUFF-BU-25oct09.bz2 -X dsiegfriedt/exclude-list /Volumes/PRIVATE-STUFF/


**********************************************************************
18jun09  --siggy

http://www.commandlinefu.com/commands/tagged/36/vim

%
Vi - Matching Braces, Brackets, or Parentheses

This is a simple command for jumping to the matching brace, square bracket, or parentheses. For example, 
it can take you from the beginning of a function to the end with one key stroke. To delete everything 
between the pairs of {}, [], or (), issue the command:

d%
To replace text between pairs of braces, brackets, or parentheses, issue the command:

c%
You can also use this command to find out if an opening brace has been properly closed.

**********************************************************************
16jun09 --Ron Eickler class on basic scripting

#how to create/use functions
main()
{
# this is a block of commands or function
# Do something
}

main # calls function

####Your mom

#!/bin/bash
yourmom() {
	echo "your entry please "
	read snap
 	echo " your mom says $SNAP"
}

yourmom
&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&
MOMASAYS=$1
echo "your mom says $MOMASAYS"

&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&
echo $@ # will echo all arguments

&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&

if [ -e \.bash_profile ] then
echo "profile exists"
else
echo "no profile for you B$*%^"
fi


# to make it talk... use say

&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&


**********************************************************************
19jun09  --siggy

to get sort to REALLY sort numerically...
ls | grep media | sort -t. -k2 -n

gets you
media-list.2
media-list.3
media-list.4
media-list.5
media-list.6
media-list.7
...

**********************************************************************
22jun09  --siggy  from LDAP (Mink) book pg73

"The set list command in vi can help you track down extra whitespace.
     ALSO
cat -e <filename>
**********************************************************************
30jun09  Amanda Smith  postfix error / sendmail test

[dsiegfriedt@pl1rdb351 ~]$ cat /etc/redhat-release | mail -s "`hostname -s`: `date`" dsiegfriedt@edmunds.com
[dsiegfriedt@pl1rdb351 ~]$ WARNING: RunAsUser for MSP ignored, check group ids (egid=10190, want=51)
can not chdir(/var/spool/clientmqueue/): Permission denied
Program mode requires special privileges, e.g., root or TrustedUser.

to fix

chmod 2755 /usr/sbin/sendmail.sendmail
**********************************************************************
7jul09  Amanda

Smith, Amanda  11:38 AM
booyah
damn regular expressions
this is how it works:

case ${my_var} in
  [0-9]|[1-4][0-9]|50) temp_color=0;;  # 0-50
  5[1-9]|6[0-9]|7[1-5]) temp_color=1;; # 51-75
  7[6-9]|8[0-9]) temp_color=2;;        # 76-89
  9[0-4]) temp_color=3;;               # 90-94
   temp_color=4;;                    # 95-100
esac

11:39 AM 
case $hour in
  [0-9]|1[0-1] )
    echo "Good morning, $you!";;
  12 )
    echo "Lunch time!";;
  1[3-6] )
    echo "Good afternoon, $you!";;
  
    echo "Good night, $you. Sweet dreams.";;
esac
**********************************************************************
21jul09 Corey Johnson

to find physical memory use:

dmidecode | grep Size:

**********************************************************************
# 9jun08  --siggy

# http://www.linuxjournal.com/content/create-logo-command-line

# You can create a neat logo from the Linux command line:

convert -size 800x120 xc:white -font Times-Roman -pointsize 100 -fill gray -annotate +20+80 'Linux is cool!' -fill black -annotate +23+83 'Linux is cool!' -trim +repage logo.png

#And, the following command should display the result:

# > qiv logo.png

# If you want to play with multiple colors and fonts, the following will help:

# > convert -list type
# > convert -list colorFirst from dir above type:

**********************************************************************
mkisofs -l -o name.iso FQPN/dirname

To write a CD:

/cdrecord -v -eject /dev/sg0 speed=4 -data FQPN.iso

***** EXAMPLE *****

[/usr/bin] (15)# cdrecord -v -eject dev=0,4,0 speed=4 -data /porn/porn.iso
Cdrecord 1.10 (i686-pc-linux-gnu) Copyright (C) 1995-2001 Jrg Schilling
TOC Type: 1 = CD-ROM
scsidev: '0,4,0'
scsibus: 0 target: 4 lun: 0
Linux sg driver version: 3.1.19
Using libscg version 'schily-0.5'
atapi: 0
Device type    : Removable CD-ROM
Version        : 2
Response Format: 2
Capabilities   : SYNC 
Vendor_info    : '        '
Identifikation : 'CD-R/RW RW7060S '
Revision       : '1.80'
Device seems to be: Generic mmc CD-RW.
Using generic SCSI-3/mmc CD-R driver (mmc_cdr).
Driver flags   : SWABAUDIO
Drive buf size : 1359872 = 1328 KB
FIFO size      : 4194304 = 4096 KB
Track 01: data  267 MB        
Total size:     306 MB (30:24.24) = 136818 sectors
Lout start:     307 MB (30:26/18) = 136818 sectors
Current Secsize: 2048
ATIP info from disk:
  Indicated writing power: 4
  Is not unrestricted
  Is not erasable
  Disk sub type: Medium Type A, low Beta category (A-) (2)
  ATIP start of lead in:  -12294 (97:18/06)
  ATIP start of lead out: 359849 (79:59/74)
Disk type:    unknown
Manuf. index: -1
Manufacturer: unknown (not in table)
Blocks total: 359849 Blocks current: 359849 Blocks remaining: 223031
Starting to write CD/DVD at speed 4 in write mode for single session.
Last chance to quit, starting real write in 0 seconds. Operation starts.
Waiting for reader process to fill input buffer ... input buffer ready.
Performing OPC...
Starting new track at sector: 0
Track 01:   4 of 267 MB written (fifo 100%).

**********************************************************************
For audio CDs

cdrecord -v -eject dev=0,4,0 speed=4 -audio -pad /home/siggy/TRACKS/FS-side1.wav /home/siggy/TRACKS/FS-side2.wav ...

**********************************************************************
27aug09  --siggy

NIC hardware addresses can be found in /etc/sysconfig/hwconf
    (IF you happen to delete them from /etc/sysconfig/network-scripts/ifcfg-eth?

    AND ifconfig  does not help)

cat /etc/sysconfig/hwconf | grep -A3 "device: eth"

**********************************************************************
27aug09  -wookie

story of his 1st week in Unix

DON'T try this!!!!

But it is a good interview question!

What happens if you type this

# su
# cd /usr/bin
# ls -laR / > more
# ls -lar / | more

Root outputs "ls -laR" to the file more (yes system internal)
    "more" lives in /usr/bin or else this would have failed
What happens is that:

1) more is no more   teehee
2) all symbolic links are now "0" byte files... Oh wait the end point file is "0" byte file.
3) you have to re-install you OS and anything else on that machine.

**********************************************************************
28aug09  --siggy

sysctl -p will activate any changes you make to /etc/sysctl.conf
**********************************************************************
17sep09  --siggy

LDAP passwd change
The hash was generated using the command slappasswd -s secret.
cd /etc/openldap
vi slapd.con

28sep09
Backing up LDAP
pl1rad702.admin.edmunds.com # nice slapcat -l ~dsiegfriedt/LDAP/backup-28sep09
			    Less that a second to create a 12013 line backup file
chmod700 ~dsiegfriedt/LDAP/backup-28sep09

&&&&&
pl1rad702.admin.edmunds.com

crontab -l

[root@pl1rad702 ~]# crontab -l
#17 6 * * * /nfs/local/bin/ldap_DB_dump.sh
* * * * * /usr/local/bin/file_report.sh >/dev/null

[root@pl1rns702 LDAP]# more ldap_DB_dump.sh 
#!/bin/bash
# The variables
#
ldapBinary="/usr/bin/ldapsearch"
todaysDate="`date -d "0 day ago" +%Y%m%d`"
archiveDestination="/nfs/local/ldap_archive"
backupPassword="place LDAP passwd here (in plane text :^("
#
# Backup the Database
#
$ldapBinary -H ldaps://localhost -D "cn=Manager,dc=edmunds,dc=com" -w$backupPassword -b 'dc=edmunds,dc=com' -x -L -L -L >> $archiveDestination/ldap-dump.ldif-$todaysDat
e
#
# Smack it up, zip it, rub it down oh no.....
#
/bin/gzip  $archiveDestination/ldap-dump.ldif-$todaysDate
&&&&&
[root@pl1rad702 ~]# ll -rt /nfs/local/ldap_archive/
&&&&&

**********************************************************************
21sep09  --siggy

vi command to make everything lowercase

:%s/.*/\L&/
**********************************************************************
21sep09  --siggy

file encryption

gpg --decrypt /nfs/local/admin/cont/admin/gpg/stuff.txt.gpg | less

redirect to <filename>
edit <filename>
gpg -c <filename>
    &&&&& will ask for "passphrase"
encrypts creating a file named  <filename>.gpg
****** 
rm -f <filename> (this is your plane text file)
**********************************************************************
25sep09  --siggy ...column command 

(dsiegfriedt)[ ~ ] {13} > cat Ebiz-ssh.csv | column -s, -t
byoshimura   mzheng1.edmunds.hq                         10.32.41.23  00-11-85-5b-af-bc  X  X
fcalimage    fcalimage.edmunds.hq                       10.32.41.4   00-11-85-5b-5f-ca  X  X
grush        grush.edmunds.hq                           10.32.41.43  00-12-3f-35-b0-77  X  X
akarapet     obequay-gx620.edmunds.hq                   10.32.35.42  00-18-8b-04-61-bd  X  X
seanc        mlee-d620.edmunds.hq                       10.32.35.43  00-18-8b-cc-8e-34  X  X

**********************************************************************
28sep09  --siggy

root@pl1rad710 ~]# sosreport

sosreport (version 1.7)

This utility will collect some detailed  information about the
hardware and  setup of your  Red Hat Enterprise Linux  system.
The information is collected and an archive is  packaged under
/tmp, which you can send to a support rappresentative.
Red Hat will use this information for diagnostic purposes ONLY
and it will be considered confidential information.

This process may take a while to complete.
No changes will be made to your system.

Press ENTER to continue, or CTRL-C to quit.

Please enter your first initial and last name [pl1rad710]: dsiegfriedt
Please enter the case number that you are generating this report for: 804971598-PER610              

 Progress [###################100%##################][00:52/00:52]

Creating compressed archive...

Your sosreport has been generated and saved in:
  /tmp/sosreport-dsiegfriedt.804971598610-566206-929dba.tar.bz2

The md5sum is: f693d09177dfc56917bb319a08929dba

Please send this file to your support representative.

**********************************************************************
6Oct09  --siggy

DNS Views

named.conf
	ACL sets IP range of machines with this view

	The end of this file should have a "default-view" pointing to a standard mapset

var/named/zones-views
	list of subdomains (maps) available for associated view
  Maps contain specific pointers for THAT subdomain


**********************************************************************
6oct09  --siggy  BSD vs SYS V

On a BSD-based system, use:
% ps -ax 

On a SYS V-based system, use:
% ps -ef | grep named

**********************************************************************
14oct09  --siggy
chmod

1=sticky
2=SGID
4=SUID

3=SGID && sticky
5=SUID && sticky
6=SGID && SUID
7=sticky, SUID && SGID

drwxrwxrwt    8 root root   4096 Oct 19 11:05 tmp (1777)
-rw-r--r--    1 root root   1975 Sep  3 13:15 passwd (0644)

**********************************************************************
22oct09  --siggy

iDRAC

racadm

/admin1-> help
[Usage]
    show   [<options>] [<target>] [<properties>] 
           [<propertyname>== <propertyvalue>]
    set    [<options>] [<target>] <propertyname>=<value>
    cd     [<options>] [<target>]
    create [<options>] <target> [<property of new target>=<value>] 
           [<property of new target>=<value>]
    delete [<options>] <target>
    exit   [<options>]
    reset  [<options>] [<target>]
    start  [<options>] [<target>]
    stop   [<options>] [<target>]
    version [<options>]
    help   [<options>] [<help topics>]
    load -source <URI> [<options>] [<target>]
    dump -destination <URI> [<options>] [<target>]

**********************************************************************
27oct09  --siggy

To check tzdata

zdump -v /etc/localtime | grep 2007

ie:
(dsiegfriedt)[ ~ ] {4} > zdump -v /etc/localtime | grep 2007
/etc/localtime  Sun Mar 11 09:59:59 2007 UTC = Sun Mar 11 01:59:59 2007 PST isdst=0
/etc/localtime  Sun Mar 11 10:00:00 2007 UTC = Sun Mar 11 03:00:00 2007 PDT isdst=1
/etc/localtime  Sun Nov  4 08:59:59 2007 UTC = Sun Nov  4 01:59:59 2007 PDT isdst=1
/etc/localtime  Sun Nov  4 09:00:00 2007 UTC = Sun Nov  4 01:00:00 2007 PST isdst=0


**********************************************************************
28oct09  --siggy

[root@pl1rwe211 home]# passwd cars
Changing password for user cars.
passwd: Authentication token manipulation error

There was an entry missing in  /etc/shadow for the user "cars"
**********************************************************************
28oct09  --siggy

setting time on xen guests (paravirt)

[root@pl1rap711-beta xen]# pwd
/proc/sys/xen

[root@pl1rap711-beta xen]# more independent_wallclock 
0
[root@pl1rap711-beta xen]# echo 1 > independent_wallclock 
[root@pl1rap711-beta xen]# date
Wed Oct 28 14:53:07 PDT 2009
[root@pl1rap711-beta xen]# date 10282230
Wed Oct 28 22:30:00 PDT 2009
[root@pl1rap711-beta xen]# date
Wed Oct 28 22:30:02 PDT 2009

**********************************************************************
28oct09  --siggy

http://www.webmasterworld.com/forum13/4081.htm

PERL check which modules are loaded/available

perl -e'print join "\n", @INC' on a unix type box will give you a list of where perl is looking for modules. You could then list the contents of those directories.
**********************************************************************
5nov09  --siggy

to show line numbers of a file use "nl"

nl /etc/fstab
**********************************************************************
11nov09  --siggy

mount /dev/sda1
touch file1
#error, says read-only filesystem

mount -o rw,remount /dev/sda1
mount -o remount,rw /dev/foo /dir
**********************************************************************
17nov09  --siggy

from: http://www.commandlinefu.com/commands/browse

lsmod | cut -d' ' -f1 | xargs modinfo | egrep '^file|^desc|^dep' | sed -e'/^dep/s/$/\n/g'
Short Information about loaded kernel modules
**********************************************************************
17nov09  --siggy

as user adding 

sudo bash -c "cat /tmp/ANKUR >> /tmp/working-stuff"
**********************************************************************
19nov09  --siggy

from: http://www.commandlinefu.com/commands/browse

Random passwd
mkpasswd() { head -c $(($1)) /dev/urandom | uuencode - | sed -n 's/.//;2s/\(.\{'$1'\}\).*/\1/p' ;}

Rip youtube video that you just watched.
video=$(ls /tmp | grep -e Flash\w*); ffmpeg -i /tmp/$video -f mp3 -ab 192k ~/ytaudio.mp3
**********************************************************************
2dec09  --siggy

http://www.commandlinefu.com/commands/browse
egrep -i "somepattern" `find . -type f -print`
search for a pattern (regex) in all text files (ignoring binary files) in a directory tree

**********************************************************************
2dec09  Ankur

Rather than trying to remember how to VNC into the atrium boxes, Ankur showed us this.

ssh pl1rad746.admin.edmunds.com -X
sudo /nfs/common/bmc/software/7.50.02.04/linux_bao_application_adapter_installer_7_5_02_04.bin

**********************************************************************
7dec09  --siggy

response for exit code.

#!/bin/bash

if [ $? == 0 ]; then
	echo "success"
else
	echo "NO love"
fi

On a single line:
if (($?)); then echo "Test complete"; else echo "test has died a HORRIBLE death"; fi

 
**********************************************************************
10dec09  --siggy

list of bash (error) return codes

 /usr/include/asm/errno.h
/usr/src/kernels/2.6.9-55.EL-i686/include/asm-generic/errno.h
**********************************************************************
27jan10  --siggy

Show File System Hierarchy

man hier
**********************************************************************
3feb10  --siggy

restrick login to a specific machine

EBIZ

Adding user
visudo
/etc/security/access.netgroups.conf
/etc/ssh/sshd_config
  (AllowUsers byoshimura fcalimage grush akarapet skuang ksexton dsiegfriedt ttruong amahmood jthompson dleeds knguyen skollipara)

    ** service sshd restart **
**********************************************************************
10feb10  --siggy

what runlevel are we

who -r
**********************************************************************
16feb10  --siggy

select a random number between 1-60
TOTAL overkill to pick a random minute to run a "ntp" cron job (to insure all VMs don't overwhelm the ntp server)

SECRAND=$[($RANDOM % 60) + 1]
sleep $SECRAND
MINRAND=$[($RANDOM % 60) + 1]
cat >> /var/spool/cron/root<<EOF
$MINRAND * * * * /usr/bin/ntpdate pl1rns702.admin.edmunds.com > /dev/null 2>&1
EOF
**********************************************************************
11mar10  --siggy which ports are open

netstat -anup
**********************************************************************
31mar10  --siggy
pl1rns704.admin
cd /var/named/chroot/etc

less named.conf
key (secret)  "looks" plain text but is base64. and so the it has to be a multiple of 4 (characters)
environment name --- appropreate number of "0"s --- 1


To test:
       envir:key       -type  
dig -y ere2e:ere2e001  -t txt environment.edmunds.com
dig -y ere2e:ere2e001  -t txt url-prefix.edmunds.com
dig -y eirer:eirer001 rpmbuild.service.edmunds.com
dig -y fam:fam1 rpmbuild.service.edmunds.com
dig -y vrt:vrt1 rpmbuild.service.edmunds.com

dig -y EIR-ER:EIRER001 rpmbuild.service.edmunds.com
;; ANSWER SECTION:
rpmbuild.service.edmunds.com. 300 IN	CNAME	tl1rad726.admin.edmunds.com.
tl1rad726.admin.edmunds.com. 86400 IN	A	10.69.65.5

dig -y EIR-ER:EIRER001 -t txt environment.edmunds.com
;; ANSWER SECTION:
environment.edmunds.com. 300	IN	TXT	"EIR-ER"

**********************************************************************
1apr10  --siggy    yum command for "dry-run"  also see "hadoop-notes"

With up2date, it was "up2date --dry-run" which ran through the full update process, but didn't 
install anything.

The closest you are going to get with yum is "yum check-update" which tells you the names of
packages you are going to update.

You can always run "yum update" and it will ask you if you want to proceed with the install 
(which is what the -y switch overrides) and just say "no"
**********************************************************************
9apr10  --siggy/Ankur  

On BL (or Kickstart) you get an error "Unable to read group information..."

After adding a RPM to the Servers directory running "createrepo ." is not correct.

touch repodata/comps.xml
createrepo -g repodata/comps.xml .  ***** DON'T forget the dot or a path to RPMs

5Apr11  --siggy
You can use the "-o" to change the location of the output file

[root@pizzaman Packages]# pwd
/home/linux/F13/Packages
[root@pizzaman Packages]# createrepo --update -g repodata/comps.xml -o .. .

so repodata is written in /home/linuix/F13
**********************************************************************
13apr10  --siggy

rm !(*.foo|*.bar|*.baz)
Delete all files in a folder that don't match a certain file extension
**********************************************************************
14apr10  --siggy

bash to find odd/even number

#!/bin/bash
#NUMBER=`ifconfig eth0 | grep inet | grep -v inet6 |  awk -F. '{print $4}' | sed s/Bcast.*.//`

NUMBER=`hostname -i | awk -F. '{print $4}'`

#echo "NUMBER = "$NUMBER

if [ $((NUMBER % 2)) -eq 0 ]; then
echo "IP  is even"
else
echo "IP is odd"
fi
**********************************************************************
30Apr10  Ankur

I think we should configure it to look for 2.6.18-[0-9]{2}.El5xen in the rpm.

it will look for dash any number (0-9) and for another 2 digits
**********************************************************************
4may10 --siggy

Root login from console

 To prevent root logins via the SSH protocol, edit the SSH daemon's configuration file: /etc/ssh/sshd_config. Change the line that says:

# PermitRootLogin yes

To read as follows:

PermitRootLogin no
**********************************************************************
5May10 -- siggy

Subnet Cheat Sheet
CIDR	Hosts	Netmask	        Amount of a Class C
/30	4	255.255.255.252	1/64
/29	8	255.255.255.248	1/32
/28	16	255.255.255.240	1/16
/27	32	255.255.255.224	1/8
/26	64	255.255.255.192	1/4
/24	256	255.255.255.0	1
/23	512	255.255.254.0	2x
/22	1024	255.255.252.0	4x
/21	2048	255.255.248.0	8x
/20	4096	255.255.240.0	16x
/19	8192	255.255.224.0	32x
/18	16384	255.255.192.0	64x
/17	32768	255.255.128.0	128x
/16	65536	255.255.0.0	256x
**********************************************************************
18jun10  Daniel Leeds (on his last day) put this line into Jeff's .bash_profile

...
Mail -s "A public service announcement" sysops@edmunds.com < .happycakes

[root@dl1rap401-epe spool]# cat ~jthompson/.happycakes 
I feel like dancing!  Kenny break out the cardboard it's gonna be a party!

every time he logged into a machine.... it sends mail to "sysops"
**********************************************************************
22jun10  --siggy found on RedHat site

mucking with history!

The shell's entire history can be cleared by running the command history -c. 

Its possible to remove a single line from the shell's history by running the command history -d <line>.
**********************************************************************
8jul10 Jason Lee

egrep -o while *

the "-o" will only return what you put (regex also)
**********************************************************************
9jul10  --siggy

uuencode is in the sharutils package
**********************************************************************
12aug10  --siggy (Brad Allison)

Xen kernel single user mode

you have to edit the module line (with ro)  in it.   Append 1 and boot
**********************************************************************
16aug10  --siggy

http://www.thegeekstuff.com/2010/04/unix-bash-function-examples/

Example 3. Bash Function to generate random password

The following function is used to generate the random strong passwords with special 
character for the given length. If length is not given by default it generates with 
12 characters length.

$ function rpass() {
        cat /dev/urandom | tr -cd '[:graph:]' | head -c ${1:-12}
}

$ rpass 6
-Ju.T[[

$ rpass
Gz1f!aKN^""k

In the above example, when rpass is executed with the argument 6, it generates random 
password with 6 characters and rpass without argument generates 12 character length 
password. ${1:-12} means if $1 is unset or null 12 will be returned else value of $1 
will be substituted.
**********************************************************************
17aug10  --siggy
bash scripting... comparison "-eq" vs "="

"-eq" for numeric
"=" for strings

*****

if [ "$myvar" -eq 3 ]
then 
    echo "myvar equals 3"
fi


if [ "$myvar" = "3" ]
then
    echo "myvar equals 3"
fi

In the above two comparisons do exactly the same thing, but the first uses arithmetic 
comparison operators, while the second uses string comparison operators.
**********************************************************************
27sep10  --siggy  BUSY BEE

http://www.commandlinefu.com/commands/view/6663/pretend-to-be-busy-in-office-to-enjoy-a-cup-of-coffee

cat /dev/urandom | hexdump -C | grep "ca fe"
pretend to be busy in office to enjoy a cup of coffee
just make some data scrolling off the terminal. wow.

**********************************************************************
21sep  --siggy

NIS commands

To list all the available maps and their master(s), type the following.
ypwhich -m

[dsiegfriedt@els-e64307 TEMP]$ ypwhich -m | grep host
hosts.byaddr fsrec1
netgroup.byhost fsrec1
hosts.byname fsrec1

[dsiegfriedt@els-e64307 TEMP]$ ypcat -x
Use "ethers"	for map "ethers.byname"
Use "aliases"	for map "mail.aliases"
Use "services"	for map "services.byname"
Use "protocols"	for map "protocols.bynumber"
Use "hosts"	for map "hosts.byname"
Use "networks"	for map "networks.byaddr"
Use "group"	for map "group.byname"
Use "passwd"	for map "passwd.byname"


**********************************************************************
5Oct10  Brad Allison (26May10 email)

ssh into a box without updating the ~/.ssh/known_hosts file

ssh -o StrictHostKeyChecking=no <hostname>

**********************************************************************
11Oct10  --siggy  Air Conditioning

One ton of capacity equals 12,000 Btu/h
(also one Btu/h is equal to 0.293 watts so...One ton = 3.516 Kilowatts)

**********************************************************************
20Oct10  --siggy Which DNS server is mine?

your DNS server is dictated by what is in /etc/resolv.conf
OR
[root@aruba etc]# nslookup
> set type=ns 
> cup.directv.com
Server:		10.200.65.214
Address:	10.200.65.214#53

cup.directv.com	nameserver = elron.cup.directv.com.

**********************************************************************
21Oct10  --siggy NMAP nmap (that thing you can never remmeber the name of...)

nmap -A -T4 <IP or hostname>
    (took 121.667 seconds)
nmap -O <IP or hostname>
    (took 13.120 seconds)

-A   To enable OS and version detection
-T4  For faster execution
-O   Enable OS detection

1Aug11  --siggy  NMAP ping
nmap -sP 192.168.1.1-254

Starting Nmap 4.11 ( http://www.insecure.org/nmap/ ) at 2011-08-01 10:19 PDT
Host 192.168.1.156 appears to be up.
Nmap finished: 254 IP addresses (1 host up) scanned in 5.337 seconds

-sP  Skip port scan   (just ping)

**********************************************************************
10Nov10 --siggy   Xorg problem

machine would not come up in runlevel 5

/var/log/messages
init: prefdm main process (4100) terminated with status 1

/var/log/Xorg0.log
Fatal server error:
[   555.879] no screens found
[   555.879] 
Please consult the Fedora Project support 
	 at http://bodhi.fedoraproject.org/
 for help. 
[   555.879] Please also check the log file at "/var/log/Xorg.1.log" for additional information.
[   555.879] 



FIX:

rm -f /etc/X11/xorg.conf
init 3
init 5
**********************************************************************
4Nov10  Dave Micheals  Firefox says it is running

rm ~/.mozilla/firefox/blahblahblah.default/lock
rm ~/.mozilla/firefox/blahblahblah.default/.parentlock

from AMPL Apr12

firefox --ProfileManager

**********************************************************************
22Nov10  --siggy  Change spaces to underscores

Create script and run it in the directory that you want the files to be changed

#!/bin/bash

ls | while read -r FILE
do
    mv -v "$FILE" `echo $FILE | tr ' ' '_' `
done

**********************************************************************
29Nov10  Dave Micheals  to make sure, when rebooting, the file systems don't fsck

(can use "dh -h" or "/etc/fstab" for correct blahdy-blah name)

tune2fs -l /dev/blahdy-blah   (List  the  contents  of  the filesystem superblock, 
                               including the current values of the parameters that 
                               can be set via this program.)

tune2fs -i 0 /dev/blahdy-blah (Adjust the maximal time between two filesystem checks.  
                               No  suffix or d will interpret the number interval-
                               between-checks as days, m as months, and w as weeks.  
                               A value of zero will disable the time-dependent check-ing.

**********************************************************************
10Dec10  --siggy SUPERBLOCKS (superblock)

TIP you can also try any one of the following command(s) to determine alternative-superblock 
locations:
# mke2fs -n /dev/sda3
OR
# dumpe2fs /dev/sda2 | grep -i superblock

http://www.cyberciti.biz/tips/surviving-a-linux-filesystem-failures.html

So how the hell you are gonna Surviving a Filesystem Failures? Most of time fsck 
(front end to ext2/ext3 utility) can fix the problem, first simply run e2fsck - 
to check a Linux ext2/ext3 file system (assuming /home [/dev/sda3 partition] filesystem 
for demo purpose), first unmount /dev/sda3 then type following command :
# e2fsck -f /dev/sda3

INODES (inode)

The inode (index node) is a fundamental concept in the Linux and UNIX filesystem. Each 
object in the filesystem is represented by an inode. But what are the objects? Let us 
try to understand it in simple words. Each and every file under Linux (and UNIX) has 
following attributes:

=> File type (executable, block special etc)
=> Permissions (read, write etc)
=> Owner
=> Group
=> File Size
=> File access, change and modification time (remember UNIX or Linux never stores file 
   creation time, this is favorite question asked in UNIX/Linux sys admin job interview)
=> File deletion time
=> Number of links (soft/hard)
=> Extended attribute such as append only or no one can delete file including root user 
   (immutability)
=> Access Control List (ACLs)

**********************************************************************
17Dec10  --siggy Linux how to determine the file system type

# df -T
 or
# mount
**********************************************************************
17Dec10  --siggy  

http://www.cyberciti.biz/faq/linux-remove-all-partitions-data-empty-disk/

You can use the shred command to securely remove everything so that no one recover any data:
# shred -n 5 -vz /dev/sda
**********************************************************************
29Dec10  --siggy mincom

minicom ttyS0

# minicom -s (setup)
Serial port setup
change "A"
ttyS? <CR> <CR>
<Ctrl-a> <z>
Q
yes <CR>

#setup minicom ports and dfl files
for i in 0 1 2 3
do
cat >> /etc/minirc.ttyS$i<<EOF
# Machine-generated file - use "minicom -s" to change parameters.
pu port             /dev/ttyS$i
EOF
done

cat >> /etc/minirc.dfl<<EOF
# Machine-generated file - use "minicom -s" to change parameters.
pu port             /dev/ttyS0
EOF

**********************************************************************
4Jan11  --siggy rsync and "/" (slashes)

   rsync -avz foo:src/bar /data/tmp

this would recursively transfer all files from the directory src/bar 
on the machine foo into the /data/tmp/bar directory on the local machine. 
The files are transferred in "archive" mode, which ensures that symbolic links,
devices, attributes, permissions, ownerships etc are preserved in the transfer. 
Additionally, compression will be used to reduce the size of data portions of the transfer.

   rsync -avz foo:src/bar/ /data/tmp

a trailing slash on the source changes this behavior to transfer all files
from the directory src/bar on the machine foo into the /data/tmp/. 
A trailing / on a source name means "copy the contents of this directory". 
Without a trailing slash it means "copy the directory". 

**********************************************************************
6Jan11  --siggy dd

Where sizes are specified, a decimal, octal, or hexadecimal number of
     bytes is expected.  If the number ends with a ``b'', ``k'', ``m'', ``g'',
     or ``w'', the number is multiplied by 512, 1024 (1K), 1048576 (1M),
     1073741824 (1G) or the number of bytes in an integer, respectively.  Two
     or more numbers may be separated by an ``x'' to indicate a product.

**********************************************************************
19Jan11  --siggy    To back up thumb drives

# dd if=/dev/sdb1 of=/data/dd-of-PENDRIVE
**********************************************************************
27jan11  --siggy Standard scripting checks

http://www.linuxtopia.org/online_books/advanced_bash_scripting_guide/contributed-scripts.html

# =================================================================
#                 Standard Check for Script Argument(s)
ARGS=1
E_BADARGS=65
E_NOFILE=66

if [ $# -ne $ARGS ]  # Correct number of arguments passed to script?
then
  echo "Usage: `basename $0` filename"
  exit $E_BADARGS
fi

if [ -f "$1" ]       # Check if file exists.
then
    file_name=$1
else
    echo "File \"$1\" does not exist."
    exit $E_NOFILE
fi
# =================================================================



**********************************************************************
16feb11  AMPL  to get DHCP to run on eth1 ONLY

edit /etc/sysconfig/dhcpd

DHCPDARGS=eth1
**********************************************************************
18feb11  --siggy  syncing bash historys between shells

http://briancarper.net/blog/248/

(1)
shopt -s histappend
in ~/.bashrc, so that bash just keeps on adding to the end of the ~/.bash_history file rather than obliterate 
the file at regular intervals.
(2)
history -a
which tells bash to append to ~/.bash_history any commands in the current terminal that aren't already in there.
(3)
history -n
which tells bash to read any new lines that have appeared in ~/.bash_history since the last time it looked.
OR (4)
export PROMPT_COMMAND="history -n; history -a"
PROMPT_COMMAND lets you specify a command that bash will run every time it shows you a fresh command prompt, 
i.e. every time you run a command and the command finishes. So the above tells bash to read any new lines that 
have appeared in ~/.bash_history since the last time it read it, and then append the last-run command from this 
terminal to ~/.bash_history, every time you run a command.

**********************************************************************
4mar11  --siggy OR conditional

if [ $first -eq 0 ] && [ $second -eq 0 ]
then

loop till true

#ask for the IP address 
echo "Please enter the IP address for this machine"
read NEWIP

HACKEDIP=`echo $NEWIP| awk -F. '{print $4}'`

until  [ $HACKEDIP -ne 1 ] && [ $HACKEDIP -ne 254 ]
do
    echo "The final octet can NOT be 1 or 254"
    echo "Please enter the IP address for this machine"
    read NEWIP
    HACKEDIP=`echo $NEWIP| awk -F. '{print $4}'`
done

**********************************************************************
16mar11  --siggy   length of input string (no array)

http://bash.cyberciti.biz/decision-making/find-string-length/

echo -n "Enter a string : "
read string
 
LEN=$(echo ${#string})
 
if [ $LEN -lt 5 ]; then
        echo "$string doesn't have at least 5 characters"
else
        echo "$string has 5 or more characters"
fi
**********************************************************************
6May11  --siggy   sort inside vi

:33,61 !sort
Sort specific lines while editing within vi

Sort lines within vi editor. In this example sort lines 33-61 asciibetically.

**********************************************************************
16May11 (Superceded by 28Aug12)  --siggy  replacing existing firefox

download and untar the latest version
mkdir /usr/lib/firefox-<New-Version-Number>
cp -r Downloads/firefox-<New-Version-Number> /usr/lib/firefox-<New-Version-Number>

vi /usr/bin/firefox
    replace Old-Version-Number New-Version-Number (globally)

**********************************************************************
16Mat11  --siggy   random MAC/HWADDR address

http://www.commandlinefu.com/commands/browse

od /dev/urandom -w6 -tx1 -An|sed -e 's/ //' -e 's/ /:/g'|head -n 1
Generat a Random MAC address
Just increase the 1 at the end if you want to generate more than one.
**********************************************************************
25may11  --siggy SQL (sqlite3) commands

This came from troublshooting kickstart.  The repodata from the DVD had file:

<LONG string of numbers>-filelists.sqlite.bz2

cp to a safe directory
cd to that directory
bunzip2 <LONG string of numbers>-filelists.sqlite.bz2

will give you:
<LONG string of numbers>-filelists.sqlite

http://www.sqlite.org/sqlite.html
http://zetcode.com/databases/sqlitetutorial/tool/


dsiegfriedt@els-e64307:~$ which sqlite3
/usr/bin/sqlite3

$sqlite3 filelist.sqlite
sqlite> .tables					#gives you a list of tables
db_info filelist Packages
sqlite> .mode list
sqlite> .separator |
sqlite> .output /sqlite-out
sqlite> select * from db_info;
sqlite> .exit
$ cat /sqlite-out

Converting An Entire Database To An ASCII Text File
Use the ".dump" command to convert the entire contents of a database into a single 
ASCII text file. This file can be converted back into a database by piping it back 
into sqlite3.

A good way to make an archival copy of a database is this:

echo '.dump' | sqlite3 ex1 > ex1.dump
**********************************************************************
3jun11  --siggy   batch renameing (removing 1st 4 charaters from a filename)

for i in `ls`; do mv $i `echo $i | sed 's/^.\{4\}//'`; done

then copy them to SANSA FUSE
cd to top most directory with files you want
find . -name "*.mp3" -exec cp "{}" /media/SANSA\ FUZE/MUSIC/ ";"
**********************************************************************
12jul11  --siggy   un-tarring into a different directory

http://www.linuxquestions.org/questions/linux-general-1/untar-file-to-a-specific-location-394580/

For example if I have test.tar in /home/test and want to extract the contents of the tar into /tmp/, can it be done.
tar -xf /home/test/test.tar -C /tmp
**********************************************************************
9Aug11  --siggy   Focus-follows-mouse

yum -y install control-center-extra

Systems => Preferences => Windows
check box next to:
"Select windows when the mouse moves over them"
**********************************************************************
11Aug11  --siggy fping
fping -g 192.168.0.100 192.168.0.130
fping -g 192.168.0.1/24

...
192.168.0.127 is alive
192.168.0.129 is alive
ICMP Host Unreachable from 192.168.0.233 for ICMP Echo sent to 192.168.0.100
ICMP Host Unreachable from 192.168.0.233 for ICMP Echo sent to 192.168.0.100
...
**********************************************************************
22Aug11  --siggy   zero padding on pathnames

for ((x=$START;x<=$STOP;x++)); do echo `printf "%020d" $x`;done

will return 20 character file names

**********************************************************************
25aug11  --siggy

echo $(grep "^[^']\{3,5\}$" /usr/share/dict/words|shuf -n4)
Generate an XKCD #936 style 4 word password

**********************************************************************
1Sep11  --siggy  RAID levels

0 = striped (block level)
1 = mirrored data
2 = stiped (bit level)
3 = striped (byte level) data with a parity disk  [minimum of 3 disks]
4 = striped (block level) data with a parity disk  [minimum of 3 disks]
5 = striped (block level) data with parity striped across disks [minimum of 3 disks]
6 = RAID 5 with an additional parity block (block-level) striping with two parity blocks striped across disks.
0+1 or 10 = combination of level 0 and level 1 data is striped AND mirrored
0+3 = combination of level 0 and level3 dedicated parity array across striped disks
10+0 = a stripe of RAID 10s (0+1)
50 = combines the straight block-level striping of RAID 0 with the distributed parity of RAID 5.
51 or 5+1 = two RAID 5's that are mirrored
60 = combines the straight block-level striping of RAID 0 with the distributed double parity of RAID 6

**********************************************************************
IPv6 8 colon seperated fields of 4 hex characters
loopback adress = address ::1 (0:0:0:0:0:0:0:1 in full notation)

**********************************************************************
1Sep11  --siggy  better looking cat

cat /etc/passwd | column -ts:
cat /etc/fstab | column -t

**********************************************************************
13Oct11  --siggy  Mounting an LV

# pvs
  PV         VG         Fmt  Attr PSize   PFree
  /dev/hda2  VolGroup01 lvm2 a-   148.94G 32.00M
  /dev/hdb2  VolGroup00 lvm2 a-   114.94G 96.00M

Next, let's list the logical volumes in VolGroup01.

# lvdisplay /dev/VolGroup01
  --- Logical volume ---
  LV Name                /dev/VolGroup01/LogVol00
  VG Name                VolGroup01
  ...

# mount /dev/VolGroup01/LogVol00 /tmp/mnt


7Feb13  New SVN server pvcreate, vgcreate, lvcreate / pvs, vgs, lvs

[root@localhost log]# pvcreate /dev/sdb /dev/sdc
  Writing physical volume data to disk "/dev/sdb"
  Physical volume "/dev/sdb" successfully created
  Writing physical volume data to disk "/dev/sdc"
  Physical volume "/dev/sdc" successfully created
[root@localhost log]# pvs
  PV         VG   Fmt  Attr PSize   PFree
  /dev/sda3  vg0  lvm2 a--  274.38G    0 
  /dev/sdb        lvm2 a--    2.73T 2.73T
  /dev/sdc        lvm2 a--    2.73T 2.73T

[root@localhost log]# vgcreate vg1 /dev/sdb /dev/sdc
  Volume group "vg1" successfully created
[root@localhost log]# vgs
  VG   #PV #LV #SN Attr   VSize   VFree
  vg0    1   2   0 wz--n- 274.38G    0 
  vg1    2   0   0 wz--n-   5.45T 5.45T

[root@localhost log]# lvcreate -L1t -i2 -I64 -nlvol01 vg1
  Logical volume "lvol01" created
[root@localhost log]# lvs
  LV      VG   Attr   LSize   Origin Snap%  Move Log Copy%  Convert
  lv_root vg0  -wi-ao 258.38G                                      
  lv_var  vg0  -wi-ao  16.00G                                      
  lvol01  vg1  -wi-a-   1.00T                                      

[root@localhost log]# lvcreate -L1t -i2 -I64 -nlvol02 vg1
  Logical volume "lvol02" created
[root@localhost log]# lvcreate -L1t -i2 -I64 -nlvol03 vg1
  Logical volume "lvol03" created
[root@localhost log]# lvs
  LV      VG   Attr   LSize   Origin Snap%  Move Log Copy%  Convert
  lv_root vg0  -wi-ao 258.38G                                      
  lv_var  vg0  -wi-ao  16.00G                                      
  lvol01  vg1  -wi-a-   1.00T                                      
  lvol02  vg1  -wi-a-   1.00T                                      
  lvol03  vg1  -wi-a-   1.00T                                      

[root@localhost log]# pvs
  PV         VG   Fmt  Attr PSize   PFree
  /dev/sda3  vg0  lvm2 a--  274.38G    0 
  /dev/sdb   vg1  lvm2 a--    2.73T 1.23T
  /dev/sdc   vg1  lvm2 a--    2.73T 1.23T

[root@localhost log]# vgs
  VG   #PV #LV #SN Attr   VSize   VFree
  vg0    1   2   0 wz--n- 274.38G    0 
  vg1    2   3   0 wz--n-   5.45T 2.45T

[root@localhost log]# lvs
  LV      VG   Attr   LSize   Origin Snap%  Move Log Copy%  Convert
  lv_root vg0  -wi-ao 258.38G                                      
  lv_var  vg0  -wi-ao  16.00G                                      
  lvol01  vg1  -wi-a-   1.00T                                      
  lvol02  vg1  -wi-a-   1.00T                                      
  lvol03  vg1  -wi-a-   1.00T             

8Feb13  To see how much disk space you have left in a VG

[root@localhost ~]# vgs
  VG   #PV #LV #SN Attr   VSize   VFree
  vg0    1   2   0 wz--n- 274.38G    0 
  vg1    2   3   0 wz--n-   5.45T 2.45T
**********************************************************************
9Jan12   --siggy   LVM commands

pvs
pvdisplay
pvscan
vgdisplay
**********************************************************************
20Oct11   --siggy NEW chkconfig command (Fedora 16beta)

systemctl list-units

26Oct16  --siggy (RHEL7.2)
systemctl list-unit-files
systemctl status ????.servcie (???? from list-units or list-unit-files)

28jun12  --siggy   KILLING NetworkManager network Fedora 17

systemctl disable NetworkManager.service
systemctl stop NetworkManager.service

systemctl disable avahi-daemon.service
systemctl stop avahi-daemon.service

systemctl restart network.service

7Jul17 added where this shite lives now

@@@ all processes that start at boot   ***except for old processes that still start via chkconfig***
/etc/systemd/system/multi-user.target.wants/

@@@ to check the status of a process (will it start at boot...)

systemctl is-enabled ????.servcie (???? from list-units or list-unit-files)
enabled

@@@  *****  SEE ALSO 5-6Dec16  *****  @@@
@@@  *****  SEE ALSO 7Nov16  *****  @@@


**********************************************************************
1Nov11  AMPL  newbie test
(03:48:05 PM) Andrew Lynch: set root password to directv (from single user mode)
set eth0 to be onboard ethernet controller (edit /etc/udev/rules.d/70-persisteant-net)
set eth0 to be DHCP (etc/sysconfig/network-scripts/ifcfg-eth0)
get X to boot without errors (/tmp is full)
mount second hard drive as /disk2 with ext4 filesystem & have it mount on reboot (enable in BIOS, mkfs, edit fstab, mount -a)
**********************************************************************
30nov11  Aaron Bandt   checking sudo access

sudo -l (as the user)
**********************************************************************
21Dec11  --siggy    testing for RPM removal dependecies

rpm -e --tests <rpm name>
**********************************************************************
20Dec11  --siggy    see if you are on a VM

dmidecode -s system-manufacturer
**********************************************************************
23Jan12  --siggy  Notes from SCALE 10x

to find the list of file associated with a hard link... use

find / inum

/usr/local/bin is ALWAYS on the local file system

xconsole ....to see console output

ssh -X
**********************************************************************
13Feb12  Pigin not showing buddy list

edit:
~/.purple/prefs.xml

make sure "value=1"
<pref name='list_visible' type='bool' value='1'/>

7Nov13  AMPL
if the buddy window does not appear, in .purple, edit prefs.xml, find list_visible, change it to 1
**********************************************************************
13Feb12   if you can login as yourself 
try running:
/usr/sbin/puppetd -tv --server=puppet.lax1.oversee.net
**********************************************************************
13Mar12  --siggy   to mount a dd image

mount -t vfat -o loop dd-of-16GB-SNADISK /mnt
**********************************************************************
23MAr12   random passwd

pwgen -Bnyc
-B Don't include ambiguous characters in the password
-n Include at least one number in the password
-y Include at least one special symbol in the password
-c Include at least one capital letter in the password
**********************************************************************
26Mar12  --siggy

http://wiki.answers.com/Q/How_do_you_calculate_the_percentage_of_raise

To calculate the percentage of a raise:

Determine the difference between your new pay rate and your old:
New (higher) pay rate - Old (lower) pay rate = Difference
Then divide the difference by your old rate and multiply by 100 to get the percentage.
(Difference/Old pay rate) * 100 = Percentage of raise
**********************************************************************
1May12  --siggy   what provides "import"

imagemagick provide import
**********************************************************************
3May12  --siggy  disk UUIDs

found in the header of /etc/fstab

/dev/disk
**********************************************************************
8Aug12 Moving disk to different hardware

trying to move RHEL4.8 to a R610

boot into rescue mode
edit /etc/modprobe.conf
     replace the end of the SCSI driver line with megaraid_sas
reboot
**********************************************************************
23Aug12   SSL handshake

Laptop(Client)						INFOBLOX(NIOS)

==========>
Client contacts the NIOS appliance and recommends certain parameters, such as SSL version, cipher
settings, and session-specific data.
<==========
The appliance either agrees or recommends other parameters. It also sends its certificate
which contains its public key.
==========>
Client encrypts random number with the public key and sends it to the appliance. The appliance
uses its private key to decrypt the message.

The client and the appliance generate the master secret, and then the symmetric keys.
<==========>
The client and the appliance agree to encrypt all messages with symmetric keys.

The client and the appliance send all their messages through the SSL tunnel which uses the cipher 
settings and encryption to secure their connection.
**********************************************************************
28Aug12   firefox upgrade

#check to see if the "/opt" directory exists.... if not make it
if [ ! -d /opt ]; then
   mkdir /opt
fi

#get the tarball of firefox.....
cp ~dsiegfiedt/Download/firefox-14.0.1.tar.bz2 /data/

#un-tar it in place
tar xjf /data/firefox-14.0.1.tar.bz2

#set a date variable
WHEN=`echo $(date +%d%b%C%y"-"%H%M-%S)`

#Make a backup of /usr/bin/firefox before making any changes
cp /usr/bin/firefox /usr/bin/firefox-$WHEN

#edit /usr/bin/firefox to point at the newer version changing ONLY line 46
sed -e '46s/\/usr\/lib/\/opt\/data/' /usr/bin/firefox
**********************************************************************
18Sep12  --siggy  renew IP address for F16

Linux renew ip command
The -r flag explicitly releases the current lease, and once the lease has been released, 
the client exits. 
dhclient -r
Now obtain fresh IP:
dhclient
**********************************************************************
15Oct12  --siggy  Safe combination change key

S&G #6720
combination is in the secret file
**********************************************************************
31Oc12  --siggy mrepo location

http://10.23.161.236/mrepo/CentOS-6.3-x86_64/
**********************************************************************
14Nov12  Larry  RDT for Windows 7

(08:20:54 AM) Larry Lile: <Start> -> Right Click Computer -> Properties
(08:21:09 AM) Larry Lile: Remote Settings
(08:21:11 AM) Larry Lile: Remote
(08:21:22 AM) Larry Lile: X Allow Remote Assistance
(08:21:54 AM) Larry Lile: X Allow connections from computers running any version of remote desktop (less secure)
(08:22:14 AM) Larry Lile: Select Users...
(08:22:27 AM) Larry Lile: Add...
(08:22:32 AM) Larry Lile: <add yourself> (453617)
(08:24:28 AM) Larry Lile: alias rdp='rdesktop -u 455339 -d la -g 1280x1024 -a 16 !*' (change user number)
alias laptop='rdesktop -u 455339 -d la -g 1250x900 -a 16 -r sound:local els-h53935'  (change user number)
(08:24:48 AM) Larry Lile: Change your laptop hostname from els-h53935 to whatever yours is
(08:45:52 AM) dsiegfriedt@nms-la-cvs2/5cdf7f77: yes and no...... it connects and everything works...but I can't change desktops... I am going to cange the resolution to see if that fixes it
(08:57:39 AM) dsiegfriedt@nms-la-cvs2/5cdf7f77: found it... man is your friend!   "-f" is full screen mode.   removed that and change the resolution..... works as advertised ...THANKS
(08:59:53 AM) Larry Lile: <ctrl><alt><enter> will pop you in and out of full screen mode, then you can put your mouse at the top of the screen and <ctrl><alt><up/down>
**********************************************************************
7Feb13   AMPL   wiping a disk

dd if=/dev/zero of=/dev/sdb bs=8M

**********************************************************************
11Feb13  James Mannelly Isilon S/N collection

isi_for_array -sq isi_hw_status | grep -i serno
**********************************************************************
13feb13  --siggy   Linux hardening....

see ~siggy/PDFs/rhel5-pamphlet-i731.pdf
**********************************************************************
28Feb13  --siggy  to restart a rsync of a file

rsync -Pa user@host:remote_file local_file
OR
rsync -Pa local_file host:remote_file
**********************************************************************
6mar13  --siggy DTV LA4/13 printer

B&W	10.23.166.240
Color	10.23.166.239
**********************************************************************
6mar13  lslile user list in gnome

(02:36:42 PM) Larry Lile: gconftool-2 /apps/gdm/simple-greeter/disable_user_list --direct --config-source xml:readwrite:/etc/gconf/gconf.xml.defaults --get
(02:36:49 PM) Larry Lile: Should return "false"
(02:36:59 PM) Larry Lile: gconftool-2 /apps/gdm/simple-greeter/disable_user_list --direct --config-source xml:readwrite:/etc/gconf/gconf.xml.defaults --set --type=boolean true
**********************************************************************
8mar13  lslile  autofs logging RHEL/centos6.3

/etc/sysconfig/autofs
# LOGGING - set default log level "none", "verbose" or "debug"
#
#LOGGING="none"
**********************************************************************
20mar13  --siggy rpm DB error

update of thumb drive gave me this:
error: db3 error(-30974) from dbenv->failchk: DB_RUNRECOVERY: Fatal error, run database recovery

This isn't db corruption as such, it means that rpm died with (write) locks held and automatic cleanup fails to work. 
'rm -f /var/lib/rpm/__db*' should clear up the situation.

and it did

rpm -vv --rebuilddb
**********************************************************************
21Mar13  --siggy new service command; what services to stop

http://magazine.redhat.com/2007/03/09/understanding-your-red-hat-enterprise-linux-daemons/

/sbin/service -status-all
**********************************************************************
23Apr13  lslile   Asset trackin with LDAP/led   (from email)

From: Lile, Larry Stewart
Sent: Tuesday, April 23, 2013 11:38 AM
To: Lynch, Andrew; Okongo, Othieno L; Siegfriedt, Donald
Cc: Checkos, Christopher R
Subject: Asset tool stuff

Not quite ready for prime time, but Andrew asked me to forward what I showed him.

Remove a host by it's asset tag.

  /users/support/bin/asset.pl --remove  --assettag d-D99999
<<<<<>>>>>
Query a system by asset tag

  /users/support/bin/asset.pl -q d-d99999
<<<<<>>>>>
Add a host, the %\d maps to the numbered lists from asset.pl --print

  /users/support/bin/asset.pl -a --assettag d-d99999 --make %6 --model %44 --role %1 --svctag abc123 --type %2 --site %4
<<<<<>>>>>
Query the host again

  /users/support/bin/asset.pl -q d-d99999
<<<<<>>>>>
Set the office location and user

  /users/support/bin/asset.pl -u --location la4/1336f --user alynch d-d99999
<<<<<>>>>>
Query the host again

 /users/support/bin/asset.pl -q d-d99999
<<<<<>>>>>
We don't have a script to assign IPs just yet, use led

 led  '(|(cn=els-d99999)(els-d60628))'

I'll have to set up and explain led more...  just using els-60628 as a sample entry...

[lslile@h28166 ~]$ led '(|(cn=els-d99999)(cn=els-d60628))'
Modifying objectclass in dn: cn=els-d99999,ou=Hosts,dc=swengdtv,dc=net
- objectclass: device $ inetOrgPerson $ organizationalPerson $ person $ top
+ objectclass: device $ inetOrgPerson $ ipHost $ organizationalPerson $ person $ top
Modifying iphostnumber in dn: cn=els-d99999,ou=Hosts,dc=swengdtv,dc=net
- iphostnumber:
+ iphostnumber: 10.23.20.249
<<<<<>>>>>
Query the host again

 /users/support/bin/asset.pl -q d-d99999
<<<<<>>>>>
[lslile@h28166 ~]$ /users/support/bin/asset.pl -q d-d99999
Asset Tag  Service Tag  Manufacturer  Model            Owner         Hostname    IP Address    Location  Site             
D-D99999   ABC123       Dell Inc.     Precision T3600  Andrew Lynch  els-d99999  10.23.20.249  la4/1336f El Segundo - LA4 
<<<<<>>>>>
Query with wildcards

 1057  /users/support/bin/asset.pl -q \*
**********************************************************************
22APR13   Creating special device  --siggy

If you have LV/LG and you rebuild the OS you need to make special devices, in /dev, for the OS to see them

dmsetup info
	ls
	status
	mknodes
ALSO man vgmknodes
**********************************************************************
15May13  --siggy    Making a swf run on CentOS and firefox

http://wiki.centos.org/HowTos/JavaRuntimeEnvironment

the mail points are:

install java

Create links in the Mozilla Plugins directory so Java will work in supported browsers such as Firefox.

# cd /usr/lib64/mozilla/plugins/
# ln -fs /usr/java/latest/lib/amd64/libnpjp2.so
**********************************************************************
10jun13  --siggy while loop read a file

REPOLIST="/users/dsiegfriedt/DTV/SVN/RepoList"
SVNSYNC="/usr/local/bin/svnsync"

    while IFS= read -r line
    do 
    echo $line


    done < $REPOLIST #closing while
**********************************************************************
12Jul13   Larry needs a separte LV for home (machine going to Brazil)

IF you are resizing / you will need to boot a recue disk as / is mounted EVEN in single user mode.

lvreduce -t -r -L 80g /dev/VolGroup/LogVol00
lvcreate -L 50g -nlv_home VolGroup

It didn't go this easy I ended up re-kickstarting the machine and working from there :^(

NOTE:   and easy way to delete is to use "system-config-lvm"

mkfs and updating the fstab are still required
**********************************************************************
15jul13   Quota(s)

repquota -g /home
*** Report for group quotas on device /dev/mapper/vg_vplbenson-lv_home
{SNIP}

NOTES from 5Feb13

megastore
 root
 SS passwd

File System => Smart Quotas => Summary
     Edit Quotas
     Search
     click "Directory" in question
     	   /ifs/AnonFTP
     click "Edit"
			5.5TB = 5632GB
cp hard to soft (threshold)
update hard
click "Save"
**********************************************************************
16Jul13  --siggy

misc adding to the EOL

#add to the end of a line
sed 's/\(.*\)/\1 add this text to each line/' < new-hosts

cat dhcpd.conf-16Jul13 | grep host | awk '{print $8"   ird0"}' > new-hosts
for i in $(seq 1 480); do echo $i; done > ird-num

paste copy-new-hosts  ird-num

#paste t files together line by line, seperating the lines with the delimiter of "0"
# used emacs to get rid of "0" on 3 digit numbers
paste -d0 copy-new-hosts  ird-num

# add a CR every 24 lines
sed 'n;n;n;n;n;n;n;n;n;n;n;n;n;n;n;n;n;n;n;n;n;n;n;G;' hosts1
**********************************************************************
23jul13  browser as a note pad

Transforming your browser into a scratchpad for jotting down notes is as easy as entering the 
data:text/html, <html contenteditable> 
line into the address bar and hitting Enter.
**********************************************************************
26jul13  --siggy

background pictures for screensaver live here
/usr/share/backgrounds/cosmos/
**********************************************************************
30jul13  --siggy multiple commands from a single ssh session (from NG notes)

ssh 10.124.215.253 '(df -h > /root/today; ldapsearch -x -h localhost -s base -b "" objectclass=\* >> /root/today; rsync -a /root/today 10.23.174.156:/today)'
**********************************************************************
12Aug13  --OT   see WTF cfengine is doing

cfengine -KIvvv | tee /tmp/blorf
**********************************************************************
19Sep13   find all "~" and delete them

find . -name "*~" -exec rm -f '{}' ';'
**********************************************************************
19Sep13 exif data (meta data from a picture)

identify -vebose <filename> (part of ImageMagick)
~/Compiled-from-Source/jhead-2.95/jhead/<filename>

4Dec13  get time/date from .jpg
yum -y install jhead

dsiegfri@LA1001609L:~/Pictures/DW/5Dec2008 $ jhead IMG_1556.JPG
File name    : IMG_1556.JPG
File size    : 2059748 bytes
File date    : 2013:12:04 13:42:11
Camera make  : Canon
Camera model : Canon PowerShot SD400
Date/Time    : 2008:12:05 23:22:35
Resolution   : 2592 x 1944
Flash used   : Yes (auto)
Focal length : 17.4mm  (35mm equivalent: 110mm)
CCD width    : 5.72mm
Exposure time: 0.017 s  (1/60)
Aperture     : f/4.9
Focus dist.  : 25.26m
Whitebalance : Auto
Metering Mode: matrix


**********************************************************************
23Sep13  --siggy

To place a <CR> at the end of every 10 lines (to make it easier to read)
sed "10~10G" /tmp/host_list-siggy-24jun08-SORTED > /tmp/host_list-siggy-24jun08-sort-space
**********************************************************************
25Sep13  --siggy   Timeout for changing your (temp) passwd

Password expiry information
       The password aging information may be changed by the super user with the -x, -n, -w, and  -i
       options.   The -x option is used to set the maximum number of days a password remains valid.
       After max days, the password is required to be changed.  The -n option is used  to  set  the
       minimum  number of days before a password may be changed.  The user will not be permitted to
       change the password until min days have elapsed.  The -w option is used to set the number of
       days  of  warning  the  user  will receive before his/her password will expire.  The warning
       occurs warn days before the expiration, telling the user how  many  days  remain  until  the
       password  is  set to expire.  The -i option is used to disable an account after the password
       has been expired for a number of days.  After a user account has had an expired password for
       inact days, the user may no longer sign on to the account.

       If  you wish to immediately expire an account's password, you can use the -e option. This in
       effect can force a user to change his/her password at the user's next login.  You  can  also
       use  the -d option to delete a user's password (make it empty). Use caution with this option
       since it can make an account not require a password at all to  login,  leaving  your  system
       open to intruders.
**********************************************************************
26Sep13  --siggy   ssh session timeout

/etc/profile

# Added by siggy for danmo 26Sep13 30 min timeout
export TMOUT=1800
**********************************************************************
30Sep13  --siggy  change hostname

change the hostname on the fly, type:
echo newhostname > /proc/sys/kernel/hostname
**********************************************************************
1Oct13 --siggy  empty a file

 you can just use the ">" to empty a log file. For example, to clear out /var/adm/syslog, just use:
 > /var/adm/sylog
**********************************************************************
18Oct13  --siggy   convert UTF16 to UTF8

symptoms = grep would not work on the file.   Looked OK with cat/vi/vim.
file <filename> said it was a UTF16 (Little Indian) 

iconv -f UTF16 -t UTF8 < blah > output.txt
**********************************************************************
22Oct13  --siggy  infinite loop

while true; do echo "All work and NO play, makes Jack a dull boy.";sleep 1; done
**********************************************************************
23Oct13  --siggy  My current desktop session is

echo $DESKTOP_SESSION
OR
System => About this Computer

setting gnome session as default

dsiegfri@LA10016009L:~ $ cat /etc/sysconfig/desktop 
DESKTOP="GNOME"
DISPLAYMANAGER="GNOME"
**********************************************************************
23Oct13  --siggy   chmod special permissions

1755 gives drwxr-xr-t
2755 gives drwxr-sr-x
3755 gives drwxr-sr-t
4755 gives drwsr-xr-x
5755 gives drwsr-xr-t
6755 gives drwsr-sr-x
7755 gives drwsr-sr-t

chmod 7644 = rwsr-Sr-S
chmod 1444 = r-Sr--r--
(S is uppercase when x isn't applied, and lowercase when x is applied).


http://www.coderanch.com/t/110770/Linux-UNIX/permissions-meaning

For files, "x" means "executable" of course. For directories, it means "searchable." Without "x" 
permission on a directory, you can't set it to be your current directory, or get any of the file 
information like size, permissions, or inode number, so that you effectively can't access any of 
the files. If a directory has no "r" permission, you can't get a listing, but if you know a file 
is there, you can still access the file.

Now "s", for files, means "setuid exec." If a file has s permission, then it's executable, and 
furthermore, the user id and/or group id of the process is set to the user or group id of the 
owner of the file, depending on whether it's the user or group "s" that's set. This is a way to 
give limited root powers to a user -- a program that runs as root when an ordinary user executes 
it. For example, the "passwd" program, which can change otherwise write-protected files on behalf 
of a user, works this way: it's owned by the "bin" group (generally) and has g+s so that it can 
write to /etc/passwd and/or /etc/opasswd which are also owned by group "bin."

For directories, "s" means "sticky". If a directory has "s", then the owner and/or group of any 
files put into the directory are set to the owner/group of the directory. This is often used on 
CVS repositories, so that the files in the repository end up all owned by the same person and/or 
group, even though they're put in by different people. I use g+s on all the CVS repositories I 
set up.
**********************************************************************
23Oct13  --siggy  HEX questions

1) What is the decimal number for the hexadecimal value of c?
c. 12
2) How many bits are there in 1 hexadecimal character?
a. 4
3) How many nibbles are there in a byte?
a. 2
4) What is the binary value for the hexadecimal value of f?
a. 1111
5) What is the hexadecimal value of the binary number 1101?
d. d
What is the decimal value of the binary number 1101?
c. 13
**********************************************************************
31Oct13  --siggy to prevent a command from going into history
http://www.tecmint.com/11-lesser-known-useful-linux-commands/
http://www.tecmint.com/10-lesser-known-linux-commands-part-2/#!

lead the command with a space
**********************************************************************
7Nov13  --siggy   fs says it has room can't touch

lsof +L1 (lsof | grep deleted)

files are deleted but kernel still has reserve space for them (until you close the 
program they were created in ....gnome)

^^^^^
sudo lsof | grep "(deleted)$" | sed -re 's/^\S+\s+(\S+)\s+\S+\s+([0-9]+).*/\1\/fd\/\2/' | while read file; do sudo bash -c ": > /proc/$file"; done

Explanation:
Grep lsof output to extract only deleted files. Sed extract the process id and filedescriptor id from each line, and create a string in format {pid}/fd/{fid}. While loop and output nothing to each file, setting them to empty.

dsiegfri@la1002073d:~ $ df -h
Filesystem                            Size  Used Avail Use% Mounted on
/dev/mapper/vg_siggylinuxbox-lv_root   50G   12G   38G  24% /
*****tmpfs                                 7.8G   34M  7.8G   1% /dev/shm
/dev/sda1                             485M   64M  396M  14% /boot
/dev/mapper/vg_siggylinuxbox-lv_home  402G   42G  340G  11% /home
dsiegfri@la1002073d:~ $ 
dsiegfri@la1002073d:~ $ lsof | grep "(deleted)$" | sed -re 's/^\S+\s+(\S+)\s+\S+\s+([0-9]+).*/\1\/fd\/\2/' | while read file; do sudo bash -c ": > /proc/$file"; done
dsiegfri@la1002073d:~ $ df -h
Filesystem                            Size  Used Avail Use% Mounted on
/dev/mapper/vg_siggylinuxbox-lv_root   50G   12G   38G  24% /
*****tmpfs                                 7.8G  248K  7.8G   1% /dev/shm
/dev/sda1                             485M   64M  396M  14% /boot
/dev/mapper/vg_siggylinuxbox-lv_home  402G   42G  340G  11% /home

^^^^^
%%%%%
use lsof to find the deleted, but open, file still consuming space
lsof | grep deleted | grep etilqs_1IlrBRwsveCCxId
chrome     3446       user  128u      REG              253,2              16400       2364626 /var/tmp/etilqs_1IlrBRwsveCCxId (deleted)  

find the entry in /proc//fd/ that cooresponds to the filehandle
ls -l /proc/3446/fd/etilqs_1IlrBRwsveCCxId
lrwx------. 1 user unix 64 Feb 11 15:31 128 -> /var/tmp/etilqs_1IlrBRwsveCCxId (deleted)

now, just cat /dev/null into the fd

cat /dev/null > /proc/3446/fd/128
Note that the inode is still open, but now it's 0 length
chrome     3446       user  128u      REG              253,2         0    2364626 /var/tmp/etilqs_1IlrBRwsveCCxId (deleted)

%%%%%
**********************************************************************
7Nov13  --siggy  To see the %pre or %post scripts in and rpm

rpm -qp --scripts <rpm-name>
**********************************************************************
13nov13  --siggy   5 files to get a linux box on the net

/etc/hosts
/etc/resolv.conf
/etc/sysconfig/network
/etc/sysconfig/network-scripts/ifcfg-ethx
and one more I can't remember
**********************************************************************
18Nov13  --siggy  httpd.conf with no comments
cat httpd.conf | sed /^#/d
**********************************************************************
19Nov13  --siggy  list of how big dir are
find . -maxdepth 1 -type d -exec du -sh '{}' ';' | sort -n > homedir-sizes
**********************************************************************
20Nov13  --siggy   alias with user input
#for centos RDT
#20Nov13
#Useage  LT <last octet>
LT() { rdesktop -u dsiegfri -d ri-net -g 1800x1000 -a 16 -r sound:local 10.130.8."$@" ;}
**********************************************************************
4Dec13  AMPL   math in a bash script
(02:22:33 PM) meadrocks: let NEXTUID=$LARGESTUID+1
(02:23:02 PM) meadrocks: the let command tells bash to do integer math, not string conatination
**********************************************************************
5Dec13  danmo  changeing max locked memory on a db2 machine/user

https://access.redhat.com/site/documentation/en-US/Red_Hat_Enterprise_Linux/5/html/Tuning_and_Optimizing_Red_Hat_Enterprise_Linux_for_Oracle_9i_and_10g_Databases/sect-Oracle_9i_and_10g_Tuning_Guide-Large_Memory_Optimization_Big_Pages_and_Huge_Pages-Configuring_Huge_Pages_in_Red_Hat_Enterprise_Linux_4_or_5.html

vim /etc/security/limits.conf
add 
*   soft	memlock	unlimited
*   hard	memlock	unlimited
logout/login needed
ulimit -a (or -l)
**********************************************************************
5Dec13  --siggy  texting from email

http://20somethingfinance.com/how-to-send-text-messages-sms-via-email-for-free/

Verizon: number@vtext.com     NO "-" in the numbers
**********************************************************************
19Dec13  --siggy

regex to match directories that consist of 3 numbers
"^/www/[0-9]{3}"
**********************************************************************
23Dec13  --siggy  to rebuild /etc/udev/rules.d/70-persistent-net.rules
# udevadm trigger

7Jul15  --siggy
How to Reload the "udev rules" without restarting udev service, in RHEL6/RHEL7?

After making the changes in udev configuration if there is no possibility to reboot the server, udevadm trigger 
can be utilized to reload the new rules configuration in udev:

# /sbin/udevadm control --reload-rules
# /sbin/udevadm trigger --type=devices --action=change

Run following command for specific event:

# echo change > /sys/block/<device>/uevent
**********************************************************************
8Jan14  --siggy Cleaning unused RPM
http://heuristically.wordpress.com/2009/09/03/cleaning-unused-rpm-packages/

rpm -qa --queryformat="%{NAME} %{SIZE}\n" | sort -k 2 -n

To remove languages
The solution that worked for us is a post-install fix that consists of
removing all languages that we don't use.  We checked with "locale"
which languages are used on the system. Then we remove all the others:
 $ localedef --list-archive | grep -v -e "en_US" -e "de_DE" -e "en_GB"| xargs localedef --delete-from-archive
 $ mv /usr/lib/locale/locale-archive /usr/lib/locale/locale-archive.tmpl
 $ build-locale-archive
After this, the size of the locale-archive file is ~4MB, and running a
single Bash instance does not show "107MB" for SGE anymore :-) Et voil!

dsiegfri@LA1000440D:~ $ ll /usr/lib/locale
total 95M
dr-xr-xr-x.  2 root root 4.0K Dec 26 11:27 .
drwxr-xr-x. 30 root root 4.0K Jan  6 11:09 ..
-rw-r--r--.  1 root root  95M Dec 26 11:27 locale-archive
-rw-r--r--.  1 root root    0 Dec 26 11:27 locale-archive.tmpl

[root@LA1000440D locale]# ll -h
total 3.8M
-rw-r--r--. 1 root root 3.8M Jan  8 14:36 locale-archive
-rw-r--r--. 1 root root    0 Jan  8 14:36 locale-archive.tmpl
**********************************************************************
21Jan14  --siggy   bash syntac check

# -n = noexec
bash -n <filename>
**********************************************************************
24Jan14  --siggy
cp foo{,bak}

Utilizes shell expansion of {} to give the original filename and a new filename as arguments 
to `cp`. Can easily be extended to make multiple copies.
**********************************************************************
31jan14  --siggy  Text base browser

curl -s http://google.com
**********************************************************************
10Feb14  --siggy  encrypting directories

http://www.unixmen.com/encrypt-directories-partitions-ecryptfs-linux/?goback=%2Egde_84337_member_5818384644520845312#%21

yum -y install ecryptfs-utils.x86_64
mkdir /ENCRYPTED-DIRECTORY
mount -t ecryptfs /ENCRYPTED-DIRECTORY /ENCRYPTED-DIRECTORY
**********************************************************************
10Feb14  --siggy boobies
http://images.mudfooted.com/blue-footed-booby-dance.jpg
**********************************************************************
27Feb14  --siggy Ctrl-Alt-Del disable (in theory)

{{{{{{{{{{{{{{{{{{{{ 
GNOME is a piece of SHIT!   Ctrl-Alt-Del is a logoff command.   Delete the shortcut and nothing seems to happen.
THIS may be good that Ctrl-Alt-Del does not stop machine.
}}}}}}}}}}}}}}}}}}}}

vim control-alt-delete.conf 
#exec /sbin/shutdown -r now "Control-Alt-Delete pressed"
exec /bin/echo "This is a SERVER.   To REALLY kill this machine use a different method"

initctl reload-configuration
**********************************************************************
17Mar14 --siggy  test if a port is open using netcat

nc 127.0.0.1 123 < /dev/null; echo $?

Will output 0 if port 123 is open, and 1 if it's closed.
**********************************************************************
30Apr --siggy   watch PHD use this command (BSD)

tailf <file name>   like tail -f <file name>
**********************************************************************
1May14  email when machine reboots  --siggy

add to crontab 
for RHEL6.4
@reboot  echo "Server has restarted "`hostname` | mail -s "System Restart" dsiegfriedt@ri-net.com
OR
for most other RHEL versions
@reboot mail -s "`hostname` has been rebooted" dsiegfriedt@ri-net.com
**********************************************************************
6may14  list all USB devices

lsusb 	     - list USB devices
lsusb -v     - verbose list 

hal-device

killall -9 gvfs*
**********************************************************************
28May14  --siggy  space to CR with tr
To view the environment settings and variables for your ibmslapd process, run the following command:

ps ewww PID | tr ' ' '\012' | grep = | sort
where PID is the ibmslapd process ID.

translate a ' ' (space) to a '\012' (<CR>)  
**********************************************************************
9Jul14  --siggy

NEMA 5-15R is the standard electricity outlet found in almost every household and building in the United States
17Jul14  --siggy
NEMA l6-30P L=locking(twist) 30=30Amps P=plug(male) S=socket(female)
IEC-C13 socket designation for PDUs
**********************************************************************
11Jul14  --siggy   allow root login via ssh

the following steps will allow you to login as root over ssh session:

vi /etc/ssh/sshd_config

PermitRootLogin ??? from no to yes
service sshd restart
**********************************************************************
16Jul14  AMPL  openfire 

(07/16/2014 12:59:01 PM) meadrocks: i'm setting up a Openfire IM server, we ran it @ DTV, I can connect to Openfire from Pidgin, but I can't see any 'buddies', argh
(02:14:18 PM) meadrocks: ah, figured it out, when i set up who to talk to, I have to make the acct name siggy@openfire.servername.com
**********************************************************************
19Jul14  --siggy

 .~.
 /V\ 
/( )\ 
^^-^^ 
**********************************************************************
25Jul14  --siggy

pstree - display a tree of processes
**********************************************************************
28Jul14  --OT
showmount -e lasan4
**********************************************************************
19Aug14  --OT
use xarg to make a space seperted list of a directory.  This was for creating space under EDIArchive.

[root@lasysmon DataWarehouse]# date;tar cjvf /tmp/2010/Apr/APR-2010.tbz `ls | grep "2010-04" | xargs`;date
**********************************************************************
20Aug14  --siggy

Don't like the cut command? Tired of typing awk '{print $xxx}', try this
# ap () { awk '{print $'$1'}'; }
# echo hi there | ap 2
there
**********************************************************************
18Sep14  --siggy

read file	gc, cat, type
delete file	del, erase, rm
redirect	<,<<,>>,>
**********************************************************************
13Nov14  --siggy

When mounting a cifs share on linux

[root@la1002073d ~]# mount /lasan4_softwarelibrary
mount: wrong fs type, bad option, bad superblock on //lasan4/softwarelibrary,
       missing codepage or helper program, or other error
       (for several filesystems (e.g. nfs, cifs) you might
       need a /sbin/mount.<type> helper program)
       In some cases useful info is found in syslog - try
       dmesg | tail  or so

[root@la1002073d ~]# yum -y install cifs-utils

Mounts OK

**********************************************************************
13Nov13  --siggy   PHD v6.3 passwd

[root@la1002073d ~]# john ~dsiegfri/REPUBLIC/crack 
Loaded 2 password hashes with 2 different salts (generic crypt(3) [?/64])
guesses: 0  time: 4:21:39:19 0.00% (3)  c/s: 381  trying: Tt1t6 - Tt1gr
mongees3         (phd)

**********************************************************************
13Nov14  --siggy  Script to email SOX PDFs automagically

uuencode is not builtin.. you have to install it
yum -y install sharutils

enscript is not builtin.. you have to install it
yum -y install enscript

[root@lasysmon audit]# pwd
/usr/local/scripts/audit

[root@lasysmon audit]# cat linux_SOX_files.bash 
#!/bin/bash

#12Nov14  --siggy
#This is a script to translates and mails the SOX files to Aric on the first day of the month.
#Linux does not have the facility to create PDFs so you have to create a postscript (ps) file first.
#Then you can create the PDF from there.

#The audit script is added to the crontab.
#00 08 1 * * /usr/local/scripts/audit/audit 2>&1
#8:00am on the first day of every month.

#This script is added to crontab. 
#00 09 1 * * /usr/local/scripts/audit/linux_SOX_files.bash 2>&1
#9:00am it will do the conversion and mail the PDFs on the first day of every month.

#go to where the files end up
cd /tmp

#create a ps file from the text output from the audit script.
enscript -p ccapp.system_permissions.ps ccapp.system_permissions
enscript -p ccapp.user_permissions.ps ccapp.user_permissions

#create a PDF from the ps file.
ps2pdf ccapp.system_permissions.ps ccapp.system_permissions.pdf
ps2pdf ccapp.user_permissions.ps ccapp.user_permissions.pdf

#mail to Aric
#need to use uuencode to allow PDF attachments
uuencode ccapp.system_permissions.pdf ccapp.system_permissions.pdf | mail -s "Linux SOXs system files"  abarton@ri-net.com -c dsiegfriedt@ri-net.com
uuencode ccapp.user_permissions.pdf ccapp.user_permissions.pdf | mail -s "Linux SOXs user files"  abarton@ri-net.com -c dsiegfriedt@ri-net.com

DON'T forget
chmod +x /usr/local/scripts/audit/linux_SOX_files.bash

**********************************************************************
22Jan15  OT  monitor files that change (for websphere)

chkconfig auditd on

[root@lawasqa1 ~]# cat /etc/audit/audit.rules 
# This file contains the auditctl rules that are loaded
# whenever the audit daemon is started via the initscripts.
# The rules are simply the parameters that would be passed
# to auditctl.

# First rule - delete all
-D

# Increase the buffers to survive stress events.
# Make this bigger for busy systems
-b 320

# Feel free to add below this line. See auditctl man page
-w /app/IBM/WebSphere/ -p wa

# to look at the changes
aureport -f

**********************************************************************
24Apr15  --siggy  (compressing log files)
laccoddv1:/arsdb_primarylog/NODE0000

#collect all of 2014
ll | grep 2014 | awk '{print $NF}' | xargs

#collect 2014 month by month
ll | grep 2014 | grep <month> | awk '{print $NF}' | xargs

#output to /tmp/<file name>
ll | grep 2014 | grep <month> | awk '{print $NF}' | xargs > /tmp/2013

#edit as needed
vim /tmp/2013

#tar it up
tar cjvpf 2013/2013.tbz `cat /tmp/2013 | xargs`

#after the tar you can delete individual files
for i in `cat /tmp/2013`; do rm -f $i; done

**********************************************************************
20May15  --siggy   chown

sudo chown -R nathan: /home/nathan
Which will do a recursive change of ownership throughout the whole of your home directory tree. 
Make sure you include the trailing colon after your account name in that command - that ensures 
--------------------------------------------------------------------------------                        
that everything is owned by your default group.
**********************************************************************
19Jun15  OT   default file permissions

       rpm --setperms PACKAGE_NAME
              sets permissions of files in the given package.

       rpm --setugids PACKAGE_NAME
              sets user/group ownership of files in the given package.

1) To reset uids and gids on files and directories :
for u in $(rpm -qa); do rpm --setugids $u; done

2) To permissions on files and directories
for p in $(rpm -qa); do rpm --setperms $p; done
**********************************************************************
7Aug15  --siggy FQPN file name extraction

http://stackoverflow.com/questions/3362920/bash-script-get-just-filename-from-path

dsiegfri@la1002073d:~/SCRIPTS $ echo $warfileFROM
/usr/tomcat/apache-tomcat-6.0.29/webapps/cc.war
dsiegfri@la1002073d:~/SCRIPTS $ echo $(dirname "${warfileFROM}")
/usr/tomcat/apache-tomcat-6.0.29/webapps
dsiegfri@la1002073d:~/SCRIPTS $ basename "${warfileFROM}"
cc.war

**********************************************************************
13Aug15  --siggy  Don't use the top line of your awk

http://stackoverflow.com/questions/339483/how-can-i-remove-the-first-line-of-a-text-file-using-bash-sed-script

tail -n +2 "$FILE"

shutdown-bur-site-cluster.bash:vms=$(ssh root@laesxi22.ri-net.com /bin/vim-cmd vmsvc/getallvms | awk '{print $1}' | tail -n +2)

**********************************************************************
3Sep15  --siggy passwd age 

[nixmgt@lasysmon ~]$ sudo chage -l root
Last password change					: Feb 26, 2014
Password expires					: never
Password inactive					: never
Account expires						: never
Minimum number of days between password change		: 0
Maximum number of days between password change		: 99999
Number of days of warning before password expires	: 7

**********************************************************************
11Sep15  --siggy add user with UID number and GECOS

/usr/sbin/useradd -u 560 -c "Qualis User" quser

**********************************************************************
1Oct15  --siggy

http://tombuntu.com/index.php/2007/12/12/simple-file-encryption-with-openssl/

openssl aes-256-cbc -a -salt -in secrets.txt -out secrets.txt.enc

How does this work?

openssl is the command for the OpenSSL toolkit.
aes-256-cbc is the encryption cipher to be used. (256bit AES is what the United States government uses to encrypt information at the Top Secret level.)
-a means that the encrypted output will be base64 encoded, this allows you to view it in a text editor or paste it in an email. This is optional.
-salt adds strength to the encryption and should always be used.
-in secrets.txt specifies the input file.
-out secrets.txt.enc specifies the output file.
You will be prompted for a password.
Its not much use unless you can decrypted it:

openssl aes-256-cbc -d -a -in secrets.txt.enc -out secrets.txt.new

-d decrypts data.
-a tells OpenSSL that the encrypted data is in base64.
-in secrets.txt.enc specifies the data to decrypt.
-out secrets.txt.new specifies the file to put the decrypted data in.

**********************************************************************
2oct15  --siggy  bash script checks 

http://www.itworld.com/article/2694433/unix-good-coding-practices-for-bash.html

Check that arguments are of the correct type
if ! [ "$1" -eq "$1" 2> /dev/null ]
then
  echo "ERROR: $1 is not a number!"
  exit 1
fi
-----
Check for missing arguments or arguments provided in the wrong order
if [ $# != 3 ]; then
    echo "What part of THREE ARGUMENTS don't you understand?"
fi
-----
Check if needed files actually exist
if [ ! -f $1 ]; then
    echo "$1 -- no such file"
fi

**********************************************************************
7Oct15  --siggy bash regex
http://www.itworld.com/article/2693361/unix-tip-using-bash-s-regular-expressions.html

This example test asks whether the value of $digit matches a single digit.

if [[ $digit =~ [0-9] ]]; then
    echo "$digit is a digit"
else
    echo "oops"
fi

You can also check whether a reply to a prompt is numeric with similar syntax:

echo -n "Your answer> "
read REPLY
if [[ $REPLY =~ ^[0-9]+$ ]]; then
    echo Numeric
else
    echo Non-numeric
fi

Bash's regex can be fairly complicated. In the test below, we're asking whether the value of our $email variable looks like an email address. Notice that the first expression (the account name) can contain letters, digits and some special characters. The + to the right of the first ] means that we can have any number of such characters. We then see the @ sign sitting between the username and the email domain -- and a literal dot (\.) between the primary part of the domain name and the "com", "net", "gov", etc. part. The comparison is then enclosed in double brackets.

if [[ "$email" =~ "^[A-Za-z0-9._%+-]+<b>@</b>[A-Za-z0-9.-]+<b>\.</b>[A-Za-z]{2,4}$" ]]
then
    echo "This email address looks fine: $email"
else
    echo "This email address is flawed: $email"
fi

Similarly, you can construct tests that determine whether the value of variables is in the proper format for an IP address:

#!/bin/bash

if [ $# != 1 ]; then
    echo "Usage: $0 address"
    exit 1
else
    ip=$1
fi

if [[ $ip =~ ^[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}$ ]]; then
    echo "Looks like an IPv4 IP address"
elif [[ $ip =~ ^[A-Fa-f0-9:]+$ ]]; then
    echo "Could be an IPv6 IP address"
else
    echo "oops"
fi

Bash also provides for some simplified looping. Want to loop 100 times? Just do something like this:

for n in {1..100}
do
    echo $n
done

And you can loop through letters or through various ranges of letters or numbers using expressions such as these. You don't have to start with 1 or a and you can move backwards through the list.

{a..z}
{z..a}
{c..f}
{5..25}
{10..-10}

Want to see how these ranges work? You can also just try expanding them with the echo command.

$echo {a..z}
a b c d e f g h i j k l m n o p q r s t u v w x y z
$ echo {5..-1}
5 4 3 2 1 0 -1

**********************************************************************
19Oct15  --siggy  F22 does not paste with mouse middle

http://forums.fedoraforum.org/showthread.php?t=263885

gsettings set org.gnome.settings-daemon.peripherals.mouse middle-button-enabled true
**********************************************************************
16Nov15  --siggy   how to tell when the machine was created/built

tune2fs -l /dev/root | grep "Filesystem created"
**********************************************************************
18Nov15  --siggy

adding a user with all the bells and wistles

adduser -m -u 612 -c "Turn on the UCS power" -d /home1/ucson ucson

-u UID
-m creates home dir
-c <GECOS>
-d home dir location
**********************************************************************
18Nov15  --siggy
.bashrc to run a command and exit.   ucson, lasan3-4on, lasan5-6on

#/usr/local/scripts/ucson
#/usr/local/scripts/test-message.expect
#/usr/local/scripts/lasan3-4on
#/usr/local/scripts/lasan5-6on


#complete the poweron and exit
exit

**********************************************************************
18Nov15  --siggy   selinux status

getenforce

**********************************************************************

SSLProxyEngine on

        <Proxy balancer://application1>
                BalancerMember http://lapc8apqac1.ri-net.com:8180 route=server1 loadfactor=50
                BalancerMember http://lapc8apqac2.ri-net.com:8180 route=server2 loadfactor=50
        </Proxy>

        <Proxy balancer://application2>
                BalancerMember http://lapc8apqac3.ri-net.com:8180 route=server3
        </Proxy>

        ProxyPass /pc balancer://application1/pc stickysession=JSESSIONID|jsessionid nofailover=Off
        ProxyPassReverse / http://lapchttpqac1.ri-net.com:8180/




**********************************************************************
8Dec15  --siggy rhn-register OR subscription-manager
[root@laqlclmicm2 ~]# yum -y install openssh-clients
Loaded plugins: product-id, rhnplugin, security, subscription-manager
This system is receiving updates from RHN Classic or RHN Satellite.
[root@laqlclmicm2 ~]# 

OT says
delete /etc/sysconfig/rhn/systemid
yum clean all

https://access.redhat.com/solutions/253273

09Dec15-09:01:59
subscription-manager list
subscription-manager status
subscription-manager help
subscription-manager identity
subscription-manager register
subscription-manager identity
subscription-manager status
subscription-manager refresh
subscription-manager status
subscription-manager attach --auto
subscription-manager status
subscription-manager list --available --all
subscription-manager status
subscription-manager list --installed
subscription-manager status
subscription-manager list --available
subscription-manager facts --list

subscription-manager register
subscription-manager identity
subscription-manager attach --auto
subscription-manager refresh

rhn_register   needed also

21Apr16  --siggy
[root@laqlclmicm2 ~]# yum -y local install /scripts/vmware-tools/vmware-tools-repo-RHEL6-9.4.10-1.el6.x86_64.rpm
Loaded plugins: product-id, rhnplugin, security, subscription-manager
This system is receiving updates from RHN Classic or RHN Satellite.
No such command: local. Please use /usr/bin/yum --help
[root@laqlclmicm2 ~]# subscription-manager identity
server type: RHN Classic and Red Hat Subscription Management
system identity: ce327904-be9e-44c1-9b8a-4179036ea1dd
name: laqlclmicm2
org name: 5573314
org ID: 5573314
[root@laqlclmicm2 ~]# subscription-manager register
WARNING

This system has already been registered with Red Hat using RHN Classic.

Your system is being registered again using Red Hat Subscription Management. Red Hat recommends that customers only register once.

To learn how to unregister from either service please consult this Knowledge Base Article: https://access.redhat.com/kb/docs/DOC-45563
This system is already registered. Use --force to override
[root@laqlclmicm2 ~]# subscription-manager --force register
WARNING

This system has already been registered with Red Hat using RHN Classic.

Your system is being registered again using Red Hat Subscription Management. Red Hat recommends that customers only register once.

To learn how to unregister from either service please consult this Knowledge Base Article: https://access.redhat.com/kb/docs/DOC-45563
The system with UUID ce327904-be9e-44c1-9b8a-4179036ea1dd has been unregistered
Username: ri-net  
Password: 
The system has been registered with ID: a16f8405-bdd4-4cde-8aa5-0ad128937c16 

-----
17Oc16  --siggy 

subscription-manager list --available
yum-config-manager				#list of active repos


**********************************************************************
9Dec15  --siggy  nfs share chown: changing ownership of blahblah: Invalid argument

add the following to the mount config line in /etc/fstab

,mountvers=3,nfsvers=3

umount; mount -a

to check which version a dir is mounted

nfsstat -m

**********************************************************************
23Dec15  --siggy   removing "spaces" from a file/dir name

http://stackoverflow.com/questions/2709458/bash-script-to-replace-spaces-in-file-names

test for spaces.
find WIN-BU-14Nov14/ -depth -name '* *'

change all the file/dir names
find WIN-BU-14Nov14/ -depth -name '* *' | while IFS= read -r f ; do mv -i "$f" "$(dirname "$f")/$(basename "$f"|tr ' ' _)" ; done

**********************************************************************
26Jan16  --siggy  reading sar files

cd /var/log/sa
sar -f sa??

**********************************************************************
27Jan16  --siggy .Xathority 

Derek was not able to fire up a clicky-click... found this site:
http://www.linuxquestions.org/questions/linux-newbie-8/i-merged-xauthority-between-my-root-and-user-accounts-not-sure-how-to-undo-it-4175475769/

From my machine as me
xauth extract - $DISPLAY | ssh ladlclmicm2 xauth merge -
ssh -X ladlclmicm2

I was then able to fire up firefox.
**********************************************************************
4Feb16  --siggy laptop mouse lock
http://www.computerworld.com/article/3029291/computer-hardware/well-take-our-knowledge-transfer-however-we-can.html?token=%23tk.CTWNLE_nlt_computerworld_daily_shark_2016-02-04&idg_eid=763170596ee7239c6c4e2af060618d8e&utm_source=Sailthru&utm_medium=email&utm_campaign=Computerworld%20Daily%20Shark%202016-02-04&utm_term=computerworld_daily_shark#tk.cw_nlt_computerworld_daily_shark_2016-02-04

The command to lock and unlock the mouse is FN F5

**********************************************************************
12Feb16  --siggy notes about /etc/exports

https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/5/html/Deployment_Guide/s1-nfs-server-config-exports.html

/home bob.example.com(rw)
/home bob.example.com (rw)

The first line allows only users from bob.example.com read/write access to the /home directory. 
The second line allows users from bob.example.com to mount the directory as read-only (the default), 
while the rest of the world can mount it read/write. 
**********************************************************************
18Mar16  Tom S.   quick way to empty a log file while input is still happening

 [root@lawpsdv1 dump]# ll
total 3187640
-rw-r-----  1 dasusr1 517 3260952576 Mar 18 15:05 db2dasdiag.log
[root@lawpsdv1 dump]# less db2dasdiag.log 
	       (log was started in 2010)
[root@lawpsdv1 dump]# :>db2dasdiag.log 
	       (-rw-r-----  1 dasusr1 517 82875 Mar 18 15:14 db2dasdiag.log)

9May16   bash scripting website (http://www.tldp.org/LDP/abs/html/sha-bang.html)
cat /dev/null > wtmp  #  ': > wtmp' and '> wtmp'  have the same effect.

**********************************************************************
20Apr16  --siggy  login slowness

cd /etc/ssh

cat sshd_config

{SNIP}
# Kerberos options
#KerberosAuthentication no
#KerberosOrLocalPasswd yes
#KerberosTicketCleanup yes
#KerberosGetAFSToken no
#KerberosUseKuserok yes

# GSSAPI options
#GSSAPIAuthentication no
GSSAPIAuthentication yes
#GSSAPICleanupCredentials yes
GSSAPICleanupCredentials yes
#GSSAPIStrictAcceptorCheck yes
#GSSAPIKeyExchange no
{SNIP}

**********************************************************************
21Apr16  --siggy  installing vmware-tools

[root@laplclmicm2 vmware-tools-distrib]# ./vmware-install.pl 
VMware Tools cannot be installed, since they have already been installed using 
a package-based mechanism (rpm or deb) on this system. If you wish to continue,
you must first remove the currently installed VMware Tools using the 
appropriate packaged-based mechanism, and then restart this installer

Execution aborted.

[root@laplclmicm2 vmware-tools-distrib]# yum -y remove vmware-tools-libraries-nox-9.4.0-1.el6.x86_64 vmware-tools-foundation-9.4.0-1.el6.x86_64 vmware-tools-core-9.4.0-1.el6.x86_64 vmware-tools-guestlib-9.4.0-1.el6.x86_64

cd /scripts/vmware-tools/vmware-tools-distrib

./vmware-install.pl 


[root@laqlclmicm2 vmware-tools]# cd /scripts/vmware-tools/

[root@laqlclmicm2 vmware-tools]# vmware-tools-distrib/vmware-install.pl 
A previous installation of VMware Tools has been detected.

The previous installation was made by the tar installer (version 4).

Keeping the tar4 installer database format.

You have a version of VMware Tools installed.  Continuing this install will 
first uninstall the currently installed version.  Do you wish to continue? 
(yes/no) [yes] 

Uninstalling the tar installation of VMware Tools.

The removal of VMware Tools 9.4.11 build-2400950 for Linux completed 
successfully.

Installing VMware Tools.

In which directory do you want to install the binary files? 
[/usr/bin] 

What is the directory that contains the init directories (rc0.d/ to rc6.d/)? 
[/etc/rc.d] 

What is the directory that contains the init scripts? 
[/etc/rc.d/init.d] 

In which directory do you want to install the daemon files? 
[/usr/sbin] 

In which directory do you want to install the library files? 
[/usr/lib/vmware-tools] 

The path "/usr/lib/vmware-tools" does not exist currently. This program is 
going to create it, including needed parent directories. Is this what you want?
[yes] 

In which directory do you want to install the documentation files? 
[/usr/share/doc/vmware-tools] 

The installation of VMware Tools 9.4.11 build-2400950 for Linux completed 
successfully. You can decide to remove this software from your system at any 
time by invoking the following command: "/usr/bin/vmware-uninstall-tools.pl".

Before running VMware Tools for the first time, you need to configure it by 
invoking the following command: "/usr/bin/vmware-config-tools.pl". Do you want 
this program to invoke the command for you now? [yes] 

Initializing...


Making sure services for VMware Tools are stopped.



Found a compatible pre-built module for vmci.  Installing it...


Found a compatible pre-built module for vsock.  Installing it...


The module vmxnet3 has already been installed on this system by another 
installer or package and will not be modified by this installer.

Use the flag --clobber-kernel-modules=vmxnet3 to override.

The module pvscsi has already been installed on this system by another 
installer or package and will not be modified by this installer.

Use the flag --clobber-kernel-modules=pvscsi to override.

The module vmmemctl has already been installed on this system by another 
installer or package and will not be modified by this installer.

Use the flag --clobber-kernel-modules=vmmemctl to override.

The VMware Host-Guest Filesystem allows for shared folders between the host OS 
and the guest OS in a Fusion or Workstation virtual environment.  Do you wish 
to enable this feature? [no] 

Found a compatible pre-built module for vmxnet.  Installing it...


The vmblock enables dragging or copying files between host and guest in a 
Fusion or Workstation virtual environment.  Do you wish to enable this feature?
[no] 

VMware automatic kernel modules enables automatic building and installation of
VMware kernel modules at boot that are not already present. This feature can be

enabled/disabled by re-running vmware-config-tools.pl.

Would you like to enable VMware automatic kernel modules?
[no] 

No X install found.

Creating a new initrd boot image for the kernel.

vmware-tools start/running
The configuration of VMware Tools 9.4.11 build-2400950 for Linux for this 
running kernel completed successfully.

You must restart your X session before any mouse or graphics changes take 
effect.

You can now run VMware Tools by invoking "/usr/bin/vmware-toolbox-cmd" from the
command line.

To enable advanced X features (e.g., guest resolution fit, drag and drop, and 
file and text copy/paste), you will need to do one (or more) of the following:
1. Manually start /usr/bin/vmware-user
2. Log out and log back into your desktop session; and,
3. Restart your X session.

Enjoy,

--the VMware team

**********************************************************************
22Apr16  --siggy   thumbdrive READONLY fix

http://sharadchhetri.com/2013/12/19/how-to-fix-read-only-usb-pen-drive-in-ubuntu/

umount /media/D484-CF40/

dosfsck -a /dev/sdb1

unplug and re-plug thumb drive

**********************************************************************
4May16  --siggy  mrepo setup/update

http://liniks.com/?p=115

mrepo -fgvvvu

**********************************************************************
25MAy16  --siggy/guru checking sudo priv

as root
sudo -U <user login> -l

[root@lahttpdv1 etc]# sudo -U gpreetham -l
User gpreetham may run the following commands on this host:
    (ALL) NOPASSWD: ALL
[root@lahttpdv1 etc]# 
**********************************************************************
15Aug16  --siggy

New commands discovered taking AWS course

shred (doesn't just delete inode entry... 1's and 0's overwrite)

history -c (clears history)

lsblk like df -h only better
NAME                                MAJ:MIN RM   SIZE RO TYPE MOUNTPOINT
sda                                   8:0    0 465.8G  0 disk 
sda1                                8:1    0   500M  0 part /boot
sda2                                8:2    0 465.3G  0 part 
vg_siggylinuxbox-lv_root (dm-0) 253:0    0    50G  0 lvm  /
vg_siggylinuxbox-lv_swap (dm-1) 253:1    0   7.9G  0 lvm  [SWAP]
vg_siggylinuxbox-lv_home (dm-2) 253:2    0 407.4G  0 lvm  /home
sr0                                  11:0    1  1024M  0 rom  

file -s /dev/mapper/vg_siggylinuxbox-lv_home
/dev/mapper/vg_siggylinuxbox-lv_home: symbolic link to `../dm-2'

file -s /dev/mapper/vg_siggylinuxbox-lv_root
/dev/mapper/vg_siggylinuxbox-lv_root: symbolic link to `../dm-0'


**********************************************************************
2Sep16  --siggy  (last day at RI)  grep commands
http://www.tecmint.com/linux-grep-commands-character-classes-bracket-expressions/

**********************************************************************
20Sep16  --siggy create a bootable thumb drive

dd if=VMware-ESXi-6.0.0-2494585-HP-600.9.3.30.2-Jun2015.iso of=/dev/sdc

**********************************************************************
26Sep16  --siggy   USB won't mount "NOT Authorised" (NOT TESTED)

http://unix.stackexchange.com/questions/103645/usb-memory-stick-failing-to-mount-not-authorized

vim /var/lib/polkit-1/localauthority/10-vendor.d/10-desktop-policy.pkla
change: (BOTH user and admin)
	ResultAny=yes
	ResultInactive=yes
	ResultActive=yes

then logout and back in
**********************************************************************
14Oct16  --siggy  rename a USB stick

If it is a vfat file system:
      mlabel -i /dev/sdb1 ::8G-siggy

If it is a ext file system:
      tune2fs -L 8G-siggy /dev/sdb1

**********************************************************************
24Oct16  --siggy   yum problem (if you get this error... try it as root)

dsiegfriedt@dts3329:/disney/apps/autodesk/Maya_2017/maya/autodesk/maya $ yum list | grep  libtbb_preview
There was a problem importing one of the Python modules
required to run yum. The error leading to this problem was:

   /lib64/libssh2.so.1: symbol EVP_rc4, version libcrypto.so.10 not defined in file libcrypto.so.10 with link time reference

Please install a package which provides this module, or
verify that the module is installed correctly.

It's possible that the above module doesn't match the
current version of Python, which is:
2.7.5 (default, Aug 29 2016, 10:12:21) 
[GCC 4.8.5 20150623 (Red Hat 4.8.5-4)]

If you cannot solve this problem yourself, please go to 
the yum faq at:
  http://yum.baseurl.org/wiki/Faq
  

dsiegfriedt@dts3329:/disney/apps/autodesk/Maya_2017/maya/autodesk/maya

**********************************************************************
7Nov16  --siggy  which version of gnome am I running

gnome-session --version   #responded with "gnome-session 3.14.0"

8Nov16  --siggy which version of gdm am I running

gdm --version   # responded with "GDM 3.14.2"

                 to disable user list
http://unix.stackexchange.com/questions/38789/how-can-i-disable-the-user-list-login-screen-in-gnome-3-on-fedora-16-or-17

cat >  /etc/dconf/db/gdm.d/01-custom-gdm-settings<<EOF
#Add the following:

[org/gnome/login-screen]

disable-user-list=true
EOF

#Update the dconf database
dconf update

systemctl restart gdm.service

8Nov16  --siggy gdm lockscreen

https://ask.fedoraproject.org/en/question/36256/how-do-i-disable-the-gnome-lock-screen/

gsettings get org.gnome.desktop.lockdown disable-lock-screen  (came back with true)
gsettings set org.gnome.desktop.lockdown disable-lock-screen false
gsettings get org.gnome.desktop.lockdown disable-lock-screen  (came back with false)
	  so it is FALSE that I want to "disable-lock-screen"

[root@dts3329 ssh]# yum list | grep gnome-screensaver
gnome-screensaver.x86_64         3.6.1-14.el7   dts-7-epel-rpms                 
gnome-screensaver-debuginfo.x86_64
[root@dts3329 ssh]# rpm -qa | grep "gnome-screensaver"
[root@dts3329 ssh]# yum install gnome-screensaver

dconf-editor
/org/gnome/desktop/lockdown/disable-lock-screen
dconf update
systemctl restart gdm.service
**********************************************************************
16Nov16  --siggy   yum security commands

yum updateinfo list
yum updateinfo list | grep -i crit
yum updateinfo list | grep -i kern

yum install --downloadonly --downloaddir=/tmp kernel-3.10.0-514.el7.x86_64

@@@ To see if there are any security updates:
yum --security check-update

@@@ To make the security updates
yum --security update

@@@ misc other commands
yum list-updateinfo new
yum updateinfo available
yum updateinfo security updates
yum updateinfo advisory updates

yum updateinfo list all security

17Nov16  --siggy to fix CVE-2016-5195 dirtyc0w

yum update kernel
yum install ~dsiegfriedt/JOBS?DISNEYTS/kernel-3.10.0-514.el7.x86_64.rpm

**********************************************************************
18Nov16  --siggy redirect strace output

strace mudbox &> /tmp/1

**********************************************************************
21Nov16  --siggy  adding to $PATH

export PATH=$PATH:~/opt/bin

in my case I added (for mudbox):

export PATH=$PATH:/disney/apps/autodesk/opt/Autodesk/Adlm/R12/lib64/
**********************************************************************
28Nov16  --siggy   setting up VPN on a Linux box

yum install openvpn
vpnc uses /etc/vpnc/default.conf  as it's configuration.  
Change this and you can just type "vpnc" to vpn in

[root@dts3329 dsiegfriedt]# ll /etc/vpnc/
total 24
-rw-------. 1 root root   119 Aug 12  2014 default.conf
-rwxr-xr-x. 1 root root 19602 Aug 12  2014 vpnc-script

[root@dts3329 dsiegfriedt]# cat /etc/vpnc/default.conf 
#IPSec gateway my.vpn.gateway
#IPSec ID my.ipsec.id
#IPSec secret mysecret
# your username goes here:
#Xauth username 

**********************************************************************
28Nov16  --siggy all env var

export -p

**********************************************************************
5Dec16  GraceT cleanup space from abrtd (via email) (also found in NOTES-DTS)

Here's how to properly clean abrtd logs: 

systemctl stop abrt-oops 
systemctl stop abrtd
abrt-cli rm /var/spool/abrt/*

I disabled abrtd altogether since we are not using it anyway 

systemctl disable abrtd
systemctl disable abrt-oops 
**********************************************************************
6Dec16  --siggy systemctl tips/tricks

https://fedoraproject.org/wiki/SysVinit_to_Systemd_Cheatsheet

ls /etc/rc.d/init.d/ =	
   ls /lib/systemd/system/*.service 
   ls /etc/systemd/system/*.service	Used to list the services that can be started or stopped

systemctl list-unit-files --type=service OR ls /etc/systemd/system/*.wants/


**********************************************************************
13Dec16  --siggy   sudoers prevent scripted restarts/

for i in $(seq 611 645); do echo d20$i; ssh d20$i /usr/bin/sudo /sbin/service deadline8launcher start; echo; done
d20611
id: cannot find name for group ID 1825200333
sudo: sorry, you must have a tty to run sudo

d20612
id: cannot find name for group ID 1825200333
sudo: sorry, you must have a tty to run sudo
etc.etc.etc.

#in /etc/sudoers gives you your work around

@Defaults    requiretty

@#
@# Refuse to run if unable to disable echo on the tty. This setting should also be
@# changed in order to be able to use sudo without a tty. See requiretty above.


ssh -t d20609 sudo service deadline8launcher start


**********************************************************************
15Dec16  --siggy   lastlog look HUGE

-rw-r--r--. 1 root          root          497G Dec 15 16:03 lastlog

According to Wikipedia lastlog should NOT be rotated. (search for "lastlog" inthere)
There is no reason to do that, because it's not that big as "ls -l" shows.
Use "ls -sh" to see real space needed on HDD.

[root@chug ~]# ll -sh /var/log/lastlog 
92K -rw-r--r--. 1 root root 497G Dec 15 16:03 /var/log/lastlog

**********************************************************************
4Jan16  --siggy   gconftool-2 gnome screensaver

gconftool-2 --set -t boolean /apps/gnome-screensaver/idle_activation_enabled false

gconftool-2 --set -t boolean /apps/gnome-screensaver/idle_activation_enabled true

gconftool-2 --direct --config-source xml:readwrite:/etc/gconf/gconf.xml.defaults --set -t boolean /apps/gnome-screensaver/idle_activation_enabled true

It can be done in GUI mode using screensaver-properties-capplet command.
**********************************************************************
12Jan17  --siggy  NetworkManager configuration tool

nmcli (1)            - command - line tool for controlling NetworkManager

nmtui (1)            - Text User Interface for controlling NetworkManager
nmtui-connect (1)    - Text User Interface for controlling NetworkManager
nmtui-edit (1)       - Text User Interface for controlling NetworkManager
nmtui-hostname (1)   - Text User Interface for controlling NetworkManager

**********************************************************************
17Jan17 --siggy  crontab to delete deleteme

crontab -e
9 * * * * rm -f ~dsiegfriedt/deleteme.txt
**********************************************************************
24Jan17  --Grace   GNOME(gnome) settings

as yourself (so it updates your home account...

gnome-tweak-tool
**********************************************************************
7Apr17  who rebooted last

dsiegfriedt@dts3329:~ $ last reboot
reboot   system boot  3.10.0-327.36.3. Mon Mar 27 08:43 - 10:43 (11+01:59)  
reboot   system boot  3.10.0-327.36.3. Fri Mar 24 15:16 - 16:53  (01:37)    
{SNIP}
**********************************************************************
13AApr17  --siggy  less

you can toggle commands within less.

-N (line numbering)  while a less session is already open
**********************************************************************
18Apr17  Grace   what does automount mount

automount -m
**********************************************************************
19Jun17   Mass rename files with bash

@@@ this renames IMG_0???.JPG files to IMG_4???.JPG

for i in `ls`; do echo $i; mv $i "${i/IMG_0/IMG_4}"; done


**********************************************************************
3Aaug17 sed replace a "," with a newline

cat log.txt | tr ',' '\n'

**********************************************************************
21Aug17  md5sum of a directory

[root@dts3329 maya_2017]# pwd
/disney/apps/autodesk/Maya_2017/maya_2017

[root@dts3329 maya_2017]# find /root/MAYA-bin/bin -type f | sort -u | xargs cat | md5sum
2e6c73c4e01b905c59ec59c22c64fd03  -

[root@dts3329 maya_2017]# find bin -type f | sort -u | xargs cat | md5sum
2e6c73c4e01b905c59ec59c22c64fd03  -

**********************************************************************
21Aug17 soft link shortcut

@@@ while trying to compile openVDB I discovered a link shortcut

ln -s  ../../../include/maya/MPxData.h
@@@ is the same as
ln -s  ../../../include/maya/MPxData.h MPxData.h
**********************************************************************
5Oct17  find the mfg via command line

dmidecode | grep -i vendor
**********************************************************************
25Oct17   find room/space when fs is at 100%

du -sh * | sort -nr | head -10

**********************************************************************
30Oct17  change the run level

edit /etc/inittab

10Nov17 to disable Ctrl-Atl-Del

https://access.redhat.com/solutions/1123873

cd /usr/lib/systemd/system
[root@dts3329 etc]# ll /usr/lib/systemd/system | grep ctrl
lrwxrwxrwx. 1 root root   13 Nov 30  2016 ctrl-alt-del.target -> reboot.target
1) systemctl mask ctrl-alt-del.target
b) ln -sf /dev/null /etc/systemd/system/ctrl-alt-del.target
i) rm -i /usr/lib/systemd/syste/ctrl-alt-del.target

**********************************************************************
17Nov17  dynamically linked library

ldd libqxcb.so

@@@ backstory
fighting falcon would not launch maya.  found that deadline8 was in the path
uninstalled dedadline8 and it worked

**********************************************************************
19Dec17  bigger/better/stronger traceroute

mtr goggle.com

**********************************************************************
1Jan18  mouse middle paste

https://unix.stackexchange.com/questions/9973/configuring-mouse-for-rightleft-button-simulating-middle-click-for-copy-paste

@@@ get the "ID" of your mouse with:
xinput list

@@@ set middle mouse emulation (for a 2 button mouse)
xinput set-prop "$device_name_or_number" "Evdev Middle Button Emulation" 1

@@@ editing /etc/X11/xorg.conf did not work for me so I put the above command (with the correct ID) in .bashrc


**********************************************************************
1Jan18  sudoers
@@@ location counts.  
If you put a "NOPASSWD:" instance in, make sure it is below any other groups the subject belongs to.

**********************************************************************
1Jan18  enable mouse middle button (different from above)

gnome-tweatk-tool
**********************************************************************
1Jan18  epel repo

yum install epel-release

**********************************************************************
9Jan18  how to tell if a machine is physical or a VM

sudo dmidecode -s system-manufacturer

@@@ RHEV returns RedHat   VMWare returns VMWARE   Physical machie return the mfg name (Dell/HP etc.)


**********************************************************************
12Jan18  mouse speed setting

https://askubuntu.com/questions/688270/mouse-speed-too-fast

OR
system settings => Input Device => Mouse => Advanced => Acceleration 

@@@ I slowed mine to 1.3 (and click Apply)

**********************************************************************
17Jan18  postgres DB


@@@ as root ... login
psql --username=postgres

@@@ show datbases; 
\l

@@@ connect
\connect database_name

@@@ user list
SELECT usename FROM pg_user;

@@@ activity
select * from pg_stat_activity;


**********************************************************************
19Jan18  where is my USB tumbdrive mounted

@@@ get device name from dmesg

findmnt /dev/sd???

**********************************************************************
25Jan18  check iptables

iptables -S 

**********************************************************************
12Feb18   network tool

@@@ you are looking for:

nmap -O <hostname>

**********************************************************************
23Feb18 remove mouse middle

echo 'pointer = 1 6 3 4 5' | xmodmap -


**********************************************************************
28MAr18   soft links

@@@ inside the directory

ln -s emacs emacs-24.3
      ^^^^^ ^^^^^^^^^^
          |          |_what is in the directory to
          |          
          |_ what you want to calll (type)     from


**********************************************************************
28Mar18 finding a root URL

/etc/httpd
/var/www
/usr/share/httpd

DocumentRoot "/var/www/html"

/var/www/html:
  total used in directory 0 available 20003836
  drwxr-xr-x. 2 root root  6 Dec  2  2014 .
  drwxr-xr-x. 4 root root 31 Aug  4  2015 ..


/usr/share/httpd/noindex/index.html will be the default page if nothing welse is set up.
**********************************************************************
9Apr18  dhcpd.leases live
/var/lib/dhcpd/


**********************************************************************
18Apr18 command line math

expr 11 + 123
134
$ expr 134 / 11
12
$ expr 134 - 11
123
$ expr 11 * 123
expr: syntax error		<== oops!
$ expr 11 \* 123
1353
$ expr 20 % 3
2

@@@ comparisons
$ expr 11 = 11
1
$ expr 11 = 12
0
$ expr "11" = "11"
1
$ expr "eleven" = "11"
0
$ expr 10 \> 5
1
$ expr 10 \> 99
0

@@@factor
$ factor 111
111: 3 37
$ factor 134
134: 2 67
$ factor 17894
17894: 2 23 389
$ factor 1987
1987: 1987

@@@ bc
$ echo "123.4+5/6-(7.89*1.234)" | bc
113.664
$ echo "sqrt(256)" |  bc
16
$ echo "s(90)" | bc -l
.89399666360055789051

@@@bash
((e=11))
$ (( e = e + 7 ))
$ echo $e
$ ((e--))
$ echo $e
17
$ ((e=e**2))
$ echo $e
289

+ -	Add and subtract
++ --	Increment and decrement
* / %	Multiply, divide, find remainder
^	Get exponent

**********************************************************************
29May18  ntp the new way
https://askubuntu.com/questions/683067/how-to-stop-automatic-time-update-via-terminal

timedatectl set-ntp 0
timedatectl set-time 16:24:00 (or something close)
timedatectl set-ntp 1

timedatectl status
systemctl restart ntpd

**********************************************************************
29May18  dmesg timestamp fix

dmesg
[10702684.368455] SELinux: initialized (dev 0:39, type nfs), uses genfs_contexts

dmesg -T
[Tue May 29 15:23:46 2018] SELinux: initialized (dev 0:39, type nfs), uses genfs_contexts

dmesg -e
[May29 15:31] SELinux: initialized (dev tmpfs, type tmpfs), uses transition SIDs

dmesg -H (colorized) human readable
[May29 15:31] SELinux: initialized (dev tmpfs, type tmpfs), uses transition SIDs


**********************************************************************
11Jun18  xscreensaver

yum install xscreensaver

@@@@@ setup type:
xscreensaver -demo

dsiegfriedt@dts3329:~ $ sudo cp Pictures/* /usr/share/backgrounds/images/


**********************************************************************
21Jun18  is there a DHCP server available

nmap --script broadcast-dhcp-discover -e eth0
Starting Nmap 6.40 ( http://nmap.org ) at 2018-06-21 10:45 PDT
Pre-scan script results:
| broadcast-dhcp-discover: 
|   IP Offered: 10.106.224.153
|   DHCP Message Type: DHCPOFFER
|   Server Identifier: 10.106.228.21
|   IP Address Lease Time: 0 days, 0:05:00
|   Subnet Mask: 255.255.252.0
|   Router: 10.106.227.254
|   Domain Name Server: 10.106.228.19, 10.106.228.20
|_  Domain Name: disneytoonstudios.com
WARNING: No targets were specified, so 0 hosts scanned.
Nmap done: 0 IP addresses (0 hosts up) scanned in 1.16 seconds


**********************************************************************
16Jul18  systemd tools (how to set boot sequence)

To see:
systemd-analyze critical-chain
systemd-analyze plot

**********************************************************************
6Aug18

HTTP status codes (from interview question from Amazon)
1xx Informational response

An informational response indicates that the request was received and understood. It is issued on a provisional 
basis while request processing continues. It alerts the client to wait for a final response. The message consists 
only of the status line and optional header fields, and is terminated by an empty line. As the HTTP/1.0 standard 
did not define any 1xx status codes, servers must not[note 1] send a 1xx response to an HTTP/1.0 compliant client 
except under experimental conditions.

2xx Success

This class of status codes indicates the action requested by the client was received, understood and accepted.

3xx Redirection

This class of status code indicates the client must take additional action to complete the request. Many of 
these status codes are used in URL redirection.

A user agent may carry out the additional action with no user interaction only if the method used in the second 
request is GET or HEAD. A user agent may automatically redirect a request. A user agent should detect and 
intervene to prevent cyclical redirects.

4xx Client errors

This class of status code is intended for situations in which the error seems to have been caused by the client. 
Except when responding to a HEAD request, the server should include an entity containing an explanation of the 
error situation, and whether it is a temporary or permanent condition. These status codes are applicable to any 
request method. User agents should display any included entity to the user.

5xx Server errors

The server failed to fulfil a request.

Response status codes beginning with the digit "5" indicate cases in which the server is aware that it has 
encountered an error or is otherwise incapable of performing the request. Except when responding to a HEAD 
request, the server should include an entity containing an explanation of the error situation, and indicate 
whether it is a temporary or permanent condition. Likewise, user agents should display any included entity 
to the user. These response codes are applicable to any request method.

**********************************************************************
6Aug18 statically/dynamically linked files

Static linking is the result of the linker copying all library routines used in the program into the executable image. 
This may require more disk space and memory than dynamic linking, but is both faster and more portable, since it 
does not require the presence of the library on the system where it is run.

Dynamic linking is accomplished by placing the name of a sharable library in the executable image. Actual linking 
with the library routines does not occur until the image is run, when both the executable and the library are 
placed in memory. An advantage of dynamic linking is that multiple programs can share a single copy of the library.


**********************************************************************
10Aug18 kernel info

$ uname -r
4.15.0-30-generic
^  ^ ^  ^    ^
|  | |  |    |
|  | |  |    |
|  | |  |    +-- the distribution-specific string
|  | |  +------- the latest bug fix
|  | +---------- the minor revision
|  +------------ the major revision
+--------------- the kernel version

OR

$ uname -a
Linux butterfly 4.15.0-30-generic #32-Ubuntu SMP Thu Jul 26 17:42:43 UTC 2018 
----- --------- ----------------- -------------------------------------------
  |       |            |                             |
  |       |            +- kernel version             +---- compilation stats
  |       +-- hostname
  +-- kernel name

x86_64 x86_64 x86_64 GNU/Linux
  |      |      |       |
  |      |      |       +-- operating system
  |      |      +---------- OS architecture
  |      +----------------- processor architecture
  +------------------------ machine architecture

OR

$ cat /proc/version
Linux version 4.15.0-30-generic (buildd@lgw01-amd64-060) (gcc version 7.3.0 (Ubuntu 7.3.0-16ubuntu3)) #32-Ubuntu SMP Thu Jul 26 17:42:43 UTC 2018

**********************************************************************
13Aug18  size matters @@@ all in bytes

https://www.networkworld.com/article/3296631/linux/displaying-data-in-a-human-friendly-way-on-linux.html?idg_eid=763170596ee7239c6c4e2af060618d8e&email_SHA1_lc=b2de1d88a7eef81a927d2383e78591bd3dd30766&cid=cw_nlt_All_IDGE_Newsletter_2018-08-14&utm_source=Sailthru&utm_medium=email&utm_campaign=IDG%20Enterprise%20Top%20Stories%202018-08-14&utm_term=All_IDGE_Newsletter

2**10 =					1,024 = 1 KiB (kibibyte)
2**20 = 			    1,048,576 = 1 MiB (mebibyte)
2**30 = 			1,073,741,824 = 1 GiB (gibibyte)
2**40 = 		    1,099,511,627,776 = 1 TiB (tebibyte)
2**50 = 		  1,125,899,906,842,624 = PiB (pebibyte)
2**60 = 	      1,152,921,504,606,846,976 = EiB (exbibyte)
2**70 = 	1,180,591,620,717,411,303,424 = 1 ZiB (zebibyte)
2**80 =     1,208,925,819,614,629,174,706,176 = 1 YiB (yobibyte)

@@@ be careful
KB = 1000 = 10**3
KiB = 1024 = 2**10

**********************************************************************


**********************************************************************




