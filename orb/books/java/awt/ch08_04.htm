<HTML><HEAD><TITLE>[Chapter 8] 8.4 Extending TextField</TITLE><META NAME="author" CONTENT="John Zukowski"><META NAME="date" CONTENT="Thu Jul 31 14:42:04 1997"><META NAME="form" CONTENT="html"><META NAME="metadata" CONTENT="dublincore.0.1"><META NAME="objecttype" CONTENT="book part"><META NAME="otheragent" CONTENT="gmat dbtohtml"><META NAME="publisher" CONTENT="O'Reilly &amp; Associates, Inc."><META NAME="source" CONTENT="SGML"><META NAME="subject" CONTENT="Java AWT"><META NAME="title" CONTENT="Java AWT"><META HTTP-EQUIV="Content-Script-Type" CONTENT="text/javascript"></HEAD><BODY BGCOLOR="#FFFFFF"><DIV CLASS=htmlnav><H1><a href='index.htm'><IMG SRC="gifs/smbanner.gif"     ALT="Java AWT" border=0></a></H1><table width=515 border=0 cellpadding=0 cellspacing=0><tr><td width=172 align=left valign=top><A HREF="ch08_03.htm"><IMG SRC="gifs/txtpreva.gif" ALT="Previous" border=0></A></td><td width=171 align=center valign=top><B><FONT FACE="ARIEL,HELVETICA,HELV,SANSERIF" SIZE="-1">Chapter 8<br>Input Fields</FONT></B></TD><td width=172 align=right valign=top><A HREF="ch09_01.htm"><IMG SRC="gifs/txtnexta.gif" ALT="Next" border=0></A></td></tr></table>&nbsp;<hr align=left width=515></DIV><DIV CLASS=sect1><h2 CLASS=sect1><A CLASS="TITLE" NAME="JAWT-CH-8-SECT-4">8.4 Extending TextField</A></h2><P CLASS=para><A NAME="CH08.FIELD6"></A><A NAME="CH08.FIELD7"></A>To extend what you learned so far, <A HREF="ch08_04.htm#JAWT-CH-8-EX-1">Example 8.1</A> creates a sub-class of <tt CLASS=literal>TextField</tt> that limits the number of characters a user can type into it. Other than the six constructors, all the work is in the <tt CLASS=literal>keyDown()</tt> method. The entire class follows. <DIV CLASS=example><h4 CLASS=example><A CLASS="TITLE" NAME="JAWT-CH-8-EX-1">Example 8.1: The SizedTextField Class Limits the Number of Characters a User can Type</A></h4><DIV CLASS=screen><P><PRE>import java.awt.*;public class SizedTextField extends TextField {    private int size;  // size = 0 is unlimited    public SizedTextField () {        super ("");        this.size = 0;    }    public SizedTextField (int columns) {        super (columns);        this.size = 0;    }    public SizedTextField (int columns, int size) {        super (columns);        this.size = Math.max (0, size);    }    public SizedTextField (String text) {        super (text);        this.size = 0;    }    public SizedTextField (String text, int columns) {        super (text, columns);        this.size = 0;    }    public SizedTextField (String text, int columns, int size) {        super (text, columns);        this.size = Math.max (0, size);    }    public boolean keyDown (Event e, int key) {        if ((e.id == Event.KEY_PRESS) &amp;&amp; (this.size &gt; 0) &amp;&amp;            (((TextField)(e.target)).getText ().length () &gt;= this.size)) {            // Check for backspace / delete / tab--let these pass through            if ((key == 127) || (key == 8) || (key == 9)) {                return false;            }            return true;        }        return false;    }    protected String paramString () {        String str = super.paramString ();        if (size != 0) {            str += ",size=" + size;        }        return str;    }}</PRE></DIV></DIV><P CLASS=para>Most of the <tt CLASS=literal>SizedTextField</tt> class consists of constructors; you really don't need to provide an equivalent to all the superclass's constructors, but it's not a bad idea. The <tt CLASS=literal>keyDown()</tt> method looks at what the user types before it reaches the screen and acts accordingly. It checks the length of the <tt CLASS=literal>TextField</tt> and compares it to the maximum length. It then does another check to see if the user typed a Backspace, Delete, or Tab, all of which we want to allow: if the field has gotten too long, we want to allow the user to shorten it. We also want to allow tab under all circumstances, so that focus traversal works properly. The rest of the logic is simple: <P><UL CLASS=itemizedlist><li CLASS=listitem>If the user typed Backspace, Delete, or Tab, return <tt CLASS=literal>false</tt> to propagate the event. <P><li CLASS=listitem>If the field is too long, return <tt CLASS=literal>true</tt> to prevent the event from reaching the peer. This effectively ignores the character. <P></UL></DIV><DIV CLASS=htmlnav><P><HR align=left width=515><table width=515 border=0 cellpadding=0 cellspacing=0><tr><td width=172 align=left valign=top><A HREF="ch08_03.htm"><IMG SRC="gifs/txtpreva.gif" ALT="Previous" border=0></A></td><td width=171 align=center valign=top><a href="index.htm"><img src='gifs/txthome.gif' border=0 alt='Home'></a></td><td width=172 align=right valign=top><A HREF="ch09_01.htm"><IMG SRC="gifs/txtnexta.gif" ALT="Next" border=0></A></td></tr><tr><td width=172 align=left valign=top>TextArea</td><td width=171 align=center valign=top><a href="index/idx_a.htm"><img src='gifs/index.gif' alt='Book Index' border=0></a></td><td width=172 align=right valign=top>Pick Me</td></tr></table><hr align=left width=515><IMG SRC="gifs/smnavbar.gif" USEMAP="#map" BORDER=0> <MAP NAME="map"> <AREA SHAPE=RECT COORDS="0,0,108,15" HREF="../javanut/index.htm"alt="Java in a Nutshell"> <AREA SHAPE=RECT COORDS="109,0,200,15" HREF="../langref/index.htm" alt="Java Language Reference"> <AREA SHAPE=RECT COORDS="203,0,290,15" HREF="../awt/index.htm" alt="Java AWT"> <AREA SHAPE=RECT COORDS="291,0,419,15" HREF="../fclass/index.htm" alt="Java Fundamental Classes"> <AREA SHAPE=RECT COORDS="421,0,514,15" HREF="../exp/index.htm" alt="Exploring Java"> </MAP></DIV></BODY></HTML>