<!DOCTYPE HTML PUBLIC "-//ORA//DTD CD HTML 3.2//EN"><HTML><HEAD><TITLE>[Chapter 11] Using and Creating GUI Components</TITLE><META NAME="author" CONTENT="Pat Niemeyer and Josh Peck"><META NAME="date" CONTENT="Tue Jul 22 19:01:01 1997"><META NAME="form" CONTENT="html"><META NAME="metadata" CONTENT="dublincore.0.1"><META NAME="objecttype" CONTENT="book part"><META NAME="otheragent" CONTENT="gmat dbtohtml"><META NAME="publisher" CONTENT="O'Reilly &amp; Associates, Inc."><META NAME="source" CONTENT="SGML"><META NAME="subject" CONTENT="Java"><META NAME="title" CONTENT="Exploring Java"><META HTTP-EQUIV="Content-Script-Type" CONTENT="text/javascript"></HEAD><BODY BGCOLOR="#FFFFFF" TEXT="#000000"><DIV CLASS=htmlnav><H1><a href='index.htm'><IMG SRC="gifs/smbanner.gif"     ALT="Exploring Java" border=0></a></H1><table width=515 border=0 cellpadding=0 cellspacing=0><tr><td width=172 align=left valign=top><A HREF="ch10_02.htm"><IMG SRC="gifs/txtpreva.gif" ALT="Previous" border=0></A></td><td width=171 align=center valign=top><B><FONT FACE="ARIEL,HELVETICA,HELV,SANSERIF" SIZE="-1">Chapter 11</FONT></B></TD><td width=172 align=right valign=top><A HREF="ch11_02.htm"><IMG SRC="gifs/txtnexta.gif" ALT="Next" border=0></A></td></tr></table>&nbsp;<hr align=left width=515></DIV><H1 CLASS=chapter><A CLASS="TITLE" NAME="EXJ-CH-11">11. Using and Creating GUI Components</A></H1><DIV CLASS=htmltoc><p><b>Contents:</b><br>Buttons and Labels<br><A HREF="ch11_02.htm">Text Components</A><BR><A HREF="ch11_03.htm">Lists</A><BR><A HREF="ch11_04.htm">Menus and Choices</A><BR><A HREF="ch11_05.htm">PopupMenus</A><BR><A HREF="ch11_06.htm">Checkboxes and CheckboxGroups</A><BR><A HREF="ch11_07.htm">ScrollPane and Scrollbars</A><BR><A HREF="ch11_08.htm">Dialogs</A><BR><A HREF="ch11_09.htm">Creating custom components</A><BR><p></DIV><P CLASS=para>The last chapter discussed a lot of concepts: how Java's userinterface facility is put together, and how the larger pieces work.You should understand what components and containers are, how youuse them to create a display, what events are, how components usethem to communicate with the rest of your application, and what layoutmanagers are.  In otherwords, we've covered a lot of material that's "good for you."<P CLASS=para>Now that we're through with the general concepts and background, we'llget to the fun stuff: how to do things with AWT. We will cover all the components thatthe AWT package supplies, how to use these components in applets andapplications, and how to build your own components. We will have lotsof code and lots of pretty examples to look at. Here's a list of thecomponents we cover:<P><UL CLASS=itemizedlist><li CLASS=listitem><tt CLASS=literal>Button</tt> and <tt CLASS=literal>Label</tt><P><li CLASS=listitem>Text components: <tt CLASS=literal>TextArea</tt> and <tt CLASS=literal>TextField</tt><P><li CLASS=listitem><tt CLASS=literal>List</tt><P><li CLASS=listitem><tt CLASS=literal>Menu</tt> and <tt CLASS=literal>Choice</tt><P><li CLASS=listitem><tt CLASS=literal>PopupMenu</tt><P><li CLASS=listitem><tt CLASS=literal>Checkbox</tt> and checkbox grouping<P><li CLASS=listitem><tt CLASS=literal>Scrollbar</tt> and <tt CLASS=literal>ScrollPane</tt> <P><li CLASS=listitem><tt CLASS=literal>Dialog</tt> and <tt CLASS=literal>FileDialog</tt><P></UL><P CLASS=para>When we discuss how to create your own components, we'll cover these issues:<P><UL CLASS=itemizedlist><li CLASS=listitem>Extending canvas<P><li CLASS=listitem>Lightweight components<P><li CLASS=listitem>Making components that fire events<P></UL><DIV CLASS=sect1><h2 CLASS=sect1><A CLASS="TITLE" NAME="ch11-SECT1-AUTOID.1">11.1 Buttons and Labels</A></h2><P CLASS=para>We'll start with the simplest components, buttons, and labels. Frankly,there isn't much to say about them. If you've seen one button, you'veseen them all; and you've already seen buttons in the applets ofChapter 2 (<tt CLASS=literal>HelloWeb3</tt> and<tt CLASS=literal>HelloWeb4</tt>). A button generates anActionEvent when the user presses it. To receive these events, your programregisters an <tt CLASS=literal>ActionListener</tt>, which mustimplement the <tt CLASS=literal>actionPerformed()</tt> method. The argumentpassed to <tt CLASS=literal>actionPerformed()</tt> isthe event itself. Rather than rehash this material, I'll refer you toChapter 2. <P CLASS=para>So much for review. There's one more thing worth saying about buttons,which applies to any component that generates an action event.Java lets us specify an "action command" for buttons (and other components, like menu items, that can generate action events).  The actioncommand is less interesting than it sounds.  It is just a String that servesto identify the component that sent the event.  By default, the action command of a Button is the same as the text of its label; it is included in action events, so you can use it to figure out which button an event came from. To get the action command from an action event, call the event's<tt CLASS=literal>getActionCommand()</tt> method. The following code checks whether the user pressed the "Yes"button: <DIV CLASS=screen><P><PRE>public void actionPerformed(ActionEvent e){    if (e.getActionCommand().equals("Yes") {        //the user pressed "Yes"; do something        ...    }}</PRE></DIV><P CLASS=para>You can change the action command by calling the button's<tt CLASS=literal>setActionCommand()</tt> method. The code below changes the button <tt CLASS=literal>b</tt>'saction command to "confirm":<DIV CLASS=screen><P><PRE>myButton.setActionCommand("confirm");</PRE></DIV><P CLASS=para>It's a good idea to get used to setting action commands explicitly,because they prevent your code from breaking when you or some otherdeveloper "internationalizes" it. If you rely on the button'slabel, your code will stop working as soon as that label changes; aFrench user might see the label "Oui" rather than "Yes." Bysetting the action command, you eliminate one source of bugs; forexample, the button <tt CLASS=literal>myButton</tt> above will always generate the action command "confirm," regardless of what its label says.<P CLASS=para>There's even less to be said about Label components. They're just text strings,housed in a component. There aren't any special events associatedwith labels; about all you can do is specify the text's alignment,which controls the position of the text within the area that thelabel occupies when displayed. The following code creates some labelswith different alignments:<DIV CLASS=screen><P><PRE>Label l1 = new Label("Lions"); //label with default alignment (CENTER)Label l2 = new Label("Tigers", LEFT); //left aligned labelLabel l3 = new Label (); //label with no text, default alignmentl3.setText("and Bears"); //assigning text to l3l3.setAlignment(RIGHT); //setting l3's alignment</PRE></DIV><P CLASS=para>Now we've built three labels, using all three constructors and severalof the class's methods. To display the labels, you only have to addthem to a container by calling the container's<tt CLASS=literal>add()</tt> method. <P CLASS=para>The other characteristics you might like to set on labels, likechanging their font or color, are accomplished using the methods of the Component class <A HREF="ch10_01.htm">Chapter 10, <i>Understand the Abstract Windowing Toolkit</i></A>  For example, you can call <tt CLASS=literal>setFont()</tt> and <tt CLASS=literal>setColor()</tt> on a label, as with any other component.<P CLASS=para>Given that labels are so simple, why do we need them at all?  Why notjust call <tt CLASS=literal>drawString()</tt> whenever we need text? Remember that a <tt CLASS=literal>Label</tt> is a<tt CLASS=literal>Component</tt>.  That's important; it meansthat labels have the normal complement of methods for setting fonts andcolors that we mentioned above, as well as the ability to be managed sensibly by a layout manager.  Therefore, they're much more flexible.<P CLASS=para>Speaking of layouts--if you use the setText() method to change the text ofyour label, its size will probably change.  So you should remember to call validate() on its container, to lay things out again.[1]<blockquote class=footnote><P CLASS=para>[1] At least as of Java 1.1, labels aren't very smart.Simply validating the container isn't enough.  I had to explicitlyinvalidate the label first.</blockquote><DIV CLASS=screen><P><PRE>label.setText(...);label.invalidate();validate();  // on the container holding the label</PRE></DIV><P CLASS=para>This ought to be considered a bug.</DIV><DIV CLASS=htmlnav><P><HR align=left width=515><table width=515 border=0 cellpadding=0 cellspacing=0><tr><td width=172 align=left valign=top><A HREF="ch10_02.htm"><IMG SRC="gifs/txtpreva.gif" ALT="Previous" border=0></A></td><td width=171 align=center valign=top><a href="index.htm"><img src='gifs/txthome.gif' border=0 alt='Home'></a></td><td width=172 align=right valign=top><A HREF="ch11_02.htm"><IMG SRC="gifs/txtnexta.gif" ALT="Next" border=0></A></td></tr><tr><td width=172 align=left valign=top>Applets</td><td width=171 align=center valign=top><a href="index/idx_0.htm"><img src='gifs/index.gif' alt='Book Index' border=0></a></td><td width=172 align=right valign=top>Text Components</td></tr></table><hr align=left width=515><IMG SRC="gifs/smnavbar.gif" USEMAP="#map" BORDER=0> <MAP NAME="map"> <AREA SHAPE=RECT COORDS="0,0,108,15" HREF="../javanut/index.htm"alt="Java in a Nutshell"> <AREA SHAPE=RECT COORDS="109,0,200,15" HREF="../langref/index.htm" alt="Java Language Reference"> <AREA SHAPE=RECT COORDS="203,0,290,15" HREF="../awt/index.htm" alt="Java AWT"> <AREA SHAPE=RECT COORDS="291,0,419,15" HREF="../fclass/index.htm" alt="Java Fundamental Classes"> <AREA SHAPE=RECT COORDS="421,0,514,15" HREF="../exp/index.htm" alt="Exploring Java"> </MAP></DIV></BODY></HTML>