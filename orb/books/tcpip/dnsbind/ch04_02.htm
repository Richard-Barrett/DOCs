<HTML><HEAD><TITLE>[Chapter 4] 4.2 Setting Up DNS Data</TITLE><METANAME="DC.title"CONTENT="DNS &amp; BIND"><METANAME="DC.creator"CONTENT="Cricket Liu &amp; Paul Albitz"><METANAME="DC.publisher"CONTENT="O'Reilly &amp; Associates, Inc."><METANAME="DC.date"CONTENT="1999-01-06T18:26:06Z"><METANAME="DC.type"CONTENT="Text.Monograph"><METANAME="DC.format"CONTENT="text/html"SCHEME="MIME"><METANAME="DC.source"CONTENT="1-56592-512-2"SCHEME="ISBN"><METANAME="DC.language"CONTENT="en-US"><METANAME="generator"CONTENT="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><LINKREV="made"HREF="mailto:online-books@oreilly.com"TITLE="Online Books Comments"><LINKREL="up"HREF="ch04_01.htm"TITLE="4. Setting Up BIND"><LINKREL="prev"HREF="ch04_01.htm"TITLE="4.1 Our Domain"><LINKREL="next"HREF="ch04_03.htm"TITLE="4.3 Setting Up a BIND Configuration File"></HEAD><BODYBGCOLOR="#FFFFFF"TEXT="#000000"><DIVCLASS="htmlnav"><H1><IMGSRC="gifs/smbanner.gif"ALT="DNS &amp; BIND"USEMAP="#srchmap"BORDER="0"></H1><MAPNAME="srchmap"><AREASHAPE="RECT"COORDS="0,0,466,65"HREF="index.htm"ALT="DNS &amp; BIND"><AREASHAPE="RECT"COORDS="467,0,514,18"HREF="../search/dsrch.htm"ALT="Search this book"></MAP><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch04_01.htm"TITLE="4.1 Our Domain"><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 4.1 Our Domain"BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><B><FONTFACE="ARIEL,HELVETICA,HELV,SANSERIF"SIZE="-1">Chapter 4<BR>Setting Up <SPANCLASS="acronym">BIND</SPAN></FONT></B></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch04_03.htm"TITLE="4.3 Setting Up a BIND Configuration File"><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 4.3 Setting Up a BIND Configuration File"BORDER="0"></A></TD></TR></TABLE>&nbsp;<HRALIGN="LEFT"WIDTH="515"TITLE="footer"></DIV><DIVCLASS="SECT1"><H2CLASS="sect1"><ACLASS="title"NAME="AUTOID-2698">4.2 Setting Up <SPANCLASS="acronym">DNS</SPAN> Data</A></H2><PCLASS="para"><ACLASS="indexterm"NAME="DNS3-IDX-4-MAPPING"></A><ACLASS="indexterm"NAME="AUTOID-2704"></A>Our first step in setting up the Movie U. name servers is to translatethe host table into equivalent <SPANCLASS="acronym">DNS</SPAN> data. The<SPANCLASS="acronym">DNS</SPAN> version of the data has multiple files. Onefile maps all the host names to addresses.  Other files map theaddresses back to host names. The address-to-name lookup is sometimescalled<ACLASS="indexterm"NAME="AUTOID-2709"></A><ICLASS="firstterm">reverse mapping</I>. Each network has its own filefor the reverse mapping.</P><PCLASS="para">As a convention in this book, a file mapping host names toaddresses is called <ICLASS="filename">db.DOMAIN</I>.In <ICLASS="systemitem.sitename">movie.edu</I>, this file is<ICLASS="filename">db.movie</I>.  The files mapping addresses to hostnames are called <ICLASS="filename">db.ADDR</I>,where <ICLASS="wordasword">ADDR</I> is the networknumber without the trailing zeros. In our example, the files are<ICLASS="filename">db.192.249.249</I> and<ICLASS="filename">db.192.253.253</I>; there's one for each network. The<ICLASS="wordasword">db</I> is short for database. We'll call thecollection of <ICLASS="filename">db.DOMAIN</I> and<ICLASS="filename">db.ADDR</I> files<ACLASS="indexterm"NAME="AUTOID-2723"></A><ICLASS="firstterm">db files</I> or<ACLASS="indexterm"NAME="AUTOID-2726"></A><ICLASS="firstterm">DNS database files</I>. There are a couple of otherdata files: <ICLASS="filename">db.cache</I> and<ICLASS="filename">db.127.0.0</I>. These files are overhead. Each nameserver must have them, and they are, more or less, the same for eachserver.</P><PCLASS="para">To tie all the db files together, a name server needs a startupfile&nbsp;- for <SPANCLASS="acronym">BIND</SPAN> version 4, this file is usually<ACLASS="indexterm"NAME="AUTOID-2735"></A><ACLASS="indexterm"NAME="AUTOID-2737"></A><ACLASS="indexterm"NAME="AUTOID-2740"></A><ICLASS="filename">/etc/named.boot</I>.  For <SPANCLASS="acronym">BIND</SPAN>version 8, this file is usually <ICLASS="filename">/etc/named.conf</I>.The db files are <SPANCLASS="acronym">DNS</SPAN>-specific. The startup file isspecific to the name server implementation&nbsp;- in this case,<SPANCLASS="acronym">BIND</SPAN>.</P><DIVCLASS="sect2"><H3CLASS="sect2"><ACLASS="title"NAME="AUTOID-2748">4.2.1 The db Files</A></H3><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-2751"></A><ACLASS="indexterm"NAME="AUTOID-2753"></A><ACLASS="indexterm"NAME="AUTOID-2755"></A><ACLASS="indexterm"NAME="AUTOID-2758"></A>Most entries in db files are called <ICLASS="firstterm"><SPANCLASS="acronym">DNS</SPAN>resource records</I>.  <SPANCLASS="acronym">DNS</SPAN> lookups arecase-insensitive, so you can enter names in your db files inuppercase, lowercase, or mixed case. We tend to use alllowercase. Even though lookups are case-insensitive, case ispreserved.</P><PCLASS="para">Resource records must start in column one.  The resource recordsin the example files we present in this book do start in column one,but they may look indented because of the way this book isformatted. In the <SPANCLASS="acronym">DNS</SPAN> <SPANCLASS="acronym">RFC</SPAN>s, theexamples present the resource records in a certain order. Most peoplehave chosen to follow that ordering, as we have here, but thisordering is not a requirement. The ordering of resource records in thedb files is as follows:</P><DLCLASS="variablelist"><DTCLASS="term"><ACLASS="indexterm"NAME="AUTOID-2771"></A><ACLASS="indexterm"NAME="AUTOID-2774"></A><ACLASS="indexterm"NAME="AUTOID-2777"></A><ACLASS="indexterm"NAME="AUTOID-2779"></A><SPANCLASS="acronym">SOA</SPAN> record</DT><DDCLASS="listitem"><PCLASS="para">Indicates <EMCLASS="emphasis">authority</EM> for this zone data</P></DD><DTCLASS="term"><ACLASS="indexterm"NAME="AUTOID-2788"></A><SPANCLASS="acronym">NS</SPAN> record</DT><DDCLASS="listitem"><PCLASS="para">Lists a <EMCLASS="emphasis">name server</EM> for this zone</P></DD><DTCLASS="term">Other records</DT><DDCLASS="listitem"><PCLASS="para">Data about hosts in this zone</P></DD></DL><PCLASS="para">Of the other records, this chapter covers:</P><DLCLASS="variablelist"><DTCLASS="term"><ACLASS="indexterm"NAME="AUTOID-2802"></A>A</DT><DDCLASS="listitem"><PCLASS="para">Name-to-address mapping</P></DD><DTCLASS="term"><ACLASS="indexterm"NAME="AUTOID-2808"></A><SPANCLASS="acronym">PTR</SPAN></DT><DDCLASS="listitem"><PCLASS="para">Address-to-name mapping</P></DD><DTCLASS="term"><ACLASS="indexterm"NAME="AUTOID-2815"></A><SPANCLASS="acronym">CNAME</SPAN></DT><DDCLASS="listitem"><PCLASS="para">Canonical name (for aliases)</P></DD></DL><PCLASS="para">Those of you who have some experience with the<SPANCLASS="acronym">DNS</SPAN> file format will look, no doubt, at our dataand say to yourselves, <SPANCLASS="quote">"It would have been shorter to specify itthis other way...."</SPAN> We are not using abbreviations orshortcuts in our data, at least not initially.  Once you understandthe long version, we'll go back and <SPANCLASS="quote">"tighten up"</SPAN> thefiles.</P></DIV><DIVCLASS="sect2"><H3CLASS="sect2"><ACLASS="title"NAME="AUTOID-2824">4.2.2 Comments</A></H3><PCLASS="para">The db files are easier to read if they contain<ACLASS="indexterm"NAME="AUTOID-2827"></A><ACLASS="indexterm"NAME="AUTOID-2830"></A>comments and blank lines. Comments start with a semicolon and finishat the end of the line. As you might guess, the name server ignorescomments and blank lines.</P></DIV><DIVCLASS="sect2"><H3CLASS="sect2"><ACLASS="title"NAME="AUTOID-2833">4.2.3 <SPANCLASS="acronym">SOA</SPAN> Records</A></H3><PCLASS="para"><ACLASS="indexterm"NAME="DNS3-IDX-4-AUTHORITY-FOR-DOMAINS-SOA-RECORDS"></A><ACLASS="indexterm"NAME="DNS3-IDX-4-SUBDOMAINS-SOA-RECORDS"></A><ACLASS="indexterm"NAME="DNS3-IDX-4-SOA-RECORDS"></A><ACLASS="indexterm"NAME="DNS3-IDX-4-ZONES-SOA-RECORDS"></A>The first entry in each of these files is the<SPANCLASS="acronym">SOA</SPAN> (start of authority) resource record. The<ACLASS="indexterm"NAME="AUTOID-2849"></A><ACLASS="indexterm"NAME="AUTOID-2852"></A><SPANCLASS="acronym">SOA</SPAN> record indicates that this name server is thebest source of information for the data within this zone. Our nameserver is <ICLASS="firstterm">authoritative</I> for the zone<ICLASS="systemitem.sitename">movie.edu</I> because of the<SPANCLASS="acronym">SOA</SPAN> record.  An <SPANCLASS="acronym">SOA</SPAN> record isrequired in each <ICLASS="filename">db.DOMAIN</I> and<ICLASS="filename">db.ADDR</I> file. There can beone, and only one, <SPANCLASS="acronym">SOA</SPAN> record in a db file.</P><PCLASS="para">We added the following <SPANCLASS="acronym">SOA</SPAN> record to the<ICLASS="filename">db.movie</I> file:</P><BLOCKQUOTECLASS="screen"><PRECLASS="screen">movie.edu. IN SOA terminator.movie.edu. al.robocop.movie.edu. (                          1        ; Serial                          10800    ; Refresh after 3 hours                          3600     ; Retry after 1 hour                          604800   ; Expire after 1 week                          86400 )  ; Minimum TTL of 1 day</PRE></BLOCKQUOTE><PCLASS="para">The name <ICLASS="systemitem.sitename">movie.edu.</I>must start in column one of the file. Make sure the names end with a trailing<ACLASS="indexterm"NAME="AUTOID-2870"></A><ACLASS="indexterm"NAME="AUTOID-2873"></A><ACLASS="indexterm"NAME="AUTOID-2875"></A><ACLASS="indexterm"NAME="AUTOID-2878"></A>dot, as we have done here, or you will be surprised at theresult!  (We'll explain later in this chapter.)</P><PCLASS="para">The <ICLASS="wordasword"><SPANCLASS="acronym">IN</SPAN></I> stands forInternet. This is one <ICLASS="firstterm">class</I> of data. Otherclasses exist, but none of them are currently in widespread use.  Ourexamples use only the<ACLASS="indexterm"NAME="AUTOID-2885"></A><SPANCLASS="acronym">IN</SPAN> class.  The class field is optional.  If theclass is omitted, the class <SPANCLASS="acronym">IN</SPAN> is assumed.</P><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-2891"></A><ACLASS="indexterm"NAME="AUTOID-2894"></A><ACLASS="indexterm"NAME="AUTOID-2897"></A>The first name after <ICLASS="wordasword"><SPANCLASS="acronym">SOA</SPAN></I>(<ICLASS="systemitem.sitename">terminator.movie.edu.</I>) isthe name of the primary master name server for this data. The secondname (<ICLASS="systemitem.sitename">al.robocop.movie.edu.</I>)is the mail address of the person in charge of the data (if youreplace the first <SPANCLASS="quote">"."</SPAN> with an <SPANCLASS="quote">"@"</SPAN>). Oftenyou'll see <ICLASS="systemitem.example">root</I>, <ICLASS="systemitem.example">postmaster</I>, or <ICLASS="systemitem.example">hostmaster</I> as the email address. Nameservers won't use these names&nbsp;- they are meant for human consumption. Ifyou have a problem with someone's domain, you can send an emailmessage to the listed email address. <SPANCLASS="acronym">BIND</SPAN> 4.9 andlater versions provide another resource record type,<SPANCLASS="acronym">RP</SPAN> (responsible person), for this purpose also. The<ACLASS="indexterm"NAME="AUTOID-2911"></A><SPANCLASS="acronym">RP</SPAN> record is discussed in <ACLASS="xref"HREF="ch07_01.htm"TITLE="Maintaining BIND">Chapter 7, <CITECLASS="chapter">Maintaining <SPANCLASS="acronym">BIND</SPAN></CITE></A>.</P><PCLASS="para">The<ACLASS="indexterm"NAME="AUTOID-2917"></A><ACLASS="indexterm"NAME="AUTOID-2919"></A>parentheses allow the <SPANCLASS="acronym">SOA</SPAN> record to span more thanone line. Most of the fields within the parentheses of the<SPANCLASS="acronym">SOA</SPAN> record are for use by slave name servers andare discussed when we introduce slave name servers later in thischapter. For now, assume these are reasonable values.</P><PCLASS="para">We added similar <SPANCLASS="acronym">SOA</SPAN> records to the beginningof the <ICLASS="filename">db.192.249.249</I> and<ICLASS="filename">db.192.253.253</I> files.  In these files, we changedthe first name in the <SPANCLASS="acronym">SOA</SPAN> record from <ICLASS="systemitem.sitename">movie.edu.</I> to the name of the appropriate<ICLASS="systemitem.sitename">in-addr.arpa</I> domain:<ICLASS="systemitem.sitename">249.249.192.in-addr.arpa.</I> and<ICLASS="systemitem.sitename">253.253.192.in-addr.arpa.</I>,respectively.<ACLASS="indexterm"NAME="AUTOID-2932"></A><ACLASS="indexterm"NAME="AUTOID-2933"></A><ACLASS="indexterm"NAME="AUTOID-2934"></A><ACLASS="indexterm"NAME="AUTOID-2935"></A></P></DIV><DIVCLASS="sect2"><H3CLASS="sect2"><ACLASS="title"NAME="AUTOID-2936">4.2.4 <SPANCLASS="acronym">NS</SPAN> Records</A></H3><PCLASS="para">The next entries we added to each file are <SPANCLASS="acronym">NS</SPAN>(name server) resource records. We added one<ACLASS="indexterm"NAME="AUTOID-2941"></A><ACLASS="indexterm"NAME="AUTOID-2944"></A><ACLASS="indexterm"NAME="AUTOID-2948"></A><SPANCLASS="acronym">NS</SPAN> record for each name server for our zone. Hereare the <SPANCLASS="acronym">NS</SPAN> records from the<ICLASS="filename">db.movie</I> file:</P><BLOCKQUOTECLASS="screen"><PRECLASS="screen">movie.edu.  IN NS  terminator.movie.edu.movie.edu.  IN NS  wormhole.movie.edu.</PRE></BLOCKQUOTE><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-2956"></A><ACLASS="indexterm"NAME="AUTOID-2959"></A>These records indicate that there are two name servers for the zone<ICLASS="systemitem.sitename">movie.edu</I>.  The name servers are on the hosts <ICLASS="systemitem.sitename">terminator</I> and <ICLASS="systemitem.sitename">wormhole</I>. Multihomed hosts, like<ICLASS="systemitem.sitename">wormhole</I>, are excellent choicesfor name servers since they are <SPANCLASS="quote">"well-connected."</SPAN> Theyare directly accessible by hosts on more than one network and, if theyalso serve as routers, they are not often down because they areclosely monitored. We'll cover more on where to place your nameservers in <ACLASS="xref"HREF="ch08_01.htm"TITLE="Growing Your Domain">Chapter 8, <CITECLASS="chapter">Growing Your Domain</CITE></A>.</P><PCLASS="para">As with the <SPANCLASS="acronym">SOA</SPAN> record, we added<SPANCLASS="acronym">NS</SPAN> records to the<ICLASS="filename">db.192.249.249</I> and<ICLASS="filename">db.192.253.253</I> files.</P></DIV><DIVCLASS="sect2"><H3CLASS="sect2"><ACLASS="title"NAME="AUTOID-2972">4.2.5 Address and Alias Records</A></H3><PCLASS="para"><ACLASS="indexterm"NAME="DNS3-IDX-4-ALIASES"></A><ACLASS="indexterm"NAME="DNS3-IDX-4-MAPPING-NAMES-TO-ADDRESSES"></A><ACLASS="indexterm"NAME="DNS3-IDX-4-ADDRESSES-MAPPING-NAMES-TO"></A><ACLASS="indexterm"NAME="DNS3-IDX-4-DOMAIN-NAMES-MAPPING-TO-ADDRESSES"></A>Next, we created the name-to-address mappings. We added the followingresource records to the <ICLASS="filename">db.movie</I> file:</P><BLOCKQUOTECLASS="screen"><PRECLASS="screen">;; Host addresses;localhost.movie.edu.  IN A     127.0.0.1robocop.movie.edu.    IN A     192.249.249.2terminator.movie.edu. IN A     192.249.249.3diehard.movie.edu.    IN A     192.249.249.4misery.movie.edu.     IN A     192.253.253.2shining.movie.edu.    IN A     192.253.253.3carrie.movie.edu.     IN A     192.253.253.4;; Multi-homed hosts;wormhole.movie.edu.   IN A     192.249.249.1wormhole.movie.edu.   IN A     192.253.253.1;; Aliases;bigt.movie.edu.       IN CNAME terminator.movie.edu.dh.movie.edu.         IN CNAME diehard.movie.edu.wh.movie.edu.         IN CNAME wormhole.movie.edu.wh249.movie.edu.      IN A     192.249.249.1wh253.movie.edu.      IN A     192.253.253.1</PRE></BLOCKQUOTE><PCLASS="para">The first two blocks are probably not a surprise.  The A standsfor address, and each resource record maps a name to anaddress. <ICLASS="systemitem.sitename">wormhole</I> acts as arouter. It has two addresses associated with its name and thereforetwo address records. Unlike host table lookups, a<SPANCLASS="acronym">DNS</SPAN> lookup can return more than one address for aname. A lookup of <ICLASS="systemitem.sitename">wormhole</I>will return two. If the requestor and name server are on the samenetwork, some name servers will place the <SPANCLASS="quote">"closest"</SPAN>address first in the response for better performance. This feature iscalled<ACLASS="indexterm"NAME="AUTOID-2993"></A><ACLASS="indexterm"NAME="AUTOID-2996"></A><ICLASS="firstterm">address sorting</I> and is covered in <ACLASS="xref"HREF="ch10_01.htm"TITLE="Advanced Features and Security">Chapter 10, <CITECLASS="chapter">Advanced Features and Security</CITE></A>. If address sorting does not apply, theaddresses are <ICLASS="firstterm">rotated</I> between queries sosubsequent responses list them in a different order. This <SPANCLASS="quote">"roundrobin"</SPAN> feature shows up first in <SPANCLASS="acronym">BIND</SPAN>4.9.</P><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-3004"></A><ACLASS="indexterm"NAME="AUTOID-3007"></A>The third block has the host table aliases. For the first threealiases, we created <SPANCLASS="acronym">CNAME</SPAN> (canonical name) resourcerecords. However, we created address records for the other twoaliases&nbsp;- more on this in a moment. A <SPANCLASS="acronym">CNAME</SPAN> recordmaps an alias to its canonical name.  The name server handles<SPANCLASS="acronym">CNAME</SPAN> records in a different manner than aliasesare handled in the host table.  When a name server looks up a name andfinds a <SPANCLASS="acronym">CNAME</SPAN> record, it replaces the name with thecanonical name and looks up the new name.  For example, when the nameserver looks up <ICLASS="systemitem.sitename">wh</I>, it findsa <SPANCLASS="acronym">CNAME</SPAN> record pointing to <ICLASS="systemitem.sitename">wormhole</I>.  <ICLASS="systemitem.sitename">wormhole</I> is then looked up, and bothaddresses are returned.</P><PCLASS="para">There is one thing you need to remember about aliases like<ICLASS="systemitem.sitename">bigt</I>&nbsp;- they should never appearon the right-hand side of a resource record. Stated differently:always use the canonical name (<ICLASS="systemitem.sitename">terminator</I>) in the data portion of theresource record. Notice that the <SPANCLASS="acronym">NS</SPAN> records we justcreated use the canonical name.</P><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-3023"></A>The final two entries solve a special problem. Suppose you have arouter, like <ICLASS="systemitem.sitename">wormhole</I>, andyou want to check one of the interfaces. One common troubleshootingtechnique is to <KBDCLASS="command">ping</KBD> the interface to verify thatit is responding. If you <KBDCLASS="command">ping</KBD> the name <ICLASS="systemitem.sitename">wormhole</I>, the name server returns bothaddresses when the name is looked up. <KBDCLASS="command">ping</KBD> uses thefirst address in the list. But which address is first?</P><PCLASS="para">With the host table, we chose the address we wanted by usingeither <ICLASS="systemitem.sitename">wh249</I> or <ICLASS="systemitem.sitename">wh253</I>&nbsp;- each name referred to<EMCLASS="emphasis">one</EM> of the host's addresses.  To provideequivalent capability with <SPANCLASS="acronym">DNS</SPAN>, we didn't make<ICLASS="systemitem.sitename">wh249</I> and <ICLASS="systemitem.sitename">wh253</I> into aliases(<SPANCLASS="acronym">CNAME</SPAN> records). That would result in bothaddresses for <ICLASS="systemitem.sitename">wormhole</I> beingreturned when the alias was looked up. Instead, we used addressrecords. Now, to check the operation of the 192.253.253.1 interface on<ICLASS="systemitem.sitename">wormhole</I>, we <KBDCLASS="command">pingwh253</KBD> since it refers to only one address. The same appliesto <ICLASS="systemitem.sitename">wh249</I>.</P><PCLASS="para">To state this as a general rule: if a host is<ACLASS="indexterm"NAME="AUTOID-3043"></A><ACLASS="indexterm"NAME="AUTOID-3045"></A>multihomed (has more than one network interface), create an address(A) record for each alias unique to one address. Create a<SPANCLASS="acronym">CNAME</SPAN> record for each alias common to all theaddresses.</P><PCLASS="para">Now, don't tell your users about names like <ICLASS="systemitem.sitename">wh249</I> and <ICLASS="systemitem.sitename">wh253</I>.  Those names are meant forsystem-administration purposes only. If users learn to use names like<ICLASS="systemitem.sitename">wh249</I>, they will be confusedwhen the name doesn't work for them in some places, like<ICLASS="filename">.rhosts</I> files.  That's because these places wantthe name that results from looking up the address, and that name isgoing to be the canonical name, <ICLASS="systemitem.sitename">wormhole</I>.</P><PCLASS="para">Since we used<ACLASS="indexterm"NAME="AUTOID-3056"></A>A (address) records for the <ICLASS="systemitem.sitename">wh249</I> and <ICLASS="systemitem.sitename">wh253</I> aliases, you might ask: <SPANCLASS="quote">"Isit okay to use address records instead of <SPANCLASS="acronym">CNAME</SPAN>records in <EMCLASS="emphasis">all</EM> cases?"</SPAN> Well, using addressrecords instead of <SPANCLASS="acronym">CNAME</SPAN> records doesn't causeproblems with most applications, since the application only cares thatit finds the <SPANCLASS="acronym">IP</SPAN> address. There is oneapplication&nbsp;- <KBDCLASS="command">sendmail</KBD>&nbsp;- whose behaviorchanges, though. <KBDCLASS="command">sendmail</KBD> usually replaces aliasesin mail headers with their canonical name; this<ACLASS="indexterm"NAME="AUTOID-3067"></A><ACLASS="indexterm"NAME="AUTOID-3069"></A><ICLASS="firstterm">canonicalization</I> only happens if the name inthe mail header has <SPANCLASS="acronym">CNAME</SPAN> data associated withit. Without <SPANCLASS="acronym">CNAME</SPAN> records for aliases, your<KBDCLASS="command">sendmail</KBD> will have to understand all of thepossible aliases your host might be known by, which will require extra<KBDCLASS="command">sendmail</KBD> configuration work on your part.</P><PCLASS="para">In addition to the problem with <KBDCLASS="command">sendmail</KBD>,users might be confused when they try to figure out the canonical nameto enter in their <ICLASS="filename">.rhosts</I> file. Looking up a namethat has <SPANCLASS="acronym">CNAME</SPAN> data leads them to the canonicalname, whereas address data won't. In this case, users<EMCLASS="emphasis">should</EM> instead be looking up the<EMCLASS="emphasis"><SPANCLASS="acronym">IP</SPAN> address</EM> to get thecanonical name, as <KBDCLASS="command">rlogind</KBD> does, but users likethese never seem to be on systems we administer.<ACLASS="indexterm"NAME="AUTOID-3084"></A><ACLASS="indexterm"NAME="AUTOID-3085"></A><ACLASS="indexterm"NAME="AUTOID-3086"></A><ACLASS="indexterm"NAME="AUTOID-3087"></A></P></DIV><DIVCLASS="sect2"><H3CLASS="sect2"><ACLASS="title"NAME="AUTOID-3088">4.2.6 <SPANCLASS="acronym">PTR</SPAN> Records</A></H3><PCLASS="para"><ACLASS="indexterm"NAME="DNS3-IDX-4-ADDRESSES-MAPPING-TO-NAMES"></A><ACLASS="indexterm"NAME="DNS3-IDX-4-DOMAIN-NAMES-MAPPING-ADDRESSES-TO"></A><ACLASS="indexterm"NAME="DNS3-IDX-4-MAPPING-ADDRESSES-TO-NAMES"></A><ACLASS="indexterm"NAME="DNS3-IDX-4-PTR-RECORDS"></A><ACLASS="indexterm"NAME="AUTOID-3103"></A><ACLASS="indexterm"NAME="AUTOID-3107"></A>Next we created the address-to-name mappings. The file<ICLASS="filename">db.192.249.249</I> maps addresses to host names forthe 192.249.249 network. The <SPANCLASS="acronym">DNS</SPAN> resource recordsused for this mapping are <SPANCLASS="acronym">PTR</SPAN> (pointer)records. There is one record for each host interface on thisnetwork. (Recall that addresses are looked up as names in<SPANCLASS="acronym">DNS</SPAN>. The address is reversed and <ICLASS="systemitem.sitename">in-addr.arpa</I> is appended.)</P><PCLASS="para">Here are the <SPANCLASS="acronym">PTR</SPAN> records we added for network192.249.249:</P><BLOCKQUOTECLASS="screen"><PRECLASS="screen">1.249.249.192.in-addr.arpa.  IN PTR wormhole.movie.edu.2.249.249.192.in-addr.arpa.  IN PTR robocop.movie.edu.3.249.249.192.in-addr.arpa.  IN PTR terminator.movie.edu.4.249.249.192.in-addr.arpa.  IN PTR diehard.movie.edu.</PRE></BLOCKQUOTE><PCLASS="para">There are a couple of things to notice about this data. First,addresses should only point to a single name: the canonicalname. Thus, 192.249.249.1 maps to <ICLASS="systemitem.sitename">wormhole</I> and not to <ICLASS="systemitem.sitename">wh249</I>. You <EMCLASS="emphasis">can</EM>create two <SPANCLASS="acronym">PTR</SPAN> records, one for <ICLASS="systemitem.sitename">wormhole</I> and one for <ICLASS="systemitem.sitename">wh249</I>, but most systems are not preparedto see more than one name for an address. Second, even though<ICLASS="systemitem.sitename">wormhole</I> has two addresses,you only see one of them here. That's because this file shows only thedirect connections to network 192.249.249, and <ICLASS="systemitem.sitename">wormhole</I> has only one connectionthere.</P><PCLASS="para">We created similar data for the 192.253.253 network.</P><ACLASS="indexterm"NAME="AUTOID-3128"></A><ACLASS="indexterm"NAME="AUTOID-3129"></A><ACLASS="indexterm"NAME="AUTOID-3130"></A><ACLASS="indexterm"NAME="AUTOID-3131"></A></DIV><DIVCLASS="sect2"><H3CLASS="sect2"><ACLASS="title"NAME="AUTOID-3132">4.2.7 The Completed Data Files</A></H3><PCLASS="para"><ACLASS="indexterm"NAME="DNS3-IDX-4-DB-FILES-CONTENTS-OF-EXAMPLE"></A>Now that the various resource records of the db files have beenexplained, we'll show you what they look like when all the data are inone place. Again, the actual order of these resource records does notmatter.</P><PCLASS="para">Here are the contents of the file <ICLASS="filename">db.movie</I>:</P><BLOCKQUOTECLASS="screen"><PRECLASS="screen">movie.edu. IN SOA terminator.movie.edu. al.robocop.movie.edu. (                          1        ; Serial                          10800    ; Refresh after 3 hours                          3600     ; Retry after 1 hour                          604800   ; Expire after 1 week                          86400 )  ; Minimum TTL of 1 day;; Name servers;movie.edu.  IN NS  terminator.movie.edu.movie.edu.  IN NS  wormhole.movie.edu.;; Addresses for the canonical names;localhost.movie.edu.  IN A     127.0.0.1robocop.movie.edu.    IN A     192.249.249.2terminator.movie.edu. IN A     192.249.249.3diehard.movie.edu.    IN A     192.249.249.4misery.movie.edu.     IN A     192.253.253.2shining.movie.edu.    IN A     192.253.253.3carrie.movie.edu.     IN A     192.253.253.4wormhole.movie.edu.   IN A     192.249.249.1wormhole.movie.edu.   IN A     192.253.253.1;; Aliases;bigt.movie.edu.       IN CNAME terminator.movie.edu.dh.movie.edu.         IN CNAME diehard.movie.edu.wh.movie.edu.         IN CNAME wormhole.movie.edu.;; Interface specific names;wh249.movie.edu.      IN A     192.249.249.1wh253.movie.edu.      IN A     192.253.253.1</PRE></BLOCKQUOTE><PCLASS="para">Here are the contents of the file <ICLASS="filename">db.192.249.249</I>:</P><BLOCKQUOTECLASS="screen"><PRECLASS="screen">249.249.192.in-addr.arpa. IN SOA terminator.movie.edu. al.robocop.movie.edu.(                          1        ; Serial                          10800    ; Refresh after 3 hours                          3600     ; Retry after 1 hour                          604800   ; Expire after 1 week                          86400 )  ; Minimum TTL of 1 day;; Name servers;249.249.192.in-addr.arpa.  IN NS  terminator.movie.edu.249.249.192.in-addr.arpa.  IN NS  wormhole.movie.edu.;; Addresses point to canonical name;1.249.249.192.in-addr.arpa.  IN PTR wormhole.movie.edu.2.249.249.192.in-addr.arpa.  IN PTR robocop.movie.edu.3.249.249.192.in-addr.arpa.  IN PTR terminator.movie.edu.4.249.249.192.in-addr.arpa.  IN PTR diehard.movie.edu.</PRE></BLOCKQUOTE><PCLASS="para">Here are the contents of the file <ICLASS="filename">db.192.253.253</I>:</P><BLOCKQUOTECLASS="screen"><PRECLASS="screen">253.253.192.in-addr.arpa. IN SOA terminator.movie.edu. al.robocop.movie.edu.(                          1        ; Serial                          10800    ; Refresh after 3 hours                          3600     ; Retry after 1 hour                          604800   ; Expire after 1 week                          86400 )  ; Minimum TTL of 1 day;; Name servers;253.253.192.in-addr.arpa.  IN NS  terminator.movie.edu.253.253.192.in-addr.arpa.  IN NS  wormhole.movie.edu.;; Addresses point to canonical name;1.253.253.192.in-addr.arpa.  IN PTR wormhole.movie.edu.2.253.253.192.in-addr.arpa.  IN PTR misery.movie.edu.3.253.253.192.in-addr.arpa.  IN PTR shining.movie.edu.4.253.253.192.in-addr.arpa.  IN PTR carrie.movie.edu.</PRE></BLOCKQUOTE><ACLASS="indexterm"NAME="AUTOID-3147"></A></DIV><DIVCLASS="sect2"><H3CLASS="sect2"><ACLASS="title"NAME="AUTOID-3148">4.2.8 The Loopback Address</A></H3><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-3151"></A><ACLASS="indexterm"NAME="AUTOID-3153"></A><ACLASS="indexterm"NAME="AUTOID-3156"></A>A name server needs one additional<ICLASS="filename">db.ADDR</I> file to cover the<ICLASS="systemitem.sitename">loopback</I> network: the specialaddress that hosts use to direct traffic to themselves. This networkis (almost) always 127.0.0, and the host number is (almost) always127.0.0.1. Therefore, the name of this file is<ICLASS="filename">db.127.0.0</I>.  No surprise here; it looks like theother <ICLASS="filename">db.ADDR</I> files.</P><PCLASS="para">Here are the contents of the file <ICLASS="filename">db.127.0.0</I>:</P><BLOCKQUOTECLASS="screen"><PRECLASS="screen">0.0.127.in-addr.arpa. IN SOA terminator.movie.edu. al.robocop.movie.edu. (                          1        ; Serial                          10800    ; Refresh after 3 hours                          3600     ; Retry after 1 hour                          604800   ; Expire after 1 week                          86400 )  ; Minimum TTL of 1 day0.0.127.in-addr.arpa.  IN NS  terminator.movie.edu.0.0.127.in-addr.arpa.  IN NS  wormhole.movie.edu.1.0.0.127.in-addr.arpa.  IN PTR localhost.</PRE></BLOCKQUOTE><PCLASS="para">Why do name servers need this silly little file?  Think about itfor a second. No one was given responsibility for network 127, yetsystems use it for a loopback address. Since no one has directresponsibility, everyone who uses it is responsible for itindividually. You could omit this file and your name server wouldoperate. However, a lookup of 127.0.0.1 might fail because the rootname server contacted wasn't configured itself to map 127.0.0.1 to aname. You ought to provide the mapping yourself so there are nosurprises.</P></DIV><DIVCLASS="sect2"><H3CLASS="sect2"><ACLASS="title"NAME="AUTOID-3167">4.2.9 The Root Cache Data</A></H3><PCLASS="para"><ACLASS="indexterm"NAME="DNS3-IDX-4-CACHING-ROOT-CACHE-DATA"></A><ACLASS="indexterm"NAME="DNS3-IDX-4-.-DOT-ROOT-DOMAIN"></A><ACLASS="indexterm"NAME="DNS3-IDX-4-DOT-.-ROOT-DOMAIN"></A><ACLASS="indexterm"NAME="DNS3-IDX-4-ROOT-DOMAIN-CACHE-DATA-FOR"></A><ACLASS="indexterm"NAME="DNS3-IDX-4-DOMAINS-ROOT-DOMAIN-CACHE-DATA-FOR"></A>Besides your local information, the name server also needs to knowwhere the name servers are for the root domain. This information mustbe retrieved from the Internet host <ACLASS="systemitem.ftpserver"HREF="ftp://ftp.rs.internic.net">ftp.rs.internic.net</A> (198.41.0.7).  Useanonymous <KBDCLASS="command">ftp</KBD> to retrieve the file<ACLASS="indexterm"NAME="AUTOID-3188"></A><ACLASS="systemitem.url"HREF="ftp://ftp.rs.internic.net/domain/named.root">named.root</A>from the <ACLASS="systemitem.url"HREF="ftp://ftp.rs.internic.net/domain">domain</A> subdirectory.(<ICLASS="filename">named.root</I> is the same file we've been calling<ICLASS="filename">db.cache</I>.  Just rename<ICLASS="filename">named.root</I> to <ICLASS="filename">db.cache</I> afteryou've retrieved it.)</P><BLOCKQUOTECLASS="screen"><PRECLASS="screen">;       This file holds the information on root name servers needed to;       initialize cache of Internet domain name servers;       (e.g. reference this file in the &quot;cache  .  &lt;file&gt;&quot;;       configuration file of BIND domain name servers).;;       This file is made available by InterNIC registration services;       under anonymous FTP as;           file                /domain/named.root;           on server           FTP.RS.INTERNIC.NET;       -OR- under Gopher at    RS.INTERNIC.NET;           under menu          InterNIC Registration Services (NSI);              submenu          InterNIC Registration Archives;           file                named.root;;       last update:    Aug 22, 1997;       related version of root zone:   1997082200;;; formerly NS.INTERNIC.NET;.                        3600000  IN  NS    A.ROOT-SERVERS.NET.A.ROOT-SERVERS.NET.      3600000      A     198.41.0.4;; formerly NS1.ISI.EDU;.                        3600000      NS    B.ROOT-SERVERS.NET.B.ROOT-SERVERS.NET.      3600000      A     128.9.0.107;; formerly C.PSI.NET;.                        3600000      NS    C.ROOT-SERVERS.NET.C.ROOT-SERVERS.NET.      3600000      A     192.33.4.12;; formerly TERP.UMD.EDU;.                        3600000      NS    D.ROOT-SERVERS.NET.D.ROOT-SERVERS.NET.      3600000      A     128.8.10.90;; formerly NS.NASA.GOV;.                        3600000      NS    E.ROOT-SERVERS.NET.E.ROOT-SERVERS.NET.      3600000      A     192.203.230.10;; formerly NS.ISC.ORG;.                        3600000      NS    F.ROOT-SERVERS.NET.F.ROOT-SERVERS.NET.      3600000      A     192.5.5.241;; formerly NS.NIC.DDN.MIL;.                        3600000      NS    G.ROOT-SERVERS.NET.G.ROOT-SERVERS.NET.      3600000      A     192.112.36.4;; formerly AOS.ARL.ARMY.MIL;.                        3600000      NS    H.ROOT-SERVERS.NET.H.ROOT-SERVERS.NET.      3600000      A     128.63.2.53;; formerly NIC.NORDU.NET;.                        3600000      NS    I.ROOT-SERVERS.NET.I.ROOT-SERVERS.NET.      3600000      A     192.36.148.17;; temporarily housed at NSI (InterNIC);.                        3600000      NS    J.ROOT-SERVERS.NET.J.ROOT-SERVERS.NET.      3600000      A     198.41.0.10;; housed in LINX, operated by RIPE NCC;.                        3600000      NS    K.ROOT-SERVERS.NET.K.ROOT-SERVERS.NET.      3600000      A     193.0.14.129;; temporarily housed at ISI (IANA);.                        3600000      NS    L.ROOT-SERVERS.NET.L.ROOT-SERVERS.NET.      3600000      A     198.32.64.12;; housed in Japan, operated by WIDE;.                        3600000      NS    M.ROOT-SERVERS.NET.M.ROOT-SERVERS.NET.      3600000      A     202.12.27.33; End of File</PRE></BLOCKQUOTE><PCLASS="para">The domain name <SPANCLASS="quote">"."</SPAN> refers to the rootdomain. Since the root domain's name servers change over time, don'tassume <EMCLASS="emphasis">this</EM> list is current. Pull a new versionof <ACLASS="systemitem.url"HREF="ftp://ftp.rs.internic.net/domain/named.root">named.root</A>.</P><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-3202"></A><ACLASS="indexterm"NAME="AUTOID-3205"></A>How is this file kept up to date?  As the network administrator, youmust keep it up to date. Some versions of <SPANCLASS="acronym">BIND</SPAN> didupdate this file periodically. That feature was disabled: apparently,it didn't work as well as the authors had hoped. Sometimes the changed<ICLASS="filename">db.cache</I> file is mailed to the<ACLASS="indexterm"NAME="AUTOID-3210"></A><ICLASS="systemitem.example">bind-users</I> or<ACLASS="indexterm"NAME="AUTOID-3213"></A><ICLASS="systemitem.example">namedroppers</I> mailing list. Ifyou are on one of these lists, you are likely to hear aboutchanges.</P><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-3217"></A>Can you put data other than root name server data in this file? Youcan, but it won't be used. Originally, the name server installed thisdata in its cache. However, the cache file has changed (subtly) to bethe root name server <EMCLASS="emphasis">hints</EM> (but the name<SPANCLASS="quote">"cache file"</SPAN> stuck). The name server stores the hintsdata in a special place and does not discard the hints if their<ACLASS="indexterm"NAME="AUTOID-3222"></A><ACLASS="indexterm"NAME="AUTOID-3224"></A><ACLASS="indexterm"NAME="AUTOID-3226"></A><ACLASS="indexterm"NAME="AUTOID-3228"></A><SPANCLASS="acronym">TTL</SPAN>s drop to zero, as it would with cache data. Thename server uses the hint data to query the root name servers for thecurrent list of root name servers, which it caches. When the cachedlist of root name servers times out, the name server again uses thehints to get a new list.</P><PCLASS="para">What are the <CODECLASS="literal">3600000</CODE>s for? In older versionsof this file, this number used to be <CODECLASS="literal">99999999</CODE>.Since this file was originally cache data, the name server needed toknow how long to keep these records active. The<CODECLASS="literal">99999999</CODE>s meant a very long time. The root nameserver data was to be kept active for as long as the server ran. Sincethe name server now stores this data in a special place and doesn'tdiscard it if it times out, the <SPANCLASS="acronym">TTL</SPAN> isunnecessary. But it's not harmful to have the<CODECLASS="literal">3600000</CODE>s, and it makes for interesting<SPANCLASS="acronym">BIND</SPAN> folklore when you pass responsibility to thenext name server administrator.<ACLASS="indexterm"NAME="AUTOID-3239"></A><ACLASS="indexterm"NAME="AUTOID-3240"></A><ACLASS="indexterm"NAME="AUTOID-3241"></A><ACLASS="indexterm"NAME="AUTOID-3242"></A><ACLASS="indexterm"NAME="AUTOID-3243"></A><ACLASS="indexterm"NAME="AUTOID-3244"></A></P></DIV></DIV><DIVCLASS="htmlnav"><P></P><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch04_01.htm"TITLE="4.1 Our Domain"><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 4.1 Our Domain"BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="book"HREF="index.htm"TITLE="DNS &amp; BIND"><IMGSRC="../gifs/txthome.gif"ALT="DNS &amp; BIND"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch04_03.htm"TITLE="4.3 Setting Up a BIND Configuration File"><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 4.3 Setting Up a BIND Configuration File"BORDER="0"></A></TD></TR><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172">4.1 Our Domain</TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="index"HREF="index/idx_0.htm"TITLE="Book Index"><IMGSRC="../gifs/index.gif"ALT="Book Index"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172">4.3 Setting Up a BIND Configuration File</TD></TR></TABLE><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><PCLASS="nav"><FONTSIZE="-1">[ <AHREF="../index.htm"TITLE="The Networking CD Bookshelf">Library Home</A> | <AHREF="index.htm"TITLE="DNS &amp; BIND">DNS &amp; BIND</A> | <AHREF="../tcpip/index.htm"TITLE="TCP/IP Network Administration">TCP/IP</A> | <AHREF="../sendmail/index.htm"TITLE="sendmail">sendmail</A> | <AHREF="../smdref/index.htm"TITLE="sendmail Desktop Reference">sendmail Reference</A> | <AHREF="../firewall/index.htm"TITLE="Building Internet Firewalls">Firewalls</A> | <AHREF="../puis/index.htm"TITLE="Practical UNIX &amp; Internet Security">Practical Security</A> ]</FONT></P></DIV></BODY></HTML>