<HTML><HEAD><TITLE>[Chapter 4] 4.3 Setting Up a BIND Configuration File</TITLE><METANAME="DC.title"CONTENT="DNS &amp; BIND"><METANAME="DC.creator"CONTENT="Cricket Liu &amp; Paul Albitz"><METANAME="DC.publisher"CONTENT="O'Reilly &amp; Associates, Inc."><METANAME="DC.date"CONTENT="1999-01-06T18:26:42Z"><METANAME="DC.type"CONTENT="Text.Monograph"><METANAME="DC.format"CONTENT="text/html"SCHEME="MIME"><METANAME="DC.source"CONTENT="1-56592-512-2"SCHEME="ISBN"><METANAME="DC.language"CONTENT="en-US"><METANAME="generator"CONTENT="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><LINKREV="made"HREF="mailto:online-books@oreilly.com"TITLE="Online Books Comments"><LINKREL="up"HREF="ch04_01.htm"TITLE="4. Setting Up BIND"><LINKREL="prev"HREF="ch04_02.htm"TITLE="4.2 Setting Up DNS Data"><LINKREL="next"HREF="ch04_04.htm"TITLE="4.4 Abbreviations"></HEAD><BODYBGCOLOR="#FFFFFF"TEXT="#000000"><DIVCLASS="htmlnav"><H1><IMGSRC="gifs/smbanner.gif"ALT="DNS &amp; BIND"USEMAP="#srchmap"BORDER="0"></H1><MAPNAME="srchmap"><AREASHAPE="RECT"COORDS="0,0,466,65"HREF="index.htm"ALT="DNS &amp; BIND"><AREASHAPE="RECT"COORDS="467,0,514,18"HREF="../search/dsrch.htm"ALT="Search this book"></MAP><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch04_02.htm"TITLE="4.2 Setting Up DNS Data"><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 4.2 Setting Up DNS Data"BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><B><FONTFACE="ARIEL,HELVETICA,HELV,SANSERIF"SIZE="-1">Chapter 4<BR>Setting Up <SPANCLASS="acronym">BIND</SPAN></FONT></B></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch04_04.htm"TITLE="4.4 Abbreviations"><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 4.4 Abbreviations"BORDER="0"></A></TD></TR></TABLE>&nbsp;<HRALIGN="LEFT"WIDTH="515"TITLE="footer"></DIV><DIVCLASS="SECT1"><H2CLASS="sect1"><ACLASS="title"NAME="AUTOID-3245">4.3 Setting Up a <SPANCLASS="acronym">BIND</SPAN> Configuration File</A></H2><PCLASS="para"><ACLASS="indexterm"NAME="DNS3-IDX-4-BOOT-FILE-BIND-CONFIGURATION-FILE"></A>Now that the db files have been created, a name server must beinstructed to read each of the files. For <SPANCLASS="acronym">BIND</SPAN>, themechanism for pointing the server to its db files is the configurationfile. Up to this point, we've been discussing files whose data andformat are described in the <SPANCLASS="acronym">DNS</SPAN> specification. Theconfiguration file, though, is specific to <SPANCLASS="acronym">BIND</SPAN> andis not defined in the <SPANCLASS="acronym">DNS</SPAN><SPANCLASS="acronym">RFC</SPAN>s.</P><PCLASS="para">The <SPANCLASS="acronym">BIND</SPAN> configuration file syntax changedsignificantly between version 4 and version 8.  We'll first show youthe <SPANCLASS="acronym">BIND</SPAN> 4 syntax and then we'll show you theequivalent <SPANCLASS="acronym">BIND</SPAN> 8 syntax.  You'll have to check the<KBDCLASS="command">named</KBD>[1] manual page to find out which you need touse.  If you already have a version 4 configuration file, you canconvert it to a version 8 configuration file by running the Perlscript <ICLASS="filename">src/bin/named/named-bootconf.pl</I> that isdistributed with the <SPANCLASS="acronym">BIND</SPAN> source.</P><BLOCKQUOTECLASS="footnote"><PCLASS="para">[1] <KBDCLASS="command">named</KBD> is pronounced <SPANCLASS="quote">"name-dee"</SPAN>and stands for <SPANCLASS="quote">"name server daemon."</SPAN><SPANCLASS="acronym">BIND</SPAN> is pronounced to rhyme with<SPANCLASS="quote">"kind."</SPAN> Some creative people have noticed thesimilarities in the names and choose to mispronounce them<SPANCLASS="quote">"bin-dee"</SPAN> and <SPANCLASS="quote">"named"</SPAN> (like<SPANCLASS="quote">"tamed"</SPAN>).</P></BLOCKQUOTE><PCLASS="para">In <SPANCLASS="acronym">BIND</SPAN> 4, comments in the configuration fileare the same as in the db files&nbsp;- they start with a semicolon and finishat the end of the line:<ACLASS="indexterm"NAME="AUTOID-3275"></A><ACLASS="indexterm"NAME="AUTOID-3278"></A><ACLASS="indexterm"NAME="AUTOID-3280"></A></P><BLOCKQUOTECLASS="screen"><PRECLASS="screen">; This is a comment</PRE></BLOCKQUOTE><PCLASS="para">In <SPANCLASS="acronym">BIND</SPAN> 8, you can use any of 3 styles ofcomments: C-style, C++-style, or shell-style:<ACLASS="indexterm"NAME="AUTOID-3285"></A><ACLASS="indexterm"NAME="AUTOID-3287"></A><ACLASS="indexterm"NAME="AUTOID-3289"></A><ACLASS="indexterm"NAME="AUTOID-3291"></A><ACLASS="indexterm"NAME="AUTOID-3293"></A></P><BLOCKQUOTECLASS="screen"><PRECLASS="screen">/* This is a C-style comment */// This is a C++-style comment# This is a shell-style comment</PRE></BLOCKQUOTE><PCLASS="para">Don't use a version 4 style comment in a version 8 configurationfile because it won't work&nbsp;- the semicolon ends a configurationstatement instead of starting a comment statement.</P><PCLASS="para">Usually, configuration files contain a line indicating thedirectory where the files are located. The name server changes itsdirectory to this location before reading the files. This allows thefilenames to be relative to the current directory instead of beingcomplete path names. Here is how a version 4 directory linelooks:</P><BLOCKQUOTECLASS="screen"><PRECLASS="screen">directory /usr/local/named</PRE></BLOCKQUOTE><PCLASS="para">Here is how a version 8 directory line looks:</P><BLOCKQUOTECLASS="screen"><PRECLASS="screen">options {        directory &quot;/usr/local/named&quot;;        // Place additional options here.};</PRE></BLOCKQUOTE><BLOCKQUOTECLASS="note"><PCLASS="para"><STRONG>NOTE:</STRONG> Only one <ICLASS="structfield">options</I> statement is allowedin the configuration file, so any additional options mentioned laterin this book must be added along with the<ICLASS="structfield">directory</I> option.</P></BLOCKQUOTE><PCLASS="para">On a<ACLASS="indexterm"NAME="AUTOID-3306"></A>primary master server, the configuration file contains one line foreach file to be read. For version 4, this line comprises three fields:the word <ICLASS="wordasword">primary</I>, starting in the firstcolumn, the domain name of the zone, and the filename:</P><BLOCKQUOTECLASS="screen"><PRECLASS="screen">primary  movie.edu                db.movieprimary  249.249.192.in-addr.arpa db.192.249.249primary  253.253.192.in-addr.arpa db.192.253.253primary  0.0.127.in-addr.arpa     db.127.0.0</PRE></BLOCKQUOTE><PCLASS="para">For version 8, the line starts with the keyword<ICLASS="wordasword">zone</I> followed by the domain name and theclass (<ICLASS="wordasword">in</I> stands for Internet).  The<ICLASS="wordasword">type master</I> is the same as the version 4<ICLASS="wordasword">primary</I>.  The last field is thefilename:</P><BLOCKQUOTECLASS="screen"><PRECLASS="screen">zone &quot;movie.edu&quot; in {      type master;      file &quot;db.movie&quot;;};</PRE></BLOCKQUOTE><PCLASS="para">Here is the version 4 configuration file line to read the cachefile:</P><BLOCKQUOTECLASS="screen"><PRECLASS="screen">cache  .  db.cache</PRE></BLOCKQUOTE><PCLASS="para">and the equivalent version 8 configuration file line:</P><BLOCKQUOTECLASS="screen"><PRECLASS="screen">zone &quot;.&quot; in {        type hint;        file &quot;db.cache&quot;;};</PRE></BLOCKQUOTE><PCLASS="para">As mentioned earlier, this file is not for general cachedata. It only contains the root name server<EMCLASS="emphasis">hints</EM>.</P><PCLASS="para">By default, <SPANCLASS="acronym">BIND</SPAN> 4 expects the configurationfile to be named <ICLASS="filename">/etc/named.boot</I>, but it can bechanged with a command-line option. <SPANCLASS="acronym">BIND</SPAN> 8 expectsthe configuration file to be named<ICLASS="filename">/etc/named.conf</I> instead of<ICLASS="filename">/etc/named.boot</I>. The db files for our example arein the directory <ICLASS="filename">/usr/local/named</I>. Whichdirectory you use does not matter. Avoid putting the directory in theroot filesystem if the root filesystem is short on space. Here is thecomplete version 4 <ICLASS="filename">/etc/named.boot</I> file:</P><BLOCKQUOTECLASS="screen"><PRECLASS="screen">; BIND configuration filedirectory /usr/local/namedprimary  movie.edu                db.movieprimary  249.249.192.in-addr.arpa db.192.249.249primary  253.253.192.in-addr.arpa db.192.253.253primary  0.0.127.in-addr.arpa     db.127.0.0cache    .                        db.cache</PRE></BLOCKQUOTE><PCLASS="para">Here is the complete version 8<ICLASS="filename">/etc/named.conf</I> file:</P><BLOCKQUOTECLASS="screen"><PRECLASS="screen">// BIND configuration fileoptions {        directory &quot;/usr/local/named&quot;;        // Place additional options here.};zone &quot;movie.edu&quot; in {        type master;        file &quot;db.movie&quot;;};zone &quot;249.249.192.in-addr.arpa&quot; in {        type master;        file &quot;db.192.249.249&quot;;};zone &quot;253.253.192.in-addr.arpa&quot; in {        type master;        file &quot;db.192.253.253&quot;;};zone &quot;0.0.127.in-addr.arpa&quot; in {        type master;        file &quot;db.127.0.0&quot;;};zone &quot;.&quot; in {        type hint;        file &quot;db.cache&quot;;};</PRE></BLOCKQUOTE><ACLASS="indexterm"NAME="AUTOID-3335"></A><ACLASS="indexterm"NAME="AUTOID-3336"></A><ACLASS="indexterm"NAME="AUTOID-3340"></A></DIV><DIVCLASS="htmlnav"><P></P><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch04_02.htm"TITLE="4.2 Setting Up DNS Data"><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 4.2 Setting Up DNS Data"BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="book"HREF="index.htm"TITLE="DNS &amp; BIND"><IMGSRC="../gifs/txthome.gif"ALT="DNS &amp; BIND"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch04_04.htm"TITLE="4.4 Abbreviations"><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 4.4 Abbreviations"BORDER="0"></A></TD></TR><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172">4.2 Setting Up DNS Data</TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="index"HREF="index/idx_0.htm"TITLE="Book Index"><IMGSRC="../gifs/index.gif"ALT="Book Index"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172">4.4 Abbreviations</TD></TR></TABLE><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><PCLASS="nav"><FONTSIZE="-1">[ <AHREF="../index.htm"TITLE="The Networking CD Bookshelf">Library Home</A> | <AHREF="index.htm"TITLE="DNS &amp; BIND">DNS &amp; BIND</A> | <AHREF="../tcpip/index.htm"TITLE="TCP/IP Network Administration">TCP/IP</A> | <AHREF="../sendmail/index.htm"TITLE="sendmail">sendmail</A> | <AHREF="../smdref/index.htm"TITLE="sendmail Desktop Reference">sendmail Reference</A> | <AHREF="../firewall/index.htm"TITLE="Building Internet Firewalls">Firewalls</A> | <AHREF="../puis/index.htm"TITLE="Practical UNIX &amp; Internet Security">Practical Security</A> ]</FONT></P></DIV></BODY></HTML>