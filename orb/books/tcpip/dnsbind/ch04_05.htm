<HTML><HEAD><TITLE>[Chapter 4] 4.5 Host Name Checking (BIND 4.9.4 and Later Versions)</TITLE><METANAME="DC.title"CONTENT="DNS &amp; BIND"><METANAME="DC.creator"CONTENT="Cricket Liu &amp; Paul Albitz"><METANAME="DC.publisher"CONTENT="O'Reilly &amp; Associates, Inc."><METANAME="DC.date"CONTENT="1999-01-06T18:26:48Z"><METANAME="DC.type"CONTENT="Text.Monograph"><METANAME="DC.format"CONTENT="text/html"SCHEME="MIME"><METANAME="DC.source"CONTENT="1-56592-512-2"SCHEME="ISBN"><METANAME="DC.language"CONTENT="en-US"><METANAME="generator"CONTENT="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><LINKREV="made"HREF="mailto:online-books@oreilly.com"TITLE="Online Books Comments"><LINKREL="up"HREF="ch04_01.htm"TITLE="4. Setting Up BIND"><LINKREL="prev"HREF="ch04_04.htm"TITLE="4.4 Abbreviations"><LINKREL="next"HREF="ch04_06.htm"TITLE="4.6 Tools"></HEAD><BODYBGCOLOR="#FFFFFF"TEXT="#000000"><DIVCLASS="htmlnav"><H1><IMGSRC="gifs/smbanner.gif"ALT="DNS &amp; BIND"USEMAP="#srchmap"BORDER="0"></H1><MAPNAME="srchmap"><AREASHAPE="RECT"COORDS="0,0,466,65"HREF="index.htm"ALT="DNS &amp; BIND"><AREASHAPE="RECT"COORDS="467,0,514,18"HREF="../search/dsrch.htm"ALT="Search this book"></MAP><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch04_04.htm"TITLE="4.4 Abbreviations"><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 4.4 Abbreviations"BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><B><FONTFACE="ARIEL,HELVETICA,HELV,SANSERIF"SIZE="-1">Chapter 4<BR>Setting Up <SPANCLASS="acronym">BIND</SPAN></FONT></B></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch04_06.htm"TITLE="4.6 Tools"><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 4.6 Tools"BORDER="0"></A></TD></TR></TABLE>&nbsp;<HRALIGN="LEFT"WIDTH="515"TITLE="footer"></DIV><DIVCLASS="SECT1"><H2CLASS="sect1"><ACLASS="title"NAME="AUTOID-3453">4.5 Host Name Checking (<SPANCLASS="acronym">BIND</SPAN> 4.9.4 and LaterVersions)</A></H2><PCLASS="para"><ACLASS="indexterm"NAME="DNS3-IDX-4-DOMAIN-NAMES-CHECKING-HOST-NAMES"></A><ACLASS="indexterm"NAME="DNS3-IDX-4-HOSTS-NAME-CHECKING"></A><ACLASS="indexterm"NAME="DNS3-IDX-4-CHECKING-HOST-NAMES"></A>If your name server is older than <SPANCLASS="acronym">BIND</SPAN> 4.9.4, skipto the next section.</P><PCLASS="para">If your name server is <SPANCLASS="acronym">BIND</SPAN> 4.9.4 or newer,you have to pay extra attention to how your hosts are named. Startingwith version 4.9.4, <SPANCLASS="acronym">BIND</SPAN> checks host names forconformance to <SPANCLASS="acronym">RFC</SPAN> 952. If a host name does notconform, <SPANCLASS="acronym">BIND</SPAN> considers the zone to have a syntaxerror.</P><PCLASS="para">Before you panic, you need to know that this checking onlyapplies to names that are considered host names. Remember, resourcerecords have a <ICLASS="wordasword">name</I> field and a<ICLASS="wordasword">data</I> field, for example:</P><BLOCKQUOTECLASS="screen"><PRECLASS="screen">&lt;name&gt;      &lt;class&gt;  &lt;type&gt;  &lt;data&gt;terminator  IN       A       192.249.249.3</PRE></BLOCKQUOTE><PCLASS="para">Host names are in the <ICLASS="wordasword">name</I> field of A(address) and <SPANCLASS="acronym">MX</SPAN> (covered in <ACLASS="xref"HREF="ch05_01.htm"TITLE="DNS and Electronic Mail">Chapter 5, <CITECLASS="chapter"><SPANCLASS="acronym">DNS</SPAN> and Electronic Mail</CITE></A>) records. Host names are in the<ICLASS="wordasword">data</I> fields of <SPANCLASS="acronym">SOA</SPAN> and<SPANCLASS="acronym">NS</SPAN> records. At least in version 4.9.4,<SPANCLASS="acronym">CNAME</SPAN>s do not have to conform to the<ICLASS="wordasword">host</I> naming rules because they can point tonames that are not host names.</P><PCLASS="para">Here are the host naming rules: host names are allowed to havealphabetic characters and numeric characters in each label. Thefollowing are valid host names:</P><BLOCKQUOTECLASS="screen"><PRECLASS="screen">ID4            IN A 192.249.249.10postmanring2x  IN A 192.249.249.11</PRE></BLOCKQUOTE><PCLASS="para">A hyphen is allowed if it is in the middle of a label:</P><BLOCKQUOTECLASS="screen"><PRECLASS="screen">fx-gateway     IN A 192.249.249.12</PRE></BLOCKQUOTE><BLOCKQUOTECLASS="note"><PCLASS="para"><STRONG>NOTE:</STRONG> Underscores are not allowed in host names.</P></BLOCKQUOTE><PCLASS="para">Names that are not host names can consist of any printable<SPANCLASS="acronym">ASCII</SPAN> character.</P><PCLASS="para">If the resource record <ICLASS="wordasword">data</I> field callsfor a <ICLASS="firstterm">mail address</I> (<SPANCLASS="acronym">SOA</SPAN><ACLASS="indexterm"NAME="AUTOID-3497"></A><ACLASS="indexterm"NAME="AUTOID-3501"></A><ACLASS="indexterm"NAME="AUTOID-3505"></A><ACLASS="indexterm"NAME="AUTOID-3508"></A>records), the first label can contain any printable character, sinceit is not a host name, but the rest of the labels must follow the hostname syntax described above. For example, a mail address has thefollowing syntax:</P><BLOCKQUOTECLASS="screen"><PRECLASS="screen">&lt;ASCII-characters&gt;.&lt;hostname-characters&gt;</PRE></BLOCKQUOTE><PCLASS="para">For example, if your mail address is <ICLASS="systemitem.example">key_grip@movie.edu</I>, you can still use itin an <SPANCLASS="acronym">SOA</SPAN> record, even with theunderscore. Remember, in a mail address you replace the<SPANCLASS="quote">"@"</SPAN> with a <SPANCLASS="quote">"."</SPAN>:</P><BLOCKQUOTECLASS="screen"><PRECLASS="screen">movie.edu. IN SOA terminator.movie.edu. key_grip.movie.edu. (                          1        ; Serial                          10800    ; Refresh after 3 hours                          3600     ; Retry after 1 hour                          604800   ; Expire after 1 week                          86400 )  ; Minimum TTL of 1 day</PRE></BLOCKQUOTE><PCLASS="para">This extra level of checking might cause dramatic problems tosites that upgrade from a liberal version of <SPANCLASS="acronym">BIND</SPAN>to a conservative one, especially sites that standardized on namescontaining an underscore. If you need to postpone changing names untillater (you will still change them, right?), this feature can be toneddown to warning messages or simply ignored altogether.  The followingversion 4 configuration file statement turns the errors into warningmessages:</P><BLOCKQUOTECLASS="screen"><PRECLASS="screen">check-names primary warn</PRE></BLOCKQUOTE><PCLASS="para">Here is the equivalent version 8 line:</P><BLOCKQUOTECLASS="screen"><PRECLASS="screen">options {        check-names master warn;};</PRE></BLOCKQUOTE><PCLASS="para">The warning messages are logged with <KBDCLASS="command">syslog</KBD>,which we will explain shortly. The following version 4 configurationfile statement ignores the errors:</P><BLOCKQUOTECLASS="screen"><PRECLASS="screen">check-names primary ignore</PRE></BLOCKQUOTE><PCLASS="para">Here is the equivalent version 8 line:</P><BLOCKQUOTECLASS="screen"><PRECLASS="screen">options {        check-names master ignore;};</PRE></BLOCKQUOTE><PCLASS="para">If the nonconforming names came from a zone that you back up(and have no control over), then add a similar statement thatspecifies <KBDCLASS="command">secondary</KBD> instead of<KBDCLASS="command">primary</KBD>:</P><BLOCKQUOTECLASS="screen"><PRECLASS="screen">check-names secondary ignore</PRE></BLOCKQUOTE><PCLASS="para">For version 8, use <KBDCLASS="command">slave</KBD> instead of<KBDCLASS="command">secondary</KBD>:</P><BLOCKQUOTECLASS="screen"><PRECLASS="screen">options {        check-names slave ignore;};</PRE></BLOCKQUOTE><PCLASS="para">And if the names came in responses to queries, and not in zonetransfers, specify <KBDCLASS="command">response</KBD> instead:</P><BLOCKQUOTECLASS="screen"><PRECLASS="screen">check-names response ignore</PRE></BLOCKQUOTE><PCLASS="para">For version 8:</P><BLOCKQUOTECLASS="screen"><PRECLASS="screen">options {        check-names response ignore;};</PRE></BLOCKQUOTE><PCLASS="para">Here are the 4.9.4 defaults:</P><BLOCKQUOTECLASS="screen"><PRECLASS="screen">check-names primary failcheck-names secondary warncheck-names response ignore</PRE></BLOCKQUOTE><PCLASS="para">Here are the version 8 defaults:</P><BLOCKQUOTECLASS="screen"><PRECLASS="screen">options {        check-names master fail;        check-names slave warn;        check-names response ignore;};</PRE></BLOCKQUOTE><PCLASS="para">For version 8, the name checking can be specified on a per-zonebasis, in which case it overrides the options statement:</P><BLOCKQUOTECLASS="screen"><PRECLASS="screen">zone &quot;movie.edu&quot; in {        type master;        file &quot;db.movie&quot;;        check-names fail;};</PRE></BLOCKQUOTE><BLOCKQUOTECLASS="note"><PCLASS="para"><STRONG>NOTE:</STRONG> The <CODECLASS="literal">options</CODE> line contains 3 fields(<CODECLASS="literal">check-names master fail</CODE>), whereas the zone linecheck contains only 2 fields (<CODECLASS="literal">check-names fail</CODE>).This is because the <CODECLASS="literal">zone</CODE> line alreadyspecifies the type (<CODECLASS="literal">type master</CODE>).</P></BLOCKQUOTE></DIV><DIVCLASS="htmlnav"><P></P><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch04_04.htm"TITLE="4.4 Abbreviations"><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 4.4 Abbreviations"BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="book"HREF="index.htm"TITLE="DNS &amp; BIND"><IMGSRC="../gifs/txthome.gif"ALT="DNS &amp; BIND"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch04_06.htm"TITLE="4.6 Tools"><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 4.6 Tools"BORDER="0"></A></TD></TR><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172">4.4 Abbreviations</TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="index"HREF="index/idx_0.htm"TITLE="Book Index"><IMGSRC="../gifs/index.gif"ALT="Book Index"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172">4.6 Tools</TD></TR></TABLE><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><PCLASS="nav"><FONTSIZE="-1">[ <AHREF="../index.htm"TITLE="The Networking CD Bookshelf">Library Home</A> | <AHREF="index.htm"TITLE="DNS &amp; BIND">DNS &amp; BIND</A> | <AHREF="../tcpip/index.htm"TITLE="TCP/IP Network Administration">TCP/IP</A> | <AHREF="../sendmail/index.htm"TITLE="sendmail">sendmail</A> | <AHREF="../smdref/index.htm"TITLE="sendmail Desktop Reference">sendmail Reference</A> | <AHREF="../firewall/index.htm"TITLE="Building Internet Firewalls">Firewalls</A> | <AHREF="../puis/index.htm"TITLE="Practical UNIX &amp; Internet Security">Practical Security</A> ]</FONT></P></DIV></BODY></HTML>