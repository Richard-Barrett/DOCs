<HTML><HEAD><TITLE>[Chapter 8] 8.3 Registering Name Servers</TITLE><METANAME="DC.title"CONTENT="DNS &amp; BIND"><METANAME="DC.creator"CONTENT="Cricket Liu &amp; Paul Albitz"><METANAME="DC.publisher"CONTENT="O'Reilly &amp; Associates, Inc."><METANAME="DC.date"CONTENT="1999-01-06T18:33:35Z"><METANAME="DC.type"CONTENT="Text.Monograph"><METANAME="DC.format"CONTENT="text/html"SCHEME="MIME"><METANAME="DC.source"CONTENT="1-56592-512-2"SCHEME="ISBN"><METANAME="DC.language"CONTENT="en-US"><METANAME="generator"CONTENT="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><LINKREV="made"HREF="mailto:online-books@oreilly.com"TITLE="Online Books Comments"><LINKREL="up"HREF="ch08_01.htm"TITLE="8. Growing Your Domain"><LINKREL="prev"HREF="ch08_02.htm"TITLE="8.2 Adding More Name Servers"><LINKREL="next"HREF="ch08_04.htm"TITLE="8.4 Changing TTLs"></HEAD><BODYBGCOLOR="#FFFFFF"TEXT="#000000"><DIVCLASS="htmlnav"><H1><IMGSRC="gifs/smbanner.gif"ALT="DNS &amp; BIND"USEMAP="#srchmap"BORDER="0"></H1><MAPNAME="srchmap"><AREASHAPE="RECT"COORDS="0,0,466,65"HREF="index.htm"ALT="DNS &amp; BIND"><AREASHAPE="RECT"COORDS="467,0,514,18"HREF="../search/dsrch.htm"ALT="Search this book"></MAP><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch08_02.htm"TITLE="8.2 Adding More Name Servers"><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 8.2 Adding More Name Servers"BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><B><FONTFACE="ARIEL,HELVETICA,HELV,SANSERIF"SIZE="-1">Chapter 8<BR>Growing Your Domain</FONT></B></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch08_04.htm"TITLE="8.4 Changing TTLs"><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 8.4 Changing TTLs"BORDER="0"></A></TD></TR></TABLE>&nbsp;<HRALIGN="LEFT"WIDTH="515"TITLE="footer"></DIV><DIVCLASS="SECT1"><H2CLASS="sect1"><ACLASS="title"NAME="AUTOID-8784">8.3 Registering Name Servers</A></H2><PCLASS="para"><ACLASS="indexterm"NAME="DNS3-IDX-8-NAME-SERVERS-REGISTERING"></A><ACLASS="indexterm"NAME="DNS3-IDX-8-REGISTERING-NAME-SERVERS"></A>When you get around to setting up more and more name servers, aquestion may strike you&nbsp;- must I register <EMCLASS="emphasis">all</EM>of my primary and slave name servers with my parent zone? No, onlythose servers you want to make available to servers outside of yourzone need to be registered with the parent. For instance, if you runnine name servers for your zone, you may choose to tell the parentzone about only four of them. Within your zone, all nine servers areused. Five of those nine servers, however, are only queried byresolvers on hosts that are configured to query them (in<ICLASS="filename">resolv.conf</I>, for example). Their parent nameservers will never delegate to them, since they're not registered inthe domain name space. Only the four servers registered with yourparent zone are queried by other name servers, including caching-onlyand partial-slave name servers within your domain. This setup is shownin <ACLASS="xref"HREF="ch08_03.htm#DNS3-CHP-8-FIG-2"TITLE="Registering only some of your name servers">Figure 8.2</A>.</P><H4CLASS="figure"><ACLASS="title"NAME="DNS3-CHP-8-FIG-2">Figure 8.2: Registering only some of your name servers</A></H4><IMGCLASS="graphic"SRC="figs/dns3_0802.gif"ALT="Figure 8.2"><PCLASS="para">Besides being able to pick and choose which of your name serversare hammered by outside queries, there's a technical motivation forregistering only some of your zone's name servers: there is a limit tohow many servers will fit in a<ACLASS="indexterm"NAME="AUTOID-8800"></A><SPANCLASS="acronym">UDP</SPAN> response packet. In practice, around ten nameserver records should fit. Depending on the data (how many servers arein the same domain), you could get more or fewer.[9] There's not much point in registering more than tenservers, anyway&nbsp;- if none of the ten servers can be reached, it'sunlikely the destination host can be reached.</P><BLOCKQUOTECLASS="footnote"><PCLASS="para">[9] The domain names of the Internet's root name servers werechanged because of this. All of the roots were moved into the samedomain, <ICLASS="systemitem.sitename">root-servers.net</I>, totake the most advantage of domain name compression and store as manyroots as possible in a single <SPANCLASS="acronym">UDP</SPAN> packet.</P></BLOCKQUOTE><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-8809"></A>If you've set up a new authoritative name server, and you decide itshould be registered, make a list of the parents of the zones it'sauthoritative for. You'll need to contact the administrators for eachof these parent zones. For example, let's say we want to register thename server we set up on <ICLASS="systemitem.sitename">zardoz</I> above.  In order to get this slaveregistered in all the right zones, we'll need to contact theadministrators of <ICLASS="systemitem.sitename">edu</I> and<ICLASS="systemitem.sitename">in-addr.arpa</I>. (For helpdetermining who runs your parent zones, turn back to <ACLASS="xref"HREF="ch03_01.htm"TITLE="Where Do I Start?">Chapter 3, <CITECLASS="chapter">Where Do I Start?</CITE></A>)</P><PCLASS="para">When you contact the administrators of a parent zone, be sure tofill out the form they specify (if any) on their web site.  If there'sno standard form, give them the domain name of the zone the new nameserver is authoritative for. If the new name server is in the newzone, you'll also need to give them the <SPANCLASS="acronym">IP</SPAN>address(es) of the new name server. In fact, if there's no officialformat for submitting the information, it's often best just to sendyour parent the complete list of registered name servers for the zone,plus any addresses necessary, in data file format. That avoids anypotential confusion.</P><PCLASS="para">Since our networks were originally assigned by theInter<SPANCLASS="acronym">NIC</SPAN>, we submitted the form at <ACLASS="systemitem.url"HREF="http://www.arin.net/templates/inaddrtemplate.txt">http://www.arin.net/templates/inaddrtemplate.txt</A>to <ACLASS="email"HREF="mailto:hostmaster@arin.net"TITLE="hostmaster@arin.net">hostmaster@arin.net</A>, per their web site, to changeour registration.  If they hadn't had a template for us to use, ourmessage to the administrator of <ICLASS="systemitem.sitename">in-addr.arpa</I> might have read somethinglike this:</P><BLOCKQUOTECLASS="screen"><PRECLASS="screen">Howdy!I've just set up a new slave name server onzardoz.movie.edu for the 249.249.192.in-addr.arpaand 253.253.192.in-addr.arpa zones.  Would youplease add NS records for this name server to thein-addr.arpa zone?  That would make our delegationinformation look like:253.253.192.in-addr.arpa. 86400 IN NS terminator.movie.edu.253.253.192.in-addr.arpa. 86400 IN NS wormhole.movie.edu.253.253.192.in-addr.arpa. 86400 IN NS zardoz.movie.edu.249.249.192.in-addr.arpa. 86400 IN NS terminator.movie.edu.249.249.192.in-addr.arpa. 86400 IN NS wormhole.movie.edu.249.249.192.in-addr.arpa. 86400 IN NS zardoz.movie.edu.Thanks!Albert LeDomaineal@robocop.movie.edu</PRE></BLOCKQUOTE><PCLASS="para">Notice we specified explicit <SPANCLASS="acronym">TTL</SPAN>s on the<SPANCLASS="acronym">NS</SPAN> and A records? That's because our parent nameservers aren't authoritative for those records;<EMCLASS="emphasis">our</EM> name servers are. By including them, we'reindicating our choice of a <SPANCLASS="acronym">TTL</SPAN> for our zone'sdelegation. Of course, our parent may have other ideas about what the<SPANCLASS="acronym">TTL</SPAN> should be.</P><PCLASS="para">In this case, glue data&nbsp;- A records for each of the nameservers&nbsp;- aren't necessary, since the domain names of the nameservers aren't within the <ICLASS="systemitem.sitename">in-addr.arpa</I> zones. They're within<ICLASS="systemitem.sitename">movie.edu</I>, so a name serverthat was referred to <ICLASS="systemitem.sitename">terminator</I> or <ICLASS="systemitem.sitename">wormhole</I> could still find their addressesby following delegation to the <ICLASS="systemitem.sitename">movie.edu</I> name servers.</P><PCLASS="para">Is a partial-slave name server a good name server to registerwith your parent zone? Actually, it's not <EMCLASS="emphasis">ideal</EM>,because it's only authoritative for <EMCLASS="emphasis">some</EM> of your<ICLASS="systemitem.sitename">in-addr.arpa</I>zones. Administratively, it may be easier to register only serversbacking up <EMCLASS="emphasis">all</EM> the local zones; that way, youdon't need to keep track of which name servers are authoritative forwhich zones. All of your parent zones can delegate to the same set ofname servers: your primary and your <SPANCLASS="quote">"full"</SPAN> slaves.</P><PCLASS="para">If you don't have many name servers, though, or if you're goodat remembering which name servers are authoritative for what, go aheadand register a partial-slave.</P><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-8844"></A><ACLASS="indexterm"NAME="AUTOID-8847"></A>Caching-only name servers, on the other hand, must<EMCLASS="emphasis">never</EM> be registered. A caching-only name serverrarely has complete information for any given zone, just the bits andpieces of it that it has looked up recently. If a parent name serverwere mistakenly to refer a foreign name server to a caching-only nameserver, the foreign name server would send the caching-only nameserver a nonrecursive query.  The caching-only name server might havethe data cached, but then again, it might not. If it didn't have thedata, it would refer the querier to the best name servers it knew(those closest to the domain in the query)&nbsp;- which might includethe caching-only name server itself! The poor foreign name servermight never get an answer.  This kind ofmisconfiguration&nbsp;- actually, delegating a zone to any name servernot authoritative for that zone&nbsp;- is known as<ACLASS="indexterm"NAME="AUTOID-8851"></A><ACLASS="indexterm"NAME="AUTOID-8853"></A><ACLASS="indexterm"NAME="AUTOID-8856"></A><ICLASS="firstterm">lame delegation</I>.<ACLASS="indexterm"NAME="AUTOID-8861"></A><ACLASS="indexterm"NAME="AUTOID-8862"></A></P></DIV><DIVCLASS="htmlnav"><P></P><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch08_02.htm"TITLE="8.2 Adding More Name Servers"><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 8.2 Adding More Name Servers"BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="book"HREF="index.htm"TITLE="DNS &amp; BIND"><IMGSRC="../gifs/txthome.gif"ALT="DNS &amp; BIND"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch08_04.htm"TITLE="8.4 Changing TTLs"><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 8.4 Changing TTLs"BORDER="0"></A></TD></TR><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172">8.2 Adding More Name Servers</TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="index"HREF="index/idx_0.htm"TITLE="Book Index"><IMGSRC="../gifs/index.gif"ALT="Book Index"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172">8.4 Changing TTLs</TD></TR></TABLE><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><PCLASS="nav"><FONTSIZE="-1">[ <AHREF="../index.htm"TITLE="The Networking CD Bookshelf">Library Home</A> | <AHREF="index.htm"TITLE="DNS &amp; BIND">DNS &amp; BIND</A> | <AHREF="../tcpip/index.htm"TITLE="TCP/IP Network Administration">TCP/IP</A> | <AHREF="../sendmail/index.htm"TITLE="sendmail">sendmail</A> | <AHREF="../smdref/index.htm"TITLE="sendmail Desktop Reference">sendmail Reference</A> | <AHREF="../firewall/index.htm"TITLE="Building Internet Firewalls">Firewalls</A> | <AHREF="../puis/index.htm"TITLE="Practical UNIX &amp; Internet Security">Practical Security</A> ]</FONT></P></DIV></BODY></HTML>