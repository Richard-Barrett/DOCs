<HTML><HEAD><TITLE>[Chapter 10] Advanced Features and Security</TITLE><METANAME="DC.title"CONTENT="DNS &amp; BIND"><METANAME="DC.creator"CONTENT="Cricket Liu &amp; Paul Albitz"><METANAME="DC.publisher"CONTENT="O'Reilly &amp; Associates, Inc."><METANAME="DC.date"CONTENT="1999-01-06T18:35:39Z"><METANAME="DC.type"CONTENT="Text.Monograph"><METANAME="DC.format"CONTENT="text/html"SCHEME="MIME"><METANAME="DC.source"CONTENT="1-56592-512-2"SCHEME="ISBN"><METANAME="DC.language"CONTENT="en-US"><METANAME="generator"CONTENT="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><LINKREV="made"HREF="mailto:online-books@oreilly.com"TITLE="Online Books Comments"><LINKREL="up"HREF="index.htm"TITLE="DNS &amp; BIND"><LINKREL="prev"HREF="ch09_08.htm"TITLE="9.8 The Life of a Parent"><LINKREL="next"HREF="ch10_02.htm"TITLE="10.2 DNS NOTIFY (Zone Change Notification)"></HEAD><BODYBGCOLOR="#FFFFFF"TEXT="#000000"><DIVCLASS="htmlnav"><H1><IMGSRC="gifs/smbanner.gif"ALT="DNS &amp; BIND"USEMAP="#srchmap"BORDER="0"></H1><MAPNAME="srchmap"><AREASHAPE="RECT"COORDS="0,0,466,65"HREF="index.htm"ALT="DNS &amp; BIND"><AREASHAPE="RECT"COORDS="467,0,514,18"HREF="../search/dsrch.htm"ALT="Search this book"></MAP><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch09_08.htm"TITLE="9.8 The Life of a Parent"><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 9.8 The Life of a Parent"BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><B><FONTFACE="ARIEL,HELVETICA,HELV,SANSERIF"SIZE="-1">Chapter 10</FONT></B></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch10_02.htm"TITLE="10.2 DNS NOTIFY (Zone Change Notification)"><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 10.2 DNS NOTIFY (Zone Change Notification)"BORDER="0"></A></TD></TR></TABLE>&nbsp;<HRALIGN="LEFT"WIDTH="515"TITLE="footer"></DIV><DIVCLASS="CHAPTER"><H1CLASS="chapter"><ACLASS="title"NAME="DNS3-CHP-10">10. Advanced Features and Security</A></H1><DIVCLASS="htmltoc"><P><B>Contents:</B><BR><ACLASS="sect1"HREF="#AUTOID-10266"TITLE="10.1 Address Match Lists and ACLs">Address Match Lists and <SPANCLASS="acronym">ACL</SPAN>s</A><BR><ACLASS="sect1"HREF="ch10_02.htm"TITLE="10.2 DNS NOTIFY (Zone Change Notification)"><SPANCLASS="acronym">DNS</SPAN> <SPANCLASS="acronym">NOTIFY</SPAN> (Zone ChangeNotification)</A><BR><ACLASS="sect1"HREF="ch10_03.htm"TITLE="10.3 DNS Dynamic Update"><SPANCLASS="acronym">DNS</SPAN> Dynamic Update</A><BR><ACLASS="sect1"HREF="ch10_04.htm"TITLE="10.4 System Tuning">System Tuning</A><BR><ACLASS="sect1"HREF="ch10_05.htm"TITLE="10.5 Name Server Address Sorting">Name Server Address Sorting</A><BR><ACLASS="sect1"HREF="ch10_06.htm"TITLE="10.6 Preferring Name Servers on Certain Networks">Preferring Name Servers on Certain Networks</A><BR><ACLASS="sect1"HREF="ch10_07.htm"TITLE="10.7 Building Up a Large Site-wide Cache with Forwarders">Building Up a Large Site-wide Cache with Forwarders</A><BR><ACLASS="sect1"HREF="ch10_08.htm"TITLE="10.8 A More Restricted Name Server">A More Restricted Name Server</A><BR><ACLASS="sect1"HREF="ch10_09.htm"TITLE="10.9 A Nonrecursive Name Server">A Nonrecursive Name Server</A><BR><ACLASS="sect1"HREF="ch10_10.htm"TITLE="10.10 Avoiding a Bogus Name Server">Avoiding a Bogus Name Server</A><BR><ACLASS="sect1"HREF="ch10_11.htm"TITLE="10.11 Securing Your Name Server">Securing Your Name Server</A><BR><ACLASS="sect1"HREF="ch10_12.htm"TITLE="10.12 Load Sharing Between Mirrored Servers">Load Sharing Between Mirrored Servers</A></P><P></P></DIV><DIVCLASS="epigraph"><PCLASS="para"ALIGN="right"><I><SPANCLASS="quote">"What's the use of their having names,"</SPAN> the Gnatsaid, <SPANCLASS="quote">"if they won't answer to them?"</SPAN></I></P></DIV><PCLASS="para">The latest <SPANCLASS="acronym">BIND</SPAN> name server, version 8.1.2,has <EMCLASS="emphasis">lots</EM> of new features. Two of the mostprominent introductions are support for asynchronous zone changenotification (<SPANCLASS="acronym">DNS</SPAN> <SPANCLASS="acronym">NOTIFY</SPAN>) and<SPANCLASS="acronym">DNS</SPAN> Dynamic Update.  Of the rest, the mostimportant are related to security: they'll let you tell your nameserver whom to answer queries from, whom to offer zone transfers to,and whom to permit dynamic updates from. Many of the security featuresaren't necessary inside a corporate network, but the other mechanismswill help out the administrators of any name servers.</P><PCLASS="para">In this chapter, we'll cover these features and suggest how theymight come in handy in your <SPANCLASS="acronym">DNS</SPAN> infrastructure.(We do save some of the hard-core firewall material 'til the lastchapter, though.)</P><DIVCLASS="sect1"><H2CLASS="sect1"><ACLASS="title"NAME="AUTOID-10266">10.1 Address Match Lists and <SPANCLASS="acronym">ACL</SPAN>s</A></H2><PCLASS="para"><ACLASS="indexterm"NAME="CH10.ADDRESS"></A>Before we introduce many of the new features, however, we'dbetter cover address match lists.  <SPANCLASS="acronym">BIND</SPAN> 8 usesaddress match lists for nearly every security feature, and for somefeatures that aren't security-related at all.</P><PCLASS="para">An address match list is a list (what else?)  of terms thatspecify one or more <SPANCLASS="acronym">IP</SPAN> addresses.  The elements inthe list can be individual <SPANCLASS="acronym">IP</SPAN> addresses,<SPANCLASS="acronym">IP</SPAN> prefixes, or a named access control list.  An<SPANCLASS="acronym">IP</SPAN> prefix has the format:</P><BLOCKQUOTECLASS="screen"><PRECLASS="screen">network in dotted-octet format/bits in netmask</PRE></BLOCKQUOTE><PCLASS="para">For example, the network 15.0.0.0, with the network mask255.0.0.0 (eight contiguous ones), would be written 15/8.Traditionally, this would have been thought of as the <SPANCLASS="quote">"classA"</SPAN> network 15.  The network consisting of <SPANCLASS="acronym">IP</SPAN>addresses 192.168.1.192 through 192.168.1.255, on the other hand,would be written 192.168.1.192/26 (network 192.168.1.192 with thenetmask 255.255.255.192, which has 26 contiguous ones).</P><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-10284"></A><ACLASS="indexterm"NAME="AUTOID-10286"></A>A named <SPANCLASS="acronym">ACL</SPAN> must have been previously definedwith an <ICLASS="function">acl</I> statement.  The<ICLASS="function">acl</I> statement has a simple structure:</P><BLOCKQUOTECLASS="screen"><PRECLASS="screen">acl &quot;name&quot; {                { address_match list; };};</PRE></BLOCKQUOTE><PCLASS="para">Any time you're going to use one or more terms in a few accesslists, it's a good idea to use an <ICLASS="structfield">acl</I>statement to associate them with a name.  You can then refer to thename in the address match list.  For example, let's call 15/8 what itis: <SPANCLASS="acronym">HP-NET</SPAN>.  And we'll call192.168.1.192/26 <SPANCLASS="quote">"internal"</SPAN>:</P><BLOCKQUOTECLASS="screen"><PRECLASS="screen">acl &quot;HP-NET&quot; {                { 15/8; };};acl &quot;internal&quot; {                { 192.168.1.192/26; };};</PRE></BLOCKQUOTE><PCLASS="para">Now we can refer to these <SPANCLASS="acronym">ACL</SPAN>s by name inaddress match lists.</P><PCLASS="para">There are also four predefined access lists:</P><DLCLASS="variablelist"><DTCLASS="term">None</DT><DDCLASS="listitem"><PCLASS="para">No <SPANCLASS="acronym">IP</SPAN> addresses</P></DD><DTCLASS="term">Any</DT><DDCLASS="listitem"><PCLASS="para">All <SPANCLASS="acronym">IP</SPAN> addresses</P></DD><DTCLASS="term">Localhost</DT><DDCLASS="listitem"><PCLASS="para">Any of the local host's <SPANCLASS="acronym">IP</SPAN> addresses</P></DD><DTCLASS="term">Localnets</DT><DDCLASS="listitem"><PCLASS="para">Any of the networks the local host has a network interface on(found by using each network interface's <SPANCLASS="acronym">IP</SPAN> addressand using the netmask to mask off the host bits in theaddress)</P></DD></DL><ACLASS="indexterm"NAME="AUTOID-10321"></A></DIV></DIV><DIVCLASS="htmlnav"><P></P><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch09_08.htm"TITLE="9.8 The Life of a Parent"><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 9.8 The Life of a Parent"BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="book"HREF="index.htm"TITLE="DNS &amp; BIND"><IMGSRC="../gifs/txthome.gif"ALT="DNS &amp; BIND"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch10_02.htm"TITLE="10.2 DNS NOTIFY (Zone Change Notification)"><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 10.2 DNS NOTIFY (Zone Change Notification)"BORDER="0"></A></TD></TR><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172">9.8 The Life of a Parent</TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="index"HREF="index/idx_0.htm"TITLE="Book Index"><IMGSRC="../gifs/index.gif"ALT="Book Index"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172">10.2 DNS NOTIFY (Zone Change Notification)</TD></TR></TABLE><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><PCLASS="nav"><FONTSIZE="-1">[ <AHREF="../index.htm"TITLE="The Networking CD Bookshelf">Library Home</A> | <AHREF="index.htm"TITLE="DNS &amp; BIND">DNS &amp; BIND</A> | <AHREF="../tcpip/index.htm"TITLE="TCP/IP Network Administration">TCP/IP</A> | <AHREF="../sendmail/index.htm"TITLE="sendmail">sendmail</A> | <AHREF="../smdref/index.htm"TITLE="sendmail Desktop Reference">sendmail Reference</A> | <AHREF="../firewall/index.htm"TITLE="Building Internet Firewalls">Firewalls</A> | <AHREF="../puis/index.htm"TITLE="Practical UNIX &amp; Internet Security">Practical Security</A> ]</FONT></P></DIV></BODY></HTML>