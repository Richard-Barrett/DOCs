<HTML><HEAD><TITLE>[Chapter 10] 10.8 A More Restricted Name Server</TITLE><METANAME="DC.title"CONTENT="DNS &amp; BIND"><METANAME="DC.creator"CONTENT="Cricket Liu &amp; Paul Albitz"><METANAME="DC.publisher"CONTENT="O'Reilly &amp; Associates, Inc."><METANAME="DC.date"CONTENT="1999-01-06T18:36:30Z"><METANAME="DC.type"CONTENT="Text.Monograph"><METANAME="DC.format"CONTENT="text/html"SCHEME="MIME"><METANAME="DC.source"CONTENT="1-56592-512-2"SCHEME="ISBN"><METANAME="DC.language"CONTENT="en-US"><METANAME="generator"CONTENT="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><LINKREV="made"HREF="mailto:online-books@oreilly.com"TITLE="Online Books Comments"><LINKREL="up"HREF="ch10_01.htm"TITLE="10. Advanced Features and Security"><LINKREL="prev"HREF="ch10_07.htm"TITLE="10.7 Building Up a Large Site-wide Cache with Forwarders"><LINKREL="next"HREF="ch10_09.htm"TITLE="10.9 A Nonrecursive Name Server"></HEAD><BODYBGCOLOR="#FFFFFF"TEXT="#000000"><DIVCLASS="htmlnav"><H1><IMGSRC="gifs/smbanner.gif"ALT="DNS &amp; BIND"USEMAP="#srchmap"BORDER="0"></H1><MAPNAME="srchmap"><AREASHAPE="RECT"COORDS="0,0,466,65"HREF="index.htm"ALT="DNS &amp; BIND"><AREASHAPE="RECT"COORDS="467,0,514,18"HREF="../search/dsrch.htm"ALT="Search this book"></MAP><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch10_07.htm"TITLE="10.7 Building Up a Large Site-wide Cache with Forwarders"><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 10.7 Building Up a Large Site-wide Cache with Forwarders"BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><B><FONTFACE="ARIEL,HELVETICA,HELV,SANSERIF"SIZE="-1">Chapter 10<BR>Advanced Features and Security</FONT></B></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch10_09.htm"TITLE="10.9 A Nonrecursive Name Server"><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 10.9 A Nonrecursive Name Server"BORDER="0"></A></TD></TR></TABLE>&nbsp;<HRALIGN="LEFT"WIDTH="515"TITLE="footer"></DIV><DIVCLASS="SECT1"><H2CLASS="sect1"><ACLASS="title"NAME="AUTOID-11187">10.8 A More Restricted Name Server</A></H2><PCLASS="para"><ACLASS="indexterm"NAME="CH10.FORWARDONLY1"></A><ACLASS="indexterm"NAME="CH10.FORWARDONLY2"></A><ACLASS="indexterm"NAME="CH10.FORWARDONLY3"></A><ACLASS="indexterm"NAME="AUTOID-11197"></A><ACLASS="indexterm"NAME="AUTOID-11201"></A>You may want to restrict your name servers even further&nbsp;- stoppingthem from even <EMCLASS="emphasis">trying</EM> to contact an off-siteserver if their forwarder is down or doesn't respond. You can do thisby making the server a <ICLASS="firstterm">forward-only</I> server. (Aforward-only server is still a primary master, slave, or caching-onlyserver; don't get confused here. We call it a forward-only serverbecause calling it a primary master, slave, or caching-onlyforward-only server is just too long a name.) A<ICLASS="firstterm">forward-only</I> server is a variation on a serverthat uses <ICLASS="structfield">forwarders</I>.  It still answersqueries from its authoritative data and cache data.  However, itrelies <EMCLASS="emphasis">completely</EM> on its forwarders; it<EMCLASS="emphasis">doesn't</EM> try to contact other servers to find outinformation if the forwarders don't give it an answer.  Here is anexample of what a forward-only server's conf file wouldcontain:<ACLASS="indexterm"NAME="AUTOID-11211"></A></P><BLOCKQUOTECLASS="screen"><PRECLASS="screen">options {                forwarders { 192.249.249.1; 192.249.249.3; };                forward-only;};</PRE></BLOCKQUOTE><PCLASS="para">On a <SPANCLASS="acronym">BIND</SPAN> 4 name server, that would looklike:</P><BLOCKQUOTECLASS="screen"><PRECLASS="screen">forwarders 192.249.249.1 192.249.249.3options forward-only</PRE></BLOCKQUOTE><PCLASS="para"><SPANCLASS="acronym">BIND</SPAN> name servers before 4.9 provide the samefunctionality, using the <ICLASS="function">slave</I> directive insteadof the options <ICLASS="function">forward-only</I> directive:</P><BLOCKQUOTECLASS="screen"><PRECLASS="screen">forwarders 192.249.249.1 192.249.249.3slave</PRE></BLOCKQUOTE><PCLASS="para">Don't confuse this old use of the term <SPANCLASS="quote">"slave"</SPAN> withthe modern use.  <SPANCLASS="quote">"Slave"</SPAN> now means a name server thatgets the data that describes a zone from a master server via a zonetransfer.</P><PCLASS="para">You must have the <ICLASS="function">forwarders</I> line in the conf or boot file.  Itdoes not make sense to have only the forward-only line. If you docreate a forward-only name server, you might want to considerincluding the forwarders' <SPANCLASS="acronym">IP</SPAN> addresses more thanonce.  On a <SPANCLASS="acronym">BIND</SPAN> 8 server, that would looklike:</P><BLOCKQUOTECLASS="screen"><PRECLASS="screen">options {                forwarders { 192.249.249.1; 192.249.249.3;                        192.249.249.1; 192.249.249.3; };                forward-only;};</PRE></BLOCKQUOTE><PCLASS="para">On a <SPANCLASS="acronym">BIND</SPAN> 4 server, that's:</P><BLOCKQUOTECLASS="screen"><PRECLASS="screen">forwarders 192.249.249.1 192.249.249.3 192.249.249.1 192.249.249.3options forward-only</PRE></BLOCKQUOTE><PCLASS="para">The forward-only server contacts each forwarder only once, andit waits a short time for the forwarder to respond. Listing theforwarders multiple times directs the forward-only server to<EMCLASS="emphasis">retransmit</EM> queries to the forwarders, andincreases the overall length of time that the forward-only name serverwill wait for an answer from forwarders.</P><PCLASS="para">However, you must ask yourself if it <EMCLASS="emphasis">ever</EM>makes sense to use a forward-only server. A forward-only server iscompletely dependent on the forwarders. You can achieve much the sameconfiguration (and dependence) by not running a forward-only server atall; instead, create a <ICLASS="filename">resolv.conf</I> file thatcontains <ICLASS="structfield">nameserver</I> directives that pointto the forwarders you were using. Thus, you are still relying on theforwarders, but now your applications are querying the forwardersdirectly instead of having a forward-only name server query them forthe applications. You lose the local caching that the forward-onlyserver would have done, and the address sorting, but you reduce theoverall complexity of your site configuration by running fewer<SPANCLASS="quote">"restricted"</SPAN> name servers.</P><ACLASS="indexterm"NAME="AUTOID-11241"></A><ACLASS="indexterm"NAME="AUTOID-11242"></A><ACLASS="indexterm"NAME="AUTOID-11243"></A></DIV><DIVCLASS="htmlnav"><P></P><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch10_07.htm"TITLE="10.7 Building Up a Large Site-wide Cache with Forwarders"><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 10.7 Building Up a Large Site-wide Cache with Forwarders"BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="book"HREF="index.htm"TITLE="DNS &amp; BIND"><IMGSRC="../gifs/txthome.gif"ALT="DNS &amp; BIND"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch10_09.htm"TITLE="10.9 A Nonrecursive Name Server"><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 10.9 A Nonrecursive Name Server"BORDER="0"></A></TD></TR><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172">10.7 Building Up a Large Site-wide Cache with Forwarders</TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="index"HREF="index/idx_0.htm"TITLE="Book Index"><IMGSRC="../gifs/index.gif"ALT="Book Index"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172">10.9 A Nonrecursive Name Server</TD></TR></TABLE><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><PCLASS="nav"><FONTSIZE="-1">[ <AHREF="../index.htm"TITLE="The Networking CD Bookshelf">Library Home</A> | <AHREF="index.htm"TITLE="DNS &amp; BIND">DNS &amp; BIND</A> | <AHREF="../tcpip/index.htm"TITLE="TCP/IP Network Administration">TCP/IP</A> | <AHREF="../sendmail/index.htm"TITLE="sendmail">sendmail</A> | <AHREF="../smdref/index.htm"TITLE="sendmail Desktop Reference">sendmail Reference</A> | <AHREF="../firewall/index.htm"TITLE="Building Internet Firewalls">Firewalls</A> | <AHREF="../puis/index.htm"TITLE="Practical UNIX &amp; Internet Security">Practical Security</A> ]</FONT></P></DIV></BODY></HTML>