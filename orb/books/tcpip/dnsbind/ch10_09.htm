<HTML><HEAD><TITLE>[Chapter 10] 10.9 A Nonrecursive Name Server</TITLE><METANAME="DC.title"CONTENT="DNS &amp; BIND"><METANAME="DC.creator"CONTENT="Cricket Liu &amp; Paul Albitz"><METANAME="DC.publisher"CONTENT="O'Reilly &amp; Associates, Inc."><METANAME="DC.date"CONTENT="1999-01-06T18:36:33Z"><METANAME="DC.type"CONTENT="Text.Monograph"><METANAME="DC.format"CONTENT="text/html"SCHEME="MIME"><METANAME="DC.source"CONTENT="1-56592-512-2"SCHEME="ISBN"><METANAME="DC.language"CONTENT="en-US"><METANAME="generator"CONTENT="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><LINKREV="made"HREF="mailto:online-books@oreilly.com"TITLE="Online Books Comments"><LINKREL="up"HREF="ch10_01.htm"TITLE="10. Advanced Features and Security"><LINKREL="prev"HREF="ch10_08.htm"TITLE="10.8 A More Restricted Name Server"><LINKREL="next"HREF="ch10_10.htm"TITLE="10.10 Avoiding a Bogus Name Server"></HEAD><BODYBGCOLOR="#FFFFFF"TEXT="#000000"><DIVCLASS="htmlnav"><H1><IMGSRC="gifs/smbanner.gif"ALT="DNS &amp; BIND"USEMAP="#srchmap"BORDER="0"></H1><MAPNAME="srchmap"><AREASHAPE="RECT"COORDS="0,0,466,65"HREF="index.htm"ALT="DNS &amp; BIND"><AREASHAPE="RECT"COORDS="467,0,514,18"HREF="../search/dsrch.htm"ALT="Search this book"></MAP><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch10_08.htm"TITLE="10.8 A More Restricted Name Server"><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 10.8 A More Restricted Name Server"BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><B><FONTFACE="ARIEL,HELVETICA,HELV,SANSERIF"SIZE="-1">Chapter 10<BR>Advanced Features and Security</FONT></B></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch10_10.htm"TITLE="10.10 Avoiding a Bogus Name Server"><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 10.10 Avoiding a Bogus Name Server"BORDER="0"></A></TD></TR></TABLE>&nbsp;<HRALIGN="LEFT"WIDTH="515"TITLE="footer"></DIV><DIVCLASS="SECT1"><H2CLASS="sect1"><ACLASS="title"NAME="AUTOID-11244">10.9 A Nonrecursive Name Server</A></H2><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-11247"></A><ACLASS="indexterm"NAME="AUTOID-11249"></A>By default, <SPANCLASS="acronym">BIND</SPAN> resolvers send recursive queries,and <SPANCLASS="acronym">BIND</SPAN> name servers do the work required toanswer recursive queries. (If you don't remember how recursion works,look in <ACLASS="xref"HREF="ch02_01.htm"TITLE="How Does DNS Work?">Chapter 2, <CITECLASS="chapter">How Does <SPANCLASS="acronym">DNS</SPAN> Work?</CITE></A>.) In the process of finding theanswer to recursive queries, the name server builds up a cache ofnonauthoritative information about other domains.</P><PCLASS="para">In some circumstances, it is <EMCLASS="emphasis">undesirable</EM>for name servers to do the extra work required to answer a recursivequery or to build up a cache of data. The<ACLASS="indexterm"NAME="AUTOID-11257"></A><ACLASS="indexterm"NAME="AUTOID-11259"></A>root name servers are an example of one of these circumstances. Theroot name servers are so busy that they should not be spending theextra effort to recursively find the answer to a request. Instead,they send a response based only on the authoritative data they have.The response may contain the answer, but it is more likely that theresponse contains a referral to other name servers. And since the rootservers do not support recursive queries, they do not build up a cacheof nonauthoritative data, which is good because their cache would behuge.[2]</P><BLOCKQUOTECLASS="footnote"><PCLASS="para">[2] Note that a root name server wouldn't normally receive recursivequeries, unless a name server's administrator configured it to use aroot server as a forwarder, a host's administrator configured itsresolver to use the root server as a name server, or a user pointed<KBDCLASS="command">nslookup</KBD> at the root server.</P></BLOCKQUOTE><PCLASS="para">You can induce <SPANCLASS="acronym">BIND</SPAN> to run as a nonrecursivename server with the following conf file statement:<ACLASS="indexterm"NAME="AUTOID-11267"></A></P><BLOCKQUOTECLASS="screen"><PRECLASS="screen">options {                recursion no;};</PRE></BLOCKQUOTE><PCLASS="para">On a <SPANCLASS="acronym">BIND</SPAN> 4.9 server, that's thedirective:</P><BLOCKQUOTECLASS="screen"><PRECLASS="screen">options no-recursion<ACLASS="indexterm"NAME="AUTOID-11274"></A><ACLASS="indexterm"NAME="AUTOID-11276"></A></PRE></BLOCKQUOTE><PCLASS="para">Now the server will respond to recursive queries as though theywere nonrecursive.</P><PCLASS="para">In conjunction with <ICLASS="option">recursion no</I>, there isone more configuration option necessary if you want to stop yourserver from building a cache:<ACLASS="indexterm"NAME="AUTOID-11282"></A><ACLASS="indexterm"NAME="AUTOID-11284"></A></P><BLOCKQUOTECLASS="screen"><PRECLASS="screen">options {                fetch-glue no;};</PRE></BLOCKQUOTE><PCLASS="para">Or, on <SPANCLASS="acronym">BIND</SPAN> 4.9:</P><BLOCKQUOTECLASS="screen"><PRECLASS="screen">options no-fetch-glue<ACLASS="indexterm"NAME="AUTOID-11291"></A><ACLASS="indexterm"NAME="AUTOID-11293"></A></PRE></BLOCKQUOTE><PCLASS="para">This stops the server from fetching missing glue whenconstructing the <EMCLASS="emphasis">additional data</EM> section of aresponse.</P><PCLASS="para">If you choose to make one of your servers nonrecursive, do notlist this name server in any host's <ICLASS="filename">resolv.conf</I>file.  While you can make your name server nonrecursive, there is nocorresponding option to make your resolver work with a nonrecursivename server.[3]</P><BLOCKQUOTECLASS="footnote"><PCLASS="para">[3] In general. Clearly, programs designed to send nonrecursivequeries, or that can be configured to send nonrecursive queries, like<KBDCLASS="command">nslookup</KBD>, would still work.</P></BLOCKQUOTE><PCLASS="para">You can list a nonrecursive name server as one of the serversauthoritative for your zone data (i.e., you can tell a parent nameserver to refer queries about your zone to this server). This worksbecause name servers send nonrecursive queries betweenthemselves.</P><PCLASS="para">Do not list a nonrecursive name server as a<ICLASS="structfield">forwarder</I>.  When a name server is usinganother server as a forwarder, it sends the query to the forwarder asa recursive query instead of a nonrecursive query.</P></DIV><DIVCLASS="htmlnav"><P></P><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch10_08.htm"TITLE="10.8 A More Restricted Name Server"><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 10.8 A More Restricted Name Server"BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="book"HREF="index.htm"TITLE="DNS &amp; BIND"><IMGSRC="../gifs/txthome.gif"ALT="DNS &amp; BIND"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch10_10.htm"TITLE="10.10 Avoiding a Bogus Name Server"><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 10.10 Avoiding a Bogus Name Server"BORDER="0"></A></TD></TR><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172">10.8 A More Restricted Name Server</TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="index"HREF="index/idx_0.htm"TITLE="Book Index"><IMGSRC="../gifs/index.gif"ALT="Book Index"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172">10.10 Avoiding a Bogus Name Server</TD></TR></TABLE><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><PCLASS="nav"><FONTSIZE="-1">[ <AHREF="../index.htm"TITLE="The Networking CD Bookshelf">Library Home</A> | <AHREF="index.htm"TITLE="DNS &amp; BIND">DNS &amp; BIND</A> | <AHREF="../tcpip/index.htm"TITLE="TCP/IP Network Administration">TCP/IP</A> | <AHREF="../sendmail/index.htm"TITLE="sendmail">sendmail</A> | <AHREF="../smdref/index.htm"TITLE="sendmail Desktop Reference">sendmail Reference</A> | <AHREF="../firewall/index.htm"TITLE="Building Internet Firewalls">Firewalls</A> | <AHREF="../puis/index.htm"TITLE="Practical UNIX &amp; Internet Security">Practical Security</A> ]</FONT></P></DIV></BODY></HTML>