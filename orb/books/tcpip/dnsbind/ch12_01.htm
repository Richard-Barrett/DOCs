<HTML><HEAD><TITLE>[Chapter 12] Reading BIND Debugging Output</TITLE><METANAME="DC.title"CONTENT="DNS &amp; BIND"><METANAME="DC.creator"CONTENT="Cricket Liu &amp; Paul Albitz"><METANAME="DC.publisher"CONTENT="O'Reilly &amp; Associates, Inc."><METANAME="DC.date"CONTENT="1999-01-06T18:38:08Z"><METANAME="DC.type"CONTENT="Text.Monograph"><METANAME="DC.format"CONTENT="text/html"SCHEME="MIME"><METANAME="DC.source"CONTENT="1-56592-512-2"SCHEME="ISBN"><METANAME="DC.language"CONTENT="en-US"><METANAME="generator"CONTENT="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><LINKREV="made"HREF="mailto:online-books@oreilly.com"TITLE="Online Books Comments"><LINKREL="up"HREF="index.htm"TITLE="DNS &amp; BIND"><LINKREL="prev"HREF="ch11_08.htm"TITLE="11.8 Best of the Net"><LINKREL="next"HREF="ch12_02.htm"TITLE="12.2 Turning On Debugging"></HEAD><BODYBGCOLOR="#FFFFFF"TEXT="#000000"><DIVCLASS="htmlnav"><H1><IMGSRC="gifs/smbanner.gif"ALT="DNS &amp; BIND"USEMAP="#srchmap"BORDER="0"></H1><MAPNAME="srchmap"><AREASHAPE="RECT"COORDS="0,0,466,65"HREF="index.htm"ALT="DNS &amp; BIND"><AREASHAPE="RECT"COORDS="467,0,514,18"HREF="../search/dsrch.htm"ALT="Search this book"></MAP><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch11_08.htm"TITLE="11.8 Best of the Net"><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 11.8 Best of the Net"BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><B><FONTFACE="ARIEL,HELVETICA,HELV,SANSERIF"SIZE="-1">Chapter 12</FONT></B></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch12_02.htm"TITLE="12.2 Turning On Debugging"><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 12.2 Turning On Debugging"BORDER="0"></A></TD></TR></TABLE>&nbsp;<HRALIGN="LEFT"WIDTH="515"TITLE="footer"></DIV><DIVCLASS="CHAPTER"><H1CLASS="chapter"><ACLASS="title"NAME="DNS3-CHP-12">12. Reading <SPANCLASS="acronym">BIND</SPAN> Debugging Output</A></H1><DIVCLASS="htmltoc"><P><B>Contents:</B><BR><ACLASS="sect1"HREF="#AUTOID-12891"TITLE="12.1 Debugging Levels">Debugging Levels</A><BR><ACLASS="sect1"HREF="ch12_02.htm"TITLE="12.2 Turning On Debugging">Turning On Debugging</A><BR><ACLASS="sect1"HREF="ch12_03.htm"TITLE="12.3 Reading Debugging Output">Reading Debugging Output</A><BR><ACLASS="sect1"HREF="ch12_04.htm"TITLE="12.4 The Resolver Search Algorithm and Negative Caching">The Resolver Search Algorithm and Negative Caching</A><BR><ACLASS="sect1"HREF="ch12_05.htm"TITLE="12.5 Tools">Tools</A></P><P></P></DIV><DIVCLASS="epigraph"><PCLASS="para"ALIGN="right"><I><SPANCLASS="quote">"O Tiger-lily!"</SPAN> said Alice, addressing herself toone that was waving gracefully about in the wind, <SPANCLASS="quote">"I wish youcould talk!"</SPAN></I></P><PCLASS="para"ALIGN="right"><I><SPANCLASS="quote">"We can talk,"</SPAN> said the Tiger-lily, <SPANCLASS="quote">"whenthere's anybody worth talking to."</SPAN></I></P></DIV><PCLASS="para"><ACLASS="indexterm"NAME="DNS3-IDX-12-DEBUGGING"></A>One of the tools in your troubleshooting toolchest is the nameserver's debugging output. As long as your name server has beencompiled with <SPANCLASS="acronym">DEBUG</SPAN> defined, you can getquery-by-query reports of its internal operation. The messages you getare often quite cryptic; they were meant for someone who has thesource code to follow. We'll explain some of the debugging output inthis chapter. Our goal is to cover enough for you to follow what thename server is doing; we aren't trying to supply an exhaustivecompilation of debugging messages.</P><PCLASS="para">As you read through the explanations here, think back tomaterial covered in earlier chapters. Seeing this information again,in another context, should help you understand more fully how a nameserver works.</P><DIVCLASS="sect1"><H2CLASS="sect1"><ACLASS="title"NAME="AUTOID-12891">12.1 Debugging Levels</A></H2><PCLASS="para"><ACLASS="indexterm"NAME="DNS3-IDX-12-DEBUGGING-LEVELS-OF"></A><ACLASS="indexterm"NAME="DNS3-IDX-12-LEVELS-DEBUGGING"></A><ACLASS="indexterm"NAME="DNS3-IDX-12-PERFORMANCE-DEBUGGING-LEVELS"></A>The amount of information the name server provides depends on thedebugging level. The lower the debugging level, the less informationyou get.  Higher debugging levels give you more information, but they alsofill up your disk faster. After you've read a lot of debugging output,you'll develop a feel for how much information you'll need to solveany particular problem. Of course, if you can easily recreate theproblem, you can start at level 1 and increase the debugging leveluntil you have enough information. For the most basicproblem&nbsp;- why a name can't be looked up&nbsp;- level 1 will oftensuffice, so you should start there.</P><DIVCLASS="sect2"><H3CLASS="sect2"><ACLASS="title"NAME="AUTOID-12902">12.1.1 What Information Is at Each Level?</A></H3><PCLASS="para">Here is a list of the information that each debugging level willgive. The debugging information is cumulative; for example, level 2includes all level 1's debugging information. The data are dividedinto the following basic areas: starting up, updating the database,processing queries, and maintaining zones. We won't cover updating thename server's internal database&nbsp;- problems always occurelsewhere. However, <EMCLASS="emphasis">what</EM> the name server adds or deletes from itsinternal database can be a problem, as you'll see in <ACLASS="xref"HREF="ch13_01.htm"TITLE="Troubleshooting DNS and BIND">Chapter 13, <CITECLASS="chapter">Troubleshooting <SPANCLASS="acronym">DNS</SPAN> and<SPANCLASS="acronym">BIND</SPAN></CITE></A>.</P><DLCLASS="variablelist"><DTCLASS="term">Level 1</DT><DDCLASS="listitem"><PCLASS="para">The information at this level is necessarily brief.  Nameservers can process <EMCLASS="emphasis">lots</EM> of queries, which can create <EMCLASS="emphasis">lots</EM> ofdebugging output. Since the output is condensed, you can collect dataover long periods. Use this debugging level for basic startupinformation and for watching query transactions. You'll see someerrors logged at this level, including syntax errors and<SPANCLASS="acronym">DNS</SPAN> packet formatting errors. This level will alsoshow referrals.</P></DD><DTCLASS="term">Level 2</DT><DDCLASS="listitem"><PCLASS="para">Level 2 provides lots of useful stuff: it lists the<SPANCLASS="acronym">IP</SPAN> addresses of remote name servers that are usedduring a lookup, along with their round trip time values; it calls outbad responses; and it tags a response as to which type of query it isanswering, a <SPANCLASS="acronym">SYSTEM</SPAN> (sysquery) or a<SPANCLASS="acronym">USER</SPAN> query. When you are tracking down a problemwith a secondary server loading a zone, this level shows you the zonevalues&nbsp;- serial number, refresh time, retry time, expire time, andtime left&nbsp;- as the secondary checks if it is up-to-date with itsmaster.</P></DD><DTCLASS="term">Level 3</DT><DDCLASS="listitem"><PCLASS="para">Level 3 debugging becomes much more verbose because it generateslots of messages about updating the name server database.  Make sureyou have enough disk space if you are going to collect debuggingoutput at level 3 or above. At level 3, you'll also see: duplicatequeries called out, system queries generated (sysquery), the names ofthe remote name servers used during a lookup, and the number ofaddresses found for each server.</P></DD><DTCLASS="term">Level 4</DT><DDCLASS="listitem"><PCLASS="para">Use level 4 debugging when you want to see the query andresponse packets <EMCLASS="emphasis">received</EM> by the name server.  This level also showsthe credibility level for cached data.</P></DD><DTCLASS="term">Level 5</DT><DDCLASS="listitem"><PCLASS="para">There are a variety of messages at level 5, but none of them areparticularly useful for general debugging. This level includes someerror messages, for example, when a <KBDCLASS="command">malloc()</KBD> fails, and a message whenthe name server gives up on a query.</P></DD><DTCLASS="term">Level 6</DT><DDCLASS="listitem"><PCLASS="para">Level 6 shows you the response sent to the originalquery.</P></DD><DTCLASS="term">Level 7</DT><DDCLASS="listitem"><PCLASS="para">Level 7 shows you a few configuration and parsingmessages.</P></DD><DTCLASS="term">Level 8</DT><DDCLASS="listitem"><PCLASS="para">There is no significant debugging information at thislevel.</P></DD><DTCLASS="term">Level 9</DT><DDCLASS="listitem"><PCLASS="para">There is no significant debugging information at thislevel.</P></DD><DTCLASS="term">Level 10</DT><DDCLASS="listitem"><PCLASS="para">Use level 10 debugging when you want to see the query andresponse packets <EMCLASS="emphasis">sent</EM> by the name server. The format of these packetsis the same format used in level 4. You wouldn't use this level veryoften, since you can see the name server response packet with<KBDCLASS="command">nslookup</KBD>.</P></DD><DTCLASS="term">Level 11</DT><DDCLASS="listitem"><PCLASS="para">There are only a couple of debugging messages at this level, andthey are in seldom-traversed code.</P></DD></DL><PCLASS="para">With <SPANCLASS="acronym">BIND</SPAN> 8, you can configure the nameserver to print out the debug level with the debug message.  Just turnon the logging option <ICLASS="option">print-severity</I> as explained in<ACLASS="xref"HREF="ch07_05.htm"TITLE="BIND 8 Logging">Section 7.5, "<SPANCLASS="acronym">BIND</SPAN> 8 Logging"</A>.</P><PCLASS="para">Keep in mind that this <EMCLASS="emphasis">is</EM> debugginginformation&nbsp;- it was used by the authors of<SPANCLASS="acronym">BIND</SPAN> to debug the code, so it is not as readable asyou might like. You can use it, too, to figure out why the name serverisn't doing what you think it should be doing, or just to learn howthe name server operates&nbsp;- but don't expect nicely designed,carefully formatted output.<ACLASS="indexterm"NAME="AUTOID-12969"></A><ACLASS="indexterm"NAME="AUTOID-12970"></A><ACLASS="indexterm"NAME="AUTOID-12971"></A></P></DIV></DIV></DIV><DIVCLASS="htmlnav"><P></P><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch11_08.htm"TITLE="11.8 Best of the Net"><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 11.8 Best of the Net"BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="book"HREF="index.htm"TITLE="DNS &amp; BIND"><IMGSRC="../gifs/txthome.gif"ALT="DNS &amp; BIND"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch12_02.htm"TITLE="12.2 Turning On Debugging"><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 12.2 Turning On Debugging"BORDER="0"></A></TD></TR><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172">11.8 Best of the Net</TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="index"HREF="index/idx_0.htm"TITLE="Book Index"><IMGSRC="../gifs/index.gif"ALT="Book Index"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172">12.2 Turning On Debugging</TD></TR></TABLE><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><PCLASS="nav"><FONTSIZE="-1">[ <AHREF="../index.htm"TITLE="The Networking CD Bookshelf">Library Home</A> | <AHREF="index.htm"TITLE="DNS &amp; BIND">DNS &amp; BIND</A> | <AHREF="../tcpip/index.htm"TITLE="TCP/IP Network Administration">TCP/IP</A> | <AHREF="../sendmail/index.htm"TITLE="sendmail">sendmail</A> | <AHREF="../smdref/index.htm"TITLE="sendmail Desktop Reference">sendmail Reference</A> | <AHREF="../firewall/index.htm"TITLE="Building Internet Firewalls">Firewalls</A> | <AHREF="../puis/index.htm"TITLE="Practical UNIX &amp; Internet Security">Practical Security</A> ]</FONT></P></DIV></BODY></HTML>