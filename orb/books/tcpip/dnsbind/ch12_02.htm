<HTML><HEAD><TITLE>[Chapter 12] 12.2 Turning On Debugging</TITLE><METANAME="DC.title"CONTENT="DNS &amp; BIND"><METANAME="DC.creator"CONTENT="Cricket Liu &amp; Paul Albitz"><METANAME="DC.publisher"CONTENT="O'Reilly &amp; Associates, Inc."><METANAME="DC.date"CONTENT="1999-01-06T18:38:19Z"><METANAME="DC.type"CONTENT="Text.Monograph"><METANAME="DC.format"CONTENT="text/html"SCHEME="MIME"><METANAME="DC.source"CONTENT="1-56592-512-2"SCHEME="ISBN"><METANAME="DC.language"CONTENT="en-US"><METANAME="generator"CONTENT="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><LINKREV="made"HREF="mailto:online-books@oreilly.com"TITLE="Online Books Comments"><LINKREL="up"HREF="ch12_01.htm"TITLE="12. Reading BIND Debugging Output"><LINKREL="prev"HREF="ch12_01.htm"TITLE="12.1 Debugging Levels"><LINKREL="next"HREF="ch12_03.htm"TITLE="12.3 Reading Debugging Output"></HEAD><BODYBGCOLOR="#FFFFFF"TEXT="#000000"><DIVCLASS="htmlnav"><H1><IMGSRC="gifs/smbanner.gif"ALT="DNS &amp; BIND"USEMAP="#srchmap"BORDER="0"></H1><MAPNAME="srchmap"><AREASHAPE="RECT"COORDS="0,0,466,65"HREF="index.htm"ALT="DNS &amp; BIND"><AREASHAPE="RECT"COORDS="467,0,514,18"HREF="../search/dsrch.htm"ALT="Search this book"></MAP><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch12_01.htm"TITLE="12.1 Debugging Levels"><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 12.1 Debugging Levels"BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><B><FONTFACE="ARIEL,HELVETICA,HELV,SANSERIF"SIZE="-1">Chapter 12<BR>Reading <SPANCLASS="acronym">BIND</SPAN> Debugging Output</FONT></B></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch12_03.htm"TITLE="12.3 Reading Debugging Output"><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 12.3 Reading Debugging Output"BORDER="0"></A></TD></TR></TABLE>&nbsp;<HRALIGN="LEFT"WIDTH="515"TITLE="footer"></DIV><DIVCLASS="SECT1"><H2CLASS="sect1"><ACLASS="title"NAME="AUTOID-12972">12.2 Turning On Debugging</A></H2><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-12975"></A>Name server debugging can be started either from the command line orwith signals. If you need to see the startup information to diagnoseyour current problem, you'll have to use the command-line option. Ifyou want to start debugging on a name server that is already running,or if you want to turn off debugging, you'll have to use signals. Thename server writes its debugging output to<ACLASS="indexterm"NAME="AUTOID-12978"></A><ICLASS="filename">named.run</I>.  A <SPANCLASS="acronym">BIND</SPAN> 4 nameserver will create <ICLASS="filename">named.run</I> in<ICLASS="filename">/usr/tmp</I> (or <ICLASS="filename">/var/tmp</I>).  A<SPANCLASS="acronym">BIND</SPAN> 8 name server will create<ICLASS="filename">named.run</I> in the name server's currentdirectory.</P><DIVCLASS="sect2"><H3CLASS="sect2"><ACLASS="title"NAME="AUTOID-12987">12.2.1 Debugging Command-Line Option</A></H3><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-12990"></A>When troubleshooting, you sometimes need to see the sort list, knowwhich interface a file descriptor is bound to, or find out where inthe initialization stage the name server was when it exited (if thesyslog error message wasn't clear enough). To see this kind ofdebugging information, you'll have to start debugging with acommand-line option; by the time you send a signal, it will be toolate. The command-line option for debugging is <ICLASS="option">-dlevel</I>. When you use the command-line option to turn ondebugging, a <SPANCLASS="acronym">BIND</SPAN> 4 name server will not go intothe background as it does normally; you'll have to add the <SPANCLASS="quote">"&amp;"</SPAN> at the end of your command line to get your shell promptback. Here's how to start the name server at debugging level 1:</P><BLOCKQUOTECLASS="screen"><PRECLASS="screen"># <CODECLASS="userinput"><B>/etc/named -d 1 &amp;</B></CODE></PRE></BLOCKQUOTE></DIV><DIVCLASS="sect2"><H3CLASS="sect2"><ACLASS="title"NAME="AUTOID-12997">12.2.2 Changing the Debugging Level with Signals</A></H3><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-13000"></A><ACLASS="indexterm"NAME="AUTOID-13003"></A>If you don't need to see the name server initialization, start yourname server without the debugging command-line option. You can laterturn debugging on and off by sending the <SPANCLASS="acronym">USR</SPAN>1 and<SPANCLASS="acronym">USR</SPAN>2 signals to the name server process. The first<SPANCLASS="acronym">USR</SPAN>1 signal causes <KBDCLASS="command">named</KBD> tostart writing debugging output at level 1. Each subsequent<SPANCLASS="acronym">USR</SPAN>1 signal increases the debugging level by1. Send <SPANCLASS="acronym">USR</SPAN>2 to turn off debugging. Here, we setdebugging to level 3, then turn debugging off:</P><BLOCKQUOTECLASS="screen"><PRECLASS="screen"># <CODECLASS="userinput"><B>kill -USR1 `cat /etc/named.pid`</B></CODE>       <ICLASS="lineannotation">&nbsp;- Level 1</I># <CODECLASS="userinput"><B>kill -USR1 `cat /etc/named.pid`</B></CODE>       <ICLASS="lineannotation">&nbsp;- Level 2</I># <CODECLASS="userinput"><B>kill -USR1 `cat /etc/named.pid`</B></CODE>       <ICLASS="lineannotation">&nbsp;- Level 3</I># <CODECLASS="userinput"><B>kill -USR2 `cat /etc/named.pid`</B></CODE>       <ICLASS="lineannotation">&nbsp;- Off</I></PRE></BLOCKQUOTE><PCLASS="para">And, as you might expect, if you turn on debugging from thecommand line, you can still send <SPANCLASS="acronym">USR</SPAN>1 and<SPANCLASS="acronym">USR</SPAN>2 signals to the name server.</P></DIV></DIV><DIVCLASS="htmlnav"><P></P><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch12_01.htm"TITLE="12.1 Debugging Levels"><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 12.1 Debugging Levels"BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="book"HREF="index.htm"TITLE="DNS &amp; BIND"><IMGSRC="../gifs/txthome.gif"ALT="DNS &amp; BIND"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch12_03.htm"TITLE="12.3 Reading Debugging Output"><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 12.3 Reading Debugging Output"BORDER="0"></A></TD></TR><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172">12.1 Debugging Levels</TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="index"HREF="index/idx_0.htm"TITLE="Book Index"><IMGSRC="../gifs/index.gif"ALT="Book Index"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172">12.3 Reading Debugging Output</TD></TR></TABLE><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><PCLASS="nav"><FONTSIZE="-1">[ <AHREF="../index.htm"TITLE="The Networking CD Bookshelf">Library Home</A> | <AHREF="index.htm"TITLE="DNS &amp; BIND">DNS &amp; BIND</A> | <AHREF="../tcpip/index.htm"TITLE="TCP/IP Network Administration">TCP/IP</A> | <AHREF="../sendmail/index.htm"TITLE="sendmail">sendmail</A> | <AHREF="../smdref/index.htm"TITLE="sendmail Desktop Reference">sendmail Reference</A> | <AHREF="../firewall/index.htm"TITLE="Building Internet Firewalls">Firewalls</A> | <AHREF="../puis/index.htm"TITLE="Practical UNIX &amp; Internet Security">Practical Security</A> ]</FONT></P></DIV></BODY></HTML>