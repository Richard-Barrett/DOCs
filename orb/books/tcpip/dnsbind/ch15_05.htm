<HTML><HEAD><TITLE>[Chapter 15] 15.5 Dialup Connections</TITLE><METANAME="DC.title"CONTENT="DNS &amp; BIND"><METANAME="DC.creator"CONTENT="Cricket Liu &amp; Paul Albitz"><METANAME="DC.publisher"CONTENT="O'Reilly &amp; Associates, Inc."><METANAME="DC.date"CONTENT="1999-01-06T18:44:15Z"><METANAME="DC.type"CONTENT="Text.Monograph"><METANAME="DC.format"CONTENT="text/html"SCHEME="MIME"><METANAME="DC.source"CONTENT="1-56592-512-2"SCHEME="ISBN"><METANAME="DC.language"CONTENT="en-US"><METANAME="generator"CONTENT="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><LINKREV="made"HREF="mailto:online-books@oreilly.com"TITLE="Online Books Comments"><LINKREL="up"HREF="ch15_01.htm"TITLE="15. Miscellaneous"><LINKREL="prev"HREF="ch15_04.htm"TITLE="15.4 DNS and Internet Firewalls"><LINKREL="next"HREF="ch15_06.htm"TITLE="15.6 Network Names and Numbers"></HEAD><BODYBGCOLOR="#FFFFFF"TEXT="#000000"><DIVCLASS="htmlnav"><H1><IMGSRC="gifs/smbanner.gif"ALT="DNS &amp; BIND"USEMAP="#srchmap"BORDER="0"></H1><MAPNAME="srchmap"><AREASHAPE="RECT"COORDS="0,0,466,65"HREF="index.htm"ALT="DNS &amp; BIND"><AREASHAPE="RECT"COORDS="467,0,514,18"HREF="../search/dsrch.htm"ALT="Search this book"></MAP><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch15_04.htm"TITLE="15.4 DNS and Internet Firewalls"><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 15.4 DNS and Internet Firewalls"BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><B><FONTFACE="ARIEL,HELVETICA,HELV,SANSERIF"SIZE="-1">Chapter 15<BR>Miscellaneous</FONT></B></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch15_06.htm"TITLE="15.6 Network Names and Numbers"><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 15.6 Network Names and Numbers"BORDER="0"></A></TD></TR></TABLE>&nbsp;<HRALIGN="LEFT"WIDTH="515"TITLE="footer"></DIV><DIVCLASS="SECT1"><H2CLASS="sect1"><ACLASS="title"NAME="AUTOID-17332">15.5 Dialup Connections</A></H2><PCLASS="para"><ACLASS="indexterm"NAME="CH15.DIALUP1"></A><ACLASS="indexterm"NAME="CH15.DIALUP2"></A><ACLASS="indexterm"NAME="CH15.DIALUP3"></A><ACLASS="indexterm"NAME="CH15.DIALUP4"></A><ACLASS="indexterm"NAME="CH15.DIALUP5"></A>Another relatively recentdevelopment in networking that presents a challenge to <SPANCLASS="acronym">DNS</SPAN> is thedialup Internet connection. When the Internet was young, and <SPANCLASS="acronym">DNS</SPAN>was born, there was no such thing as a dialup connection. Withthe enormous explosion in the Internet's popularity, and the propagationof Internet service providers who offer dialup Internet connectivityto the masses, a whole new breed of problems with name service hasbeen introduced.</P><PCLASS="para">We'll separate dialup connectionsinto two categories: simple dialup, by which we mean a single computerthat connects to the Internet occasionally, when a user manuallyinitiates a connection, and dial-on-demand, which means one or morecomputers that connect to the Internet automatically whenever theygenerate traffic bound for the Internet. Often, the device thatmakes this dial-on-demand connectivity possible is a small dialuprouter with an analog modem or <SPANCLASS="acronym">ISDN</SPAN> interface, like an Ascend Pipeline25.</P><DIVCLASS="sect2"><H3CLASS="sect2"><ACLASS="title"NAME="AUTOID-17352">15.5.1 Simple Dialup</A></H3><PCLASS="para">The easiest way to dealwith<ACLASS="indexterm"NAME="AUTOID-17355"></A>simpledialup is to configure your dialup computer's resolver to use aname server provided by your Internet service provider (<SPANCLASS="acronym">ISP</SPAN>). Most<SPANCLASS="acronym">ISP</SPAN>s run name servers for their subscribers' use. If you're notsure whether your <SPANCLASS="acronym">ISP</SPAN> provides name servers for your use, or ifyou don't know what their <SPANCLASS="acronym">IP</SPAN> addresses are, check their web site,send them email, or give them a call.</P><PCLASS="para">Some operating systems,like Windows 95 and <SPANCLASS="acronym">NT</SPAN>, will let you define a set of name serversfor a particular dialup provider. So, for example, you can configureone set of name servers to use when you dial up Netcom, and anotherto use when you dial up your office. Unfortunately, defining nameservers for your <SPANCLASS="acronym">LAN</SPAN> connection under Windows 95 currently overridesall your precious dialup settings. See <ACLASS="xref"HREF="ch06_01.htm"TITLE="Configuring Hosts">Chapter 6, <CITECLASS="chapter">Configuring Hosts</CITE></A>,for details.</P><PCLASS="para">This configuration is usually adequatefor most casual dialup users. Name resolution will fail unlessthe dialup connection is up, but that's not likely to be a problem,since there's no use for Internet name service without Internetconnectivity. If you have special needs that aren't addressed bythis configuration, take a look at the recommendations in the dial-on-demand section.</P></DIV><DIVCLASS="sect2"><H3CLASS="sect2"><ACLASS="title"NAME="AUTOID-17366">15.5.2 Dial-on-Demand</A></H3><PCLASS="para">A more sophisticated dialupsolution is<ACLASS="indexterm"NAME="AUTOID-17369"></A>dial-on-demand.Dial-on-demand Internet connections often use dedicated hardware,like a small dialup router, to provide connectivity whenever it'sneeded. If you initiate a connection to the Internet from the &quot;remote&quot;end of a dial-on-demand router, bingo, it dials up another router onthe Internet and routes your packets across. If the connection isidle for more than a specified amount of time, the router dropsthe connection.</P><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-17372"></A>The challenge with <SPANCLASS="acronym">DNS</SPAN> is to keep a localname server from continuously bringing the demand dial connection upand down like a yo-yo. This could be costly for you, since you sometimespay a premium for connection setup with technologies like <SPANCLASS="acronym">ISDN</SPAN>.</P><PCLASS="para">The most important strategy for minimizing this off-net trafficis to configure your resolvers to use a minimal search list. Defaultsearch lists with resolvers based on <SPANCLASS="acronym">BIND</SPAN> 4.8.3 or earlier searchthe ancestors of your local domain, which can cause unnecessaryremote traffic. For instance, say your local domain is <EMCLASS="emphasis">tinyoffice.majorcorp.com</EM>,and you have a dial-on-demand connection to Majorcorp's enterprisenetwork. On your older (pre-4.9) hosts, your default search listis:</P><BLOCKQUOTECLASS="screen"><PRECLASS="screen">tinyoffice.majorcorp.commajorcorp.com</PRE></BLOCKQUOTE><PCLASS="para">A user typing <EMCLASS="emphasis">telnet foo.tinyoffice.majorcorp.com</EM> tolog in to the workstation next to him will inadvertently cause lookupsof:</P><BLOCKQUOTECLASS="screen"><PRECLASS="screen">foo.tinyoffice.majorcorp.com.tinyoffice.majorcorp.com andfoo.tinyoffice.majorcorp.com.majorcorp.com</PRE></BLOCKQUOTE><PCLASS="para">before the correct domain name, <EMCLASS="emphasis">foo.tinyoffice.majorcorp.com</EM>,is looked up. Since your local name server is probably authoritativefor <EMCLASS="emphasis">tinyoffice.majorcorp.com</EM>, it can tell thatthe first domain name, <EMCLASS="emphasis">foo.tinyoffice.majorcorp.com.tinyoffice.majorcorp.com</EM>,is bogus. (It ends in <EMCLASS="emphasis">com.tinyoffice.majorcorp.com</EM>,so it would require the existence of a <EMCLASS="emphasis">com</EM> subdomainof your local domain, and there isn't one.) But it can't tell aboutthe second domain name without talking to a <EMCLASS="emphasis">majorcorp.com</EM> nameserver first. If there isn't one locally, it'll have to bring upthat dial-on-demand connection.</P><PCLASS="para">The easiest way to preventthese unnecessary queries is to trim the parent domain out of yoursearch list explicitly, using the <EMCLASS="emphasis">search</EM> directive.Or, if you can, upgrade your resolver to <SPANCLASS="acronym">BIND</SPAN> 4.9 or later, whichwill check the domain name as is first if it has at least <EMCLASS="emphasis">ndots</EM> dotsin it, and which doesn't put any ancestor domains into the searchlist by default.</P><PCLASS="para">If your name server continues to bringup the link, try turning on query logging (with <EMCLASS="emphasis">optionsquery-log</EM> on a 4.9 name server, or <EMCLASS="emphasis">ndc query</EM> witha <SPANCLASS="acronym">BIND</SPAN> 4.9 or 8 name server, or by turning on debugging on an oldername server) and look for the domain names that bring up the link.If many of them are in your parent zone, you might consider configuringyour local name server as a slave for your parent zone. At leastthat way you'll only bring up the link at most once per refreshinterval to resolve names in your parent zone. The same logic couldbe applied to nearly any zone your local name server queries often.</P></DIV><ACLASS="indexterm"NAME="AUTOID-17399"></A><ACLASS="indexterm"NAME="AUTOID-17400"></A><ACLASS="indexterm"NAME="AUTOID-17401"></A><ACLASS="indexterm"NAME="AUTOID-17402"></A><ACLASS="indexterm"NAME="AUTOID-17403"></A></DIV><DIVCLASS="htmlnav"><P></P><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch15_04.htm"TITLE="15.4 DNS and Internet Firewalls"><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 15.4 DNS and Internet Firewalls"BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="book"HREF="index.htm"TITLE="DNS &amp; BIND"><IMGSRC="../gifs/txthome.gif"ALT="DNS &amp; BIND"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch15_06.htm"TITLE="15.6 Network Names and Numbers"><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 15.6 Network Names and Numbers"BORDER="0"></A></TD></TR><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172">15.4 DNS and Internet Firewalls</TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="index"HREF="index/idx_0.htm"TITLE="Book Index"><IMGSRC="../gifs/index.gif"ALT="Book Index"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172">15.6 Network Names and Numbers</TD></TR></TABLE><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><PCLASS="nav"><FONTSIZE="-1">[ <AHREF="../index.htm"TITLE="The Networking CD Bookshelf">Library Home</A> | <AHREF="index.htm"TITLE="DNS &amp; BIND">DNS &amp; BIND</A> | <AHREF="../tcpip/index.htm"TITLE="TCP/IP Network Administration">TCP/IP</A> | <AHREF="../sendmail/index.htm"TITLE="sendmail">sendmail</A> | <AHREF="../smdref/index.htm"TITLE="sendmail Desktop Reference">sendmail Reference</A> | <AHREF="../firewall/index.htm"TITLE="Building Internet Firewalls">Firewalls</A> | <AHREF="../puis/index.htm"TITLE="Practical UNIX &amp; Internet Security">Practical Security</A> ]</FONT></P></DIV></BODY></HTML>