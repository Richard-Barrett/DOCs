<HTML><HEAD><TITLE>[Chapter 15] 15.9 DNS and WINS</TITLE><METANAME="DC.title"CONTENT="DNS &amp; BIND"><METANAME="DC.creator"CONTENT="Cricket Liu &amp; Paul Albitz"><METANAME="DC.publisher"CONTENT="O'Reilly &amp; Associates, Inc."><METANAME="DC.date"CONTENT="1999-01-06T18:44:48Z"><METANAME="DC.type"CONTENT="Text.Monograph"><METANAME="DC.format"CONTENT="text/html"SCHEME="MIME"><METANAME="DC.source"CONTENT="1-56592-512-2"SCHEME="ISBN"><METANAME="DC.language"CONTENT="en-US"><METANAME="generator"CONTENT="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><LINKREV="made"HREF="mailto:online-books@oreilly.com"TITLE="Online Books Comments"><LINKREL="up"HREF="ch15_01.htm"TITLE="15. Miscellaneous"><LINKREL="prev"HREF="ch15_08.htm"TITLE="15.8 DNS Versus X.500"><LINKREL="next"HREF="appa_01.htm"TITLE="A. DNS Message Format and Resource Records"></HEAD><BODYBGCOLOR="#FFFFFF"TEXT="#000000"><DIVCLASS="htmlnav"><H1><IMGSRC="gifs/smbanner.gif"ALT="DNS &amp; BIND"USEMAP="#srchmap"BORDER="0"></H1><MAPNAME="srchmap"><AREASHAPE="RECT"COORDS="0,0,466,65"HREF="index.htm"ALT="DNS &amp; BIND"><AREASHAPE="RECT"COORDS="467,0,514,18"HREF="../search/dsrch.htm"ALT="Search this book"></MAP><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch15_08.htm"TITLE="15.8 DNS Versus X.500"><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 15.8 DNS Versus X.500"BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><B><FONTFACE="ARIEL,HELVETICA,HELV,SANSERIF"SIZE="-1">Chapter 15<BR>Miscellaneous</FONT></B></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="APPENDIX"HREF="appa_01.htm"TITLE="A. DNS Message Format and Resource Records"><IMGSRC="../gifs/txtnexta.gif"ALT="Next: A. DNS Message Format and Resource Records"BORDER="0"></A></TD></TR></TABLE>&nbsp;<HRALIGN="LEFT"WIDTH="515"TITLE="footer"></DIV><DIVCLASS="SECT1"><H2CLASS="sect1"><ACLASS="title"NAME="AUTOID-17935">15.9 <SPANCLASS="acronym">DNS</SPAN> and <SPANCLASS="acronym">WINS</SPAN></A></H2><PCLASS="para"><ACLASS="indexterm"NAME="CH15.WINS1"></A><ACLASS="indexterm"NAME="CH15.WINS2"></A>In our firstedition, we mentioned the close alignment between Net<SPANCLASS="acronym">BIOS</SPAN> namesand <SPANCLASS="acronym">DNS</SPAN> domain names, but noted that, alas, there was no way for<SPANCLASS="acronym">DNS</SPAN> to function as a Net<SPANCLASS="acronym">BIOS</SPAN> name server. Basically, a <SPANCLASS="acronym">DNS</SPAN> nameserver would need to support dynamic updates to function as a Net<SPANCLASS="acronym">BIOS</SPAN>name server.</P><PCLASS="para">Of course, <SPANCLASS="acronym">BIND</SPAN> 8 supports dynamic updates. Unfortunately, Microsoft's <SPANCLASS="acronym">DHCP</SPAN> server doesn't yet send dynamicupdates to <SPANCLASS="acronym">DNS</SPAN> server.  It only talks to Microsoft's <SPANCLASS="acronym">WINS</SPAN> servers. <SPANCLASS="acronym">WINS</SPAN> servershandle dynamic updates, though only for Net<SPANCLASS="acronym">BIOS</SPAN> clients. In otherwords, a <SPANCLASS="acronym">WINS</SPAN> name server doesn't speak <SPANCLASS="acronym">DNS</SPAN>.</P><PCLASS="para">However,Microsoft provides a <SPANCLASS="acronym">DNS</SPAN> server in Windows <SPANCLASS="acronym">NT</SPAN> 4.0, which in turncan talk to <SPANCLASS="acronym">WINS</SPAN> servers. The Microsoft <SPANCLASS="acronym">DNS</SPAN> Server has a nice graphicaladministration tool, as you would expect from Microsoft, and providesa handy hook into <SPANCLASS="acronym">WINS</SPAN>: you can configure the server to query a<SPANCLASS="acronym">WINS</SPAN> server for address data if it doesn't find the data in a <SPANCLASS="acronym">DNS</SPAN>zone.</P><PCLASS="para">This is done with a new <EMCLASS="emphasis"><SPANCLASS="acronym">WINS</SPAN></EM> recordin the zone data file. The <SPANCLASS="acronym">WINS</SPAN> record is attached to the zone'sdomain name, like the <SPANCLASS="acronym">SOA</SPAN> record.  It acts as a flag, to tell theMicrosoft <SPANCLASS="acronym">DNS</SPAN> Server to query a <SPANCLASS="acronym">WINS</SPAN> server if it doesn't find anaddress for the name it's looking up. The record:</P><BLOCKQUOTECLASS="screen"><PRECLASS="screen">@        0       IN     WINS            192.249.249.39 192.253.253.39</PRE></BLOCKQUOTE><PCLASS="para">tells the Microsoft <SPANCLASS="acronym">DNS</SPAN> Server to query the <SPANCLASS="acronym">WINS</SPAN>servers running at 192.249.249.39 and 192.253.253.39 (in that order)for the name.  The zero <SPANCLASS="acronym">TTL</SPAN> is a precaution against the record beinglooked up and cached.</P><PCLASS="para">There's also a companion <SPANCLASS="acronym">WINS</SPAN>-Rrecord that allows a Microsoft <SPANCLASS="acronym">DNS</SPAN> Server to reverse map <SPANCLASS="acronym">IP</SPAN> addressesusing a Net<SPANCLASS="acronym">BIOS</SPAN> <SPANCLASS="acronym">NBSTAT</SPAN> request.  If the data file for an <EMCLASS="emphasis">in-addr.arpa</EM> zonecontains a <SPANCLASS="acronym">WINS</SPAN>-R record, like:</P><BLOCKQUOTECLASS="screen"><PRECLASS="screen">@        0      IN      WINS-R          movie.edu</PRE></BLOCKQUOTE><PCLASS="para">and the <SPANCLASS="acronym">IP</SPAN> address sought doesn't appear in the file,the name server will attempt to send a Net<SPANCLASS="acronym">BIOS</SPAN> <SPANCLASS="acronym">NBSTAT</SPAN> request tothe <SPANCLASS="acronym">IP</SPAN> address being reverse mapped.  This amounts to calling aphone number and asking the person on the end, &quot;What's your name?&quot; The result has a dot and the domain name in the record-specificdata appended, in this case &quot;.movie.edu&quot;.</P><PCLASS="para">These recordsprovide valuable glue between the two name spaces. Unfortunately,the integration isn't perfect. As they say, the devil is in thedetails.</P><PCLASS="para">The main problem, as we see it, is that onlythe Microsoft <SPANCLASS="acronym">DNS</SPAN> Servers support <SPANCLASS="acronym">WINS</SPAN> and <SPANCLASS="acronym">WINS</SPAN>-R.[5] Therefore,if you want lookups in the <EMCLASS="emphasis">fx.movie.edu</EM> zoneto be tried on the Special Effects Department's <SPANCLASS="acronym">WINS</SPAN> server, thenall <EMCLASS="emphasis">fx.movie.edu</EM> name servers must be Microsoft<SPANCLASS="acronym">DNS</SPAN> Servers. Why? Imagine that the <SPANCLASS="acronym">DNS</SPAN> servers for <EMCLASS="emphasis">fx.movie.edu</EM> were mixed,some Microsoft <SPANCLASS="acronym">DNS</SPAN> Servers and some <SPANCLASS="acronym">BIND</SPAN>. If a remote <SPANCLASS="acronym">DNS</SPAN> serverneeded to look up a Net<SPANCLASS="acronym">BIOS</SPAN> name in <EMCLASS="emphasis">fx.movie.edu</EM>,it would choose which of the <EMCLASS="emphasis">fx.movie.edu</EM> <SPANCLASS="acronym">DNS</SPAN>servers to query according to round trip time. If the server ithappened to choose were a Microsoft <SPANCLASS="acronym">DNS</SPAN> Server, it would be ableto resolve the name to a dynamically assigned address. But if ithappened to choose a <SPANCLASS="acronym">BIND</SPAN> server, it wouldn't be able to resolvethe name.</P><BLOCKQUOTECLASS="footnote"><PCLASS="para">[5]  Anda few commercial products, like MetaInfo's Meta <SPANCLASS="acronym">IP</SPAN>/<SPANCLASS="acronym">DNS</SPAN>, which isa port of <SPANCLASS="acronym">BIND</SPAN> 8.1.1 with <SPANCLASS="acronym">WINS</SPAN> capabilities added on.  Stock <SPANCLASS="acronym">BIND</SPAN>,however, can't talk to <SPANCLASS="acronym">WINS</SPAN> servers.</P></BLOCKQUOTE><PCLASS="para">The best <SPANCLASS="acronym">DNS</SPAN>-<SPANCLASS="acronym">WINS</SPAN> configuration we've heardof so far puts all <SPANCLASS="acronym">WINS</SPAN>-mapped data in its own <SPANCLASS="acronym">DNS</SPAN> zone, say <EMCLASS="emphasis">mobile.movie.edu</EM>.All the name servers for <EMCLASS="emphasis">mobile.movie.edu</EM> areMicrosoft <SPANCLASS="acronym">DNS</SPAN> Servers, and the zone <EMCLASS="emphasis">mobile.movie.edu</EM> containsjust <SPANCLASS="acronym">SOA</SPAN> records, <SPANCLASS="acronym">NS</SPAN> records, and a <EMCLASS="emphasis"><SPANCLASS="acronym">WINS</SPAN></EM> recordpointing to the <SPANCLASS="acronym">WINS</SPAN> servers for <EMCLASS="emphasis">mobile.movie.edu</EM>.This way, there's no chance of inconsistent answers between authoritativeservers for the zone.</P><PCLASS="para">Another problem is that <SPANCLASS="acronym">WINS</SPAN> and<SPANCLASS="acronym">WINS</SPAN>-R are proprietary.  <SPANCLASS="acronym">BIND</SPAN> name servers don't understand them,and in fact a <SPANCLASS="acronym">BIND</SPAN> slave that transfers a <SPANCLASS="acronym">WINS</SPAN> record from a Microsoft<SPANCLASS="acronym">DNS</SPAN> Server primary master will fail to load the zone because <SPANCLASS="acronym">WINS</SPAN>is an unknown type.  (We discussed this, and how to work aroundit, in greater detail in <ACLASS="xref"HREF="ch13_01.htm"TITLE="Troubleshooting DNS and BIND">Chapter 13, <CITECLASS="chapter">Troubleshooting <SPANCLASS="acronym">DNS</SPAN> and<SPANCLASS="acronym">BIND</SPAN></CITE></A>.)</P><PCLASS="para">The answer to these problems isthe <SPANCLASS="acronym">DNS</SPAN> standard dynamic update functionality introduced in <SPANCLASS="acronym">BIND</SPAN>8, described in <ACLASS="xref"HREF="ch10_01.htm"TITLE="Advanced Features and Security">Chapter 10</A>.  Dynamicupdate will allow authorized addition, modification, and deletionof records in a <SPANCLASS="acronym">BIND</SPAN> name server, which in turn gives the folksat Microsoft the functionality they need to use <SPANCLASS="acronym">DNS</SPAN> as a name servicefor Net<SPANCLASS="acronym">BIOS</SPAN>. Microsoft has promised to do away with <SPANCLASS="acronym">WINS</SPAN> and usestandard <SPANCLASS="acronym">DNS</SPAN> dynamic update with Windows <SPANCLASS="acronym">NT</SPAN> 5.0.  Whether they make goodon their promise remains to be seen. We hope they do. It's hardenough to administer one naming service well.</P><ACLASS="indexterm"NAME="AUTOID-18056"></A><ACLASS="indexterm"NAME="AUTOID-18057"></A></DIV><DIVCLASS="htmlnav"><P></P><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch15_08.htm"TITLE="15.8 DNS Versus X.500"><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 15.8 DNS Versus X.500"BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="book"HREF="index.htm"TITLE="DNS &amp; BIND"><IMGSRC="../gifs/txthome.gif"ALT="DNS &amp; BIND"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="APPENDIX"HREF="appa_01.htm"TITLE="A. DNS Message Format and Resource Records"><IMGSRC="../gifs/txtnexta.gif"ALT="Next: A. DNS Message Format and Resource Records"BORDER="0"></A></TD></TR><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172">15.8 DNS Versus X.500</TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="index"HREF="index/idx_0.htm"TITLE="Book Index"><IMGSRC="../gifs/index.gif"ALT="Book Index"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172">A. DNS Message Format and Resource Records</TD></TR></TABLE><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><PCLASS="nav"><FONTSIZE="-1">[ <AHREF="../index.htm"TITLE="The Networking CD Bookshelf">Library Home</A> | <AHREF="index.htm"TITLE="DNS &amp; BIND">DNS &amp; BIND</A> | <AHREF="../tcpip/index.htm"TITLE="TCP/IP Network Administration">TCP/IP</A> | <AHREF="../sendmail/index.htm"TITLE="sendmail">sendmail</A> | <AHREF="../smdref/index.htm"TITLE="sendmail Desktop Reference">sendmail Reference</A> | <AHREF="../firewall/index.htm"TITLE="Building Internet Firewalls">Firewalls</A> | <AHREF="../puis/index.htm"TITLE="Practical UNIX &amp; Internet Security">Practical Security</A> ]</FONT></P></DIV></BODY></HTML>