<HTML><HEAD><TITLE>[Appendix C] C.3 TCP/IP Protocol Architecture</TITLE><METANAME="DC.title"CONTENT="Building Internet Firewalls"><METANAME="DC.creator"CONTENT="D. Brent Chapman &amp; Elizabeth D. Zwicky"><METANAME="DC.publisher"CONTENT="O'Reilly &amp; Associates, Inc."><METANAME="DC.date"CONTENT="1999-02-04T00:30:49Z"><METANAME="DC.type"CONTENT="Text.Monograph"><METANAME="DC.format"CONTENT="text/html"SCHEME="MIME"><METANAME="DC.source"CONTENT="1-56592-124-0"SCHEME="ISBN"><METANAME="DC.language"CONTENT="en-US"><METANAME="generator"CONTENT="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><LINKREV="made"HREF="mailto:online-books@oreilly.com"TITLE="Online Books Comments"><LINKREL="up"HREF="appc_01.htm"TITLE="C. TCP/IP Fundamentals"><LINKREL="prev"HREF="appc_02.htm"TITLE="C.2 A Data Communications Model"><LINKREL="next"HREF="appc_04.htm"TITLE="C.4 Network Access Layer"></HEAD><BODYBGCOLOR="#FFFFFF"TEXT="#000000"><DIVCLASS="htmlnav"><H1><IMGSRC="gifs/smbanner.gif"ALT="Building Internet Firewalls"USEMAP="#srchmap"BORDER="0"></H1><MAPNAME="srchmap"><AREASHAPE="RECT"COORDS="0,0,466,65"HREF="index.htm"ALT="Building Internet Firewalls"><AREASHAPE="RECT"COORDS="467,0,514,18"HREF="../search/fsrch.htm"ALT="Search this book"></MAP><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="appc_02.htm"TITLE="C.2 A Data Communications Model"><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: C.2 A Data Communications Model"BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><B><FONTFACE="ARIEL,HELVETICA,HELV,SANSERIF"SIZE="-1">Appendix C<BR><SPANCLASS="acronym">TCP/IP</SPAN> Fundamentals</FONT></B></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="appc_04.htm"TITLE="C.4 Network Access Layer"><IMGSRC="../gifs/txtnexta.gif"ALT="Next: C.4 Network Access Layer"BORDER="0"></A></TD></TR></TABLE>&nbsp;<HRALIGN="LEFT"WIDTH="515"TITLE="footer"></DIV><DIVCLASS="SECT1"><H2CLASS="sect1"><ACLASS="title"NAME="FIRE-C-S1-3">C.3 TCP/IP Protocol Architecture</A></H2><PCLASS="para"><ACLASS="indexterm"NAME="CTCPIPPROTO"></A>While there is no universal agreement about how to describe<SPANCLASS="acronym">TCP/IP</SPAN> with a layered model, it is generally viewedas being composed of fewer layers than the seven used in the<SPANCLASS="acronym">OSI</SPAN> model. Most descriptions of<SPANCLASS="acronym">TCP/IP</SPAN> define three to five functional levels inthe protocol architecture. The four-level model illustrated in <ACLASS="xref"HREF="appc_03.htm#FIRE-C-FIG-2"TITLE="Layers in the TCP/IP protocol architecture">Figure 13.6</A> is based on the three layers (Application,Host-to-Host, and Network Access) shown in the <SPANCLASS="acronym">DOD</SPAN>Protocol Model in the <EMCLASS="emphasis"><SPANCLASS="acronym">DDN</SPAN> ProtocolHandbook, Volume 1</EM>, with the addition of a separateInternet layer. This model provides a reasonable pictorialrepresentation of the layers in the <SPANCLASS="acronym">TCP/IP</SPAN> protocolhierarchy.</P><H4CLASS="figure"><ACLASS="title"NAME="FIRE-C-FIG-2">Figure 13.6: Layers in the <SPANCLASS="acronym">TCP/IP</SPAN> protocol architecture</A></H4><IMGCLASS="graphic"SRC="figs/firec02.gif"ALT="Figure 13.6"><PCLASS="para">As in the <SPANCLASS="acronym">OSI</SPAN> model, data is passed down the stackwhen it is being sent to the net, and up the stack when it is beingreceived from the network. The four-layered structure of<SPANCLASS="acronym">TCP/IP</SPAN> is seen in the way data is handled as itpasses down the protocol stack from the Application Layer to theunderlying physical network. Each layer in the stack adds controlinformation to ensure proper delivery. This control information iscalled a <EMCLASS="emphasis">header </EM>because it is placed in front ofthe data to be transmitted. Each layer treats all of the informationit receives from the layer above as data and places its own header infront of that information. The addition of delivery information at<ACLASS="indexterm"NAME="AUTOID-23576"></A>every layer is called <EMCLASS="emphasis">encapsulation</EM>. (<ACLASS="xref"HREF="appc_03.htm#FIRE-C-FIG-3"TITLE="Data encapsulation">Figure 13.7</A> illustrates this.) When data is received, theopposite happens. Each layer strips off its header before passing thedata on to the layer above. As information flows back up the stack,information received from a lower layer is interpreted as both aheader and data.</P><H4CLASS="figure"><ACLASS="title"NAME="FIRE-C-FIG-3">Figure 13.7: Data encapsulation</A></H4><IMGCLASS="graphic"SRC="figs/firec03.gif"ALT="Figure 13.7"><PCLASS="para">Each layer has its own independent data structures. Conceptually alayer is unaware of the data structures used by the layers above andbelow it. In reality, the data structures of a layer are designed tobe compatible with the structures used by the surrounding layers forthe sake of more efficient data transmission. Still, each layer hasits own data structure and its own terminology to describe thatstructure.</P><PCLASS="para">Let's look more closely at the function of each layer, working our wayup from the Network Access Layer to the Application Layer.</P></DIV><DIVCLASS="htmlnav"><P></P><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="appc_02.htm"TITLE="C.2 A Data Communications Model"><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: C.2 A Data Communications Model"BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="book"HREF="index.htm"TITLE="Building Internet Firewalls"><IMGSRC="../gifs/txthome.gif"ALT="Building Internet Firewalls"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="appc_04.htm"TITLE="C.4 Network Access Layer"><IMGSRC="../gifs/txtnexta.gif"ALT="Next: C.4 Network Access Layer"BORDER="0"></A></TD></TR><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172">C.2 A Data Communications Model</TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="index"HREF="index/idx_a.htm"TITLE="Book Index"><IMGSRC="../gifs/index.gif"ALT="Book Index"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172">C.4 Network Access Layer</TD></TR></TABLE><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><PCLASS="nav"><FONTSIZE="-1">[ <AHREF="../index.htm"TITLE="The Networking CD Bookshelf">Library Home</A> | <AHREF="../dnsbind/index.htm"TITLE="DNS &amp; BIND">DNS &amp; BIND</A> | <AHREF="../tcpip/index.htm"TITLE="TCP/IP Network Administration">TCP/IP</A> | <AHREF="../sendmail/index.htm"TITLE="sendmail">sendmail</A> | <AHREF="../smdref/index.htm"TITLE="sendmail Desktop Reference">sendmail Reference</A> | <AHREF="index.htm"TITLE="Building Internet Firewalls">Firewalls</A> | <AHREF="../puis/index.htm"TITLE="Practical UNIX &amp; Internet Security">Practical Security</A> ]</FONT></P></DIV></BODY></HTML>