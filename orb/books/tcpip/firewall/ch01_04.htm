<HTML><HEAD><TITLE>[Chapter 1] 1.4 What Is an Internet Firewall?</TITLE><METANAME="DC.title"CONTENT="Building Internet Firewalls"><METANAME="DC.creator"CONTENT="D. Brent Chapman &amp; Elizabeth D. Zwicky"><METANAME="DC.publisher"CONTENT="O'Reilly &amp; Associates, Inc."><METANAME="DC.date"CONTENT="1999-02-04T00:08:44Z"><METANAME="DC.type"CONTENT="Text.Monograph"><METANAME="DC.format"CONTENT="text/html"SCHEME="MIME"><METANAME="DC.source"CONTENT="1-56592-124-0"SCHEME="ISBN"><METANAME="DC.language"CONTENT="en-US"><METANAME="generator"CONTENT="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><LINKREV="made"HREF="mailto:online-books@oreilly.com"TITLE="Online Books Comments"><LINKREL="up"HREF="ch01_01.htm"TITLE="1. Why Internet Firewalls?"><LINKREL="prev"HREF="ch01_03.htm"TITLE="1.3 How Can You Protect Your Site?"><LINKREL="next"HREF="ch02_01.htm"TITLE="2. Internet Services"></HEAD><BODYBGCOLOR="#FFFFFF"TEXT="#000000"><DIVCLASS="htmlnav"><H1><IMGSRC="gifs/smbanner.gif"ALT="Building Internet Firewalls"USEMAP="#srchmap"BORDER="0"></H1><MAPNAME="srchmap"><AREASHAPE="RECT"COORDS="0,0,466,65"HREF="index.htm"ALT="Building Internet Firewalls"><AREASHAPE="RECT"COORDS="467,0,514,18"HREF="../search/fsrch.htm"ALT="Search this book"></MAP><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch01_03.htm"TITLE="1.3 How Can You Protect Your Site?"><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 1.3 How Can You Protect Your Site?"BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><B><FONTFACE="ARIEL,HELVETICA,HELV,SANSERIF"SIZE="-1">Chapter 1<BR>Why Internet Firewalls?</FONT></B></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="CHAPTER"HREF="ch02_01.htm"TITLE="2. Internet Services"><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 2. Internet Services"BORDER="0"></A></TD></TR></TABLE>&nbsp;<HRALIGN="LEFT"WIDTH="515"TITLE="footer"></DIV><DIVCLASS="SECT1"><H2CLASS="sect1"><ACLASS="title"NAME="FIRE-01-S1-4">1.4 What Is an Internet Firewall?</A></H2><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-500"></A><ACLASS="indexterm"NAME="AUTOID-503"></A><ACLASS="indexterm"NAME="AUTOID-506"></A><ACLASS="indexterm"NAME="CH01FWDEFOF"></A>As we've mentioned, firewalls are a very effective type of networksecurity. This section briefly describes what Internet firewalls cando for your overall site security. <ACLASS="xref"HREF="ch04_01.htm"TITLE="Firewall Design">Chapter 4, <CITECLASS="chapter">Firewall Design</CITE></A>describes the various types of firewalls in use today, and the otherchapters in Part II describe the details of building those firewalls.</P><PCLASS="para">In building construction, a firewall is designed to keep a fire fromspreading from one part of the building to another. In theory, anInternet firewall serves a similar purpose: it prevents the dangers ofthe Internet from spreading to your internal network. In practice, anInternet firewall is more like a moat of a medieval castle than afirewall in a modern building. It serves multiple purposes:<ULCLASS="itemizedlist"><LICLASS="listitem"><PCLASS="para">It restricts people to entering at a carefully controlled point.</P></LI><LICLASS="listitem"><PCLASS="para">It prevents attackers from getting close to your other defenses.</P></LI><LICLASS="listitem"><PCLASS="para">It restricts people to leaving at a carefully controlled point.</P></LI></UL></P><PCLASS="para">An Internet firewall is most often installed at the point where yourprotected internal network connects to the Internet, as shown in <ACLASS="xref"HREF="ch01_04.htm#FIRE-01-CHP-FIG-1"TITLE="A firewall usually separates an internal network from the Internet">Figure 1.1</A>. </P><H4CLASS="figure"><ACLASS="title"NAME="FIRE-01-CHP-FIG-1">Figure 1.1: A firewall usually separates an internal network from theInternet</A></H4><IMGCLASS="graphic"SRC="figs/fire0101.gif"ALT="Figure 1.1"><PCLASS="para">All traffic coming from the Internet or going out from your internalnetwork passes through the firewall. Because it does, the firewall hasthe opportunity to make sure that this traffic is acceptable. </P><PCLASS="para">What does &quot;acceptable&quot; mean to the firewall? It means thatwhatever is being done&nbsp;- email, file transfers, remote logins, or anykinds of specific interactions between specific systems&nbsp;- conforms tothe security policy of the site. Security policies are different forevery site; some are highly restrictive and others fairly open, aswe'll discuss in Chapter 11.</P><PCLASS="para">Logically, a firewall is a separator, a restricter, an analyzer. Thephysical implementation of the firewall varies from site to site. Mostoften, a firewall is a set of hardware components&nbsp;- a router, a hostcomputer, or some combination of routers, computers, and networks withappropriate software. There are various ways to configure thisequipment; the configuration will depend upon a site's particularsecurity policy, budget, and overall operations.</P><PCLASS="para">A firewall is very rarely a single physical object, although some of thenewest commercial products attempt to put everything into the same box.Usually, a firewall has multiple parts, and some of these parts may doother tasks besides function as part of the firewall. Your Internetconnection is almost always part of your firewall. Even if you have afirewall in a box, it isn't going to be neatly separable from the restof your site; it's not something you can just drop in.</P><PCLASS="para">We've compared a firewall to the moat of a medieval castle, and like amoat, a firewall is not invulnerable. It doesn't protect against peoplewho are already inside; it works best if coupled with internaldefenses; and, even if you stock it with alligators, people sometimesmanage to swim across. A firewall is also not without its drawbacks;building one requires significant expense and effort, and therestrictions it places on insiders can be a major annoyance.</P><PCLASS="para">Given the limitations and drawbacks of firewalls, why would anybodybother to install one? Because a firewall is the most effective way toconnect a network to the Internet and still protect that network. TheInternet presents marvelous opportunities. Millions of people are outthere exchanging information. The benefits are obvious: the chances forpublicity, customer service, and information gathering. The popularityof the information superhighway is increasing everybody'sdesire to get out there. The risks should also be obvious: any time youget millions of people together, you get crime; it's true in a city, andit's true on the Internet. Any superhighway is fun only while you're ina car. If you have to live or work by the highway, it's loud, smelly,and dangerous.</P><PCLASS="para">How can you benefit from the good parts of the Internet without beingoverwhelmed by the bad? Just as you'd like to drive on ahighway without suffering the nasty effects of putting a freewayoff-ramp into your living room, you need to carefully control thecontact that your network has to the Internet. A firewall is a tool fordoing that, and in most situations, it's the single most effective toolfor doing that. </P><PCLASS="para">There are other uses of firewalls. For example, they can be used asfirewalls in a building that divide parts of a site from each otherwhen these parts have distinct security needs (and we'll discuss theseuses in passing, as appropriate). The focus of this book, however, is onfirewalls as they're used between a site and the Internet.</P><PCLASS="para">Firewalls offer significant benefits, but they can't solve everysecurity problem. The following sections briefly summarize whatfirewalls can and cannot do to protect your systems and your data.<ACLASS="indexterm"NAME="AUTOID-536"></A></P><DIVCLASS="sect2"><H3CLASS="sect2"><ACLASS="title"NAME="FIRE-01-S2-8">1.4.1 What Can a Firewall Do?</A></H3><PCLASS="para">Firewalls can do a lot for your site's security. In fact, someadvantages of using firewalls extend even beyond security, as described below.</P><DIVCLASS="sect3"><H4CLASS="sect3"><ACLASS="title"NAME="FIRE-01-S3-12">1.4.1.1 A firewall is a focus for securitydecisions</A></H4><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-543"></A>Think of a firewall as a choke point. All traffic in and out must passthrough this single, narrow checkpoint. A firewall gives you anenormous amount of leverage for network security because it lets youconcentrate your security measures on this checkpoint: the point whereyour network connects to the Internet. </P><PCLASS="para">Focusing your security in this way is far more efficient than spreadingsecurity decisions and technologies around, trying to cover all thebases in a piecemeal fashion. Although firewalls can cost tens ofthousands of dollars to implement, most sites find that concentratingthe most effective security hardware and software at the firewall isless expensive and more effective than other security measures&nbsp;- andcertainly less expensive than having inadequate security.</P></DIV><DIVCLASS="sect3"><H4CLASS="sect3"><ACLASS="title"NAME="FIRE-01-S3-13">1.4.1.2 A firewall can enforce securitypolicy</A></H4><PCLASS="para">Many of the services that people want from the Internet are inherentlyinsecure. The firewall is the traffic cop for these services. Itenforces the site's security policy, allowing only&quot;approved&quot; services to pass through and those only withinthe rules set up for them.</P><PCLASS="para">For example, one site's management may decide that certain servicessuch as Sun's Network File System (<SPANCLASS="acronym">NFS</SPAN>) and NetworkInformation Services (formerly known as Yellow Pages)(<SPANCLASS="acronym">NIS/YP</SPAN>) are simply too risky to be used across thefirewall. It doesn't matter what system tries to run them or what userwants them. The firewall will keep potentially dangerous servicesstrictly inside the firewall. (There, they can still be used forinsiders to attack each other, but that's outside of the firewall'scontrol.)  Another site might decide that only one internal system cancommunicate with the outside world. Still another site might decide toallow access from all systems of a certain type, or belonging to acertain group; the variations in site security policies are endless.</P><PCLASS="para">A firewall may be called upon to help enforce more complicated policies.For example, perhaps only certain systems within the firewall areallowed to transfer files to and from the Internet; by using othermechanisms to control which users have access to those systems, you cancontrol which users have these capabilities. Depending on thetechnologies you choose to implement your firewall, a firewall may havea greater or lesser ability to enforce such policies.</P></DIV><DIVCLASS="sect3"><H4CLASS="sect3"><ACLASS="title"NAME="FIRE-01-S3-14">1.4.1.3 A firewall can log Internet activityefficiently</A></H4><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-557"></A><ACLASS="indexterm"NAME="AUTOID-561"></A><ACLASS="indexterm"NAME="AUTOID-565"></A><ACLASS="indexterm"NAME="AUTOID-568"></A>Because all traffic passes through the firewall, the firewall provides agood place to collect information about system and network use&nbsp;- andmisuse. As a single point of access, the firewall can record what occursbetween the protected network and the external network.</P></DIV><DIVCLASS="sect3"><H4CLASS="sect3"><ACLASS="title"NAME="FIRE-01-S3-15">1.4.1.4 A firewall limits yourexposure</A></H4><PCLASS="para">Although this point is most relevant to the use of internal firewalls,which we describe in <ACLASS="xref"HREF="ch04_01.htm"TITLE="Firewall Design">Chapter 4</A>, it's worthmentioning here. Sometimes, a firewall will be used to keep one sectionof your site's network separate from another section. By doing this,you keep problems that impact one section from spreading through theentire network. In some cases, you'll do this because one section ofyour network may be more trusted than another; in other cases, becauseone section is more sensitive than another. Whatever the reason, theexistence of the firewall limits the damage that a network securityproblem can do to the overall network.</P></DIV></DIV><DIVCLASS="sect2"><H3CLASS="sect2"><ACLASS="title"NAME="FIRE-01-S2-9">1.4.2 What Can't a Firewall Do?</A></H3><PCLASS="para">Firewalls offer excellent protection against network threats, but theyaren't a complete security solution. Certain threats are outside thecontrol of the firewall. You need to figure out other ways to protectagainst these threats by incorporating physical security, host security,and user education into your overall security plan. Some of theweaknesses of firewalls are discussed below.</P><DIVCLASS="sect3"><H4CLASS="sect3"><ACLASS="title"NAME="FIRE-01-S3-16">1.4.2.1 A firewall can't protect you againstmalicious insiders</A></H4><PCLASS="para">A firewall might keep a system user from being able to send proprietaryinformation out of an organization over a network connection; so wouldsimply not having a network connection. But that same user could copythe data onto disk, tape, or paper and carry it out of the building inhis or her briefcase.</P><PCLASS="para">If the attacker is already inside the firewall&nbsp;- if the fox is insidethe henhouse&nbsp;- a firewall can do virtually nothing for you. Insideusers can steal data, damage hardware and software, and subtly modifyprograms without ever coming near the firewall. Insider threats requireinternal security measures, such as host security and user education. Such topics are beyond the scope of this book.</P></DIV><DIVCLASS="sect3"><H4CLASS="sect3"><ACLASS="title"NAME="FIRE-01-S3-17">1.4.2.2 A firewall can't protect you againstconnections that don't go through it</A></H4><PCLASS="para">A firewall can effectively control the traffic that passes through it;however, there is nothing a firewall can do about traffic that doesn'tpass through it. For example, what if the site allows dial-in accessto internal systems behind the firewall? The firewall has absolutely noway of preventing an intruder from getting in through such a modem.</P><PCLASS="para">Sometimes, technically expert users or system administrators set uptheir own &quot;back doors&quot; into the network (such as a dial-upmodem connection), either temporarily or permanently, because they chafeat the restrictions that the firewall places upon them and theirsystems. The firewall can do nothing about this. It's really apeople-management problem, not a technical problem.</P></DIV><DIVCLASS="sect3"><H4CLASS="sect3"><ACLASS="title"NAME="FIRE-01-S3-18">1.4.2.3 A firewall can't protect againstcompletely new threats</A></H4><PCLASS="para">A firewall is designed to protect against known threats. Awell-designed one may also protect against new threats.  (For example,by denying any but a few trusted services, a firewall will preventpeople from setting up new and insecure services.) However, nofirewall can automatically defend against every new threat thatarises. Periodically people discover new ways to attack, usingpreviously trustworthy services, or using attacks that simply hadn'toccurred to anyone before. You can't set up a firewall once, andexpect it to protect you forever. (See <ACLASS="xref"HREF="ch12_01.htm"TITLE="Maintaining Firewalls">Chapter 12, <CITECLASS="chapter">Maintaining Firewalls</CITE></A>for advice on keeping your firewall up to date.)</P></DIV><DIVCLASS="sect3"><H4CLASS="sect3"><ACLASS="title"NAME="FIRE-01-S3-19">1.4.2.4 A firewall can't protect againstviruses</A></H4><PCLASS="para"><ACLASS="indexterm"NAME="CH01VIRUS"></A><ACLASS="indexterm"NAME="CH01COMPVIRUS"></A>Firewalls can't keep <SPANCLASS="acronym">PC</SPAN>and Macintosh viruses out of a network. Although many firewalls scanall incoming traffic to determine whether it is allowed to passthrough to the internal network, the scanning is mostly for source anddestination addresses and port numbers, not for the details of thedata. Even with sophisticated packet filtering or proxying software,virus protection in a firewall is not very practical. There are simplytoo many types of viruses and too many ways a virus can hide withindata.</P><PCLASS="para">Detecting a virus in a random packet of data passing through a firewallis very difficult; it requires:<ULCLASS="itemizedlist"><LICLASS="listitem"><PCLASS="para">Recognizing that the packet is part of a program</P></LI><LICLASS="listitem"><PCLASS="para">Determining what the program should look like</P></LI><LICLASS="listitem"><PCLASS="para">Determining that the change is because of a virus</P></LI></UL></P><PCLASS="para">Even the first of these is a challenge. Most firewalls are protectingmachines of multiple types with different executable formats. Aprogram may be a compiled executable or a script (e.g., a<SPANCLASS="acronym">UNIX</SPAN> shell script, or a HyperCard stack), and manymachines support multiple, compiled executable types. Furthermore, mostprograms are packaged for transport, and are often compressed aswell. Packages being transferred via email or Usenet news will alsohave been encoded into <SPANCLASS="acronym">ASCII</SPAN> in different ways.</P><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-610"></A>For all of these reasons, users may end up bringing viruses behind thefirewall, no matter how secure that firewall is. Even if you could do aperfect job of blocking viruses at the firewall, however, you stillhaven't addressed the virus problem. You've done nothing aboutthe far more common sources of viruses: software downloaded from dial-upbulletin-board systems, software brought in on floppies from home orother sites, and even software that comes pre-infected frommanufacturers are more common than virus-infected software on theInternet. Whatever you do to address those threats will also address theproblem of software transferred through the firewall.</P><PCLASS="para">The most practical way to address the virus problem is throughhost-based virus protection software, and user education concerning thedangers of viruses and precautions to take against them. <ACLASS="indexterm"NAME="AUTOID-614"></A><ACLASS="indexterm"NAME="AUTOID-615"></A></P></DIV></DIV><DIVCLASS="sect2"><H3CLASS="sect2"><ACLASS="title"NAME="FIRE-01-S2-10">1.4.3 Buying Versus Building</A></H3><PCLASS="para"><ACLASS="indexterm"NAME="CH01NETSECDESIGN"></A><ACLASS="indexterm"NAME="CH01FWBUYVSBUILD"></A><ACLASS="indexterm"NAME="CH01DESIGNFW"></A>Until recently, if a site wanted a firewall, they had little choice butto design and build it themselves (perhaps with their own staff, orperhaps by hiring a consultant or contractor). Over the last few years,however, more and more commercial firewall offerings have reached themarket. These products continue to grow in number and functionality atan astounding rate, and many sites may find that one of theseproducts suits their needs.</P><PCLASS="para">In deciding whether or not a particular commercial firewall product willmeet your needs, you have to understand what your needs are. Even ifyou decide to buy a firewall, you still need to understand a fair bitabout how they're built and how they work in order to make an informedpurchasing decision. Many sites spend as much or more effort evaluatingcommercial firewall products as they would building their own firewall. </P><PCLASS="para">We're not saying that nobody should buy a firewall, or thateverybody should build their own. Our point is merely that it's notnecessarily any easier to buy than it is to build; it all depends onyour particular situation, and what resources you have at yourdisposal. Sites with money to spend but little staff time or expertiseavailable often find buying an attractive solution, while sites withexpertise and time but little money often findbuilding more attractive.</P><PCLASS="para">Just what expertise do you need to design and build your own firewall? Like everything else, it depends; it depends on what services you wantto provide, what platforms you're using, what your security concernsare, and so on. To install most of the tools described in this book,you need basic Internet skills to obtain the tools, and basic systemadministration skills to configure, compile, and install them. If youdon't know what those skills are, you probably don't have them; youcan obtain them, but that's beyond the scope of this book.</P><PCLASS="para">Some people feel uncomfortable using software that's freely available onthe Internet, particularly for security-critical applications. We feelthat the advantages outweigh the disadvantages. You may not have the&quot;guarantees&quot; offered by vendors, but you have the ability toinspect the source code and to share information with the largecommunity that helps to maintain the software. In practice, vendors comeand go, but the community endures. The packages we discuss in thisbook are widely used; many of the largest sites on the Internet basetheir firewalls on them. These packages reflect years of real-lifeexperience with the Internet and its risks.</P><PCLASS="para">Furthermore, while it's perfectly possible to build a firewallconsisting solely of freely available software, there's no reason tofeel that it's all or nothing; freely available tools provide a valuablecomplement to purchased solutions. Buying a firewall shouldn't make youreluctant to supplement with freely available tools, and building oneshouldn't make you reluctant to supplement with purchased tools. Don'trule out a product just because it's commercial, or just because it'sfreely available. Truly excellent products with great support appearin both categories, as do poorly thought out products with no support.<ACLASS="indexterm"NAME="AUTOID-632"></A><ACLASS="indexterm"NAME="AUTOID-633"></A><ACLASS="indexterm"NAME="AUTOID-634"></A></P></DIV></DIV><DIVCLASS="htmlnav"><P></P><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch01_03.htm"TITLE="1.3 How Can You Protect Your Site?"><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 1.3 How Can You Protect Your Site?"BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="book"HREF="index.htm"TITLE="Building Internet Firewalls"><IMGSRC="../gifs/txthome.gif"ALT="Building Internet Firewalls"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="CHAPTER"HREF="ch02_01.htm"TITLE="2. Internet Services"><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 2. Internet Services"BORDER="0"></A></TD></TR><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172">1.3 How Can You Protect Your Site?</TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="index"HREF="index/idx_a.htm"TITLE="Book Index"><IMGSRC="../gifs/index.gif"ALT="Book Index"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172">2. Internet Services</TD></TR></TABLE><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><PCLASS="nav"><FONTSIZE="-1">[ <AHREF="../index.htm"TITLE="The Networking CD Bookshelf">Library Home</A> | <AHREF="../dnsbind/index.htm"TITLE="DNS &amp; BIND">DNS &amp; BIND</A> | <AHREF="../tcpip/index.htm"TITLE="TCP/IP Network Administration">TCP/IP</A> | <AHREF="../sendmail/index.htm"TITLE="sendmail">sendmail</A> | <AHREF="../smdref/index.htm"TITLE="sendmail Desktop Reference">sendmail Reference</A> | <AHREF="index.htm"TITLE="Building Internet Firewalls">Firewalls</A> | <AHREF="../puis/index.htm"TITLE="Practical UNIX &amp; Internet Security">Practical Security</A> ]</FONT></P></DIV></BODY></HTML>