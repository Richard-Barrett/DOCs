<HTML><HEAD><TITLE>[Chapter 2] 2.2 File Transfer</TITLE><METANAME="DC.title"CONTENT="Building Internet Firewalls"><METANAME="DC.creator"CONTENT="D. Brent Chapman &amp; Elizabeth D. Zwicky"><METANAME="DC.publisher"CONTENT="O'Reilly &amp; Associates, Inc."><METANAME="DC.date"CONTENT="1999-02-04T00:09:01Z"><METANAME="DC.type"CONTENT="Text.Monograph"><METANAME="DC.format"CONTENT="text/html"SCHEME="MIME"><METANAME="DC.source"CONTENT="1-56592-124-0"SCHEME="ISBN"><METANAME="DC.language"CONTENT="en-US"><METANAME="generator"CONTENT="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><LINKREV="made"HREF="mailto:online-books@oreilly.com"TITLE="Online Books Comments"><LINKREL="up"HREF="ch02_01.htm"TITLE="2. Internet Services"><LINKREL="prev"HREF="ch02_01.htm"TITLE="2.1 Electronic Mail"><LINKREL="next"HREF="ch02_03.htm"TITLE="2.3 Remote Terminal Access and Command Execution"></HEAD><BODYBGCOLOR="#FFFFFF"TEXT="#000000"><DIVCLASS="htmlnav"><H1><IMGSRC="gifs/smbanner.gif"ALT="Building Internet Firewalls"USEMAP="#srchmap"BORDER="0"></H1><MAPNAME="srchmap"><AREASHAPE="RECT"COORDS="0,0,466,65"HREF="index.htm"ALT="Building Internet Firewalls"><AREASHAPE="RECT"COORDS="467,0,514,18"HREF="../search/fsrch.htm"ALT="Search this book"></MAP><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch02_01.htm"TITLE="2.1 Electronic Mail"><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 2.1 Electronic Mail"BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><B><FONTFACE="ARIEL,HELVETICA,HELV,SANSERIF"SIZE="-1">Chapter 2<BR>Internet Services</FONT></B></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch02_03.htm"TITLE="2.3 Remote Terminal Access and Command Execution"><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 2.3 Remote Terminal Access and Command Execution"BORDER="0"></A></TD></TR></TABLE>&nbsp;<HRALIGN="LEFT"WIDTH="515"TITLE="footer"></DIV><DIVCLASS="SECT1"><H2CLASS="sect1"><ACLASS="title"NAME="FIRE-02-S1-2">2.2 File Transfer</A></H2><PCLASS="para"><ACLASS="indexterm"NAME="CH02TRANSFERFILES"></A><ACLASS="indexterm"NAME="CH02FILESTRANSFER"></A><ACLASS="indexterm"NAME="AUTOID-729"></A>Electronic mail transfers data from place to place, butit's designed for small files, in human-readable form. Electronic mailtransfer protocols are allowed to make changes in a message that areacceptable to humans (for instance, inserting &quot;&gt;&quot; beforethe word &quot;from&quot; at the beginning of a line, so that themailer doesn't get it confused with a header line), but areunacceptable to programs.[1]</P><BLOCKQUOTECLASS="footnote"><PCLASS="para">[1] Inserting &quot;&gt;&quot; before &quot;from&quot; is so common thatsome published books still contain the occasional &quot;&gt;from&quot; inthe text, where the &quot;&gt;&quot; was inserted as authors exchangeddrafts via electronic mail.</P></BLOCKQUOTE><PCLASS="para">Although electronic mail systems these days includeelaborate workarounds for such problems, so that a large binary filemay be split into small pieces and encoded on the sending side anddecoded and reassembled on the receiving side, the workarounds arecumbersome and error prone. Also, people may want to actively go outand look for files, instead of waiting for someone to sendthem. Therefore, even when electronic mail is available it'suseful to have a method designed for transferring files on request.</P><PCLASS="para"><ACLASS="indexterm"NAME="CH02FTP"></A><ACLASS="indexterm"NAME="AUTOID-739"></A>File Transfer Protocol (<SPANCLASS="acronym">FTP</SPAN>) is the Internetstandard protocol for this purpose. In theory, allowing your users tobring files in is not an increase of risk over allowing electronicmail; in fact, some sites offer services allowing you to access<SPANCLASS="acronym">FTP</SPAN> via email. In practice, however, people will domore file transfers when <SPANCLASS="acronym">FTP</SPAN> is available, and aremore likely to bring in undesirable programs and data.</P><PCLASS="para">What makes these programs and data undesirable? The primary worry atmost sites is that users will bring in Trojan horse software. Althoughthis can happen, actually the larger concern is that users will bringin computer games, pirated software, and pornographic pictures, whichtend to take up an annoying amount of time and disk space, but don'trepresent a major security risk. If you make sure to do the following,then you can consider inbound <SPANCLASS="acronym">FTP</SPAN> to be areasonably safe service that eases access to important Internetresources:<ULCLASS="itemizedlist"><LICLASS="listitem"><PCLASS="para">Educate your users to appropriately mistrust any software theybring in via <SPANCLASS="acronym">FTP</SPAN>.</P></LI><LICLASS="listitem"><PCLASS="para">Communicate to users your site's guidelines about sexualharassment policies and organizational resource usage. </P></LI></UL></P><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-755"></A><ACLASS="indexterm"NAME="AUTOID-757"></A>How about the other side of the coin: allowing other people to use FTPto transfer files from your computers? This is somewhat riskier.Anonymous <SPANCLASS="acronym">FTP</SPAN> is an extremely popular mechanism forgiving remote users access to files without having to give them fullaccess to your machine. If you run an <SPANCLASS="acronym">FTP</SPAN> server,you can let users retrieve files you've placed in a separate, publicarea of your system without letting them log in and potentially getaccess to everything on your system. Your site's anonymous<SPANCLASS="acronym">FTP</SPAN> area can be your organization's public archiveof papers, standards, software, graphics images, and information ofother kinds that people need from you or that you want to share withthem. For many organizations, establishing an <SPANCLASS="acronym">FTP</SPAN>site is the first step towards doing business on the Internet.</P><PCLASS="para">To get access to the files you've made available, users loginto your system using <SPANCLASS="acronym">FTP</SPAN> with the special loginname &quot;anonymous.&quot; Most sites request that users enter their own emailaddress, in response to the password prompt, as a courtesy so that the sitecan track who is using the anonymous <SPANCLASS="acronym">FTP</SPAN> server, butthis requirement is rarely enforced (mostly because there is no easy wayto verify the validity of an email address).</P><PCLASS="para">In setting up an anonymous <SPANCLASS="acronym">FTP</SPAN> server, you'll needto ensure that people who use it can't get access to other areas orfiles on the system, and that they can't use <SPANCLASS="acronym">FTP</SPAN> toget shell-level access to the system itself. Writable directories inthe anonymous <SPANCLASS="acronym">FTP</SPAN> area are a special concern, aswe'll see in <ACLASS="xref"HREF="ch08_01.htm"TITLE="Configuring Internet Services">Chapter 8</A>.</P><PCLASS="para">You'll also need to ensure that your users don't use the serverinappropriately. It can be very tempting for people to put up filesthat they want specific people to read. Many timespeople don't realize that anybody on the Internet can read them, orthey do realize this, but believe in security throughobscurity. Unfortunately for these innocents, a number of toolsattempt to index anonymous <SPANCLASS="acronym">FTP</SPAN> servers, and theysucceed in removing most of the obscurity.<ACLASS="indexterm"NAME="AUTOID-774"></A></P><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-776"></A><ACLASS="indexterm"NAME="AUTOID-778"></A>You may have heard of other file transfer protocols. Trivial FileTransport Protocol (<SPANCLASS="acronym">TFTP</SPAN>) is a simplified<SPANCLASS="acronym">FTP</SPAN> protocol that disklessmachines use to transfer information. It's extremely simple so that it canbe built into hardware, and therefore supports no authentication.There's no reason to provide <SPANCLASS="acronym">TFTP</SPAN> access outside ofyour network; ordinary users don't transfer files with<SPANCLASS="acronym">TFTP</SPAN>.</P><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-786"></A><SPANCLASS="acronym">UUCP</SPAN> (<SPANCLASS="acronym">UNIX</SPAN> to<SPANCLASS="acronym">UNIX</SPAN> CoPy) is an older file transfer protocol usedover modems, and it is sometimes still used for the transfer ofUsenet news and email even over the Internet, particularly by siteswith intermittent Internet connections. Such sites use<SPANCLASS="acronym">UUCP</SPAN>-over-<SPANCLASS="acronym">TCP</SPAN> to obtain theiremail from their service provider whenever they bring their networkconnection up. While it used to be common, few sites now provideanonymous <SPANCLASS="acronym">UUCP</SPAN> service for file access. As a filetransfer protocol, it is of interest only to peoplewho don't have an Internet connection and use modems. Unless yourentire business involves providing information for downloading,<SPANCLASS="acronym">UUCP</SPAN> is probably not useful for yourexternal users.</P><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-796"></A><ACLASS="indexterm"NAME="AUTOID-798"></A>File Service Protocol (<SPANCLASS="acronym">FSP</SPAN>) is a file transferprotocol developed for circumventing <SPANCLASS="acronym">FTP</SPAN>restrictions. Ordinary users can't set up <SPANCLASS="acronym">FTP</SPAN>servers, but they can set up <SPANCLASS="acronym">FSP</SPAN> servers, and<SPANCLASS="acronym">FSP</SPAN> transfers will go through when<SPANCLASS="acronym">FTP</SPAN> transfers have been blocked. There are twodisadvantages in setting up an <SPANCLASS="acronym">FSP</SPAN> server:</P><ULCLASS="itemizedlist"><LICLASS="listitem"><PCLASS="para">Security is not a particular concern to the designersand users of <SPANCLASS="acronym">FSP</SPAN>; although it shouldn't inherentlyreduce the security of your machine, it's susceptible to the samekinds of bugs as <SPANCLASS="acronym">FTP</SPAN>, and fewer attempts have beenmade to avoid or fix them.</P></LI><LICLASS="listitem"><PCLASS="para">Providing <SPANCLASS="acronym">FSP</SPAN> service is not going to make friendsfor you among remote system administrators, since the point of FSP isto allow people to transfer files after their sites have decided toblock file transfers.</P></LI></UL><PCLASS="para"><SPANCLASS="acronym">FSP</SPAN> does have some actual advantages over<SPANCLASS="acronym">FTP</SPAN>&nbsp;- being designed for stealth makes it a verysparing user of resources&nbsp;- but there are almost no legitimate<SPANCLASS="acronym">FSP</SPAN> users, and its history makes it unlikely there will be many.</P><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-821"></A>Within a site, you may want to use <EMCLASS="emphasis">rcp</EM> totransfer files between systems. <EMCLASS="emphasis">rcp</EM> (described in<ACLASS="xref"HREF="ch08_01.htm"TITLE="Configuring Internet Services">Chapter 8</A> with the rest of the so-called&quot;Berkeley `r' commands&quot;) is a file transfer programthat behaves like an extended version of the <SPANCLASS="acronym">UNIX</SPAN><EMCLASS="emphasis">cp</EM> command. It is inappropriate for use acrossthe Internet, because it uses a trusted host authentication model.Rather than requiring user authentication on the remote machine, itlooks at the <SPANCLASS="acronym">IP</SPAN> address of the host the request iscoming from. Unfortunately, you can't know that packets are reallycoming from that host.<ACLASS="indexterm"NAME="AUTOID-829"></A><ACLASS="indexterm"NAME="AUTOID-830"></A></P></DIV><DIVCLASS="htmlnav"><P></P><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch02_01.htm"TITLE="2.1 Electronic Mail"><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 2.1 Electronic Mail"BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="book"HREF="index.htm"TITLE="Building Internet Firewalls"><IMGSRC="../gifs/txthome.gif"ALT="Building Internet Firewalls"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch02_03.htm"TITLE="2.3 Remote Terminal Access and Command Execution"><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 2.3 Remote Terminal Access and Command Execution"BORDER="0"></A></TD></TR><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172">2.1 Electronic Mail</TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="index"HREF="index/idx_a.htm"TITLE="Book Index"><IMGSRC="../gifs/index.gif"ALT="Book Index"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172">2.3 Remote Terminal Access and Command Execution</TD></TR></TABLE><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><PCLASS="nav"><FONTSIZE="-1">[ <AHREF="../index.htm"TITLE="The Networking CD Bookshelf">Library Home</A> | <AHREF="../dnsbind/index.htm"TITLE="DNS &amp; BIND">DNS &amp; BIND</A> | <AHREF="../tcpip/index.htm"TITLE="TCP/IP Network Administration">TCP/IP</A> | <AHREF="../sendmail/index.htm"TITLE="sendmail">sendmail</A> | <AHREF="../smdref/index.htm"TITLE="sendmail Desktop Reference">sendmail Reference</A> | <AHREF="index.htm"TITLE="Building Internet Firewalls">Firewalls</A> | <AHREF="../puis/index.htm"TITLE="Practical UNIX &amp; Internet Security">Practical Security</A> ]</FONT></P></DIV></BODY></HTML>