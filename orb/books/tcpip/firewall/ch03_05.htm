<HTML><HEAD><TITLE>[Chapter 3] 3.5 Fail-Safe Stance</TITLE><METANAME="DC.title"CONTENT="Building Internet Firewalls"><METANAME="DC.creator"CONTENT="D. Brent Chapman &amp; Elizabeth D. Zwicky"><METANAME="DC.publisher"CONTENT="O'Reilly &amp; Associates, Inc."><METANAME="DC.date"CONTENT="1999-02-04T00:09:40Z"><METANAME="DC.type"CONTENT="Text.Monograph"><METANAME="DC.format"CONTENT="text/html"SCHEME="MIME"><METANAME="DC.source"CONTENT="1-56592-124-0"SCHEME="ISBN"><METANAME="DC.language"CONTENT="en-US"><METANAME="generator"CONTENT="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><LINKREV="made"HREF="mailto:online-books@oreilly.com"TITLE="Online Books Comments"><LINKREL="up"HREF="ch03_01.htm"TITLE="3. Security Strategies"><LINKREL="prev"HREF="ch03_04.htm"TITLE="3.4 Weakest Link"><LINKREL="next"HREF="ch03_06.htm"TITLE="3.6 Universal Participation"></HEAD><BODYBGCOLOR="#FFFFFF"TEXT="#000000"><DIVCLASS="htmlnav"><H1><IMGSRC="gifs/smbanner.gif"ALT="Building Internet Firewalls"USEMAP="#srchmap"BORDER="0"></H1><MAPNAME="srchmap"><AREASHAPE="RECT"COORDS="0,0,466,65"HREF="index.htm"ALT="Building Internet Firewalls"><AREASHAPE="RECT"COORDS="467,0,514,18"HREF="../search/fsrch.htm"ALT="Search this book"></MAP><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch03_04.htm"TITLE="3.4 Weakest Link"><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 3.4 Weakest Link"BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><B><FONTFACE="ARIEL,HELVETICA,HELV,SANSERIF"SIZE="-1">Chapter 3<BR>Security Strategies</FONT></B></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch03_06.htm"TITLE="3.6 Universal Participation"><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 3.6 Universal Participation"BORDER="0"></A></TD></TR></TABLE>&nbsp;<HRALIGN="LEFT"WIDTH="515"TITLE="footer"></DIV><DIVCLASS="SECT1"><H2CLASS="sect1"><ACLASS="title"NAME="FIRE-03-S1-5">3.5 Fail-Safe Stance</A></H2><PCLASS="para"><ACLASS="indexterm"NAME="CH03FAILSAFE"></A><ACLASS="indexterm"NAME="CH03SYSFAIL"></A><ACLASS="indexterm"NAME="CH03SECURITYAGAINST"></A><ACLASS="indexterm"NAME="CH03ACCESSFAIL"></A>Another fundamental principle of security is that, to the extentpossible, systems should <EMCLASS="emphasis">fail safe</EM>; that is, ifthey're going to fail, they should fail in such a way that they denyaccess to an attacker, rather than letting the attacker in. The failuremay also result in denying access to legitimate users as well, untilrepairs are made, but this is usually an acceptable tradeoff. </P><PCLASS="para">Safe failures are another principle with wide application in familiarplaces. Electrical devices are designed to go off&nbsp;- to stop&nbsp;- whenthey fail in almost any way. Elevators are designed to grip theircables if they're not being powered. Electric door locks generallyunlock when the power fails, to avoid trapping people in buildings. </P><PCLASS="para">Most of the applications we discuss automatically fail safely. Forexample, if a packet filtering router goes down, it doesn't let anypackets in. If a proxying program goes down, it provides no service. On the other hand, some host-based packet filtering systems are designedsuch that packets are allowed to arrive at a machine that runs apacket filtering application and separately runs applications providingservices. The way some of these systems work, if the packet filteringapplication crashes (or is never started at boot time), the packets willbe delivered to the applications providing services. This is not afail-safe design and should be avoided.</P><PCLASS="para">The biggest application of this principle in network security is inchoosing your site's <EMCLASS="emphasis">stance</EM> with respect tosecurity. Your stance is, essentially, your site's overall attitudetowards security. Do you lean towards being restrictive or permissive? Are you more inclined to err in the direction of safety (some might callit paranoia) or freedom?</P><PCLASS="para">There are two fundamental stances that you can take with respect tosecurity decisions and policies:<ULCLASS="itemizedlist"><LICLASS="listitem"><PCLASS="para">The default deny stance: Specify only what you allow andprohibit everything else. </P></LI><LICLASS="listitem"><PCLASS="para">The default permit stance: Specify only what you prohibit andallow everything else. </P></LI></UL></P><PCLASS="para">It may seem obvious to you which of these is the &quot;right&quot;approach to take; from a security point of view, it's the default denystance. Probably, it will also seem obvious to your users andmanagement; from their point of view, it's the default permit stance. It's important to make your stance clear to users and management, aswell as to explain the reasons behind that stance. Otherwise, you'relikely to spend a lot of unproductive time in conflict with them,wondering &quot;How could they be so foolish as to even suggestthat?&quot; time and again, simply because they don't understand thesecurity point of view. </P><DIVCLASS="sect2"><H3CLASS="sect2"><ACLASS="title"NAME="FIRE-03-S2-1">3.5.1 Default Deny Stance: That Which Is NotExpressly Permitted Is Prohibited</A></H3><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-1493"></A><ACLASS="indexterm"NAME="AUTOID-1495"></A>The <EMCLASS="emphasis">default deny stance</EM> makes sense from a securitypoint of view because it is a fail-safe stance. It recognizes that whatyou don't know <EMCLASS="emphasis">can</EM> hurt you. It's the obviouschoice for most security people, but it's usually not at all obvious tousers.</P><PCLASS="para">With the default deny stance, you prohibit everything by default; then,to determine what you are going to allow, you:<ULCLASS="itemizedlist"><LICLASS="listitem"><PCLASS="para">Examine the services your users want.</P></LI><LICLASS="listitem"><PCLASS="para">Consider the security implications of these services and how youcan safely provide them.</P></LI><LICLASS="listitem"><PCLASS="para">Allow only the services that you understand, can provide safely,and see a legitimate need for. </P></LI></UL></P><PCLASS="para">Services are enabled on a case-by-case basis. You start by analyzingthe security of a specific service, and balance its securityimplications against the needs of your users. Based on that analysisand the availability of various remedies to improve the security of theservice, you settle on an appropriate compromise. </P><PCLASS="para">For one service, you might determine that you should provide theservice to all users and can do so safely with commonly availablepacket filtering or proxy systems. For another service, you mightdetermine that the service cannot be adequately secured by anycurrently available means, but that only a small number of your usersor systems require it.  In the latter case, perhaps its use can berestricted to that small set of users (who can be made aware of therisks through special training) or systems (which you may be able toprotect in other ways; e.g., through host security). The whole key isto find a compromise that is appropriate to your particular situation.</P></DIV><DIVCLASS="sect2"><H3CLASS="sect2"><ACLASS="title"NAME="FIRE-03-S2-2">3.5.2 Default Permit Stance: That Which IsNot Expressly Prohibited Is Permitted</A></H3><PCLASS="para"><ACLASS="indexterm"NAME="CH03SERVDEFAULT"></A><ACLASS="indexterm"NAME="CH03DEFAULTPERMIT"></A>Most users and managers prefer the <EMCLASS="emphasis">default permitstance</EM>. They tend to assume that everything will be, bydefault, permitted, and that certain specific, troublesome actions andservices will then be prohibited as necessary. For example:<ULCLASS="itemizedlist"><LICLASS="listitem"><PCLASS="para"><SPANCLASS="acronym">NFS</SPAN> is not permitted across the firewall.</P></LI><LICLASS="listitem"><PCLASS="para"><SPANCLASS="acronym">WWW</SPAN> access is restricted to userswho have received awareness training about its security problems.</P></LI><LICLASS="listitem"><PCLASS="para">Users are not allowed to set up unauthorized servers.</P></LI></UL></P><PCLASS="para">They want you to tell them what's dangerous; to itemize those few(they think) things that they can't do, and to let them do everythingelse. This is definitely not a fail-safe stance. </P><PCLASS="para">First, it assumes that you know ahead of time precisely what thespecific dangers are, how to explain them so users will understand them,and how to guard against them. Trying to guess whatdangers might be in a system or out there on the Internet is essentiallyan impossible task. There are simply too many possible problems, andtoo much information (e.g., new security holes, new exploitations of oldholes, etc.) to be able to keep up to date. If you don't know thatsomething is a problem, it won't be on your &quot;prohibited&quot;list. In that case, it will go right on being a problem until younotice it and you'll probably notice it because somebody takesadvantage of it.</P><PCLASS="para">Second, the default permit stance tends to degenerate into an escalating&quot;arms race&quot; between the firewall maintainer and the users. The maintainer prepares defenses against user action or inaction (or, hejust keeps saying, &quot;Don't do that!&quot;); the users come up withfascinating new and insecure ways of doing things; and the processrepeats, again and again. The maintainer is forever playing catch up. Inevitably, there are going to be periods of vulnerability between thetime that a system is set up, the time that a security problem isdiscovered, and the time that the maintainer is able to respond to theproblem. No matter how vigilant and cooperative everyone may be, somethings are going to fall through the cracks forever: because themaintainer has never heard about them, because he has never realized thefull security consequences; or because he just plain hasn't had time towork on the problem.</P><PCLASS="para">About the only people who benefit from the default permit stance arepotential attackers, because the firewall maintainer can't possiblyclose all the holes, is forever stuck in &quot;fire fighting&quot;mode, and is likely to be far too busy to notice an attacker'sactivities.</P><PCLASS="para">For example, consider the problem of sharing files with collaboratorsat another site. Your users' first idea will probably be to use thesame tool that they use to share filesinternally&nbsp;- <SPANCLASS="acronym">NFS</SPAN>. The problem is,<SPANCLASS="acronym">NFS</SPAN> is completely unsafe to allow across a firewall(for reasons discussed in <ACLASS="xref"HREF="ch02_01.htm"TITLE="Internet Services">Chapter 2, <CITECLASS="chapter">Internet Services</CITE></A> and <ACLASS="xref"HREF="ch08_01.htm"TITLE="Configuring Internet Services">Chapter 8, <CITECLASS="chapter">Configuring Internet Services</CITE></A>). Suppose that your stance is a permissive one,and you haven't specifically told your users that it's not safe to run<SPANCLASS="acronym">NFS</SPAN> across your firewall (or even if you have toldthem, but don't remember or don't care). In this case, you're probablygoing to find yourself running <SPANCLASS="acronym">NFS</SPAN> across yourfirewall because it seemed like a good idea to somebody who didn'tunderstand (or care about) the security issues. If your stanceis default deny, on the other hand, your users' attempts to set up<SPANCLASS="acronym">NFS</SPAN> will fail.  You'll need to explain why to them,suggest alternatives that are more secure (such as<SPANCLASS="acronym">FTP</SPAN>), and look for ways to make those more securealternatives easier to use without sacrificing security.<ACLASS="indexterm"NAME="AUTOID-1541"></A><ACLASS="indexterm"NAME="AUTOID-1542"></A><ACLASS="indexterm"NAME="AUTOID-1543"></A><ACLASS="indexterm"NAME="AUTOID-1544"></A><ACLASS="indexterm"NAME="AUTOID-1545"></A><ACLASS="indexterm"NAME="AUTOID-1546"></A></P></DIV></DIV><DIVCLASS="htmlnav"><P></P><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch03_04.htm"TITLE="3.4 Weakest Link"><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 3.4 Weakest Link"BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="book"HREF="index.htm"TITLE="Building Internet Firewalls"><IMGSRC="../gifs/txthome.gif"ALT="Building Internet Firewalls"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch03_06.htm"TITLE="3.6 Universal Participation"><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 3.6 Universal Participation"BORDER="0"></A></TD></TR><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172">3.4 Weakest Link</TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="index"HREF="index/idx_a.htm"TITLE="Book Index"><IMGSRC="../gifs/index.gif"ALT="Book Index"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172">3.6 Universal Participation</TD></TR></TABLE><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><PCLASS="nav"><FONTSIZE="-1">[ <AHREF="../index.htm"TITLE="The Networking CD Bookshelf">Library Home</A> | <AHREF="../dnsbind/index.htm"TITLE="DNS &amp; BIND">DNS &amp; BIND</A> | <AHREF="../tcpip/index.htm"TITLE="TCP/IP Network Administration">TCP/IP</A> | <AHREF="../sendmail/index.htm"TITLE="sendmail">sendmail</A> | <AHREF="../smdref/index.htm"TITLE="sendmail Desktop Reference">sendmail Reference</A> | <AHREF="index.htm"TITLE="Building Internet Firewalls">Firewalls</A> | <AHREF="../puis/index.htm"TITLE="Practical UNIX &amp; Internet Security">Practical Security</A> ]</FONT></P></DIV></BODY></HTML>