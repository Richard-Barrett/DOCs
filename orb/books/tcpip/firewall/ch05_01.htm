<HTML><HEAD><TITLE>[Chapter 5] Bastion Hosts</TITLE><METANAME="DC.title"CONTENT="Building Internet Firewalls"><METANAME="DC.creator"CONTENT="D. Brent Chapman &amp; Elizabeth D. Zwicky"><METANAME="DC.publisher"CONTENT="O'Reilly &amp; Associates, Inc."><METANAME="DC.date"CONTENT="1999-02-04T00:14:04Z"><METANAME="DC.type"CONTENT="Text.Monograph"><METANAME="DC.format"CONTENT="text/html"SCHEME="MIME"><METANAME="DC.source"CONTENT="1-56592-124-0"SCHEME="ISBN"><METANAME="DC.language"CONTENT="en-US"><METANAME="generator"CONTENT="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><LINKREV="made"HREF="mailto:online-books@oreilly.com"TITLE="Online Books Comments"><LINKREL="up"HREF="part02.htm"TITLE="II. Building Firewalls"><LINKREL="prev"HREF="ch04_05.htm"TITLE="4.5 What the Future Holds"><LINKREL="next"HREF="ch05_02.htm"TITLE="5.2 Special Kinds of Bastion Hosts"></HEAD><BODYBGCOLOR="#FFFFFF"TEXT="#000000"><DIVCLASS="htmlnav"><H1><IMGSRC="gifs/smbanner.gif"ALT="Building Internet Firewalls"USEMAP="#srchmap"BORDER="0"></H1><MAPNAME="srchmap"><AREASHAPE="RECT"COORDS="0,0,466,65"HREF="index.htm"ALT="Building Internet Firewalls"><AREASHAPE="RECT"COORDS="467,0,514,18"HREF="../search/fsrch.htm"ALT="Search this book"></MAP><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch04_05.htm"TITLE="4.5 What the Future Holds"><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 4.5 What the Future Holds"BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><B><FONTFACE="ARIEL,HELVETICA,HELV,SANSERIF"SIZE="-1">Chapter 5</FONT></B></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch05_02.htm"TITLE="5.2 Special Kinds of Bastion Hosts"><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 5.2 Special Kinds of Bastion Hosts"BORDER="0"></A></TD></TR></TABLE>&nbsp;<HRALIGN="LEFT"WIDTH="515"TITLE="footer"></DIV><DIVCLASS="CHAPTER"><H1CLASS="chapter"><ACLASS="title"NAME="FIRE-05-CHP">5. Bastion Hosts</A></H1><DIVCLASS="htmltoc"><P><B>Contents:</B><BR><ACLASS="SECT1"HREF="#FIRE-05-S1-1"TITLE="5.1 General Principles">General Principles</A><BR><ACLASS="SECT1"HREF="ch05_02.htm"TITLE="5.2 Special Kinds of Bastion Hosts">Special Kinds of Bastion Hosts</A><BR><ACLASS="SECT1"HREF="ch05_03.htm"TITLE="5.3 Choosing a Machine">Choosing a Machine</A><BR><ACLASS="SECT1"HREF="ch05_04.htm"TITLE="5.4 Choosing a Physical Location">Choosing a Physical Location</A><BR><ACLASS="SECT1"HREF="ch05_05.htm"TITLE="5.5 Locating the Bastion Host on the Network">Locating the Bastion Host on the Network</A><BR><ACLASS="SECT1"HREF="ch05_06.htm"TITLE="5.6 Selecting Services Provided by the Bastion Host">Selecting Services Provided by theBastion Host</A><BR><ACLASS="SECT1"HREF="ch05_07.htm"TITLE="5.7 Don't Allow User Accounts on the Bastion Host">Don't Allow User Accounts on theBastion Host</A><BR><ACLASS="SECT1"HREF="ch05_08.htm"TITLE="5.8 Building a Bastion Host">Building a Bastion Host</A><BR><ACLASS="SECT1"HREF="ch05_09.htm"TITLE="5.9 Operating the Bastion Host ">Operating the Bastion Host </A><BR><ACLASS="SECT1"HREF="ch05_10.htm"TITLE="5.10 Protecting the Machine and Backups">Protecting the Machine and Backups</A></P><P></P></DIV><PCLASS="para"><ACLASS="indexterm"NAME="CH05BASTHOST"></A>A bastion host is your public presence on the Internet. Think of it asthe lobby of a building. Outsiders may not be able to go up the stairsand may not be able to get into the elevators, but they can walkfreely into the lobby and ask for what they want. (Whether or not theywill get what they ask for depends upon the building's securitypolicy.)  Like the lobby in your building, a bastion host is exposedto potentially hostile elements. The bastion host is the system thatany outsiders&nbsp;- friends or possible foes&nbsp;- must ordinarily connect withto access a system or a service that's inside your firewall.</P><PCLASS="para">By design, a bastion host is highly exposed, because its existence isknown to the Internet. For this reason, firewall builders and managersneed to concentrate security efforts on the bastion host. You shouldpay special attention to the host's security during initialconstruction and ongoing operation. Because the bastion host is themost exposed host, it also needs to be the most fortified host.</P><PCLASS="para">Although we talk about a single bastion host in this chapter andelsewhere in this book, remember there may be multiple bastion hostsin a firewall configuration. The number depends on a site's particularrequirements and resources, as discussed in <ACLASS="xref"HREF="ch04_01.htm"TITLE="Firewall Design">Chapter 4, <CITECLASS="chapter">Firewall Design</CITE></A>. Each isset up according to the same general principles, using the samegeneral techniques.</P><PCLASS="para">Bastion hosts are used with many different firewall approaches andarchitectures; most of the information in this chapter should berelevant regardless of whether you're building a bastion host to usewith a firewall based on packet filtering, proxying, or a hybridapproach. The principles and procedures for building a bastion hostare extensions of those for securing any host. You want to use them,or variations of them, for any other host that's security critical,and possibly for hosts that are critical in other ways (e.g.,major servers on your internal network).</P><DIVCLASS="sect1"><H2CLASS="sect1"><ACLASS="title"NAME="FIRE-05-S1-1">5.1 General Principles</A></H2><PCLASS="para">There are two basic principles for designing and building a bastionhost: Keep it simple, and be prepared for the bastion host to becompromised.<DLCLASS="variablelist"><DTCLASS="term"><EMCLASS="emphasis">Keep it simple</EM></DT><DDCLASS="listitem"><PCLASS="para">The simpler your bastion host is, the easier it is to secure.</P><PCLASS="para">Any service the bastion host offers could have softwarebugs or configuration errors in it, and any bugs or errors may lead tosecurity problems. Therefore, you want the bastion host to do as littleas possible. It should provide the smallest set of services with theleast privileges it possibly can, while still fulfilling its role.</P></DD><DTCLASS="term"><EMCLASS="emphasis">Be prepared for the bastion host to becompromised</EM></DT><DDCLASS="listitem"><PCLASS="para">Despite your bestefforts to ensure the security of the bastion host, break-ins canoccur. Don't be naive about it. Only by anticipating the worst, andplanning for it, will you be most likely to avert it. Always keep thequestion, &quot;What if the bastion host is compromised?&quot; inthe back of your mind as you go through the steps of securing themachine and the rest of the network.</P><PCLASS="para">Why do we emphasize this point? The reason is simple: the bastion hostis the machine most likely to be attacked because it's the machinemost accessible to the outside world. It's also the machine from whichattacks against your internal systems are most likely to come becausethe outside world probably can't talk to your internal systems directly. Do your best to ensure that the bastion host <EMCLASS="emphasis">won't</EM>get broken into, but keep in mind the question, &quot;What if itdoes?&quot;</P><PCLASS="para">In case the bastion host is broken into, you don't want that break-in tolead to a compromise of the entire firewall. You can prevent thisby not letting internal machines trust the bastion host any more than isabsolutely necessary for the bastion host to function. You will need tolook carefully at each service the bastion host provides to internalmachines, and determine, on a service-by-service basis, how much trustand privilege each service really needs to have. </P><PCLASS="para">Once you've made these decisions, you can use a number of mechanisms toenforce them. For example, you might install standard access controlmechanisms (passwords, authentication devices, etc.) on the internalhosts, or you might set up packet filtering between the bastion host andthe internal hosts.</P></DD></DL></P></DIV></DIV><DIVCLASS="htmlnav"><P></P><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch04_05.htm"TITLE="4.5 What the Future Holds"><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 4.5 What the Future Holds"BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="book"HREF="index.htm"TITLE="Building Internet Firewalls"><IMGSRC="../gifs/txthome.gif"ALT="Building Internet Firewalls"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch05_02.htm"TITLE="5.2 Special Kinds of Bastion Hosts"><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 5.2 Special Kinds of Bastion Hosts"BORDER="0"></A></TD></TR><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172">4.5 What the Future Holds</TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="index"HREF="index/idx_a.htm"TITLE="Book Index"><IMGSRC="../gifs/index.gif"ALT="Book Index"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172">5.2 Special Kinds of Bastion Hosts</TD></TR></TABLE><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><PCLASS="nav"><FONTSIZE="-1">[ <AHREF="../index.htm"TITLE="The Networking CD Bookshelf">Library Home</A> | <AHREF="../dnsbind/index.htm"TITLE="DNS &amp; BIND">DNS &amp; BIND</A> | <AHREF="../tcpip/index.htm"TITLE="TCP/IP Network Administration">TCP/IP</A> | <AHREF="../sendmail/index.htm"TITLE="sendmail">sendmail</A> | <AHREF="../smdref/index.htm"TITLE="sendmail Desktop Reference">sendmail Reference</A> | <AHREF="index.htm"TITLE="Building Internet Firewalls">Firewalls</A> | <AHREF="../puis/index.htm"TITLE="Practical UNIX &amp; Internet Security">Practical Security</A> ]</FONT></P></DIV></BODY></HTML>