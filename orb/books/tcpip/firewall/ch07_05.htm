<HTML><HEAD><TITLE>[Chapter 7] 7.5 Proxying Without a Proxy Server</TITLE><METANAME="DC.title"CONTENT="Building Internet Firewalls"><METANAME="DC.creator"CONTENT="D. Brent Chapman &amp; Elizabeth D. Zwicky"><METANAME="DC.publisher"CONTENT="O'Reilly &amp; Associates, Inc."><METANAME="DC.date"CONTENT="1999-02-04T00:19:05Z"><METANAME="DC.type"CONTENT="Text.Monograph"><METANAME="DC.format"CONTENT="text/html"SCHEME="MIME"><METANAME="DC.source"CONTENT="1-56592-124-0"SCHEME="ISBN"><METANAME="DC.language"CONTENT="en-US"><METANAME="generator"CONTENT="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><LINKREV="made"HREF="mailto:online-books@oreilly.com"TITLE="Online Books Comments"><LINKREL="up"HREF="ch07_01.htm"TITLE="7. Proxy Systems"><LINKREL="prev"HREF="ch07_04.htm"TITLE="7.4 Using Proxying with Internet Services"><LINKREL="next"HREF="ch07_06.htm"TITLE="7.6 Using SOCKS for Proxying"></HEAD><BODYBGCOLOR="#FFFFFF"TEXT="#000000"><DIVCLASS="htmlnav"><H1><IMGSRC="gifs/smbanner.gif"ALT="Building Internet Firewalls"USEMAP="#srchmap"BORDER="0"></H1><MAPNAME="srchmap"><AREASHAPE="RECT"COORDS="0,0,466,65"HREF="index.htm"ALT="Building Internet Firewalls"><AREASHAPE="RECT"COORDS="467,0,514,18"HREF="../search/fsrch.htm"ALT="Search this book"></MAP><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch07_04.htm"TITLE="7.4 Using Proxying with Internet Services"><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 7.4 Using Proxying with Internet Services"BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><B><FONTFACE="ARIEL,HELVETICA,HELV,SANSERIF"SIZE="-1">Chapter 7<BR>Proxy Systems</FONT></B></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch07_06.htm"TITLE="7.6 Using SOCKS for Proxying"><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 7.6 Using SOCKS for Proxying"BORDER="0"></A></TD></TR></TABLE>&nbsp;<HRALIGN="LEFT"WIDTH="515"TITLE="footer"></DIV><DIVCLASS="SECT1"><H2CLASS="sect1"><ACLASS="title"NAME="FIRE-07-S1-5">7.5 Proxying Without a Proxy Server</A></H2><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-7407"></A><ACLASS="indexterm"NAME="AUTOID-7410"></A><ACLASS="indexterm"NAME="AUTOID-7412"></A><ACLASS="indexterm"NAME="AUTOID-7414"></A><ACLASS="indexterm"NAME="AUTOID-7416"></A><ACLASS="indexterm"NAME="AUTOID-7418"></A>Some services, particularly the so-called&quot;store-and-forward&quot; services such as<SPANCLASS="acronym">SMTP</SPAN>, <SPANCLASS="acronym">NNTP</SPAN>, and<SPANCLASS="acronym">NTP</SPAN>, naturally support proxying. These servicesare all designed so that messages (email messages for<SPANCLASS="acronym">SMTP</SPAN>, Usenet news postings for<SPANCLASS="acronym">NNTP</SPAN>, and clock settings for<SPANCLASS="acronym">NTP</SPAN>) are received by a server and then stored untilthey can be forwarded to another appropriate server or servers. For<SPANCLASS="acronym">SMTP</SPAN>, the messages are forwarded towards an emailmessage's destination. For <SPANCLASS="acronym">NNTP</SPAN> and<SPANCLASS="acronym">NTP</SPAN>, the messages are forwarded to all neighborservers. With such a scheme, each intermediate server is effectivelyacting as a proxy for the original sender or server.</P><PCLASS="para">If you examine the &quot;Received:&quot; headers of incomingInternet email (these headers trace a message's path through thenetwork from sender to recipient), you quickly discover that very fewmessages travel directly from the sender's machine to the recipient'smachine. It's far more common these days for the message to passthrough at least four machines:</P><ULCLASS="itemizedlist"><LICLASS="listitem"><PCLASS="para">The sender's machine</P></LI><LICLASS="listitem"><PCLASS="para">The outgoing mail gateway at the sender's site (or the sender'sInternet service provider)</P></LI><LICLASS="listitem"><PCLASS="para">The incoming mail gateway at the recipient's site</P></LI><LICLASS="listitem"><PCLASS="para">Finally, the recipient's machine </P></LI></UL><PCLASS="para">Each of the intermediate servers (the mail gateways) is acting as aproxy server for the sender, even though the sender may not be dealingwith them directly. <ACLASS="xref"HREF="ch07_05.htm#FIRE-07-FIG-2"TITLE="Store-and-forward services (like SMTP) naturally support proxying">Figure 7.2</A> illustrates thissituation.</P><H4CLASS="figure"><ACLASS="title"NAME="FIRE-07-FIG-2">Figure 7.2: Store-and-forward services (like <SPANCLASS="acronym">SMTP</SPAN>)naturally support proxying</A></H4><IMGCLASS="graphic"SRC="figs/fire0702.gif"ALT="Figure 7.2"></DIV><DIVCLASS="htmlnav"><P></P><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch07_04.htm"TITLE="7.4 Using Proxying with Internet Services"><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 7.4 Using Proxying with Internet Services"BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="book"HREF="index.htm"TITLE="Building Internet Firewalls"><IMGSRC="../gifs/txthome.gif"ALT="Building Internet Firewalls"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch07_06.htm"TITLE="7.6 Using SOCKS for Proxying"><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 7.6 Using SOCKS for Proxying"BORDER="0"></A></TD></TR><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172">7.4 Using Proxying with Internet Services</TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="index"HREF="index/idx_a.htm"TITLE="Book Index"><IMGSRC="../gifs/index.gif"ALT="Book Index"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172">7.6 Using SOCKS for Proxying</TD></TR></TABLE><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><PCLASS="nav"><FONTSIZE="-1">[ <AHREF="../index.htm"TITLE="The Networking CD Bookshelf">Library Home</A> | <AHREF="../dnsbind/index.htm"TITLE="DNS &amp; BIND">DNS &amp; BIND</A> | <AHREF="../tcpip/index.htm"TITLE="TCP/IP Network Administration">TCP/IP</A> | <AHREF="../sendmail/index.htm"TITLE="sendmail">sendmail</A> | <AHREF="../smdref/index.htm"TITLE="sendmail Desktop Reference">sendmail Reference</A> | <AHREF="index.htm"TITLE="Building Internet Firewalls">Firewalls</A> | <AHREF="../puis/index.htm"TITLE="Practical UNIX &amp; Internet Security">Practical Security</A> ]</FONT></P></DIV></BODY></HTML>