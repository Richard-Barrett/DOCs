<HTML><HEAD><TITLE>[Chapter 7] 7.7 Using the TIS Internet Firewall Toolkit for Proxying</TITLE><METANAME="DC.title"CONTENT="Building Internet Firewalls"><METANAME="DC.creator"CONTENT="D. Brent Chapman &amp; Elizabeth D. Zwicky"><METANAME="DC.publisher"CONTENT="O'Reilly &amp; Associates, Inc."><METANAME="DC.date"CONTENT="1999-02-04T00:19:08Z"><METANAME="DC.type"CONTENT="Text.Monograph"><METANAME="DC.format"CONTENT="text/html"SCHEME="MIME"><METANAME="DC.source"CONTENT="1-56592-124-0"SCHEME="ISBN"><METANAME="DC.language"CONTENT="en-US"><METANAME="generator"CONTENT="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><LINKREV="made"HREF="mailto:online-books@oreilly.com"TITLE="Online Books Comments"><LINKREL="up"HREF="ch07_01.htm"TITLE="7. Proxy Systems"><LINKREL="prev"HREF="ch07_06.htm"TITLE="7.6 Using SOCKS for Proxying"><LINKREL="next"HREF="ch07_08.htm"TITLE="7.8 What If You Can't Proxy?"></HEAD><BODYBGCOLOR="#FFFFFF"TEXT="#000000"><DIVCLASS="htmlnav"><H1><IMGSRC="gifs/smbanner.gif"ALT="Building Internet Firewalls"USEMAP="#srchmap"BORDER="0"></H1><MAPNAME="srchmap"><AREASHAPE="RECT"COORDS="0,0,466,65"HREF="index.htm"ALT="Building Internet Firewalls"><AREASHAPE="RECT"COORDS="467,0,514,18"HREF="../search/fsrch.htm"ALT="Search this book"></MAP><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch07_06.htm"TITLE="7.6 Using SOCKS for Proxying"><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 7.6 Using SOCKS for Proxying"BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><B><FONTFACE="ARIEL,HELVETICA,HELV,SANSERIF"SIZE="-1">Chapter 7<BR>Proxy Systems</FONT></B></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch07_08.htm"TITLE="7.8 What If You Can't Proxy?"><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 7.8 What If You Can't Proxy?"BORDER="0"></A></TD></TR></TABLE>&nbsp;<HRALIGN="LEFT"WIDTH="515"TITLE="footer"></DIV><DIVCLASS="SECT1"><H2CLASS="sect1"><ACLASS="title"NAME="FIRE-07-S1-7">7.7 Using the <SPANCLASS="acronym">TIS</SPAN>Internet Firewall Toolkit for Proxying</A></H2><PCLASS="para"><ACLASS="indexterm"NAME="CH07PSTISFWTK"></A><ACLASS="indexterm"NAME="CH07TISFWTKPROX"></A>The free <SPANCLASS="acronym">TIS FWTK</SPAN>, from Trusted InformationSystems, includes a number of proxy servers of various types. The<SPANCLASS="acronym">TIS FWTK</SPAN> also provides a number of other tools forauthentication and other purposes, which are discussed whereappropriate in other chapters of this book. <ACLASS="xref"HREF="appb_01.htm"TITLE="Tools">Appendix B</A> provides information on how to get the<SPANCLASS="acronym">TIS FWTK</SPAN>.</P><PCLASS="para">Whereas <SPANCLASS="acronym">SOCKS</SPAN> attempts to provide a single, generalproxy, the <SPANCLASS="acronym">TIS FWTK</SPAN> provides individual proxies forthe most common Internet services (as shown in <ACLASS="xref"HREF="ch07_07.htm#FIRE-07-FIG-4"TITLE="Using the TIS FWTK for proxying">Figure 7.4</A>). The idea is that by using small separateprograms with a common configuration file, it can provide intelligentproxies that are provably safe, while still allowing centralcontrol. The result is an extremely flexible toolkit and a ratherlarge configuration file.</P><H4CLASS="figure"><ACLASS="title"NAME="FIRE-07-FIG-4">Figure 7.4: Using the <SPANCLASS="acronym">TIS FWTK</SPAN> for proxying</A></H4><IMGCLASS="graphic"SRC="figs/fire0704.gif"ALT="Figure 7.4"><DIVCLASS="sect2"><H3CLASS="sect2"><ACLASS="title"NAME="FIRE-07-S2-13">7.7.1 <SPANCLASS="acronym">FTP</SPAN> Proxying with<SPANCLASS="acronym">TIS FWTK</SPAN></A></H3><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-7603"></A>The <SPANCLASS="acronym">TIS FWTK</SPAN> provides <SPANCLASS="acronym">FTP</SPAN>proxying either with modified client programs or modified userprocedures (<EMCLASS="emphasis">ftp-gw</EM>). If you wish to use the samemachine to support proxied <SPANCLASS="acronym">FTP</SPAN> and straight<SPANCLASS="acronym">FTP</SPAN> (for example, allowing people on the Internetto pick up files from the same machine that does outbound proxying foryour users), the toolkit will support that but you will have to usemodified user procedures.</P><PCLASS="para">Using modified user procedures is the most common configuration forthe <SPANCLASS="acronym">TIS FWTK</SPAN>. The support formodified client programs is somewhat half-hearted (for example, nomodified clients or libraries are provided). Because it's a dedicated<SPANCLASS="acronym">FTP</SPAN> proxy, it provides logging, denial, and extrauser authentication of particular <SPANCLASS="acronym">FTP</SPAN> commands.</P></DIV><DIVCLASS="sect2"><H3CLASS="sect2"><ACLASS="title"NAME="FIRE-07-S2-14">7.7.2 Telnet and rlogin Proxying with<SPANCLASS="acronym">TIS FWTK</SPAN></A></H3><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-7619"></A><ACLASS="indexterm"NAME="AUTOID-7622"></A>The <SPANCLASS="acronym">TIS FWTK</SPAN> Telnet(<EMCLASS="emphasis">telnet-gw</EM>) and <EMCLASS="emphasis">rlogin</EM>(<EMCLASS="emphasis">rlogin-gw</EM>) proxies support modified userprocedures only. Users connect via Telnet or<EMCLASS="emphasis">rlogin</EM> to the proxy host, and instead of gettinga &quot;login&quot; prompt for the proxy host, they are presentedwith a prompt from the proxy program, allowing them to specify whathost to connect to (and whether to make an X connection if the<EMCLASS="emphasis">x-gw</EM> software is installed, as we describe in&quot;Other <SPANCLASS="acronym">TIS</SPAN> <SPANCLASS="acronym">FWTK</SPAN>Proxies&quot; below).</P></DIV><DIVCLASS="sect2"><H3CLASS="sect2"><ACLASS="title"NAME="FIRE-07-S2-15">7.7.3 Generic Proxying with <SPANCLASS="acronym">TIS FWTK</SPAN></A></H3><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-7637"></A>The <SPANCLASS="acronym">TIS FWTK</SPAN> provides a purelygeneric proxy, <EMCLASS="emphasis">plug-gw</EM>, which requires nomodifications to clients, but supports a limited range of protocolsand uses. It examines the address it received a connection from andthe port the connection came in on, and it creates a connection toanother host on an appropriate port. You can't specify which host itshould connect to while making that connection; it's determined by theincoming host. This makes <EMCLASS="emphasis">plug-gw</EM> inappropriatefor services that are employed by users, who rarely want to connect tothe same host every time. It provides logging but no other securityenhancements, and therefore needs to be used with caution even insituations where it's appropriate (e.g., for <SPANCLASS="acronym">NNTP</SPAN>connections).</P></DIV><DIVCLASS="sect2"><H3CLASS="sect2"><ACLASS="title"NAME="FIRE-07-S2-16">7.7.4 Other <SPANCLASS="acronym">TIS FWTK</SPAN>Proxies</A></H3><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-7647"></A><ACLASS="indexterm"NAME="AUTOID-7650"></A><ACLASS="indexterm"NAME="AUTOID-7653"></A><SPANCLASS="acronym">TIS FWTK</SPAN> proxies <SPANCLASS="acronym">HTTP</SPAN> and Gophervia the <EMCLASS="emphasis">http-gw</EM> program. This program supportseither modified clients or modified procedures. Most<SPANCLASS="acronym">HTTP</SPAN> clients support proxying; you just need totell them where the proxy server is. To use <EMCLASS="emphasis">http-gw</EM> with an <SPANCLASS="acronym">HTTP</SPAN> client that's notproxy-aware, you add <ACLASS="systemitem.url"HREF="http://firewall/">http://firewall/</A> in front ofthe <SPANCLASS="acronym">URL</SPAN>. Using it with a Gopher client that is notproxy-aware is slightly more complex, since all the host and portinformation has to be moved into the path specification.</P><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-7664"></A><EMCLASS="emphasis">x-gw</EM> is an X gateway. It provides some minimalsecurity by requiring confirmation from the user before allowing aremote X client to connect. The X gateway is started up by connectingto the Telnet or <EMCLASS="emphasis">rlogin</EM> proxy and typing&quot;x&quot;, which puts up a control window.<ACLASS="indexterm"NAME="AUTOID-7668"></A><ACLASS="indexterm"NAME="AUTOID-7669"></A></P></DIV></DIV><DIVCLASS="htmlnav"><P></P><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch07_06.htm"TITLE="7.6 Using SOCKS for Proxying"><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 7.6 Using SOCKS for Proxying"BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="book"HREF="index.htm"TITLE="Building Internet Firewalls"><IMGSRC="../gifs/txthome.gif"ALT="Building Internet Firewalls"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch07_08.htm"TITLE="7.8 What If You Can't Proxy?"><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 7.8 What If You Can't Proxy?"BORDER="0"></A></TD></TR><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172">7.6 Using SOCKS for Proxying</TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="index"HREF="index/idx_a.htm"TITLE="Book Index"><IMGSRC="../gifs/index.gif"ALT="Book Index"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172">7.8 What If You Can't Proxy?</TD></TR></TABLE><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><PCLASS="nav"><FONTSIZE="-1">[ <AHREF="../index.htm"TITLE="The Networking CD Bookshelf">Library Home</A> | <AHREF="../dnsbind/index.htm"TITLE="DNS &amp; BIND">DNS &amp; BIND</A> | <AHREF="../tcpip/index.htm"TITLE="TCP/IP Network Administration">TCP/IP</A> | <AHREF="../sendmail/index.htm"TITLE="sendmail">sendmail</A> | <AHREF="../smdref/index.htm"TITLE="sendmail Desktop Reference">sendmail Reference</A> | <AHREF="index.htm"TITLE="Building Internet Firewalls">Firewalls</A> | <AHREF="../puis/index.htm"TITLE="Practical UNIX &amp; Internet Security">Practical Security</A> ]</FONT></P></DIV></BODY></HTML>