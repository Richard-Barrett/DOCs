<HTML><HEAD><TITLE>[Chapter 7] 7.8 What If You Can't Proxy?</TITLE><METANAME="DC.title"CONTENT="Building Internet Firewalls"><METANAME="DC.creator"CONTENT="D. Brent Chapman &amp; Elizabeth D. Zwicky"><METANAME="DC.publisher"CONTENT="O'Reilly &amp; Associates, Inc."><METANAME="DC.date"CONTENT="1999-02-04T00:19:11Z"><METANAME="DC.type"CONTENT="Text.Monograph"><METANAME="DC.format"CONTENT="text/html"SCHEME="MIME"><METANAME="DC.source"CONTENT="1-56592-124-0"SCHEME="ISBN"><METANAME="DC.language"CONTENT="en-US"><METANAME="generator"CONTENT="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><LINKREV="made"HREF="mailto:online-books@oreilly.com"TITLE="Online Books Comments"><LINKREL="up"HREF="ch07_01.htm"TITLE="7. Proxy Systems"><LINKREL="prev"HREF="ch07_07.htm"TITLE="7.7 Using the TIS Internet Firewall Toolkit for Proxying"><LINKREL="next"HREF="ch08_01.htm"TITLE="8. Configuring Internet Services"></HEAD><BODYBGCOLOR="#FFFFFF"TEXT="#000000"><DIVCLASS="htmlnav"><H1><IMGSRC="gifs/smbanner.gif"ALT="Building Internet Firewalls"USEMAP="#srchmap"BORDER="0"></H1><MAPNAME="srchmap"><AREASHAPE="RECT"COORDS="0,0,466,65"HREF="index.htm"ALT="Building Internet Firewalls"><AREASHAPE="RECT"COORDS="467,0,514,18"HREF="../search/fsrch.htm"ALT="Search this book"></MAP><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch07_07.htm"TITLE="7.7 Using the TIS Internet Firewall Toolkit for Proxying"><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 7.7 Using the TIS Internet Firewall Toolkit for Proxying"BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><B><FONTFACE="ARIEL,HELVETICA,HELV,SANSERIF"SIZE="-1">Chapter 7<BR>Proxy Systems</FONT></B></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="CHAPTER"HREF="ch08_01.htm"TITLE="8. Configuring Internet Services"><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 8. Configuring Internet Services"BORDER="0"></A></TD></TR></TABLE>&nbsp;<HRALIGN="LEFT"WIDTH="515"TITLE="footer"></DIV><DIVCLASS="SECT1"><H2CLASS="sect1"><ACLASS="title"NAME="FIRE-07-S1-8">7.8 What If You Can't Proxy?</A></H2><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-7673"></A>You might find yourself unable to proxy a service for one of threereasons:</P><ULCLASS="itemizedlist"><LICLASS="listitem"><PCLASS="para">There's no proxy server available.</P></LI><LICLASS="listitem"><PCLASS="para">Proxying doesn't secure the service sufficiently.</P></LI><LICLASS="listitem"><PCLASS="para">You can't modify the client, and the protocol doesn't allow you to usemodified procedures.</P></LI></UL><PCLASS="para">We describe each of these situations in the following sections.</P><DIVCLASS="sect2"><H3CLASS="sect2"><ACLASS="title"NAME="FIRE-07-S2-17">7.8.1 No Proxy Server Is Available</A></H3><PCLASS="para">If the service is proxyable, but you can't find a modified-procedureserver or modified clients for your platform, you can always do thework yourself. Modifying a normal <SPANCLASS="acronym">TCP</SPAN> clientprogram to use <SPANCLASS="acronym">SOCKS</SPAN> is relatively trivial. As longas the <SPANCLASS="acronym">SOCKS</SPAN> libraries are available for theplatform you're interested in, it's usually a matter of changing a fewlibrary calls and recompiling. You do have to have the source for theclient.</P><PCLASS="para">Writing your own modified-procedure server is considerably moredifficult, because it means writing the server from scratch. </P></DIV><DIVCLASS="sect2"><H3CLASS="sect2"><ACLASS="title"NAME="FIRE-07-S2-18">7.8.2 Proxying Won't Secure the Service</A></H3><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-7694"></A>If you need to use a service that's inherently insecure, proxyingcan't do much for you. You're going to need to set up a victimmachine, as described in <ACLASS="xref"HREF="ch05_01.htm"TITLE="Bastion Hosts">Chapter 5</A>, and let peoplerun the service there. This may be difficult if you're using adual-homed nonrouting host to make a firewall where all connectionsmust be proxied; the victim machine is going to need to be on theInternet side of the dual-homed host.</P><PCLASS="para">Using an intelligent application-level server that filters outinsecure commands may help, but requires extreme caution inimplementing the server and may make important parts of the servicenonfunctional.</P></DIV><DIVCLASS="sect2"><H3CLASS="sect2"><ACLASS="title"NAME="FIRE-07-S2-19">7.8.3 Can't Modify Client or Procedures</A></H3><PCLASS="para">There are some services that just don't have room for modifying userprocedures (for example <EMCLASS="emphasis">ping</EM> and<EMCLASS="emphasis">traceroute)</EM>. Fortunately, services that don'tallow the user to pass any data to the server tend to be small,stupid, and safe. You may be able to safely provide them on thebastion host, letting users log in to the bastion host but giving thema shell that only allows them to run the un-proxyable services youwant to support.<ACLASS="indexterm"NAME="AUTOID-7704"></A></P></DIV></DIV><DIVCLASS="htmlnav"><P></P><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch07_07.htm"TITLE="7.7 Using the TIS Internet Firewall Toolkit for Proxying"><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 7.7 Using the TIS Internet Firewall Toolkit for Proxying"BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="book"HREF="index.htm"TITLE="Building Internet Firewalls"><IMGSRC="../gifs/txthome.gif"ALT="Building Internet Firewalls"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="CHAPTER"HREF="ch08_01.htm"TITLE="8. Configuring Internet Services"><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 8. Configuring Internet Services"BORDER="0"></A></TD></TR><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172">7.7 Using the TIS Internet Firewall Toolkit for Proxying</TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="index"HREF="index/idx_a.htm"TITLE="Book Index"><IMGSRC="../gifs/index.gif"ALT="Book Index"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172">8. Configuring Internet Services</TD></TR></TABLE><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><PCLASS="nav"><FONTSIZE="-1">[ <AHREF="../index.htm"TITLE="The Networking CD Bookshelf">Library Home</A> | <AHREF="../dnsbind/index.htm"TITLE="DNS &amp; BIND">DNS &amp; BIND</A> | <AHREF="../tcpip/index.htm"TITLE="TCP/IP Network Administration">TCP/IP</A> | <AHREF="../sendmail/index.htm"TITLE="sendmail">sendmail</A> | <AHREF="../smdref/index.htm"TITLE="sendmail Desktop Reference">sendmail Reference</A> | <AHREF="index.htm"TITLE="Building Internet Firewalls">Firewalls</A> | <AHREF="../puis/index.htm"TITLE="Practical UNIX &amp; Internet Security">Practical Security</A> ]</FONT></P></DIV></BODY></HTML>