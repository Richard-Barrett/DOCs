<HTML><HEAD><TITLE>[Chapter 8] 8.15 Network Information Service/Yellow Pages (NIS/YP)</TITLE><METANAME="DC.title"CONTENT="Building Internet Firewalls"><METANAME="DC.creator"CONTENT="D. Brent Chapman &amp; Elizabeth D. Zwicky"><METANAME="DC.publisher"CONTENT="O'Reilly &amp; Associates, Inc."><METANAME="DC.date"CONTENT="1999-02-04T00:26:46Z"><METANAME="DC.type"CONTENT="Text.Monograph"><METANAME="DC.format"CONTENT="text/html"SCHEME="MIME"><METANAME="DC.source"CONTENT="1-56592-124-0"SCHEME="ISBN"><METANAME="DC.language"CONTENT="en-US"><METANAME="generator"CONTENT="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><LINKREV="made"HREF="mailto:online-books@oreilly.com"TITLE="Online Books Comments"><LINKREL="up"HREF="ch08_01.htm"TITLE="8. Configuring Internet Services"><LINKREL="prev"HREF="ch08_14.htm"TITLE="8.14 Network File System (NFS)"><LINKREL="next"HREF="ch08_16.htm"TITLE="8.16 X11 Window System"></HEAD><BODYBGCOLOR="#FFFFFF"TEXT="#000000"><DIVCLASS="htmlnav"><H1><IMGSRC="gifs/smbanner.gif"ALT="Building Internet Firewalls"USEMAP="#srchmap"BORDER="0"></H1><MAPNAME="srchmap"><AREASHAPE="RECT"COORDS="0,0,466,65"HREF="index.htm"ALT="Building Internet Firewalls"><AREASHAPE="RECT"COORDS="467,0,514,18"HREF="../search/fsrch.htm"ALT="Search this book"></MAP><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch08_14.htm"TITLE="8.14 Network File System (NFS)"><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 8.14 Network File System (NFS)"BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><B><FONTFACE="ARIEL,HELVETICA,HELV,SANSERIF"SIZE="-1">Chapter 8<BR>Configuring Internet Services</FONT></B></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch08_16.htm"TITLE="8.16 X11 Window System"><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 8.16 X11 Window System"BORDER="0"></A></TD></TR></TABLE>&nbsp;<HRALIGN="LEFT"WIDTH="515"TITLE="footer"></DIV><DIVCLASS="SECT1"><H2CLASS="sect1"><ACLASS="title"NAME="FIRE-08-S1-15">8.15 Network Information Service/YellowPages (<SPANCLASS="acronym">NIS/YP</SPAN>)</A></H2><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-16291"></A><ACLASS="indexterm"NAME="AUTOID-16294"></A><SPANCLASS="acronym">NIS/YP</SPAN> is designed to provide distributed access tocentralized administrative information (such as host tables, passwordfiles, site-wide email aliases, and so on) shared by machines at asite.</P><PCLASS="para">The main problem with <SPANCLASS="acronym">NIS/YP</SPAN> is that its securityisn't good enough to adequately protect some of the data itcontains. In particular, a site's <SPANCLASS="acronym">NIS/YP</SPAN> serversgenerally contain the shared password file (equivalent to the<EMCLASS="emphasis">/etc/passwd</EM> file on a single system) for thesite, complete with encrypted passwords. All you need to get data froman <SPANCLASS="acronym">NIS/YP</SPAN> server is the <SPANCLASS="acronym">NIS/YP</SPAN>domain name with which the data is associated. An attacker who cantalk to a site's <SPANCLASS="acronym">NIS/YP</SPAN> server, and who can guesswhat the site has chosen as its <SPANCLASS="acronym">NIS/YP</SPAN> domain name(often the same as, or a derivative of, their regular Internet domainname), can request any information the server has. If the attackergets their shared password file, these passwords can be cracked at theattacker's leisure.</P><BLOCKQUOTECLASS="note"><PCLASS="para"><STRONG>NOTE:</STRONG> <SPANCLASS="acronym">NIS/YP</SPAN> transfers include the encrypted passwordseven if the machines are configured to use shadow passwords and theencrypted passwords are not readable on the <SPANCLASS="acronym">NIS/YP</SPAN>server.</P></BLOCKQUOTE><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-16311"></A>There is a revised version of <SPANCLASS="acronym">NIS/YP</SPAN>, called<SPANCLASS="acronym">NIS</SPAN>+, available from somevendors. <SPANCLASS="acronym">NIS</SPAN>+ has not achieved wide acceptance,partly because of licensing and compatibility issues, but mostlybecause the majority of sites have managed to work around thedeficiencies of <SPANCLASS="acronym">NIS/YP</SPAN> already, and thereforearen't motivated to switch to something new. <SPANCLASS="acronym">NIS</SPAN>+improves security only if it is configured so that it will not support<SPANCLASS="acronym">NIS/YP</SPAN>. If you configure <SPANCLASS="acronym">NIS</SPAN>+to support <SPANCLASS="acronym">NIS/YP</SPAN> clients (and because few<SPANCLASS="acronym">NIS</SPAN>+ clients are available, most<SPANCLASS="acronym">NIS</SPAN>+ sites do use it in this mode), it is nomore secure than original <SPANCLASS="acronym">NIS/YP</SPAN>.</P><PCLASS="para">A few <SPANCLASS="acronym">NIS/YP</SPAN> servers (notably Sun's) support aconfiguration file called <EMCLASS="emphasis">securenets</EM>. This allowsyou to use <SPANCLASS="acronym">IP</SPAN> address authentication to controlwhich hosts your <SPANCLASS="acronym">NIS/YP</SPAN> server will release datato. This is an order of magnitude improvement in<SPANCLASS="acronym">NIS/YP</SPAN> security. It changes<SPANCLASS="acronym">NIS/YP</SPAN> attacks from guessing games (guess thedomain name and the <SPANCLASS="acronym">NIS/YP</SPAN> server and you get afree prize) to requiring you to do all the same guessing and then goto serious effort to determine what addresses the<SPANCLASS="acronym">NIS/YP</SPAN> server will respond to and forge packetsfrom them. Unfortunately, an order of magnitude is probably not enoughof an improvement for data as crucial as your encryptedpasswords. While <EMCLASS="emphasis">securenets</EM> (if you have itavailable) will protect you from casual attackers who want to get intoany site they can, it will not protect you from an attacker who knowsyour site and wants to attack it in particular.</P><PCLASS="para">The trick, then, is to keep an attacker from being able to talk to your<SPANCLASS="acronym">NIS/YP</SPAN> servers.</P><DIVCLASS="sect2"><H3CLASS="sect2"><ACLASS="title"NAME="FIRE-08-S2-55">8.15.1 Packet Filtering Characteristics of<SPANCLASS="acronym">NIS/YP</SPAN></A></H3><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-16340"></A><SPANCLASS="acronym">NIS/YP</SPAN> is an <SPANCLASS="acronym">RPC</SPAN>-based service,generally provided over <SPANCLASS="acronym">UDP</SPAN>. As mentioned in <ACLASS="xref"HREF="ch06_01.htm"TITLE="Packet Filtering">Chapter 6</A>, it's very difficult to handle<SPANCLASS="acronym">RPC</SPAN>-based services with a packet filtering system,because the servers normally don't use predictable port numbers. Whilethe port numbers to be used are too unpredictable for a packetfiltering system to cope with, they're not so unpredictable that anattacker can't find them. (If nothing else, the attacker could trysending <SPANCLASS="acronym">NIS/YP</SPAN> requests to all ports, to see whichrespond as they would expect an <SPANCLASS="acronym">NIS/YP</SPAN> server to.)</P></DIV><DIVCLASS="sect2"><H3CLASS="sect2"><ACLASS="title"NAME="FIRE-08-S2-56">8.15.2 Proxying Characteristics of<SPANCLASS="acronym">NIS/YP</SPAN></A></H3><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-16355"></A><SPANCLASS="acronym">RPC</SPAN>-based protocols are almost as unpleasant toproxy as they are to allow with packet filtering; they cannot beadequately handled with generic proxies. A dedicated<SPANCLASS="acronym">NIS/YP</SPAN> proxy server would be possible, but we donot know of one, except for the proxying capabilities available with<SPANCLASS="acronym">NIS</SPAN>+. In any case, proxying alone does notadequately deal with the vulnerabilities of <SPANCLASS="acronym">NIS/YP</SPAN>.</P></DIV><DIVCLASS="sect2"><H3CLASS="sect2"><ACLASS="title"NAME="FIRE-08-S2-59">8.15.3 Summary of <SPANCLASS="acronym">NIS/YP</SPAN>Recommendations </A></H3><ULCLASS="itemizedlist"><LICLASS="listitem"><PCLASS="para">Don't allow <SPANCLASS="acronym">NIS/YP</SPAN> across your firewall.</P></LI></UL></DIV></DIV><DIVCLASS="htmlnav"><P></P><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch08_14.htm"TITLE="8.14 Network File System (NFS)"><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 8.14 Network File System (NFS)"BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="book"HREF="index.htm"TITLE="Building Internet Firewalls"><IMGSRC="../gifs/txthome.gif"ALT="Building Internet Firewalls"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch08_16.htm"TITLE="8.16 X11 Window System"><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 8.16 X11 Window System"BORDER="0"></A></TD></TR><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172">8.14 Network File System (NFS)</TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="index"HREF="index/idx_a.htm"TITLE="Book Index"><IMGSRC="../gifs/index.gif"ALT="Book Index"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172">8.16 X11 Window System</TD></TR></TABLE><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><PCLASS="nav"><FONTSIZE="-1">[ <AHREF="../index.htm"TITLE="The Networking CD Bookshelf">Library Home</A> | <AHREF="../dnsbind/index.htm"TITLE="DNS &amp; BIND">DNS &amp; BIND</A> | <AHREF="../tcpip/index.htm"TITLE="TCP/IP Network Administration">TCP/IP</A> | <AHREF="../sendmail/index.htm"TITLE="sendmail">sendmail</A> | <AHREF="../smdref/index.htm"TITLE="sendmail Desktop Reference">sendmail Reference</A> | <AHREF="index.htm"TITLE="Building Internet Firewalls">Firewalls</A> | <AHREF="../puis/index.htm"TITLE="Practical UNIX &amp; Internet Security">Practical Security</A> ]</FONT></P></DIV></BODY></HTML>