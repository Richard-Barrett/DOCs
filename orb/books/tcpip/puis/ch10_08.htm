<HTML><HEAD><TITLE>[Chapter 10] 10.8 Managing Log Files</TITLE><METANAME="DC.title"CONTENT="Practical UNIX &amp; Internet Security"><METANAME="DC.creator"CONTENT="Simson Garfinkel &amp; Gene Spafford"><METANAME="DC.publisher"CONTENT="O'Reilly &amp; Associates, Inc."><METANAME="DC.date"CONTENT="1999-02-04T00:07:47Z"><METANAME="DC.type"CONTENT="Text.Monograph"><METANAME="DC.format"CONTENT="text/html"SCHEME="MIME"><METANAME="DC.source"CONTENT="1-56592-148-8"SCHEME="ISBN"><METANAME="DC.language"CONTENT="en-US"><METANAME="generator"CONTENT="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><LINKREV="made"HREF="mailto:online-books@oreilly.com"TITLE="Online Books Comments"><LINKREL="up"HREF="ch10_01.htm"TITLE="10. Auditing and Logging"><LINKREL="prev"HREF="ch10_07.htm"TITLE="10.7 Handwritten Logs"><LINKREL="next"HREF="ch11_01.htm"TITLE="11. Protecting Against Programmed Threats"></HEAD><BODYBGCOLOR="#FFFFFF"TEXT="#000000"><DIVCLASS="htmlnav"><H1><IMGSRC="gifs/smbanner.gif"ALT="Practical UNIX &amp; Internet Security"USEMAP="#srchmap"BORDER="0"></H1><MAPNAME="srchmap"><AREASHAPE="RECT"COORDS="0,0,466,65"HREF="index.htm"ALT="Practical UNIX &amp; Internet Security"><AREASHAPE="RECT"COORDS="467,0,514,18"HREF="../search/psrch.htm"ALT="Search this book"></MAP><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch10_07.htm"TITLE="10.7 Handwritten Logs"><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 10.7 Handwritten Logs"BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><B><FONTFACE="ARIEL,HELVETICA,HELV,SANSERIF"SIZE="-1">Chapter 10<BR>Auditing and Logging</FONT></B></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="CHAPTER"HREF="ch11_01.htm"TITLE="11. Protecting Against Programmed Threats"><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 11. Protecting Against Programmed Threats"BORDER="0"></A></TD></TR></TABLE>&nbsp;<HRALIGN="LEFT"WIDTH="515"TITLE="footer"></DIV><DIVCLASS="SECT1"><H2CLASS="sect1"><ACLASS="title"NAME="PUIS-CHP-10-SECT-8">10.8 Managing Log Files</A></H2><PCLASS="para">There <ACLASS="indexterm"NAME="AUTOID-14568"></A>areseveral final suggestions we can make about log files. The firsthas to do with backups. We strongly recommend that you ensure thatall of your log files are copied to your backup media on a regularbasis, preferably daily. The timing of the backups should be suchthat any file that is periodically reset is copied to the <ACLASS="indexterm"NAME="AUTOID-14571"></A>backups before the reset is performed. This willensure that you have a series of records over time to show systemaccess and behavior.</P><PCLASS="para">Our second suggestion concerns how often to review the logfiles. We recommend that you do this at least daily. Keeping logrecords does you little service if you do not review them on a regularbasis. Log files can reveal problems with your hardware, with yournetwork configuration, and (of course) with your security. Consequently,you must review the logs regularly to note when a problem is actuallypresent. If you delay for too long, the problem may become moresevere; if there has been an intruder, he or she may have the timeto edit the log files, change your security mechanisms, and do dirtydeeds before you take notice.</P><PCLASS="para">Our third suggestion concerns how you process your log messages.Typically, log messages record nothing of particular interest. Thus,every time you review the logs (possibly daily, or several timesa day, if you take our previous suggestion), you are faced withmany lines of boring, familiar messages. The problem with this scenariois that you may become so accustomed to seeing this material thatyou get in the habit of making only a cursory scan of the messagesto see if something is wrong, and this way you can easily miss animportant message.</P><PCLASS="para">To address this problem, our advice is to filter the messagesthat you actually look at to reduce them to a more manageable collection.To do so requires some care, however. You do not want to write afilter that selects those important things you want to see and discardsthe rest. Such a system is likely to result in an important messagebeing discarded without being read. Instead, you should filter outthe boring messages, being as specific as you can with your patternmatching, and pass everything else to you to be read. Periodically,you should also study unfiltered log messages to be sure that youare not missing anything of importance.</P><PCLASS="para">Our last suggestion hints at our comments in <ACLASS="xref"HREF="ch27_01.htm"TITLE="Who Do You Trust?">Chapter 27, <CITECLASS="chapter">Who Do You Trust?</CITE></A>,Who Do You Trust? Don't <ACLASS="indexterm"NAME="AUTOID-14579"></A>trust your logs completely! Logs can often bealtered or deleted by an intruder who obtains superuser privileges.Local users with physical access or appropriate knowledge of thesystem may be able to falsify or circumvent logging mechanisms.And, of course, software errors and system errors may result inlogs not being properly collected and saved. Thus, you need to developredundant scanning and logging mechanisms: because something isnot logged does not mean it didn't happen.</P><PCLASS="para">Of course, simply because something was logged doesn'tmean it did happen, either&nbsp;- someone may cause entries tobe written to logs to throw you off the case of a real problem orpoint a false accusation at someone else. These deceptions are easyto create with <EMCLASS="emphasis">syslog</EM> if you haven'tprotected the network port from messages originating outside yoursite!<ACLASS="indexterm"NAME="AUTOID-14584"></A><ACLASS="indexterm"NAME="AUTOID-14587"></A></P></DIV><DIVCLASS="htmlnav"><P></P><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch10_07.htm"TITLE="10.7 Handwritten Logs"><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 10.7 Handwritten Logs"BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="book"HREF="index.htm"TITLE="Practical UNIX &amp; Internet Security"><IMGSRC="../gifs/txthome.gif"ALT="Practical UNIX &amp; Internet Security"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="CHAPTER"HREF="ch11_01.htm"TITLE="11. Protecting Against Programmed Threats"><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 11. Protecting Against Programmed Threats"BORDER="0"></A></TD></TR><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172">10.7 Handwritten Logs</TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="index"HREF="index/idx_0.htm"TITLE="Book Index"><IMGSRC="../gifs/index.gif"ALT="Book Index"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172">11. Protecting Against Programmed Threats</TD></TR></TABLE><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><PCLASS="nav"><FONTSIZE="-1">[ <AHREF="../index.htm"TITLE="The Networking CD Bookshelf">Library Home</A> | <AHREF="../dnsbind/index.htm"TITLE="DNS &amp; BIND">DNS &amp; BIND</A> | <AHREF="../tcpip/index.htm"TITLE="TCP/IP Network Administration">TCP/IP</A> | <AHREF="../sendmail/index.htm"TITLE="sendmail">sendmail</A> | <AHREF="../smdref/index.htm"TITLE="sendmail Desktop Reference">sendmail Reference</A> | <AHREF="../firewall/index.htm"TITLE="Building Internet Firewalls">Firewalls</A> | <AHREF="index.htm"TITLE="Practical UNIX &amp; Internet Security">Practical Security</A> ]</FONT></P></DIV></BODY></HTML>