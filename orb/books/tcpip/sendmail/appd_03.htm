<HTML><HEAD><TITLE>[Appendix D] D.3 K Command's -d switch</TITLE><METANAME="DC.title"CONTENT="sendmail"><METANAME="DC.creator"CONTENT="Bryan Costales &amp; Eric Allman"><METANAME="DC.publisher"CONTENT="O'Reilly &amp; Associates, Inc."><METANAME="DC.date"CONTENT="1999-01-06T22:50:22Z"><METANAME="DC.type"CONTENT="Text.Monograph"><METANAME="DC.format"CONTENT="text/html"SCHEME="MIME"><METANAME="DC.source"CONTENT="1-56592-222-0"SCHEME="ISBN"><METANAME="DC.language"CONTENT="en-US"><METANAME="generator"CONTENT="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><LINKREV="made"HREF="mailto:online-books@oreilly.com"TITLE="Online Books Comments"><LINKREL="up"HREF="appd_01.htm"TITLE="D. Sun Enhancements"><LINKREL="prev"HREF="appd_02.htm"TITLE="D.2 Backward Compatibility"><LINKREL="next"HREF="appd_04.htm"TITLE="D.4 L and G Configuration Commands"></HEAD><BODYBGCOLOR="#FFFFFF"TEXT="#000000"><DIVCLASS="htmlnav"><H1><IMGSRC="gifs/smbanner.gif"ALT="sendmail"USEMAP="#srchmap"BORDER="0"></H1><MAPNAME="srchmap"><AREASHAPE="RECT"COORDS="0,0,466,65"HREF="index.htm"ALT="sendmail"><AREASHAPE="RECT"COORDS="467,0,514,18"HREF="../search/ssrch.htm"ALT="Search this book"></MAP><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="appd_02.htm"TITLE="D.2 Backward Compatibility"><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: D.2 Backward Compatibility"BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><B><FONTFACE="ARIEL,HELVETICA,HELV,SANSERIF"SIZE="-1">Appendix D<BR>Sun Enhancements</FONT></B></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="appd_04.htm"TITLE="D.4 L and G Configuration Commands"><IMGSRC="../gifs/txtnexta.gif"ALT="Next: D.4 L and G Configuration Commands"BORDER="0"></A></TD></TR></TABLE>&nbsp;<HRALIGN="LEFT"WIDTH="515"TITLE="footer"></DIV><DIVCLASS="SECT1"><H2CLASS="sect1"><ACLASS="title"NAME="SML2-AP-D-SECT-3">D.3 K Command's -d switch</A></H2><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-63450"></A>Old Sun configuration files could transfer all locallydeliverable mail to a central mail hub. The assumption was that themail hub possessed a superset of all aliases and so would beauthoritative about final delivery.  Unfortunately, this assumptiontended to cause unnecessary traffic to be sent to the mail hub andcould cause congestion at the mail hub.</P><PCLASS="para">In an NIS or NIS+ environment the assumption that the mail hubis authoritative may not be valid, because (in theory) every clientmachine can have equal access to authoritative aliasing information.With &quot;domainwide&quot; alias support, local addresses can beresolved at the sending client.  The mail hub is then free to justhandle Internet traffic.</P><PCLASS="para">The <CODECLASS="literal">-d</CODE> switch to the <CODECLASS="literal">K</CODE> configurationcommand (see <ACLASS="xref"HREF="ch33_03.htm"TITLE="The K Configuration Command">Section 33.3</A>) declares a map to bedomainwide.  Such a map is presumed to be available through out an NISor NIS+ domain.  The <CODECLASS="literal">-d</CODE> switch is useful only with aliasmaps and affects <EMCLASS="emphasis">sendmail</EM>'s behavior in twoways:</P><DLCLASS="variablelist"><DTCLASS="term"><EMCLASS="emphasis">Address qualification</EM></DT><DDCLASS="listitem"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-63466"></A><ACLASS="indexterm"NAME="AUTOID-63469"></A>An unqualified recipient address is one that lacks an<CODECLASS="literal">@host</CODE> part.  Such addresses should not be propagated in anunqualified form, so if the <CODECLASS="literal">-d</CODE> switch is specified for amap and if a username is found in that map, the name is fullyqualified by appending an <CODECLASS="literal">@</CODE> and the NIS or NIS+domain.[2] Otherwise, if a username is found in a local alias map,the name is fully qualified by appending an <CODECLASS="literal">@</CODE> and thehostname of the local host.  Otherwise, the username is fullyqualified by appending an <CODECLASS="literal">@</CODE> and the hostname of the mailhub.</P><BLOCKQUOTECLASS="footnote"><PCLASS="para">[2] This gives addresses a special property. If an address isqualified with an NIS or NIS+ domain, Sun's<EMCLASS="emphasis">sendmail</EM> presumes that the name can be resolved correctlyanywhere in the specified domain.</P></BLOCKQUOTE></DD><DTCLASS="term"><EMCLASS="emphasis">Selective alias expansion</EM></DT><DDCLASS="listitem"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-63484"></A><ACLASS="indexterm"NAME="AUTOID-63487"></A>If an address is qualified with an NIS or NIS+ domain, theuser part should be alias expanded only by looking it up in adomainwide alias map.  Otherwise, if an address is unqualified or anaddress is qualified with the local hostname, the user part should bealias expanded only by looking it up in the manner specified in the<EMCLASS="emphasis">/etc/nsswitch.conf</EM> file.  Otherwise, if an address isqualified with a nonlocal hostname, the mail message is forwarded tothat specified host for resolution.</P></DD></DL></DIV><DIVCLASS="htmlnav"><P></P><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="appd_02.htm"TITLE="D.2 Backward Compatibility"><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: D.2 Backward Compatibility"BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="book"HREF="index.htm"TITLE="sendmail"><IMGSRC="../gifs/txthome.gif"ALT="sendmail"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="appd_04.htm"TITLE="D.4 L and G Configuration Commands"><IMGSRC="../gifs/txtnexta.gif"ALT="Next: D.4 L and G Configuration Commands"BORDER="0"></A></TD></TR><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172">D.2 Backward Compatibility</TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="index"HREF="index/idx_0.htm"TITLE="Book Index"><IMGSRC="../gifs/index.gif"ALT="Book Index"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172">D.4 L and G Configuration Commands</TD></TR></TABLE><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><PCLASS="nav"><FONTSIZE="-1">[ <AHREF="../index.htm"TITLE="The Networking CD Bookshelf">Library Home</A> | <AHREF="../dnsbind/index.htm"TITLE="DNS &amp; BIND">DNS &amp; BIND</A> | <AHREF="../tcpip/index.htm"TITLE="TCP/IP Network Administration">TCP/IP</A> | <AHREF="index.htm"TITLE="sendmail">sendmail</A> | <AHREF="../smdref/index.htm"TITLE="sendmail Desktop Reference">sendmail Reference</A> | <AHREF="../firewall/index.htm"TITLE="Building Internet Firewalls">Firewalls</A> | <AHREF="../puis/index.htm"TITLE="Practical UNIX &amp; Internet Security">Practical Security</A> ]</FONT></P></DIV></BODY></HTML>