<HTML><HEAD><TITLE>[Chapter 1] 1.7 The Envelope</TITLE><METANAME="DC.title"CONTENT="sendmail"><METANAME="DC.creator"CONTENT="Bryan Costales &amp; Eric Allman"><METANAME="DC.publisher"CONTENT="O'Reilly &amp; Associates, Inc."><METANAME="DC.date"CONTENT="1999-01-06T18:32:18Z"><METANAME="DC.type"CONTENT="Text.Monograph"><METANAME="DC.format"CONTENT="text/html"SCHEME="MIME"><METANAME="DC.source"CONTENT="1-56592-222-0"SCHEME="ISBN"><METANAME="DC.language"CONTENT="en-US"><METANAME="generator"CONTENT="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><LINKREV="made"HREF="mailto:online-books@oreilly.com"TITLE="Online Books Comments"><LINKREL="up"HREF="ch01_01.htm"TITLE="1. Introduction"><LINKREL="prev"HREF="ch01_06.htm"TITLE="1.6 The Body"><LINKREL="next"HREF="ch01_08.htm"TITLE="1.8 Things to Try"></HEAD><BODYBGCOLOR="#FFFFFF"TEXT="#000000"><DIVCLASS="htmlnav"><H1><IMGSRC="gifs/smbanner.gif"ALT="sendmail"USEMAP="#srchmap"BORDER="0"></H1><MAPNAME="srchmap"><AREASHAPE="RECT"COORDS="0,0,466,65"HREF="index.htm"ALT="sendmail"><AREASHAPE="RECT"COORDS="467,0,514,18"HREF="../search/ssrch.htm"ALT="Search this book"></MAP><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch01_06.htm"TITLE="1.6 The Body"><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 1.6 The Body"BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><B><FONTFACE="ARIEL,HELVETICA,HELV,SANSERIF"SIZE="-1">Chapter 1<BR>Introduction</FONT></B></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch01_08.htm"TITLE="1.8 Things to Try"><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 1.8 Things to Try"BORDER="0"></A></TD></TR></TABLE>&nbsp;<HRALIGN="LEFT"WIDTH="515"TITLE="footer"></DIV><DIVCLASS="SECT1"><H2CLASS="sect1"><ACLASS="title"NAME="SML2-CH-1-SECT-7">1.7 The Envelope</A></H2><PCLASS="para"><ACLASS="indexterm"NAME="SML2-CH-1-IX-ENVELOPE"></A><ACLASS="indexterm"NAME="AUTOID-996"></A><ACLASS="indexterm"NAME="AUTOID-1000"></A><ACLASS="indexterm"NAME="AUTOID-1004"></A>To handle delivery to diverse recipients, the<EMCLASS="emphasis">sendmail</EM> program uses the concept of an <EMCLASS="emphasis">envelope</EM>.This envelope is analogous to the physical envelopes that are used forpost office mail. Imagine that you want to send two copiesof a document: one to your friend in the office next to yoursand one to a friend across the country:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">To: friend1, friend2@remote</PRE></BLOCKQUOTE></P><PCLASS="para">After you photocopy the document, you stuffeach copy into a separate envelope. You hand one envelope to a clerk,who carries it next door and hands it to<CODECLASS="literal">friend1</CODE> in the next office. This is like deliveryon your local machine. The clerk drops the other copy in the slotat the corner mailbox, and the post office forwardsthat envelope across the country to <CODECLASS="literal">friend2@remote</CODE>.This is like <EMCLASS="emphasis">sendmail</EM> transporting a mail message toa remote machine.</P><PCLASS="para">To illustrate what an envelope is, consider one way in which<EMCLASS="emphasis">sendmail</EM> might run <EMCLASS="emphasis">/bin/mail</EM>, a program that performslocal delivery:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">          <ICLASS="lineannotation">deliver to friend1's mailbox</I>          <IMGSRC="../chars/darr.gif"ALT="-v">/bin/mail -d friend1        <ICLASS="lineannotation"> <IMGSRC="../chars/larr.gif"ALT="&lt;-"> sendmail runs</I>                <IMGSRC="../chars/uarr.gif"ALT="-^">                <ICLASS="lineannotation">the envelope recipient</I></PRE></BLOCKQUOTE></P><PCLASS="para">&#13;Here <EMCLASS="emphasis">sendmail</EM> runs <EMCLASS="emphasis">/bin/mail</EM> with a <CODECLASS="literal">-d</CODE>, whichtells <EMCLASS="emphasis">/bin/mail</EM> to append the mail message to friend1's mailbox.</P><PCLASS="para">Information that describes the sender or recipient, but is not part of themessage header, is considered envelope information. The two may or may notcontain the same information (a point we'llgloss over for now). In the case of <EMCLASS="emphasis">/bin/mail</EM>, theemail message showed two recipients in its header:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">To: friend1, friend2@remote        <ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> the header</I></PRE></BLOCKQUOTE></P><PCLASS="para">But the envelope information that is given to <EMCLASS="emphasis">/bin/mail</EM> showedonly one (the one appropriate to local delivery):</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">-d friend1                    <ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> specifies the envelope</I></PRE></BLOCKQUOTE></P><PCLASS="para">Now considerthe envelope of a message transported over the network.When sending network mail, <EMCLASS="emphasis">sendmail</EM> must give the remotesite a list of sender and recipients <EMCLASS="emphasis">separate from and before</EM> it sendsthe mail message (header and body).<ACLASS="xref"HREF="ch01_07.htm#SML2-CH-1-FIG-1"TITLE="A simplified conversation">Figure 1.2</A>shows this in a greatlysimplified conversation between the local <EMCLASS="emphasis">sendmail</EM> andthe remote machine's <EMCLASS="emphasis">sendmail</EM>.</P><H4CLASS="figure"><ACLASS="title"NAME="SML2-CH-1-FIG-1">Figure 1.2: A simplified conversation</A></H4><IMGCLASS="graphic"SRC="figs/sm0203.gif"ALT="Figure 1.2"><PCLASS="para">The local <EMCLASS="emphasis">sendmail</EM> tells the remote machine's <EMCLASS="emphasis">sendmail</EM>that there is mail from you (the <CODECLASS="literal">sender</CODE>) and for <CODECLASS="literal">friend2@remote</CODE>.It conveys this sender and recipient information <EMCLASS="emphasis">separate fromand before</EM> it transmits the mail message that contains the header. Because this information is conveyed separately fromthe message header, it is called the envelope.</P><PCLASS="para">There is only one recipient listed in the envelope, whereas twowere listed in the message header:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">To: friend1, friend2@remote</PRE></BLOCKQUOTE></P><PCLASS="para">The remote machine does not need to know about the local user,<CODECLASS="literal">friend1</CODE>, so that bit of recipient information is excluded from the envelope.</P><PCLASS="para">A given mail message can be sent by using many different envelopes(like the two here), but the header will be common to them all. <ACLASS="indexterm"NAME="AUTOID-1060"></A>&#13;</P></DIV><DIVCLASS="htmlnav"><P></P><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch01_06.htm"TITLE="1.6 The Body"><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 1.6 The Body"BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="book"HREF="index.htm"TITLE="sendmail"><IMGSRC="../gifs/txthome.gif"ALT="sendmail"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch01_08.htm"TITLE="1.8 Things to Try"><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 1.8 Things to Try"BORDER="0"></A></TD></TR><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172">1.6 The Body</TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="index"HREF="index/idx_0.htm"TITLE="Book Index"><IMGSRC="../gifs/index.gif"ALT="Book Index"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172">1.8 Things to Try</TD></TR></TABLE><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><PCLASS="nav"><FONTSIZE="-1">[ <AHREF="../index.htm"TITLE="The Networking CD Bookshelf">Library Home</A> | <AHREF="../dnsbind/index.htm"TITLE="DNS &amp; BIND">DNS &amp; BIND</A> | <AHREF="../tcpip/index.htm"TITLE="TCP/IP Network Administration">TCP/IP</A> | <AHREF="index.htm"TITLE="sendmail">sendmail</A> | <AHREF="../smdref/index.htm"TITLE="sendmail Desktop Reference">sendmail Reference</A> | <AHREF="../firewall/index.htm"TITLE="Building Internet Firewalls">Firewalls</A> | <AHREF="../puis/index.htm"TITLE="Practical UNIX &amp; Internet Security">Practical Security</A> ]</FONT></P></DIV></BODY></HTML>