<HTML><HEAD><TITLE>[Chapter 5] The sendmail.cf File</TITLE><METANAME="DC.title"CONTENT="sendmail"><METANAME="DC.creator"CONTENT="Bryan Costales &amp; Eric Allman"><METANAME="DC.publisher"CONTENT="O'Reilly &amp; Associates, Inc."><METANAME="DC.date"CONTENT="1999-01-06T18:33:39Z"><METANAME="DC.type"CONTENT="Text.Monograph"><METANAME="DC.format"CONTENT="text/html"SCHEME="MIME"><METANAME="DC.source"CONTENT="1-56592-222-0"SCHEME="ISBN"><METANAME="DC.language"CONTENT="en-US"><METANAME="generator"CONTENT="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><LINKREV="made"HREF="mailto:online-books@oreilly.com"TITLE="Online Books Comments"><LINKREL="up"HREF="part01.htm"TITLE="I. A Tutorial"><LINKREL="prev"HREF="ch04_04.htm"TITLE="4.4 Things to Try"><LINKREL="next"HREF="ch05_02.htm"TITLE="5.2 The Minimal File"></HEAD><BODYBGCOLOR="#FFFFFF"TEXT="#000000"><DIVCLASS="htmlnav"><H1><IMGSRC="gifs/smbanner.gif"ALT="sendmail"USEMAP="#srchmap"BORDER="0"></H1><MAPNAME="srchmap"><AREASHAPE="RECT"COORDS="0,0,466,65"HREF="index.htm"ALT="sendmail"><AREASHAPE="RECT"COORDS="467,0,514,18"HREF="../search/ssrch.htm"ALT="Search this book"></MAP><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch04_04.htm"TITLE="4.4 Things to Try"><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 4.4 Things to Try"BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><B><FONTFACE="ARIEL,HELVETICA,HELV,SANSERIF"SIZE="-1">Chapter 5</FONT></B></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch05_02.htm"TITLE="5.2 The Minimal File"><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 5.2 The Minimal File"BORDER="0"></A></TD></TR></TABLE>&nbsp;<HRALIGN="LEFT"WIDTH="515"TITLE="footer"></DIV><DIVCLASS="CHAPTER"><H1CLASS="chapter"><ACLASS="title"NAME="SML2-CH-5">5. The sendmail.cf File</A></H1><DIVCLASS="htmltoc"><P><B>Contents:</B><BR><ACLASS="sect1"HREF="#SML2-CH-5-SECT-1"TITLE="5.1 Overview">Overview</A><BR><ACLASS="sect1"HREF="ch05_02.htm"TITLE="5.2 The Minimal File">The Minimal File</A><BR><ACLASS="sect1"HREF="ch05_03.htm"TITLE="5.3 A Quick Tour">A Quick Tour</A><BR><ACLASS="sect1"HREF="ch05_04.htm"TITLE="5.4 Things to Try">Things to Try</A></P><P></P></DIV><PCLASS="para"></P><PCLASS="para">The lines of text in a <EMCLASS="emphasis">sendmail.cf</EM> file have been described by some as resembling modem noise andby others as resembling Mr. Dithers swearing in the comic strip <EMCLASS="emphasis">Blondie</EM>.<ACLASS="indexterm"NAME="SML2-CH-5-IX-SENDMAIL-CF-CONFIGURATION-FILE"></A></P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">R$+@$=W     <ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> sendmail.cf file</I>{$/{{.+     <ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> modem noise</I>!@#!@@!     <ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> Mr. Dithers swearing</I></PRE></BLOCKQUOTE></P><PCLASS="para">Constructs like the followingcan certainly be intimidating to the newcomer:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">R$+@$=W         $@$1@$H         user@thishost -&gt; user@hubR$=W!$+         $@$2@$H         thishost!user -&gt; user@hubR@$=W:$+        $@@$H:$2        @thishost:somethingR$+%$=W         $@$&gt;3$1@$2      user%thishost</PRE></BLOCKQUOTE></P><PCLASS="para">But think back to your early days of C programming. Did you feel any more comfortable with an expression like this?</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">#define getc(p)  (-(p)-&gt;_cnt&gt;=0? ((int)*(p)-&gt;_ptr++):_filbuf(p))</PRE></BLOCKQUOTE></P><PCLASS="para">Like any new language, learning the language that is used in the<EMCLASS="emphasis">sendmail.cf</EM> filerequires time and practice. In the chapters that follow,we introduce that language, but first we present an overviewof the <EMCLASS="emphasis">sendmail.cf</EM> file.&#13;</P><DIVCLASS="sect1"><H2CLASS="sect1"><ACLASS="title"NAME="SML2-CH-5-SECT-1">5.1 Overview</A></H2><PCLASS="para">The <EMCLASS="emphasis">sendmail.cf</EM> file is read andparsed by <EMCLASS="emphasis">sendmail</EM> every time <EMCLASS="emphasis">sendmail</EM> starts.It contains information that is necessary for <EMCLASS="emphasis">sendmail</EM> to run. It lists the locations of important files andspecifies the default permissions for those files. It contains options thatmodify <EMCLASS="emphasis">sendmail</EM>'s behavior. Most important, it containsrules and rule sets for rewriting addresses.</P><PCLASS="para">The <EMCLASS="emphasis">sendmail.cf</EM> configuration file is line-oriented.A configuration command, composed of a single letter, begins eachline:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">V7                  <ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-">  good</I> V7                 <ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-">  bad, does not begin a line</I>V7 Fw/etc/mxhosts   <ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-">  bad, two commands on one line</I>Fw/etc/mxhosts      <ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-">  good</I></PRE></BLOCKQUOTE></P><PCLASS="para">Each configuration command is followed by parameters that are specific to it.For example, the <CODECLASS="literal">V</CODE> command is followedby a number, whereas the <CODECLASS="literal">F</CODE> command is followedby the letter <CODECLASS="literal">w</CODE>, then the full pathname of a file.The complete list of configuration commands[1]is shown in<ACLASS="xref"HREF="ch05_01.htm#SML2-CH-5-TAB-0"TITLE="The sendmail.cf File's Configuration Commands">Table 5.1</A>.<ACLASS="indexterm"NAME="SML2-CH-5-IX-COMMANDS-CONFIGURATION"></A><ACLASS="indexterm"NAME="SML2-CH-5-IX-CONFIGURATION-COMMANDS"></A><ACLASS="indexterm"NAME="SML2-CH-5-IX-SENDMAIL-CF-CONFIGURATION-FILE-COMMANDS"></A></P><BLOCKQUOTECLASS="footnote"><PCLASS="para">[1] Note that other versions of <EMCLASS="emphasis">sendmail</EM>, such as Sun or IDA, mayhave more, fewer, or different commands. We don't document those otherversions in this book.</P></BLOCKQUOTE><TABLECLASS="table"><CAPTIONCLASS="table"><ACLASS="title"NAME="SML2-CH-5-TAB-0">Table 5.1: The sendmail.cf File's Configuration Commands</A></CAPTION><THEADCLASS="thead"><TRCLASS="row"VALIGN="TOP"><THCLASS="entry"ALIGN="LEFT"ROWSPAN="1"COLSPAN="1">Command</TH><THCLASS="entry"ALIGN="LEFT"ROWSPAN="1"COLSPAN="1">Description</TH></TR></THEAD><TBODYCLASS="tbody"><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">V</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Define configuration file version (beginning with V8.6)</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">M</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Define a mail delivery agent</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">D</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Define a macro</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">R</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Define a rewriting rule</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">S</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Declare a rule-set start</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">C</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Define a class macro</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">F</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Define a class macro from a file or a pipe</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">O</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Define an option</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">H</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Define a header</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">P</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Define delivery priorities</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">T</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Declare trusted users (ignored in V8.1, back in V8.7)</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">K</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Declare a keyed database (beginning with V8.1)</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">E</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Define an environment variable (beginning with V8.7)</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">L</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Include extended load average support (contributed software, not covered)</TD></TR></TBODY></TABLE><PCLASS="para">Some commands, such as <CODECLASS="literal">V</CODE> should appear only oncein your <EMCLASS="emphasis">sendmail.cf</EM> file.Others, such as <CODECLASS="literal">R</CODE>, may appear often.</P><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-2887"></A><ACLASS="indexterm"NAME="AUTOID-2890"></A>Blank lines and lines that beginwith the <CODECLASS="literal">#</CODE> character are considered comments and are ignored.A line that begins with either a tab or a space character is acontinuation of the preceding line:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen"># a commentV7     /Berkeley  <ICLASS="lineannotation">&lt;- continuation of V line above</I>  <IMGSRC="../chars/uarr.gif"ALT="-^"> <ICLASS="lineannotation">tab</I></PRE></BLOCKQUOTE></P><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-2898"></A><ACLASS="indexterm"NAME="AUTOID-2901"></A>Note that anything other than a command,a blank line,a space, a tab, or a <CODECLASS="literal">#</CODE> charactercauses an error. If the <EMCLASS="emphasis">sendmail</EM> program findssuch a character, itprints the following warning, ignores that line, and continues toread the configuration file:&#13;</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">sendmail.cf: line 15: unknown control line &quot;v6&quot;</PRE></BLOCKQUOTE></P><PCLASS="para">&#13;Here, <EMCLASS="emphasis">sendmail</EM> found a line in its <EMCLASS="emphasis">sendmail.cf</EM> filethat began with the letter <CODECLASS="literal">v</CODE>. Since a lowercase <CODECLASS="literal">v</CODE> is nota legal command, <EMCLASS="emphasis">sendmail</EM> printed a warning. The line number in thewarning is thatof the line in the <EMCLASS="emphasis">sendmail.cf</EM> file that began with theillegal character.</P><PCLASS="para">An example of each kind of command is illustrated in the followingsections. They areactual commands that you will see described throughout this tutorial.Don't be concerned if you don't understand the details at this time.All that is now mysterious will eventually become clear.&#13;</P></DIV></DIV><DIVCLASS="htmlnav"><P></P><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch04_04.htm"TITLE="4.4 Things to Try"><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 4.4 Things to Try"BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="book"HREF="index.htm"TITLE="sendmail"><IMGSRC="../gifs/txthome.gif"ALT="sendmail"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch05_02.htm"TITLE="5.2 The Minimal File"><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 5.2 The Minimal File"BORDER="0"></A></TD></TR><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172">4.4 Things to Try</TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="index"HREF="index/idx_0.htm"TITLE="Book Index"><IMGSRC="../gifs/index.gif"ALT="Book Index"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172">5.2 The Minimal File</TD></TR></TABLE><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><PCLASS="nav"><FONTSIZE="-1">[ <AHREF="../index.htm"TITLE="The Networking CD Bookshelf">Library Home</A> | <AHREF="../dnsbind/index.htm"TITLE="DNS &amp; BIND">DNS &amp; BIND</A> | <AHREF="../tcpip/index.htm"TITLE="TCP/IP Network Administration">TCP/IP</A> | <AHREF="index.htm"TITLE="sendmail">sendmail</A> | <AHREF="../smdref/index.htm"TITLE="sendmail Desktop Reference">sendmail Reference</A> | <AHREF="../firewall/index.htm"TITLE="Building Internet Firewalls">Firewalls</A> | <AHREF="../puis/index.htm"TITLE="Practical UNIX &amp; Internet Security">Practical Security</A> ]</FONT></P></DIV></BODY></HTML>