<HTML><HEAD><TITLE>[Chapter 8] 8.2 Why Rules?</TITLE><METANAME="DC.title"CONTENT="sendmail"><METANAME="DC.creator"CONTENT="Bryan Costales &amp; Eric Allman"><METANAME="DC.publisher"CONTENT="O'Reilly &amp; Associates, Inc."><METANAME="DC.date"CONTENT="1999-01-06T18:35:26Z"><METANAME="DC.type"CONTENT="Text.Monograph"><METANAME="DC.format"CONTENT="text/html"SCHEME="MIME"><METANAME="DC.source"CONTENT="1-56592-222-0"SCHEME="ISBN"><METANAME="DC.language"CONTENT="en-US"><METANAME="generator"CONTENT="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><LINKREV="made"HREF="mailto:online-books@oreilly.com"TITLE="Online Books Comments"><LINKREL="up"HREF="ch08_01.htm"TITLE="8. Addresses and Rules"><LINKREL="prev"HREF="ch08_01.htm"TITLE="8.1 A Fictional Network"><LINKREL="next"HREF="ch08_03.htm"TITLE="8.3 Rule Sets"></HEAD><BODYBGCOLOR="#FFFFFF"TEXT="#000000"><DIVCLASS="htmlnav"><H1><IMGSRC="gifs/smbanner.gif"ALT="sendmail"USEMAP="#srchmap"BORDER="0"></H1><MAPNAME="srchmap"><AREASHAPE="RECT"COORDS="0,0,466,65"HREF="index.htm"ALT="sendmail"><AREASHAPE="RECT"COORDS="467,0,514,18"HREF="../search/ssrch.htm"ALT="Search this book"></MAP><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch08_01.htm"TITLE="8.1 A Fictional Network"><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 8.1 A Fictional Network"BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><B><FONTFACE="ARIEL,HELVETICA,HELV,SANSERIF"SIZE="-1">Chapter 8<BR>Addresses and Rules</FONT></B></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch08_03.htm"TITLE="8.3 Rule Sets"><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 8.3 Rule Sets"BORDER="0"></A></TD></TR></TABLE>&nbsp;<HRALIGN="LEFT"WIDTH="515"TITLE="footer"></DIV><DIVCLASS="SECT1"><H2CLASS="sect1"><ACLASS="title"NAME="SML2-CH-8-SECT-2">8.2 Why Rules?</A></H2><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-4573"></A><ACLASS="indexterm"NAME="SML2-CH-8-IX-RULES"></A><ACLASS="indexterm"NAME="AUTOID-4578"></A>Rules in a <EMCLASS="emphasis">sendmail.cf</EM> file are used to rewrite (modify) mail addresses,to detect errors in addressing, and to select mail delivery agents.Addresses need to be rewritten because they can be specified in manyways, yet are required to be in particular forms bydelivery agents. To illustrate, consider<ACLASS="xref"HREF="ch08_02.htm#SML2-CH-8-FIG-5"TITLE="Rules modify addresses, detect errors, and select delivery agents">Figure 8.6</A>and the address</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">friend@uuhost</PRE></BLOCKQUOTE></P><H4CLASS="figure"><ACLASS="title"NAME="SML2-CH-8-FIG-5">Figure 8.6: Rules modify addresses, detect errors, and select delivery agents</A></H4><IMGCLASS="graphic"SRC="figs/sm0806.gif"ALT="Figure 8.6"><PCLASS="para">&#13;If the machine <CODECLASS="literal">uuhost</CODE> were connected to yours over a dial-upline, mail would likely be sent by UUCP,which requires addresses to be expressed in UUCP form:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">uuhost!friend</PRE></BLOCKQUOTE></P><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-4593"></A>Another role of <EMCLASS="emphasis">sendmail.cf</EM> rules is to detect(and reject) errors on the machine from which the mail originated.This prevents them from propagatingover the network. Mail to an address without a username is one such error:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">@neighbor</PRE></BLOCKQUOTE></P><PCLASS="para">It is better to detect this kind of error as early as possible, rather thanhaving the host <CODECLASS="literal">neighbor</CODE> reject it.</P><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-4602"></A>Delivery agents are the means used by <EMCLASS="emphasis">sendmail</EM> to actuallytransmit or deliver mail messages. Rules examine the addressof each envelope recipient and select the appropriate delivery agent.For example,</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">root@here.us.edu</PRE></BLOCKQUOTE></P><PCLASS="para">&#13;Here, rules detect that <CODECLASS="literal">here.us.edu</CODE> is the nameof the local machine and then select the <CODECLASS="literal">local</CODE>delivery agent to perform final delivery to the user <EMCLASS="emphasis">root</EM>'ssystem mailbox.</P><PCLASS="para">In the previous two chapters you were introduced to deliveryagent and macro definitions. In this chapter we will beginour coverage of rule sets: the way thoserule sets process addresses.&#13;</P></DIV><DIVCLASS="htmlnav"><P></P><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch08_01.htm"TITLE="8.1 A Fictional Network"><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 8.1 A Fictional Network"BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="book"HREF="index.htm"TITLE="sendmail"><IMGSRC="../gifs/txthome.gif"ALT="sendmail"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch08_03.htm"TITLE="8.3 Rule Sets"><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 8.3 Rule Sets"BORDER="0"></A></TD></TR><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172">8.1 A Fictional Network</TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="index"HREF="index/idx_0.htm"TITLE="Book Index"><IMGSRC="../gifs/index.gif"ALT="Book Index"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172">8.3 Rule Sets</TD></TR></TABLE><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><PCLASS="nav"><FONTSIZE="-1">[ <AHREF="../index.htm"TITLE="The Networking CD Bookshelf">Library Home</A> | <AHREF="../dnsbind/index.htm"TITLE="DNS &amp; BIND">DNS &amp; BIND</A> | <AHREF="../tcpip/index.htm"TITLE="TCP/IP Network Administration">TCP/IP</A> | <AHREF="index.htm"TITLE="sendmail">sendmail</A> | <AHREF="../smdref/index.htm"TITLE="sendmail Desktop Reference">sendmail Reference</A> | <AHREF="../firewall/index.htm"TITLE="Building Internet Firewalls">Firewalls</A> | <AHREF="../puis/index.htm"TITLE="Practical UNIX &amp; Internet Security">Practical Security</A> ]</FONT></P></DIV></BODY></HTML>