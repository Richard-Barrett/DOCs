<HTML><HEAD><TITLE>[Chapter 13] 13.2 Required Options</TITLE><METANAME="DC.title"CONTENT="sendmail"><METANAME="DC.creator"CONTENT="Bryan Costales &amp; Eric Allman"><METANAME="DC.publisher"CONTENT="O'Reilly &amp; Associates, Inc."><METANAME="DC.date"CONTENT="1999-01-06T18:37:07Z"><METANAME="DC.type"CONTENT="Text.Monograph"><METANAME="DC.format"CONTENT="text/html"SCHEME="MIME"><METANAME="DC.source"CONTENT="1-56592-222-0"SCHEME="ISBN"><METANAME="DC.language"CONTENT="en-US"><METANAME="generator"CONTENT="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><LINKREV="made"HREF="mailto:online-books@oreilly.com"TITLE="Online Books Comments"><LINKREL="up"HREF="ch13_01.htm"TITLE="13. Setting Options"><LINKREL="prev"HREF="ch13_01.htm"TITLE="13.1 Options: An Overview"><LINKREL="next"HREF="ch13_03.htm"TITLE="13.3 Testing the Options"></HEAD><BODYBGCOLOR="#FFFFFF"TEXT="#000000"><DIVCLASS="htmlnav"><H1><IMGSRC="gifs/smbanner.gif"ALT="sendmail"USEMAP="#srchmap"BORDER="0"></H1><MAPNAME="srchmap"><AREASHAPE="RECT"COORDS="0,0,466,65"HREF="index.htm"ALT="sendmail"><AREASHAPE="RECT"COORDS="467,0,514,18"HREF="../search/ssrch.htm"ALT="Search this book"></MAP><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch13_01.htm"TITLE="13.1 Options: An Overview"><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 13.1 Options: An Overview"BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><B><FONTFACE="ARIEL,HELVETICA,HELV,SANSERIF"SIZE="-1">Chapter 13<BR>Setting Options</FONT></B></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch13_03.htm"TITLE="13.3 Testing the Options"><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 13.3 Testing the Options"BORDER="0"></A></TD></TR></TABLE>&nbsp;<HRALIGN="LEFT"WIDTH="515"TITLE="footer"></DIV><DIVCLASS="SECT1"><H2CLASS="sect1"><ACLASS="title"NAME="SML2-CH-13-SECT-2">13.2 Required Options</A></H2><PCLASS="para">The <EMCLASS="emphasis">sendmail</EM> program offers over 70 options tochoose from. We will cover a few here and the rest in <ACLASS="xref"HREF="ch34_01.htm"TITLE="Options">Chapter 34</A>.  Recall that the purpose of our configurationfile is to forward all mail to a central mail hub. In keeping with thesimplicity of this task, you need to declare only those options shownin <ACLASS="indexterm"NAME="SML2-CH-13-IX-OPTIONS-SENDMAIL-REQUIRED"></A><ACLASS="indexterm"NAME="AUTOID-7044"></A><ACLASS="xref"HREF="ch13_02.htm#SML2-CH-13-TAB-0"TITLE="Some Required Options">Table 13.1</A> (abstracted from <ACLASS="xref"HREF="ch34_04.htm#SML2-CH-34-TAB-3"TITLE="All Options">Table 34.4</A> in <ACLASS="xref"HREF="ch34_04.htm"TITLE="Alphabetical Table of All Options">Section 34.4, "Alphabetical Table of All Options"</A>).[2]</P><BLOCKQUOTECLASS="footnote"><PCLASS="para">[2] For a description of the Type, leap ahead to <ACLASS="xref"HREF="ch34_05.htm"TITLE="Option Argument Types">Section 34.5, "Option Argument Types"</A>.</P></BLOCKQUOTE><TABLECLASS="table"><CAPTIONCLASS="table"><ACLASS="title"NAME="SML2-CH-13-TAB-0">Table 13.1: Some Required Options</A></CAPTION><THEADCLASS="thead"><TRCLASS="row"VALIGN="TOP"><THCLASS="entry"ALIGN="LEFT"ROWSPAN="1"COLSPAN="1">Option Name</TH><THCLASS="entry"ALIGN="LEFT"ROWSPAN="1"COLSPAN="1">Type</TH><THCLASS="entry"ALIGN="LEFT"ROWSPAN="1"COLSPAN="1"></TH><THCLASS="entry"ALIGN="LEFT"ROWSPAN="1"COLSPAN="1">Description</TH></TR></THEAD><TBODYCLASS="tbody"><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">QueueDirectory (<CODECLASS="literal">Q</CODE>)</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">String</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch34_08.htm#SML2-CH-34-SECT-8-48"TITLE="">Section 34.8.48, QueueDirectory (Q)</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Location of queue directory</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Timeout (<CODECLASS="literal">r</CODE>)</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">String</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch34_08.htm#SML2-CH-34-SECT-8-70"TITLE="">Section 34.8.70, Timeout (r)</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Set timeouts</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">DeliveryMode (<CODECLASS="literal">d</CODE>)</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Character</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch34_08.htm#SML2-CH-34-SECT-8-16"TITLE="">Section 34.8.16, DeliveryMode (d)</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Set delivery mode</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">TempFileMode (<CODECLASS="literal">F</CODE>)</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Octal</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch34_08.htm#SML2-CH-34-SECT-8-68"TITLE="">Section 34.8.68, TempFileMode (F)</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Permissions for temporary files</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">DefaultUser (<CODECLASS="literal">u</CODE>)</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">String</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch34_08.htm#SML2-CH-34-SECT-8-15"TITLE="">Section 34.8.15, DefaultUser (g)(u)</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Default delivery agent identity</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">LogLevel (<CODECLASS="literal">L</CODE>)</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Numeric</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch34_08.htm#SML2-CH-34-SECT-8-33"TITLE="">Section 34.8.33, LogLevel (L)</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Set (increase) logging level</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">OldStyleHeaders(<CODECLASS="literal">o</CODE>)</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Boolean</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch34_08.htm#SML2-CH-34-SECT-8-44"TITLE="">Section 34.8.44, OldStyleHeaders (o)</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Allow spaces in recipient lists</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">BlankSub(<CODECLASS="literal">B</CODE>)</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Character</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch34_08.htm#SML2-CH-34-SECT-8-5"TITLE="">Section 34.8.5, BlankSub (B)</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Unquoted space replacement</TD></TR></TBODY></TABLE><PCLASS="para">&#13;We'll describe each of these required options briefly,add them to the <EMCLASS="emphasis">client.cf</EM> file, and then test them.&#13;</P><DIVCLASS="sect2"><H3CLASS="sect2"><ACLASS="title"NAME="SML2-CH-13-SECT-2-1">13.2.1 The Location of the Queue Directory</A></H3><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-7124"></A><ACLASS="indexterm"NAME="AUTOID-7126"></A><ACLASS="indexterm"NAME="AUTOID-7129"></A><ACLASS="indexterm"NAME="AUTOID-7133"></A><ACLASS="indexterm"NAME="AUTOID-7135"></A><ACLASS="indexterm"NAME="AUTOID-7138"></A>We have already described queue directories (in <ACLASS="xref"HREF="ch03_01.htm#SML2-CH-3-SECT-1-2"TITLE="The Queue Directory">Section 3.1.2, "The Queue Directory"</A>).Queued mail always looks like <EMCLASS="emphasis">authentic</EM> mail to <EMCLASS="emphasis">sendmail</EM>.That is, the <EMCLASS="emphasis">sendmail</EM> program <EMCLASS="emphasis">trusts</EM> the mail it findsthere, believing that only <EMCLASS="emphasis">root</EM> placed it there.If the queue directory were world-writable (as <EMCLASS="emphasis">/tmp</EM> is),anyone could create queued mail and thereby create forged mailmessages. To help prevent forged mail, the queue directory shouldbe writable only by <EMCLASS="emphasis">root</EM>. Unfortunately, for the purposeof our exercises, this wouldprevent you from sending mail using the <EMCLASS="emphasis">client.cf</EM> file.You would need to be <EMCLASS="emphasis">root</EM>, which isn't desirable andmay not be possible.</P><PCLASS="para">Instead, we will temporarily declare the location of the queue directoryto be <EMCLASS="emphasis">/tmp</EM>.To help you to remember to change the <EMCLASS="emphasis">client.cf</EM> file later, add a comment now showing the need to make the change and the correct path to use:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">O QueueDirectory=/tmp           # BEWARE: use /var/spool/mqueue upon release</PRE></BLOCKQUOTE></P><PCLASS="para">Note that on some systems, <CODECLASS="literal">/var</CODE> needs to be replaced with <CODECLASS="literal">/usr</CODE>.&#13;</P></DIV><DIVCLASS="sect2"><H3CLASS="sect2"><ACLASS="title"NAME="SML2-CH-13-SECT-2-2">13.2.2 Limit the Life of Queued Messages</A></H3><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-7161"></A><ACLASS="indexterm"NAME="AUTOID-7164"></A><ACLASS="indexterm"NAME="AUTOID-7167"></A><ACLASS="indexterm"NAME="AUTOID-7170"></A><ACLASS="indexterm"NAME="AUTOID-7172"></A><ACLASS="indexterm"NAME="AUTOID-7174"></A><ACLASS="indexterm"NAME="AUTOID-7177"></A><ACLASS="indexterm"NAME="AUTOID-7180"></A>Mail is usually placed into the queue because it could not be transmittedimmediately. Periodically, <EMCLASS="emphasis">sendmail</EM> attempts to retransmiteach queued message. If the message has not been deliveredafter a reasonable interval, <EMCLASS="emphasis">sendmail</EM> sends a warning to the sender,informing the sender that the message has not yet been deliveredbut that <EMCLASS="emphasis">sendmail</EM> will continueto try. After a longer interval in the queue,messages that have not been successfully transmitted are bounced. The <CODECLASS="literal">Timeout</CODE> (<CODECLASS="literal">r</CODE>) option is used to specify both intervals:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">O Timeout.queuewarn=4hO Timeout.queuereturn=5d</PRE></BLOCKQUOTE></P><PCLASS="para">The <CODECLASS="literal">Timeout</CODE> (<CODECLASS="literal">r</CODE>) option is special in that it takes a dot and a keywordto tell it what to time out.<ACLASS="indexterm"NAME="AUTOID-7193"></A><ACLASS="indexterm"NAME="AUTOID-7195"></A><ACLASS="indexterm"NAME="AUTOID-7197"></A>In the first case the keyword <CODECLASS="literal">queuewarn</CODE> sets the warning interval.In the second, the keyword <CODECLASS="literal">queuereturn</CODE> sets the return (bounce) interval.(The complete list of keywords that apply to the <CODECLASS="literal">Timeout</CODE> optionis in <ACLASS="xref"HREF="ch34_08.htm#SML2-CH-34-SECT-8-70"TITLE="">Section 34.8.70</A>.)</P><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-7204"></A><ACLASS="indexterm"NAME="AUTOID-7207"></A>The <CODECLASS="literal">Timeout</CODE> option is one that takes a time interval as its argument.Here, <CODECLASS="literal">4h</CODE> represents four hours (if the message is undeliveredafter four hours, warn the sender and continue to try) and <CODECLASS="literal">5d</CODE> represents five days (return the message to thesender as bounced mail). The letterfollowing the number in each specifies the units.The <CODECLASS="literal">queuereturn</CODE>, for example,could have been represented like this:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">O Timeout.queuereturn=120h</PRE></BLOCKQUOTE></P><PCLASS="para">This tells <EMCLASS="emphasis">sendmail</EM> to bounce queued mail after 120 hours,which is the same as five days.</P><PCLASS="para">Five days may seem like a long time. After all, the mail hubshould always be up and always be accepting mail. But suppose thehub crashed on Friday evening and replacement parts weren'tavailable until Thursday morning. In this situation, queued mailon all the clients would start bouncing before the hub was repaired.</P><PCLASS="para">In choosing a value for the <CODECLASS="literal">Timeout</CODE> (<CODECLASS="literal">r</CODE>) option's <CODECLASS="literal">queuereturn</CODE> keyword, take into accountthe worst-case scenario you can imagine. If the hub has same-day service, a value of <CODECLASS="literal">1d</CODE> might be enough. If the hubhas to be shipped out for repair, you may want to consider a valuesuch as <CODECLASS="literal">14d</CODE> (two weeks).[3]&#13;</P><BLOCKQUOTECLASS="footnote"><PCLASS="para">[3] You should also consider including MX records for the hub (see <ACLASS="xref"HREF="ch21_03.htm"TITLE="Set Up MX Records">Section 21.3, "Set Up MX Records"</A>)so that mail will be sent to another server if the hub is down.</P></BLOCKQUOTE></DIV><DIVCLASS="sect2"><H3CLASS="sect2"><ACLASS="title"NAME="SML2-CH-13-SECT-2-3">13.2.3 The Default Delivery Mode</A></H3><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-7230"></A><ACLASS="indexterm"NAME="AUTOID-7233"></A><ACLASS="indexterm"NAME="AUTOID-7235"></A>There are several modes in which the <EMCLASS="emphasis">sendmail</EM> program can run.Each determines how <EMCLASS="emphasis">sendmail</EM> interactswith the program that invoked it. For the <EMCLASS="emphasis">client.cf</EM> file,you want the user's MUA to execute <EMCLASS="emphasis">sendmail</EM> formessage transmission but to give the appearance thatthe message was sent almost instantaneously. This preventsusers from waitingfor their prompt to return whenever the mail hub is busy.</P><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-7243"></A><ACLASS="indexterm"NAME="AUTOID-7245"></A>The delivery mode to use is called <EMCLASS="emphasis">background</EM> becauseit causes <EMCLASS="emphasis">sendmail</EM> to accept a message and then runin the background (thus allowing the MUA to continue on).The delivery mode is set with the <CODECLASS="literal">DeliveryMode</CODE> (<CODECLASS="literal">d</CODE>) option:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">O DeliveryMode=background</PRE></BLOCKQUOTE></P><PCLASS="para">Note that <EMCLASS="emphasis">sendmail</EM> recognizes only the <CODECLASS="literal">b</CODE> of <CODECLASS="literal">background</CODE>. So you will sometimes find this same declaration in other configuration files more succinctlyexpressed like this:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">O DeliveryMode=b</PRE></BLOCKQUOTE></P><PCLASS="para">Other possible values for the <CODECLASS="literal">DeliveryMode</CODE> (<CODECLASS="literal">d</CODE>) option are documented in<ACLASS="xref"HREF="ch34_08.htm#SML2-CH-34-SECT-8-16"TITLE="">Section 34.8.16</A>.&#13;</P></DIV><DIVCLASS="sect2"><H3CLASS="sect2"><ACLASS="title"NAME="SML2-CH-13-SECT-2-4">13.2.4 The Default File Permissions</A></H3><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-7266"></A><ACLASS="indexterm"NAME="AUTOID-7268"></A><ACLASS="indexterm"NAME="AUTOID-7271"></A><ACLASS="indexterm"NAME="AUTOID-7274"></A><ACLASS="indexterm"NAME="AUTOID-7276"></A><ACLASS="indexterm"NAME="AUTOID-7279"></A><ACLASS="indexterm"NAME="AUTOID-7282"></A>The <EMCLASS="emphasis">sendmail</EM> program frequently needs to create new files (such as files in its queue).The file permissions that are given to each created file are determined bythe value of the <CODECLASS="literal">TempFileMode</CODE> (<CODECLASS="literal">F</CODE>) option.That value can range from 0600 (readableand writable only by <EMCLASS="emphasis">sendmail</EM>) to 0666 (readable and writableby anyone in the world). For security, we'll selectthe first value&nbsp;- the most restrictive:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">O TempFileMode=0600</PRE></BLOCKQUOTE></P><PCLASS="para">Note that the value must be expressed in octal notation. (See <EMCLASS="emphasis">chmod</EM>(1)for details.)The <CODECLASS="literal">TempFileMode</CODE> (<CODECLASS="literal">F</CODE>) option is further documented in <ACLASS="xref"HREF="ch34_08.htm#SML2-CH-34-SECT-8-68"TITLE="">Section 34.8.68</A>.&#13;</P></DIV><DIVCLASS="sect2"><H3CLASS="sect2"><ACLASS="title"NAME="SML2-CH-13-SECT-2-5">13.2.5 The Default User Identities</A></H3><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-7299"></A><ACLASS="indexterm"NAME="AUTOID-7302"></A><ACLASS="indexterm"NAME="AUTOID-7305"></A><ACLASS="indexterm"NAME="AUTOID-7308"></A>Again, for security, <EMCLASS="emphasis">sendmail</EM> tries to avoid running as <EMCLASS="emphasis">root</EM>whenever possible. When delivering failed mail to your <EMCLASS="emphasis">~/dead.letter</EM>file, for example, it runs as you. If it finds itself in a situationin which it must not be <EMCLASS="emphasis">root</EM> but cannot otherwise decide on a realuser's identity, <EMCLASS="emphasis">sendmail</EM> assumes the identity of the userdefined by the <CODECLASS="literal">DefaultUser</CODE> (<CODECLASS="literal">u</CODE>) option:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">O DefaultUser=1:1</PRE></BLOCKQUOTE></P><PCLASS="para">The <EMCLASS="emphasis">uid</EM> under which to run (thenumber to the left of the colon) ishere defined to be 1 (for the user <EMCLASS="emphasis">daemon</EM>).The <EMCLASS="emphasis">gid</EM> under which to run (the number to the rightof the colon) is here defined as 1(for the group <EMCLASS="emphasis">daemon</EM>).</P><PCLASS="para">The values given to these options may also be names:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">O DefaultUser=daemon:daemon</PRE></BLOCKQUOTE></P><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-7328"></A>At security-conscious sites these are often set tothe user <EMCLASS="emphasis">nobody</EM> and the group <EMCLASS="emphasis">nogroup</EM>.The <CODECLASS="literal">DefaultUser</CODE> (<CODECLASS="literal">u</CODE>) option is further documented in <ACLASS="xref"HREF="ch34_08.htm#SML2-CH-34-SECT-8-15"TITLE="">Section 34.8.15</A>.&#13;</P></DIV><DIVCLASS="sect2"><H3CLASS="sect2"><ACLASS="title"NAME="SML2-CH-13-SECT-2-6">13.2.6 The Default Logging Level</A></H3><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-7339"></A><ACLASS="indexterm"NAME="AUTOID-7341"></A>Recall that the <CODECLASS="literal">DeliveryMode</CODE> (<CODECLASS="literal">d</CODE>) option told <EMCLASS="emphasis">sendmail</EM> to run in the background.Because it is running in the background,<EMCLASS="emphasis">sendmail</EM> should not print information about itsactivities to your screen. On the other hand, you do want torecord information about its activities to help solve futureproblems.</P><PCLASS="para">The method used by <EMCLASS="emphasis">sendmail</EM> to record its activities is called <EMCLASS="emphasis">logging</EM>.[4]<ACLASS="indexterm"NAME="AUTOID-7355"></A><ACLASS="indexterm"NAME="AUTOID-7357"></A>The setting of the <CODECLASS="literal">LogLevel</CODE> (<CODECLASS="literal">L</CODE>) option allows you to turn loggingcompletely off or to specify a logging level. The higher thelogging level, the more detailed the information that is logged. That is,low levels log only serious problems, middle levels also log statisticalinformation, and high levels include debugging information.</P><BLOCKQUOTECLASS="footnote"><PCLASS="para">[4] The actual mechanism used is called <EMCLASS="emphasis">syslog</EM>(3) and is described in <ACLASS="xref"HREF="ch26_01.htm"TITLE="Logging and Statistics">Chapter 26, <CITECLASS="chapter">Logging and Statistics</CITE></A>.</P></BLOCKQUOTE><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">O LogLevel=9</PRE></BLOCKQUOTE></P><PCLASS="para">Here, we've chosen a level of 9. This is a middle level, which,in addition to causing serious problems to be logged, also causes statistics such as message size to be logged.</P><PCLASS="para">Typically, logged information is written by the system intoa file called <EMCLASS="emphasis">syslog</EM> by a means documented in <ACLASS="xref"HREF="ch26_01.htm#SML2-CH-26-SECT-1"TITLE="Logging with syslog">Section 26.1, "Logging with syslog"</A>.The <CODECLASS="literal">LogLevel</CODE> (<CODECLASS="literal">L</CODE>) option is further documented in <ACLASS="xref"HREF="ch34_08.htm#SML2-CH-34-SECT-8-33"TITLE="">Section 34.8.33</A>.&#13;</P></DIV><DIVCLASS="sect2"><H3CLASS="sect2"><ACLASS="title"NAME="SML2-CH-13-SECT-2-7">13.2.7 Accept Old-Style Lists of Addresses</A></H3><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-7375"></A><ACLASS="indexterm"NAME="AUTOID-7378"></A><ACLASS="indexterm"NAME="AUTOID-7380"></A><ACLASS="indexterm"NAME="AUTOID-7383"></A>The current standard for specifying multiple recipients isto separate each address from the others with commas. Unfortunately,this has not always been the standard;old software may still exist that separates addresses withspaces:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">abe,george,andrew      <ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> new style</I>abe george andrew      <ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> old style</I></PRE></BLOCKQUOTE></P><PCLASS="para">To prevent old software from breaking, you need to tell <EMCLASS="emphasis">sendmail</EM>that the use of spaces is acceptable and that if it finds such old-style lists,it should replace the spaces with commas. You tell <EMCLASS="emphasis">sendmail</EM>this by specifying the <CODECLASS="literal">OldStyleHeaders</CODE> (<CODECLASS="literal">o</CODE>) option:<ACLASS="indexterm"NAME="AUTOID-7394"></A></P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">O OldStyleHeaders=True</PRE></BLOCKQUOTE></P><PCLASS="para">The value is eithertrue (accept and convert) or false (don't accept). The <CODECLASS="literal">True</CODE>makes it true. In actual practice, only the first letter is recognized, andeither <CODECLASS="literal">T</CODE> or <CODECLASS="literal">t</CODE> will work. To turn it off,use <CODECLASS="literal">F</CODE> or <CODECLASS="literal">f</CODE> (for false) or omit the entiredeclaration. If you omit the true or false but include the option,it defaults to true.The <CODECLASS="literal">OldStyleHeaders</CODE> (<CODECLASS="literal">o</CODE>) option is further documented in <ACLASS="xref"HREF="ch34_08.htm#SML2-CH-34-SECT-8-44"TITLE="">Section 34.8.44</A>.&#13;</P></DIV><DIVCLASS="sect2"><H3CLASS="sect2"><ACLASS="title"NAME="SML2-CH-13-SECT-2-8">13.2.8 The Unquoted Space Replacement Character</A></H3><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-7410"></A>Recall from<ACLASS="xref"HREF="ch08_01.htm"TITLE="Addresses and Rules">Chapter 8, <CITECLASS="chapter">Addresses and Rules</CITE></A>,that any address can be split up into tokensin the workspace. The address is then rewritten according to rulesspecified in rule sets. After all the tokens have been(possibly) rewritten, they are rejoined to form an address again.</P><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-7414"></A><ACLASS="indexterm"NAME="AUTOID-7417"></A>The <CODECLASS="literal">BlankSub</CODE> (<CODECLASS="literal">B</CODE>) option exists for those times when two adjoiningtokens are just words (rather than a word and a separating character).For example, suppose the workspace began by containing thefollowing tokens:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">a @ b . c</PRE></BLOCKQUOTE></P><PCLASS="para">Then suppose some rule always changed the last two tokens intothe single word <CODECLASS="literal">LOCAL</CODE>. The result of rewriting wouldlook like this:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">a @ b LOCAL</PRE></BLOCKQUOTE></P><PCLASS="para">Here we have four tokens, the last two of which are text. Thequestion becomes: What do we insert between them? Unless youtell <EMCLASS="emphasis">sendmail</EM> to do otherwise, it always sticksa space between them. Therefore the default is to jointhese tokens together into this:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">a@b LOCAL</PRE></BLOCKQUOTE></P><PCLASS="para">Because we set the <CODECLASS="literal">OldStyleHeaders</CODE> (<CODECLASS="literal">o</CODE>) option above to true,this single (but odd) address wrongly becomes two:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">a@b, LOCAL</PRE></BLOCKQUOTE></P><PCLASS="para">To prevent this kind of mishap, we use the <CODECLASS="literal">BlankSub</CODE> (<CODECLASS="literal">B</CODE>) option tochange the replacement character from a space to a dot:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">O BlankSub=.                    # Replace unquoted spaces with a dot.</PRE></BLOCKQUOTE></P><PCLASS="para">With this declaration in the configuration file the previoustokens are joined together like this:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">a@b.LOCAL</PRE></BLOCKQUOTE></P><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-7445"></A><ACLASS="indexterm"NAME="AUTOID-7447"></A><ACLASS="indexterm"NAME="AUTOID-7449"></A><ACLASS="indexterm"NAME="AUTOID-7451"></A><ACLASS="indexterm"NAME="AUTOID-7453"></A>This forms a single address, which is what is wanted.But whatdoes the &quot;unquoted&quot; in the comment mean?</P><PCLASS="para">When parts of an address are surrounded in full quotation marks,those parts are viewed by <EMCLASS="emphasis">sendmail</EM> as a single token.Therefore an address like this:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">&quot;abe lincoln&quot;@wash.dc.gov</PRE></BLOCKQUOTE></P><PCLASS="para">is tokenized like this:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">&quot;abe lincoln&quot;   @   wash   .   dc   .   gov</PRE></BLOCKQUOTE></P><PCLASS="para">When these tokens are joined back together, the quoted words<CODECLASS="literal">abe</CODE> and <CODECLASS="literal">lincoln</CODE> are viewed by <EMCLASS="emphasis">sendmail</EM> as onetoken (with a space included), rather than two (with needof a space replacement character).[5]The <CODECLASS="literal">BlankSub</CODE> (<CODECLASS="literal">B</CODE>) option is further documented in <ACLASS="xref"HREF="ch34_08.htm#SML2-CH-34-SECT-8-5"TITLE="">Section 34.8.5</A>.<ACLASS="indexterm"NAME="AUTOID-7474"></A>&#13;</P><BLOCKQUOTECLASS="footnote"><PCLASS="para">[5] Actually, the address is sent as is to another site. The <CODECLASS="literal">BlankSub</CODE> (<CODECLASS="literal">B</CODE>)option at the other site causes the confusion, because the addressarrives there unquoted.</P></BLOCKQUOTE></DIV></DIV><DIVCLASS="htmlnav"><P></P><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch13_01.htm"TITLE="13.1 Options: An Overview"><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 13.1 Options: An Overview"BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="book"HREF="index.htm"TITLE="sendmail"><IMGSRC="../gifs/txthome.gif"ALT="sendmail"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch13_03.htm"TITLE="13.3 Testing the Options"><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 13.3 Testing the Options"BORDER="0"></A></TD></TR><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172">13.1 Options: An Overview</TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="index"HREF="index/idx_0.htm"TITLE="Book Index"><IMGSRC="../gifs/index.gif"ALT="Book Index"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172">13.3 Testing the Options</TD></TR></TABLE><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><PCLASS="nav"><FONTSIZE="-1">[ <AHREF="../index.htm"TITLE="The Networking CD Bookshelf">Library Home</A> | <AHREF="../dnsbind/index.htm"TITLE="DNS &amp; BIND">DNS &amp; BIND</A> | <AHREF="../tcpip/index.htm"TITLE="TCP/IP Network Administration">TCP/IP</A> | <AHREF="index.htm"TITLE="sendmail">sendmail</A> | <AHREF="../smdref/index.htm"TITLE="sendmail Desktop Reference">sendmail Reference</A> | <AHREF="../firewall/index.htm"TITLE="Building Internet Firewalls">Firewalls</A> | <AHREF="../puis/index.htm"TITLE="Practical UNIX &amp; Internet Security">Practical Security</A> ]</FONT></P></DIV></BODY></HTML>