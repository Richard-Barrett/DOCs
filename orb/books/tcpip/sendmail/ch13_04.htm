<HTML><HEAD><TITLE>[Chapter 13] 13.4 Sending Mail</TITLE><METANAME="DC.title"CONTENT="sendmail"><METANAME="DC.creator"CONTENT="Bryan Costales &amp; Eric Allman"><METANAME="DC.publisher"CONTENT="O'Reilly &amp; Associates, Inc."><METANAME="DC.date"CONTENT="1999-01-06T18:38:15Z"><METANAME="DC.type"CONTENT="Text.Monograph"><METANAME="DC.format"CONTENT="text/html"SCHEME="MIME"><METANAME="DC.source"CONTENT="1-56592-222-0"SCHEME="ISBN"><METANAME="DC.language"CONTENT="en-US"><METANAME="generator"CONTENT="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><LINKREV="made"HREF="mailto:online-books@oreilly.com"TITLE="Online Books Comments"><LINKREL="up"HREF="ch13_01.htm"TITLE="13. Setting Options"><LINKREL="prev"HREF="ch13_03.htm"TITLE="13.3 Testing the Options"><LINKREL="next"HREF="ch13_05.htm"TITLE="13.5 Things to Try"></HEAD><BODYBGCOLOR="#FFFFFF"TEXT="#000000"><DIVCLASS="htmlnav"><H1><IMGSRC="gifs/smbanner.gif"ALT="sendmail"USEMAP="#srchmap"BORDER="0"></H1><MAPNAME="srchmap"><AREASHAPE="RECT"COORDS="0,0,466,65"HREF="index.htm"ALT="sendmail"><AREASHAPE="RECT"COORDS="467,0,514,18"HREF="../search/ssrch.htm"ALT="Search this book"></MAP><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch13_03.htm"TITLE="13.3 Testing the Options"><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 13.3 Testing the Options"BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><B><FONTFACE="ARIEL,HELVETICA,HELV,SANSERIF"SIZE="-1">Chapter 13<BR>Setting Options</FONT></B></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch13_05.htm"TITLE="13.5 Things to Try"><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 13.5 Things to Try"BORDER="0"></A></TD></TR></TABLE>&nbsp;<HRALIGN="LEFT"WIDTH="515"TITLE="footer"></DIV><DIVCLASS="SECT1"><H2CLASS="sect1"><ACLASS="title"NAME="SML2-CH-13-SECT-4">13.4 Sending Mail</A></H2><PCLASS="para"><ACLASS="indexterm"NAME="SML2-CH-13-IX-SENDING-MESSAGES"></A><ACLASS="indexterm"NAME="SML2-CH-13-IX-MESSAGES-MAIL-SENDING"></A>The <EMCLASS="emphasis">client.cf</EM> file is now at a point in its developmentat which it can be used for sending mail. The mail that it generateswill cause problems in a few ways, but we will gloss over thoseillegalities for now and deal with them in the next chapter.You can send mail to yourself with <EMCLASS="emphasis">sendmail</EM> like this:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">% <CODECLASS="userinput"><B>/usr/lib/sendmail -Cclient.cf </B></CODE><CODECLASS="replaceable"><I>you</I></CODE></PRE></BLOCKQUOTE></P><PCLASS="para">After you enter this command,<EMCLASS="emphasis">sendmail</EM> pauses and waits for you to enter the email messageyou want to send. Enter a <CODECLASS="literal">To:</CODE> header line, a <CODECLASS="literal">Subject:</CODE>header line, a blank line (toseparate the header from the body), and a brief message to yourself,and conclude by entering a dot on a line by itself:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen"><CODECLASS="userinput"><B>To: you</B></CODE><CODECLASS="userinput"><B>Subject: testing</B></CODE><CODECLASS="userinput"><B></B></CODE><CODECLASS="userinput"><B>testing</B></CODE><CODECLASS="userinput"><B>.</B></CODE></PRE></BLOCKQUOTE></P><PCLASS="para">Your message is now forwarded to the mail hub machine, where(if all has gone well) it is delivered. Using your favoriteMUA, read the message you just sent and save it to a file. Thatfile will look something like this:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">From you@mail.us.edu Fri Dec 13 05:47:47 1996Return-Path: &lt;you@mail.us.edu&gt;Received: from here.us.edu (you@here.us.edu [123.45.67.8]) by mail.us.edu (8.8.4/8.8.4) with ESMTP id FAA13451 for &lt;you&gt;; Fri, 13 Dec 1996 05:47:46 -0700Date: Fri, 13 Dec 1996 05:47:46 -0700From: you@mail.us.eduMessage-Id: &lt;199509091247.FAA13451@mail.us.edu&gt;To: youSubject: testingtesting</PRE></BLOCKQUOTE></P><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-7559"></A><ACLASS="indexterm"NAME="AUTOID-7561"></A>The first thing to notice in this saved message is that several headerlines have been added. You gave <EMCLASS="emphasis">sendmail</EM> only two lines,a <CODECLASS="literal">To:</CODE> and a <CODECLASS="literal">Subject:</CODE>,when you ran it, but now there are eight header lines.</P><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-7568"></A>These header lines were added by the hub machine. Because theywere added by the hub and not by your local machine, a few ofthem are illegal. The <CODECLASS="literal">Received:</CODE> header, for example,shows only that the hub received the message from the local machine.There is no indication (other than by implication) that thelocal machine received it in the first place.</P><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-7572"></A><ACLASS="indexterm"NAME="AUTOID-7575"></A><ACLASS="indexterm"NAME="AUTOID-7578"></A>Another problem is the <CODECLASS="literal">Message-ID:</CODE> header. Every emailmessage is supposed to have a message identifier that is guaranteedunique world wide. Part of that identifier is supposed to bethe name of the originating machine (your local machine). In theabove header, however, it contains the name of the mail hub,<EMCLASS="emphasis">mail.us.edu</EM>.</P><PCLASS="para">We'll fix these problems when we cover headers in the next chapter.<ACLASS="indexterm"NAME="AUTOID-7583"></A><ACLASS="indexterm"NAME="AUTOID-7584"></A>&#13;</P></DIV><DIVCLASS="htmlnav"><P></P><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch13_03.htm"TITLE="13.3 Testing the Options"><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 13.3 Testing the Options"BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="book"HREF="index.htm"TITLE="sendmail"><IMGSRC="../gifs/txthome.gif"ALT="sendmail"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch13_05.htm"TITLE="13.5 Things to Try"><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 13.5 Things to Try"BORDER="0"></A></TD></TR><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172">13.3 Testing the Options</TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="index"HREF="index/idx_0.htm"TITLE="Book Index"><IMGSRC="../gifs/index.gif"ALT="Book Index"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172">13.5 Things to Try</TD></TR></TABLE><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><PCLASS="nav"><FONTSIZE="-1">[ <AHREF="../index.htm"TITLE="The Networking CD Bookshelf">Library Home</A> | <AHREF="../dnsbind/index.htm"TITLE="DNS &amp; BIND">DNS &amp; BIND</A> | <AHREF="../tcpip/index.htm"TITLE="TCP/IP Network Administration">TCP/IP</A> | <AHREF="index.htm"TITLE="sendmail">sendmail</A> | <AHREF="../smdref/index.htm"TITLE="sendmail Desktop Reference">sendmail Reference</A> | <AHREF="../firewall/index.htm"TITLE="Building Internet Firewalls">Firewalls</A> | <AHREF="../puis/index.htm"TITLE="Practical UNIX &amp; Internet Security">Practical Security</A> ]</FONT></P></DIV></BODY></HTML>