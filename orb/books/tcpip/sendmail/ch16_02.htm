<HTML><HEAD><TITLE>[Chapter 16] 16.2 The null.mc File</TITLE><METANAME="DC.title"CONTENT="sendmail"><METANAME="DC.creator"CONTENT="Bryan Costales &amp; Eric Allman"><METANAME="DC.publisher"CONTENT="O'Reilly &amp; Associates, Inc."><METANAME="DC.date"CONTENT="1999-01-06T18:39:41Z"><METANAME="DC.type"CONTENT="Text.Monograph"><METANAME="DC.format"CONTENT="text/html"SCHEME="MIME"><METANAME="DC.source"CONTENT="1-56592-222-0"SCHEME="ISBN"><METANAME="DC.language"CONTENT="en-US"><METANAME="generator"CONTENT="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><LINKREV="made"HREF="mailto:online-books@oreilly.com"TITLE="Online Books Comments"><LINKREL="up"HREF="ch16_01.htm"TITLE="16. The null.mc File and m4"><LINKREL="prev"HREF="ch16_01.htm"TITLE="16.1 The cf/cf Directory"><LINKREL="next"HREF="ch16_03.htm"TITLE="16.3 Run m4"></HEAD><BODYBGCOLOR="#FFFFFF"TEXT="#000000"><DIVCLASS="htmlnav"><H1><IMGSRC="gifs/smbanner.gif"ALT="sendmail"USEMAP="#srchmap"BORDER="0"></H1><MAPNAME="srchmap"><AREASHAPE="RECT"COORDS="0,0,466,65"HREF="index.htm"ALT="sendmail"><AREASHAPE="RECT"COORDS="467,0,514,18"HREF="../search/ssrch.htm"ALT="Search this book"></MAP><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch16_01.htm"TITLE="16.1 The cf/cf Directory"><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 16.1 The cf/cf Directory"BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><B><FONTFACE="ARIEL,HELVETICA,HELV,SANSERIF"SIZE="-1">Chapter 16<BR>The null.mc File and m4</FONT></B></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch16_03.htm"TITLE="16.3 Run m4"><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 16.3 Run m4"BORDER="0"></A></TD></TR></TABLE>&nbsp;<HRALIGN="LEFT"WIDTH="515"TITLE="footer"></DIV><DIVCLASS="SECT1"><H2CLASS="sect1"><ACLASS="title"NAME="SML2-CH-16-SECT-2">16.2 The null.mc File</A></H2><PCLASS="para"><ACLASS="indexterm"NAME="SML2-CH-16-IX-NULL-MC-FILE"></A>Now we will create a file called <EMCLASS="emphasis">null.mc</EM>, which, when later processed, will createa <EMCLASS="emphasis">client.cf</EM>-style configuration file. The <EMCLASS="emphasis">null.mc</EM> fill will be verysmall, containing only these three lines:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">include(`../m4/cf.m4')OSTYPE(`sunos4.1')FEATURE(`nullclient',`mail.us.edu')</PRE></BLOCKQUOTE></P><PCLASS="para">These three lines do everything that the preceding11 chapters did and more. We discuss them individually, thenshow how to process the file.&#13;</P><DIVCLASS="sect2"><H3CLASS="sect2"><ACLASS="title"NAME="SML2-CH-16-SECT-2-1">16.2.1 include</A></H3><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-8807"></A>Naturally, a configuration is not simply plucked from thin air. Insteadthe master prototype configuration needs to be read and processed with the following command:[1]</P><BLOCKQUOTECLASS="footnote"><PCLASS="para">[1] See <EMCLASS="emphasis">../README</EM> for a description of how to replace thisline with similar information on the command line when processing.The <CODECLASS="literal">include</CODE> line inside your <EMCLASS="emphasis">null.mc</EM> file is portableto all versions of <EMCLASS="emphasis">m4</EM>. The command line form is highly versiondependent, but allows you to maintain your <EMCLASS="emphasis">.mc</EM> files outsidethe <EMCLASS="emphasis">sendmail</EM> distribution.</P></BLOCKQUOTE><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">include(`../m4/cf.m4')</PRE></BLOCKQUOTE></P><PCLASS="para">Note that the expression inside the parentheses begins with a reverse apostropheand ends with a forward one. These opposing half quotes are used by<EMCLASS="emphasis">m4</EM>(1) to prevent a test from being interpreted as a macro.The expression <CODECLASS="literal">../m4/cf.m4</CODE> is taken to be the pathname of a file.That file is read at this point as though it were actually typed in here.&#13;</P></DIV><DIVCLASS="sect2"><H3CLASS="sect2"><ACLASS="title"NAME="SML2-CH-16-SECT-2-2">16.2.2 OSTYPE</A></H3><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-8825"></A><ACLASS="indexterm"NAME="AUTOID-8827"></A><ACLASS="indexterm"NAME="AUTOID-8830"></A>A number of values in the configuration file will differ from operating systemto operating system. The location of the queue directory, for example,is <EMCLASS="emphasis">/var/spool/mqueue</EM> for IRIX 5.x but <EMCLASS="emphasis">/usr/spool/mqueue</EM> forBSD 4.3 Unix. To declare the proper value for your operating system, look in the<EMCLASS="emphasis">../ostype</EM> directory:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">% <CODECLASS="userinput"><B>ls ../ostype</B></CODE>aix3.m4        bsdi1.0.m4     hpux10.m4    linux.m4      sco3.2.m4     ultrix4.m4amdahl-uts.m4  bsdi2.0.m4     hpux9.m4     nextstep.m4   solaris2.m4   unknown.m4aux.m4         dgux.m4        irix4.m4     osf1.m4       sunos3.5.m4bsd4.3.m4      domainos.m4    irix5.m4     ptx2.m4       sunos4.1.m4bsd4.4.m4      dynix3.2.m4    isc4.1.m4    riscos4.5.m4  svr4.m4</PRE></BLOCKQUOTE></P><PCLASS="para">Pick the operating system closest to yours. For SunOS 4.1.4 systems, for example, choose <CODECLASS="literal">sunos4.1.m4</CODE>.</P><PCLASS="para">Whichever you choose, include support for it by stripping the <CODECLASS="literal">.m4</CODE>suffix and including the resulting name in an <CODECLASS="literal">OSTYPE</CODE> declaration:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">        sunos4.1.m4           <ICLASS="lineannotation"><IMGSRC="../chars/darr.gif"ALT="-v"></I>         <ICLASS="lineannotation">becomes</I>           <ICLASS="lineannotation"><IMGSRC="../chars/darr.gif"ALT="-v"></I>OSTYPE(`sunos4.1')</PRE></BLOCKQUOTE></P><PCLASS="para">Remember to surround the result in a reverse and forward apostrophe pair.&#13;</P></DIV><DIVCLASS="sect2"><H3CLASS="sect2"><ACLASS="title"NAME="SML2-CH-16-SECT-2-3">16.2.3 FEATURE</A></H3><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-8853"></A>The last line in our <EMCLASS="emphasis">null.mc</EM> file providesthe magic incantation of a <EMCLASS="emphasis">client.cf</EM>-style file:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">FEATURE(`nullclient',`mail.us.edu')</PRE></BLOCKQUOTE></P><PCLASS="para">Two arguments inside the parentheses, separated by a comma, arerequired. The first argument, <CODECLASS="literal">nullclient</CODE>, tells <EMCLASS="emphasis">m4</EM>(1)to create a null (do-nothing) client (.cf) file. The second argumentis the canonical name of the mail hub. Just as we did for the<EMCLASS="emphasis">client.cf</EM> file, we use the hostname <EMCLASS="emphasis">mail.us.edu</EM>.  Youshould, of course, use the canonical name of your own mail hub.<ACLASS="indexterm"NAME="AUTOID-8864"></A>&#13;</P></DIV></DIV><DIVCLASS="htmlnav"><P></P><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch16_01.htm"TITLE="16.1 The cf/cf Directory"><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 16.1 The cf/cf Directory"BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="book"HREF="index.htm"TITLE="sendmail"><IMGSRC="../gifs/txthome.gif"ALT="sendmail"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch16_03.htm"TITLE="16.3 Run m4"><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 16.3 Run m4"BORDER="0"></A></TD></TR><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172">16.1 The cf/cf Directory</TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="index"HREF="index/idx_0.htm"TITLE="Book Index"><IMGSRC="../gifs/index.gif"ALT="Book Index"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172">16.3 Run m4</TD></TR></TABLE><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><PCLASS="nav"><FONTSIZE="-1">[ <AHREF="../index.htm"TITLE="The Networking CD Bookshelf">Library Home</A> | <AHREF="../dnsbind/index.htm"TITLE="DNS &amp; BIND">DNS &amp; BIND</A> | <AHREF="../tcpip/index.htm"TITLE="TCP/IP Network Administration">TCP/IP</A> | <AHREF="index.htm"TITLE="sendmail">sendmail</A> | <AHREF="../smdref/index.htm"TITLE="sendmail Desktop Reference">sendmail Reference</A> | <AHREF="../firewall/index.htm"TITLE="Building Internet Firewalls">Firewalls</A> | <AHREF="../puis/index.htm"TITLE="Practical UNIX &amp; Internet Security">Practical Security</A> ]</FONT></P></DIV></BODY></HTML>