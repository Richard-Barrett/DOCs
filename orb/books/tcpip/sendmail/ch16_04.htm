<HTML><HEAD><TITLE>[Chapter 16] 16.4 Test the Result</TITLE><METANAME="DC.title"CONTENT="sendmail"><METANAME="DC.creator"CONTENT="Bryan Costales &amp; Eric Allman"><METANAME="DC.publisher"CONTENT="O'Reilly &amp; Associates, Inc."><METANAME="DC.date"CONTENT="1999-01-06T18:39:44Z"><METANAME="DC.type"CONTENT="Text.Monograph"><METANAME="DC.format"CONTENT="text/html"SCHEME="MIME"><METANAME="DC.source"CONTENT="1-56592-222-0"SCHEME="ISBN"><METANAME="DC.language"CONTENT="en-US"><METANAME="generator"CONTENT="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><LINKREV="made"HREF="mailto:online-books@oreilly.com"TITLE="Online Books Comments"><LINKREL="up"HREF="ch16_01.htm"TITLE="16. The null.mc File and m4"><LINKREL="prev"HREF="ch16_03.htm"TITLE="16.3 Run m4"><LINKREL="next"HREF="ch16_05.htm"TITLE="16.5 Qualify All Addresses?"></HEAD><BODYBGCOLOR="#FFFFFF"TEXT="#000000"><DIVCLASS="htmlnav"><H1><IMGSRC="gifs/smbanner.gif"ALT="sendmail"USEMAP="#srchmap"BORDER="0"></H1><MAPNAME="srchmap"><AREASHAPE="RECT"COORDS="0,0,466,65"HREF="index.htm"ALT="sendmail"><AREASHAPE="RECT"COORDS="467,0,514,18"HREF="../search/ssrch.htm"ALT="Search this book"></MAP><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch16_03.htm"TITLE="16.3 Run m4"><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 16.3 Run m4"BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><B><FONTFACE="ARIEL,HELVETICA,HELV,SANSERIF"SIZE="-1">Chapter 16<BR>The null.mc File and m4</FONT></B></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch16_05.htm"TITLE="16.5 Qualify All Addresses?"><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 16.5 Qualify All Addresses?"BORDER="0"></A></TD></TR></TABLE>&nbsp;<HRALIGN="LEFT"WIDTH="515"TITLE="footer"></DIV><DIVCLASS="SECT1"><H2CLASS="sect1"><ACLASS="title"NAME="SML2-CH-16-SECT-4">16.4 Test the Result</A></H2><PCLASS="para">When you look at the resulting <EMCLASS="emphasis">client.cf</EM> file, you will first noticesome copyright notices and legalities from the Universityof California. These are in the form of comments and so are ignoredby <EMCLASS="emphasis">sendmail</EM>.</P><PCLASS="para">Next comes a series of comments that show the various pieces that wentinto the construction of this file. After these you get to the meatof the <EMCLASS="emphasis">client.cf</EM> file beginning with the line&#13;</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">V7/Berkeley</PRE></BLOCKQUOTE></P><PCLASS="para">&#13;Read through this <EMCLASS="emphasis">client.cf</EM> file beginning here, and noticethat it is far more complex than the one we developed earlier.For instance, it declares over 80 options (although most arecommented out), whereas our first <EMCLASS="emphasis">client.cf</EM> file declared onlynine. It uses eight rule sets, where we used only three.</P><PCLASS="para">To test this new file you can use the command&#13;</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">% <CODECLASS="userinput"><B>../../src/obj.*/sendmail -Cclient.cf -bt &lt; list | grep ^mailer</B></CODE></PRE></BLOCKQUOTE></P><PCLASS="para">&#13;The weird path for <EMCLASS="emphasis">sendmail</EM> is needed because you are now in the<EMCLASS="emphasis">cf/cf</EM> directory and the <EMCLASS="emphasis">sendmail</EM> binary is back inthe <EMCLASS="emphasis">src</EM> directory. The <CODECLASS="literal">list</CODE> is the list of testsfrom the previous chapter. The output should look something like this:&#13;</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">mailer nullclient, host mail.us.edu, user user@heremailer nullclient, host mail.us.edu, user user@here.us.edumailer nullclient, host mail.us.edu, user user@foomailer nullclient, host mail.us.edu, user here!user@mail.us.edumailer nullclient, host mail.us.edu, user user@mail.us.edu</PRE></BLOCKQUOTE></P><PCLASS="para">&#13;Note that this new <EMCLASS="emphasis">client.cf</EM> file added the name of thehub to the lone username in the last line, whereas our original<EMCLASS="emphasis">client.cf</EM> did not. To see why this happened,first look for rule set 3 in this new <EMCLASS="emphasis">client.cf</EM> file.It contains the line</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">R$+ @ $=w               $@ $1 @ $M                      ...@thishost</PRE></BLOCKQUOTE></P><PCLASS="para">&#13;Next look in the original <EMCLASS="emphasis">client.cf</EM> file.It contains a similar rule:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">R$- @ $=w              $@ $1@${HUB}            user@local -&gt; user@hub</PRE></BLOCKQUOTE></P><PCLASS="para">But the original <EMCLASS="emphasis">client.cf</EM> file put this rule in rule set <CODECLASS="literal">Hubset</CODE>.The new <EMCLASS="emphasis">client.cf</EM> adds the hub's name to a lone username in rule set3 that affects all addresses, while old <EMCLASS="emphasis">client.cf</EM> file adds it in the<CODECLASS="literal">S=</CODE> rule set, which affects only sender addresses.&#13;</P></DIV><DIVCLASS="htmlnav"><P></P><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch16_03.htm"TITLE="16.3 Run m4"><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 16.3 Run m4"BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="book"HREF="index.htm"TITLE="sendmail"><IMGSRC="../gifs/txthome.gif"ALT="sendmail"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch16_05.htm"TITLE="16.5 Qualify All Addresses?"><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 16.5 Qualify All Addresses?"BORDER="0"></A></TD></TR><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172">16.3 Run m4</TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="index"HREF="index/idx_0.htm"TITLE="Book Index"><IMGSRC="../gifs/index.gif"ALT="Book Index"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172">16.5 Qualify All Addresses?</TD></TR></TABLE><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><PCLASS="nav"><FONTSIZE="-1">[ <AHREF="../index.htm"TITLE="The Networking CD Bookshelf">Library Home</A> | <AHREF="../dnsbind/index.htm"TITLE="DNS &amp; BIND">DNS &amp; BIND</A> | <AHREF="../tcpip/index.htm"TITLE="TCP/IP Network Administration">TCP/IP</A> | <AHREF="index.htm"TITLE="sendmail">sendmail</A> | <AHREF="../smdref/index.htm"TITLE="sendmail Desktop Reference">sendmail Reference</A> | <AHREF="../firewall/index.htm"TITLE="Building Internet Firewalls">Firewalls</A> | <AHREF="../puis/index.htm"TITLE="Practical UNIX &amp; Internet Security">Practical Security</A> ]</FONT></P></DIV></BODY></HTML>