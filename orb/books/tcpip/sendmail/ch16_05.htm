<HTML><HEAD><TITLE>[Chapter 16] 16.5 Qualify All Addresses?</TITLE><METANAME="DC.title"CONTENT="sendmail"><METANAME="DC.creator"CONTENT="Bryan Costales &amp; Eric Allman"><METANAME="DC.publisher"CONTENT="O'Reilly &amp; Associates, Inc."><METANAME="DC.date"CONTENT="1999-01-06T18:39:46Z"><METANAME="DC.type"CONTENT="Text.Monograph"><METANAME="DC.format"CONTENT="text/html"SCHEME="MIME"><METANAME="DC.source"CONTENT="1-56592-222-0"SCHEME="ISBN"><METANAME="DC.language"CONTENT="en-US"><METANAME="generator"CONTENT="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><LINKREV="made"HREF="mailto:online-books@oreilly.com"TITLE="Online Books Comments"><LINKREL="up"HREF="ch16_01.htm"TITLE="16. The null.mc File and m4"><LINKREL="prev"HREF="ch16_04.htm"TITLE="16.4 Test the Result"><LINKREL="next"HREF="ch16_06.htm"TITLE="16.6 Things to Try"></HEAD><BODYBGCOLOR="#FFFFFF"TEXT="#000000"><DIVCLASS="htmlnav"><H1><IMGSRC="gifs/smbanner.gif"ALT="sendmail"USEMAP="#srchmap"BORDER="0"></H1><MAPNAME="srchmap"><AREASHAPE="RECT"COORDS="0,0,466,65"HREF="index.htm"ALT="sendmail"><AREASHAPE="RECT"COORDS="467,0,514,18"HREF="../search/ssrch.htm"ALT="Search this book"></MAP><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch16_04.htm"TITLE="16.4 Test the Result"><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 16.4 Test the Result"BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><B><FONTFACE="ARIEL,HELVETICA,HELV,SANSERIF"SIZE="-1">Chapter 16<BR>The null.mc File and m4</FONT></B></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch16_06.htm"TITLE="16.6 Things to Try"><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 16.6 Things to Try"BORDER="0"></A></TD></TR></TABLE>&nbsp;<HRALIGN="LEFT"WIDTH="515"TITLE="footer"></DIV><DIVCLASS="SECT1"><H2CLASS="sect1"><ACLASS="title"NAME="SML2-CH-16-SECT-5">16.5 Qualify All Addresses?</A></H2><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-8929"></A><ACLASS="indexterm"NAME="AUTOID-8932"></A><ACLASS="indexterm"NAME="AUTOID-8935"></A><ACLASS="indexterm"NAME="AUTOID-8937"></A><ACLASS="indexterm"NAME="AUTOID-8940"></A>An unqualified address is one that contains only the user part, suchas <EMCLASS="emphasis">hans</EM>. A qualified address is one that also has a hostpart, such as <EMCLASS="emphasis">hans@here</EM>. A <EMCLASS="emphasis">fully</EM> qualified address hasa user part and a fully qualified host part, such as <EMCLASS="emphasis">hans@here.us.edu</EM>.In general, no address should ever go out in a mail header or envelopethat is not fully qualified. [2]</P><BLOCKQUOTECLASS="footnote"><PCLASS="para">[2] The only exception may be when all mailis forwarded to a hub machine. The assumption is that the hubwill fully qualify any addresses that lacks a host part.</P></BLOCKQUOTE><PCLASS="para">To illustrate the types of problems that can arise in usingaddresses that are not fully qualified, consider a headerin which the local host is <EMCLASS="emphasis">here.us.edu</EM>:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">To: hans@here.us.eduCc: jane, george@fbi.us.govFrom: you@here.us.edu</PRE></BLOCKQUOTE></P><PCLASS="para">Using our original <EMCLASS="emphasis">client.cf</EM> file, this header would go outunchanged because <CODECLASS="literal">jane</CODE> is not a sender address. The assumptionis that the hub will view this as a local user and deliver it properly.</P><PCLASS="para">Now consider a hub that has two MX records (a rather small number).One points to itself so that it always gets mail first becauseit is, after all, the hub. The other points to a host at anothercampus. If the hub is down but its clients are up, mail willbe delivered to the other campus, on the assumption that it willhold the mail until the hub returns to service. The problem is thatthe address <CODECLASS="literal">jane</CODE> is unqualified when it gets to the othercampus. That other site will either bounce the mail becausea user <EMCLASS="emphasis">jane</EM> is unknown or deliver it to another userwith the same name who is really a different person.</P><PCLASS="para">Before allowing unqualified addresses to go out from a client, be surethat there are no offsite MX records and that there are no plansfor any.</P><PCLASS="para">This is one of the reasons we said that our original <EMCLASS="emphasis">client.cf</EM>file was for learning purposes only. This is also one of the reasonswhy the <EMCLASS="emphasis">m4</EM>(1) technique produces more complex files and whywe recommend using <EMCLASS="emphasis">null.mc</EM>.&#13;</P></DIV><DIVCLASS="htmlnav"><P></P><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch16_04.htm"TITLE="16.4 Test the Result"><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 16.4 Test the Result"BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="book"HREF="index.htm"TITLE="sendmail"><IMGSRC="../gifs/txthome.gif"ALT="sendmail"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch16_06.htm"TITLE="16.6 Things to Try"><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 16.6 Things to Try"BORDER="0"></A></TD></TR><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172">16.4 Test the Result</TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="index"HREF="index/idx_0.htm"TITLE="Book Index"><IMGSRC="../gifs/index.gif"ALT="Book Index"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172">16.6 Things to Try</TD></TR></TABLE><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><PCLASS="nav"><FONTSIZE="-1">[ <AHREF="../index.htm"TITLE="The Networking CD Bookshelf">Library Home</A> | <AHREF="../dnsbind/index.htm"TITLE="DNS &amp; BIND">DNS &amp; BIND</A> | <AHREF="../tcpip/index.htm"TITLE="TCP/IP Network Administration">TCP/IP</A> | <AHREF="index.htm"TITLE="sendmail">sendmail</A> | <AHREF="../smdref/index.htm"TITLE="sendmail Desktop Reference">sendmail Reference</A> | <AHREF="../firewall/index.htm"TITLE="Building Internet Firewalls">Firewalls</A> | <AHREF="../puis/index.htm"TITLE="Practical UNIX &amp; Internet Security">Practical Security</A> ]</FONT></P></DIV></BODY></HTML>