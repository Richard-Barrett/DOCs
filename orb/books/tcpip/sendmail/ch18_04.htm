<HTML><HEAD><TITLE>[Chapter 18] 18.4 Tuning Makefile</TITLE><METANAME="DC.title"CONTENT="sendmail"><METANAME="DC.creator"CONTENT="Bryan Costales &amp; Eric Allman"><METANAME="DC.publisher"CONTENT="O'Reilly &amp; Associates, Inc."><METANAME="DC.date"CONTENT="1999-01-06T18:43:02Z"><METANAME="DC.type"CONTENT="Text.Monograph"><METANAME="DC.format"CONTENT="text/html"SCHEME="MIME"><METANAME="DC.source"CONTENT="1-56592-222-0"SCHEME="ISBN"><METANAME="DC.language"CONTENT="en-US"><METANAME="generator"CONTENT="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><LINKREV="made"HREF="mailto:online-books@oreilly.com"TITLE="Online Books Comments"><LINKREL="up"HREF="ch18_01.htm"TITLE="18. Compile and Install sendmail"><LINKREL="prev"HREF="ch18_03.htm"TITLE="18.3 Obtain the Source"><LINKREL="next"HREF="ch18_05.htm"TITLE="18.5 Run Make"></HEAD><BODYBGCOLOR="#FFFFFF"TEXT="#000000"><DIVCLASS="htmlnav"><H1><IMGSRC="gifs/smbanner.gif"ALT="sendmail"USEMAP="#srchmap"BORDER="0"></H1><MAPNAME="srchmap"><AREASHAPE="RECT"COORDS="0,0,466,65"HREF="index.htm"ALT="sendmail"><AREASHAPE="RECT"COORDS="467,0,514,18"HREF="../search/ssrch.htm"ALT="Search this book"></MAP><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch18_03.htm"TITLE="18.3 Obtain the Source"><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 18.3 Obtain the Source"BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><B><FONTFACE="ARIEL,HELVETICA,HELV,SANSERIF"SIZE="-1">Chapter 18<BR>Compile and Install sendmail</FONT></B></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch18_05.htm"TITLE="18.5 Run Make"><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 18.5 Run Make"BORDER="0"></A></TD></TR></TABLE>&nbsp;<HRALIGN="LEFT"WIDTH="515"TITLE="footer"></DIV><DIVCLASS="SECT1"><H2CLASS="sect1"><ACLASS="title"NAME="SML2-CH-18-SECT-4">18.4 Tuning Makefile</A></H2><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-9819"></A><ACLASS="indexterm"NAME="AUTOID-9822"></A>The <EMCLASS="emphasis">make</EM>(1) program is used to compile and install <EMCLASS="emphasis">sendmail</EM>.The <EMCLASS="emphasis">makesendmail</EM> script not only created an <EMCLASS="emphasis">obj.</EM><CODECLASS="literal">*</CODE> workingdirectory, it also copied an appropriate <EMCLASS="emphasis">Makefile</EM> into that directory.[4]Before changing anything in <EMCLASS="emphasis">Makefile</EM>, you should <EMCLASS="emphasis">cd</EM> intoyour object directory and change the permissions of <EMCLASS="emphasis">Makefile</EM>so that it is writable by you:</P><BLOCKQUOTECLASS="footnote"><PCLASS="para">[4] Actually, it created a symbolic link called <EMCLASS="emphasis">Makefile</EM> that pointsto the appropriate file in the <EMCLASS="emphasis">../Makefiles</EM> directory.</P></BLOCKQUOTE><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">% <CODECLASS="userinput"><B>cd obj.*</B></CODE>% <CODECLASS="userinput"><B>mv Makefile Makefile.orig</B></CODE>% <CODECLASS="userinput"><B>cp Makefile.orig Makefile</B></CODE>% <CODECLASS="userinput"><B>chmod 644 Makefile</B></CODE></PRE></BLOCKQUOTE></P><PCLASS="para"><EMCLASS="emphasis">Makefile</EM> is tuned bydefining or redefining directives (shown in<ACLASS="xref"HREF="ch18_04.htm#SML2-CH-18-TAB-0"TITLE="Makefile Directives That You May Customize">Table 18.1</A>that begin lines in that file.<ACLASS="indexterm"NAME="AUTOID-9846"></A></P><TABLECLASS="table"><CAPTIONCLASS="table"><ACLASS="title"NAME="SML2-CH-18-TAB-0">Table 18.1: Makefile Directives That You May Customize</A></CAPTION><THEADCLASS="thead"><TRCLASS="row"VALIGN="TOP"><THCLASS="entry"ALIGN="LEFT"ROWSPAN="1"COLSPAN="1">Directive</TH><THCLASS="entry"ALIGN="LEFT"ROWSPAN="1"COLSPAN="1"></TH><THCLASS="entry"ALIGN="LEFT"ROWSPAN="1"COLSPAN="1">Description</TH></TR></THEAD><TBODYCLASS="tbody"><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><CODECLASS="literal">DBMDEF=</CODE></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch18_04.htm#SML2-CH-18-SECT-4-1"TITLE="DBMDEF=">Section 18.4.1, "DBMDEF="</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Which database libraries to use</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><CODECLASS="literal">ENVDEF=</CODE></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch18_04.htm#SML2-CH-18-SECT-4-2"TITLE="ENVDEF=">Section 18.4.2, "ENVDEF="</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Compiler <CODECLASS="literal">-D</CODE> switches, such as <CODECLASS="literal">-D_AIX3</CODE></TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><CODECLASS="literal">INCDIRS=</CODE></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch18_04.htm#SML2-CH-18-SECT-4-3"TITLE="INCDIRS=">Section 18.4.3, "INCDIRS="</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Compiler <CODECLASS="literal">-I</CODE> switches, such as <CODECLASS="literal">-I../db/include</CODE></TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><CODECLASS="literal">LDOPTS=</CODE></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch18_04.htm#SML2-CH-18-SECT-4-4"TITLE="LDOPTS=">Section 18.4.4, "LDOPTS="</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Linker options, such as <CODECLASS="literal">-Bstatic</CODE> for SunOS</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><CODECLASS="literal">LIBDIRS=</CODE></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch18_04.htm#SML2-CH-18-SECT-4-5"TITLE="LIBDIRS=">Section 18.4.5, "LIBDIRS="</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Linker <CODECLASS="literal">-L</CODE> switches, such as <CODECLASS="literal">-L/usr/local/lib</CODE></TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><CODECLASS="literal">LIBS=</CODE></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch18_04.htm#SML2-CH-18-SECT-4-6"TITLE="LIBS=">Section 18.4.6, "LIBS="</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Linker <CODECLASS="literal">-l</CODE> libraries, such as <CODECLASS="literal">-ldbm</CODE></TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><CODECLASS="literal">BINDIR=</CODE></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch18_04.htm#SML2-CH-18-SECT-4-7"TITLE="BINDIR=">Section 18.4.7, "BINDIR="</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Where to install <EMCLASS="emphasis">sendmail</EM></TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><CODECLASS="literal">STDIR=</CODE></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch18_04.htm#SML2-CH-18-SECT-4-8"TITLE="STDIR=">Section 18.4.8, "STDIR="</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Where the <EMCLASS="emphasis">sendmail.st</EM> file goes</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><CODECLASS="literal">HFDIR=</CODE></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch18_04.htm#SML2-CH-18-SECT-4-9"TITLE="HFDIR=">Section 18.4.9, "HFDIR="</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Where the <EMCLASS="emphasis">sendmail.hf</EM> file goes</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><CODECLASS="literal">OBJADD=</CODE></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch18_04.htm#SML2-CH-18-SECT-4-10"TITLE="OBJADD=">Section 18.4.10, "OBJADD="</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Object files that need to be linked in</TD></TR></TBODY></TABLE><PCLASS="para">We will discuss each of these macros shortly but first note that, in general, you should never have to modify anything after the &quot;end&quot;line (shown in the following example).The only exception might be special requirements created by porting<EMCLASS="emphasis">sendmail</EM> to a new platform.</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">###################  end of user configuration flags  ######################</PRE></BLOCKQUOTE></P><PCLASS="para">Finally, before changing anything inside <EMCLASS="emphasis">Makefile</EM>, be sure to read <EMCLASS="emphasis">src/READ_ME</EM>. It always contains the latest informationabout building <EMCLASS="emphasis">sendmail</EM>. In this book we are forced to speak in generalities, whereasthe <EMCLASS="emphasis">src/READ_ME</EM> file discusses operating systems, compilers,and hardware in specific detail.</P><DIVCLASS="sect2"><H3CLASS="sect2"><ACLASS="title"NAME="SML2-CH-18-SECT-4-1">18.4.1 DBMDEF=</A></H3><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-9941"></A><ACLASS="indexterm"NAME="AUTOID-9943"></A>The DBMDEF= directive defines the database library support you want.The currently available choices are listed in <ACLASS="xref"HREF="ch18_04.htm#SML2-CH-18-TAB-1"TITLE="Define for Database Support">Table 18.2</A>.Details are given in the indicated section.</P><TABLECLASS="table"><CAPTIONCLASS="table"><ACLASS="title"NAME="SML2-CH-18-TAB-1">Table 18.2: Define for Database Support</A></CAPTION><THEADCLASS="thead"><TRCLASS="row"VALIGN="TOP"><THCLASS="entry"ALIGN="LEFT"ROWSPAN="1"COLSPAN="1">Define</TH><THCLASS="entry"ALIGN="LEFT"ROWSPAN="1"COLSPAN="1"></TH><THCLASS="entry"ALIGN="LEFT"ROWSPAN="1"COLSPAN="1">Aliases[5]</TH><THCLASS="entry"ALIGN="LEFT"ROWSPAN="1"COLSPAN="1">Description</TH></TR></THEAD><TBODYCLASS="tbody"><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">AUTO_NIS_ALIASES</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch18_08.htm#SML2-CH-18-SECT-8-1"TITLE="">Section 18.8.1, AUTO-NIS-ALIASES</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Yes</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Add fallback alias techniques</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">HESIOD</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch18_08.htm#SML2-CH-18-SECT-8-10"TITLE="">Section 18.8.10, HESIOD</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Yes</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Support <EMCLASS="emphasis">hesiod</EM> database maps</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">LDAPMAP</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch18_08.htm#SML2-CH-18-SECT-8-15"TITLE="">Section 18.8.15, LDAPMAP</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">No</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Enable use of <EMCLASS="emphasis">ldap</EM> databases</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">NDBM</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch18_08.htm#SML2-CH-18-SECT-8-24"TITLE="">Section 18.8.24, NDBM</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Yes</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Support UNIX <EMCLASS="emphasis">ndbm</EM>(3) Databases[6]</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">NETINFO</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch18_08.htm#SML2-CH-18-SECT-8-27"TITLE="">Section 18.8.27, NETINFO</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Yes</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Support NeXT <EMCLASS="emphasis">netinfo</EM>(3) databases</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">NEWDB</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch18_08.htm#SML2-CH-18-SECT-8-28"TITLE="">Section 18.8.28, NEWDB</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Yes</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Support <EMCLASS="emphasis">db</EM>(3), both <EMCLASS="emphasis">hash</EM> and <EMCLASS="emphasis">btree</EM> forms</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">NIS</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch18_08.htm#SML2-CH-18-SECT-8-29"TITLE="">Section 18.8.29, NIS</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Yes</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Support <CODECLASS="literal">nis</CODE> maps</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">NISPLUS</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch18_08.htm#SML2-CH-18-SECT-8-30"TITLE="">Section 18.8.30, NISPLUS</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Yes</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Support <CODECLASS="literal">nisplus</CODE> maps</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">OLD_NEWDB</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch18_08.htm#SML2-CH-18-SECT-8-33"TITLE="">Section 18.8.33, OLD-NEWDB</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">n/a</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Support the old form of <EMCLASS="emphasis">db</EM>(3)</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">UDB_DEFAULT_SPEC</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch18_08.htm#SML2-CH-18-SECT-8-53"TITLE="">Section 18.8.53, UDB-DEFAULT-SPEC</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">n/a</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Default User Database location</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">USERDB</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch18_08.htm#SML2-CH-18-SECT-8-54"TITLE="">Section 18.8.54, USERDB</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">n/a</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Support the User Database</TD></TR></TBODY></TABLE><BLOCKQUOTECLASS="footnote"><PCLASS="para">[5] Note that the old <EMCLASS="emphasis">dbm</EM>(3) form of database is no longer supported.</P><PCLASS="para">[6] If yes, this database format supports aliasing.</P></BLOCKQUOTE><PCLASS="para">Either NDBM or NEWDB must be defined, or <EMCLASS="emphasis">sendmail</EM> will read the aliases into itssymbol table every time it starts.This will make <EMCLASS="emphasis">sendmail</EM> crawl and is not recommended.</P><PCLASS="para">External databases can be extremely valuable,especially in providing easy solutions for complex problems. Therefore we recommend that youinclude a definition for all databases that your system supports,even if you don't immediately foresee a need for them.</P><PCLASS="para">Below, we illustrate the selection of two forms of database:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">DBMDEF= -DNEWDB -DNDBM</PRE></BLOCKQUOTE></P><PCLASS="para">When these two forms are selected, old databases are read by using NDBM, butnew databases are created by using NEWDB. Read <EMCLASS="emphasis">src/READ_ME</EM> fordetails about, and exceptions to, this transition process.</P></DIV><DIVCLASS="sect2"><H3CLASS="sect2"><ACLASS="title"NAME="SML2-CH-18-SECT-4-2">18.4.2 ENVDEF=</A></H3><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-10050"></A>The ENVDEF= directive is used primarily to specify code that should either be speciallyincluded or excluded.The following example shows support for <EMCLASS="emphasis">identd</EM>(8) being excludedfrom the compiled binary:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">ENVDEF= -DIDENTPROTO=0</PRE></BLOCKQUOTE></P><PCLASS="para">Note that, once excluded, support cannoteasily be included later by using options. But it may be better to turnsome facilities, such as <EMCLASS="emphasis">identd</EM>(8),off and on with options rather than compilingthem out (see <ACLASS="xref"HREF="ch34_08.htm#SML2-CH-34-SECT-8-70-10"TITLE="Timeout.ident">Section 34.8.70.10, "Timeout.ident"</A>for a description of the <CODECLASS="literal">TimeOut.ident</CODE> option).In<ACLASS="xref"HREF="ch18_08.htm#SML2-CH-18-TAB-2"TITLE="#define Macros for Compiling sendmail">Table 18.3</A>(see <ACLASS="xref"HREF="ch18_08.htm"TITLE="Alphabetized Reference">Section 18.8</A>)the third column indicates whether it is appropriate to redefinea particular macro in your <EMCLASS="emphasis">Makefile</EM>. Where appropriate, mostwill be defined with this ENVDEF= directive.</P><PCLASS="para">The ENVDEF= directive can also be used to define operating specific support. For example,</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">ENVDEF= -DSOLARIS=20501</PRE></BLOCKQUOTE></P><PCLASS="para">Here, support for Sun's Solaris 2.5.1 operating system is being included.In general, operating support is already included in the <EMCLASS="emphasis">Makefile</EM>selected for your system. You will have only to redefine this if you are portingto a completely new operating system.</P></DIV><DIVCLASS="sect2"><H3CLASS="sect2"><ACLASS="title"NAME="SML2-CH-18-SECT-4-3">18.4.3 INCDIRS=</A></H3><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-10070"></A>The INCDIRS= directive defines the directories searched (using the compiler's<CODECLASS="literal">-I</CODE> switch) for <CODECLASS="literal">#include</CODE>files. In general this will be empty unless you are using librariesthat are not normally used. For example, you may have installed the <EMCLASS="emphasis">db</EM>(3)library in <EMCLASS="emphasis">/usr/local/lib</EM> and its corresponding include filesin <EMCLASS="emphasis">/usr/local/include/db</EM>. In this case you would define</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">INCDIRS=-I/usr/local/include/dbLIBDIRS=-L/usr/local/lib/</PRE></BLOCKQUOTE></P><PCLASS="para">The <CODECLASS="literal">-I</CODE> will be passed to the C compiler. The <CODECLASS="literal">-L</CODE> willbe passed to the loader.</P><PCLASS="para">Many <EMCLASS="emphasis">Makefile</EM>s specify <EMCLASS="emphasis">/usr/sww</EM> in these lines. If you don'tneed local include files or libraries, you can leave the <EMCLASS="emphasis">/usr/sww</EM>in place without harm.[7]</P><BLOCKQUOTECLASS="footnote"><PCLASS="para">[7] The <EMCLASS="emphasis">sww</EM> stands for SoftWare Warehouse. This scheme was used at U.C. Berkeleyas a large centrally maintained <EMCLASS="emphasis">/usr/local</EM> partition.</P></BLOCKQUOTE></DIV><DIVCLASS="sect2"><H3CLASS="sect2"><ACLASS="title"NAME="SML2-CH-18-SECT-4-4">18.4.4 LDOPTS=</A></H3><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-10093"></A>The LDOPTS= directive defines operating system-specific loader options. For example,on SunOS machines the following is recommended:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">LDOPTS=      -Bstatic</PRE></BLOCKQUOTE></P><PCLASS="para">This tells the loader to exclude dynamic library support for better security.</P></DIV><DIVCLASS="sect2"><H3CLASS="sect2"><ACLASS="title"NAME="SML2-CH-18-SECT-4-5">18.4.5 LIBDIRS=</A></H3><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-10101"></A>The LIBDIRS= directive defines the directories searched (using the loader's<CODECLASS="literal">-L</CODE> switch). The libraries in these directories are searchedbefore the standard system libraries. An example of its use is given in <ACLASS="xref"HREF="ch18_04.htm#SML2-CH-18-SECT-4-3"TITLE="INCDIRS=">Section 18.4.3</A> above.</P></DIV><DIVCLASS="sect2"><H3CLASS="sect2"><ACLASS="title"NAME="SML2-CH-18-SECT-4-6">18.4.6 LIBS=</A></H3><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-10108"></A>The LIBS= directive lists additional libraries by name (using theloader's <CODECLASS="literal">-l</CODE> switch) to link against.All <EMCLASS="emphasis">Makefile</EM> files have a default for this line. The one forUltrix looks like this:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">LIBS=   -ldb -lresolv -l44bsd</PRE></BLOCKQUOTE></P><PCLASS="para">It is likely that you will have to add or change libraries in this listdepending on your architecture and operating system. To discoverwhich you need, run <EMCLASS="emphasis">make</EM>(1) (see the next section)and observe which routines the linker reports as missing.The <CODECLASS="literal">-l44bsd</CODE> is required only if you are using Paul Vixie's version of <CODECLASS="literal">-lresolv</CODE> as supplied with BIND 4.9.</P></DIV><DIVCLASS="sect2"><H3CLASS="sect2"><ACLASS="title"NAME="SML2-CH-18-SECT-4-7">18.4.7 BINDIR=</A></H3><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-10121"></A>The BINDIR= directive defines the location (directory) where the <EMCLASS="emphasis">sendmail</EM>binary will be installed. It is very unlikely that you will ever haveto change this from the value predefined for you in your <EMCLASS="emphasis">Makefile</EM>.One exception might be if you are installing a new <EMCLASS="emphasis">sendmail</EM> in parallel with the existing one. In that instance you might use</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">BINDIR=/usr/testsSTDIR=/usr/testsHFDIR=/usr/testsENVDEF= -D_PATH_SENDMAILCF=/usr/tests/sendmail.cf \        -D_PATH_SENDMAILPID=/usr/tests/sendmail.pid</PRE></BLOCKQUOTE></P><PCLASS="para">The STDIR= and HFDIR= are described below. TheENVDEF= tells <EMCLASS="emphasis">sendmail</EM> where its configurationand <EMCLASS="emphasis">pid</EM> files will be found (see <ACLASS="xref"HREF="ch18_08.htm#SML2-CH-18-SECT-8-34"TITLE="">Section 18.8.34, PATH...</A>).</P></DIV><DIVCLASS="sect2"><H3CLASS="sect2"><ACLASS="title"NAME="SML2-CH-18-SECT-4-8">18.4.8 STDIR=</A></H3><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-10135"></A>The STDIR= directive defines the location (directory) where the <EMCLASS="emphasis">sendmail</EM>program's statistics file will be found (see <ACLASS="xref"HREF="ch26_02.htm#SML2-CH-26-SECT-2-1"TITLE="The sendmail.st File">Section 26.2.1, "The sendmail.st File"</A>for a description of this file).It is very unlikely that you will ever haveto change this from the value that is predefined for you in your <EMCLASS="emphasis">Makefile</EM>.</P></DIV><DIVCLASS="sect2"><H3CLASS="sect2"><ACLASS="title"NAME="SML2-CH-18-SECT-4-9">18.4.9 HFDIR=</A></H3><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-10143"></A>The HFDIR= directive defines the location (directory) where the <EMCLASS="emphasis">sendmail</EM>program's SMTP-help file will be found (see <ACLASS="xref"HREF="ch34_08.htm#SML2-CH-34-SECT-8-28"TITLE="">Section 34.8.28, HelpFile (H)</A> fora description of the <CODECLASS="literal">HelpFile</CODE> option and this file).It is very unlikely that you will ever haveto change this from the value that is predefined for you in your <EMCLASS="emphasis">Makefile</EM>.</P></DIV><DIVCLASS="sect2"><H3CLASS="sect2"><ACLASS="title"NAME="SML2-CH-18-SECT-4-10">18.4.10 OBJADD=</A></H3><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-10152"></A>The OBJADD= directive defines additional object files that need to beincluded in the <EMCLASS="emphasis">sendmail</EM> program. It is very unlikely that you will ever haveto change this from the value that is predefined for you in your <EMCLASS="emphasis">Makefile</EM>.One exception might be if you need to replace a standard C libraryfunction with one that was customized to satisfy some local need.For example, consider a replacement for the <EMCLASS="emphasis">syslog</EM>(3) routine.First place a copy of <EMCLASS="emphasis">syslog.c</EM> in the <EMCLASS="emphasis">src</EM> directory. Thenrun:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">% <CODECLASS="userinput"><B>makesendmail -n</B></CODE></PRE></BLOCKQUOTE></P><PCLASS="para">which will create an <EMCLASS="emphasis">obj.*</EM>  directoryand populate it with symbolic links.[8]Finally, edit your <EMCLASS="emphasis">Makefile</EM>and <EMCLASS="emphasis">syslog.o</EM> to the OBJADD= directive:</P><BLOCKQUOTECLASS="footnote"><PCLASS="para">[8] If you have already run <EMCLASS="emphasis">makesendmail</EM>, running it again will notcreate the link. Instead, you will need to soft-link it by hand yourself.</P></BLOCKQUOTE><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">OBJADD=syslog.o</PRE></BLOCKQUOTE></P><PCLASS="para">This will cause the <EMCLASS="emphasis">syslog.c</EM> file to be compiled to producethe needed <EMCLASS="emphasis">syslog.o</EM> and will cause that <EMCLASS="emphasis">syslog.o</EM> tobe linked in with the <EMCLASS="emphasis">sendmail</EM> binary.</P></DIV></DIV><DIVCLASS="htmlnav"><P></P><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch18_03.htm"TITLE="18.3 Obtain the Source"><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 18.3 Obtain the Source"BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="book"HREF="index.htm"TITLE="sendmail"><IMGSRC="../gifs/txthome.gif"ALT="sendmail"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch18_05.htm"TITLE="18.5 Run Make"><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 18.5 Run Make"BORDER="0"></A></TD></TR><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172">18.3 Obtain the Source</TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="index"HREF="index/idx_0.htm"TITLE="Book Index"><IMGSRC="../gifs/index.gif"ALT="Book Index"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172">18.5 Run Make</TD></TR></TABLE><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><PCLASS="nav"><FONTSIZE="-1">[ <AHREF="../index.htm"TITLE="The Networking CD Bookshelf">Library Home</A> | <AHREF="../dnsbind/index.htm"TITLE="DNS &amp; BIND">DNS &amp; BIND</A> | <AHREF="../tcpip/index.htm"TITLE="TCP/IP Network Administration">TCP/IP</A> | <AHREF="index.htm"TITLE="sendmail">sendmail</A> | <AHREF="../smdref/index.htm"TITLE="sendmail Desktop Reference">sendmail Reference</A> | <AHREF="../firewall/index.htm"TITLE="Building Internet Firewalls">Firewalls</A> | <AHREF="../puis/index.htm"TITLE="Practical UNIX &amp; Internet Security">Practical Security</A> ]</FONT></P></DIV></BODY></HTML>