<HTML><HEAD><TITLE>[Chapter 18] 18.8 Alphabetized Reference</TITLE><METANAME="DC.title"CONTENT="sendmail"><METANAME="DC.creator"CONTENT="Bryan Costales &amp; Eric Allman"><METANAME="DC.publisher"CONTENT="O'Reilly &amp; Associates, Inc."><METANAME="DC.date"CONTENT="1999-01-06T18:48:41Z"><METANAME="DC.type"CONTENT="Text.Monograph"><METANAME="DC.format"CONTENT="text/html"SCHEME="MIME"><METANAME="DC.source"CONTENT="1-56592-222-0"SCHEME="ISBN"><METANAME="DC.language"CONTENT="en-US"><METANAME="generator"CONTENT="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><LINKREV="made"HREF="mailto:online-books@oreilly.com"TITLE="Online Books Comments"><LINKREL="up"HREF="ch18_01.htm"TITLE="18. Compile and Install sendmail"><LINKREL="prev"HREF="ch18_07.htm"TITLE="18.7 Pitfalls"><LINKREL="next"HREF="ch19_01.htm"TITLE="19. V8 m4 Configuration"></HEAD><BODYBGCOLOR="#FFFFFF"TEXT="#000000"><DIVCLASS="htmlnav"><H1><IMGSRC="gifs/smbanner.gif"ALT="sendmail"USEMAP="#srchmap"BORDER="0"></H1><MAPNAME="srchmap"><AREASHAPE="RECT"COORDS="0,0,466,65"HREF="index.htm"ALT="sendmail"><AREASHAPE="RECT"COORDS="467,0,514,18"HREF="../search/ssrch.htm"ALT="Search this book"></MAP><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch18_07.htm"TITLE="18.7 Pitfalls"><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 18.7 Pitfalls"BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><B><FONTFACE="ARIEL,HELVETICA,HELV,SANSERIF"SIZE="-1">Chapter 18<BR>Compile and Install sendmail</FONT></B></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="CHAPTER"HREF="ch19_01.htm"TITLE="19. V8 m4 Configuration"><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 19. V8 m4 Configuration"BORDER="0"></A></TD></TR></TABLE>&nbsp;<HRALIGN="LEFT"WIDTH="515"TITLE="footer"></DIV><DIVCLASS="SECT1"><H2CLASS="sect1"><ACLASS="title"NAME="SML2-CH-18-SECT-8">18.8 Alphabetized Reference</A></H2><PCLASS="para">In this section we presenteach <CODECLASS="literal">#define</CODE> macro (or group of them) in alphabetical orderrather than in the order in which they appear in your <EMCLASS="emphasis">Makefile</EM>.</P><PCLASS="para">Note that the <BCLASS="emphasis.bold">Tune</B> column of<ACLASS="xref"HREF="ch18_08.htm#SML2-CH-18-TAB-2"TITLE="#define Macros for Compiling sendmail">Table 18.3</A>recommends whether or not you should adjust(tune) the values for any particular <CODECLASS="literal">#define</CODE>. Those marked<EMCLASS="emphasis">tune</EM> may be adjusted from within your <EMCLASS="emphasis">Makefile</EM>.Those marked with <EMCLASS="emphasis">port</EM> should be changedonly in the rare event that you need to port <EMCLASS="emphasis">sendmail</EM>to a new operating system.[11]Those marked with <EMCLASS="emphasis">debug</EM> should only be defined duringporting to help debug the new binary but (for security reasons)should never be defined for the final production version.</P><BLOCKQUOTECLASS="footnote"><PCLASS="para">[11] But note that final porting should be done in <EMCLASS="emphasis">conf.h</EM> and <EMCLASS="emphasis">conf.c</EM> insteadof <EMCLASS="emphasis">Makefile</EM>.</P></BLOCKQUOTE><PCLASS="para">Also note that the <BCLASS="emphasis.bold">-d</B> column shows whichdebugging switches can be used to determine whether the correspondingmacro was defined when a <EMCLASS="emphasis">sendmail</EM> binary was compiled (see <ACLASS="xref"HREF="ch37_05.htm#SML2-CH-37-SECT-5-1"TITLE="">Section 37.5.1, -d0.1</A>for a description of this process).<ACLASS="indexterm"NAME="SML2-CH-18-IX-MACROS-FOR-COMPILING-SENDMAIL"></A><ACLASS="indexterm"NAME="SML2-CH-18-IX-SENDMAIL-CONFIGURATION-MACROS"></A><ACLASS="indexterm"NAME="SML2-CH-18-IX-COMPILING-SENDMAIL-MACROS-FOR"></A></P><TABLECLASS="table"><CAPTIONCLASS="table"><ACLASS="title"NAME="SML2-CH-18-TAB-2">Table 18.3: #define Macros for Compiling sendmail</A></CAPTION><THEADCLASS="thead"><TRCLASS="row"VALIGN="TOP"><THCLASS="entry"ALIGN="LEFT"ROWSPAN="1"COLSPAN="1">#define</TH><THCLASS="entry"ALIGN="LEFT"ROWSPAN="1"COLSPAN="1"></TH><THCLASS="entry"ALIGN="LEFT"ROWSPAN="1"COLSPAN="1">Tune</TH><THCLASS="entry"ALIGN="LEFT"ROWSPAN="1"COLSPAN="1">-d</TH><THCLASS="entry"ALIGN="LEFT"ROWSPAN="1"COLSPAN="1">Description</TH></TR></THEAD><TBODYCLASS="tbody"><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">AUTO_NIS_ALIASES</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch18_08.htm#SML2-CH-18-SECT-8-1"TITLE="">Section 18.8.1</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Tune</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Add fallback alias techniques</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">BROKEN_RES_SEARCH</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch18_08.htm#SML2-CH-18-SECT-8-2"TITLE="">Section 18.8.2, BROKEN-RES-SEARCH</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Port</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Broken resolver fix (e.g. Ultrix)</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">BSD4_3</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch18_08.htm#SML2-CH-18-SECT-8-3"TITLE="">Section 18.8.3, BSD4-3</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Port</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Use BSD 4.3 style signal handling</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">BSD4_4</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch18_08.htm#SML2-CH-18-SECT-8-4"TITLE="">Section 18.8.4, BSD4-4</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Port</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Compile for BSD 4.4 UNIX</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">DSN</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch18_08.htm#SML2-CH-18-SECT-8-5"TITLE="">Section 18.8.5, DSN</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Tune</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Support Delivery Status Notification</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">ERRLIST_PREDEFINED</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch18_08.htm#SML2-CH-18-SECT-8-6"TITLE="">Section 18.8.6</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Port</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Correct type conflicts on sys_errlist</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">_FFR_...</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch18_08.htm#SML2-CH-18-SECT-8-7"TITLE="">Section 18.8.7, -FFR-...</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Debug</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">For Future Release</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">FORK</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch18_08.htm#SML2-CH-18-SECT-8-8"TITLE="">Section 18.8.8, FORK</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Port</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">The type of <EMCLASS="emphasis">fork</EM>(5) to use</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">HAS...</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch18_08.htm#SML2-CH-18-SECT-8-9"TITLE="">Section 18.8.9, HAS...</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Port</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">0.10</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Has specific system call support</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">HESIOD</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch18_08.htm#SML2-CH-18-SECT-8-10"TITLE="">Section 18.8.10</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Tune</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">0.1</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Support hesiod database maps</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">HES_GETMAILHOST</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch18_08.htm#SML2-CH-18-SECT-8-11"TITLE="">Section 18.8.11, HES-GETMAILHOST</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Tune</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">0.1</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Use hesiod <EMCLASS="emphasis">hes_getmailhost</EM>(3)</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">IDENTPROTO</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch18_08.htm#SML2-CH-18-SECT-8-12"TITLE="">Section 18.8.12, IDENTPROTO</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Port</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">0.10</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">See Timeout.ident (<ACLASS="xref"HREF="ch34_08.htm#SML2-CH-34-SECT-8-70-10"TITLE="Timeout.ident">Section 34.8.70.10</A>)</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">IP_SRCROUTE</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch18_08.htm#SML2-CH-18-SECT-8-13"TITLE="">Section 18.8.13, IP-SRCROUTE</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Port</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">0.10</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Add IP source-routing to $_</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">LA_TYPE</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch18_08.htm#SML2-CH-18-SECT-8-14"TITLE="">Section 18.8.14, LA-TYPE</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Port</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">3.5</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Define your load-average support</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">LDAPMAP</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch18_08.htm#SML2-CH-18-SECT-8-15"TITLE="">Section 18.8.15</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Tune</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">0.1</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Enable use of ldap databases</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">LOG</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch18_08.htm#SML2-CH-18-SECT-8-16"TITLE="">Section 18.8.16, LOG</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Tune</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">0.1</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Perform logging</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">LOTUS_NOTES_HACK</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch18_08.htm#SML2-CH-18-SECT-8-17"TITLE="">Section 18.8.17, LOTUS-NOTES-HACK</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">V8.7.5</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Strip newlines from <CODECLASS="literal">From:</CODE> headers</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">MATCHGECOS</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch18_08.htm#SML2-CH-18-SECT-8-18"TITLE="">Section 18.8.18, MATCHGECOS</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Tune</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">0.1</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Support for fuzzy name matching</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">MAX...</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch18_08.htm#SML2-CH-18-SECT-8-19"TITLE="">Section 18.8.19, MAX...</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Tune</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Redefine maximums</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">MEMCHUNKSIZE</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch18_08.htm#SML2-CH-18-SECT-8-20"TITLE="">Section 18.8.20, MEMCHUNKSIZE</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Tune</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Specify memory allocation size</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">MIME7TO8</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch18_08.htm#SML2-CH-18-SECT-8-21"TITLE="">Section 18.8.21, MIME7TO8</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Tune</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">0.1</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Support MIME 7- to 8-bit conversion</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">MIME8TO7</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch18_08.htm#SML2-CH-18-SECT-8-22"TITLE="">Section 18.8.22, MIME8TO7</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Tune</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">0.1</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Support MIME 8- to 7-bit conversion</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">NAMED_BIND</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch18_08.htm#SML2-CH-18-SECT-8-23"TITLE="">Section 18.8.23</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Tune</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">0.1</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Support DNS name resolution</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">NDBM</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch18_08.htm#SML2-CH-18-SECT-8-24"TITLE="">Section 18.8.24</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Tune</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">0.1</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Support UNIX ndbm(3) Databases</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">NEED...</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch18_08.htm#SML2-CH-18-SECT-8-25"TITLE="">Section 18.8.25, NEED...</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Port</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Something amiss with your OS?</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">NET...</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch18_08.htm#SML2-CH-18-SECT-8-26"TITLE="">Section 18.8.26, NET...</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Tune</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">0.1</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Select network type</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">NETINFO</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch18_08.htm#SML2-CH-18-SECT-8-27"TITLE="">Section 18.8.27</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Tune</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">0.1</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Support NeXT <EMCLASS="emphasis">netinfo</EM>(3) databases</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">NEWDB</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch18_08.htm#SML2-CH-18-SECT-8-28"TITLE="">Section 18.8.28</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Tune</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">0.1</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Support Berkeley <EMCLASS="emphasis">db</EM>(3) Databases</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">NIS</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch18_08.htm#SML2-CH-18-SECT-8-29"TITLE="">Section 18.8.29</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Tune</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">0.1</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Support <EMCLASS="emphasis">nis</EM> maps</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">NISPLUS</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch18_08.htm#SML2-CH-18-SECT-8-30"TITLE="">Section 18.8.30</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Tune</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">0.1</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Support <EMCLASS="emphasis">nis+</EM> maps</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">NO_GROUP_SET</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch18_08.htm#SML2-CH-18-SECT-8-31"TITLE="">Section 18.8.31, NO-GROUP-SET</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Port</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Prevent multi-group file access</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">NOTUNIX</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch18_08.htm#SML2-CH-18-SECT-8-32"TITLE="">Section 18.8.32, NOTUNIX</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Port</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">30.2</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Exclude From line support</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">OLD_NEWDB</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch18_08.htm#SML2-CH-18-SECT-8-33"TITLE="">Section 18.8.33</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Port</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">0.1</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Support the old form of <EMCLASS="emphasis">db</EM>(3)</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">_PATH...</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch18_08.htm#SML2-CH-18-SECT-8-34"TITLE="">Section 18.8.34</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Debug</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Hard-code paths inside <KBDCLASS="command">sendmail</KBD></TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">PICKY...</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch18_08.htm#SML2-CH-18-SECT-8-35"TITLE="">Section 18.8.35, PICKY...</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Tune</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Make a pickier <EMCLASS="emphasis">sendmail</EM></TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">PSBUFSIZE</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch18_08.htm#SML2-CH-18-SECT-8-36"TITLE="">Section 18.8.36, PSBUFSIZ</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Tune</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Size of <EMCLASS="emphasis">prescan</EM>() buffer</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">QUEUE</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch18_08.htm#SML2-CH-18-SECT-8-37"TITLE="">Section 18.8.37, QUEUE</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Tune</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Enable queueing</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">QUEUESEGSIZE</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch18_08.htm#SML2-CH-18-SECT-8-38"TITLE="">Section 18.8.38, QUEUESEGSIZE</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Tune</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Amount to grow queue work list</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">SCANF</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch18_08.htm#SML2-CH-18-SECT-8-39"TITLE="">Section 18.8.39, SCANF</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Tune</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">0.10</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Support <EMCLASS="emphasis">scanf</EM>(3) with F command</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">SFS_TYPE</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch18_08.htm#SML2-CH-18-SECT-8-40"TITLE="">Section 18.8.40, SFS-TYPE</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Port</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">How to determine free disk space</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">SMTP</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch18_08.htm#SML2-CH-18-SECT-8-41"TITLE="">Section 18.8.41, SMTP</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Tune</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Enable SMTP</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">SMTPDEBUG</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch18_08.htm#SML2-CH-18-SECT-8-42"TITLE="">Section 18.8.42, SMTPDEBUG</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Debug</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Enable remote debugging</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">SMTPLINELIM</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch18_08.htm#SML2-CH-18-SECT-8-43"TITLE="">Section 18.8.43, SMTPLINELIM</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">n/a</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Default for obsolete F=L flag</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">SOLARIS</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch18_08.htm#SML2-CH-18-SECT-8-44"TITLE="">Section 18.8.44, SOLARIS</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Port</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Support Sun's Solaris 2.x</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">SPT_TYPE</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch18_08.htm#SML2-CH-18-SECT-8-45"TITLE="">Section 18.8.45, SPT-TYPE</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Port</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Adapt/exclude process title support</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">SUID_ROOT_FILES_OK</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch18_08.htm#SML2-CH-18-SECT-8-46"TITLE="">Section 18.8.46, SUID-ROOT-FILES-OK</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Debug</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">0.1</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Allow root delivery to files</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">SYSLOG_BUFSIZE</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch18_08.htm#SML2-CH-18-SECT-8-47"TITLE="">Section 18.8.47, SYSLOG-BUFSIZE</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Port</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Limit <EMCLASS="emphasis">syslog</EM>(3) buffer size</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">SYSTEM5</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch18_08.htm#SML2-CH-18-SECT-8-48"TITLE="">Section 18.8.48, SYSTEM5</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Port</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">0.10</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Support SysV derived machines</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">SYS5SIGNALS</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch18_08.htm#SML2-CH-18-SECT-8-48"TITLE="">Section 18.8.48</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Port</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">0.10</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Use SysV style signals</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">TCPWRAPPERS</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch18_08.htm#SML2-CH-18-SECT-8-49"TITLE="">Section 18.8.49, TCPWRAPPERS</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Tune</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">0.1</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Use libwrap.a for connects</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">TOBUFSIZE</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch18_08.htm#SML2-CH-18-SECT-8-50"TITLE="">Section 18.8.50, TOBUFSIZE</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Tune</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Set buffer for recipient list</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">TRUST_POPEN</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch18_08.htm#SML2-CH-18-SECT-8-51"TITLE="">Section 18.8.51, TRUST-POPEN</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Debug</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Allow use of <EMCLASS="emphasis">popen</EM>(3)</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">TTYNAME</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch18_08.htm#SML2-CH-18-SECT-8-52"TITLE="">Section 18.8.52, TTYNAME</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Debug</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">35.9</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Set $y to tty name (obsolete)</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">UDB_DEFAULT_SPEC</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch18_08.htm#SML2-CH-18-SECT-8-53"TITLE="">Section 18.8.53</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Tune</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Default User Database location</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">USERDB</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch18_08.htm#SML2-CH-18-SECT-8-54"TITLE="">Section 18.8.54</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Tune</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">0.1</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Support the User Database</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">USESETEUID</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch18_08.htm#SML2-CH-18-SECT-8-55"TITLE="">Section 18.8.55, USESETEUID</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Port</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">0.10</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Support <EMCLASS="emphasis">seteuid</EM>(2) identity changes</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">WILDCARD_SHELL</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch18_08.htm#SML2-CH-18-SECT-8-56"TITLE="">Section 18.8.56, WILDCARD-SHELL</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Debug</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Redefine wildcard shell</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">XDEBUG</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch18_08.htm#SML2-CH-18-SECT-8-57"TITLE="">Section 18.8.57, XDEBUG</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Debug</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">0.1</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Support sanity checks</TD></TR></TBODY></TABLE><DIVCLASS="refentry"><DIVCLASS="refnamediv"><H3CLASS="refname"><ACLASS="refname"NAME="SML2-CH-18-SECT-8-1">18.8.1 AUTO-NIS-ALIASES</A></H3><PCLASS="refpurpose">Add fallback alias techniques</P>(tune with DBMDEF= in Makefile)</DIV><BLOCKQUOTE><DIVCLASS="refsect1"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-10809"></A><ACLASS="indexterm"NAME="AUTOID-10811"></A>Ordinarily, <EMCLASS="emphasis">sendmail</EM> will first look for a service-switch(see <ACLASS="xref"HREF="ch34_08.htm#SML2-CH-34-SECT-8-61"TITLE="">Section 34.8.61</A>)to see how it should look up its aliases. If it finds one, and ifthe service <EMCLASS="emphasis">aliases</EM> is listed, it uses the techniques listedwith the service-switchto look up its aliases. In the absence of a service-switch, or ifthe service-switch could not be opened, <EMCLASS="emphasis">sendmail</EM>'s fallbackposition is to use the technique called <EMCLASS="emphasis">files</EM> to look up itsaliases.</P><PCLASS="para">This AUTO_NIS_ALIASES definition, when specified during compilation,also causes <EMCLASS="emphasis">sendmail</EM> to automatically add the technique<EMCLASS="emphasis">nis</EM> if NIS was defined or <EMCLASS="emphasis">nis+</EM> if NISPLUSwas defined:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">DBMDEF= -DNIS -DAUTO_NIS_ALIASESDBMDEF= -DNISPLUS -DAUTO_NIS_ALIASES</PRE></BLOCKQUOTE></P><PCLASS="para">The first line causes the fallback list of techniquesto become <EMCLASS="emphasis">files</EM> then <EMCLASS="emphasis">nis</EM>, and the second causes it to become<EMCLASS="emphasis">files</EM> then <EMCLASS="emphasis">nisplus</EM>. Note that AUTO_NIS_ALIASES is not defined in any<EMCLASS="emphasis">Makefile</EM> distributed with <EMCLASS="emphasis">sendmail</EM>.</P></DIV></BLOCKQUOTE></DIV><DIVCLASS="refentry"><DIVCLASS="refnamediv"><H3CLASS="refname"><ACLASS="refname"NAME="SML2-CH-18-SECT-8-2">18.8.2 BROKEN-RES-SEARCH</A></H3><PCLASS="refpurpose">Broken resolver fix (e.g. Ultrix)</P>(port, edit conf.h)</DIV><BLOCKQUOTE><DIVCLASS="refsect1"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-10840"></A><ACLASS="indexterm"NAME="AUTOID-10842"></A>On Ultrix, and possibly other systems, the <EMCLASS="emphasis">res_search</EM>(2) routineincorrectly sets <EMCLASS="emphasis">h_errno</EM> to 0 instead of HOST_NOT_FOUND if a hostname is unknown. On such systems you candefine BROKEN_RES_SEARCHin your <EMCLASS="emphasis">Makefile</EM>, which tells <EMCLASS="emphasis">sendmail</EM> to consider0 the same as HOST_NOT_FOUND:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">ENVDEF= -DBROKEN_RES_SEARCH</PRE></BLOCKQUOTE></P><PCLASS="para">As distributed, this is not declared for any of the supplied<EMCLASS="emphasis">Makefile</EM> files. If you are running Ultrix you shouldtest your resolver library. If it fails, you should upgrade to the latest resolver library. If, for some reason, upgrading is notpossible, you may define this as a workaround. When porting to anew system, you can test with the above ENVDEF= statement and, if successful,put a permanent porting entry into <EMCLASS="emphasis">conf.h</EM>.</P></DIV></BLOCKQUOTE></DIV><DIVCLASS="refentry"><DIVCLASS="refnamediv"><H3CLASS="refname"><ACLASS="refname"NAME="SML2-CH-18-SECT-8-3">18.8.3 BSD4-3</A></H3><PCLASS="refpurpose">Use old style signal handling</P>(port, edit conf.h)</DIV><BLOCKQUOTE><DIVCLASS="refsect1"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-10861"></A>Old BSD-based versions of UNIX, such as SunOS 4.0.x and BSD 4.3,used the <EMCLASS="emphasis">signal</EM>(2) and <EMCLASS="emphasis">sigsetmask</EM>(2) calls to setand release signals. Modern versions of UNIX use the <EMCLASS="emphasis">sigaction</EM>(2)and <EMCLASS="emphasis">sigprocmask</EM>(2) pair of routines. For all currentlysupported systems, BSD4_3is already correctly defined in <EMCLASS="emphasis">src/Makefiles</EM>or in <EMCLASS="emphasis">conf.h</EM>. You should need to define BSD4_3 only if youare porting to a previously unsupported old BSD-based system:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">ENVDEF= -DBSD4_3</PRE></BLOCKQUOTE></P><PCLASS="para">When porting to anew system, you can test with the above ENVDEF= statement and, if successful,put a permanent porting entry into <EMCLASS="emphasis">conf.h</EM>.</P></DIV></BLOCKQUOTE></DIV><DIVCLASS="refentry"><DIVCLASS="refnamediv"><H3CLASS="refname"><ACLASS="refname"NAME="SML2-CH-18-SECT-8-4">18.8.4 BSD4-4</A></H3><PCLASS="refpurpose">Compile for BSD 4.4 Unix</P>(port, edit conf.h)</DIV><BLOCKQUOTE><DIVCLASS="refsect1"><PCLASS="para">BSD4_4 will automatically be defined when <EMCLASS="emphasis">sendmail</EM> is built underthe BSD 4.4 release of UNIX. You will need to redefine this only if youare porting to a new operating system that is based on BSD 4.4.</P></DIV></BLOCKQUOTE></DIV><DIVCLASS="refentry"><DIVCLASS="refnamediv"><H3CLASS="refname"><ACLASS="refname"NAME="SML2-CH-18-SECT-8-5">18.8.5 DSN</A></H3><PCLASS="refpurpose">Support Delivery Status Notification</P>(tune with ENVDEF= in Makefile)</DIV><BLOCKQUOTE><DIVCLASS="refsect1"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-10890"></A><ACLASS="indexterm"NAME="AUTOID-10893"></A>Delivery Status Notification (DSN) replacescertain SMTP error codesand the <CODECLASS="literal">Return-Receipt-To:</CODE> header (<ACLASS="xref"HREF="ch35_10.htm#SML2-CH-35-SECT-10-29"TITLE="">Section 35.10.29, Return-Receipt-To:</A>) as a means of handling multipledelivery status requests and problems. DSN is an improvement over earlier mechanisms for returningdelivery status information. It can, for example,supply different status informationfor each recipient when multiple recipients are specified. Itcan also be used to generate return receipts on a per recipient basis.DSN status is returned in the MIME encapsulated portion ofa mail message's body.</P><PCLASS="para">DSN is defined in RFC1891, RFC1892,RFC1893, and RFC1894.If you wish to exclude DSN support (not recommended), you mayturn it off like this:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">ENVDEF=  -DDSN=<CODECLASS="userinput"><B>0</B></CODE>               <ICLASS="lineannotation"><IMGSRC="../chars/uarr.gif"ALT="-^"></I>      <ICLASS="lineannotation">turn off DSN support</I></PRE></BLOCKQUOTE></P><PCLASS="para">MIME is described under the <CODECLASS="literal">EightBitMode</CODE> (<CODECLASS="literal">8</CODE>) option(see <ACLASS="xref"HREF="ch34_08.htm#SML2-CH-34-SECT-8-22"TITLE="">Section 34.8.22, EightBitMode (8)</A>).</P></DIV></BLOCKQUOTE></DIV><DIVCLASS="refentry"><DIVCLASS="refnamediv"><H3CLASS="refname"><ACLASS="refname"NAME="SML2-CH-18-SECT-8-6">18.8.6 ERRLIST-PREDEFINED</A></H3><PCLASS="refpurpose">Correct conflicts on sys-errlist</P>(port, edit conf.h)</DIV><BLOCKQUOTE><DIVCLASS="refsect1"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-10915"></A><ACLASS="indexterm"NAME="AUTOID-10917"></A>Some systems define a type for <EMCLASS="emphasis">sys_errlist[]</EM> that differs fromthe internal declaration made by <EMCLASS="emphasis">sendmail</EM>. In such instancesyou will get a warning about <EMCLASS="emphasis">sys_errlist</EM> being redefined whenyou compile. Such warnings are usually harmless, but they are unattractive. Toeliminate them, add the following to your <EMCLASS="emphasis">Makefile</EM>:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">ENVDEF= -DERRLIST_PREDEFINED</PRE></BLOCKQUOTE></P><PCLASS="para">When porting to anew system, you can test with the above ENVDEF= statement and, if successful,put a permanent porting entry into <EMCLASS="emphasis">conf.h</EM>.</P></DIV></BLOCKQUOTE></DIV><DIVCLASS="refentry"><DIVCLASS="refnamediv"><H3CLASS="refname"><ACLASS="refname"NAME="SML2-CH-18-SECT-8-7">18.8.7 -FFR-...</A></H3><PCLASS="refpurpose">For Future Release</P>(debug with ENVDEF= in Makefile)</DIV><BLOCKQUOTE><DIVCLASS="refsect1"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-10936"></A>Most releases of <EMCLASS="emphasis">sendmail</EM> contain, within the C language code,sections that are commented out. These are initial stabs at solutionsthat either did not work as is, are incomplete or untested,or are dreams for the future.</P><PCLASS="para">If you have a good reason and <EMCLASS="emphasis">thoroughly</EM> understand the code andwhy it is excluded (and if you are brave), you may include itby adding an appropriate _FFR_ (For Future Release)definition to ENVDEF= in <EMCLASS="emphasis">Makefile</EM>:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">ENVDEF= -D_FFR_<CODECLASS="replaceable"><I>what</I></CODE></PRE></BLOCKQUOTE></P><PCLASS="para">Here, <CODECLASS="replaceable"><I>what</I></CODE> describes the appropriate future item that youwant to include (as found in the source).We categorize this as a debugging technique (not a porting or tuningone) because you may want to include future code for testing, butshould probably not include it in your production version.</P></DIV></BLOCKQUOTE></DIV><DIVCLASS="refentry"><DIVCLASS="refnamediv"><H3CLASS="refname"><ACLASS="refname"NAME="SML2-CH-18-SECT-8-8">18.8.8 FORK</A></H3><PCLASS="refpurpose">The type of fork to use</P>(port, edit conf.h)</DIV><BLOCKQUOTE><DIVCLASS="refsect1"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-10955"></A>The <EMCLASS="emphasis">sendmail</EM> program forks often to do its job in the mostefficient way possible. Prior to V8.8, <EMCLASS="emphasis">sendmail</EM>used <EMCLASS="emphasis">vfork</EM>(2) whenever possible. Beginning with V8.8, <EMCLASS="emphasis">sendmail</EM> now defaults to <EMCLASS="emphasis">fork</EM>(2).[12]You should have to redefine FORK only when porting to a new systemor when you are certain that <EMCLASS="emphasis">vfork</EM>(2) is indeed faster on your systemand is reliable.</P><BLOCKQUOTECLASS="footnote"><PCLASS="para">[12] Bugs in the interaction between NIS and <EMCLASS="emphasis">vfork</EM>(2) at thesystem level with Solaris and systems that lacked <EMCLASS="emphasis">vfork</EM>(2)altogether, such as IRIX, caused V8.8 to favor <EMCLASS="emphasis">fork</EM>(2).<ACLASS="indexterm"NAME="AUTOID-10967"></A>This is really okay because in modern systems, <EMCLASS="emphasis">fork</EM>(2) isjust as fast as <EMCLASS="emphasis">vfork</EM>(2).</P></BLOCKQUOTE><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">ENVDEF= -DFORK=vfork</PRE></BLOCKQUOTE></P><PCLASS="para">You can test with the above ENVDEF= statement and, if successful,put a permanent porting entry into <EMCLASS="emphasis">conf.h</EM>.</P></DIV></BLOCKQUOTE></DIV><DIVCLASS="refentry"><DIVCLASS="refnamediv"><H3CLASS="refname"><ACLASS="refname"NAME="SML2-CH-18-SECT-8-9">18.8.9 HAS...</A></H3><PCLASS="refpurpose">Has specific system call support</P>(port, edit conf.h)</DIV><BLOCKQUOTE><DIVCLASS="refsect1"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-10985"></A>Macros that begin with HAS tell <EMCLASS="emphasis">sendmail</EM> whether ornot your system supports (has) certain system-library routines.In general, you should need to define or undefine the macrosshown in<ACLASS="xref"HREF="ch18_08.htm#SML2-CH-18-TAB-3"TITLE="HAS... #defines for Specific System Call Support">Table 18.4</A>only if you are porting <EMCLASS="emphasis">sendmail</EM> to a new system. In that instanceyou should also read <EMCLASS="emphasis">src/READ_ME</EM> for the latest informationand pitfalls.</P><PCLASS="para">Each of these is turned on or off with an assignment of 1 or 0:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">ENVDEF=  -DHASSETSID=1      <ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> turn on</I>ENVDEF=  -DHASSETSID=0      <ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> turn off</I></PRE></BLOCKQUOTE></P><PCLASS="para">Turning on tells <EMCLASS="emphasis">sendmail</EM> that your site has support for thissystem call (<EMCLASS="emphasis">setsid</EM>(2) in this instance). Turning offtells <EMCLASS="emphasis">sendmail</EM> to work around the lack of that support.When porting to anew system, you can test with one of the above ENVDEF= statements and, if successful,put a permanent porting entry into <EMCLASS="emphasis">conf.h</EM>.</P><PCLASS="para">These have probably been correctly defined for your system already. Therefore you should need to change them only when porting <EMCLASS="emphasis">sendmail</EM> to a completely new system.</P><TABLECLASS="table"><CAPTIONCLASS="table"><ACLASS="title"NAME="SML2-CH-18-TAB-3">Table 18.4: HAS... #defines for Specific System Call Support</A></CAPTION><THEADCLASS="thead"><TRCLASS="row"VALIGN="TOP"><THCLASS="entry"ALIGN="LEFT"ROWSPAN="1"COLSPAN="1">#define</TH><THCLASS="entry"ALIGN="LEFT"ROWSPAN="1"COLSPAN="1">System Call</TH></TR></THEAD><TBODYCLASS="tbody"><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">HASFCHMOD</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><EMCLASS="emphasis">fchmod</EM>(2)</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">HASFLOCK</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><EMCLASS="emphasis">flock</EM>(2)</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">HASGETDTABLESIZE</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><EMCLASS="emphasis">getdtablesize</EM>(2)</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">HASGETUSERSHELL</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><EMCLASS="emphasis">getusershell</EM>(3)</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">HASINITGROUPS</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><EMCLASS="emphasis">initgroups</EM>(3)</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">HASLSTAT</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><EMCLASS="emphasis">lstat</EM>(2)</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">HASSETREUID</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><EMCLASS="emphasis">setreuid</EM>(2)</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">HASSETRLIMIT</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><EMCLASS="emphasis">setrlimit</EM>(2)</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">HASSETSID</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><EMCLASS="emphasis">setsid</EM>(2)</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">HASSETUSERCONTEXT</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><EMCLASS="emphasis">setusercontext</EM>(3)</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">HASSETVBUF</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><EMCLASS="emphasis">setvbuf</EM>(3)</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">HASSIGSETMASK</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><EMCLASS="emphasis">sigsetmask</EM>(2)</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">HASSNPRINTF</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><EMCLASS="emphasis">snprintf</EM>(3) and <EMCLASS="emphasis">vsnprintf</EM>(3)</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">HASULIMIT</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><EMCLASS="emphasis">ulimit</EM>(2)</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">HASUNAME</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><EMCLASS="emphasis">uname</EM>(2)</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">HASUNSETENV</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><EMCLASS="emphasis">unsetenv</EM>(3)</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">HASWAITPID</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><EMCLASS="emphasis">waitpid</EM>(2)</TD></TR></TBODY></TABLE><PCLASS="para">If you are running a precompiled binary of <EMCLASS="emphasis">sendmail</EM>, you can determine whether any of these were defined when <EMCLASS="emphasis">sendmail</EM> wascompiled by using the <CODECLASS="literal">-d0.10</CODE> debugging switch (see <ACLASS="xref"HREF="ch37_05.htm#SML2-CH-37-SECT-5-3"TITLE="">Section 37.5.3, -d0.10</A>).</P></DIV></BLOCKQUOTE></DIV><DIVCLASS="refentry"><DIVCLASS="refnamediv"><H3CLASS="refname"><ACLASS="refname"NAME="SML2-CH-18-SECT-8-10">18.8.10 HESIOD</A></H3><PCLASS="refpurpose">Support hesiod database maps</P>(tune with DBMDEF= in Makefile)</DIV><BLOCKQUOTE><DIVCLASS="refsect1"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-11093"></A>Named after the 8th century B.C.E.[13]Greek poet Hesiod, the <EMCLASS="emphasis">hesiod</EM>system is a network information system developed as ProjectAthena. Information that is shared amongmany machines on a network can be accessed by each machine usinga common set of library routines. Files that are commonly represented inthis form are the <EMCLASS="emphasis">passwd</EM>(4) and <EMCLASS="emphasis">aliases</EM>(4) files usedby <EMCLASS="emphasis">sendmail</EM>. The <EMCLASS="emphasis">hesiod</EM> system is patterned after theInternet Domain Naming System and uses modified BIND source:</P><BLOCKQUOTECLASS="footnote"><PCLASS="para">[13] Before Christian Era, although an alternative proposal that is makingthe rounds calls for signed years, thus the -8th century.</P></BLOCKQUOTE><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">DBMDEF= -DHESIOD</PRE></BLOCKQUOTE></P><PCLASS="para">If HESIOD is defined when <EMCLASS="emphasis">sendmail</EM> is built, support is includedto look up aliases and user information via the <EMCLASS="emphasis">hesiod</EM>interface. Support is also included to declare and use <EMCLASS="emphasis">hesiod</EM>class maps (see <ACLASS="xref"HREF="ch33_03.htm#SML2-CH-33-SECT-3-2"TITLE="The class">Section 33.3.2, "The class"</A>) with the <CODECLASS="literal">K</CODE>configuration command. Support is also included for the User Databaseif USERDB is also defined.</P><PCLASS="para">Hesiod documentation and source are available from:</P><PCLASS="para"><BLOCKQUOTECLASS="literallayout"><PCLASS="literallayout"><ACLASS="systemitem.url"HREF="ftp://athena-dist.mit.edu/pub/ATHENA">ftp://athena-dist.mit.edu/pub/ATHENA</A></P></BLOCKQUOTE></P><PCLASS="para">If you are running a precompiled <EMCLASS="emphasis">sendmail</EM> binary, you may usethe <CODECLASS="literal">-d0.1</CODE> switch (see <ACLASS="xref"HREF="ch37_05.htm#SML2-CH-37-SECT-5-1"TITLE="">Section 37.5.1</A>)to determine whether HESIOD support is included.</P></DIV></BLOCKQUOTE></DIV><DIVCLASS="refentry"><DIVCLASS="refnamediv"><H3CLASS="refname"><ACLASS="refname"NAME="SML2-CH-18-SECT-8-11">18.8.11 HES-GETMAILHOST</A></H3><PCLASS="refpurpose">Use hesiod hes-getmailhost()</P>(tune with ENVDEF= in Makefile)</DIV><BLOCKQUOTE><DIVCLASS="refsect1"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-11126"></A>The MIT distribution of <EMCLASS="emphasis">hesiod</EM> supports the <EMCLASS="emphasis">hes_getmailhost</EM>(3) call for looking up a user's postoffice.If your site is running MIT's <EMCLASS="emphasis">hesiod</EM>, you shoulddefine this. If your are running DEC's <EMCLASS="emphasis">hesiod</EM>, youshould not.</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">ENVDEF= -DHES_GETMAILHOST</PRE></BLOCKQUOTE></P><PCLASS="para">HES_GETMAILHOST is by default not defined. If you need it,you must define it in your <EMCLASS="emphasis">Makefile</EM>. If you are running aprecompiled version of <EMCLASS="emphasis">sendmail</EM>, you may use the <CODECLASS="literal">-d0.1</CODE>debugging switch(see <ACLASS="xref"HREF="ch37_05.htm#SML2-CH-37-SECT-5-1"TITLE="">Section 37.5.1</A>)to determine whether HES_GETMAILHOST has been included.The <CODECLASS="literal">-d28.8</CODE> (see <ACLASS="xref"HREF="ch37_05.htm#SML2-CH-37-SECT-5-100"TITLE="">Section 37.5.100, -d28.8</A>)debugging flag can be used to trace thebehavior of the <EMCLASS="emphasis">hes_getmailhost</EM>(3) routine.</P></DIV></BLOCKQUOTE></DIV><DIVCLASS="refentry"><DIVCLASS="refnamediv"><H3CLASS="refname"><ACLASS="refname"NAME="SML2-CH-18-SECT-8-12">18.8.12 IDENTPROTO</A></H3><PCLASS="refpurpose">See Timeout.ident in <ACLASS="xref"HREF="ch34_08.htm#SML2-CH-34-SECT-8-70-10"TITLE="Timeout.ident">Section 34.8.70.10</A></P>(port)</DIV><BLOCKQUOTE><DIVCLASS="refsect1"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-11151"></A><ACLASS="indexterm"NAME="AUTOID-11153"></A>Defining out IDENTPROTO neither includes nor excludes RFC1413code. All it does is change the default value for the<CODECLASS="literal">Timeout.ident</CODE> option (see <ACLASS="xref"HREF="ch34_08.htm#SML2-CH-34-SECT-8-70-10"TITLE="Timeout.ident">Section 34.8.70.10</A>):</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">ENVDEF= -DIDENTPROTO=0          <ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> set Timeout.ident=0 by default</I>ENVDEF= -DIDENTPROTO=1          <ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> set Timeout.ident=30 by default</I></PRE></BLOCKQUOTE></P><PCLASS="para">If you are running a precompiled <EMCLASS="emphasis">sendmail</EM> binary, you may usethe <CODECLASS="literal">-d0.10</CODE> switch (see <ACLASS="xref"HREF="ch37_05.htm#SML2-CH-37-SECT-5-3"TITLE="">Section 37.5.3</A>)to determine whether IDENTPROTO was defined as nonzero.</P></DIV></BLOCKQUOTE></DIV><DIVCLASS="refentry"><DIVCLASS="refnamediv"><H3CLASS="refname"><ACLASS="refname"NAME="SML2-CH-18-SECT-8-13">18.8.13 IP-SRCROUTE</A></H3><PCLASS="refpurpose">Add IP source-routing to $-</P>(port, edit conf.h)</DIV><BLOCKQUOTE><DIVCLASS="refsect1"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-11173"></A><ACLASS="indexterm"NAME="AUTOID-11175"></A><ACLASS="indexterm"NAME="AUTOID-11178"></A>Mail is normally transported over networks with TCP/IP. At theIP layer, packets are usually constructed to be point-to-point&nbsp;- from one host to another. IP packets can also be constructed to contain source-routing information&nbsp;- from one host, througha second, then to a final host.</P><PCLASS="para">Although such source routing (when used) is generally legitimate,it can also be used to generate fraudulent mail. V8.7 <EMCLASS="emphasis">sendmail</EM>attempts to extract source-routing information from the initialconnection's IP information. If any is found, <EMCLASS="emphasis">sendmail</EM> addsthat information to the <CODECLASS="literal">$_</CODE> macro(see <ACLASS="xref"HREF="ch31_10.htm#SML2-CH-31-SECT-10-1"TITLE="">Section 31.10.1, $-</A>) for usein the <CODECLASS="literal">Received:</CODE> header (see <ACLASS="xref"HREF="ch35_10.htm#SML2-CH-35-SECT-10-25"TITLE="">Section 35.10.25, Received:</A>).The <CODECLASS="literal">$_</CODE> macro is usually used like this:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">Received: from $s ($_) ...</PRE></BLOCKQUOTE></P><PCLASS="para">where <CODECLASS="literal">$_</CODE> will contain information like that shown belowwhen IP source-routing information is found:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">       <ICLASS="lineannotation">IP source-routing information</I>                   <ICLASS="lineannotation"><IMGSRC="../chars/darr.gif"ALT="-v"></I>user@host.domain [!@hostC@hostB:hostA]<ICLASS="lineannotation"><IMGSRC="../chars/uarr.gif"ALT="-^"></I><ICLASS="lineannotation">RFC1413 identd information</I></PRE></BLOCKQUOTE></P><PCLASS="para">IP source-routing information is presented inside square brackets.If routing is strict, the information is prefixed with anexclamation mark. The format of the information is made to resemblethat of source-route addressing(see the <CODECLASS="literal">DontPruneRoutes</CODE> option, <ACLASS="xref"HREF="ch34_08.htm#SML2-CH-34-SECT-8-20"TITLE="">Section 34.8.20, DontPruneRoutes (R)</A>).In this example the IP packets will go first to <CODECLASS="literal">hostC</CODE>,then to <CODECLASS="literal">hostB</CODE>, and finally to <CODECLASS="literal">hostA</CODE>.</P><PCLASS="para">The inclusion of code to support this reporting is determined bythe IP_SRCROUTE definition in your <EMCLASS="emphasis">Makefile</EM>. It is predefinedcorrectly for all supported systems in <EMCLASS="emphasis">conf.h</EM>, so you should need to redefine it only if you are porting <EMCLASS="emphasis">sendmail</EM> to a completely new system. Be sure to read <EMCLASS="emphasis">src/READ_ME</EM> forthe latest information about IP_SRCROUTE.</P><PCLASS="para">If you are running a precompiled <EMCLASS="emphasis">sendmail</EM> binary, you may usethe <CODECLASS="literal">-d0.10</CODE> switch(see <ACLASS="xref"HREF="ch37_05.htm#SML2-CH-37-SECT-5-3"TITLE="">Section 37.5.3</A>)to determine whether IP_SRCROUTE support was included.</P></DIV></BLOCKQUOTE></DIV><DIVCLASS="refentry"><DIVCLASS="refnamediv"><H3CLASS="refname"><ACLASS="refname"NAME="SML2-CH-18-SECT-8-14">18.8.14 LA-TYPE</A></H3><PCLASS="refpurpose">Define your load-average support</P>(port, edit conf.h)</DIV><BLOCKQUOTE><DIVCLASS="refsect1"><PCLASS="para"><ACLASS="indexterm"NAME="SML2-CH-18-IX-LA-TYPE-MACRO"></A><ACLASS="indexterm"NAME="SML2-CH-18-IX-PERFORMANCE-LOAD-AVERAGE"></A>The load average is the average number of blocked processes(processes that are runnable but not able to run because of a lackof resources) over the last minute. The <EMCLASS="emphasis">sendmail</EM> program canvary its behavior appropriately as the load average changes. Thresholdsfor change are defined by the options shown in <ACLASS="xref"HREF="ch34_06.htm#SML2-CH-34-TAB-8"TITLE="Options That Determine Load">Table 34.9</A>(see <ACLASS="xref"HREF="ch34_06.htm#SML2-CH-34-SECT-6-4"TITLE="Controlling Machine Load">Section 34.6.4, "Controlling Machine Load"</A>).</P><PCLASS="para">The method that is used to get the current load average from the operatingsystem varies widely. This LA_TYPE definition determineswhich method to use. It is correctly defined inside <EMCLASS="emphasis">conf.h</EM>for all currently supported operating systems. Porting <EMCLASS="emphasis">sendmail</EM>to a new system may require that you define LA_TYPE yourself.The possible values and their meanings are shown in<ACLASS="xref"HREF="ch18_08.htm#SML2-CH-18-TAB-4"TITLE="LA_ Methods for Getting the Load Average">Table 18.5</A>.</P><TABLECLASS="table"><CAPTIONCLASS="table"><ACLASS="title"NAME="SML2-CH-18-TAB-4">Table 18.5: LA_ Methods for Getting the Load Average</A></CAPTION><THEADCLASS="thead"><TRCLASS="row"VALIGN="TOP"><THCLASS="entry"ALIGN="LEFT"ROWSPAN="1"COLSPAN="1">LA_</TH><THCLASS="entry"ALIGN="LEFT"ROWSPAN="1"COLSPAN="1">Does What</TH></TR></THEAD><TBODYCLASS="tbody"><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">LA_ZERO</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Always returns 0. Essentially disables load average checking.  This is portable to all systems.</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">LA_INT</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Read <EMCLASS="emphasis">/dev/kmem</EM> for the symbol <EMCLASS="emphasis">avenrun</EM>. If found, interpret the result as a native (usually long) integer.</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">LA_FLOAT</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Read <EMCLASS="emphasis">/dev/kmem</EM> for the symbol <EMCLASS="emphasis">avenrun</EM>. If found, interpret the result as a floating-point value.</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">LA_SHORT</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Read <EMCLASS="emphasis">/dev/kmem</EM> for the symbol <EMCLASS="emphasis">avenrun</EM>. If found, interpret the result as a short integer.</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">LA_SUBR</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Call the library routine <EMCLASS="emphasis">getloadavg</EM>(3) and use the result returned.</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">LA_MACH</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Call the MACH-specific <EMCLASS="emphasis">processor_set_info</EM>(2) routine and use the result returned.</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">LA_PROCSTR</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Read the Linux-specific <EMCLASS="emphasis">/proc/loadavg</EM> file and interpret the result as a floating-point value.</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">LA_READKSYM</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Use the (some SysV versions) <EMCLASS="emphasis">ioctl</EM> of MIOC_READKSYM to read <EMCLASS="emphasis">/dev/kmem</EM>.</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">LA_DGUX</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">DG/UX specific support for using the <EMCLASS="emphasis">pstat_getdynamic</EM>(2)function to read the load average.</TD></TR></TBODY></TABLE><PCLASS="para">The LA_INT, LA_SHORT, LA_FLOAT, and LA_READKSYMsettings require additional tuning. For these, three additional definitionsare used as shown in<ACLASS="xref"HREF="ch18_08.htm#SML2-CH-18-TAB-5"TITLE="Tuning for LA_INT, LA_SHORT, LA_FLOAT, and LA_READKSYM">Table 18.6</A>.</P><TABLECLASS="table"><CAPTIONCLASS="table"><ACLASS="title"NAME="SML2-CH-18-TAB-5">Table 18.6: Tuning for LA_INT, LA_SHORT, LA_FLOAT, and LA_READKSYM</A></CAPTION><THEADCLASS="thead"><TRCLASS="row"VALIGN="TOP"><THCLASS="entry"ALIGN="LEFT"ROWSPAN="1"COLSPAN="1">#define</TH><THCLASS="entry"ALIGN="LEFT"ROWSPAN="1"COLSPAN="1">Tunes</TH></TR></THEAD><TBODYCLASS="tbody"><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">FSHIFT</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Number of bits to shift right when using LA_INT, LA_SHORT, and LA_READKSYM. Default is 8.</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">_PATH_UNIX</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><PCLASS="para">The pathname of your kernel. This is required for LA_INT and LA_SHORT. Default is <EMCLASS="emphasis">/unix</EM>for SysV; <EMCLASS="emphasis">/hp_ux</EM> for HP/UX V9; <EMCLASS="emphasis">/stand/unix</EM>for HP/UX V10, News, and UXP/OS; <EMCLASS="emphasis">/dev/ksyms</EM> for Solaris; <EMCLASS="emphasis">/dynix</EM> for DYNIX; otherwise <EMCLASS="emphasis">/vmunix</EM>.</P></TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">_PATH_KMEM</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">The pathname of your kernel memory. This is required for LA_INT, LA_SHORT, LA_FLOAT, and LA_READKSYM. Default is <EMCLASS="emphasis">/dev/kmem</EM>.</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">LA_AVENRUN</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">The name of the kernel variable that holds the load average.  Used by LA_INT, LA_SHORT, and LA_FLOAT.  Default is <EMCLASS="emphasis">averun</EM> for SysV, otherwise <EMCLASS="emphasis">_averun</EM>.</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">NAMELISTMASK</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">The mask to bitwise-AND against the return value of nlist(3). If this is undefined, the return value is used as is. A common value is 0x7fffffff to strip off the high bit.</TD></TR></TBODY></TABLE><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-11316"></A><ACLASS="indexterm"NAME="AUTOID-11317"></A></P></DIV></BLOCKQUOTE></DIV><DIVCLASS="refentry"><DIVCLASS="refnamediv"><H3CLASS="refname"><ACLASS="refname"NAME="SML2-CH-18-SECT-8-15">18.8.15 LDAPMAP</A></H3><PCLASS="refpurpose">Enable use of ldap databases</P>(tune with DBMDEF= in Makefile)</DIV><BLOCKQUOTE><DIVCLASS="refsect1"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-11326"></A><ACLASS="indexterm"NAME="AUTOID-11328"></A>LDAP stands for Lightweight Directory AccessProtocol. LDAP provides lightweight access tothe X.500 directory and is defined in RFC1777 and RFC1778.</P><PCLASS="para">The software and documentation for LDAP is available from</P><PCLASS="para"><BLOCKQUOTECLASS="literallayout"><PCLASS="literallayout"><ACLASS="systemitem.url"HREF="ftp://terminator.rs.itd.umich.edu/ldap/">ftp://terminator.rs.itd.umich.edu/ldap/</A></P></BLOCKQUOTE></P><PCLASS="para">It is used by defining a map class called <CODECLASS="literal">ldapx</CODE> (see <ACLASS="xref"HREF="ch33_08.htm#SML2-CH-33-SECT-8-9"TITLE="">Section 33.8.9, ldapx</A>) in your configuration file.Its use is enabled by defining LDAPMAP at compile time:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">DBMDEF=LDAPMAP</PRE></BLOCKQUOTE></P></DIV></BLOCKQUOTE></DIV><DIVCLASS="refentry"><DIVCLASS="refnamediv"><H3CLASS="refname"><ACLASS="refname"NAME="SML2-CH-18-SECT-8-16">18.8.16 LOG</A></H3><PCLASS="refpurpose">Perform logging</P>(port, edit conf.h)</DIV><BLOCKQUOTE><DIVCLASS="refsect1"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-11347"></A><ACLASS="indexterm"NAME="AUTOID-11349"></A><ACLASS="indexterm"NAME="AUTOID-11352"></A>If defined, LOG enables <EMCLASS="emphasis">sendmail</EM> to use the <EMCLASS="emphasis">syslog</EM>(3)facility to log error messages and other useful information that is oftenimportant for security and debugging.Logging and <EMCLASS="emphasis">syslog</EM>(3) are described in<ACLASS="xref"HREF="ch26_01.htm"TITLE="Logging and Statistics">Chapter 26, <CITECLASS="chapter">Logging and Statistics</CITE></A>.Defining LOG should be considered mandatory, and it shouldbe turned off only if you have a well-thought-out reason for doing so.LOG cannot be turned off in the <EMCLASS="emphasis">Makefile</EM>. Instead, you mustedit <EMCLASS="emphasis">conf.h</EM> directly and undefine it by commenting it out:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen"><CODECLASS="userinput"><B>/*</B></CODE> # define LOG                 /* enable logging - don't turn off */<ICLASS="lineannotation"><IMGSRC="../chars/uarr.gif"ALT="-^"></I>comment out to remove support</PRE></BLOCKQUOTE></P><PCLASS="para">LOG requires that your system support <EMCLASS="emphasis">syslog</EM>(3).If you lack <EMCLASS="emphasis">syslog</EM>(3), consider porting it to your system.</P><PCLASS="para">Defining LOG is meaningless unless the <CODECLASS="literal">LogLevel</CODE>(<CODECLASS="literal">L</CODE>) option (see <ACLASS="xref"HREF="ch34_08.htm#SML2-CH-34-SECT-8-33"TITLE="">Section 34.8.33, LogLevel (L)</A>) is also nonzero.Fortunately, this is usually the case because the default is 9.</P><PCLASS="para">See also SYSLOG_BUFSIZE for a way to tune <EMCLASS="emphasis">syslog</EM>(3)'s buffer size if necessary.</P><PCLASS="para">If you are running a precompiled <EMCLASS="emphasis">sendmail</EM> binary, you may usethe <CODECLASS="literal">-d0.1</CODE> switch to determine whether LOG support was included(see <ACLASS="xref"HREF="ch37_05.htm#SML2-CH-37-SECT-5-1"TITLE="">Section 37.5.1</A>).</P></DIV></BLOCKQUOTE></DIV><DIVCLASS="refentry"><DIVCLASS="refnamediv"><H3CLASS="refname"><ACLASS="refname"NAME="SML2-CH-18-SECT-8-17">18.8.17 LOTUS-NOTES-HACK</A></H3><PCLASS="refpurpose">Strip newlines from From: header</P>(V8.7.2 through V8.7.5 only)</DIV><BLOCKQUOTE><DIVCLASS="refsect1"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-11385"></A>The <EMCLASS="emphasis">Lotus Notes</EM> mail-gateway SMTPsoftware can produce sender header lines that containnewlines when the username part becomes too long:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">From: Long Full Name/LongSite/Country  &lt;user@site.domain&gt;</PRE></BLOCKQUOTE></P><PCLASS="para">Although perfectly legal under RFC822, such split sender headerscan cause MUAs to fail in ways that are difficult to diagnose. If your sitereceives mail from <EMCLASS="emphasis">Lotus Notes</EM> gateways, you should defineLOTUS_NOTES_HACK when compiling <EMCLASS="emphasis">sendmail</EM>:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">ENVDEF= -DLOTUS_NOTES_HACK</PRE></BLOCKQUOTE></P><PCLASS="para">Defining LOTUS_NOTES_HACK causes <EMCLASS="emphasis">sendmail</EM> to include code insupport of the <CODECLASS="literal">SingleLineFromHeader</CODE> option (see <ACLASS="xref"HREF="ch34_08.htm#SML2-CH-34-SECT-8-63"TITLE="">Section 34.8.63, SingleLineFromHeader</A>).Setting that option to true causes the newlines in the above address tobe stripped and produces a single line:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">From: Long Full Name/LongSite/Country &lt;user@site.domain&gt;</PRE></BLOCKQUOTE></P><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-11402"></A>If you are running a precompiled <EMCLASS="emphasis">sendmail</EM> binary, you can define<CODECLASS="literal">SingleLineFromHeader</CODE> in your configuration file. If you don't geta warning about a bad option name, then you have this support.Note that under V8.8 <EMCLASS="emphasis">sendmail</EM>, LOTUS_NOTES_HACK isno longer required for <CODECLASS="literal">SingleLineFromHeader</CODE> support.</P></DIV></BLOCKQUOTE></DIV><DIVCLASS="refentry"><DIVCLASS="refnamediv"><H3CLASS="refname"><ACLASS="refname"NAME="SML2-CH-18-SECT-8-18">18.8.18 MATCHGECOS</A></H3><PCLASS="refpurpose">Support fuzzy name matching</P>(tune with ENVDEF= in Makefile)</DIV><BLOCKQUOTE><DIVCLASS="refsect1"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-11416"></A><ACLASS="indexterm"NAME="AUTOID-11418"></A>Defining MATCHGECOS causes code to be included inside <EMCLASS="emphasis">sendmail</EM>for support of limited <EMCLASS="emphasis">fuzzy</EM> name matching. This processis described under the <CODECLASS="literal">MatchGECOS</CODE> (<CODECLASS="literal">G</CODE>) option(see <ACLASS="xref"HREF="ch34_08.htm#SML2-CH-34-SECT-8-34"TITLE="">Section 34.8.34, MatchGECOS (G)</A>). MATCHGECOS is normally definedby default. If you want to turn it off, use ENVDEF= in <EMCLASS="emphasis">Makefile</EM>:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">ENVDEF= -DMATCHGECOS=0</PRE></BLOCKQUOTE></P><PCLASS="para">If you are running a vendor-supplied binary, you can check tosee whether MATCHGECOS was defined by using the<CODECLASS="literal">-d0.1</CODE> debugging switch (see <ACLASS="xref"HREF="ch37_05.htm#SML2-CH-37-SECT-5-1"TITLE="">Section 37.5.1</A>).</P></DIV></BLOCKQUOTE></DIV><DIVCLASS="refentry"><DIVCLASS="refnamediv"><H3CLASS="refname"><ACLASS="refname"NAME="SML2-CH-18-SECT-8-19">18.8.19 MAX...</A></H3><PCLASS="refpurpose">Redefine maximums</P>(port, edit specific files)</DIV><BLOCKQUOTE><DIVCLASS="refsect1"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-11439"></A><ACLASS="indexterm"NAME="AUTOID-11441"></A>In porting <EMCLASS="emphasis">sendmail</EM> to a new system or tuning<EMCLASS="emphasis">sendmail</EM> for special needs, it may be necessary toadjust one of its defined maximums. These cannot be tunedin <EMCLASS="emphasis">Makefile</EM>. Instead, each needs to be changed in thefile indicated by the third column of<ACLASS="xref"HREF="ch18_08.htm#SML2-CH-18-TAB-6"TITLE="MAX... #defines to Redefine Maximums">Table 18.7</A>.In general, maximums should never be lowered without firstexamining the code for possible side effects; also, review the code to see whether any minimums are required or whetherthere are warnings about maximums.&#13;</P><TABLECLASS="table"><CAPTIONCLASS="table"><ACLASS="title"NAME="SML2-CH-18-TAB-6">Table 18.7: MAX... #defines to Redefine Maximums</A></CAPTION><THEADCLASS="thead"><TRCLASS="row"VALIGN="TOP"><THCLASS="entry"ALIGN="LEFT"ROWSPAN="1"COLSPAN="1">#define</TH><THCLASS="entry"ALIGN="LEFT"ROWSPAN="1"COLSPAN="1">Default</TH><THCLASS="entry"ALIGN="LEFT"ROWSPAN="1"COLSPAN="1">File</TH><THCLASS="entry"ALIGN="LEFT"ROWSPAN="1"COLSPAN="1">Maximum</TH></TR></THEAD><TBODYCLASS="tbody"><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">MAXALIASDB</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">12</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><EMCLASS="emphasis">conf.h</EM></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Number of alias databases</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">MAXATOM</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">200</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><EMCLASS="emphasis">conf.h</EM></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Atoms (tokens) in an address</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">MAXDNSRCH</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">6</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><EMCLASS="emphasis">domain.c</EM></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Possible domains to search</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">MAXHOSTNAMELEN</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">256</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><EMCLASS="emphasis">conf.h</EM></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Length of a hostname</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">MAXKEY</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">128</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><EMCLASS="emphasis">conf.h</EM></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Length of a database key</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">MAXLINE</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">2048</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><EMCLASS="emphasis">conf.h</EM></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Length of an input line</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">MAXMAILERS</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">25</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><EMCLASS="emphasis">conf.h</EM></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Number of delivery agents</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">MAXMAPSTACK</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">12</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><EMCLASS="emphasis">conf.h</EM></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Size of sequenced map stack</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">MAXMIMEARGS</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">20</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><EMCLASS="emphasis">conf.h</EM></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Arguments per <CODECLASS="literal">Content-Type:</CODE> header</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">MAXMXHOSTS</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">100</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><EMCLASS="emphasis">conf.h</EM></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Number of per host MX records</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">MAXMIMENESTING</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">20</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><EMCLASS="emphasis">conf.h</EM></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Multipart MIME nesting depth</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">MAXNAME</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">256</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><EMCLASS="emphasis">conf.h</EM></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Length of a name</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">MAXPRIORITIES</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">25</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><EMCLASS="emphasis">conf.h</EM></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Number of Priority lines</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">MAXPV</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">40</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><EMCLASS="emphasis">conf.h</EM></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Arguments to a delivery agent</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">MAXRULERECURSION</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">50</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><EMCLASS="emphasis">conf.c</EM></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Ruleset recursion</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">MAXRWSETS</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">200</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><EMCLASS="emphasis">conf.h</EM></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Number of rule sets</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">MAXTOCLASS</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">8</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><EMCLASS="emphasis">conf.h</EM></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Message timeout classes</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">MAXUSERENVIRON</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">100</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><EMCLASS="emphasis">conf.h</EM></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Environment items per delivery agent</TD></TR></TBODY></TABLE><PCLASS="para">Also see QUEUESEGSIZE and SYSLOG_BUFSIZE for the discussionof two other definitions that affect sizes.</P><PCLASS="para">Note that there are no debugging switches to display compiled maximums.If you are running a binary distribution and  a maximum is of concern,you should get the source and build <EMCLASS="emphasis">sendmail</EM> yourself.</P></DIV></BLOCKQUOTE></DIV><DIVCLASS="refentry"><DIVCLASS="refnamediv"><H3CLASS="refname"><ACLASS="refname"NAME="SML2-CH-18-SECT-8-20">18.8.20 MEMCHUNKSIZE</A></H3><PCLASS="refpurpose">Specify memory allocation size</P>(tune, edit conf.h)</DIV><BLOCKQUOTE><DIVCLASS="refsect1"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-11578"></A><ACLASS="indexterm"NAME="AUTOID-11580"></A><ACLASS="indexterm"NAME="AUTOID-11582"></A>When <EMCLASS="emphasis">sendmail</EM> reads lines of text from the configurationfile or from <CODECLASS="literal">qf</CODE> queue files, it calls an internal routine named<EMCLASS="emphasis">fgetfolded</EM>(). That routine is initially passed a buffer ofsize MAXLINE into which to fit the read line. If the line is longerthan MAXLINE, the <EMCLASS="emphasis">sendmail</EM> program dynamically increases the spacerequired to hold the line by MEMCHUNKSIZE.</P><PCLASS="para">When collecting the headers of a mail message, <EMCLASS="emphasis">sendmail</EM> also beginswith a buffer sized to MAXLINE. If a header arrives that is larger thanMAXLINE characters, <EMCLASS="emphasis">sendmail</EM> will increase the size of itsbuffer by MEMCHUNKSIZE as many times as is necessary to fullycontain that header's data.</P><PCLASS="para">&#13;The default value assigned to MEMCHUNKSIZE is 1024 bytes. If you needto change that value (for example, to port to a new system's strange<EMCLASS="emphasis">malloc</EM>(3) requirements or for performance reasons), you must edit <EMCLASS="emphasis">conf.h</EM>:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen"># define MEMCHUNKSIZE   <CODECLASS="userinput"><B>1024</B></CODE>            /* chunk size for memory allocation */                        <ICLASS="lineannotation"><IMGSRC="../chars/uarr.gif"ALT="-^"></I>                     <ICLASS="lineannotation">change this</I></PRE></BLOCKQUOTE></P></DIV></BLOCKQUOTE></DIV><DIVCLASS="refentry"><DIVCLASS="refnamediv"><H3CLASS="refname"><ACLASS="refname"NAME="SML2-CH-18-SECT-8-21">18.8.21 MIME7TO8</A></H3><PCLASS="refpurpose">Support MIME 7- to 8-bit conversion</P>(tune with ENVDEF= in Makefile)</DIV><BLOCKQUOTE><DIVCLASS="refsect1"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-11607"></A><ACLASS="indexterm"NAME="AUTOID-11609"></A><ACLASS="indexterm"NAME="AUTOID-11611"></A><ACLASS="indexterm"NAME="AUTOID-11613"></A><ACLASS="indexterm"NAME="AUTOID-11616"></A><ACLASS="indexterm"NAME="AUTOID-11618"></A>V8.8 <EMCLASS="emphasis">sendmail</EM> contains the internal ability to convert messages that were converted into either <EMCLASS="emphasis">quoted-printable</EM>or <EMCLASS="emphasis">base64</EM> (see <ACLASS="xref"HREF="ch34_08.htm#SML2-CH-34-SECT-8-22"TITLE="">Section 34.8.22</A>) back into theiroriginal eight-bit form. The decision of whether or not to do thisconversion is based on the <CODECLASS="literal">F=9</CODE> delivery agent flag (see<ACLASS="xref"HREF="ch30_08.htm#SML2-CH-30-SECT-8-6"TITLE="">Section 30.8.6, F=9</A>).</P><PCLASS="para">Defining MIME7TO8 to a value of 1 causes supportfor conversion to be includedin <EMCLASS="emphasis">sendmail</EM>. It is defined as 1 by default. To disable the inclusionof conversion code, use ENVDEF= in <EMCLASS="emphasis">Makefile</EM> to defineit as 0:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">ENVDEF= -DMIME7TO8=<CODECLASS="userinput"><B>0</B></CODE>                   <ICLASS="lineannotation"><IMGSRC="../chars/uarr.gif"ALT="-^"></I>        <ICLASS="lineannotation">exclude support</I></PRE></BLOCKQUOTE></P><PCLASS="para">Unless you have a compelling reason to do otherwise, we recommend thatMIME7TO8 remain enabled.</P><PCLASS="para">If you are running a precompiled <EMCLASS="emphasis">sendmail</EM> binary, you may usethe <CODECLASS="literal">-d0.1</CODE> switch to determine whether MIME7TO8 support (see <ACLASS="xref"HREF="ch37_05.htm#SML2-CH-37-SECT-5-1"TITLE="">Section 37.5.1</A>) was included.</P></DIV></BLOCKQUOTE></DIV><DIVCLASS="refentry"><DIVCLASS="refnamediv"><H3CLASS="refname"><ACLASS="refname"NAME="SML2-CH-18-SECT-8-22">18.8.22 MIME8TO7</A></H3><PCLASS="refpurpose">Support MIME 8- to 7-bit conversion</P>(tune with ENVDEF= in Makefile)</DIV><BLOCKQUOTE><DIVCLASS="refsect1"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-11647"></A>V8 <EMCLASS="emphasis">sendmail</EM> contains the internal ability to convert 8-bitMIME message contents into 7-bit MIME so that mailcan be transported to non-8-bit gateways. The methods usedand the circumstances required to trigger conversion are describedunder the <CODECLASS="literal">EightBitMode</CODE> (<CODECLASS="literal">8</CODE>) option(see <ACLASS="xref"HREF="ch34_08.htm#SML2-CH-34-SECT-8-22"TITLE="">Section 34.8.22</A>). The conversion itself can be watched with the <CODECLASS="literal">-d43</CODE> debuggingswitch (see <ACLASS="xref"HREF="ch37_05.htm#SML2-CH-37-SECT-5-150"TITLE="">Section 37.5.150, -d43.1</A>).</P><PCLASS="para">Defining MIME8TO7 to a value of 1 causes supportfor conversion to be includedin <EMCLASS="emphasis">sendmail</EM>. It is defined as 1 by default. To disable the inclusionof conversion code, use ENVDEF= in <EMCLASS="emphasis">Makefile</EM> to defineit as 0:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">ENVDEF= -DMIME8TO7=<CODECLASS="userinput"><B>0</B></CODE>                   <ICLASS="lineannotation"><IMGSRC="../chars/uarr.gif"ALT="-^"></I>        <ICLASS="lineannotation">exclude support</I></PRE></BLOCKQUOTE></P><PCLASS="para">&#13;One side effect of excluding MIME8TO7 support is that definingit to 0 causes all MIME support to also be excluded. Unless you have a compelling reason to do otherwise, we recommend thatMIME8TO7 remain enabled.</P><PCLASS="para">If you are running a precompiled <EMCLASS="emphasis">sendmail</EM> binary, you may usethe <CODECLASS="literal">-d0.1</CODE> switch to determine whether MIME8TO7 support (see <ACLASS="xref"HREF="ch37_05.htm#SML2-CH-37-SECT-5-1"TITLE="">Section 37.5.1</A>) was included.</P></DIV></BLOCKQUOTE></DIV><DIVCLASS="refentry"><DIVCLASS="refnamediv"><H3CLASS="refname"><ACLASS="refname"NAME="SML2-CH-18-SECT-8-23">18.8.23 NAMED-BIND</A></H3><PCLASS="refpurpose">Support DNS name resolution</P>(tune with ENVDEF= in Makefile)</DIV><BLOCKQUOTE><DIVCLASS="refsect1"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-11676"></A><ACLASS="indexterm"NAME="AUTOID-11678"></A>The <EMCLASS="emphasis">sendmail</EM> program automatically takes advantageof DNS lookups or MX records to resolveaddresses and canonical hostnames.If your site is a UUCP-only site (or is otherwise not connected tothe Internet) and does not run <EMCLASS="emphasis">named</EM>(8)locally, you should probably disable NAMED_BIND:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">ENVDEF= -DNAMED_BIND=<CODECLASS="userinput"><B>0</B></CODE>                     <ICLASS="lineannotation"><IMGSRC="../chars/uarr.gif"ALT="-^"></I>             <ICLASS="lineannotation">disable DNS lookups</I></PRE></BLOCKQUOTE></P><PCLASS="para">If you are not currentlyrunning <EMCLASS="emphasis">named</EM>(8) but plan to connect to the Internet, you shoulddefine NAMED_BIND but set the <CODECLASS="literal">ResolverOptions</CODE>(<CODECLASS="literal">I</CODE>) (see <ACLASS="xref"HREF="ch34_08.htm#SML2-CH-34-SECT-8-55"TITLE="">Section 34.8.55, ResolverOptions (I)</A>)to false in the configurationfile. Later, when you connect to the Internet, you can then simplychange it to true.(See also the service-switch file, <ACLASS="xref"HREF="ch34_08.htm#SML2-CH-34-SECT-8-61"TITLE="">Section 34.8.61</A>,for an another way to achieve the same effect.)</P><PCLASS="para">If you are running a precompiled <EMCLASS="emphasis">sendmail</EM> binary, you may usethe <CODECLASS="literal">-d0.1</CODE> switch to determine whether NAMED_BIND support was included(see <ACLASS="xref"HREF="ch37_05.htm#SML2-CH-37-SECT-5-1"TITLE="">Section 37.5.1</A>).</P></DIV></BLOCKQUOTE></DIV><DIVCLASS="refentry"><DIVCLASS="refnamediv"><H3CLASS="refname"><ACLASS="refname"NAME="SML2-CH-18-SECT-8-24">18.8.24 NDBM</A></H3><PCLASS="refpurpose">Support Unix ndbm(3) Databases</P>(tune with DBMDEF= in Makefile)</DIV><BLOCKQUOTE><DIVCLASS="refsect1"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-11705"></A>The <EMCLASS="emphasis">ndbm</EM>(3) form of databaseuses two files (<EMCLASS="emphasis">.pag</EM> and <EMCLASS="emphasis">.dir</EM>) for each database.Databases cannot be shared by different architectures across a network.If you intend to support aliasing in an efficient manner, youshould at least define this NDBM (or NEWDB described below)in your <EMCLASS="emphasis">Makefile</EM>.</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">DBMDEF= -DNDBM</PRE></BLOCKQUOTE></P><PCLASS="para">The <EMCLASS="emphasis">ndbm</EM>(3) routines are used primarily to look up aliases.They can also be used to declare <EMCLASS="emphasis">dbm</EM> class maps(see <ACLASS="xref"HREF="ch33_03.htm#SML2-CH-33-SECT-3-2"TITLE="The class">Section 33.3.2</A>) with the <CODECLASS="literal">K</CODE>configuration command.</P><PCLASS="para">Library routines to support <EMCLASS="emphasis">ndbm</EM>(3) are available with mostmodern versions of UNIX. You may have to specify library supportwith a <CODECLASS="literal">-lndbm</CODE> in the LIBS= line of your <EMCLASS="emphasis">Makefile</EM>.If you are running a precompiled <EMCLASS="emphasis">sendmail</EM> binary, you may usethe <CODECLASS="literal">-d0.1</CODE> switch to determine whether <EMCLASS="emphasis">ndbm</EM>(3) support was included(see <ACLASS="xref"HREF="ch37_05.htm#SML2-CH-37-SECT-5-1"TITLE="">Section 37.5.1</A>).</P></DIV></BLOCKQUOTE></DIV><DIVCLASS="refentry"><DIVCLASS="refnamediv"><H3CLASS="refname"><ACLASS="refname"NAME="SML2-CH-18-SECT-8-25">18.8.25 NEED...</A></H3><PCLASS="refpurpose">Something amiss with your OS?</P>(port, edit conf.h)</DIV><BLOCKQUOTE><DIVCLASS="refsect1"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-11734"></A>The <EMCLASS="emphasis">sendmail</EM> program requires certain C language library routinesto exist. If any is missing from your library, defineone of the needs listed in <ACLASS="xref"HREF="ch18_08.htm#SML2-CH-18-TAB-7"TITLE="Define Replacements for Missing C Library Routines">Table 18.8</A>and <EMCLASS="emphasis">sendmail</EM> will try to emulate it.</P><PCLASS="para">Each is defined with ENVDEF= in <EMCLASS="emphasis">Makefile</EM> by setting itto a value of 1 (NEEDPUTENV is an exception in that 1 or 2can be used).</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">ENVDEF= -DNEEDFSYNC=1</PRE></BLOCKQUOTE></P><PCLASS="para">When porting to anew system, you can test with this ENVDEF= statement and, if successful,put a permanent porting entry into <EMCLASS="emphasis">conf.h</EM>.Note that these are correctly defined for all currently supported systems.You should need to redefine them only if you are porting <EMCLASS="emphasis">sendmail</EM>to a completely new system.</P><TABLECLASS="table"><CAPTIONCLASS="table"><ACLASS="title"NAME="SML2-CH-18-TAB-7">Table 18.8: Define Replacements for Missing C Library Routines</A></CAPTION><THEADCLASS="thead"><TRCLASS="row"VALIGN="TOP"><THCLASS="entry"ALIGN="LEFT"ROWSPAN="1"COLSPAN="1">#define</TH><THCLASS="entry"ALIGN="LEFT"ROWSPAN="1"COLSPAN="1">Emulates</TH></TR></THEAD><TBODYCLASS="tbody"><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">NEEDFSYNC</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Replaces a missing <EMCLASS="emphasis">fsync</EM>(2).  The <EMCLASS="emphasis">sendmail</EM> program will try to simulate it by using <EMCLASS="emphasis">fcntl</EM>(2), if available; otherwise, <EMCLASS="emphasis">sendmail</EM> will not &quot;sync&quot; to disk. This latter circumstance is undesirable and may result in unreliable mail delivery, but it works.</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">NEEDGETOPT</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">The <EMCLASS="emphasis">sendmail</EM> program calls <EMCLASS="emphasis">getopt</EM>(3) twice when parsing its command-line arguments. Some version of <EMCLASS="emphasis">getopt</EM>(3) do odd things when called twice. If yours is one of these, replace it.</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">NEEDPUTENV</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><PCLASS="para">Replace a missing <EMCLASS="emphasis">putenv</EM>(3). If this is defined as 1, <EMCLASS="emphasis">sendmail</EM>emulates by using <EMCLASS="emphasis">setenv</EM>(3). If this is defined as 2, <EMCLASS="emphasis">sendmail</EM>emulates by directly modifying the environmental section of memory.</P></TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">NEEDSTRSTR</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Replace a missing <EMCLASS="emphasis">strstr</EM>(3) with a well-written internalversion.</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">NEEDSTRTOL</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Replace a missing <EMCLASS="emphasis">strtol</EM>(3) with a well-written internalversion.</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">NEEDVPRINTF</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Replace a missing <EMCLASS="emphasis">vprintf</EM>(3). Note that the emulation supplied is not very elegant. It may not even work on some systems. See <EMCLASS="emphasis">conf.h</EM> for a glimpse of systems that require this.</TD></TR></TBODY></TABLE><PCLASS="para">If you are running a precompiled <EMCLASS="emphasis">sendmail</EM> binary, there isno way to discover whether any of these were defined when it was built.</P></DIV></BLOCKQUOTE></DIV><DIVCLASS="refentry"><DIVCLASS="refnamediv"><H3CLASS="refname"><ACLASS="refname"NAME="SML2-CH-18-SECT-8-26">18.8.26 NET...</A></H3><PCLASS="refpurpose">Define Network Support</P>(tune with ENVDEF= in Makefile)</DIV><BLOCKQUOTE><DIVCLASS="refsect1"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-11798"></A><ACLASS="indexterm"NAME="AUTOID-11800"></A>V8 <EMCLASS="emphasis">sendmail</EM> is designed to support fourkinds of networks, as listed in<ACLASS="xref"HREF="ch18_08.htm#SML2-CH-18-TAB-8"TITLE="Define for Network Support">Table 18.9</A>.Currently, only NETINET and NETISO are supported. </P><TABLECLASS="table"><CAPTIONCLASS="table"><ACLASS="title"NAME="SML2-CH-18-TAB-8">Table 18.9: Define for Network Support</A></CAPTION><THEADCLASS="thead"><TRCLASS="row"VALIGN="TOP"><THCLASS="entry"ALIGN="LEFT"ROWSPAN="1"COLSPAN="1">Define</TH><THCLASS="entry"ALIGN="LEFT"ROWSPAN="1"COLSPAN="1">Description</TH></TR></THEAD><TBODYCLASS="tbody"><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">NETINET</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">A TCP/IP-based network</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">NETISO</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">An ISO 8022 network</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">NETNS</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">A Xerox NS protocol network (tentative)</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">NETX25</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">A CCITT\*[=a] X.25 network (tentative)</TD></TR></TBODY></TABLE><PCLASS="para">&#13;International Telephone and Telegraph Consultative Committee.&#13;</P><PCLASS="para">Stubs are includedin the source code for any programmer who is interested in implementing NETNSor NETX25. NETINET is defined by default. If you don't want it,you need to turn it off in your <EMCLASS="emphasis">Makefile</EM>:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">ENVDEF= -DNETINET=0</PRE></BLOCKQUOTE></P><PCLASS="para">NETISO is undefined by default. If you want to include ISO support,you need to specifically define it in your <EMCLASS="emphasis">Makefile</EM>:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">ENVDEF= -DNETISO=1</PRE></BLOCKQUOTE></P><PCLASS="para">Defining NETINET or NETISO has the side effect of causingSMTP and QUEUE also to be automatically defined.</P><PCLASS="para">Defining network support only causes the code for that networkto be included in <EMCLASS="emphasis">sendmail</EM>. The network serviced by aparticular invocation of <EMCLASS="emphasis">sendmail</EM> is selected with the<CODECLASS="literal">Family</CODE> parameter of the <CODECLASS="literal">DaemonPortOptions</CODE> (<CODECLASS="literal">O</CODE>) option (see <ACLASS="xref"HREF="ch34_08.htm#SML2-CH-34-SECT-8-13"TITLE="">Section 34.8.13, DaemonPortOptions (O)</A>).In the absence of an option declaration,<EMCLASS="emphasis">inet</EM> (for NETINET) is used as the default.</P><PCLASS="para">If you are running a precompiled version of <EMCLASS="emphasis">sendmail</EM>, you candetermine which network types are supported by using the <CODECLASS="literal">-d0.1</CODE>debugging switch (see <ACLASS="xref"HREF="ch37_05.htm#SML2-CH-37-SECT-5-1"TITLE="">Section 37.5.1</A>).</P></DIV></BLOCKQUOTE></DIV><DIVCLASS="refentry"><DIVCLASS="refnamediv"><H3CLASS="refname"><ACLASS="refname"NAME="SML2-CH-18-SECT-8-27">18.8.27 NETINFO</A></H3><PCLASS="refpurpose">Support NeXT netinfo(3) databases</P>(tune with DBMDEF= in Makefile)</DIV><BLOCKQUOTE><DIVCLASS="refsect1"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-11854"></A>The <EMCLASS="emphasis">netinfo</EM>(3) form of database is supplied with theNeXT and NeXTSTeP operating systems. It is a networkinformation service that provides file contents such as <EMCLASS="emphasis">aliases</EM> and <EMCLASS="emphasis">passwd</EM>, and locations such as thelocation of the <EMCLASS="emphasis">sendmail.cf</EM> file.If you are running on a NeXT or under NeXTSTeP, thisNETINFO will automatically be defined in your <EMCLASS="emphasis">Makefile</EM>:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">DBMDEF= -DNETINFO</PRE></BLOCKQUOTE></P><PCLASS="para">The <EMCLASS="emphasis">netinfo</EM>(3) databases can also be used to declare <EMCLASS="emphasis">netinfo</EM> class maps(see <ACLASS="xref"HREF="ch33_03.htm#SML2-CH-33-SECT-3-2"TITLE="The class">Section 33.3.2</A>) with the <CODECLASS="literal">K</CODE>configuration command.If you are running a precompiled <EMCLASS="emphasis">sendmail</EM> binary, you may usethe <CODECLASS="literal">-d0.1</CODE> switch to determine whether NETINFO support was included(see <ACLASS="xref"HREF="ch37_05.htm#SML2-CH-37-SECT-5-1"TITLE="">Section 37.5.1</A>).</P></DIV></BLOCKQUOTE></DIV><DIVCLASS="refentry"><DIVCLASS="refnamediv"><H3CLASS="refname"><ACLASS="refname"NAME="SML2-CH-18-SECT-8-28">18.8.28 NEWDB</A></H3><PCLASS="refpurpose">Support Berkeley db(3) Databases</P>(tune with DBMDEF= in Makefile)</DIV><BLOCKQUOTE><DIVCLASS="refsect1"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-11879"></A><ACLASS="indexterm"NAME="AUTOID-11881"></A>The <EMCLASS="emphasis">db</EM>(3) form of database uses a singlefile and can be shared by different architectures.If you intend to support aliasing in an efficient manner, youshould at least define this NEWDB (or the NDBM described above)in your <EMCLASS="emphasis">Makefile</EM>.The <EMCLASS="emphasis">db</EM>(3) routines are used to look up aliases andare the routines used by the User Database (see <ACLASS="xref"HREF="ch33_05.htm"TITLE="The User Database">Section 33.5, "The User Database"</A>).They can also be used to declare <EMCLASS="emphasis">hash</EM> and <EMCLASS="emphasis">btree</EM> class maps(see <ACLASS="xref"HREF="ch33_03.htm#SML2-CH-33-SECT-3-2"TITLE="The class">Section 33.3.2</A>) with the <CODECLASS="literal">K</CODE>configuration command.</P><PCLASS="para">The <EMCLASS="emphasis">db</EM>(3) libraries have overcome many of the limitationsof the earlier <EMCLASS="emphasis">ndbm</EM>(3) libraries. If possible, you shouldget and install the <EMCLASS="emphasis">db</EM>(3) libraries before you build<EMCLASS="emphasis">sendmail</EM>. The <EMCLASS="emphasis">db</EM>(3) source is available from</P><PCLASS="para"><BLOCKQUOTECLASS="literallayout"><PCLASS="literallayout"><ACLASS="systemitem.url"HREF="ftp://ftp.cs.berkeley.edu/ucb/4bsd/db.tar.Z">ftp://ftp.cs.berkeley.edu/ucb/4bsd/db.tar.Z</A></P></BLOCKQUOTE></P><PCLASS="para">Do not use the Net2 distribution. (See OLD_NEWDB below if youalready have that distribution and can't easily get rid of it.)The <EMCLASS="emphasis">src/READ_ME</EM> file contains <EMCLASS="emphasis">critical</EM>information[14]about installing <EMCLASS="emphasis">db</EM>(3).</P><BLOCKQUOTECLASS="footnote"><PCLASS="para">[14] Such as why you must remove <EMCLASS="emphasis">ndbm.h</EM> and <EMCLASS="emphasis">ndbm.o</EM> from <EMCLASS="emphasis">libdb.a</EM>before installing it for use by <EMCLASS="emphasis">sendmail</EM>.</P></BLOCKQUOTE><PCLASS="para">If you are running a precompiled <EMCLASS="emphasis">sendmail</EM> binary, you may usethe <CODECLASS="literal">-d0.1</CODE> switch (see <ACLASS="xref"HREF="ch37_05.htm#SML2-CH-37-SECT-5-1"TITLE="">Section 37.5.1</A>)to determine whether <EMCLASS="emphasis">db</EM>(3) support was included in it.</P></DIV></BLOCKQUOTE></DIV><DIVCLASS="refentry"><DIVCLASS="refnamediv"><H3CLASS="refname"><ACLASS="refname"NAME="SML2-CH-18-SECT-8-29">18.8.29 NIS</A></H3><PCLASS="refpurpose">Support for NIS</P>(tune with DBMDEF= in Makefile)</DIV><BLOCKQUOTE><DIVCLASS="refsect1"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-11923"></A>If you intend to have <EMCLASS="emphasis">sendmail</EM> support <EMCLASS="emphasis">nis</EM>(formerly Yellow Pages) maps, you need to define NIS as part of yourDBMDEF= line in <EMCLASS="emphasis">Makefile</EM>:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">DBMDEF= -DNIS</PRE></BLOCKQUOTE></P><PCLASS="para">If NIS is defined, the <CODECLASS="literal">AliasFile</CODE> (<CODECLASS="literal">A</CODE>) option can be specified as</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">OAnis:mail.aliases                <ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> V8.6</I>O AliasFile=nis:mail.aliases      <ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> V8.7 and above (if no service-switch file)</I></PRE></BLOCKQUOTE></P><PCLASS="para">See <ACLASS="xref"HREF="ch34_08.htm#SML2-CH-34-SECT-8-1"TITLE="">Section 34.8.1, AliasFile (A)</A> for more details about the <CODECLASS="literal">AliasFile</CODE>(<CODECLASS="literal">A</CODE>) option.See <ACLASS="xref"HREF="ch34_08.htm#SML2-CH-34-SECT-8-61"TITLE="">Section 34.8.61</A> for a description of the <CODECLASS="literal">ServiceSwitchFile</CODE>option and its effect on <EMCLASS="emphasis">nis</EM> aliases. Be aware that the above <CODECLASS="literal">AliasFile</CODE>(<CODECLASS="literal">A</CODE>) option declaration will override the lack of an <EMCLASS="emphasis">nis</EM> entryin the service-switch file.</P><PCLASS="para">&#13;NDBM also needs to be defined to allow <EMCLASS="emphasis">sendmail</EM> to rebuildits alias files for use by <EMCLASS="emphasis">nis</EM>:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">DBMDEF= -DNIS -DNDBM</PRE></BLOCKQUOTE></P><PCLASS="para">For this to work, thepath of the alias file needs to contain the substring &quot;/yp/&quot;.A typical <EMCLASS="emphasis">/var/yp/Makefile</EM> will contain a line like this:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">/usr/lib/sendmail -bi -oA$(YPDBDIR)/$(DOM)/mail.aliases</PRE></BLOCKQUOTE></P><PCLASS="para">Here, $(YPDBDIR)/ is usually <EMCLASS="emphasis">/var/yp/</EM>, so the substring isfound. When &quot;/yp/&quot; is found,<EMCLASS="emphasis">sendmail</EM> augments the <EMCLASS="emphasis">aliases</EM> database withtwo special entries that are needed by <EMCLASS="emphasis">nis</EM>:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">YP_LAST_MODIFIEDYP_MASTER_NAME</PRE></BLOCKQUOTE></P><PCLASS="para">These allow the newly built <EMCLASS="emphasis">aliases</EM> file to successfullybe distributed for use by <EMCLASS="emphasis">nis</EM> clients. Without these entriesyou will see an error like that shown below when pushing your<EMCLASS="emphasis">nis</EM> maps:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">Status received from ypxfr on <CODECLASS="replaceable"><I>nisslave</I></CODE>:        Failed - no local order number in map - use -f flag to ypxfr.</PRE></BLOCKQUOTE></P><PCLASS="para">The solution here is to rebuild <EMCLASS="emphasis">sendmail</EM> with bothNDBM and NIS defined.</P><PCLASS="para">Defining NIS also causes support tobe included for declaring and using <EMCLASS="emphasis">nis</EM>class maps (see <ACLASS="xref"HREF="ch33_03.htm#SML2-CH-33-SECT-3-2"TITLE="The class">Section 33.3.2</A>) with the <CODECLASS="literal">K</CODE>configuration command.</P><PCLASS="para">Note that defining NIS without also defining NAMED_BINDwill cause delivery to MX records to mysteriously fail.</P><PCLASS="para">If you are running a precompiled <EMCLASS="emphasis">sendmail</EM> binary, you may usethe <CODECLASS="literal">-d0.1</CODE> switch to determine whether NIS support was included(see <ACLASS="xref"HREF="ch37_05.htm#SML2-CH-37-SECT-5-1"TITLE="">Section 37.5.1</A>).</P></DIV></BLOCKQUOTE></DIV><DIVCLASS="refentry"><DIVCLASS="refnamediv"><H3CLASS="refname"><ACLASS="refname"NAME="SML2-CH-18-SECT-8-30">18.8.30 NISPLUS</A></H3><PCLASS="refpurpose">Support for NIS+</P>(tune with DBMDEF= in Makefile)</DIV><BLOCKQUOTE><DIVCLASS="refsect1"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-11989"></A>If you intend to have <EMCLASS="emphasis">sendmail</EM> support <EMCLASS="emphasis">nisplus</EM>maps, you need to define NISPLUS as part of yourDBMDEF= line in <EMCLASS="emphasis">Makefile</EM>.(The use of <EMCLASS="emphasis">nisplus</EM> aliases and other maps is determined by the<EMCLASS="emphasis">/etc/nsswitch.conf</EM> file.)</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">DBMDEF= -DNISPLUS</PRE></BLOCKQUOTE></P><PCLASS="para">If NISPLUS is defined, the <CODECLASS="literal">AliasFile</CODE> (<CODECLASS="literal">A</CODE>) option can be used to override the setting of the <EMCLASS="emphasis">/etc/nsswitch.conf</EM> file:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">O AliasFile=nisplus:mail.aliases      <ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> V8.7 and above</I></PRE></BLOCKQUOTE></P><PCLASS="para">Here, <CODECLASS="literal">nisplus</CODE> aliases will be used even if the <EMCLASS="emphasis">/etc/nsswitch.conf</EM> fileexcludes them.</P><PCLASS="para">See <ACLASS="xref"HREF="ch34_08.htm#SML2-CH-34-SECT-8-1"TITLE="">Section 34.8.1</A> for details about the <CODECLASS="literal">AliasFile</CODE>(<CODECLASS="literal">A</CODE>) option. Note that NISPLUS is new to V8.7 and not supported underearlier versions of <EMCLASS="emphasis">sendmail</EM>.</P><PCLASS="para">With NISPLUS defined,support is also included to declare and use <EMCLASS="emphasis">nisplus</EM>class maps (see <ACLASS="xref"HREF="ch33_03.htm#SML2-CH-33-SECT-3-2"TITLE="The class">Section 33.3.2</A>) with the <CODECLASS="literal">K</CODE>configuration command.</P><PCLASS="para">If you are running a precompiled <EMCLASS="emphasis">sendmail</EM> binary, you may usethe <CODECLASS="literal">-d0.1</CODE> switch to determine whether NISPLUS support was included(see <ACLASS="xref"HREF="ch37_05.htm#SML2-CH-37-SECT-5-1"TITLE="">Section 37.5.1</A>).</P></DIV></BLOCKQUOTE></DIV><DIVCLASS="refentry"><DIVCLASS="refnamediv"><H3CLASS="refname"><ACLASS="refname"NAME="SML2-CH-18-SECT-8-31">18.8.31 NO-GROUP-SET</A></H3><PCLASS="refpurpose">Prevent multi-group file access</P>(port, edit conf.h)</DIV><BLOCKQUOTE><DIVCLASS="refsect1"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-12029"></A><ACLASS="indexterm"NAME="AUTOID-12031"></A><ACLASS="indexterm"NAME="AUTOID-12034"></A><ACLASS="indexterm"NAME="AUTOID-12036"></A>When checking files and directories for group read and write permissions,<EMCLASS="emphasis">sendmail</EM> checks the group of the controlling user. On systemsthat allow a user to belong to one group at a time, failure stopshere; on systems that allow users to belong to many groups at once,failure causes <EMCLASS="emphasis">sendmail</EM> to check any other groups to whichthe controlling user may belong. It finds the list of groups bycalling <EMCLASS="emphasis">getgrgid</EM>(3).</P><PCLASS="para">If your system lacks the <EMCLASS="emphasis">getgrgid</EM>(3) call or doesn't need it,you should exclude this code by definingNO_GROUP_SET in <EMCLASS="emphasis">conf.h</EM>.NO_GROUP_SET causes the code containing the call to <EMCLASS="emphasis">getgrgid</EM>(3) to be excluded from <EMCLASS="emphasis">sendmail</EM>. Be aware that excluding <EMCLASS="emphasis">getgrgid</EM>(3) support on systems that needit can cause delivery to files to fail in mysterious ways.</P><PCLASS="para">If you are running a precompiled version of <EMCLASS="emphasis">sendmail</EM>,be aware that there is no debugging switch that can tell you what the settingof NO_GROUP_SET was set to at compile time.</P><PCLASS="para">Note that NO_GROUP_SET affects only inclusion of the <EMCLASS="emphasis">getgrgid</EM>(3)system call. See the <CODECLASS="literal">DontInitGroups</CODE> option (see <ACLASS="xref"HREF="ch34_08.htm#SML2-CH-34-SECT-8-19"TITLE="">Section 34.8.19, DontInitGroups</A>)for a means to exclude the <EMCLASS="emphasis">getgrgid</EM>(3) and <EMCLASS="emphasis">initgroups</EM>(3) system calls.</P></DIV></BLOCKQUOTE></DIV><DIVCLASS="refentry"><DIVCLASS="refnamediv"><H3CLASS="refname"><ACLASS="refname"NAME="SML2-CH-18-SECT-8-32">18.8.32 NOTUNIX</A></H3><PCLASS="refpurpose">Exclude From line support</P>(port, edit conf.h)</DIV><BLOCKQUOTE><DIVCLASS="refsect1"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-12064"></A><ACLASS="indexterm"NAME="AUTOID-12066"></A>Under UNIX a file of many mail messages normally hasone message separated from another by a blank line and thena line that begins with the five characters &quot;<CODECLASS="literal">From&nbsp;</CODE>&quot;(four letters and a space). On such systems, <EMCLASS="emphasis">sendmail</EM>saves important information from such lines for later use.</P><PCLASS="para">On non-UNIX machines (VMS or MS-DOS) the conventions aredifferent, so you won't want <EMCLASS="emphasis">sendmail</EM> to treat suchlines as special. Similarly, if your UNIX site has convertedentirely away from this convention (with <EMCLASS="emphasis">mhs</EM> or the like),you might not want this special treatment.</P><PCLASS="para">To disable special treatment of &quot;<CODECLASS="literal">From&nbsp;</CODE>&quot; lines, definethe NOTUNIX macro in your <EMCLASS="emphasis">Makefile</EM>:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">ENVDEF= -DNOTUNIX</PRE></BLOCKQUOTE></P><PCLASS="para">When porting to anew system, you can test with this ENVDEF= statement and, if successful,put a permanent porting entry into <EMCLASS="emphasis">conf.h</EM>.Defining NOTUNIX causes the code for <EMCLASS="emphasis">eatfrom</EM>() tobe excluded from <EMCLASS="emphasis">sendmail</EM>. The <CODECLASS="literal">-d30.2</CODE> debuggingswitch (see <ACLASS="xref"HREF="ch37_05.htm#SML2-CH-37-SECT-5-109"TITLE="">Section 37.5.109, -d30.2</A>)can be used to watch <EMCLASS="emphasis">eatfrom</EM>() and to determinewhether NOTUNIX was declared when compiling <EMCLASS="emphasis">sendmail</EM>.</P></DIV></BLOCKQUOTE></DIV><DIVCLASS="refentry"><DIVCLASS="refnamediv"><H3CLASS="refname"><ACLASS="refname"NAME="SML2-CH-18-SECT-8-33">18.8.33 OLD-NEWDB</A></H3><PCLASS="refpurpose">Support the old form of db(3)</P>(port with DBMDEF= in Makefile)</DIV><BLOCKQUOTE><DIVCLASS="refsect1"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-12094"></A>BSDI(BSD/386) 1.0, NetBSD 0.9, and FreeBSD 1.0 were distributedwith an old version of the <EMCLASS="emphasis">db</EM>(3) library. These systemswill not use the file locking of the latest version. For suchsystems you must define</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">DBMDEF= -DNEWDB -DOLD_NEWDB=<CODECLASS="userinput"><B>1</B></CODE>                            <ICLASS="lineannotation"><IMGSRC="../chars/uarr.gif"ALT="-^"></I>                <ICLASS="lineannotation">don't support new file locking</I></PRE></BLOCKQUOTE></P><PCLASS="para">Although you can get and install the latest version of <EMCLASS="emphasis">db</EM>(3),you should not do so unless you can rebuild your entire UNIXsystem. The old form of database is used throughout, and justbuilding <EMCLASS="emphasis">sendmail</EM> with the new form will cause password lookupsand the like to fail.</P><PCLASS="para">In general, you should never have to declare OLD_NEWDB (instead,we recommend upgrading your operating system). OLD_NEWDB isautomatically included in the <EMCLASS="emphasis">Makefile</EM> for the systems that need it.</P></DIV></BLOCKQUOTE></DIV><DIVCLASS="refentry"><DIVCLASS="refnamediv"><H3CLASS="refname"><ACLASS="refname"NAME="SML2-CH-18-SECT-8-34">18.8.34 PATH...</A></H3><PCLASS="refpurpose">Hardcode paths inside sendmail</P>(debug with ENVDEF= in Makefile)</DIV><BLOCKQUOTE><DIVCLASS="refsect1"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-12115"></A>Only a few pathnames are hard-coded into <EMCLASS="emphasis">sendmail</EM>. The most obviousis its configuration file, because that file lists the locations of nearlyall other files. For various reasons a few other file locations arealso hard-coded. Here, we describe those that you can change.Note that the general form for all such changes uses the ENVDEF=declaration of your <EMCLASS="emphasis">Makefile</EM>:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">ENVDEF= -D_PATH...=\&quot;/new/path/filename\&quot;</PRE></BLOCKQUOTE></P><PCLASS="para">The new path must be surrounded by backslashed quotation marks so thatthe compiler will correctly interpret it as a string.<EMCLASS="emphasis">/etc/sendmail.cf</EM> <ACLASS="indexterm"NAME="AUTOID-12123"></A>The <EMCLASS="emphasis">sendmail.cf</EM> file is pivotal to all of the <EMCLASS="emphasis">sendmail</EM> program's operations (see <ACLASS="xref"HREF="ch27_01.htm"TITLE="The Configuration File">Chapter 27, <CITECLASS="chapter">The Configuration File</CITE></A>).V8.7 <EMCLASS="emphasis">sendmail</EM> recommends that it always be called <EMCLASS="emphasis">sendmail.cf</EM>and always be located in the <EMCLASS="emphasis">/etc</EM> directory. For testing, debugging,or other legitimate reasons you may prefer to locate that file elsewhere (at least temporarily). You do that with the _PATH_SENDMAILCF definition:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">ENVDEF= -D_PATH_SENDMAILCF=\&quot;/src/tests/test.cf\&quot;</PRE></BLOCKQUOTE></P><PCLASS="para"><EMCLASS="emphasis">/etc/sendmail.pid</EM> <ACLASS="indexterm"NAME="AUTOID-12136"></A>The <EMCLASS="emphasis">sendmail.pid</EM> file contains two lines of information.The first line is text representation of the <EMCLASS="emphasis">pid</EM> of thecurrent running daemon. The second is a copy of the command linethat was originally used to start <EMCLASS="emphasis">sendmail</EM>. This file is handyfor killing and restarting the daemon(see <ACLASS="xref"HREF="ch04_01.htm#SML2-CH-4-SECT-1-1"TITLE="Daemon Mode (-bd)">Section 4.1.1, "Daemon Mode (-bd)"</A>).If BSD4_4 is defined, the default becomes <EMCLASS="emphasis">/var/run/sendmail.pid</EM>;otherwise, the default is <EMCLASS="emphasis">/etc/sendmail.pid</EM>. You can change thisdefault (and you must if you intend to run a test daemon inparallel to the original), with the ENVDEF= of your <EMCLASS="emphasis">Makefile</EM>:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">ENVDEF= -D_PATH_SENDMAILPID=\&quot;/src/tests/test.pid\&quot;</PRE></BLOCKQUOTE></P><PCLASS="para">Ordinarily, two daemons cannot run simultaneously on a single host.If you need to run a second daemon, you must change the port that itlistens to with the<CODECLASS="literal">Port</CODE> parameter of the <CODECLASS="literal">DaemonPortOptions</CODE> (<CODECLASS="literal">O</CODE>) option  (see <ACLASS="xref"HREF="ch34_08.htm#SML2-CH-34-SECT-8-13"TITLE="">Section 34.8.13</A>).<EMCLASS="emphasis">/etc/hosts</EM> <ACLASS="indexterm"NAME="AUTOID-12153"></A>Ordinarily, <EMCLASS="emphasis">sendmail</EM> will first look for a service-switch(see <ACLASS="xref"HREF="ch34_08.htm#SML2-CH-34-SECT-8-61"TITLE="">Section 34.8.61</A>)to see how it should look up the canonical names of hosts.If it finds one and ifthe service <EMCLASS="emphasis">hosts</EM> is listed, it uses the techniques listedwith the service-switchto look up its hosts. When a technique is <EMCLASS="emphasis">files</EM>, <EMCLASS="emphasis">sendmail</EM> reads the filenamed by _PATH_HOSTS to get its canonical information.Ordinarily, that file is called <EMCLASS="emphasis">/etc/hosts</EM>. If that fileis different or has been customized on your system, you can redefinethe location like this:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">ENVDEF= -D_PATH_HOSTS=\&quot;/etc/privatehosts\&quot;</PRE></BLOCKQUOTE></P><PCLASS="para">In general, most other techniques are preferred over the linearparse of a hosts file. However, this file is useful in determiningthe canonical name of the local host.Note that the location of the <EMCLASS="emphasis">hosts</EM> file can also be changedwith the <CODECLASS="literal">HostsFile</CODE> option (see <ACLASS="xref"HREF="ch34_08.htm#SML2-CH-34-SECT-8-30"TITLE="">Section 34.8.30, HostsFile</A>).<EMCLASS="emphasis">/dev/kmem</EM> <ACLASS="indexterm"NAME="AUTOID-12168"></A>The <EMCLASS="emphasis">sendmail</EM> program decides when to refuse connections and whento only queue mail on the basis of its perception of the machine load average.The process of determining that average is hugely complex and variesgreatly from vendor to vendor. Three pathnames that may be used indetermining the load are_PATH_KMEM,_PATH_LOADAVG,and _PATH_UNIX.These should need to be changed only in the rare event that you areporting <EMCLASS="emphasis">sendmail</EM> to a previously unsupported platform. Read thefile <EMCLASS="emphasis">conf.c</EM> to see the complex way they are presently used.Also see <ACLASS="xref"HREF="ch18_08.htm#SML2-CH-18-TAB-5"TITLE="Tuning for LA_INT, LA_SHORT, LA_FLOAT, and LA_READKSYM">Table 18.6</A> to see how to use theseto find the load average.<EMCLASS="emphasis">/etc/shells</EM> <ACLASS="indexterm"NAME="AUTOID-12175"></A>A user is not allowed to run programs from a <EMCLASS="emphasis">.forward</EM>file unless that user has a valid login shell(see <ACLASS="xref"HREF="ch25_07.htm#SML2-CH-25-SECT-7-4"TITLE="Piping Through Programs">Section 25.7.4, "Piping Through Programs"</A>). Nor is a user allowedto save mail directly to files without a valid shell.To determine whether the login shell is valid, <EMCLASS="emphasis">sendmail</EM> calls<EMCLASS="emphasis">getusershell</EM>(3). If <EMCLASS="emphasis">sendmail</EM> was defined withoutHASGETUSERSHELL defined (see <ACLASS="xref"HREF="ch18_08.htm#SML2-CH-18-TAB-3"TITLE="HAS... #defines for Specific System Call Support">Table 18.4</A>), it insteadtries to lookup the shell in the <EMCLASS="emphasis">/etc/shells</EM> file. If that file cannot be opened, <EMCLASS="emphasis">sendmail</EM> gets valid shell namesfrom an internal list called <CODECLASS="literal">DefaultUserShells</CODE> that is defined in <EMCLASS="emphasis">conf.c</EM>.This _PATH_SHELLS definition can be used to change thelocation of the <EMCLASS="emphasis">/etc/shells</EM> file.<EMCLASS="emphasis">/usr/tmp</EM> <ACLASS="indexterm"NAME="AUTOID-12189"></A>In a panic situation (such as when <EMCLASS="emphasis">sendmail</EM> cannot figure outhow to deliver or bounce a mail message) the message is saved intothe <EMCLASS="emphasis">/usr/tmp/dead.letter</EM> file (see the <CODECLASS="literal">ErrorMode</CODE> (<CODECLASS="literal">e</CODE>)option <ACLASS="xref"HREF="ch34_08.htm#SML2-CH-34-SECT-8-24"TITLE="">Section 34.8.24, ErrorMode (e)</A>).The _PATH_VARTMP definition is used to tune the locationof the <EMCLASS="emphasis">/usr/tmp</EM> directory. For some systems it is definedas <EMCLASS="emphasis">/usr/tmp</EM>; for others it will need to be named<EMCLASS="emphasis">/var/tmp</EM>. As distributed, it is undefined in all <EMCLASS="emphasis">Makefiles</EM>,and it defaults to <EMCLASS="emphasis">/usr/tmp</EM>.</P><PCLASS="para">There is no debugging flag that will display the defaults forthese file locations. If any are of concern, you should build<EMCLASS="emphasis">sendmail</EM> yourself.</P></DIV></BLOCKQUOTE></DIV><DIVCLASS="refentry"><DIVCLASS="refnamediv"><H3CLASS="refname"><ACLASS="refname"NAME="SML2-CH-18-SECT-8-35">18.8.35 PICKY...</A></H3><PCLASS="refpurpose">Make sendmail pickier</P>(tune with ENVDEF= in Makefile)</DIV><BLOCKQUOTE><DIVCLASS="refsect1"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-12211"></A>The <EMCLASS="emphasis">sendmail</EM> program can be made pickier by tuning its<CODECLASS="literal">PrivacyOptions</CODE> (<CODECLASS="literal">p</CODE>) option (see <ACLASS="xref"HREF="ch34_08.htm#SML2-CH-34-SECT-8-47"TITLE="">Section 34.8.47, PrivacyOptions (p)</A>) or by defining twomacros when compiling:PICKY_HELO_CHECK <ACLASS="indexterm"NAME="AUTOID-12217"></A><ACLASS="indexterm"NAME="AUTOID-12220"></A>The SMTP HELO command is used to introduce the calling machine tothe receiving machine. The form of that command is</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">HELO <ICLASS="lineannotation">calling host name here</I></PRE></BLOCKQUOTE></P><PCLASS="para">Note that HELO and EHLO are equivalent in this regard. Ordinarily,<EMCLASS="emphasis">sendmail</EM> doesn't care what the calling host calls itself.All <EMCLASS="emphasis">sendmail</EM> cares about is that this name is the canonical nameof a machine. If you care whether the HELO hostname matches the realhostname of the calling machine, you can define PICKY_HELO_CHECK.</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">ENVDEF= -DPICKY_HELO_CHECK</PRE></BLOCKQUOTE></P><PCLASS="para">With PICKY_HELO_CHECK defined, a mismatch (other than the localmachine calling itself <EMCLASS="emphasis">localhost</EM>) will result in thisbeing logged:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">Host <CODECLASS="replaceable"><I>realname</I></CODE> claimed to be <CODECLASS="replaceable"><I>heloname</I></CODE></PRE></BLOCKQUOTE></P><PCLASS="para">Note that this check is ordinarily turned off[15]because a large number of hosts on the Internetuse a name that is different from their canonical name.  PICKY_QF_NAME_CHECK <ACLASS="indexterm"NAME="AUTOID-12239"></A>The name of a queue file's control file is narrowly definedinside <EMCLASS="emphasis">sendmail</EM> (see <ACLASS="xref"HREF="ch23_02.htm#SML2-CH-23-SECT-2-1"TITLE="The Queue Identifier">Section 23.2.1, "The Queue Identifier"</A>). If only<EMCLASS="emphasis">sendmail</EM> will be placing files into your queue, you might wish to turn on this macro for additional protection:</P><BLOCKQUOTECLASS="footnote"><PCLASS="para">[15] Eric was getting complaints that the continual insertion of this warning was misleading and tended to cause people to ignore it entirely.</P></BLOCKQUOTE><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">ENVDEF= -DPICKY_QF_NAME_CHECK</PRE></BLOCKQUOTE></P><PCLASS="para">With PICKY_QF_NAME_CHECK defined, <EMCLASS="emphasis">sendmail</EM> will logan error if the name of the <CODECLASS="literal">qf</CODE> file is incorrectlyformed and will rename the <CODECLASS="literal">qf</CODE> file into a <CODECLASS="literal">Qf</CODE>file (see <ACLASS="xref"HREF="ch23_03.htm"TITLE="A Bogus qf File (V8 only): Qf">Section 23.3</A> for details of this process).</P></DIV></BLOCKQUOTE></DIV><DIVCLASS="refentry"><DIVCLASS="refnamediv"><H3CLASS="refname"><ACLASS="refname"NAME="SML2-CH-18-SECT-8-36">18.8.36 PSBUFSIZ</A></H3><PCLASS="refpurpose">Size of prescan() buffer</P>(tune, edit conf.h)</DIV><BLOCKQUOTE><DIVCLASS="refsect1"><PCLASS="para"></P><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-12261"></A><ACLASS="indexterm"NAME="AUTOID-12263"></A>Whenever an address (including rules) is tokenized, it isstored in a single buffer, one token following the next witha zero-value byte separating them. The size of this bufferis defined by PSBUFSIZ. The default size is definedin <EMCLASS="emphasis">conf.h</EM> as (MAXNAME + MAXATOM).</P><PCLASS="para">In general, this definition should never be changed.If you start getting warning messages such as</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">Address too long</PRE></BLOCKQUOTE></P><PCLASS="para">look elsewhere (such as rule sets) for the cause. You should consider changing the size of PSBUFSIZ only as a lastresort.</P></DIV></BLOCKQUOTE></DIV><DIVCLASS="refentry"><DIVCLASS="refnamediv"><H3CLASS="refname"><ACLASS="refname"NAME="SML2-CH-18-SECT-8-37">18.8.37 QUEUE</A></H3><PCLASS="refpurpose">Enable queueing</P>(tune, edit conf.h)</DIV><BLOCKQUOTE><DIVCLASS="refsect1"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-12279"></A>If <EMCLASS="emphasis">sendmail</EM> cannot immediately deliver a mail message, it placesthat message in a queue to await another try. The QUEUE definitioncauses queue-handling code to be included in <EMCLASS="emphasis">sendmail</EM>.If queueing is not enabled and you need to queue, <EMCLASS="emphasis">sendmail</EM>prints the following message and either bounces or discards the message:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">dropenvelope: queueup</PRE></BLOCKQUOTE></P><PCLASS="para">A word to the wise: <EMCLASS="emphasis">Always</EM> define QUEUE.Even if you have only a pure UUCP machine, mail can fail(for a reason such as a full disk). Without queueing, such mailwill bounce when instead it should be queued for a later try.</P><PCLASS="para">The default is to always define QUEUE ifNETINET or NETISO are defined; otherwise, QUEUE is undefined. There is no debugging flag to show whether QUEUE is defined, but the the <CODECLASS="literal">-bp</CODE> switch(see <ACLASS="xref"HREF="ch23_04.htm"TITLE="Printing the Queue">Section 23.4, "Printing the Queue"</A>)can be used to determine whether it is supported.</P></DIV></BLOCKQUOTE></DIV><DIVCLASS="refentry"><DIVCLASS="refnamediv"><H3CLASS="refname"><ACLASS="refname"NAME="SML2-CH-18-SECT-8-38">18.8.38 QUEUESEGSIZE</A></H3><PCLASS="refpurpose">Amount to grow queue work list</P>(tune, edit conf.h)</DIV><BLOCKQUOTE><DIVCLASS="refsect1"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-12299"></A><ACLASS="indexterm"NAME="AUTOID-12301"></A>During a queue run, <EMCLASS="emphasis">sendmail</EM> holds information in memoryabout all the files being processed. It does this so that itcan sort them by priority for delivery.Beginning with V8.7 <EMCLASS="emphasis">sendmail</EM>, there is no longer a limit(other than consuming all memory) on how many queued messagescan be processed during any queue run. Prior to V8.7, that numberwas fixed by the constant QUEUESIZE. QUEUESIZEhas been retired and replaced with QUEUESEGSIZE,which is defined in <EMCLASS="emphasis">conf.h</EM> as:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen"># define QUEUESEGSIZE   1000            /* increment for queue size */</PRE></BLOCKQUOTE></P><PCLASS="para">It should be changed only if your queue continually contains a hugenumber of messages. If you notice many messages like this beinglogged:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">grew WorkList for...</PRE></BLOCKQUOTE></P><PCLASS="para">you may need to modify QUEUESEGSIZE. Doing so requires that youedit <EMCLASS="emphasis">conf.h</EM> and recompile.</P><PCLASS="para">QUEUESEGSIZE can be traced with the <CODECLASS="literal">-d41</CODE> debuggingswitch (see <ACLASS="xref"HREF="ch37_05.htm#SML2-CH-37-SECT-5-144"TITLE="">Section 37.5.144, -d41.1</A>).</P></DIV></BLOCKQUOTE></DIV><DIVCLASS="refentry"><DIVCLASS="refnamediv"><H3CLASS="refname"><ACLASS="refname"NAME="SML2-CH-18-SECT-8-39">18.8.39 SCANF</A></H3><PCLASS="refpurpose">Support scanf(3) with F command</P>(tune with ENVDEF= in Makefile)</DIV><BLOCKQUOTE><DIVCLASS="refsect1"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-12325"></A><ACLASS="indexterm"NAME="AUTOID-12327"></A>The <CODECLASS="literal">F</CODE> configuration command (see <ACLASS="xref"HREF="ch32_01.htm#SML2-CH-32-SECT-1-2"TITLE="The F Class Command">Section 32.1.2, "The F Class Command"</A>) allowsthe specification of a <EMCLASS="emphasis">scanf</EM>(3) style stringto aid in parsing files (see <ACLASS="xref"HREF="ch32_01.htm#SML2-CH-32-SECT-1-2-1"TITLE="scanf(3) variations">Section 32.1.2.1, "scanf(3) variations"</A>).In general this is not recommended because a misdesignedinput file can cause <EMCLASS="emphasis">sendmail</EM> to core dump.However, because of its popularity, it is enabled at compile time by default. If you don't need it, we recommendyou exclude its support with ENVDEF= in <EMCLASS="emphasis">Makefile</EM>.</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">ENVDEF= -DSCANF=0                <ICLASS="lineannotation"><IMGSRC="../chars/uarr.gif"ALT="-^"></I>        <ICLASS="lineannotation">disable scanf(3)</I></PRE></BLOCKQUOTE></P><PCLASS="para">The <EMCLASS="emphasis">scanf</EM>(3) is used only in reading files into aclass with the <CODECLASS="literal">F</CODE> configuration command. If you are runninga precompiled version of <EMCLASS="emphasis">sendmail</EM>, you can determine whetherSCANF was included by using the <CODECLASS="literal">-d0.1</CODE> debuggingswitch (see <ACLASS="xref"HREF="ch37_05.htm#SML2-CH-37-SECT-5-1"TITLE="">Section 37.5.1</A>).</P></DIV></BLOCKQUOTE></DIV><DIVCLASS="refentry"><DIVCLASS="refnamediv"><H3CLASS="refname"><ACLASS="refname"NAME="SML2-CH-18-SECT-8-40">18.8.40 SFS-TYPE</A></H3><PCLASS="refpurpose">How to determine free disk space</P>(port, edit conf.h)</DIV><BLOCKQUOTE><DIVCLASS="refsect1"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-12353"></A><ACLASS="indexterm"NAME="AUTOID-12355"></A><ACLASS="indexterm"NAME="AUTOID-12357"></A>The <EMCLASS="emphasis">sendmail</EM> program can reject incoming mail messages ifthey are too large for the queueing disk. This ability is enabledby giving a positive, nonzero size to the <CODECLASS="literal">MinFreeBlocks</CODE>(<CODECLASS="literal">b</CODE>) option (see <ACLASS="xref"HREF="ch34_08.htm#SML2-CH-34-SECT-8-40"TITLE="">Section 34.8.40, MinFreeBlocks (b)</A>).The method that <EMCLASS="emphasis">sendmail</EM> uses to measure the free space ona disk varies from system to system.SFS_TYPE defines which of several methods <EMCLASS="emphasis">sendmail</EM>will use. Those available are shown in<ACLASS="xref"HREF="ch18_08.htm#SML2-CH-18-TAB-9"TITLE="Method to Determine Free Disk Space">Table 18.10</A>.<ACLASS="indexterm"NAME="AUTOID-12367"></A><ACLASS="indexterm"NAME="AUTOID-12370"></A></P><TABLECLASS="table"><CAPTIONCLASS="table"><ACLASS="title"NAME="SML2-CH-18-TAB-9">Table 18.10: Method to Determine Free Disk Space</A></CAPTION><THEADCLASS="thead"><TRCLASS="row"VALIGN="TOP"><THCLASS="entry"ALIGN="LEFT"ROWSPAN="1"COLSPAN="1">Define</TH><THCLASS="entry"ALIGN="LEFT"ROWSPAN="1"COLSPAN="1">Description</TH></TR></THEAD><TBODYCLASS="tbody"><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">SFS_NONE</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Your system has no way to determine the free space on a disk.  This causes the  <CODECLASS="literal">MinFreeBlocks</CODE> (<CODECLASS="literal">b</CODE>) option (see <ACLASS="xref"HREF="ch34_08.htm#SML2-CH-34-SECT-8-40"TITLE="">Section 34.8.40</A>)to be ignored.</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">SFS_USTAT</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Your system uses the <EMCLASS="emphasis">ustat</EM>(2) system call to get information about mounted file systems.</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">SFS_4ARGS</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Your system uses the four-argument form of the <EMCLASS="emphasis">statfs</EM>(2) system call and <EMCLASS="emphasis">&lt;sys/statfs.h&gt;</EM>.  If you define this, you can also define SFS_BAVAIL as the field name for the <EMCLASS="emphasis">statfs</EM> C language structure (by default, <EMCLASS="emphasis">f_bavail</EM>).</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">SFS_VFS</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Your system uses the two-argument form of the <EMCLASS="emphasis">statfs</EM>(2) system call and <EMCLASS="emphasis">&lt;sys/vfs.h&gt;</EM>.</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">SFS_MOUNT</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Your system uses the two-argument form of the <EMCLASS="emphasis">statfs</EM>(2) system call and <EMCLASS="emphasis">&lt;sys/mount.h&gt;</EM>.</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">SFS_STATFS</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Your system uses the two-argument form of the <EMCLASS="emphasis">statfs</EM>(2) system call and <EMCLASS="emphasis">&lt;sys/statfs.h&gt;</EM>.</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">SFS_STATVFS</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Your system uses the <EMCLASS="emphasis">statvfs</EM>(2) system call.</TD></TR></TBODY></TABLE><PCLASS="para">In general, SFS_TYPE is correctly defined for all supportedsystems. You should need to modify it only if you are portingto a new system. To do so, you will need to edit <EMCLASS="emphasis">conf.h</EM>.</P><PCLASS="para">You can use the <CODECLASS="literal">-d4.80</CODE> debugging switch (see <ACLASS="xref"HREF="ch37_05.htm#SML2-CH-37-SECT-5-19"TITLE="">Section 37.5.19, -d4.80</A>)to watch <EMCLASS="emphasis">sendmail</EM> check for enough disk space.The only way to tell whether a precompiled version of <EMCLASS="emphasis">sendmail</EM> has this ability is by setting the <CODECLASS="literal">MinFreeBlocks</CODE> option to a positive value and watching the<CODECLASS="literal">-d4.80</CODE> output.If <CODECLASS="literal">bavail=</CODE> in that output is always <CODECLASS="literal">-1</CODE>, no matter what,your support was defined as SFS_NONE.</P></DIV></BLOCKQUOTE></DIV><DIVCLASS="refentry"><DIVCLASS="refnamediv"><H3CLASS="refname"><ACLASS="refname"NAME="SML2-CH-18-SECT-8-41">18.8.41 SMTP</A></H3><PCLASS="refpurpose">Enable SMTP</P>(tune with ENVDEF= in Makefile)</DIV><BLOCKQUOTE><DIVCLASS="refsect1"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-12435"></A>If you are running <EMCLASS="emphasis">sendmail</EM> as a daemon, you needto define SMTP to enable mail transfers. If you don't intendto run <EMCLASS="emphasis">sendmail</EM> as a daemon, SMTP might not need to bedefined.The default is that SMTP is automatically defined if eitherNETINET or NETISO is defined; otherwise, SMTPis undefined.</P><PCLASS="para">SMTP support is recommended, even if <EMCLASS="emphasis">sendmail</EM> is not running withnetwork support or as a daemon. To take advantage of the new DSN protocol,future MUAs will talkto <EMCLASS="emphasis">sendmail</EM> using SMTP over a pipe connectionwith the <CODECLASS="literal">-bs</CODE> command-line switch (see <ACLASS="xref"HREF="ch36_07.htm#SML2-CH-36-SECT-7-11"TITLE="">Section 36.7.11, -bs</A>).The <EMCLASS="emphasis">mh</EM>(1) suite of programs does that now.Delivery agents are also being designed with SMTP so thatthey can take advantage of DSN.</P><PCLASS="para">You enable SMTP support with ENVDEF= in your <EMCLASS="emphasis">Makefile</EM>:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">ENVDEF= -DSMTP=1</PRE></BLOCKQUOTE></P><PCLASS="para">If a precompiled <EMCLASS="emphasis">sendmail</EM> lacks SMTP support, an attemptto use <EMCLASS="emphasis">sendmail</EM>'s <CODECLASS="literal">-bs</CODE> command line switch will resultin this fatal error:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">I don't speak SMTP</PRE></BLOCKQUOTE></P><PCLASS="para">SMTP activity can be watched with the <CODECLASS="literal">-d18</CODE> and<CODECLASS="literal">-d19</CODE> debugging switches (see <ACLASS="xref"HREF="ch37_05.htm#SML2-CH-37-SECT-5-65"TITLE="">Section 37.5.65, -d19.1</A>) and with the <CODECLASS="literal">-v</CODE> command-lineswitch (see <ACLASS="xref"HREF="ch36_07.htm#SML2-CH-36-SECT-7-41"TITLE="">Section 36.7.41, -v</A>).</P></DIV></BLOCKQUOTE></DIV><DIVCLASS="refentry"><DIVCLASS="refnamediv"><H3CLASS="refname"><ACLASS="refname"NAME="SML2-CH-18-SECT-8-42">18.8.42 SMTPDEBUG</A></H3><PCLASS="refpurpose">Enable remote debugging</P>(debug with ENVDEF= in Makefile)</DIV><BLOCKQUOTE><DIVCLASS="refsect1"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-12469"></A><ACLASS="indexterm"NAME="AUTOID-12472"></A><ACLASS="indexterm"NAME="AUTOID-12475"></A>The <EMCLASS="emphasis">sendmail</EM> program allows the developer to turn on debuggingand to print the queue from any remote site. This capability isuseful for solving occasional problems butopens a potentially wide security hole.</P><PCLASS="para">In general, SMTPDEBUG should always be undefined. Later, when youbecome more expert with <EMCLASS="emphasis">sendmail</EM>, you might want to have astandby version of <EMCLASS="emphasis">sendmail</EM> ready (one with SMTPDEBUG defined),just in case you need it.</P><PCLASS="para">There is no debugging switch that will let you know whether a precompiledversion of <EMCLASS="emphasis">sendmail</EM> had this defined. Instead, you must runit as a daemon, connect to it with <EMCLASS="emphasis">telnet</EM>(1), and issuethe SHOWQ SMTP command. If it displays the mailqueue, then that precompiled <EMCLASS="emphasis">sendmail</EM> was built withSMTPDEBUG defined, and you <EMCLASS="emphasis">should not use it</EM>!</P></DIV></BLOCKQUOTE></DIV><DIVCLASS="refentry"><DIVCLASS="refnamediv"><H3CLASS="refname"><ACLASS="refname"NAME="SML2-CH-18-SECT-8-43">18.8.43 SMTPLINELIM</A></H3><PCLASS="refpurpose">Default for obsolete F=L flag</P>(don&#8217;t change)</DIV><BLOCKQUOTE><DIVCLASS="refsect1"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-12494"></A><ACLASS="indexterm"NAME="AUTOID-12496"></A>Each delivery agent that is defined in the configuration filemay or may not have an <CODECLASS="literal">L=</CODE> (Line length) equate(see <ACLASS="xref"HREF="ch30_04.htm#SML2-CH-30-SECT-4-6"TITLE="">Section 30.4.6, L=</A>). If that equate ismissing or if the value assigned to it is less than or equalto zero, and if the <CODECLASS="literal">F=L</CODE> delivery agent flagis set (see <ACLASS="xref"HREF="ch30_08.htm#SML2-CH-30-SECT-8-29"TITLE="">Section 30.8.29, F=L</A>),the default value that is used becomes the value of SMTPLINELIM.Otherwise, the default value is 0.This logic is there to support old configuration filesthat use <CODECLASS="literal">F=L</CODE> in place of the newer <CODECLASS="literal">L=</CODE>.</P><PCLASS="para">The default for SMTPLINELIM is 990 (defined in RFC821)and that value should not be changed. Rather, if you need a different line-length limit fora particular delivery agent, you should use the <CODECLASS="literal">L=</CODE> equatewhen defining it.</P></DIV></BLOCKQUOTE></DIV><DIVCLASS="refentry"><DIVCLASS="refnamediv"><H3CLASS="refname"><ACLASS="refname"NAME="SML2-CH-18-SECT-8-44">18.8.44 SOLARIS</A></H3><PCLASS="refpurpose">Support Sun's Solaris 2.x</P>(port, edit conf.h)</DIV><BLOCKQUOTE><DIVCLASS="refsect1"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-12514"></A>If compiling for a Sun Solaris machine, you will find thisSOLARIS definition correctly defined for you in your<EMCLASS="emphasis">Makefile</EM>:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">ENVDEF=    -DSOLARIS             <ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> Solaris 2.1 and 2.2</I>ENVDEF=    -DSOLARIS=20300       <ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> Solaris 2.3</I>ENVDEF=    -DSOLARIS=20400       <ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> Solaris 2.4</I>ENVDEF=    -DSOLARIS=20500       <ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> Solaris 2.5</I>ENVDEF=    -DSOLARIS=20501       <ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> Solaris 2.5.1</I></PRE></BLOCKQUOTE></P><PCLASS="para">Be sure to see <EMCLASS="emphasis">src/READ_ME</EM> for several well-known pitfalls concerning Solaris.</P></DIV></BLOCKQUOTE></DIV><DIVCLASS="refentry"><DIVCLASS="refnamediv"><H3CLASS="refname"><ACLASS="refname"NAME="SML2-CH-18-SECT-8-45">18.8.45 SPT-TYPE</A></H3><PCLASS="refpurpose">Adapt/exclude process title support</P>(port, edit conf.h)</DIV><BLOCKQUOTE><DIVCLASS="refsect1"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-12534"></A>Whenever a program first begins to run, UNIX provides it withtwo arrays of information: its command-line arguments, and theenvironment under which it was run. When you run <EMCLASS="emphasis">ps</EM>(1)to see what processes are doing, <EMCLASS="emphasis">ps</EM> prints the commandline that was used to run each program.</P><PCLASS="para">To provide more useful information (such as current status orhost connected to), <EMCLASS="emphasis">sendmail</EM> saves its command line andenvironment, then periodically uses that system space todisplay its status. This ability provides a valuable toolfor monitoring what each invocation of <EMCLASS="emphasis">sendmail</EM> is doing.</P><PCLASS="para">&#13;The method to display this information is correctly defined in <EMCLASS="emphasis">conf.c</EM> for all supported systems. In the rare event thatyou need to port <EMCLASS="emphasis">sendmail</EM> to another system, you maydo so by defining SPT_TYPE in <EMCLASS="emphasis">conf.h</EM>.</P></DIV></BLOCKQUOTE></DIV><DIVCLASS="refentry"><DIVCLASS="refnamediv"><H3CLASS="refname"><ACLASS="refname"NAME="SML2-CH-18-SECT-8-46">18.8.46 SUID-ROOT-FILES-OK</A></H3><PCLASS="refpurpose">Allow root delivery to files</P>(debug with ENVDEF= in Makefile)</DIV><BLOCKQUOTE><DIVCLASS="refsect1"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-12553"></A><ACLASS="indexterm"NAME="AUTOID-12555"></A><ACLASS="indexterm"NAME="AUTOID-12558"></A>When delivering to files, <EMCLASS="emphasis">sendmail</EM> runs as the controllinguser unless the <EMCLASS="emphasis">suid</EM> or <EMCLASS="emphasis">sgid</EM> bits of the file are set.If so, it runs as the owner of the file.A question arises when such files are <EMCLASS="emphasis">root</EM> owned.Ordinarily, writing to <EMCLASS="emphasis">suid</EM> and <EMCLASS="emphasis">sgid</EM> <EMCLASS="emphasis">root</EM> owned files as <EMCLASS="emphasis">root</EM> is disallowed.</P><PCLASS="para">If, for some reason, your site needs to allow delivery to <EMCLASS="emphasis">root</EM>-owned files with <EMCLASS="emphasis">sendmail</EM> running as <EMCLASS="emphasis">root</EM>,you can enable this behavior with</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">ENVDEF= -DSUID_ROOT_FILES_OK</PRE></BLOCKQUOTE></P><PCLASS="para">But be aware that you may open serious security holes on your systemif you do this. We recommend that SUID_ROOT_FILES_OK neverbe defined, except as a temporary debugging technique.If you are running a precompiled <EMCLASS="emphasis">sendmail</EM> binary, you can use the <CODECLASS="literal">-d0.1</CODE> debuggingswitch (see <ACLASS="xref"HREF="ch37_05.htm#SML2-CH-37-SECT-5-1"TITLE="">Section 37.5.1</A>) to determine whether SUID_ROOT_FILES_OKwas defined in it.</P></DIV></BLOCKQUOTE></DIV><DIVCLASS="refentry"><DIVCLASS="refnamediv"><H3CLASS="refname"><ACLASS="refname"NAME="SML2-CH-18-SECT-8-47">18.8.47 SYSLOG-BUFSIZE</A></H3><PCLASS="refpurpose">Limit <EMCLASS="emphasis">syslog</EM>(3) buffer size</P>(port, edit conf.h)</DIV><BLOCKQUOTE><DIVCLASS="refsect1"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-12588"></A><ACLASS="indexterm"NAME="AUTOID-12590"></A>The <EMCLASS="emphasis">sendmail</EM> program logs errors, information, and debuggingmessages using the <EMCLASS="emphasis">syslog</EM>(3) facility.By default, <EMCLASS="emphasis">sendmail</EM> uses a 1024-byte buffer to assembleeach message before dispatching it, but some systems don't accepta buffer this big. For such systems you can reduce the sizeof that buffer by defining SYSLOG_BUFSIZE with a new size:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">ENVDEF= -DSYSLOG_BUFSIZE=<CODECLASS="userinput"><B>512</B></CODE>                         <ICLASS="lineannotation"><IMGSRC="../chars/uarr.gif"ALT="-^"></I>         <ICLASS="lineannotation">reduce syslog</I>(3)<ICLASS="lineannotation">'s buffer size</I></PRE></BLOCKQUOTE></P><PCLASS="para">First, note that SYSLOG_BUFSIZE is correctly set in<EMCLASS="emphasis">conf.h</EM> and <EMCLASS="emphasis">Makefiles/*</EM> for all supported systems.Second, note that setting the buffer to fewer than 256 bytescauses <EMCLASS="emphasis">sendmail</EM> to log many more smaller messages (eachitem of information on a separate <EMCLASS="emphasis">syslog</EM>(3) line).If SYSLOG_BUFSIZE is less than 89, some logging informationwill be lost.</P><PCLASS="para">SYSLOG_BUFSIZE has an effect only if <EMCLASS="emphasis">sendmail</EM> wascompiled with LOG defined, (see <ACLASS="xref"HREF="ch18_08.htm#SML2-CH-18-SECT-8-16"TITLE="">Section 18.8.16</A>),and if the <CODECLASS="literal">LogLevel</CODE> (<CODECLASS="literal">L</CODE>) option (see <ACLASS="xref"HREF="ch34_08.htm#SML2-CH-34-SECT-8-33"TITLE="">Section 34.8.33</A>) is set to 6 or more, and ifyour <EMCLASS="emphasis">syslog.conf</EM>(5) file is configured to log<EMCLASS="emphasis">mail</EM> messages at LOG_INFO and above (see<ACLASS="xref"HREF="ch26_01.htm#SML2-CH-26-SECT-1"TITLE="Logging with syslog">Section 26.1, "Logging with syslog"</A>).If you are running a precompiled version of <EMCLASS="emphasis">sendmail</EM>, thereis no way to determine the setting of SYSLOG_BUFSIZE.</P></DIV></BLOCKQUOTE></DIV><DIVCLASS="refentry"><DIVCLASS="refnamediv"><H3CLASS="refname"><ACLASS="refname"NAME="SML2-CH-18-SECT-8-48">18.8.48 SYSTEM5</A></H3><PCLASS="refpurpose">Support SysV-derived machines</P>(port, edit conf.h)</DIV><BLOCKQUOTE><DIVCLASS="refsect1"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-12625"></A>If you are compiling <EMCLASS="emphasis">sendmail</EM> on a SysVR4-derived machine,you should define SYSTEM5. This automatically causes thecorrect SysV support to be included.For all systems that require SYSTEM5 to be defined,it is already correctly defined in <EMCLASS="emphasis">conf.h</EM>.</P><PCLASS="para">If you suspect that you need to define SYSTEM5 when portingto a new system, you should also investigate SYS5SIGNALSand SYS5SETPGRP in <EMCLASS="emphasis">conf.h</EM> and <EMCLASS="emphasis">READ_ME</EM>.If you are running a precompiled version of <EMCLASS="emphasis">sendmail</EM>, youcan use the <CODECLASS="literal">-d0.10</CODE> debugging switch(see <ACLASS="xref"HREF="ch37_05.htm#SML2-CH-37-SECT-5-3"TITLE="">Section 37.5.3</A>) to discover whether SYSTEM5 or SYS5SETPGRP were defined.</P></DIV></BLOCKQUOTE></DIV><DIVCLASS="refentry"><DIVCLASS="refnamediv"><H3CLASS="refname"><ACLASS="refname"NAME="SML2-CH-18-SECT-8-49">18.8.49 TCPWRAPPERS</A></H3><PCLASS="refpurpose">Use libwrap.a for connects</P>(tune with ENVDEF= in Makefile)</DIV><BLOCKQUOTE><DIVCLASS="refsect1"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-12643"></A><ACLASS="indexterm"NAME="AUTOID-12645"></A>Beginning with V8.8 <EMCLASS="emphasis">sendmail</EM>, it is now possible to use the<EMCLASS="emphasis">libwrap.a</EM> library to validate incoming SMTP connections.To enable this ability, you need to define TCPWRAPPERSand arrange for the <EMCLASS="emphasis">libwrap.a</EM> library to be included in your <EMCLASS="emphasis">Makefile</EM>:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">ENVDEF= -DTCPWRAPPERSLIBS= -lwrap</PRE></BLOCKQUOTE></P><PCLASS="para">See <EMCLASS="emphasis">src/README</EM> and <ACLASS="xref"HREF="ch22_04.htm#SML2-CH-22-SECT-4-1"TITLE="Accept/Reject Connections via libwrap.a">Section 22.4.1, "Accept/Reject Connections via libwrap.a"</A> for additional information.</P></DIV></BLOCKQUOTE></DIV><DIVCLASS="refentry"><DIVCLASS="refnamediv"><H3CLASS="refname"><ACLASS="refname"NAME="SML2-CH-18-SECT-8-50">18.8.50 TOBUFSIZE</A></H3><PCLASS="refpurpose">Set buffer for recipient list</P>(tune, edit conf.h)</DIV><BLOCKQUOTE><DIVCLASS="refsect1"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-12664"></A><ACLASS="indexterm"NAME="AUTOID-12666"></A><ACLASS="indexterm"NAME="AUTOID-12669"></A>For each delivery of one or more recipients to a singledelivery agent, <EMCLASS="emphasis">sendmail</EM> issues a summary of deliverythrough <EMCLASS="emphasis">syslog</EM>(3).When logged, the recipient part of the message looks like this:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">to=<CODECLASS="replaceable"><I>recipients</I></CODE></PRE></BLOCKQUOTE></P><PCLASS="para">Here, <EMCLASS="emphasis">recipients</EM> is a comma-separated list of recipients. Themaximum number of characters in this list isdetermined by TOBUFSIZE. That limit is intended to preventthe internal <EMCLASS="emphasis">syslog</EM>(3) buffer from overflowing. On machineswith older versions of <EMCLASS="emphasis">syslog</EM>(3) you may need toreduce the size of TOBUFSIZE in <EMCLASS="emphasis">conf.h</EM>.In general, TOBUFSIZE is correctly defined for allcurrently supported systems. You should need to changeit only if porting to a new system.</P><PCLASS="para">Note that one side effect of TOBUFSIZE is that it also limits thetotal number of recipients that can be delivered at once. If you need toincrease that limit (and if you have a robust version of <EMCLASS="emphasis">syslog</EM>),you can experiment by cautiously increasing TOBUFSIZE.</P></DIV></BLOCKQUOTE></DIV><DIVCLASS="refentry"><DIVCLASS="refnamediv"><H3CLASS="refname"><ACLASS="refname"NAME="SML2-CH-18-SECT-8-51">18.8.51 TRUST-POPEN</A></H3><PCLASS="refpurpose">Allow use of popen(3)</P>(debug with ENVDEF= in Makefile)</DIV><BLOCKQUOTE><DIVCLASS="refsect1"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-12691"></A><ACLASS="indexterm"NAME="AUTOID-12693"></A>The <EMCLASS="emphasis">sendmail</EM> program uses the <EMCLASS="emphasis">uname</EM>(2) system callto determine the UUCP name of the local host.If your machine lacks the <EMCLASS="emphasis">uname</EM>(2) call (if HASUNAMEwas not defined), <EMCLASS="emphasis">sendmail</EM> attempts to emulate<EMCLASS="emphasis">uname</EM>(2) with its own internal routine.That internal routine first tries to read the <EMCLASS="emphasis">/etc/whoami</EM>file. If that fails, it then tries to parse<EMCLASS="emphasis">/usr/include/whoami.h</EM>. Finally, if that fails andif TRUST_POPEN is defined, <EMCLASS="emphasis">sendmail</EM> executesthe following command to get the UUCP name:<ACLASS="indexterm"NAME="AUTOID-12703"></A></P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">popen(&quot;uuname -l&quot;, &quot;r&quot;)</PRE></BLOCKQUOTE></P><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-12708"></A>The result (no matter how it was obtained) is then placed intothe <CODECLASS="literal">$k</CODE> macro (see <ACLASS="xref"HREF="ch31_10.htm#SML2-CH-31-SECT-10-21"TITLE="">Section 31.10.21, $k</A>).</P><PCLASS="para">In general, you should <EMCLASS="emphasis">never</EM> define TRUST_POPEN.The <EMCLASS="emphasis">popen</EM>(3) call presents a huge security risk.If your system lacks <EMCLASS="emphasis">uname</EM>(2) and is unable toset its UUCP name, consider hard-coding that namein the configuration file:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">Dk<CODECLASS="replaceable"><I>uucpname</I></CODE></PRE></BLOCKQUOTE></P><PCLASS="para">You may wish to define TRUST_POPEN temporarily to see whetherthat causes your UUCP name to be found. Once thatis done, undefine it for your final release of <EMCLASS="emphasis">sendmail</EM>.</P><PCLASS="para">There is no debugging switch that will tell you whether TRUST_POPENwas defined in a precompiled version of <EMCLASS="emphasis">sendmail</EM>. If that binaryis not stripped, you can use <EMCLASS="emphasis">nm</EM>(1) to check for <EMCLASS="emphasis">popen</EM>(3)support:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">% <CODECLASS="userinput"><B>nm sendmail | grep popen</B></CODE>00058bc8 T _popen                      <ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> found, so TRUST_POPEN was defined</I></PRE></BLOCKQUOTE></P><PCLASS="para">If <EMCLASS="emphasis">sendmail</EM> is stripped, you can still run <EMCLASS="emphasis">strings</EM>(1)in order to check for the actual command:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">% <CODECLASS="userinput"><B>strings sendmail | grep &quot;uname -l&quot;</B></CODE>uuname -l                              <ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> found, so TRUST_POPEN was defined</I></PRE></BLOCKQUOTE></P><PCLASS="para">In either event you should contact your vendor and ask for thissecurity risk to be removed.</P></DIV></BLOCKQUOTE></DIV><DIVCLASS="refentry"><DIVCLASS="refnamediv"><H3CLASS="refname"><ACLASS="refname"NAME="SML2-CH-18-SECT-8-52">18.8.52 TTYNAME</A></H3><PCLASS="refpurpose">Set $y to tty name (obsolete)</P>(debug with ENVDEF= in Makefile)</DIV><BLOCKQUOTE><DIVCLASS="refsect1"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-12745"></A><ACLASS="indexterm"NAME="AUTOID-12747"></A><ACLASS="indexterm"NAME="AUTOID-12749"></A>The <CODECLASS="literal">$y</CODE> macro (see <ACLASS="xref"HREF="ch31_10.htm#SML2-CH-31-SECT-10-44"TITLE="">Section 31.10.44, $y</A>)is intended to hold as its value thebase name of the controlling <EMCLASS="emphasis">tty</EM> device (if there is one).On BSD-derived systems this is a name like the following,but with the <CODECLASS="literal">/dev/</CODE> prefix removed:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">/dev/tty04</PRE></BLOCKQUOTE></P><PCLASS="para">Defining TTYNAME enables <EMCLASS="emphasis">sendmail</EM> to put this informationinto <CODECLASS="literal">$y</CODE>:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">ENVDEF= -DTTYNAME</PRE></BLOCKQUOTE></P><PCLASS="para">Note that TTYNAME is useful only for debugging <EMCLASS="emphasis">sendmail</EM>.The <EMCLASS="emphasis">sendmail</EM> program does not itself use <CODECLASS="literal">$y</CODE> foranything. Also note that defining TTYNAME requires thatyour system support the <EMCLASS="emphasis">ttyname</EM>(2) system call.If you are running a precompiled version of <EMCLASS="emphasis">sendmail</EM>,you can determine whether TTYNAME was defined by sending mail withthe <CODECLASS="literal">-d35.9</CODE> debugging switch (see <ACLASS="xref"HREF="ch37_05.htm#SML2-CH-37-SECT-5-120"TITLE="">Section 37.5.120, -d35.9</A>) and watchingfor <CODECLASS="literal">$y</CODE> to be defined:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">define(y as ttyp1)</PRE></BLOCKQUOTE></P></DIV></BLOCKQUOTE></DIV><DIVCLASS="refentry"><DIVCLASS="refnamediv"><H3CLASS="refname"><ACLASS="refname"NAME="SML2-CH-18-SECT-8-53">18.8.53 UDB-DEFAULT-SPEC</A></H3><PCLASS="refpurpose">Default User Database location</P>(tune with DBMDEF= in Makefile)</DIV><BLOCKQUOTE><DIVCLASS="refsect1"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-12781"></A><ACLASS="indexterm"NAME="AUTOID-12783"></A><ACLASS="indexterm"NAME="AUTOID-12786"></A><ACLASS="indexterm"NAME="AUTOID-12788"></A>If you wish to define a default location for the User Databasethat will take effect if the <CODECLASS="literal">UserDatabaseSpec</CODE> (<CODECLASS="literal">U</CODE>) option(see <ACLASS="xref"HREF="ch34_08.htm#SML2-CH-34-SECT-8-75"TITLE="">Section 34.8.75, UserDatabaseSpec (U)</A>)is missing, you can define it, for example, like this:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">DBMDEF= -DNEWDB -DUDB_DEFAULT_SPEC=\&quot;/var/db/userdb.db\&quot;</PRE></BLOCKQUOTE></P><PCLASS="para">The backslashed quotation marks are necessary to pass the pathto <EMCLASS="emphasis">sendmail</EM> as a string. </P></DIV></BLOCKQUOTE></DIV><DIVCLASS="refentry"><DIVCLASS="refnamediv"><H3CLASS="refname"><ACLASS="refname"NAME="SML2-CH-18-SECT-8-54">18.8.54 USERDB</A></H3><PCLASS="refpurpose">Support the User Database</P>(tune with DBMDEF= in Makefile)</DIV><BLOCKQUOTE><DIVCLASS="refsect1"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-12805"></A>The User Database (see <ACLASS="xref"HREF="ch33_05.htm"TITLE="The User Database">Section 33.5</A>)is code inside <EMCLASS="emphasis">sendmail</EM> that allows sender andrecipient addresses to be rewritten under the control of an externaldatabase.This code is automatically included in <EMCLASS="emphasis">sendmail</EM> when you defineNEWDB or HESIOD:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">DBMDEF= -DNEWDB          <ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> automatically include User Database code</I>DBMDEF= -DHESIOD         <ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> automatically include User Database code</I></PRE></BLOCKQUOTE></P><PCLASS="para">&#13;If you don't want to include support for the User Database, you needto specifically turn it off by setting USERDB to 0:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">DBMDEF= -DNEWDB -DUSERDB=0DBMDEF= -DHESIOD -DUSERDB=0</PRE></BLOCKQUOTE></P><PCLASS="para">See UDB_DEFAULT_SPEC for a method to set a default for the databaselocation.If you are running a precompiled <EMCLASS="emphasis">sendmail</EM> binary, you may usethe <CODECLASS="literal">-d0.1</CODE> switch(see <ACLASS="xref"HREF="ch37_05.htm#SML2-CH-37-SECT-5-1"TITLE="">Section 37.5.1</A>)to determine whether USERDB support is included.</P></DIV></BLOCKQUOTE></DIV><DIVCLASS="refentry"><DIVCLASS="refnamediv"><H3CLASS="refname"><ACLASS="refname"NAME="SML2-CH-18-SECT-8-55">18.8.55 USESETEUID</A></H3><PCLASS="refpurpose">Support seteuid(2) identity changes</P>(port, edit conf.h)</DIV><BLOCKQUOTE><DIVCLASS="refsect1"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-12829"></A>.SS &quot;seteuid routine&quot;To perform most kinds of delivery in a safe manner, <EMCLASS="emphasis">sendmail</EM> must be able to change its <EMCLASS="emphasis">root</EM> identity to that of another user,deliver as that user, and then restore its identity to <EMCLASS="emphasis">root</EM>.The preferred method for doing this is with the Posix 1 <EMCLASS="emphasis">seteuid</EM>(2) routine. To determine whether your system correctlysupports this routine, compile and run the program<EMCLASS="emphasis">test/t_seteuid.c</EM>.The compiled binary must be <EMCLASS="emphasis">suid-root</EM> and must beexecuted by an ordinary user.</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen"># <CODECLASS="userinput"><B>cc t_seteuid.c</B></CODE># <CODECLASS="userinput"><B>chmod u+s a.out</B></CODE># <CODECLASS="userinput"><B>suspend</B></CODE>% <CODECLASS="userinput"><B>a.out</B></CODE>... <ICLASS="lineannotation">lots of output here</I>This system cannot use seteuid</PRE></BLOCKQUOTE></P><PCLASS="para">Here the output shows failure, so you do not have <EMCLASS="emphasis">seteuid</EM>(2) support.Beginning with V8.8, <EMCLASS="emphasis">a.out</EM> prints the following on success:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">It is safe to define USESETEUID on this system</PRE></BLOCKQUOTE></P><PCLASS="para">If the output had not shown failure or had shown success(if you had usable <EMCLASS="emphasis">seteuid</EM>(2) support),you could take advantage of that support by defining USESETEUID in<EMCLASS="emphasis">conf.h</EM>. In general, USESETEUID is correctly definedfor all systems that can take advantage of this <EMCLASS="emphasis">seteuid</EM> support.</P><PCLASS="para">If <EMCLASS="emphasis">seteuid</EM>(2) failed, you need to investigate using<EMCLASS="emphasis">setreuid</EM>(2) instead:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen"># <CODECLASS="userinput"><B>cc t_setreuid.c</B></CODE># <CODECLASS="userinput"><B>chmod u+s a.out</B></CODE># <CODECLASS="userinput"><B>suspend</B></CODE>% <CODECLASS="userinput"><B>a.out</B></CODE>initial uids (should be 678/0): r/euid=678/0after setreuid(0, 1) (should be 0/1): r/euid=0/1after setreuid(-1, 0) (should be 0/0): r/euid=0/0after setreuid(realuid, 0) (should be 678/0): r/euid=678/0after setreuid(0, 2) (should be 0/2): r/euid=0/2after setreuid(-1, 0) (should be 0/0): r/euid=0/0after setreuid(realuid, 0) (should be 678/0): r/euid=678/0It is safe to define HASSETREUID on this system</PRE></BLOCKQUOTE></P><PCLASS="para">Here, the test succeeded (no failure message was printed prior to V8.8).If your system can use <EMCLASS="emphasis">setreuid</EM>(2), you can takeadvantage of it by defining HASSETREUID in <EMCLASS="emphasis">conf.h</EM>.</P><PCLASS="para">No matter which you define, be sure to read <EMCLASS="emphasis">src/READ_ME</EM>for possible pitfalls. Note that HASSETREUIDand USESETEUID are correctly defined for all currentlysupported systems. You  need to define one only ifyou are porting <EMCLASS="emphasis">sendmail</EM> to a completely new system.</P><PCLASS="para">If you are running a precompiled <EMCLASS="emphasis">sendmail</EM> binary, youcan use the <CODECLASS="literal">-d0.1</CODE> switch(see <ACLASS="xref"HREF="ch37_05.htm#SML2-CH-37-SECT-5-1"TITLE="">Section 37.5.1</A>)to discover whether HASSETREUID or USESETEUIDsupport is included.</P></DIV></BLOCKQUOTE></DIV><DIVCLASS="refentry"><DIVCLASS="refnamediv"><H3CLASS="refname"><ACLASS="refname"NAME="SML2-CH-18-SECT-8-56">18.8.56 WILDCARD-SHELL</A></H3><PCLASS="refpurpose">Redefine wildcard shell</P>(debug, edit conf.c)</DIV><BLOCKQUOTE><DIVCLASS="refsect1"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-12880"></A><ACLASS="indexterm"NAME="AUTOID-12882"></A>Ordinarily, <EMCLASS="emphasis">sendmail</EM> prohibits ordinary users from runningprograms from inside their <EMCLASS="emphasis">~./forward</EM> files unless theyhave a valid login shell. This restriction is in place to preventordinary users from running arbitrary programs on a main mail server.Some sites prefer to allow users to run arbitrary programs despitethe restriction about logging into the mail server. At suchsites, one can bypass this restriction by placing the specialstring</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">/SENDMAIL/ANY/SHELL/</PRE></BLOCKQUOTE></P><PCLASS="para">in the <EMCLASS="emphasis">/etc/shells</EM> file. If, for some reason, you needto use a different string, you may do so by redefiningWILDCARD_SHELL in <EMCLASS="emphasis">conf.c</EM>.</P><PCLASS="para">If you enable arbitrary programs you should also implementthe <EMCLASS="emphasis">sendmail</EM> restricted shell <EMCLASS="emphasis">smrsh</EM> (see <ACLASS="xref"HREF="ch22_08.htm#SML2-CH-22-SECT-8-2"TITLE="The smrsh Program">Section 22.8.2, "The smrsh Program"</A>).</P></DIV></BLOCKQUOTE></DIV><DIVCLASS="refentry"><DIVCLASS="refnamediv"><H3CLASS="refname"><ACLASS="refname"NAME="SML2-CH-18-SECT-8-57">18.8.57 XDEBUG</A></H3><PCLASS="refpurpose">Support sanity checks</P>(debug with ENVDEF= in Makefile)</DIV><BLOCKQUOTE><DIVCLASS="refsect1"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-12903"></A>In past releases of <EMCLASS="emphasis">sendmail</EM>, changes infile descriptors and other key variables have sometimes occurred for reasons that remain a mystery to this day. Small &quot;sanity checks&quot; have been included in the codeto discover such anomalies, should they happen again.To exclude these checks, redefine XDEBUG to 0:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">ENVDEF= -DXDEBUG=0</PRE></BLOCKQUOTE></P><PCLASS="para">Generally, however, XDEBUG should always remainenabled. It adds only a microscopic amount of overheadto <EMCLASS="emphasis">sendmail</EM> and helps to certify <EMCLASS="emphasis">sendmail</EM>'srational behavior.</P><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-12912"></A>If <EMCLASS="emphasis">sendmail</EM>'s notion of who it is (as defined bythe <CODECLASS="literal">$j</CODE> macro; see <ACLASS="xref"HREF="ch31_10.htm#SML2-CH-31-SECT-10-20"TITLE="">Section 31.10.20, $j</A>) getstrashed by losing all its dots, <EMCLASS="emphasis">sendmail</EM> will log thefollowing at LOG_ALERT if XDEBUG is defined, dump its state (see <ACLASS="xref"HREF="ch26_03.htm#SML2-CH-26-SECT-3-3"TITLE="SIGUSR1  Dump States">Section 26.3.3, "SIGUSR1  Dump States"</A>), and <EMCLASS="emphasis">abort</EM>(3):</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">daemon process $j lost dot; see syslog</PRE></BLOCKQUOTE></P><PCLASS="para">At startup the value in the <CODECLASS="literal">$j</CODE> macro (see <ACLASS="xref"HREF="ch31_10.htm#SML2-CH-31-SECT-10-20"TITLE="">Section 31.10.20</A>)is appended to the class <CODECLASS="literal">w</CODE> (see <ACLASS="xref"HREF="ch32_05.htm#SML2-CH-32-SECT-5-8"TITLE="">Section 32.5.8, $=w</A>).If <EMCLASS="emphasis">sendmail</EM> is compiled with XDEBUG, itperiodically checks to make sure that <CODECLASS="literal">$j</CODE> is stilllisted in  class <CODECLASS="literal">w</CODE>. If <CODECLASS="literal">$j</CODE> should vanish,<EMCLASS="emphasis">sendmail</EM> will log the following at LOG_ALERT,dump its state (see <ACLASS="xref"HREF="ch26_03.htm#SML2-CH-26-SECT-3-3"TITLE="SIGUSR1  Dump States">Section 26.3.3</A>), and <EMCLASS="emphasis">abort</EM>(3):</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">daemon process doesn't have $j in $=w; see syslog</PRE></BLOCKQUOTE></P><PCLASS="para">With XDEBUG defined, <EMCLASS="emphasis">sendmail</EM> periodicallychecks to see whether its standard I/O file descriptorshave gotten clobbered. If so, it logs the following andtries to recover by connecting it to <EMCLASS="emphasis">/dev/null</EM>:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen"><CODECLASS="replaceable"><I>where</I></CODE>: fd <CODECLASS="replaceable"><I>which</I></CODE> not open</PRE></BLOCKQUOTE></P><PCLASS="para">Here, <CODECLASS="replaceable"><I>where</I></CODE> will reflect the internal subroutinename and arguments that led to the check, and <CODECLASS="replaceable"><I>which</I></CODE>will be the bad file descriptor number.</P><PCLASS="para">If you are running a precompiled <EMCLASS="emphasis">sendmail</EM> binary, youcan use the <CODECLASS="literal">-d0.1</CODE> switch(see <ACLASS="xref"HREF="ch37_05.htm#SML2-CH-37-SECT-5-1"TITLE="">Section 37.5.1</A>)to determine whether XDEBUG support is included.<ACLASS="indexterm"NAME="AUTOID-12951"></A><ACLASS="indexterm"NAME="AUTOID-12952"></A><ACLASS="indexterm"NAME="AUTOID-12953"></A></P></DIV></BLOCKQUOTE></DIV></DIV><DIVCLASS="htmlnav"><P></P><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch18_07.htm"TITLE="18.7 Pitfalls"><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 18.7 Pitfalls"BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="book"HREF="index.htm"TITLE="sendmail"><IMGSRC="../gifs/txthome.gif"ALT="sendmail"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="CHAPTER"HREF="ch19_01.htm"TITLE="19. V8 m4 Configuration"><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 19. V8 m4 Configuration"BORDER="0"></A></TD></TR><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172">18.7 Pitfalls</TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="index"HREF="index/idx_0.htm"TITLE="Book Index"><IMGSRC="../gifs/index.gif"ALT="Book Index"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172">19. V8 m4 Configuration</TD></TR></TABLE><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><PCLASS="nav"><FONTSIZE="-1">[ <AHREF="../index.htm"TITLE="The Networking CD Bookshelf">Library Home</A> | <AHREF="../dnsbind/index.htm"TITLE="DNS &amp; BIND">DNS &amp; BIND</A> | <AHREF="../tcpip/index.htm"TITLE="TCP/IP Network Administration">TCP/IP</A> | <AHREF="index.htm"TITLE="sendmail">sendmail</A> | <AHREF="../smdref/index.htm"TITLE="sendmail Desktop Reference">sendmail Reference</A> | <AHREF="../firewall/index.htm"TITLE="Building Internet Firewalls">Firewalls</A> | <AHREF="../puis/index.htm"TITLE="Practical UNIX &amp; Internet Security">Practical Security</A> ]</FONT></P></DIV></BODY></HTML>