<HTML><HEAD><TITLE>[Chapter 21] 21.6 Pitfalls</TITLE><METANAME="DC.title"CONTENT="sendmail"><METANAME="DC.creator"CONTENT="Bryan Costales &amp; Eric Allman"><METANAME="DC.publisher"CONTENT="O'Reilly &amp; Associates, Inc."><METANAME="DC.date"CONTENT="1999-01-06T19:28:37Z"><METANAME="DC.type"CONTENT="Text.Monograph"><METANAME="DC.format"CONTENT="text/html"SCHEME="MIME"><METANAME="DC.source"CONTENT="1-56592-222-0"SCHEME="ISBN"><METANAME="DC.language"CONTENT="en-US"><METANAME="generator"CONTENT="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><LINKREV="made"HREF="mailto:online-books@oreilly.com"TITLE="Online Books Comments"><LINKREL="up"HREF="ch21_01.htm"TITLE="21. DNS and sendmail"><LINKREL="prev"HREF="ch21_05.htm"TITLE="21.5 Prepare for Disaster"><LINKREL="next"HREF="ch22_01.htm"TITLE="22. Security"></HEAD><BODYBGCOLOR="#FFFFFF"TEXT="#000000"><DIVCLASS="htmlnav"><H1><IMGSRC="gifs/smbanner.gif"ALT="sendmail"USEMAP="#srchmap"BORDER="0"></H1><MAPNAME="srchmap"><AREASHAPE="RECT"COORDS="0,0,466,65"HREF="index.htm"ALT="sendmail"><AREASHAPE="RECT"COORDS="467,0,514,18"HREF="../search/ssrch.htm"ALT="Search this book"></MAP><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch21_05.htm"TITLE="21.5 Prepare for Disaster"><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 21.5 Prepare for Disaster"BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><B><FONTFACE="ARIEL,HELVETICA,HELV,SANSERIF"SIZE="-1">Chapter 21<BR>DNS and sendmail</FONT></B></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="CHAPTER"HREF="ch22_01.htm"TITLE="22. Security"><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 22. Security"BORDER="0"></A></TD></TR></TABLE>&nbsp;<HRALIGN="LEFT"WIDTH="515"TITLE="footer"></DIV><DIVCLASS="SECT1"><H2CLASS="sect1"><ACLASS="title"NAME="SML2-CH-21-SECT-6">21.6 Pitfalls</A></H2><ULCLASS="itemizedlist"><LICLASS="listitem"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-18030"></A>When <EMCLASS="emphasis">sendmail</EM> finds multiple A records for a host (and no MX records), it tries them in the order returned by DNS. DNS usually returnsthe A record that is on the same network first.The <EMCLASS="emphasis">sendmail</EM> program assumes that DNS returns addressesin a useful order.  If the address that <EMCLASS="emphasis">sendmail</EM>always tries first is not the most appropriate, look for problemswith DNS, not with <EMCLASS="emphasis">sendmail</EM>.</P></LI><LICLASS="listitem"><PCLASS="para">There is no way to discover that another site has used yoursas a disaster MX site unless someone at that other site tellsyou. Instead, you may one day suddenly discover many queuedmessages from outside your site destined for some host you'venever heard of before.</P></LI><LICLASS="listitem"><PCLASS="para">Under old versions of DNS an error in the zone file causesthe rest of the file to be ignored. The effect is as thoughmany of your hosts suddenly disappeared. This problem has beenfixed in 4.8.3 and 4.9.x.</P></LI><LICLASS="listitem"><PCLASS="para">Sites with a central mail hub should give that hub the role of a primary DNSserver. If <EMCLASS="emphasis">/etc/resolv.conf</EM> contains <CODECLASS="literal">localhost</CODE> as itsfirst record, lookups will be faster. Failure to make the mail huba DNS server runs the risk of mail failing and queueing when thehub is up but the other DNS servers are down or unreachable.</P></LI><LICLASS="listitem"><PCLASS="para">Prior to V8.8 <EMCLASS="emphasis">sendmail</EM> the maximum number of MX records thatcould be listed for a single host was 20. Some sites, such as <EMCLASS="emphasis">aol.com</EM>,will reach that limit soon and exceed it. Beginning with V8.8 <EMCLASS="emphasis">sendmail</EM>,that maximum has been increased to 100.</P></LI></UL><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-18051"></A></P></DIV><DIVCLASS="htmlnav"><P></P><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch21_05.htm"TITLE="21.5 Prepare for Disaster"><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 21.5 Prepare for Disaster"BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="book"HREF="index.htm"TITLE="sendmail"><IMGSRC="../gifs/txthome.gif"ALT="sendmail"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="CHAPTER"HREF="ch22_01.htm"TITLE="22. Security"><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 22. Security"BORDER="0"></A></TD></TR><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172">21.5 Prepare for Disaster</TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="index"HREF="index/idx_0.htm"TITLE="Book Index"><IMGSRC="../gifs/index.gif"ALT="Book Index"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172">22. Security</TD></TR></TABLE><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><PCLASS="nav"><FONTSIZE="-1">[ <AHREF="../index.htm"TITLE="The Networking CD Bookshelf">Library Home</A> | <AHREF="../dnsbind/index.htm"TITLE="DNS &amp; BIND">DNS &amp; BIND</A> | <AHREF="../tcpip/index.htm"TITLE="TCP/IP Network Administration">TCP/IP</A> | <AHREF="index.htm"TITLE="sendmail">sendmail</A> | <AHREF="../smdref/index.htm"TITLE="sendmail Desktop Reference">sendmail Reference</A> | <AHREF="../firewall/index.htm"TITLE="Building Internet Firewalls">Firewalls</A> | <AHREF="../puis/index.htm"TITLE="Practical UNIX &amp; Internet Security">Practical Security</A> ]</FONT></P></DIV></BODY></HTML>