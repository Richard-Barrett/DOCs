<HTML><HEAD><TITLE>[Chapter 27] The Configuration File</TITLE><METANAME="DC.title"CONTENT="sendmail"><METANAME="DC.creator"CONTENT="Bryan Costales &amp; Eric Allman"><METANAME="DC.publisher"CONTENT="O'Reilly &amp; Associates, Inc."><METANAME="DC.date"CONTENT="1999-01-06T19:49:36Z"><METANAME="DC.type"CONTENT="Text.Monograph"><METANAME="DC.format"CONTENT="text/html"SCHEME="MIME"><METANAME="DC.source"CONTENT="1-56592-222-0"SCHEME="ISBN"><METANAME="DC.language"CONTENT="en-US"><METANAME="generator"CONTENT="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><LINKREV="made"HREF="mailto:online-books@oreilly.com"TITLE="Online Books Comments"><LINKREL="up"HREF="part04.htm"TITLE="IV. Reference"><LINKREL="prev"HREF="part04.htm"TITLE="IV. Reference"><LINKREL="next"HREF="ch27_02.htm"TITLE="27.2 Comments"></HEAD><BODYBGCOLOR="#FFFFFF"TEXT="#000000"><DIVCLASS="htmlnav"><H1><IMGSRC="gifs/smbanner.gif"ALT="sendmail"USEMAP="#srchmap"BORDER="0"></H1><MAPNAME="srchmap"><AREASHAPE="RECT"COORDS="0,0,466,65"HREF="index.htm"ALT="sendmail"><AREASHAPE="RECT"COORDS="467,0,514,18"HREF="../search/ssrch.htm"ALT="Search this book"></MAP><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="PART"HREF="part04.htm"TITLE="IV. Reference"><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: IV. Reference"BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><B><FONTFACE="ARIEL,HELVETICA,HELV,SANSERIF"SIZE="-1">Chapter 27</FONT></B></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch27_02.htm"TITLE="27.2 Comments"><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 27.2 Comments"BORDER="0"></A></TD></TR></TABLE>&nbsp;<HRALIGN="LEFT"WIDTH="515"TITLE="footer"></DIV><DIVCLASS="CHAPTER"><H1CLASS="chapter"><ACLASS="title"NAME="SML2-CH-27">27. The Configuration File</A></H1><DIVCLASS="htmltoc"><P><B>Contents:</B><BR><ACLASS="sect1"HREF="#SML2-CH-27-SECT-1"TITLE="27.1 Overall Syntax">Overall Syntax</A><BR><ACLASS="sect1"HREF="ch27_02.htm"TITLE="27.2 Comments">Comments</A><BR><ACLASS="sect1"HREF="ch27_03.htm"TITLE="27.3 V8 Comments">V8 Comments</A><BR><ACLASS="sect1"HREF="ch27_04.htm"TITLE="27.4 Continuation Lines">Continuation Lines</A><BR><ACLASS="sect1"HREF="ch27_05.htm"TITLE="27.5 The V Configuration Command">The V Configuration Command</A><BR><ACLASS="sect1"HREF="ch27_06.htm"TITLE="27.6 Pitfalls">Pitfalls</A></P><P></P></DIV><PCLASS="para"></P><PCLASS="para">The <EMCLASS="emphasis">sendmail</EM> configuration file is usually called <EMCLASS="emphasis">sendmail.cf</EM>.<ACLASS="indexterm"NAME="SML2-CH-27-IX-SENDMAIL-CF-CONFIGURATION-FILE"></A>It provides all the central information that controlsthe <EMCLASS="emphasis">sendmail</EM> program's behavior. Among the key pieces ofinformation provided are the following:</P><ULCLASS="itemizedlist"><LICLASS="listitem"><PCLASS="para">The location of all the other files that <EMCLASS="emphasis">sendmail</EM> needs to access andthe location of all the directories in which <EMCLASS="emphasis">sendmail</EM> needsto create and remove files.</P></LI><LICLASS="listitem"><PCLASS="para">The definitions that <EMCLASS="emphasis">sendmail</EM> uses in rewriting addresses. Some ofthose definitions can come from files, which are also specified.</P></LI><LICLASS="listitem"><PCLASS="para">The mail header lines that <EMCLASS="emphasis">sendmail</EM> should modify, pass through, and/oraugment.</P></LI><LICLASS="listitem"><PCLASS="para">The rules and sets of rules that <EMCLASS="emphasis">sendmail</EM> uses for transforming mail addresses(and aliases for those addresses) into usable information, such aswhich delivery agent to use and the correct form of the address to usewith that delivery agent.</P></LI></UL><PCLASS="para">The location of the <EMCLASS="emphasis">sendmail.cf</EM> file is compiled into <EMCLASS="emphasis">sendmail</EM>.It is usually found in one of the directories <EMCLASS="emphasis">/etc</EM>,<EMCLASS="emphasis">/usr/lib</EM>, or <EMCLASS="emphasis">/etc/mail</EM>. If you are compiling <EMCLASS="emphasis">sendmail</EM>, you may specify the location of that file yourself bydefining _PATH_SENDMAILCF in your <EMCLASS="emphasis">Makefile</EM> (see <ACLASS="xref"HREF="ch18_08.htm#SML2-CH-18-SECT-8-34"TITLE="">Section 18.8.34, PATH...</A>).V8.7 recommends that the <EMCLASS="emphasis">sendmail.cf</EM> file be located in <EMCLASS="emphasis">/etc</EM>for consistency.[1]Some vendors, however, prefer other locations.We recommend that one of the standard locationsbe used unless you have a compelling reason to do otherwise.Nonstandard locations may, for example,make operating system upgrades difficultif you need to revert to prior or vendor versions of <EMCLASS="emphasis">sendmail</EM>.</P><BLOCKQUOTECLASS="footnote"><PCLASS="para">[1] Scripts that may be distributed in the future will need the location ofthe <EMCLASS="emphasis">sendmail.cf</EM> file to locate other files. If you movethe <EMCLASS="emphasis">sendmail.cf</EM> from its recommended standard location, you will have to modify all suchscripts before they can be used.</P></BLOCKQUOTE><PCLASS="para">The configuration file is read and parsed by <EMCLASS="emphasis">sendmail</EM> every timeit starts up.Because <EMCLASS="emphasis">sendmail</EM> is run every time electronic mail is sent, itsconfiguration file is designed to be easy for <EMCLASS="emphasis">sendmail</EM>to parse rather than easy for humans to read.&#13;</P><DIVCLASS="sect1"><H2CLASS="sect1"><ACLASS="title"NAME="SML2-CH-27-SECT-1">27.1 Overall Syntax</A></H2><PCLASS="para">The <EMCLASS="emphasis">sendmail.cf</EM> file is line-oriented, with oneconfiguration command per line. Each configuration command consists of a single letter[2]that must begin a line.Each letter is followed by other information as required by the purposeof the particular command.</P><BLOCKQUOTECLASS="footnote"><PCLASS="para">[2] A quick bit of history: Initially, there was almost nothing in the configurationfile except <CODECLASS="literal">R</CODE> rules (and there was only one rule set).Eric recalls adding <CODECLASS="literal">M</CODE> and <CODECLASS="literal">O</CODE> fairly quickly. Commandssuch as <CODECLASS="literal">K</CODE> and <CODECLASS="literal">V</CODE> came quite late.</P></BLOCKQUOTE><PCLASS="para">In addition to commands, the configuration file may also havelines that begin with a <CODECLASS="literal">#</CODE> to form a comment line or witha tab or space character to form a continuation line.A list of all legal characters that may begina line in the configuration file is shown in<ACLASS="xref"HREF="ch27_01.htm#SML2-CH-27-TAB-0"TITLE="sendmail.cf Configuration Commands">Table 27.1</A>.<ACLASS="indexterm"NAME="AUTOID-25667"></A><ACLASS="indexterm"NAME="AUTOID-25669"></A></P><TABLECLASS="table"><CAPTIONCLASS="table"><ACLASS="title"NAME="SML2-CH-27-TAB-0">Table 27.1: sendmail.cf Configuration Commands</A></CAPTION><THEADCLASS="thead"><TRCLASS="row"VALIGN="TOP"><THCLASS="entry"ALIGN="LEFT"ROWSPAN="1"COLSPAN="1">Command</TH><THCLASS="entry"ALIGN="LEFT"ROWSPAN="1"COLSPAN="1"></TH><THCLASS="entry"ALIGN="LEFT"ROWSPAN="1"COLSPAN="1">Version</TH><THCLASS="entry"ALIGN="LEFT"ROWSPAN="1"COLSPAN="1">Description</TH></TR></THEAD><TBODYCLASS="tbody"><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><CODECLASS="literal">#</CODE></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch27_02.htm"TITLE="Comments">Section 27.2, "Comments"</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">All</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">A comment line, ignored</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">space</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch27_04.htm"TITLE="Continuation Lines">Section 27.4, "Continuation Lines"</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">All</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Continue the previous line</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">tab</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch27_04.htm"TITLE="Continuation Lines">Section 27.4</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">All</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Continue the previous line</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><CODECLASS="literal">C</CODE></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch32_01.htm#SML2-CH-32-SECT-1"TITLE="Class Configuration Commands">Section 32.1, "Class Configuration Commands"</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">All</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Define a class macro</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><CODECLASS="literal">D</CODE></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch31_03.htm"TITLE="Configuration File Definitions">Section 31.3, "Configuration File Definitions"</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">All</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Define a macro</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><CODECLASS="literal">E</CODE></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch22_02.htm#SML2-CH-22-SECT-2-1"TITLE="The E Configuration Command">Section 22.2.1, "The E Configuration Command"</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">8.7 and above</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Environment for agents</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><CODECLASS="literal">F</CODE></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch32_01.htm#SML2-CH-32-SECT-1"TITLE="Class Configuration Commands">Section 32.1</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">All</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Define a class macro from a file or a pipe</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><CODECLASS="literal">H</CODE></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch35_01.htm#SML2-CH-35-SECT-1"TITLE="The H Configuration Command">Section 35.1, "The H Configuration Command"</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">All</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Define a header</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><CODECLASS="literal">K</CODE></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch33_03.htm"TITLE="The K Configuration Command">Section 33.3, "The K Configuration Command"</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">V8.1 and above</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Create a keyed map entry</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><CODECLASS="literal">M</CODE></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch30_01.htm#SML2-CH-30-SECT-1"TITLE="Configuration File Syntax">Section 30.1, "Configuration File Syntax"</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">All</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Define a mail delivery agent</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><CODECLASS="literal">O</CODE></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch34_02.htm"TITLE="Configuration-File Options">Section 34.2, "Configuration-File Options"</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">All</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Define an option</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><CODECLASS="literal">P</CODE></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch35_08.htm"TITLE="Precedence">Section 35.8, "Precedence"</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">All</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Define delivery priorities</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><CODECLASS="literal">R</CODE></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch28_01.htm#SML2-CH-28-SECT-1"TITLE="Overview">Section 28.1, "Overview"</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">All</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Define a transformation rule</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><CODECLASS="literal">S</CODE></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch29_01.htm#SML2-CH-29-SECT-1"TITLE="The S Configuration Command">Section 29.1, "The S Configuration Command"</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">All</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Declare a rule-set start</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><CODECLASS="literal">T</CODE></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch22_08.htm#SML2-CH-22-SECT-8-1-1"TITLE="Declare trusted users (not V8.1 through V8.6)">Section 22.8.1.1, "Declare trusted users (not V8.1 through V8.6)"</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">All</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Declare trusted users (ignored V8.1-V8.6)</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><CODECLASS="literal">V</CODE></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch27_05.htm"TITLE="The V Configuration Command">Section 27.5, "The V Configuration Command"</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">V8.1 and above</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Version of configuration file</TD></TR></TBODY></TABLE><PCLASS="para">Most configuration commands are so complex that each requiresa chapter or two of its own. A few, however, are simple.In this chapter we will describe the simple ones: comments, continuation lines,and the <CODECLASS="literal">V</CODE> (version) command.&#13;</P></DIV></DIV><DIVCLASS="htmlnav"><P></P><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="PART"HREF="part04.htm"TITLE="IV. Reference"><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: IV. Reference"BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="book"HREF="index.htm"TITLE="sendmail"><IMGSRC="../gifs/txthome.gif"ALT="sendmail"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch27_02.htm"TITLE="27.2 Comments"><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 27.2 Comments"BORDER="0"></A></TD></TR><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172">IV. Reference</TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="index"HREF="index/idx_0.htm"TITLE="Book Index"><IMGSRC="../gifs/index.gif"ALT="Book Index"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172">27.2 Comments</TD></TR></TABLE><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><PCLASS="nav"><FONTSIZE="-1">[ <AHREF="../index.htm"TITLE="The Networking CD Bookshelf">Library Home</A> | <AHREF="../dnsbind/index.htm"TITLE="DNS &amp; BIND">DNS &amp; BIND</A> | <AHREF="../tcpip/index.htm"TITLE="TCP/IP Network Administration">TCP/IP</A> | <AHREF="index.htm"TITLE="sendmail">sendmail</A> | <AHREF="../smdref/index.htm"TITLE="sendmail Desktop Reference">sendmail Reference</A> | <AHREF="../firewall/index.htm"TITLE="Building Internet Firewalls">Firewalls</A> | <AHREF="../puis/index.htm"TITLE="Practical UNIX &amp; Internet Security">Practical Security</A> ]</FONT></P></DIV></BODY></HTML>