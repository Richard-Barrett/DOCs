<HTML><HEAD><TITLE>[Chapter 31] Defined Macros</TITLE><METANAME="DC.title"CONTENT="sendmail"><METANAME="DC.creator"CONTENT="Bryan Costales &amp; Eric Allman"><METANAME="DC.publisher"CONTENT="O'Reilly &amp; Associates, Inc."><METANAME="DC.date"CONTENT="1999-01-06T20:09:10Z"><METANAME="DC.type"CONTENT="Text.Monograph"><METANAME="DC.format"CONTENT="text/html"SCHEME="MIME"><METANAME="DC.source"CONTENT="1-56592-222-0"SCHEME="ISBN"><METANAME="DC.language"CONTENT="en-US"><METANAME="generator"CONTENT="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><LINKREV="made"HREF="mailto:online-books@oreilly.com"TITLE="Online Books Comments"><LINKREL="up"HREF="part04.htm"TITLE="IV. Reference"><LINKREL="prev"HREF="ch30_08.htm"TITLE="30.8 Alphabetized F= Flags"><LINKREL="next"HREF="ch31_02.htm"TITLE="31.2 Command-Line Definitions"></HEAD><BODYBGCOLOR="#FFFFFF"TEXT="#000000"><DIVCLASS="htmlnav"><H1><IMGSRC="gifs/smbanner.gif"ALT="sendmail"USEMAP="#srchmap"BORDER="0"></H1><MAPNAME="srchmap"><AREASHAPE="RECT"COORDS="0,0,466,65"HREF="index.htm"ALT="sendmail"><AREASHAPE="RECT"COORDS="467,0,514,18"HREF="../search/ssrch.htm"ALT="Search this book"></MAP><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch30_08.htm"TITLE="30.8 Alphabetized F= Flags"><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 30.8 Alphabetized F= Flags"BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><B><FONTFACE="ARIEL,HELVETICA,HELV,SANSERIF"SIZE="-1">Chapter 31</FONT></B></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch31_02.htm"TITLE="31.2 Command-Line Definitions"><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 31.2 Command-Line Definitions"BORDER="0"></A></TD></TR></TABLE>&nbsp;<HRALIGN="LEFT"WIDTH="515"TITLE="footer"></DIV><DIVCLASS="CHAPTER"><H1CLASS="chapter"><ACLASS="title"NAME="SML2-CH-31">31. Defined Macros</A></H1><DIVCLASS="htmltoc"><P><B>Contents:</B><BR><ACLASS="sect1"HREF="#SML2-CH-31-SECT-1"TITLE="31.1 Preassigned Macros">Preassigned Macros</A><BR><ACLASS="sect1"HREF="ch31_02.htm"TITLE="31.2 Command-Line Definitions">Command-Line Definitions</A><BR><ACLASS="sect1"HREF="ch31_03.htm"TITLE="31.3 Configuration File Definitions">Configuration File Definitions</A><BR><ACLASS="sect1"HREF="ch31_04.htm"TITLE="31.4 Macro Names">Macro Names</A><BR><ACLASS="sect1"HREF="ch31_05.htm"TITLE="31.5 Macro Expansion: $ and $&amp;">Macro Expansion: $ and $&amp;</A><BR><ACLASS="sect1"HREF="ch31_06.htm"TITLE="31.6 Macro Conditionals: $?, $|, and $.">Macro Conditionals: $?, $|, and $.</A><BR><ACLASS="sect1"HREF="ch31_07.htm"TITLE="31.7 Categories of Macros">Categories of Macros</A><BR><ACLASS="sect1"HREF="ch31_08.htm"TITLE="31.8 Macros with the m4 Technique">Macros with the m4 Technique</A><BR><ACLASS="sect1"HREF="ch31_09.htm"TITLE="31.9 Pitfalls">Pitfalls</A><BR><ACLASS="sect1"HREF="ch31_10.htm"TITLE="31.10 Alphabetized Reference">Alphabetized Reference</A></P><P></P></DIV><PCLASS="para"></P><PCLASS="para">The <EMCLASS="emphasis">sendmail</EM> program supports three kinds of macros.Class macros (<ACLASS="xref"HREF="ch32_01.htm"TITLE="Class Macros">Chapter 32, <CITECLASS="chapter">Class Macros</CITE></A>) are used to represent multiple values.Database macros (<ACLASS="xref"HREF="ch33_01.htm"TITLE="Database Macros">Chapter 33, <CITECLASS="chapter">Database Macros</CITE></A>)represent values stored in external files or networked maps.In this chapter we discuss defined macros, which allow strings of text to be represented symbolically.</P><PCLASS="para">Defined macros can be <EMCLASS="emphasis">declared</EM> (given names and assigned the strings of text that will become values) at four different times:</P><OLCLASS="orderedlist"><LICLASS="listitem"><PCLASS="para">When <EMCLASS="emphasis">sendmail</EM> first begins to run, it preassigns strings of textto certain macros.</P></LI><LICLASS="listitem"><PCLASS="para">When <EMCLASS="emphasis">sendmail</EM> processes the options in its command line,macros that were declared by using the <CODECLASS="literal">-M</CODE> (see <ACLASS="xref"HREF="ch31_02.htm"TITLE="Command-Line Definitions">Section 31.2, "Command-Line Definitions"</A>) command-lineswitch[1]are assigned their values.</P><BLOCKQUOTECLASS="footnote"><PCLASS="para">[1] Prior to V8.7 the <CODECLASS="literal">-oM</CODE> option (see <ACLASS="xref"HREF="ch34_08.htm#SML2-CH-34-SECT-8-77"TITLE="">Section 34.8.77, (M)</A>)was used to define macros on the command line.Although that option still works, the <CODECLASS="literal">-M</CODE> command-line switchis now recommended as the preferred technique.</P></BLOCKQUOTE></LI><LICLASS="listitem"><PCLASS="para">When <EMCLASS="emphasis">sendmail</EM> reads its configuration file, macrosthat were declared by using the <CODECLASS="literal">D</CODE> configuration-file command(see <ACLASS="xref"HREF="ch31_03.htm"TITLE="Configuration File Definitions">Section 31.3, "Configuration File Definitions"</A>) are assigned their values.</P></LI><LICLASS="listitem"><PCLASS="para">Finally, many macros are assigned values internally by<EMCLASS="emphasis">sendmail</EM> as mail is received and sent.</P></LI></OL><PCLASS="para">Macros can be used in any configuration-file command.Generally, they are expanded (their value is used) when mailis sent or received.&#13;</P><DIVCLASS="sect1"><H2CLASS="sect1"><ACLASS="title"NAME="SML2-CH-31-SECT-1">31.1 Preassigned Macros</A></H2><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-32855"></A><ACLASS="indexterm"NAME="AUTOID-32858"></A>When <EMCLASS="emphasis">sendmail</EM> first begins to run, it preassigns values tocertain macros.The complete list of these macros is shown in<ACLASS="xref"HREF="ch31_01.htm#SML2-CH-31-TAB-0"TITLE="Preassigned Macros">Table 31.1</A>.Each is described in detail at the end of this chapter in <ACLASS="xref"HREF="ch31_10.htm"TITLE="Alphabetized Reference">Section 31.10, "Alphabetized Reference"</A>.</P><TABLECLASS="table"><CAPTIONCLASS="table"><ACLASS="title"NAME="SML2-CH-31-TAB-0">Table 31.1: Preassigned Macros</A></CAPTION><THEADCLASS="thead"><TRCLASS="row"VALIGN="TOP"><THCLASS="entry"ALIGN="LEFT"ROWSPAN="1"COLSPAN="1">Macro</TH><THCLASS="entry"ALIGN="LEFT"ROWSPAN="1"COLSPAN="1"></TH><THCLASS="entry"ALIGN="LEFT"ROWSPAN="1"COLSPAN="1">Description</TH></TR></THEAD><TBODYCLASS="tbody"><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><CODECLASS="literal">$_</CODE></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch31_10.htm#SML2-CH-31-SECT-10-1"TITLE="">Section 31.10.1, $-</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">RFC1413-validation and IP source route (V8.1 and above)</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><CODECLASS="literal">$b</CODE></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch31_10.htm#SML2-CH-31-SECT-10-3"TITLE="">Section 31.10.3, $b</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">The current date in RFC822 format</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><CODECLASS="literal">${bodytype}</CODE></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch31_10.htm#SML2-CH-31-SECT-10-4"TITLE="">Section 31.10.4, ${bodytype}</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">The ESMTP BODY parameter (V8.8 and above)</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><CODECLASS="literal">${client_addr}</CODE></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch31_10.htm#SML2-CH-31-SECT-10-7"TITLE="">Section 31.10.7, ${client-addr}</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">The connecting host's IP address (V8.8 and above)</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><CODECLASS="literal">${client_name}</CODE></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch31_10.htm#SML2-CH-31-SECT-10-8"TITLE="">Section 31.10.8, ${client-name}</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">The connecting host's canonical name (V8.8 and above)</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><CODECLASS="literal">${envid}</CODE></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch31_10.htm#SML2-CH-31-SECT-10-12"TITLE="">Section 31.10.12, ${envid}</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">The original DSN envelope ID (V8.8 and above)</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><CODECLASS="literal">$j</CODE></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch31_10.htm#SML2-CH-31-SECT-10-20"TITLE="">Section 31.10.20, $j</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">The canonical hostname</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><CODECLASS="literal">$k</CODE></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch31_10.htm#SML2-CH-31-SECT-10-21"TITLE="">Section 31.10.21, $k</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">UUCP node name (V8.1 and above)</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><CODECLASS="literal">$m</CODE></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch31_10.htm#SML2-CH-31-SECT-10-24"TITLE="">Section 31.10.24, $m</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">The domain name (V8.1 and above)</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><CODECLASS="literal">$n</CODE></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch31_10.htm#SML2-CH-31-SECT-10-26"TITLE="">Section 31.10.26, $n</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">The bounced mail sender</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><CODECLASS="literal">${opMode}</CODE></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch31_10.htm#SML2-CH-31-SECT-10-28"TITLE="">Section 31.10.28, ${opMode}</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">The startup operating mode (V8.7 and above)</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><CODECLASS="literal">$v</CODE></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch31_10.htm#SML2-CH-31-SECT-10-38"TITLE="">Section 31.10.38, $v</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">The <EMCLASS="emphasis">sendmail</EM> program's version</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><CODECLASS="literal">$w</CODE></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch31_10.htm#SML2-CH-31-SECT-10-40"TITLE="">Section 31.10.40, $w</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">The short name of this host</TD></TR></TBODY></TABLE><PCLASS="para">All preassigned macros can be redefined in the configuration fileor in the command line.The <CODECLASS="literal">-d35.9</CODE> (see <ACLASS="xref"HREF="ch37_05.htm#SML2-CH-37-SECT-5-120"TITLE="">Section 37.5.120, -d35.9</A>) debugging switch(when run on an empty configuration file)can be used to watch <EMCLASS="emphasis">sendmail</EM> predefine its macros.[2]</P><BLOCKQUOTECLASS="footnote"><PCLASS="para">[2] When you use this debugging switch, you will notice that operatorssuch as <CODECLASS="literal">$*</CODE> are implemented as macros too.</P></BLOCKQUOTE><PCLASS="para">Note that the <EMCLASS="emphasis">m4</EM> configuration technique uses many more macros than are shownhere (see <ACLASS="xref"HREF="ch31_08.htm#SML2-CH-31-TAB-4"TITLE="Macros Reserved with the m4 Technique">Table 31.5</A>).But even with that technique this short list of macros is all thatare internally defined by the <EMCLASS="emphasis">sendmail</EM> program when it first starts up.&#13;</P></DIV></DIV><DIVCLASS="htmlnav"><P></P><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch30_08.htm"TITLE="30.8 Alphabetized F= Flags"><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 30.8 Alphabetized F= Flags"BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="book"HREF="index.htm"TITLE="sendmail"><IMGSRC="../gifs/txthome.gif"ALT="sendmail"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch31_02.htm"TITLE="31.2 Command-Line Definitions"><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 31.2 Command-Line Definitions"BORDER="0"></A></TD></TR><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172">30.8 Alphabetized F= Flags</TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="index"HREF="index/idx_0.htm"TITLE="Book Index"><IMGSRC="../gifs/index.gif"ALT="Book Index"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172">31.2 Command-Line Definitions</TD></TR></TABLE><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><PCLASS="nav"><FONTSIZE="-1">[ <AHREF="../index.htm"TITLE="The Networking CD Bookshelf">Library Home</A> | <AHREF="../dnsbind/index.htm"TITLE="DNS &amp; BIND">DNS &amp; BIND</A> | <AHREF="../tcpip/index.htm"TITLE="TCP/IP Network Administration">TCP/IP</A> | <AHREF="index.htm"TITLE="sendmail">sendmail</A> | <AHREF="../smdref/index.htm"TITLE="sendmail Desktop Reference">sendmail Reference</A> | <AHREF="../firewall/index.htm"TITLE="Building Internet Firewalls">Firewalls</A> | <AHREF="../puis/index.htm"TITLE="Practical UNIX &amp; Internet Security">Practical Security</A> ]</FONT></P></DIV></BODY></HTML>