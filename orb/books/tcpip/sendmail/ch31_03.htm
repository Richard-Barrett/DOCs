<HTML><HEAD><TITLE>[Chapter 31] 31.3 Configuration File Definitions</TITLE><METANAME="DC.title"CONTENT="sendmail"><METANAME="DC.creator"CONTENT="Bryan Costales &amp; Eric Allman"><METANAME="DC.publisher"CONTENT="O'Reilly &amp; Associates, Inc."><METANAME="DC.date"CONTENT="1999-01-06T20:10:28Z"><METANAME="DC.type"CONTENT="Text.Monograph"><METANAME="DC.format"CONTENT="text/html"SCHEME="MIME"><METANAME="DC.source"CONTENT="1-56592-222-0"SCHEME="ISBN"><METANAME="DC.language"CONTENT="en-US"><METANAME="generator"CONTENT="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><LINKREV="made"HREF="mailto:online-books@oreilly.com"TITLE="Online Books Comments"><LINKREL="up"HREF="ch31_01.htm"TITLE="31. Defined Macros"><LINKREL="prev"HREF="ch31_02.htm"TITLE="31.2 Command-Line Definitions"><LINKREL="next"HREF="ch31_04.htm"TITLE="31.4 Macro Names"></HEAD><BODYBGCOLOR="#FFFFFF"TEXT="#000000"><DIVCLASS="htmlnav"><H1><IMGSRC="gifs/smbanner.gif"ALT="sendmail"USEMAP="#srchmap"BORDER="0"></H1><MAPNAME="srchmap"><AREASHAPE="RECT"COORDS="0,0,466,65"HREF="index.htm"ALT="sendmail"><AREASHAPE="RECT"COORDS="467,0,514,18"HREF="../search/ssrch.htm"ALT="Search this book"></MAP><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch31_02.htm"TITLE="31.2 Command-Line Definitions"><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 31.2 Command-Line Definitions"BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><B><FONTFACE="ARIEL,HELVETICA,HELV,SANSERIF"SIZE="-1">Chapter 31<BR>Defined Macros</FONT></B></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch31_04.htm"TITLE="31.4 Macro Names"><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 31.4 Macro Names"BORDER="0"></A></TD></TR></TABLE>&nbsp;<HRALIGN="LEFT"WIDTH="515"TITLE="footer"></DIV><DIVCLASS="SECT1"><H2CLASS="sect1"><ACLASS="title"NAME="SML2-CH-31-SECT-3">31.3 Configuration File Definitions</A></H2><PCLASS="para">When <EMCLASS="emphasis">sendmail</EM> reads the configuration file, macros that are declaredin that file are assigned values. The configuration-file command that declaresmacros begins with the letter <CODECLASS="literal">D</CODE>. There may onlybe a single macro command per line.The form of the <CODECLASS="literal">D</CODE> macro configuration command is:<ACLASS="indexterm"NAME="SML2-CH-31-IX-SENDMAIL-CF-CONFIGURATION-FILE-DEFINING-MACROS-IN"></A><ACLASS="indexterm"NAME="AUTOID-33051"></A></P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">D<CODECLASS="replaceable"><I>Xtext</I></CODE></PRE></BLOCKQUOTE></P><PCLASS="para">The symbolic name of the macro (here, <CODECLASS="literal">X</CODE>) is a single-characteror a multicharacter name (see <ACLASS="xref"HREF="ch31_04.htm"TITLE="Macro Names">Section 31.4, "Macro Names"</A>):</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">D<CODECLASS="userinput"><B>X</B></CODE><CODECLASS="replaceable"><I>text             </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> single-character name X</I>D<CODECLASS="userinput"><B>{XXX}</B></CODE><CODECLASS="replaceable"><I>text         </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> multicharacter name XXX</I></PRE></BLOCKQUOTE></P><PCLASS="para">This must immediately follow the <CODECLASS="literal">D</CODE> with no interveningspace. The value that is given to the macro is the <CODECLASS="replaceable"><I>text</I></CODE>,consisting of all characters beginning with the first character followingthe name and including all characters up to the end of the line.Any indented lines that follow the definition are joined tothat definition. When joined, the newline and indentation charactersare retained. Consider the following three configuration lines:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">DXsometext        moretext        moretext    <ICLASS="lineannotation"><IMGSRC="../chars/uarr.gif"ALT="-^"></I>    <ICLASS="lineannotation">tabs</I></PRE></BLOCKQUOTE></P><PCLASS="para">These are read and joined by <EMCLASS="emphasis">sendmail</EM> to form the following<CODECLASS="replaceable"><I>text</I></CODE> value for the macro named <CODECLASS="literal">X</CODE>:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">sometext\n\tmoretext\n\tmoretext</PRE></BLOCKQUOTE></P><PCLASS="para">The notation <CODECLASS="literal">\n</CODE> represents a newline character, and thenotation <CODECLASS="literal">\t</CODE> represents a tab character.</P><PCLASS="para">If <CODECLASS="replaceable"><I>text</I></CODE> is missing, the value assigned to the macro is that of an empty string; that is, a singlebyte that has a value of zero.</P><PCLASS="para">If both the name and the <CODECLASS="replaceable"><I>text</I></CODE> are missing, the following error is printed, and that <CODECLASS="literal">D</CODE> configurationline is ignored:[5]</P><BLOCKQUOTECLASS="footnote"><PCLASS="para">[5] Prior to V8 <EMCLASS="emphasis">sendmail</EM>,a macro whose name was missing was given arbitrary garbageas a value. This caused the <EMCLASS="emphasis">sendmail</EM> program to crash.</P></BLOCKQUOTE><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">Name required for macro/class</PRE></BLOCKQUOTE></P><PCLASS="para"></P><DIVCLASS="sect2"><H3CLASS="sect2"><ACLASS="title"NAME="SML2-CH-31-SECT-3-1">31.3.1 Required Macros (V8.6 and earlier)</A></H3><PCLASS="para"><ACLASS="xref"HREF="ch31_03.htm#SML2-CH-31-TAB-1"TITLE="Required Macros">Table 31.2</A>shows the macro names that <EMCLASS="emphasis">must</EM> (prior to V8.6)be given values in the configuration file. <ACLASS="indexterm"NAME="AUTOID-33100"></A></P><TABLECLASS="table"><CAPTIONCLASS="table"><ACLASS="title"NAME="SML2-CH-31-TAB-1">Table 31.2: Required Macros</A></CAPTION><THEADCLASS="thead"><TRCLASS="row"VALIGN="TOP"><THCLASS="entry"ALIGN="LEFT"ROWSPAN="1"COLSPAN="1">Macro</TH><THCLASS="entry"ALIGN="LEFT"ROWSPAN="1"COLSPAN="1"></TH><THCLASS="entry"ALIGN="LEFT"ROWSPAN="1"COLSPAN="1">Description</TH><THCLASS="entry"ALIGN="LEFT"ROWSPAN="1"COLSPAN="1">As of V8.7</TH></TR></THEAD><TBODYCLASS="tbody"><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><CODECLASS="literal">$e</CODE></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch34_08.htm#SML2-CH-34-SECT-8-65"TITLE="">Section 34.8.65, SmtpGreetingMessage or $e</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">The SMTP greeting message</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">The <CODECLASS="literal">SmtpGreetingMessage</CODE> option</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><CODECLASS="literal">$j<SUPCLASS="superscript">a</SUP></CODE></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch31_10.htm#SML2-CH-31-SECT-10-20"TITLE="">Section 31.10.20</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Official canonical hostname</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Automatically defined all V8</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><CODECLASS="literal">$l</CODE></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch34_08.htm#SML2-CH-34-SECT-8-72"TITLE="">Section 34.8.72, UnixFromLine or $l</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">UNIX From format</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">The <CODECLASS="literal">UnixFromLine</CODE> option</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><CODECLASS="literal">$n</CODE></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch31_10.htm#SML2-CH-31-SECT-10-26"TITLE="">Section 31.10.26</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Name used for error messages</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Automatically defined</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><CODECLASS="literal">$o</CODE></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch34_08.htm#SML2-CH-34-SECT-8-45"TITLE="">Section 34.8.45, OperatorChars or $o</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Delimiter operator characters</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">The <CODECLASS="literal">OperatorChars</CODE> option</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><CODECLASS="literal">$q</CODE></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch31_10.htm#SML2-CH-31-SECT-10-30"TITLE="">Section 31.10.30, $q</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Format of the sender's address</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">No longer used</TD></TR></TBODY></TABLE><PCLASS="para">Each of these macros is described at the end of this chapter in<ACLASS="xref"HREF="ch31_10.htm"TITLE="Alphabetized Reference">Section 31.10</A>. Prior to V8.7, failure to definea required macro could have resulted in unpredictable problems.Beginning with V8.7 <EMCLASS="emphasis">sendmail</EM>, no macros are required.Some are predefined[6]for you by <EMCLASS="emphasis">sendmail</EM>, and others have become options.&#13;</P><BLOCKQUOTECLASS="footnote"><PCLASS="para">[6] But you still may need to declare an occasional macro in yourconfiguration file to solve unusual problems.</P></BLOCKQUOTE></DIV><DIVCLASS="sect2"><H3CLASS="sect2"><ACLASS="title"NAME="SML2-CH-31-SECT-3-2">31.3.2 Syntax of the Configuration File Macro's Text</A></H3><PCLASS="para">The <CODECLASS="replaceable"><I>text</I></CODE> of a macro's value in the configurationfile may contain escaped control codes. Control codes are embeddedby using a backslash escape notation. The backslash escapenotations understood by <EMCLASS="emphasis">sendmail</EM> are listed in<ACLASS="xref"HREF="ch31_03.htm#SML2-CH-31-TAB-2"TITLE="Special Characters Allowed in Macro Text">Table 31.3</A>.<ACLASS="indexterm"NAME="AUTOID-33171"></A><ACLASS="indexterm"NAME="AUTOID-33175"></A></P><TABLECLASS="table"><CAPTIONCLASS="table"><ACLASS="title"NAME="SML2-CH-31-TAB-2">Table 31.3: Special Characters Allowed in Macro Text</A></CAPTION><THEADCLASS="thead"><TRCLASS="row"VALIGN="TOP"><THCLASS="entry"ALIGN="LEFT"ROWSPAN="1"COLSPAN="1">Notation</TH><THCLASS="entry"ALIGN="LEFT"ROWSPAN="1"COLSPAN="1">Placed in Text</TH></TR></THEAD><TBODYCLASS="tbody"><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><CODECLASS="literal">\b</CODE></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Backspace character</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><CODECLASS="literal">\f</CODE></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Formfeed character</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><CODECLASS="literal">\n</CODE></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Newline character</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><CODECLASS="literal">\r</CODE></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Carriage-return character</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><CODECLASS="literal">\\</CODE></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Backslash character</TD></TR></TBODY></TABLE><PCLASS="para">All other escaped characters are taken as is.For example, the notation <CODECLASS="literal">\X</CODE> becomes a <CODECLASS="literal">X</CODE>, whereasthe notation <CODECLASS="literal">\b</CODE> is converted to a backspacecharacter (usually a CTRL-H).For example,</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">DXO\bc May\, 1996    <ICLASS="lineannotation">becomes <IMGSRC="../chars/rarr.gif"ALT="-&gt;"></I>  O^Hc May, 1996</PRE></BLOCKQUOTE></P><PCLASS="para">Here, the <CODECLASS="literal">\b</CODE> is translated into a backspace (<CODECLASS="literal">^H</CODE>)character, and the <CODECLASS="literal">\,</CODE> is translated into a lone commacharacter.</P><PCLASS="para">Note that prior to V8.8, the first comma and all characters following it werestripped from the text unless the comma was quoted or escaped. For example,</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">DXMay, 1996    <ICLASS="lineannotation">becomes <IMGSRC="../chars/rarr.gif"ALT="-&gt;"></I>  May</PRE></BLOCKQUOTE></P><PCLASS="para">Beginning with V8.8 <EMCLASS="emphasis">sendmail</EM>, the comma is no longer special indefined macros.</P><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-33224"></A><ACLASS="indexterm"NAME="AUTOID-33226"></A><ACLASS="indexterm"NAME="AUTOID-33228"></A>Quoted <CODECLASS="replaceable"><I>text</I></CODE> will have the quotation marks stripped.Only double quotation marks are recognized. Multiple parts of<CODECLASS="replaceable"><I>text</I></CODE> may be quoted, or text may be quoted entirely.</P><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-33233"></A>Trailing spaces are automatically stripped. If you need to keep trailingspaces you need to quote them:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">DX&quot;1996 &quot;</PRE></BLOCKQUOTE></P><PCLASS="para">Leading space characters are retained in <CODECLASS="replaceable"><I>text</I></CODE> whether they are quotedor not.  Spaces are harmless provided that the macrois used only in rules (because spaces are token separators); butif the macro is used to define other macros, problems can arise.For example,</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">Dw ourhostDH nlm.nih.govDj $w.$H</PRE></BLOCKQUOTE></P><PCLASS="para">Here, the <CODECLASS="replaceable"><I>text</I></CODE> of the <CODECLASS="literal">$w</CODE> and <CODECLASS="literal">$H</CODE> macros isused to define the <CODECLASS="literal">$j</CODE> macro. The <CODECLASS="literal">$j</CODE> macro is used inthe HELO SMTP command and in the <CODECLASS="literal">Message-ID:</CODE> headerline. The value given to <CODECLASS="literal">$j</CODE> by the above is</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">   ourhost. nlm.nih.gov <ICLASS="lineannotation"><IMGSRC="../chars/uarr.gif"ALT="-^"></I>         <ICLASS="lineannotation"><IMGSRC="../chars/uarr.gif"ALT="-^"></I> <ICLASS="lineannotation">two</I>        <ICLASS="lineannotation">a space</I> <ICLASS="lineannotation">spaces</I></PRE></BLOCKQUOTE></P><PCLASS="para">Here, the value of <CODECLASS="literal">$j</CODE> should contain a correctly formed, fully qualifieddomain name. The unwanted spaces cause it to becomeincorrectly formed, which can cause mail to fail.<ACLASS="indexterm"NAME="AUTOID-33259"></A>&#13;</P></DIV></DIV><DIVCLASS="htmlnav"><P></P><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch31_02.htm"TITLE="31.2 Command-Line Definitions"><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 31.2 Command-Line Definitions"BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="book"HREF="index.htm"TITLE="sendmail"><IMGSRC="../gifs/txthome.gif"ALT="sendmail"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch31_04.htm"TITLE="31.4 Macro Names"><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 31.4 Macro Names"BORDER="0"></A></TD></TR><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172">31.2 Command-Line Definitions</TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="index"HREF="index/idx_0.htm"TITLE="Book Index"><IMGSRC="../gifs/index.gif"ALT="Book Index"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172">31.4 Macro Names</TD></TR></TABLE><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><PCLASS="nav"><FONTSIZE="-1">[ <AHREF="../index.htm"TITLE="The Networking CD Bookshelf">Library Home</A> | <AHREF="../dnsbind/index.htm"TITLE="DNS &amp; BIND">DNS &amp; BIND</A> | <AHREF="../tcpip/index.htm"TITLE="TCP/IP Network Administration">TCP/IP</A> | <AHREF="index.htm"TITLE="sendmail">sendmail</A> | <AHREF="../smdref/index.htm"TITLE="sendmail Desktop Reference">sendmail Reference</A> | <AHREF="../firewall/index.htm"TITLE="Building Internet Firewalls">Firewalls</A> | <AHREF="../puis/index.htm"TITLE="Practical UNIX &amp; Internet Security">Practical Security</A> ]</FONT></P></DIV></BODY></HTML>