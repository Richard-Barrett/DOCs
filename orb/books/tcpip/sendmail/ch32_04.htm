<HTML><HEAD><TITLE>[Chapter 32] 32.4 Pitfalls</TITLE><METANAME="DC.title"CONTENT="sendmail"><METANAME="DC.creator"CONTENT="Bryan Costales &amp; Eric Allman"><METANAME="DC.publisher"CONTENT="O'Reilly &amp; Associates, Inc."><METANAME="DC.date"CONTENT="1999-01-06T20:20:53Z"><METANAME="DC.type"CONTENT="Text.Monograph"><METANAME="DC.format"CONTENT="text/html"SCHEME="MIME"><METANAME="DC.source"CONTENT="1-56592-222-0"SCHEME="ISBN"><METANAME="DC.language"CONTENT="en-US"><METANAME="generator"CONTENT="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><LINKREV="made"HREF="mailto:online-books@oreilly.com"TITLE="Online Books Comments"><LINKREL="up"HREF="ch32_01.htm"TITLE="32. Class Macros"><LINKREL="prev"HREF="ch32_03.htm"TITLE="32.3 Class with m4"><LINKREL="next"HREF="ch32_05.htm"TITLE="32.5 Alphabetized Reference"></HEAD><BODYBGCOLOR="#FFFFFF"TEXT="#000000"><DIVCLASS="htmlnav"><H1><IMGSRC="gifs/smbanner.gif"ALT="sendmail"USEMAP="#srchmap"BORDER="0"></H1><MAPNAME="srchmap"><AREASHAPE="RECT"COORDS="0,0,466,65"HREF="index.htm"ALT="sendmail"><AREASHAPE="RECT"COORDS="467,0,514,18"HREF="../search/ssrch.htm"ALT="Search this book"></MAP><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch32_03.htm"TITLE="32.3 Class with m4"><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 32.3 Class with m4"BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><B><FONTFACE="ARIEL,HELVETICA,HELV,SANSERIF"SIZE="-1">Chapter 32<BR>Class Macros</FONT></B></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch32_05.htm"TITLE="32.5 Alphabetized Reference"><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 32.5 Alphabetized Reference"BORDER="0"></A></TD></TR></TABLE>&nbsp;<HRALIGN="LEFT"WIDTH="515"TITLE="footer"></DIV><DIVCLASS="SECT1"><H2CLASS="sect1"><ACLASS="title"NAME="SML2-CH-32-SECT-4">32.4 Pitfalls</A></H2><ULCLASS="itemizedlist"><LICLASS="listitem"><PCLASS="para"><ACLASS="indexterm"NAME="SML2-CH-32-IX-TROUBLESHOOTING-CLASS-MACROS"></A>Although a class macro name may be any ASCII character (any characterin the range 0x0 to 0x7f), avoid usingany of the nonletter characters.At the very least they create confusing reading,and at worst they may cause <EMCLASS="emphasis">sendmail</EM> to completely misinterpretyour intentions.</P></LI><LICLASS="listitem"><PCLASS="para">Although strings may traditionally be made to contain whitespaceby quoting them, class macros will misinterpret those quotes.For example, &quot;<EMCLASS="emphasis">vax&nbsp;ds1</EM>&quot; wrongly parses intotwo class entries: &quot;<EMCLASS="emphasis">vax</EM> and <EMCLASS="emphasis">ds1</EM>,&quot; with the quotesa part of each.</P></LI><LICLASS="listitem"><PCLASS="para">Duplicate strings are silently ignored. Therefore typos in a list ofstrings may cause an accidentally duplicated entry to be silently excluded.</P></LI><LICLASS="listitem"><PCLASS="para">Avoid creating a new class macro name without first checking tosee whether it has already been used. That is, don't create a listof UUCP hosts within class <CODECLASS="literal">U</CODE>without first checking <EMCLASS="emphasis">both</EM> for preexisting <CODECLASS="literal">CU</CODE> and <CODECLASS="literal">FU</CODE>definitions and for rule-set uses of <CODECLASS="literal">$=U</CODE> and <CODECLASS="literal">$~U</CODE>.It is perfectly legal for the <CODECLASS="literal">$=U</CODE> and <CODECLASS="literal">$~U</CODE> expressions to existin rule sets without a corresponding <CODECLASS="literal">CU</CODE> or <CODECLASS="literal">FU</CODE> definitions.Beware, however, that such empty references still cause <EMCLASS="emphasis">sendmail</EM> tosearch the string pool.</P></LI><LICLASS="listitem"><PCLASS="para">Under V8 <EMCLASS="emphasis">sendmail</EM> you may watch your class macro definitionsbeing formed by using the <CODECLASS="literal">-d37.8</CODE> debugging switch (see <ACLASS="xref"HREF="ch37_05.htm#SML2-CH-37-SECT-5-127"TITLE="">Section 37.5.127, -d37.8</A>).Under other versions of <EMCLASS="emphasis">sendmail</EM> you may only approximatethis information by using the <CODECLASS="literal">-d36.9</CODE> debugging switch(see <ACLASS="xref"HREF="ch37_05.htm#SML2-CH-37-SECT-5-124"TITLE="">Section 37.5.124, -d36.9</A>).</P></LI><LICLASS="listitem"><PCLASS="para">The class macro expansion prefixes <CODECLASS="literal">$=</CODE> and <CODECLASS="literal">$~</CODE> are intendedfor use only in the LHS of rules. If you use those charactersin the RHS of rules, most versions of <EMCLASS="emphasis">sendmail</EM> do not print an error;instead, they silently accept those characters as is.V8 <EMCLASS="emphasis">sendmail</EM>, on the other hand, prints one of the followingmessages as a warning and ignores the entire rule:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">Inappropriate use of $=Inappropriate use of $~</PRE></BLOCKQUOTE></P><PCLASS="para"></P></LI><LICLASS="listitem"><PCLASS="para">The file form's <EMCLASS="emphasis">scanf</EM>(3) pattern can produce unexpectedresults. Remember that the pattern is applied to a line, notto a stream.</P></LI><LICLASS="listitem"><PCLASS="para">No error checking is performed during reads for the<CODECLASS="literal">F</CODE> form of the class configuration command. An errorreading from a file silently causes the rest of that file's contentsto be ignored. An unreported error from a program (one thatsilently returns 0 on both success and failure) is also silentlyignored by <EMCLASS="emphasis">sendmail</EM>.</P></LI><LICLASS="listitem"><PCLASS="para">Be careful in using defined macros in the <CODECLASS="literal">C</CODE> formof class macro definitions.Some versions of <EMCLASS="emphasis">sendmail</EM> store the macro itselfinstead of the expanded value of the macro,leading to unexpected results.V8 <EMCLASS="emphasis">sendmail</EM> correctly stores the expanded macro value.</P></LI></UL><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-36524"></A></P></DIV><DIVCLASS="htmlnav"><P></P><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch32_03.htm"TITLE="32.3 Class with m4"><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 32.3 Class with m4"BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="book"HREF="index.htm"TITLE="sendmail"><IMGSRC="../gifs/txthome.gif"ALT="sendmail"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch32_05.htm"TITLE="32.5 Alphabetized Reference"><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 32.5 Alphabetized Reference"BORDER="0"></A></TD></TR><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172">32.3 Class with m4</TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="index"HREF="index/idx_0.htm"TITLE="Book Index"><IMGSRC="../gifs/index.gif"ALT="Book Index"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172">32.5 Alphabetized Reference</TD></TR></TABLE><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><PCLASS="nav"><FONTSIZE="-1">[ <AHREF="../index.htm"TITLE="The Networking CD Bookshelf">Library Home</A> | <AHREF="../dnsbind/index.htm"TITLE="DNS &amp; BIND">DNS &amp; BIND</A> | <AHREF="../tcpip/index.htm"TITLE="TCP/IP Network Administration">TCP/IP</A> | <AHREF="index.htm"TITLE="sendmail">sendmail</A> | <AHREF="../smdref/index.htm"TITLE="sendmail Desktop Reference">sendmail Reference</A> | <AHREF="../firewall/index.htm"TITLE="Building Internet Firewalls">Firewalls</A> | <AHREF="../puis/index.htm"TITLE="Practical UNIX &amp; Internet Security">Practical Security</A> ]</FONT></P></DIV></BODY></HTML>