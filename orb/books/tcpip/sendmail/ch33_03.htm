<HTML><HEAD><TITLE>[Chapter 33] 33.3 The K Configuration Command</TITLE><METANAME="DC.title"CONTENT="sendmail"><METANAME="DC.creator"CONTENT="Bryan Costales &amp; Eric Allman"><METANAME="DC.publisher"CONTENT="O'Reilly &amp; Associates, Inc."><METANAME="DC.date"CONTENT="1999-01-06T20:22:30Z"><METANAME="DC.type"CONTENT="Text.Monograph"><METANAME="DC.format"CONTENT="text/html"SCHEME="MIME"><METANAME="DC.source"CONTENT="1-56592-222-0"SCHEME="ISBN"><METANAME="DC.language"CONTENT="en-US"><METANAME="generator"CONTENT="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><LINKREV="made"HREF="mailto:online-books@oreilly.com"TITLE="Online Books Comments"><LINKREL="up"HREF="ch33_01.htm"TITLE="33. Database Macros"><LINKREL="prev"HREF="ch33_02.htm"TITLE="33.2 Create Files with makemap"><LINKREL="next"HREF="ch33_04.htm"TITLE="33.4 Use Maps with $( and $) in Rules"></HEAD><BODYBGCOLOR="#FFFFFF"TEXT="#000000"><DIVCLASS="htmlnav"><H1><IMGSRC="gifs/smbanner.gif"ALT="sendmail"USEMAP="#srchmap"BORDER="0"></H1><MAPNAME="srchmap"><AREASHAPE="RECT"COORDS="0,0,466,65"HREF="index.htm"ALT="sendmail"><AREASHAPE="RECT"COORDS="467,0,514,18"HREF="../search/ssrch.htm"ALT="Search this book"></MAP><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch33_02.htm"TITLE="33.2 Create Files with makemap"><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 33.2 Create Files with makemap"BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><B><FONTFACE="ARIEL,HELVETICA,HELV,SANSERIF"SIZE="-1">Chapter 33<BR>Database Macros</FONT></B></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch33_04.htm"TITLE="33.4 Use Maps with $( and $) in Rules"><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 33.4 Use Maps with $( and $) in Rules"BORDER="0"></A></TD></TR></TABLE>&nbsp;<HRALIGN="LEFT"WIDTH="515"TITLE="footer"></DIV><DIVCLASS="SECT1"><H2CLASS="sect1"><ACLASS="title"NAME="SML2-CH-33-SECT-3">33.3 The K Configuration Command</A></H2><PCLASS="para"><ACLASS="indexterm"NAME="SML2-CH-33-IX-K-CONFIGURATION-COMMAND"></A>The <CODECLASS="literal">K</CODE> configuration command is used to associate asymbolic name with a database file. The symbolic namewill later be used in the RHS of rules.The form of the <CODECLASS="literal">K</CODE> command looks like this:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">K<CODECLASS="replaceable"><I>name class args</I></CODE></PRE></BLOCKQUOTE></P><PCLASS="para">The <CODECLASS="replaceable"><I>name</I></CODE> is the symbolic name. The <CODECLASS="replaceable"><I>class</I></CODE> is the kindof database to use (see <ACLASS="xref"HREF="ch33_03.htm#SML2-CH-33-SECT-3-2"TITLE="The class">Section 33.3.2, "The class"</A>).The <CODECLASS="replaceable"><I>args</I></CODE> specifies the location and properties of the database file(see <ACLASS="xref"HREF="ch33_03.htm#SML2-CH-33-SECT-3-3"TITLE="The args">Section 33.3.3, "The args"</A>).We describe each in turn.</P><DIVCLASS="sect2"><H3CLASS="sect2"><ACLASS="title"NAME="SML2-CH-33-SECT-3-1">33.3.1 The name</A></H3><PCLASS="para">The <CODECLASS="replaceable"><I>name</I></CODE> portion of the <CODECLASS="literal">K</CODE> configuration command immediatelyfollows the <CODECLASS="literal">K</CODE>. Whitespace between the <CODECLASS="literal">K</CODE> and the<CODECLASS="replaceable"><I>name</I></CODE> is optional.</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">K <CODECLASS="replaceable"><I>name class args</I></CODE> <ICLASS="lineannotation"><IMGSRC="../chars/uarr.gif"ALT="-^"></I> <ICLASS="lineannotation">optional whitespace</I></PRE></BLOCKQUOTE></P><PCLASS="para">&#13;The name must begin with a letter or digit and may contain onlyletters, digits, and the underscore character. For example:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">K local_hosts      <ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> good</I>K $andCents        <ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> bad</I></PRE></BLOCKQUOTE></P><PCLASS="para">If you begin a <CODECLASS="replaceable"><I>name</I></CODE> with a bad character, the following errorwill be printed and that <CODECLASS="literal">K</CODE> line will be ignored:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen"><ICLASS="lineannotation">configfile</I>: line <CODECLASS="replaceable"><I>num</I></CODE>: readcf: config K line: no map name</PRE></BLOCKQUOTE></P><PCLASS="para">If a bad character appears in the middle of a name, the part preceding thebad character will be taken as the <CODECLASS="replaceable"><I>name</I></CODE>, and the partfollowing the bad character will be taken as the <CODECLASS="replaceable"><I>class</I></CODE>. Forexample, the <CODECLASS="replaceable"><I>name</I></CODE> <CODECLASS="literal">me@home</CODE> will produce this error:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen"><ICLASS="lineannotation">configfile</I>: line <CODECLASS="replaceable"><I>num</I></CODE>: readcf: map me: class home not available</PRE></BLOCKQUOTE></P><PCLASS="para">The case of the letters in <CODECLASS="replaceable"><I>name</I></CODE> does not matter. All names are converted to lowercase before they are stored.</P></DIV><DIVCLASS="sect2"><H3CLASS="sect2"><ACLASS="title"NAME="SML2-CH-33-SECT-3-2">33.3.2 The class</A></H3><PCLASS="para">Recall that the <CODECLASS="replaceable"><I>class</I></CODE> portion of the <CODECLASS="literal">K</CODE> configurationcommand follows the <CODECLASS="literal">name</CODE>:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">K<CODECLASS="replaceable"><I>name class args</I></CODE></PRE></BLOCKQUOTE></P><PCLASS="para">Note that whitespace between the <CODECLASS="literal">name</CODE> and the <CODECLASS="literal">class</CODE>may be a joined indented line, which allows commenting and improvesreadability:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">K<CODECLASS="replaceable"><I>name        </I></CODE># Why this name<CODECLASS="replaceable"><I>        class     </I></CODE># Why this class<CODECLASS="replaceable"><I>        args      </I></CODE># and so on</PRE></BLOCKQUOTE></P><PCLASS="para">The <CODECLASS="literal">class</CODE> is the database type. It must beone of the classes listed in<ACLASS="xref"HREF="ch33_03.htm#SML2-CH-33-TAB-2"TITLE="Possible K Command Classes">Table 33.3</A>.<ACLASS="indexterm"NAME="AUTOID-37295"></A></P><TABLECLASS="table"><CAPTIONCLASS="table"><ACLASS="title"NAME="SML2-CH-33-TAB-2">Table 33.3: Possible K Command Classes</A></CAPTION><THEADCLASS="thead"><TRCLASS="row"VALIGN="TOP"><THCLASS="entry"ALIGN="LEFT"ROWSPAN="1"COLSPAN="1">Class</TH><THCLASS="entry"ALIGN="LEFT"ROWSPAN="1"COLSPAN="1"></TH><THCLASS="entry"ALIGN="LEFT"ROWSPAN="1"COLSPAN="1">Version</TH><THCLASS="entry"ALIGN="LEFT"ROWSPAN="1"COLSPAN="1">Description</TH></TR></THEAD><TBODYCLASS="tbody"><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">btree</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch33_08.htm#SML2-CH-33-SECT-8-1"TITLE="">Section 33.8.1</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">V8.1 and above</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><PCLASS="para">Berkeley's <EMCLASS="emphasis">db</EM> form of database</P></TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">bestmx</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch33_08.htm#SML2-CH-33-SECT-8-2"TITLE="">Section 33.8.2, bestmx</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">V8.7 and above</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><PCLASS="para">Look up the best MX record for a host</P></TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">dbm</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch33_08.htm#SML2-CH-33-SECT-8-3"TITLE="">Section 33.8.3</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">V8.1 and above</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><PCLASS="para">Really <EMCLASS="emphasis">ndbm</EM> supplied with most versions of UNIX</P></TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">dequote</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch33_08.htm#SML2-CH-33-SECT-8-4"TITLE="">Section 33.8.4, dequote</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">V8.1 and above</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><PCLASS="para">A pseudo map for removing quotation marks</P></TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">hash</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch33_08.htm#SML2-CH-33-SECT-8-5"TITLE="">Section 33.8.5, hash</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">V8.1 and above</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><PCLASS="para">Berkeley's <EMCLASS="emphasis">db</EM> form of database</P></TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">hesiod</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch33_08.htm#SML2-CH-33-SECT-8-6"TITLE="">Section 33.8.6</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">V8.7 and above</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><PCLASS="para">MIT network user authentication services</P></TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">host</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch33_04.htm#SML2-CH-33-SECT-4-3"TITLE="$[ and $]: A Special Case">Section 33.4.3, "$[ and $]: A Special Case"</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">V8.1 and above</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><PCLASS="para">Internal table to store and look up hostnames</P></TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">implicit</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch33_08.htm#SML2-CH-33-SECT-8-8"TITLE="">Section 33.8.8, implicit</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">V8.1 and above</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><PCLASS="para">Search for an <EMCLASS="emphasis">aliases</EM> database file</P></TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">ldapx</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch33_08.htm#SML2-CH-33-SECT-8-9"TITLE="">Section 33.8.9</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">V8.8 and above</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><PCLASS="para">The Lightweight Directory Access Protocol</P></TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">netinfo</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch33_08.htm#SML2-CH-33-SECT-8-10"TITLE="">Section 33.8.10</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">V8.7 and above</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><PCLASS="para">NeXT Computers network information services</P></TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">nis</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch33_08.htm#SML2-CH-33-SECT-8-11"TITLE="">Section 33.8.11</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">V8.1 and above</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><PCLASS="para">Sun's Network Information Services (NIS)</P></TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">nisplus</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch33_08.htm#SML2-CH-33-SECT-8-12"TITLE="">Section 33.8.12</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">V8.7 and above</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><PCLASS="para">Sun's newer Network Information Services (NIS+)</P></TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">null</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch33_08.htm#SML2-CH-33-SECT-8-13"TITLE="">Section 33.8.13, null</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">V8.7 and above</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><PCLASS="para">Provide a never found service</P></TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">program</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch33_08.htm#SML2-CH-33-SECT-8-14"TITLE="">Section 33.8.14, program</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">V8.7 and above</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><PCLASS="para">Run an external program to look up the key</P></TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">sequence</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch33_08.htm#SML2-CH-33-SECT-8-15"TITLE="">Section 33.8.15, sequence</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">V8.7 and above</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><PCLASS="para">Search a series of maps</P></TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">stab</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch33_08.htm#SML2-CH-33-SECT-8-16"TITLE="">Section 33.8.16, stab</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">V8.1 and above</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><PCLASS="para">Internally load aliases into the symbol table</P></TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">switch</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch33_08.htm#SML2-CH-33-SECT-8-17"TITLE="">Section 33.8.17, switch</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">V8.7 and above</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><PCLASS="para">Internal hook to auto-build sequences</P></TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">text</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch33_08.htm#SML2-CH-33-SECT-8-18"TITLE="">Section 33.8.18, text</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">V8.7 and above</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><PCLASS="para">Look up in flat text files</P></TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">userdb</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch33_08.htm#SML2-CH-33-SECT-8-19"TITLE="">Section 33.8.19, userdb</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">V8.7 and above</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><PCLASS="para">Look up in the User Database</P></TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">user</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch33_08.htm#SML2-CH-33-SECT-8-20"TITLE="">Section 33.8.20, user</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">V8.7 and above</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><PCLASS="para">Look up local passwd information</P></TD></TR></TBODY></TABLE><PCLASS="para">All of these classes are described in <ACLASS="xref"HREF="ch33_08.htm"TITLE="Alphabetized Reference">Section 33.8, "Alphabetized Reference"</A>  at the endof this chapter. If the <CODECLASS="replaceable"><I>class</I></CODE> is not one of those listed,or if support for the <CODECLASS="replaceable"><I>class</I></CODE> was not compiled in, the following erroris printed and the <CODECLASS="literal">K</CODE> command is ignored:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen"><ICLASS="lineannotation">configfile</I>: line <CODECLASS="replaceable"><I>num</I></CODE>: readcf: map mehome: class <ICLASS="lineannotation">badclass</I> not available</PRE></BLOCKQUOTE></P><PCLASS="para">The case of the <CODECLASS="replaceable"><I>class</I></CODE> is ignored by <EMCLASS="emphasis">sendmail</EM>. That is,<CODECLASS="literal">hash</CODE>, <CODECLASS="literal">Hash</CODE>, and <CODECLASS="literal">HASH</CODE> are all the same.</P></DIV><DIVCLASS="sect2"><H3CLASS="sect2"><ACLASS="title"NAME="SML2-CH-33-SECT-3-3">33.3.3 The args</A></H3><PCLASS="para">The <CODECLASS="replaceable"><I>args</I></CODE> of the <CODECLASS="literal">K</CODE> configuration command follow symbolic name and class type:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">K<CODECLASS="replaceable"><I>name class args</I></CODE></PRE></BLOCKQUOTE></P><PCLASS="para">The <CODECLASS="replaceable"><I>args</I></CODE> specify(among other things) the location of the database file or the nameof a network map. The <CODECLASS="literal">args</CODE>is like a miniature command line, and its general form lookslike this:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen"><CODECLASS="replaceable"><I>switches file_or_map</I></CODE></PRE></BLOCKQUOTE></P><PCLASS="para">The <CODECLASS="replaceable"><I>switches</I></CODE> are letters prefixed with a <CODECLASS="literal">-</CODE>character that modify the use of the database. (We'll discussthem in the next section.) The <CODECLASS="replaceable"><I>file_or_map</I></CODE>is the location of the database file or the name of a networkmap. The <CODECLASS="replaceable"><I>file_or_map</I></CODE> should exclude the <EMCLASS="emphasis">.pag</EM> and <EMCLASS="emphasis">.dir</EM>suffixes for <EMCLASS="emphasis">dbm</EM> class files and excludethe <EMCLASS="emphasis">.db</EM> suffix for <EMCLASS="emphasis">hash</EM> or <EMCLASS="emphasis">btree</EM> class files.</P><PCLASS="para">A database or map is opened for reading when the configurationfile is processed. If the <CODECLASS="replaceable"><I>file</I></CODE> cannot be opened (andthe <CODECLASS="literal">-o</CODE> is omitted; see <ACLASS="xref"HREF="ch33_03.htm#SML2-CH-33-SECT-3-4-8"TITLE="-o  the database file is optional (V8.1 and above)">Section 33.3.4.8, "-o  the database file is optional (V8.1 and above)"</A>), an appropriate erroris printed. The <CODECLASS="replaceable"><I>file_or_map</I></CODE> should be an absolute pathnameof a file (such as <EMCLASS="emphasis">/etc/uuhosts</EM>)or a literal network map name (such as <EMCLASS="emphasis">hosts.byname</EM>).An <CODECLASS="literal">nis</CODE> map specification can include a domain:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">map@domain</PRE></BLOCKQUOTE></P><PCLASS="para">Relative filenames (names that omit a leading <CODECLASS="literal">/</CODE>) are interpretedas relative to the current directory of the process that invoked<EMCLASS="emphasis">sendmail</EM> and should never be used.</P></DIV><DIVCLASS="sect2"><H3CLASS="sect2"><ACLASS="title"NAME="SML2-CH-33-SECT-3-4">33.3.4 The switches</A></H3><PCLASS="para">The <CODECLASS="replaceable"><I>switches</I></CODE> must follow the <CODECLASS="replaceable"><I>class</I></CODE> and precedethe <CODECLASS="replaceable"><I>file_or_map</I></CODE>:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">K<CODECLASS="replaceable"><I>name class switches file_or_map</I></CODE></PRE></BLOCKQUOTE></P><PCLASS="para">If any <CODECLASS="replaceable"><I>switches</I></CODE> follow <CODECLASS="replaceable"><I>file_or_map</I></CODE>, they are silently ignored.[3]All <CODECLASS="replaceable"><I>switches</I></CODE> begin with a <CODECLASS="literal">-</CODE> character andare listed in<ACLASS="xref"HREF="ch33_03.htm#SML2-CH-33-TAB-3"TITLE="K Command Switches">Table 33.4</A>.</P><BLOCKQUOTECLASS="footnote"><PCLASS="para">[3] This is true as of version 8.8.4. Future versionsmay change the semantics of the <CODECLASS="literal">K</CODE> line such thatswitches may follow.</P></BLOCKQUOTE><TABLECLASS="table"><CAPTIONCLASS="table"><ACLASS="title"NAME="SML2-CH-33-TAB-3">Table 33.4: K Command Switches</A></CAPTION><THEADCLASS="thead"><TRCLASS="row"VALIGN="TOP"><THCLASS="entry"ALIGN="LEFT"ROWSPAN="1"COLSPAN="1">Switch</TH><THCLASS="entry"ALIGN="LEFT"ROWSPAN="1"COLSPAN="1"></TH><THCLASS="entry"ALIGN="LEFT"ROWSPAN="1"COLSPAN="1">Version</TH><THCLASS="entry"ALIGN="LEFT"ROWSPAN="1"COLSPAN="1">Description</TH></TR></THEAD><TBODYCLASS="tbody"><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><CODECLASS="literal">-A</CODE></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch33_03.htm#SML2-CH-33-SECT-3-4-1"TITLE="-A  append values for duplicate keys (V8.7 and above)">Section 33.3.4.1, "-A  append values for duplicate keys (V8.7 and above)"</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">V8.7 and above</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Append values for duplicate keys</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><CODECLASS="literal">-a</CODE></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch33_03.htm#SML2-CH-33-SECT-3-4-2"TITLE="-a  append tag on successful match (V8.1 and above)">Section 33.3.4.2, "-a  append tag on successful match (V8.1 and above)"</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">V8.1 and above</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Append tag on successful match</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><CODECLASS="literal">-f</CODE></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch33_03.htm#SML2-CH-33-SECT-3-4-3"TITLE="-f  don't fold keys to lowercase (V8.1 and above)">Section 33.3.4.3, "-f  don't fold keys to lowercase (V8.1 and above)"</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">V8.1 and above</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Don't fold keys to lowercase</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><CODECLASS="literal">-k</CODE></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch33_03.htm#SML2-CH-33-SECT-3-4-4"TITLE="-k  specify column for key (V8.7 and above)">Section 33.3.4.4, "-k  specify column for key (V8.7 and above)"</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">V8.7 and above</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Specify column for key</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><CODECLASS="literal">-m</CODE></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch33_03.htm#SML2-CH-33-SECT-3-4-5"TITLE="-m  suppress replacement on match (V8.1 and above)">Section 33.3.4.5, "-m  suppress replacement on match (V8.1 and above)"</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">V8.1 and above</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Suppress replacement on match</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><CODECLASS="literal">-N</CODE></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch33_03.htm#SML2-CH-33-SECT-3-4-6"TITLE="-N  append a null byte to all keys (V8.1 and above)">Section 33.3.4.6</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">V8.1 and above</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Append a null byte to all keys</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><CODECLASS="literal">-O</CODE></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch33_03.htm#SML2-CH-33-SECT-3-4-7"TITLE="-O  adaptive versus never add a null (V8.2 and above)">Section 33.3.4.7, "-O  adaptive versus never add a null (V8.2 and above)"</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">V8.2 and above</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Adaptive versus never add a null</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><CODECLASS="literal">-o</CODE></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch33_03.htm#SML2-CH-33-SECT-3-4-8"TITLE="-o  the database file is optional (V8.1 and above)">Section 33.3.4.8</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">V8.1 and above</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">The database file is optional</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><CODECLASS="literal">-q</CODE></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch33_03.htm#SML2-CH-33-SECT-3-4-9"TITLE="-q  don't strip quotes from key (V8.7 and above)">Section 33.3.4.9, "-q  don't strip quotes from key (V8.7 and above)"</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">V8.7 and above</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Don't strip quotes from key</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><CODECLASS="literal">-s</CODE></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch33_03.htm#SML2-CH-33-SECT-3-4-10"TITLE="-s  space replacement character (V8.7 and above)">Section 33.3.4.10, "-s  space replacement character (V8.7 and above)"</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">V8.7 and above</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Space replacement character</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><CODECLASS="literal">-v</CODE></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch33_03.htm#SML2-CH-33-SECT-3-4-11"TITLE="-v  specify the value's column (V8.7 and above)">Section 33.3.4.11, "-v  specify the value's column (V8.7 and above)"</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">V8.7 and above</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Specify the value's column</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><CODECLASS="literal">-z</CODE></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch33_03.htm#SML2-CH-33-SECT-3-4-12"TITLE="-z  specify the column delimiter (V8.7 and above)">Section 33.3.4.12, "-z  specify the column delimiter (V8.7 and above)"</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">V8.7 and above</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Specify the column delimiter</TD></TR></TBODY></TABLE><PCLASS="para">If a switch other than those listed is specified,that switch is silently ignored.</P><PCLASS="para">Not all switches work with all classes. Some classes use manyswitches; others use none. The switches that are used by each classare shown in <ACLASS="xref"HREF="ch33_03.htm#SML2-CH-33-TAB-4"TITLE="Which Class Uses Which Switches">Table 33.5</A>.</P><TABLECLASS="table"><CAPTIONCLASS="table"><ACLASS="title"NAME="SML2-CH-33-TAB-4">Table 33.5: Which Class Uses Which Switches</A></CAPTION><THEADCLASS="thead"><TRCLASS="row"VALIGN="TOP"><THCLASS="entry"ALIGN="LEFT"ROWSPAN="1"COLSPAN="1">Class</TH><THCLASS="entry"ALIGN="LEFT"ROWSPAN="1"COLSPAN="1">Switches</TH></TR></THEAD><TBODYCLASS="tbody"><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">btree   </TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><CODECLASS="literal">-A -a -f    -m -N -O -o -q</CODE></TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">bestmx  </TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><CODECLASS="literal">   -a                   -q</CODE></TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">dbm     </TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><CODECLASS="literal">-A -a -f    -m -N -O -o -q</CODE></TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">dequote </TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><CODECLASS="literal">   -a                      -s</CODE></TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">hash    </TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><CODECLASS="literal">-A -a -f    -m -N -O -o -q</CODE></TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">hesiod  </TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><CODECLASS="literal">   -a       -m       -o -q</CODE></TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">host    </TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><CODECLASS="literal">   -a       -m          -q</CODE></TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">implicit</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><CODECLASS="literal">                        -q</CODE></TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">ldapx   </TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><CODECLASS="literal">   -a -f    -m -N -O -o -q</CODE></TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">netinfo </TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><CODECLASS="literal">   -a    -k -m          -q    -v</CODE></TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">nisplus </TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><CODECLASS="literal">   -a -f -k -m       -o -q    -v -z</CODE></TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">nis     </TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><CODECLASS="literal">   -a -f    -m       -o -q</CODE></TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">null    </TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"></TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">program </TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><CODECLASS="literal">   -a       -m       -o -q</CODE></TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">sequence</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"></TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">stab    </TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><CODECLASS="literal">                        -q</CODE></TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">switch  </TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><CODECLASS="literal">                        -q</CODE></TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">text    </TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><CODECLASS="literal">   -a -f -k -m       -o -q    -v -z</CODE></TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">userdb  </TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><CODECLASS="literal">   -a -f    -m          -q</CODE></TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">user    </TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><CODECLASS="literal">   -a       -m          -q    -v</CODE></TD></TR></TBODY></TABLE><PCLASS="para">Some classes of databases use special switches that are not availableto the broad class of databases. Others redefine the meaning of someswitches. These special switches are shownin<ACLASS="xref"HREF="ch33_03.htm#SML2-CH-33-TAB-5"TITLE="Specialty Class Switches">Table 33.6</A>.Future versions of <EMCLASS="emphasis">sendmail</EM> may be changed in such a way that itmay be possible to have only one list.</P><TABLECLASS="table"><CAPTIONCLASS="table"><ACLASS="title"NAME="SML2-CH-33-TAB-5">Table 33.6: Specialty Class Switches</A></CAPTION><THEADCLASS="thead"><TRCLASS="row"VALIGN="TOP"><THCLASS="entry"ALIGN="LEFT"ROWSPAN="1"COLSPAN="1">Switch</TH><THCLASS="entry"ALIGN="LEFT"ROWSPAN="1"COLSPAN="1">Class or Vendor</TH><THCLASS="entry"ALIGN="LEFT"ROWSPAN="1"COLSPAN="1">Description</TH></TR></THEAD><TBODYCLASS="tbody"><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><CODECLASS="literal">-b</CODE></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">ldapx</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><PCLASS="para">Base from which to begin the search</P></TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><CODECLASS="literal">-d</CODE></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Sun</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><PCLASS="para">Use domain wide information (see <ACLASS="xref"HREF="appd_03.htm"TITLE="K Command's -d switch">Section 38.16, "K Command's -d switch"</A>)</P></TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><CODECLASS="literal">-h</CODE></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">ldapx</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><PCLASS="para">Host that serves this network database</P></TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><CODECLASS="literal">-l</CODE></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">ldapx</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><PCLASS="para">Time limit to timeout connection</P></TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><CODECLASS="literal">-n</CODE></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">ldapx</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><PCLASS="para">Retrieve attribute names only, not values</P></TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><CODECLASS="literal">-p</CODE></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">ldapx</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><PCLASS="para">Port to use when connecting to host</P></TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><CODECLASS="literal">-R</CODE></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">ldapx</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><PCLASS="para">Don't auto chase referrals</P></TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><CODECLASS="literal">-s</CODE></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">ldapx</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><PCLASS="para">Search scope of &quot;base,&quot; &quot;one,&quot; or &quot;sub&quot;</P></TD></TR></TBODY></TABLE><DIVCLASS="sect3"><H4CLASS="sect3"><ACLASS="title"NAME="SML2-CH-33-SECT-3-4-1">33.3.4.1 -A  append values for duplicate keys (V8.7 and above)</A></H4><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-37771"></A><ACLASS="indexterm"NAME="AUTOID-37773"></A>Ordinarily, when <EMCLASS="emphasis">sendmail</EM> builds (rebuilds) an aliases database,it objects to duplicate keys on the left of the colon:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">staff:  billstaff:  leopold        <ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> this is an error</I></PRE></BLOCKQUOTE></P><PCLASS="para">&#13;But sometimes, in automating for example, such duplicates are necessary.In such instances, the <CODECLASS="literal">-A</CODE> switch can be used with the<CODECLASS="literal">AliasFile</CODE> (<CODECLASS="literal">A</CODE>) option (see <ACLASS="xref"HREF="ch34_08.htm#SML2-CH-34-SECT-8-1"TITLE="">Section 34.8.1, AliasFile (A)</A>)to cause duplicates to be silently appended:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">staff:  billstaff:  leopold<ICLASS="lineannotation">... silently modified by sendmail to internally become</I>staff:  bill, leopold</PRE></BLOCKQUOTE></P><PCLASS="para">Note that this process is further illustrated in <ACLASS="xref"HREF="ch24_04.htm#SML2-CH-24-SECT-4-4"TITLE="Duplicate Entries and Automation">Section 24.4.4, "Duplicate Entries and Automation"</A>.</P><PCLASS="para">The <CODECLASS="literal">-A</CODE> database switch is useful only with alias files, becausethose are the only files that <EMCLASS="emphasis">sendmail</EM> rebuilds on its own.</P></DIV><DIVCLASS="sect3"><H4CLASS="sect3"><ACLASS="title"NAME="SML2-CH-33-SECT-3-4-2">33.3.4.2 -a  append tag on successful match (V8.1 and above)</A></H4><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-37796"></A>When a key is looked up in a database (from inside the <CODECLASS="literal">$(</CODE> and<CODECLASS="literal">$)</CODE> operators of the RHS of rules), a successfully foundkey is replaced by its data. If the <CODECLASS="literal">-a</CODE> switch isgiven, the text following that switch, up to the first delimitingwhitespace character, is appended to the replacement data. For example:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">-a              <ICLASS="lineannotation">appends</I>  <ICLASS="lineannotation">nothing</I>-a.             <ICLASS="lineannotation">appends</I>  .-a,MAGICTOKEN   <ICLASS="lineannotation">appends</I>  ,MAGICTOKEN</PRE></BLOCKQUOTE></P><PCLASS="para">The text to be appended is taken literally. Quotation marks andbackslashed characters are included without interpretation, sowhitespace cannot be included in that text. Because the rewrittenRHS is normalized as an address, special address expressions(such as parentheses) should be avoided.The use of appended text is one of two methods used for recognizinga successful lookup in rules. We'll discuss the other, <CODECLASS="literal">$:</CODE>, in <ACLASS="xref"HREF="ch33_04.htm#SML2-CH-33-SECT-4-1"TITLE="Specify a Default with $:">Section 33.4.1, "Specify a Default with $:"</A>.</P></DIV><DIVCLASS="sect3"><H4CLASS="sect3"><ACLASS="title"NAME="SML2-CH-33-SECT-3-4-3">33.3.4.3 -f  don't fold keys to lowercase (V8.1 and above)</A></H4><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-37813"></A><ACLASS="indexterm"NAME="AUTOID-37815"></A>Ordinarily, <EMCLASS="emphasis">sendmail</EM> will normalize a key to lowercasebefore looking it up in the database. If the keys in the databaseare case-sensitive (&quot;TEX&quot; is considered different from &quot;tex,&quot; for example),the <CODECLASS="literal">-f</CODE> switch should be used to prevent this normalization.Note that if the <CODECLASS="literal">-f</CODE> switch is omitted (the default), the database must have been created with all lowercase keys (also the default).</P></DIV><DIVCLASS="sect3"><H4CLASS="sect3"><ACLASS="title"NAME="SML2-CH-33-SECT-3-4-4">33.3.4.4 -k  specify column for key (V8.7 and above)</A></H4><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-37824"></A><ACLASS="indexterm"NAME="AUTOID-37826"></A>Beginning with V8.7, <EMCLASS="emphasis">sendmail</EM> began to support a flat text-fileform of database. The <EMCLASS="emphasis">/etc/hosts</EM> file is an example ofsuch a flat file, in that it is organized in a line-by-line manner:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">123.45.67.89      here.our.domain</PRE></BLOCKQUOTE></P><PCLASS="para">When such files are read as databases (with the <CODECLASS="literal">text</CODE> class;see <ACLASS="xref"HREF="ch33_08.htm#SML2-CH-33-SECT-8-18"TITLE="">Section 33.8.18</A>), you need to specify which column is thekey and which is the value.</P><PCLASS="para">For <CODECLASS="literal">nisplus</CODE> and <CODECLASS="literal">netinfo</CODE> maps, the <CODECLASS="literal">-k</CODE> switch specifies thename (text) of the desired column.</P><PCLASS="para">When the <CODECLASS="literal">-k</CODE> switch specifies which column is the key, its absencedefaults to 0 for the <CODECLASS="literal">text</CODE> class and tothe name of the zeroth column for the <CODECLASS="literal">nisplus</CODE> class.Note that the numbered columns are indexed beginning with 0 for the firstand 1 for the second. See also <CODECLASS="literal">-v</CODE> (see <ACLASS="xref"HREF="ch33_03.htm#SML2-CH-33-SECT-3-4-11"TITLE="-v  specify the value's column (V8.7 and above)">Section 33.3.4.11</A>)for the value's column (<CODECLASS="literal">text</CODE> and <CODECLASS="literal">nisplus</CODE> only)and <CODECLASS="literal">-z</CODE> (see <ACLASS="xref"HREF="ch33_03.htm#SML2-CH-33-SECT-3-4-12"TITLE="-z  specify the column delimiter (V8.7 and above)">Section 33.3.4.12</A>) for the column delimiter(<CODECLASS="literal">text</CODE> only).</P></DIV><DIVCLASS="sect3"><H4CLASS="sect3"><ACLASS="title"NAME="SML2-CH-33-SECT-3-4-5">33.3.4.5 -m  suppress replacement on match (V8.1 and above)</A></H4><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-37853"></A>Ordinarily, a successful lookup in a database or map causes thekey to be replaced by its value. When the intention is to merely verifythat the key exists (not replace it), the <CODECLASS="literal">-m</CODE> switchcan be used to suppress replacement.For example, the values that are returned from the <EMCLASS="emphasis">hosts.byname</EM>NIS map are not generally useful (they contain multiple hostnames).In looking up a key in this map (with <CODECLASS="literal">$(</CODE> and <CODECLASS="literal">$)</CODE>;see <ACLASS="xref"HREF="ch33_04.htm"TITLE="Use Maps with $( and $) in Rules">Section 33.4</A>), the <CODECLASS="literal">-m</CODE> switch preventsthose multiple names from wrongly replacing the single hostnamein the key. Note that the <CODECLASS="literal">-a</CODE> (see <ACLASS="xref"HREF="ch33_03.htm#SML2-CH-33-SECT-3-4-2"TITLE="-a  append tag on successful match (V8.1 and above)">Section 33.3.4.2</A>)can still be used to append a suffix to a successful lookup.Also, the <CODECLASS="literal">$:</CODE><CODECLASS="replaceable"><I>default</I></CODE> (see <ACLASS="xref"HREF="ch33_04.htm#SML2-CH-33-SECT-4-1"TITLE="Specify a Default with $:">Section 33.4.1</A>)is still used if the lookup fails.</P></DIV><DIVCLASS="sect3"><H4CLASS="sect3"><ACLASS="title"NAME="SML2-CH-33-SECT-3-4-6">33.3.4.6 -N  append a null byte to all keys (V8.1 and above)</A></H4><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-37869"></A>If a database was created with <EMCLASS="emphasis">makemap</EM>'s <CODECLASS="literal">-N</CODE> switch(see <ACLASS="xref"HREF="ch33_02.htm#SML2-CH-33-SECT-2-1-3"TITLE="-N  append a null byte to all keys">Section 33.2.1.3</A>) to includethe terminating zero byte with each key, this <CODECLASS="literal">K</CODE> configurationcommand <CODECLASS="literal">-N</CODE> switch may be specified to force all lookups toalso include a zero byte. Note that <CODECLASS="literal">-N</CODE> is not needed for the<CODECLASS="literal">nis</CODE> class and, if included, is ignored. See also <CODECLASS="literal">-O</CODE> below.</P></DIV><DIVCLASS="sect3"><H4CLASS="sect3"><ACLASS="title"NAME="SML2-CH-33-SECT-3-4-7">33.3.4.7 -O  adaptive versus never add a null (V8.2 and above)</A></H4><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-37882"></A>If neither <CODECLASS="literal">-N</CODE> nor <CODECLASS="literal">-O</CODE> is specified,<EMCLASS="emphasis">sendmail</EM> uses an adaptive algorithm to decidewhether or not to look for the terminating zero byte.The algorithm starts by accepting either. If the first key looked upis found to end with a terminating zero byte, the algorithmwill thereafter look only for keys with terminating zero bytes.If the first key that is looked up is found to not end with a terminatingzero byte, the algorithm will thereafter look only for keys withoutterminating zero bytes.</P><PCLASS="para">If this <CODECLASS="literal">-O</CODE> switch is specified, <EMCLASS="emphasis">sendmail</EM> never tries a zero byte, whichcan speed matches.Note that if both <CODECLASS="literal">-N</CODE> and <CODECLASS="literal">-O</CODE> are specified,<EMCLASS="emphasis">sendmail</EM> will never try to match at all,thus causing all lookups to appear to fail.</P></DIV><DIVCLASS="sect3"><H4CLASS="sect3"><ACLASS="title"NAME="SML2-CH-33-SECT-3-4-8">33.3.4.8 -o  the database file is optional (V8.1 and above)</A></H4><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-37896"></A><ACLASS="indexterm"NAME="AUTOID-37898"></A>Ordinarily, <EMCLASS="emphasis">sendmail</EM> will complain if a database file cannotbe opened for reading. If the presence of a database file is optional(as it may be on certain machines), the <CODECLASS="literal">-o</CODE>switch should be used to tell <EMCLASS="emphasis">sendmail</EM> that the database is optional.Note that if a database is optional and cannot be opened, all lookupswill silently fail for rules that use that database.</P></DIV><DIVCLASS="sect3"><H4CLASS="sect3"><ACLASS="title"NAME="SML2-CH-33-SECT-3-4-9">33.3.4.9 -q  don't strip quotes from key (V8.7 and above)</A></H4><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-37906"></A><ACLASS="indexterm"NAME="AUTOID-37908"></A><ACLASS="indexterm"NAME="AUTOID-37911"></A><ACLASS="indexterm"NAME="AUTOID-37914"></A><ACLASS="indexterm"NAME="AUTOID-37917"></A>Ordinarily, <EMCLASS="emphasis">sendmail</EM> strips all the nonescaped quotation marks(those not prefixed with a backslash)from a key before looking it up.  For example, the following key:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">&quot;Bob \&quot;bigboy\&quot; Roberts \(esq\)&quot;@bob.com</PRE></BLOCKQUOTE></P><PCLASS="para">will have its nonescaped quotation marks removed to end up like this:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">Bob &quot;bigboy&quot; Roberts (esq)@bob.com</PRE></BLOCKQUOTE></P><PCLASS="para">Note that all escaped characters are de-escaped (have the backslash removed)during this process.</P><PCLASS="para">When quotation marks and escaped characters need to be preservedin a key before it is looked up, you can use the <CODECLASS="literal">-q</CODE> switchwith the <CODECLASS="literal">K</CODE> configuration command. The <CODECLASS="literal">-q</CODE> switchsuppresses dequoting and de-escaping.</P></DIV><DIVCLASS="sect3"><H4CLASS="sect3"><ACLASS="title"NAME="SML2-CH-33-SECT-3-4-10">33.3.4.10 -s  space replacement character (V8.7 and above)</A></H4><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-37934"></A><ACLASS="indexterm"NAME="AUTOID-37937"></A>The <CODECLASS="literal">dequote</CODE> class (see <ACLASS="xref"HREF="ch33_08.htm#SML2-CH-33-SECT-8-4"TITLE="">Section 33.8.4</A>) refuses toremove quotation marks if doing so will result in an illegal address.For example, internal space characters are illegal in addresses:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">&quot;a b&quot;          <ICLASS="lineannotation"> becomes <IMGSRC="../chars/rarr.gif"ALT="-&gt;"></I>      &quot;a b&quot;</PRE></BLOCKQUOTE></P><PCLASS="para">The <CODECLASS="literal">-s</CODE> switch causes all the quoted space characters to bechanged into a character that you specify just before the dequoting process.</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">Kdequote dequote -s+</PRE></BLOCKQUOTE></P><PCLASS="para">Here, we specify that quoted strings will have quoted spaces converted intoa plus before dequoting. Therefore, the above conversion becomes the following:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">&quot;a b&quot;          <ICLASS="lineannotation"> becomes <IMGSRC="../chars/rarr.gif"ALT="-&gt;"></I>      a+b</PRE></BLOCKQUOTE></P><PCLASS="para">The <CODECLASS="literal">-s</CODE> switch is only of use with the <CODECLASS="literal">dequote</CODE> class.Note that the <CODECLASS="literal">lpadx</CODE> classuses the <CODECLASS="literal">-s</CODE> switch differently (see <ACLASS="xref"HREF="ch33_03.htm#SML2-CH-33-TAB-5"TITLE="Specialty Class Switches">Table 33.6</A>in <ACLASS="xref"HREF="ch33_03.htm#SML2-CH-33-SECT-3-4"TITLE="The switches">Section 33.3.4, "The switches"</A>).</P></DIV><DIVCLASS="sect3"><H4CLASS="sect3"><ACLASS="title"NAME="SML2-CH-33-SECT-3-4-11">33.3.4.11 -v  specify the value's column (V8.7 and above)</A></H4><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-37962"></A><ACLASS="indexterm"NAME="AUTOID-37964"></A>The manner in which the key and its value are visually displayedin flat, sequential, text files and certain network services, may notbe directly suitable for use in maps.A <CODECLASS="literal">text</CODE> class file, for example <EMCLASS="emphasis">/etc/hosts</EM>,may display the key on the right and the value on the left:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">123.45.67.89      here.our.domain</PRE></BLOCKQUOTE></P><PCLASS="para">For such circumstances the <CODECLASS="literal">-v</CODE> switch can be used withthe <CODECLASS="literal">K</CODE> command to specify the column or item that willbe returned as the value when a key is matched. For example:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">Kaddr text -k1 -v0 /etc/hosts</PRE></BLOCKQUOTE></P><PCLASS="para">For <CODECLASS="literal">nisplus</CODE> and <CODECLASS="literal">netinfo</CODE> maps, the <CODECLASS="literal">-v</CODE> switch specifies thename (text) of the value's column.</P><PCLASS="para">This <CODECLASS="literal">-v</CODE> switch specifies which column is the value to return. If it isomitted, it defaults to 0 for the <CODECLASS="literal">text</CODE> class and tothe last named column for the <CODECLASS="literal">nisplus</CODE> class.Note that text columns are indexed beginning with 0 for the firstand 1 for the second. See also <CODECLASS="literal">-k</CODE> (see <ACLASS="xref"HREF="ch33_03.htm#SML2-CH-33-SECT-3-4-4"TITLE="-k  specify column for key (V8.7 and above)">Section 33.3.4.4</A>)for the key's column and <CODECLASS="literal">-z</CODE> (see <ACLASS="xref"HREF="ch33_03.htm#SML2-CH-33-SECT-3-4-12"TITLE="-z  specify the column delimiter (V8.7 and above)">Section 33.3.4.12</A>) forthe column delimiter.</P></DIV><DIVCLASS="sect3"><H4CLASS="sect3"><ACLASS="title"NAME="SML2-CH-33-SECT-3-4-12">33.3.4.12 -z  specify the column delimiter (V8.7 and above)</A></H4><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-37990"></A><ACLASS="indexterm"NAME="AUTOID-37992"></A>Flat, sequential text files have columns of information delimitedfrom each other with a variety of characters:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">123.45.67.89      here.our.domain          <ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> /etc/hosts uses a whitespace</I>nobody:*:65534:65534::/:                   <ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> /etc/passwd uses a colon</I></PRE></BLOCKQUOTE></P><PCLASS="para">The <CODECLASS="literal">-z</CODE> switch can be used to specify a delimiter whenever thedefault delimiter of whitespace is not appropriate. In the caseof the <EMCLASS="emphasis">/etc/passwd</EM> file, a database declaration mightlook like this:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">Kuid text -z: -k2 -v0 /etc/passwd  # map to convert uid to login name</PRE></BLOCKQUOTE></P><PCLASS="para">The default is whitespace for the <CODECLASS="literal">text</CODE> class. It isa comma for the <CODECLASS="literal">netinfo</CODE> class.<ACLASS="indexterm"NAME="AUTOID-38007"></A></P></DIV></DIV></DIV><DIVCLASS="htmlnav"><P></P><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch33_02.htm"TITLE="33.2 Create Files with makemap"><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 33.2 Create Files with makemap"BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="book"HREF="index.htm"TITLE="sendmail"><IMGSRC="../gifs/txthome.gif"ALT="sendmail"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch33_04.htm"TITLE="33.4 Use Maps with $( and $) in Rules"><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 33.4 Use Maps with $( and $) in Rules"BORDER="0"></A></TD></TR><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172">33.2 Create Files with makemap</TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="index"HREF="index/idx_0.htm"TITLE="Book Index"><IMGSRC="../gifs/index.gif"ALT="Book Index"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172">33.4 Use Maps with $( and $) in Rules</TD></TR></TABLE><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><PCLASS="nav"><FONTSIZE="-1">[ <AHREF="../index.htm"TITLE="The Networking CD Bookshelf">Library Home</A> | <AHREF="../dnsbind/index.htm"TITLE="DNS &amp; BIND">DNS &amp; BIND</A> | <AHREF="../tcpip/index.htm"TITLE="TCP/IP Network Administration">TCP/IP</A> | <AHREF="index.htm"TITLE="sendmail">sendmail</A> | <AHREF="../smdref/index.htm"TITLE="sendmail Desktop Reference">sendmail Reference</A> | <AHREF="../firewall/index.htm"TITLE="Building Internet Firewalls">Firewalls</A> | <AHREF="../puis/index.htm"TITLE="Practical UNIX &amp; Internet Security">Practical Security</A> ]</FONT></P></DIV></BODY></HTML>