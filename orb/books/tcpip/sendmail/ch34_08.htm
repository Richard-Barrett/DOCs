<HTML><HEAD><TITLE>[Chapter 34] 34.8 Alphabetized Reference</TITLE><METANAME="DC.title"CONTENT="sendmail"><METANAME="DC.creator"CONTENT="Bryan Costales &amp; Eric Allman"><METANAME="DC.publisher"CONTENT="O'Reilly &amp; Associates, Inc."><METANAME="DC.date"CONTENT="1999-01-06T21:09:50Z"><METANAME="DC.type"CONTENT="Text.Monograph"><METANAME="DC.format"CONTENT="text/html"SCHEME="MIME"><METANAME="DC.source"CONTENT="1-56592-222-0"SCHEME="ISBN"><METANAME="DC.language"CONTENT="en-US"><METANAME="generator"CONTENT="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><LINKREV="made"HREF="mailto:online-books@oreilly.com"TITLE="Online Books Comments"><LINKREL="up"HREF="ch34_01.htm"TITLE="34. Options"><LINKREL="prev"HREF="ch34_07.htm"TITLE="34.7 Pitfalls"><LINKREL="next"HREF="ch35_01.htm"TITLE="35. Headers"></HEAD><BODYBGCOLOR="#FFFFFF"TEXT="#000000"><DIVCLASS="htmlnav"><H1><IMGSRC="gifs/smbanner.gif"ALT="sendmail"USEMAP="#srchmap"BORDER="0"></H1><MAPNAME="srchmap"><AREASHAPE="RECT"COORDS="0,0,466,65"HREF="index.htm"ALT="sendmail"><AREASHAPE="RECT"COORDS="467,0,514,18"HREF="../search/ssrch.htm"ALT="Search this book"></MAP><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch34_07.htm"TITLE="34.7 Pitfalls"><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 34.7 Pitfalls"BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><B><FONTFACE="ARIEL,HELVETICA,HELV,SANSERIF"SIZE="-1">Chapter 34<BR>Options</FONT></B></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="CHAPTER"HREF="ch35_01.htm"TITLE="35. Headers"><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 35. Headers"BORDER="0"></A></TD></TR></TABLE>&nbsp;<HRALIGN="LEFT"WIDTH="515"TITLE="footer"></DIV><DIVCLASS="SECT1"><H2CLASS="sect1"><ACLASS="title"NAME="SML2-CH-34-SECT-8">34.8 Alphabetized Reference</A></H2><PCLASS="para">In the following sections we present all the options that are currently availablefor V8 <EMCLASS="emphasis">sendmail</EM>.They are in alphanumeric order sorted by the multicharacter name.The multicharacter name appears at the left of each major section header.If an old single-character name exists, it is displayed parentheticallyto the right of the multicharacter name.In a few cases, multicharacter names have replaced macros.In those instances the macro is displayed nonparenthetically.</P><DIVCLASS="refentry"><DIVCLASS="refnamediv"><H3CLASS="refname"><ACLASS="refname"NAME="SML2-CH-34-SECT-8-1">34.8.1 AliasFile (A)</A></H3><PCLASS="refpurpose">Define the aliases file location</P>(All versions)</DIV><BLOCKQUOTE><DIVCLASS="refsect1"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-41853"></A>The <CODECLASS="literal">AliasFile</CODE> (<CODECLASS="literal">A</CODE>) option must be declared for<EMCLASS="emphasis">sendmail</EM> to do aliasing.If you omit this option, <EMCLASS="emphasis">sendmail</EM> may silently assume thatyou do not want to do aliasing at all.There is no default compiled into <EMCLASS="emphasis">sendmail</EM> for the locationof the <EMCLASS="emphasis">aliases</EM> file.[4]For V8 <EMCLASS="emphasis">m4</EM> configurations an appropriate default will be definedbased on your operating system.</P><BLOCKQUOTECLASS="footnote"><PCLASS="para">[4] Beginning with V8.7, a switched-services file(see <ACLASS="xref"HREF="ch34_08.htm#SML2-CH-34-SECT-8-61"TITLE="">Section 34.8.61</A>) may cause aliases to be foundin NIS or other services and may completely ignorealias files altogether.</P></BLOCKQUOTE><PCLASS="para">If you specify a file that doesn't exist (such as <EMCLASS="emphasis">/et/aliases</EM>if you really meant <EMCLASS="emphasis">/etc/aliases</EM>) or one that is unreadable, <EMCLASS="emphasis">sendmail</EM> complains, forexample with</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">Can't open /et/aliases</PRE></BLOCKQUOTE></P><PCLASS="para">This is a nonfatal error. The <EMCLASS="emphasis">sendmail</EM> program prints itand continues to run but assumes that it shouldn't do aliasing.</P><PCLASS="para">The forms of the <CODECLASS="literal">AliasFile</CODE> (<CODECLASS="literal">A</CODE>) option are as follows:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">OA<CODECLASS="replaceable"><I>location                        </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> configuration file (old form)</I>-oA<CODECLASS="replaceable"><I>location                       </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> command line (old form)</I>O AliasFile=<CODECLASS="replaceable"><I>location              </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> configuration file (beginning with V8.7)</I>-OAliasFile=<CODECLASS="replaceable"><I>location              </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> command line (beginning with V8.7)</I>define(`ALIAS_FILE',`<CODECLASS="replaceable"><I>location</I></CODE>')   <ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> V8 m4 configuration</I></PRE></BLOCKQUOTE></P><PCLASS="para">The <CODECLASS="replaceable"><I>location</I></CODE> is an argument of type string andcan be an absolute or a relative pathname. A relativepath (such as <EMCLASS="emphasis">../aliases</EM>) can be used for testing but should<EMCLASS="emphasis">never</EM> be used in the production version of your <EMCLASS="emphasis">sendmail.cf</EM>file. To do so opens a security hole. Such a path is interpretedby <EMCLASS="emphasis">sendmail</EM> as relative to the queue directory.</P><PCLASS="para">This option can be used to change the name of the<EMCLASS="emphasis">aliases</EM> file (a possible consideration for security). If youchange the location or name of the <EMCLASS="emphasis">aliases</EM> file, be awarethat other programs (such as <EMCLASS="emphasis">emacs</EM> and Sun's <EMCLASS="emphasis">nis</EM> services)may cease to work properly.</P><PCLASS="para">Note that with the <EMCLASS="emphasis">m4</EM> technique the only way to eliminate the defaultalias file declaration (and thus to eliminate all <EMCLASS="emphasis">aliases</EM>support) is to <CODECLASS="literal">undefine</CODE> ALIAS_FILE like this:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">undefine(`ALIAS_FILE')</PRE></BLOCKQUOTE></P><PCLASS="para">The <EMCLASS="emphasis">sendmail</EM> program alsoallows you to use several alias databases simultaneously.They are listed with the <CODECLASS="literal">AliasFile</CODE> (<CODECLASS="literal">A</CODE>) option as, for example,like this:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">O AliasFile=/etc/aliases/users,/etc/aliases/maillists</PRE></BLOCKQUOTE></P><PCLASS="para">In this case, <EMCLASS="emphasis">sendmail</EM> will look up an alias first in the database<EMCLASS="emphasis">/etc/aliases/users</EM>. If it is not found, <EMCLASS="emphasis">sendmail</EM> will thenlook in <EMCLASS="emphasis">/etc/aliases/maillists</EM>. The number of simultaneous aliasfiles is limited to MAXALIASDB (see <ACLASS="xref"HREF="ch18_08.htm#SML2-CH-18-SECT-8-19"TITLE="">Section 18.8.19, MAX...</A>) as defined in <EMCLASS="emphasis">conf.h</EM> (by default12). The <CODECLASS="literal">-bi</CODE> command-line switch will rebuild all alias databasesin the order listed in this <CODECLASS="literal">AliasFile</CODE> (<CODECLASS="literal">A</CODE>) option. Multiple declarations linesmay appear in the file, each adding an alias database to the list:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">O AliasFile=/etc/aliases/users     # aliases local users firstO AliasFile=/etc/aliases/maillists # then mailing listsO AliasFile=/etc/aliases/retired   # then retired accounts</PRE></BLOCKQUOTE></P><PCLASS="para">Duplicates are not detected. Therefore the following causes <EMCLASS="emphasis">/etc/aliases</EM>to be searched and rebuilt twice each time:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">O AliasFile=/etc/aliasesO AliasFile=/etc/aliases</PRE></BLOCKQUOTE></P><PCLASS="para">Multiple alias files may similarly be specified on the command line withthe <CODECLASS="literal">-o</CODE> switch. But be aware that any alias files that are declared in thecommand linecause all the configuration file alias declarations to be ignored.</P><PCLASS="para">In addition to the name of alias databases, <EMCLASS="emphasis">sendmail</EM> also allowsyou to specify the class of each. The class is the same as theclasses that are available for the <CODECLASS="literal">K</CODE> configuration command (see <ACLASS="xref"HREF="ch33_03.htm"TITLE="The K Configuration Command">Section 33.3, "The K Configuration Command"</A>).The class prefixes the name, and the two are separated by a colon:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">O AliasFile=nis:mail.aliases</PRE></BLOCKQUOTE></P><PCLASS="para">This example tells <EMCLASS="emphasis">sendmail</EM> to look up aliases in the <EMCLASS="emphasis">nis</EM> class(the <CODECLASS="literal">nis</CODE>) database called <CODECLASS="literal">mail.aliases</CODE>. The classcan include switches that mean the same thing as those allowed forthe <CODECLASS="literal">K</CODE> configuration command. </P><PCLASS="para">&#13;For example:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">O AliasFile=nis:-N mail.aliases</PRE></BLOCKQUOTE></P><PCLASS="para">Here, the <CODECLASS="literal">-N</CODE> class switch causes lookups to include a trailingnull byte with each key.[5]</P><BLOCKQUOTECLASS="footnote"><PCLASS="para">[5] Also see <ACLASS="xref"HREF="ch24_04.htm#SML2-CH-24-SECT-4-4"TITLE="Duplicate Entries and Automation">Section 24.4.4, "Duplicate Entries and Automation"</A>, which illustrates the <CODECLASS="literal">-A</CODE>option switch for appending keys.</P></BLOCKQUOTE><PCLASS="para">Under V8.6 <EMCLASS="emphasis">sendmail</EM> the reasonable classes are <EMCLASS="emphasis">hash</EM>,<EMCLASS="emphasis">btree</EM>, <EMCLASS="emphasis">dbm</EM>, <EMCLASS="emphasis">nis</EM>, and <EMCLASS="emphasis">udb</EM>. Under V8.7 <EMCLASS="emphasis">sendmail</EM> this list can also include <EMCLASS="emphasis">nisplus</EM> forSun's <EMCLASS="emphasis">nisplus</EM> and <EMCLASS="emphasis">hesiod</EM> for Hesiod support.(See <ACLASS="xref"HREF="ch33_03.htm#SML2-CH-33-SECT-3-2"TITLE="The class">Section 33.3.2, "The class"</A> and <ACLASS="xref"HREF="ch33_03.htm#SML2-CH-33-SECT-3-4"TITLE="The switches">Section 33.3.4, "The switches"</A>.)But note that it is generally better to use the service-switchfile to select services because it is less confusing.</P><PCLASS="para">If a class is not a known one and if the <CODECLASS="literal">-d27</CODE> command-lineswitch (see <ACLASS="xref"HREF="ch37_05.htm#SML2-CH-37-SECT-5-88"TITLE="">Section 37.5.88, -d27.1</A>) is specified, <EMCLASS="emphasis">sendmail</EM> prints</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">Unknown alias class <CODECLASS="replaceable"><I>badclass</I></CODE></PRE></BLOCKQUOTE></P><PCLASS="para">If the class is one that cannot support aliasing (as definedby MCF_ALIASOK in <EMCLASS="emphasis">conf.c</EM>) and if the <CODECLASS="literal">-d27</CODE> command-lineswitch is specified, <EMCLASS="emphasis">sendmail</EM> prints:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">setalias: map class <CODECLASS="replaceable"><I>badclass</I></CODE> can't handle aliases</PRE></BLOCKQUOTE></P><PCLASS="para">In both cases the <CODECLASS="replaceable"><I>badclass</I></CODE> is the offending class.Both errors cause the <CODECLASS="literal">AliasFile</CODE> (<CODECLASS="literal">A</CODE>)option's alias file declaration to be ignored.</P><PCLASS="para">Beginning with V8.7 <EMCLASS="emphasis">sendmail</EM>, the declaration and use ofalias files is further complicated[6]by the introduction ofswitched-services files (see <ACLASS="xref"HREF="ch34_08.htm#SML2-CH-34-SECT-8-61"TITLE="">Section 34.8.61</A>).If the file defined by the <CODECLASS="literal">ServiceSwitchFile</CODE> option exists,and if it defines the type and location of alias information, eachalias definition is used just as if it was included in the configurationfile (although the syntax differs). On Solaris, Ultrix, and OSF systems,switched-service files are supplied by the operating system.With these you shouldbeware the silent introduction of unexpected alias services. On otheroperating systems you may set up a V8.7 switched-servicefile that can be used for aliases if you wish.</P><BLOCKQUOTECLASS="footnote"><PCLASS="para">[6] Or simplified, depending on whom you talk to.</P></BLOCKQUOTE><PCLASS="para">The <CODECLASS="literal">AliasFile</CODE> (<CODECLASS="literal">A</CODE>) option is not safe.If specified from the command line,it may cause <EMCLASS="emphasis">sendmail</EM> to relinquish its <EMCLASS="emphasis">root</EM> privilege.</P></DIV></BLOCKQUOTE></DIV><DIVCLASS="refentry"><DIVCLASS="refnamediv"><H3CLASS="refname"><ACLASS="refname"NAME="SML2-CH-34-SECT-8-2">34.8.2 AliasWait (a)</A></H3><PCLASS="refpurpose">Wait for aliases file rebuild</P>(All versions)</DIV><BLOCKQUOTE><DIVCLASS="refsect1"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-42000"></A>Whenever <EMCLASS="emphasis">sendmail</EM> rebuilds the <EMCLASS="emphasis">aliases</EM> database, it first clears the old database.It then rebuilds the database and, when done, adds the specialentry <CODECLASS="literal">@:@</CODE>.Before <EMCLASS="emphasis">sendmail</EM> attempts to use the database,it first looks in that database for the special entry <CODECLASS="literal">@:@</CODE>that should be present.This curious entry is employed because it is one that is alwaysillegal in an <EMCLASS="emphasis">aliases</EM> file.If <EMCLASS="emphasis">sendmail</EM> doesn't find that entry (whether because a user ran <EMCLASS="emphasis">newaliases</EM>or because another invocation of sendmail is currently rebuilding it),it waits 2 seconds for that entry to appear, then checks again.If the entry is still unavailable, the wait is doubled (up to maximum wait of 60 seconds). The total time waited (after all the sleeps without success)is the interval specified by this<CODECLASS="literal">AliasWait</CODE> (<CODECLASS="literal">a</CODE>) option.</P><PCLASS="para">When the <CODECLASS="literal">@:@</CODE> appears, <EMCLASS="emphasis">sendmail</EM>checks to see whether the databasestill needs to be rebuilt and rebuilds it if it does.If the special entry <CODECLASS="literal">@:@</CODE> does not appear after the specifiedtime and if the <CODECLASS="literal">AutoRebuildAliases</CODE> (<CODECLASS="literal">D</CODE>) option(see <ACLASS="xref"HREF="ch34_08.htm#SML2-CH-34-SECT-8-4"TITLE="">Section 34.8.4</A>) is set, <EMCLASS="emphasis">sendmail</EM> assumes that some other processdied while that other process was rebuilding the database.This assumption paves the way for <EMCLASS="emphasis">sendmail</EM>to go ahead and rebuild the database.Note that if <CODECLASS="literal">AutoRebuildAliases</CODE> (<CODECLASS="literal">D</CODE>) option is notset, <EMCLASS="emphasis">sendmail</EM> uses the old information.</P><PCLASS="para">The forms of the <CODECLASS="literal">AliasWait</CODE> (<CODECLASS="literal">a</CODE>) option are as follows:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">Oa<CODECLASS="replaceable"><I>delay                          </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> configuration file (old style)</I>-oa<CODECLASS="replaceable"><I>delay                         </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> command line (old style)</I>O AliasWait=<CODECLASS="replaceable"><I>delay                </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> configuration file (beginning with V8.7)</I>-OAliasWait=<CODECLASS="replaceable"><I>delay                </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> command line (beginning with V8.7)</I>define(`confALIAS_WAIT',<CODECLASS="replaceable"><I>delay</I></CODE>)   <ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> V8 m4 configuration</I></PRE></BLOCKQUOTE></P><PCLASS="para">The <CODECLASS="replaceable"><I>delay</I></CODE> argument is of type <EMCLASS="emphasis">time</EM> and, if omitted, defaults to 5 minutes. If the entire<CODECLASS="literal">AliasWait</CODE> (<CODECLASS="literal">a</CODE>) option is omitted or if <CODECLASS="replaceable"><I>delay</I></CODE> is zero or non-numeric,the database is not automatically rebuilt.If the unit of time desired is omitted, the delay defaults to minutes.If you use the V8 <EMCLASS="emphasis">m4</EM> configuration, the default for<CODECLASS="literal">confALIAS_WAIT</CODE> is 10 minutes.</P><PCLASS="para">The <CODECLASS="literal">AliasWait</CODE> (<CODECLASS="literal">a</CODE>) option is not safe.If specified from the command line,it may cause <EMCLASS="emphasis">sendmail</EM> to relinquish its <EMCLASS="emphasis">root</EM> privilege.</P></DIV></BLOCKQUOTE></DIV><DIVCLASS="refentry"><DIVCLASS="refnamediv"><H3CLASS="refname"><ACLASS="refname"NAME="SML2-CH-34-SECT-8-3">34.8.3 AllowBogusHELO</A></H3><PCLASS="refpurpose">Allow no host with HELO or EHLO</P>(V8.8 and above)</DIV><BLOCKQUOTE><DIVCLASS="refsect1"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-42060"></A><ACLASS="indexterm"NAME="AUTOID-42062"></A><ACLASS="indexterm"NAME="AUTOID-42065"></A><ACLASS="indexterm"NAME="AUTOID-42068"></A><ACLASS="indexterm"NAME="AUTOID-42070"></A>Prior to V8.7, <EMCLASS="emphasis">sendmail</EM> would accept without complaint an SMTP HELO command (or an EHLO) that omitted the hostname:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">220-oldsite.uofa.edu  Sendmail 8.6.13/8.6.13 ready at Fri, 31 Dec 1996 08:11:44 -0700220 ESMTP spoken here<CODECLASS="userinput"><B>HELO</B></CODE>250 oldsite.uofa.edu Hello here.ufa.edu [123.45.67.89], pleased to meet you</PRE></BLOCKQUOTE></P><PCLASS="para">RFC1123, section 5.2.5, specifies that all HELO and EHLOcommands must be followed by a fully qualified hostname.</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">HELO here.uofa.eduEHLO here.uofa.edu</PRE></BLOCKQUOTE></P><PCLASS="para">Beginning with V8.7, omitting the hostname results in one of the followingerrors:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">501 helo requires domain address501 ehlo requires domain address</PRE></BLOCKQUOTE></P><PCLASS="para">Note that there is no check to see that the hostname is actually that ofthe connecting host unless PICKY_HELO_CHECK is declared when<EMCLASS="emphasis">sendmail</EM> is compiled(see <ACLASS="xref"HREF="ch18_08.htm#SML2-CH-18-SECT-8-35"TITLE="">Section 18.8.35, PICKY...</A>). Also notethat the hostname that is specified must <EMCLASS="emphasis">appear</EM> to be a correctly formedhostname. If it is not, the following is printed:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">501 Invalid domain name</PRE></BLOCKQUOTE></P><PCLASS="para">If you favor forcing other sites to obey the RFCs, don't enable thisoption. But note that you may need to enable it if your site accepts connectionsfrom other sites that don't obey the protocols.</P><PCLASS="para">The <CODECLASS="literal">AllowBogusHELO</CODE> option is used like this:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">O AllowBogusHELO=<CODECLASS="replaceable"><I>bool            </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> V8.8 and above</I></PRE></BLOCKQUOTE></P><PCLASS="para">The <CODECLASS="replaceable"><I>bool</I></CODE> is of type Boolean. If it is absent, the option defaults totrue (do allow the hostname to be omitted). If the entire option declarationis missing, the default is false (require the hostname to be present).Note that there is no <EMCLASS="emphasis">m4</EM> shorthand for declaring this option.</P><PCLASS="para">The <CODECLASS="literal">AllowBogusHELO</CODE> option safe.  Even if it is specified from the command line,<EMCLASS="emphasis">sendmail</EM> retains its <EMCLASS="emphasis">root</EM> privilege.</P></DIV></BLOCKQUOTE></DIV><DIVCLASS="refentry"><DIVCLASS="refnamediv"><H3CLASS="refname"><ACLASS="refname"NAME="SML2-CH-34-SECT-8-4">34.8.4 AutoRebuildAliases (D)</A></H3><PCLASS="refpurpose">Auto-rebuild the aliases database</P>(All versions)</DIV><BLOCKQUOTE><DIVCLASS="refsect1"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-42110"></A>The need to rebuild the <EMCLASS="emphasis">aliases</EM> databaseis determined by comparing the modification timeof the <EMCLASS="emphasis">aliases</EM> source file, as defined by the <CODECLASS="literal">AliasFile</CODE> (<CODECLASS="literal">A</CODE>) option (see <ACLASS="xref"HREF="ch34_08.htm#SML2-CH-34-SECT-8-1"TITLE="">Section 34.8.1</A>),to the modification time of the corresponding<EMCLASS="emphasis">aliases.pag</EM> and <EMCLASS="emphasis">aliases.dir</EM>, or <EMCLASS="emphasis">aliases.db</EM>,database files. If thesource file is newer and if this <CODECLASS="literal">AutoRebuild-Aliases</CODE> (<CODECLASS="literal">D</CODE>)option is set, <EMCLASS="emphasis">sendmail</EM>attempts to rebuild the <EMCLASS="emphasis">aliases</EM> database. Ifthis option is not set, <EMCLASS="emphasis">sendmail</EM> prints the followingwarning and uses the information in the old database:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">Warning: alias database <CODECLASS="replaceable"><I>fname</I></CODE> out of date</PRE></BLOCKQUOTE></P><PCLASS="para">Here, <CODECLASS="replaceable"><I>fname</I></CODE> is the name of the source file.If you set this <CODECLASS="literal">AutoRebuildAliases</CODE> (<CODECLASS="literal">D</CODE>) option, be sure that the<CODECLASS="literal">AliasWait</CODE> (<CODECLASS="literal">a</CODE>) option (see <ACLASS="xref"HREF="ch34_08.htm#SML2-CH-34-SECT-8-2"TITLE="">Section 34.8.2</A>)is also declared and given a nonzero time argument.(File locking, to prevent simultaneous rebuilds, is described under the<CODECLASS="literal">AliasWait</CODE> (<CODECLASS="literal">a</CODE>) option.)</P><PCLASS="para">The forms of this <CODECLASS="literal">AutoRebuildAliases</CODE> (<CODECLASS="literal">D</CODE>) option are as follows:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">OD<CODECLASS="replaceable"><I>bool                            </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> configuration file (old style)</I>-oD<CODECLASS="replaceable"><I>bool                           </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> command line (old style)</I>O AutoRebuildAliases=<CODECLASS="replaceable"><I>bool         </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> configuration file (beginning with V8.7)</I>-OAutoRebuildAliases=<CODECLASS="replaceable"><I>bool         </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> command line (beginning with V8.7)</I>define(`confAUTO_REBUILD',<CODECLASS="replaceable"><I>bool</I></CODE>)   <ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> V8 m4 configuration</I></PRE></BLOCKQUOTE></P><PCLASS="para">With no argument, <CODECLASS="literal">AutoRebuildAliases</CODE> (<CODECLASS="literal">D</CODE>)is set to true (the <EMCLASS="emphasis">aliases</EM> database is automaticallyrebuilt).If the entire <CODECLASS="literal">AutoRebuildAliases</CODE> (<CODECLASS="literal">D</CODE>) option is missing, it defaults to false (no automatic rebuilds).</P><PCLASS="para">IDA <EMCLASS="emphasis">sendmail</EM> uses <EMCLASS="emphasis">fcntl</EM>(3) to prevent simultaneous rebuilds.Old versions of <EMCLASS="emphasis">sendmail</EM> used <EMCLASS="emphasis">flock</EM>(3).V8 <EMCLASS="emphasis">sendmail</EM> uses either <EMCLASS="emphasis">fcntl</EM>(3) or <EMCLASS="emphasis">flock</EM>(3),depending on how it was compiled.</P><PCLASS="para">The <CODECLASS="literal">AutoRebuildAliases</CODE> (<CODECLASS="literal">D</CODE>) option is not safe. If specified from the command line,it may cause <EMCLASS="emphasis">sendmail</EM> to relinquish its <EMCLASS="emphasis">root</EM> privilege.</P></DIV></BLOCKQUOTE></DIV><DIVCLASS="refentry"><DIVCLASS="refnamediv"><H3CLASS="refname"><ACLASS="refname"NAME="SML2-CH-34-SECT-8-5">34.8.5 BlankSub (B)</A></H3><PCLASS="refpurpose">Set unquoted space replacement</P>(All versions)</DIV><BLOCKQUOTE><DIVCLASS="refsect1"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-42179"></A><ACLASS="indexterm"NAME="AUTOID-42181"></A>Some mailer programs have difficulty handling addresses thatcontain spaces. Such addresses are both illegal under RFC821and RFC822 and subject to gross misinterpretation.For example, the address&#13;</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">John Q Public@wash.dc.gov</PRE></BLOCKQUOTE></P><PCLASS="para">&#13;is viewed by some MUA programs as being composed of three separateaddresses: <CODECLASS="literal">John</CODE>, <CODECLASS="literal">Q</CODE>, and<CODECLASS="literal">Public@wash.dc.gov</CODE>.To prevent this misinterpretation, such MUAs usuallyeither quote the user portion or escape each space with a backslash:&#13;</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">&quot;John Q Public&quot;@wash.dc.gov <ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> quoted</I>John\ Q\ Public@wash.dc.gov <ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> escaped</I></PRE></BLOCKQUOTE></P><PCLASS="para">&#13;The <CODECLASS="literal">BlankSub</CODE> (<CODECLASS="literal">B</CODE>) option is intended to handle an address thatcontains internal spaces, and is <EMCLASS="emphasis">neither</EM> quoted nor escaped.For <EMCLASS="emphasis">sendmail</EM> a space is any characterdefined by the C language library routine <EMCLASS="emphasis">isspace</EM>(3).</P><PCLASS="para">Most sites use a . (dot or period) or an _ (underscore)character to replace unquoted space characters. That is, they declarethe <CODECLASS="literal">BlankSub</CODE> (<CODECLASS="literal">B</CODE>) option as one of the following:&#13;</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">OB.OB_</PRE></BLOCKQUOTE></P><PCLASS="para">&#13;Feeding the address</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">John Q Public@wash.dc.gov</PRE></BLOCKQUOTE></P><PCLASS="para">&#13;through <EMCLASS="emphasis">sendmail</EM> with the option <CODECLASS="literal">OB.</CODE> set yields</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">John.Q.Public@wash.dc.gov</PRE></BLOCKQUOTE></P><PCLASS="para">The forms of the <CODECLASS="literal">BlankSub</CODE> (<CODECLASS="literal">B</CODE>) option are as follows:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">OB<CODECLASS="replaceable"><I>char                         </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> configuration file (old style)</I>-oB<CODECLASS="replaceable"><I>char                        </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> command line (old style)</I>O BlankSub=<CODECLASS="replaceable"><I>char                </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> configuration file (beginning with V8.7)</I>-OBlankSub=<CODECLASS="replaceable"><I>char                </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> command line (beginning with V8.7)</I>define(`confBLANK_SUB',<CODECLASS="replaceable"><I>char</I></CODE>)   <ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> V8 m4 configuration</I></PRE></BLOCKQUOTE></P><PCLASS="para">The argument <CODECLASS="replaceable"><I>char</I></CODE> is of type characterand is a single character.The default, if this option is omitted or if the <CODECLASS="replaceable"><I>char</I></CODE> argument is omitted, is that an unquoted space character is replacedwith a space character (which does nothing to correct the problem at all).The default for the <EMCLASS="emphasis">m4</EM> technique is the dot (<CODECLASS="literal">.</CODE>) character.</P><PCLASS="para">Note that old-style addresses are delimited from each other withspaces rather than commas. Such addresses may be wrongly joined intoa single address if the <CODECLASS="replaceable"><I>char</I></CODE> is other than a space. Acceptanceof such old-style addresses is determined by the setting of the <CODECLASS="literal">OldStyleHeaders</CODE> (<CODECLASS="literal">o</CODE>) option (see <ACLASS="xref"HREF="ch34_08.htm#SML2-CH-34-SECT-8-44"TITLE="">Section 34.8.44</A>).</P><PCLASS="para">Also note that this <CODECLASS="literal">BlankSub</CODE> (<CODECLASS="literal">B</CODE>) option may also be used when tokenized addressesare reassembled(see <ACLASS="xref"HREF="ch28_02.htm#SML2-CH-28-SECT-2-3"TITLE="Pasting Addresses Back Together">Section 28.2.3, "Pasting Addresses Back Together"</A>).</P><PCLASS="para">The <CODECLASS="literal">BlankSub</CODE> (<CODECLASS="literal">B</CODE>) option is not safe.  If specified from the command line,it may cause <EMCLASS="emphasis">sendmail</EM> to relinquish its <EMCLASS="emphasis">root</EM> privilege.</P></DIV></BLOCKQUOTE></DIV><DIVCLASS="refentry"><DIVCLASS="refnamediv"><H3CLASS="refname"><ACLASS="refname"NAME="SML2-CH-34-SECT-8-6">34.8.6 CheckAliases (n)</A></H3><PCLASS="refpurpose">Check right-hand side of aliases</P>(V8.1 and above)</DIV><BLOCKQUOTE><DIVCLASS="refsect1"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-42255"></A>Ordinarily, when <EMCLASS="emphasis">sendmail</EM> rebuilds an aliases database(as defined by the <CODECLASS="literal">AliasFile</CODE> (<CODECLASS="literal">A</CODE>) option, see <ACLASS="xref"HREF="ch34_08.htm#SML2-CH-34-SECT-8-1"TITLE="">Section 34.8.1</A>),it checks only the addresses to the left of the colon tomake sure they all resolve to a delivery agent that has the <CODECLASS="literal">F=A</CODE> flag set (see <ACLASS="xref"HREF="ch30_08.htm#SML2-CH-30-SECT-8-12"TITLE="">Section 30.8.12, F=A</A>).It is possible to also haveaddresses to the right of the colon checked for validityby setting option <CODECLASS="literal">CheckAliases</CODE> (<CODECLASS="literal">n</CODE>) option to true. </P><PCLASS="para">The forms of the <CODECLASS="literal">CheckAliases</CODE> (<CODECLASS="literal">n</CODE>) option are as follows:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">On<CODECLASS="replaceable"><I>bool                             </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> configuration file (old style)</I>-on<CODECLASS="replaceable"><I>bool                            </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> command line (oldstyle)</I>-on                                <ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> command line shorthand</I>O CheckAliases=<CODECLASS="replaceable"><I>bool                </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> configuration file (beginning with V8.7)</I>-OCheckAliases=<CODECLASS="replaceable"><I>bool                </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> command line (beginning with V8.7)</I>define(`confCHECK_ALIASES',<CODECLASS="replaceable"><I>True</I></CODE>)   <ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> V8 m4 configuration</I></PRE></BLOCKQUOTE></P><PCLASS="para">The <CODECLASS="replaceable"><I>bool</I></CODE> is of type Boolean. If it is absent, the option defaults totrue (do check the right-hand side of aliases). If the entire option declarationis missing, the default is false (don't check the right-hand side of aliases).The default for the <EMCLASS="emphasis">m4</EM> configuration technique is false.</P><PCLASS="para">Addresses to the right of the colon arechecked only to be sure they are good addresses. Each is processedby rule set 3 and then rule set 0 to select a delivery agent. Processingmerely needs to successfully select any non-<CODECLASS="literal">#error</CODE> delivery agent(see <ACLASS="xref"HREF="ch30_05.htm#SML2-CH-30-SECT-5-2"TITLE="The error Delivery Agent">Section 30.5.2, "The error Delivery Agent"</A>). The <EMCLASS="emphasis">sendmail</EM> program prints and logs the following warning and skipsany address that fails to select a valid delivery agent:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen"><EMCLASS="emphasis">address</EM>... bad address</PRE></BLOCKQUOTE></P><PCLASS="para">If the address selects an <CODECLASS="literal">#error</CODE> delivery agent, theerror text for that error is printed instead:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen"><EMCLASS="emphasis">address</EM>... user address required</PRE></BLOCKQUOTE></P><PCLASS="para">The <CODECLASS="literal">CheckAliases</CODE> (<CODECLASS="literal">n</CODE>) option is further described in <ACLASS="xref"HREF="ch24_05.htm#SML2-CH-24-SECT-5-2"TITLE="Check the Right Side of Aliases">Section 24.5.2, "Check the Right Side of Aliases"</A>.This option is safe.  Even if it is specified from the command line,<EMCLASS="emphasis">sendmail</EM> retains its <EMCLASS="emphasis">root</EM> privilege.</P></DIV></BLOCKQUOTE></DIV><DIVCLASS="refentry"><DIVCLASS="refnamediv"><H3CLASS="refname"><ACLASS="refname"NAME="SML2-CH-34-SECT-8-7">34.8.7 CheckpointInterval (C)</A></H3><PCLASS="refpurpose">Checkpoint the queue</P>(V8.1 and above)</DIV><BLOCKQUOTE><DIVCLASS="refsect1"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-42310"></A><ACLASS="indexterm"NAME="AUTOID-42313"></A>When a single email message is sent to many recipients (those on a mailing list, for example),a single <EMCLASS="emphasis">sendmail</EM> process handles all the recipients.Should that <EMCLASS="emphasis">sendmail</EM> process die or be killed halfway throughprocessing, there is no record that the first half was delivered.As a result, when the queue is later reprocessed, the recipientsin that first half will receive the message a second time.</P><PCLASS="para">The <CODECLASS="literal">CheckpointInterval</CODE> (<CODECLASS="literal">C</CODE>) option can limit the duplication.It tells <EMCLASS="emphasis">sendmail</EM> to rewrite (checkpoint) its <CODECLASS="literal">qf</CODE> file (which contains the list of recipients; see <ACLASS="xref"HREF="ch23_02.htm#SML2-CH-23-SECT-2-5"TITLE="The Queue Control File: qf">Section 23.2.5, "The Queue Control File: qf"</A>)after each group of a specified number of recipients has been delivered. Recipients who have already received mail are deleted fromthe list, and that list is rewritten to the <CODECLASS="literal">qf</CODE> file. The forms of the <CODECLASS="literal">CheckpointInterval</CODE> (<CODECLASS="literal">C</CODE>) option are as follows:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">OC<CODECLASS="replaceable"><I>num                                   </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> configuration file (old style)</I>-oC<CODECLASS="replaceable"><I>num                                  </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> command line (old style)</I>O CheckpointInterval=<CODECLASS="replaceable"><I>num                </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> configuration file (beginning with V8.7)</I>-OCheckpointInterval=<CODECLASS="replaceable"><I>num                </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> command line (beginning with V8.7)</I>define(`confCHECKPOINT_INTERVAL','<CODECLASS="replaceable"><I>num</I></CODE>') <ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> V8 m4 configuration</I></PRE></BLOCKQUOTE></P><PCLASS="para">The <CODECLASS="replaceable"><I>num</I></CODE> argument is of type numeric and specifiesthe number of recipients in each group.If <CODECLASS="replaceable"><I>num</I></CODE> is entirely missing, is non-numeric, or is zero, this feature is disabled.If the entire <CODECLASS="literal">CheckpointInterval</CODE> (<CODECLASS="literal">C</CODE>) option is missing,the default is 10.There is a small performance penalty that increases as <CODECLASS="replaceable"><I>num</I></CODE> approaches 1. A good starting value is 4, meaning that at most four peoplewill get duplicate deliveries. Note that the <CODECLASS="literal">F=M</CODE> flag on localdelivery will try as many recipients as possible before checkpointing,even if that number is greater than the value of this<CODECLASS="literal">CheckpointInterval</CODE> option. The <CODECLASS="literal">CheckpointInterval</CODE> (<CODECLASS="literal">C</CODE>) option is safe. Even if it is specified from the command line,<EMCLASS="emphasis">sendmail</EM> retains its <EMCLASS="emphasis">root</EM> privilege.</P></DIV></BLOCKQUOTE></DIV><DIVCLASS="refentry"><DIVCLASS="refnamediv"><H3CLASS="refname"><ACLASS="refname"NAME="SML2-CH-34-SECT-8-8">34.8.8 ClassFactor (z)</A></H3><PCLASS="refpurpose">Multiplier for priority increments</P>(All versions)</DIV><BLOCKQUOTE><DIVCLASS="refsect1"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-42358"></A><ACLASS="indexterm"NAME="AUTOID-42360"></A><ACLASS="indexterm"NAME="AUTOID-42364"></A>The <CODECLASS="literal">ClassFactor</CODE> (<CODECLASS="literal">z</CODE>) option specifies a multiplying weight (factor) for a message's precedencewhen determining a message's priority.This option interacts with the <CODECLASS="literal">RecipientFactor</CODE> (<CODECLASS="literal">y</CODE>)option (see <ACLASS="xref"HREF="ch34_08.htm#SML2-CH-34-SECT-8-53"TITLE="">Section 34.8.53</A>), and both optionsare described under that latter option.</P><PCLASS="para">The forms of the <CODECLASS="literal">ClassFactor</CODE> (<CODECLASS="literal">z</CODE>) option are as follows:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">Oz<CODECLASS="replaceable"><I>factor                                 </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> configuration file (old form)</I>-oz<CODECLASS="replaceable"><I>factor                                </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> command line (old form)</I>O ClassFactor=<CODECLASS="replaceable"><I>factor                     </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> configuration file (beginning with V8.7)</I>-OClassFactor=<CODECLASS="replaceable"><I>factor                     </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> command line (beginning with V8.7)</I>define(`confWORK_CLASS_FACTOR',<CODECLASS="replaceable"><I>factor</I></CODE>)   <ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> V8 m4 configuration</I></PRE></BLOCKQUOTE></P><PCLASS="para">The argument <CODECLASS="replaceable"><I>factor</I></CODE> is of type numeric. If thatargument is missing, the default value is zero. If the entireoption is missing, the default value is 1800.The default for the <EMCLASS="emphasis">m4</EM> technique is to omit this option.</P><PCLASS="para">The <CODECLASS="literal">ClassFactor</CODE> (<CODECLASS="literal">z</CODE>) option is not safe. If specified from the command line,it may cause <EMCLASS="emphasis">sendmail</EM> to relinquish its <EMCLASS="emphasis">root</EM> privilege.</P></DIV></BLOCKQUOTE></DIV><DIVCLASS="refentry"><DIVCLASS="refnamediv"><H3CLASS="refname"><ACLASS="refname"NAME="SML2-CH-34-SECT-8-9">34.8.9 ColonOkInAddr</A></H3><PCLASS="refpurpose">Allow colons in addresses</P>(8.7 and above)</DIV><BLOCKQUOTE><DIVCLASS="refsect1"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-42402"></A><ACLASS="indexterm"NAME="AUTOID-42404"></A><ACLASS="indexterm"NAME="AUTOID-42406"></A><ACLASS="indexterm"NAME="AUTOID-42408"></A><ACLASS="indexterm"NAME="AUTOID-42411"></A>One possible form of an address is called &quot;list syntax&quot; andlooks like this:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">group: list;</PRE></BLOCKQUOTE></P><PCLASS="para">Here, <CODECLASS="literal">group</CODE> is the name of a mailing list, and <CODECLASS="literal">list</CODE>is a list of zero or more addresses to which the message shouldbe delivered (see <ACLASS="xref"HREF="ch17_01.htm#SML2-CH-17-SECT-1-2-1"TITLE="A rule to handle List:;">Section 17.1.2.1, "A rule to handle List:;"</A>).To understand this kind of address, <EMCLASS="emphasis">sendmail</EM> needs to viewthe prefix and colon as a comment and the trailing semicolon as a comment.This is similar to treating everything outside an angle-bracketedaddress as a comment:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">group:  list  ;group: &lt;list&gt; ;</PRE></BLOCKQUOTE></P><PCLASS="para">For such addresses to be recognizable, it is necessary to prohibitthe use of other addresses that contain colons, unless those colons appear inside a part of theaddress that is surrounded by angle brackets.That is, to use list syntax, addresses like the following cannotbe allowed:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">host:george@wash.dc.gov</PRE></BLOCKQUOTE></P><PCLASS="para">To handle this situation, V8.7 <EMCLASS="emphasis">sendmail</EM> has introducedthe <CODECLASS="literal">ColonOkInAddr</CODE> option. It is used like this:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">O ColonOkInAddr=<CODECLASS="replaceable"><I>bool                  </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> configuration file</I>-OColonOkInAddr=<CODECLASS="replaceable"><I>bool                  </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> command line</I>define(`confCOLON_OK_IN_ADDR',<CODECLASS="replaceable"><I>bool</I></CODE>)   <ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> m4 configuration</I></PRE></BLOCKQUOTE></P><PCLASS="para">The argument <CODECLASS="replaceable"><I>bool</I></CODE> is of type Boolean. If it is absent, thisoption is true (colons are okay, so list syntax is not recognized).If this option is entirely omitted or if <CODECLASS="replaceable"><I>bool</I></CODE> is false,colons are not okay, so list syntax is recognized.Note that for version 5 or earlier configuration files (see<ACLASS="xref"HREF="ch27_05.htm"TITLE="The V Configuration Command">Section 27.5, "The V Configuration Command"</A> for a description of the <CODECLASS="literal">V</CODE>configuration command), this option is automatically set to true.Also note that for <EMCLASS="emphasis">m4</EM> configurations this option isabsent (false) by default.</P><PCLASS="para">Note that DECnet style addresses (see <ACLASS="xref"HREF="ch29_04.htm#SML2-CH-29-SECT-4-4"TITLE="Handling Specialty Addresses">Section 29.4.4, "Handling Specialty Addresses"</A>)legitimately contain double colons (e.g., <CODECLASS="literal">host::user</CODE>). DECnetaddresses are correctly recognized no matter howthis <CODECLASS="literal">ColonOkInAddr</CODE> option is set.</P><PCLASS="para">The <CODECLASS="literal">ColonOkInAddr</CODE> option is safe. If it is specified from the command line,<EMCLASS="emphasis">sendmail</EM> will not relinquish its <EMCLASS="emphasis">root</EM> privilege.</P></DIV></BLOCKQUOTE></DIV><DIVCLASS="refentry"><DIVCLASS="refnamediv"><H3CLASS="refname"><ACLASS="refname"NAME="SML2-CH-34-SECT-8-10">34.8.10 ConnectionCacheSize (k)</A></H3><PCLASS="refpurpose">Multiple-SMTP connections</P>(V8.1 and above)</DIV><BLOCKQUOTE><DIVCLASS="refsect1"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-42458"></A><ACLASS="indexterm"NAME="AUTOID-42460"></A><ACLASS="indexterm"NAME="AUTOID-42463"></A>Usually, <EMCLASS="emphasis">sendmail</EM> uses a single autonomous SMTP sessionto transmit one email message to another host. It connects tothe other host, transmits the message, and closes the connection.Although this approach is sufficient for most mail, there aretimes when sending multiple messages during a single connectionis preferable. This is called <EMCLASS="emphasis">caching</EM>connections. </P><PCLASS="para">When <EMCLASS="emphasis">sendmail</EM> caches a connection, it connectsto the other host and transmits the mail message as usual. Butinstead of closing the connection, it keeps the connection openso that it can transmit additional mail messages without theadditional overhead of opening and closing the connection each time.The <CODECLASS="literal">ConnectionCacheSize</CODE> (<CODECLASS="literal">k</CODE>)option of V8 <EMCLASS="emphasis">sendmail</EM> specifies thatopen connections to other hosts should be maintained and the maximumnumber of those connections.The forms of the <CODECLASS="literal">ConnectionCacheSize</CODE> (<CODECLASS="literal">k</CODE>) option are as follows:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">Ok<CODECLASS="replaceable"><I>num                               </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> configuration file (V8.6)</I>-ok<CODECLASS="replaceable"><I>num                              </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> command line (V8.6)</I>O ConnectionCacheSize=<CODECLASS="replaceable"><I>num           </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> configuration file (beginning with V8.7)</I>-OConnectionCacheSize=<CODECLASS="replaceable"><I>num           </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> command line (beginning with V8.7)</I>define(`confMCI_CACHE_SIZE',<CODECLASS="replaceable"><I>num</I></CODE>)    <ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> V8 m4 configuration</I></PRE></BLOCKQUOTE></P><PCLASS="para">There may be optional whitespace preceding the <CODECLASS="replaceable"><I>num</I></CODE>.The <CODECLASS="replaceable"><I>num</I></CODE> is an integer that specifiesthe maximum number of simultaneous connections to keep open.If <CODECLASS="replaceable"><I>num</I></CODE> is zero, this caching feature is turned off.A value of 1 is good for workstations that forward all mailto a central mail server and is the default that is used if thisoption is entirely missing. When configuring with V8's <EMCLASS="emphasis">m4</EM>technique, the default is 2.A value of 4 is the maximum formost machines that forward mail directly over the Internet.Higher values require that you increase the number of openfiles allowed per process at the system level.</P><PCLASS="para">Caching is of greatest benefit in processing the queue.V8 <EMCLASS="emphasis">sendmail</EM> automatically adapts to conditionsto avoid caching connections for each invocation of <EMCLASS="emphasis">sendmail</EM>.Maintenance of an open connectioncan delay return to the user's program, for example,and too many open connectionsto a common target host can create a high load on that host.</P><PCLASS="para">When caching is enabled with this <CODECLASS="literal">ConnectionCacheSize</CODE> (<CODECLASS="literal">k</CODE>) option, the<CODECLASS="literal">ConnectionCacheTimeout</CODE> (<CODECLASS="literal">K</CODE>) option should also be declared toset the connection timeout.The <CODECLASS="literal">ConnectionCacheSize</CODE> (<CODECLASS="literal">k</CODE>) option is not safe.  If specified from the command line,it may cause <EMCLASS="emphasis">sendmail</EM> to relinquish its <EMCLASS="emphasis">root</EM> privilege.</P></DIV></BLOCKQUOTE></DIV><DIVCLASS="refentry"><DIVCLASS="refnamediv"><H3CLASS="refname"><ACLASS="refname"NAME="SML2-CH-34-SECT-8-11">34.8.11 ConnectionCacheTimeout (K)</A></H3><PCLASS="refpurpose">Multiple-SMTP time-outs</P>(V8.1 and above)</DIV><BLOCKQUOTE><DIVCLASS="refsect1"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-42512"></A><ACLASS="indexterm"NAME="AUTOID-42515"></A><ACLASS="indexterm"NAME="AUTOID-42517"></A><ACLASS="indexterm"NAME="AUTOID-42520"></A>Maintaining a cached connection to another host (see <ACLASS="xref"HREF="ch34_08.htm#SML2-CH-34-SECT-8-10"TITLE="">Section 34.8.10</A>) imposes a penalty on both the local host and the other host. Each connection meansthat the other host is running a forked <EMCLASS="emphasis">sendmail</EM> processthat is doing nothing but waiting for an SMTP QUIT messageto close the connection or for more mail to arrive.The local host has open sockets that consume system resources.</P><PCLASS="para">To limit the impact on other hosts, V8 <EMCLASS="emphasis">sendmail</EM> offersthe <CODECLASS="literal">ConnectionCacheTimeout</CODE> (<CODECLASS="literal">K</CODE>) option. This option tells <EMCLASS="emphasis">sendmail</EM> how longto wait for another mail message before closing the connection.</P><PCLASS="para">The forms of the <CODECLASS="literal">ConnectionCacheTimeout</CODE> (<CODECLASS="literal">K</CODE>) option are as follows:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">OK<CODECLASS="replaceable"><I>wait                                 </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> configuration file (V8.6)</I>-oK<CODECLASS="replaceable"><I>wait                                </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> command line (V8.6)</I>O ConnectionCacheTimeout=<CODECLASS="replaceable"><I>wait          </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> configuration file (beginning with V8.7)</I>-OConnectionCacheTimeout=<CODECLASS="replaceable"><I>wait          </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> command line (beginning with V8.7)</I>define(`confMCI_CACHE_TIMEOUT',<CODECLASS="replaceable"><I>wait</I></CODE>)   <ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> V8 m4 configuration</I></PRE></BLOCKQUOTE></P><PCLASS="para">There may be optional whitespace preceding the<CODECLASS="replaceable"><I>wait</I></CODE>. The <CODECLASS="replaceable"><I>wait</I></CODE> is of type time and specifiesthe period to wait before timing out a cached connection.If this option is entirely missing, the default (for both the configuration file and the <EMCLASS="emphasis">m4</EM> configuration technique)is 300 seconds(five minutes). When specifying the <CODECLASS="replaceable"><I>wait</I></CODE>, be sure toinclude a trailing <CODECLASS="literal">s</CODE> character. If you don't, the number thatyou specify is interpreted by default as a number of minutes.The <CODECLASS="replaceable"><I>wait</I></CODE> should never be longer than five minutes.A value of 0 essentially turns off caching.</P><PCLASS="para">This <CODECLASS="literal">ConnectionCacheTimeout</CODE> (<CODECLASS="literal">K</CODE>) option has an effect only if the <CODECLASS="literal">ConnectionCacheSize</CODE> (<CODECLASS="literal">k</CODE>) option (see<ACLASS="xref"HREF="ch34_08.htm#SML2-CH-34-SECT-8-10"TITLE="">Section 34.8.10</A>) is also declared. The <CODECLASS="literal">ConnectionCacheTimeout</CODE> (<CODECLASS="literal">K</CODE>) option is not safe.  If specified from the command line,it may cause <EMCLASS="emphasis">sendmail</EM> to relinquish its <EMCLASS="emphasis">root</EM> privilege.</P></DIV></BLOCKQUOTE></DIV><DIVCLASS="refentry"><DIVCLASS="refnamediv"><H3CLASS="refname"><ACLASS="refname"NAME="SML2-CH-34-SECT-8-12">34.8.12 ConnectionRateThrottle</A></H3><PCLASS="refpurpose">Incoming SMTP connection rate</P>(V8.8 and above)</DIV><BLOCKQUOTE><DIVCLASS="refsect1"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-42570"></A><ACLASS="indexterm"NAME="AUTOID-42572"></A><ACLASS="indexterm"NAME="AUTOID-42575"></A>Whenever an outside site connects to <EMCLASS="emphasis">sendmail</EM>'s SMTP port, <EMCLASS="emphasis">sendmail</EM><EMCLASS="emphasis">fork</EM>(2)s a copy of itself. That copy (the child) processes the incomingmessage.  Beginning with V8.8, <EMCLASS="emphasis">sendmail</EM> keeps track of how many child processesit has spawned to handle incoming connections. The <CODECLASS="literal">MaxDaemonChildren</CODE>(see <ACLASS="xref"HREF="ch34_08.htm#SML2-CH-34-SECT-8-35"TITLE="">Section 34.8.35</A>) option can be used to reject connections when the number of children has exceeded a specified threshold.</P><PCLASS="para">A different approach is to slow down acceptance of, rather than to reject,new connections when the number of children becomes too high. This allows the <CODECLASS="literal">QueueLA</CODE> (<CODECLASS="literal">x</CODE>) option (see <ACLASS="xref"HREF="ch34_08.htm#SML2-CH-34-SECT-8-50"TITLE="">Section 34.8.50</A>)and the <CODECLASS="literal">RefuseLA</CODE> (<CODECLASS="literal">X</CODE>) option(see <ACLASS="xref"HREF="ch34_08.htm#SML2-CH-34-SECT-8-54"TITLE="">Section 34.8.54</A>) to operate properlyeven if many incoming connections arrive simultaneously.You slow incoming connectionswith the <CODECLASS="literal">ConnectionRateThrottle</CODE> option:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">O ConnectionRateThrottle=<CODECLASS="replaceable"><I>num                      </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> V8.8 and above</I>define(`confCONNECTION_RATE_THROTTLE', <CODECLASS="replaceable"><I>num)       </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> V8 m4 technique</I></PRE></BLOCKQUOTE></P><PCLASS="para">The <CODECLASS="replaceable"><I>num</I></CODE> is of type numeric. If it is present and greater thanzero, connections are slowed when more than that number of connections arrive within one second.If <CODECLASS="replaceable"><I>num</I></CODE> is less than or equal to zero, or absent, no thresholdis enforced. If the entire option is missing, the default becomes zero.The default for the <EMCLASS="emphasis">m4</EM> technique is to omit this option.</P><PCLASS="para">To illustrate how the slowdown operates, consider a situation in which<CODECLASS="replaceable"><I>num</I></CODE> is set to 3, and 12 connections come in simultaneously.The first three connections are handled immediately. The next threeare handled after one second. The three after that are handledafter two seconds, and so on. The twelfth connection wouldbe handled after a delay of three seconds.</P><PCLASS="para">Note that this option and the <CODECLASS="literal">MaxDaemonChildren</CODE>option (see <ACLASS="xref"HREF="ch34_08.htm#SML2-CH-34-SECT-8-35"TITLE="">Section 34.8.35</A>) affect incoming connections differently.</P><PCLASS="para">The <CODECLASS="literal">ConnectionRateThrottle</CODE> option is not safe.  If specified from the command line,it may cause <EMCLASS="emphasis">sendmail</EM> to relinquish its <EMCLASS="emphasis">root</EM> privilege.</P></DIV></BLOCKQUOTE></DIV><DIVCLASS="refentry"><DIVCLASS="refnamediv"><H3CLASS="refname"><ACLASS="refname"NAME="SML2-CH-34-SECT-8-13">34.8.13 DaemonPortOptions (O)</A></H3><PCLASS="refpurpose">Options for the daemon</P>(V8.1 and above)</DIV><BLOCKQUOTE><DIVCLASS="refsect1"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-42619"></A><ACLASS="indexterm"NAME="AUTOID-42621"></A>The <CODECLASS="literal">DaemonPortOptions</CODE> (<CODECLASS="literal">O</CODE>) option is used tocustomize the daemon's SMTP service. The form for thisoption is as follows:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">OO<CODECLASS="replaceable"><I>pair,pair,pair                                </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> configuration file (old form)</I>-oO<CODECLASS="replaceable"><I>pair,pair,pair                               </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> command line (old form)</I>O DaemonPortOptions=<CODECLASS="replaceable"><I>pair,pair,pair              </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> configuration file (beginning with V8.7)</I>-ODaemonPortOptions=<CODECLASS="replaceable"><I>pair,pair,pair              </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> command line (beginning with V8.7)</I>define(`confDAEMON_OPTIONS',`<CODECLASS="replaceable"><I>pair,pair,pair</I></CODE>')   <ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> V8 m4 configuration</I></PRE></BLOCKQUOTE></P><PCLASS="para">The <CODECLASS="literal">DaemonPortOptions</CODE> (<CODECLASS="literal">O</CODE>) is followed by a comma-separated listof pairs, in which each pair is of the form:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">key=value</PRE></BLOCKQUOTE></P><PCLASS="para">Only six keys are available, and prior to V8.7 they were case-sensitive.Prior to V8.7 an unknown key was silently ignored. Now an unknownkey not only is ignored but also causes following error to be printed:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">DaemonPortOptions unknown parameter &quot;<ICLASS="lineannotation">key</I>&quot;</PRE></BLOCKQUOTE></P><PCLASS="para">The list of all currently defined <CODECLASS="replaceable"><I>key</I></CODE>s is shown in <ACLASS="xref"HREF="ch34_08.htm#SML2-CH-34-TAB-11"TITLE="DaemonPortOptions Option Keywords">Table 34.12</A>.</P><TABLECLASS="table"><CAPTIONCLASS="table"><ACLASS="title"NAME="SML2-CH-34-TAB-11">Table 34.12: DaemonPortOptions Option Keywords</A></CAPTION><THEADCLASS="thead"><TRCLASS="row"VALIGN="TOP"><THCLASS="entry"ALIGN="LEFT"ROWSPAN="1"COLSPAN="1">Key</TH><THCLASS="entry"ALIGN="LEFT"ROWSPAN="1"COLSPAN="1"></TH><THCLASS="entry"ALIGN="LEFT"ROWSPAN="1"COLSPAN="1">Meaning</TH></TR></THEAD><TBODYCLASS="tbody"><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Addr</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch34_08.htm#SML2-CH-34-SECT-8-13-1"TITLE="DaemonPortOptions=Addr">Section 34.8.13.1, "DaemonPortOptions=Addr"</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><PCLASS="para">The network to accept connection from</P></TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Family</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch34_08.htm#SML2-CH-34-SECT-8-13-2"TITLE="DaemonPortOptions=Family">Section 34.8.13.2, "DaemonPortOptions=Family"</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><PCLASS="para">The type network we are connected to</P></TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Listen</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch34_08.htm#SML2-CH-34-SECT-8-13-3"TITLE="DaemonPortOptions=Listen">Section 34.8.13.3, "DaemonPortOptions=Listen"</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><PCLASS="para">The size of the <EMCLASS="emphasis">listen</EM>(2) queue</P></TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Port</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch34_08.htm#SML2-CH-34-SECT-8-13-4"TITLE="DaemonPortOptions=Port">Section 34.8.13.4, "DaemonPortOptions=Port"</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><PCLASS="para">The port number on which <EMCLASS="emphasis">sendmail</EM> should listen</P></TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">ReceiveSize</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch34_08.htm#SML2-CH-34-SECT-8-13-5"TITLE="DaemonPortOptions=ReceiveSize">Section 34.8.13.5, "DaemonPortOptions=ReceiveSize"</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><PCLASS="para">The size of the TCP/IP receive buffer</P></TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">SendSize</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch34_08.htm#SML2-CH-34-SECT-8-13-6"TITLE="DaemonPortOptions=SendSize">Section 34.8.13.6, "DaemonPortOptions=SendSize"</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><PCLASS="para">The size of the TCP/IP send buffer</P></TD></TR></TBODY></TABLE><PCLASS="para">Only the first character in each <CODECLASS="replaceable"><I>key</I></CODE> is recognized,so a succinct declaration such as the following can be usedto change the port used by the daemon:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">OOP=26,A=our-net    # Only listen for local mail                 <ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> old form</I>O DaemonPortOptions=P=26,A=our-net  # Only listen for local mail <ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> beginning with V8.7</I></PRE></BLOCKQUOTE></P><PCLASS="para">The <CODECLASS="literal">O</CODE> option is not safe.  If specified from the command line,it may cause <EMCLASS="emphasis">sendmail</EM> to relinquish its <EMCLASS="emphasis">root</EM> privilege.&#13;</P><DIVCLASS="refsect2"><H4CLASS="refsect2"><ACLASS="title"NAME="SML2-CH-34-SECT-8-13-1">34.8.13.1 DaemonPortOptions=Addr</A></H4><PCLASS="para">The <CODECLASS="literal">Addr</CODE> key is used to specify the networkto use. The <CODECLASS="literal">value</CODE> is the name[7]or IP address of one of your network interfaces:</P><BLOCKQUOTECLASS="footnote"><PCLASS="para">[7] Names did not work prior to V8.8 <EMCLASS="emphasis">sendmail</EM>.</P></BLOCKQUOTE><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">O DaemonPortOptions=Addr=128.32.204.25     # listen to our internal network only</PRE></BLOCKQUOTE></P><PCLASS="para">If the <CODECLASS="literal">Addr</CODE> pair is omitted, the default networkbecomes INADDR_ANY, which allows connections from any network.&#13;</P></DIV><DIVCLASS="refsect2"><H4CLASS="refsect2"><ACLASS="title"NAME="SML2-CH-34-SECT-8-13-2">34.8.13.2 DaemonPortOptions=Family</A></H4><PCLASS="para">The <CODECLASS="literal">Family</CODE> key is used to specify the network family.The legal possible values are <EMCLASS="emphasis">inet</EM> for AF_INET,<EMCLASS="emphasis">iso</EM> for AF_ISO, <EMCLASS="emphasis">ns</EM> for AF_NS, and <EMCLASS="emphasis">x.25</EM> for AF_CCITT. </P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">O DaemonPortOptions=Family=iso</PRE></BLOCKQUOTE></P><PCLASS="para">Note that only <EMCLASS="emphasis">inet</EM> and <EMCLASS="emphasis">iso</EM> arecurrently supported. The default is <EMCLASS="emphasis">inet</EM>.Also note that <EMCLASS="emphasis">inet</EM> requires NETINET to be defined,and <EMCLASS="emphasis">iso</EM> requires NETISO to be defined when<EMCLASS="emphasis">sendmail</EM> is being compiled (see <ACLASS="xref"HREF="ch18_08.htm#SML2-CH-18-SECT-8-26"TITLE="">Section 18.8.26, NET...</A>).&#13;</P></DIV><DIVCLASS="refsect2"><H4CLASS="refsect2"><ACLASS="title"NAME="SML2-CH-34-SECT-8-13-3">34.8.13.3 DaemonPortOptions=Listen</A></H4><PCLASS="para">When <EMCLASS="emphasis">sendmail</EM> begins to run in <EMCLASS="emphasis">daemon</EM> mode, itexecutes a <EMCLASS="emphasis">listen</EM>(2) system call as part of monitoringits SMTP port for incoming mail. The second argument to<EMCLASS="emphasis">listen</EM>(2) defines the maximum length to which the incomingqueue of pending connections may grow.  If a connection requestarrives with the queue full, the client will receive an errorthat indicates ECONNREFUSED. This <CODECLASS="literal">Listen</CODE> keyis used to change the size of the incoming queue from itsdefault of 10. If <CODECLASS="literal">Listen</CODE> is less than or equal to zero, <EMCLASS="emphasis">listen</EM>(2) will silently set its own default. But note thatsome kernels may have built-in defaults of their own, sosetting <CODECLASS="literal">Listen</CODE> may have no effect at all.&#13;</P></DIV><DIVCLASS="refsect2"><H4CLASS="refsect2"><ACLASS="title"NAME="SML2-CH-34-SECT-8-13-4">34.8.13.4 DaemonPortOptions=Port</A></H4><PCLASS="para">The <CODECLASS="literal">Port</CODE> key is used to specify the serviceport on which the daemon should listen. This isnormally the port called <CODECLASS="literal">smtp</CODE>, as defined inthe <EMCLASS="emphasis">/etc/services</EM> file. The value may be eithera services string (such as <CODECLASS="literal">smtp</CODE>) or anumber (such as 25). This key is useful inside domainsthat are protected by a firewall. By specifying anon-standard port, the firewall can communicatein a more secure manner with the internal networkwhile still accepting mail on the normal port fromthe outside world:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">O DaemonPortOptions=Port=26</PRE></BLOCKQUOTE></P><PCLASS="para">If this pair is missing, the port defaults to <CODECLASS="literal">smtp</CODE>.&#13;</P></DIV><DIVCLASS="refsect2"><H4CLASS="refsect2"><ACLASS="title"NAME="SML2-CH-34-SECT-8-13-5">34.8.13.5 DaemonPortOptions=ReceiveSize</A></H4><PCLASS="para">The <CODECLASS="literal">ReceiveSize</CODE> key is used to specify the size ofthe TCP/IP receive buffer. The value is a size in bytes.This should not be set unless you are having performance problems.Slow links (such as 9.6K SL/IP lines) might profit from a settingof 256, for example:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">O DaemonPortOptions=ReceiveSize=256</PRE></BLOCKQUOTE></P><PCLASS="para">The default value is set by the system (see <EMCLASS="emphasis">setsockopt</EM>(2)).&#13;</P></DIV><DIVCLASS="refsect2"><H4CLASS="refsect2"><ACLASS="title"NAME="SML2-CH-34-SECT-8-13-6">34.8.13.6 DaemonPortOptions=SendSize</A></H4><PCLASS="para">The <CODECLASS="literal">SendSize</CODE> key is used to specify the size of the TCP/IPsend buffer.The value is a size in bytes.This should not be set unless you are having performance problems.Slow links (such as 9.6K SL/IP lines) might profit from a settingof 256, for example:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">O DaemonPortOptions=SendSize=256</PRE></BLOCKQUOTE></P><PCLASS="para">The default value is set by the system (see <EMCLASS="emphasis">setsockopt</EM>(2)).</P></DIV></DIV></BLOCKQUOTE></DIV><DIVCLASS="refentry"><DIVCLASS="refnamediv"><H3CLASS="refname"><ACLASS="refname"NAME="SML2-CH-34-SECT-8-14">34.8.14 DefaultCharSet</A></H3><PCLASS="refpurpose">Content-Type: character set</P>(V8.7 and above)</DIV><BLOCKQUOTE><DIVCLASS="refsect1"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-42783"></A><ACLASS="indexterm"NAME="AUTOID-42786"></A><ACLASS="indexterm"NAME="AUTOID-42789"></A><ACLASS="indexterm"NAME="AUTOID-42792"></A><ACLASS="indexterm"NAME="AUTOID-42795"></A><ACLASS="indexterm"NAME="AUTOID-42797"></A>When a mail message is converted from 8 to 7 bits(see the <CODECLASS="literal">EightBitMode</CODE> (<CODECLASS="literal">8</CODE>)option in <ACLASS="xref"HREF="ch34_08.htm#SML2-CH-34-SECT-8-22"TITLE="">Section 34.8.22</A>), it is importantthat the result look like a MIME message. V8.7 <EMCLASS="emphasis">sendmail</EM> firstoutputs the following header if one is not already present:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">MIME-Version: 1.0</PRE></BLOCKQUOTE></P><PCLASS="para">After that, V8.7 <EMCLASS="emphasis">sendmail</EM> looks for a <CODECLASS="literal">Content-Type:</CODE> header(see <ACLASS="xref"HREF="ch35_10.htm#SML2-CH-35-SECT-10-9"TITLE="">Section 35.10.9, Content-Type:</A>).If none is found, the following is inserted, where <CODECLASS="replaceable"><I>charset</I></CODE>is the value declared for this option:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">Content-Type: text/plain; charset=<CODECLASS="replaceable"><I>charset</I></CODE></PRE></BLOCKQUOTE></P><PCLASS="para">The forms of the <CODECLASS="literal">DefaultCharSet</CODE> option are as follows:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">O DefaultCharSet=<CODECLASS="replaceable"><I>charset</I></CODE>                  <ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> configuration file</I>-ODefaultCharSet=<CODECLASS="replaceable"><I>charset</I></CODE>                  <ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> command line</I>define(`confDEF_CHAR_SET',<CODECLASS="replaceable"><I>charset</I></CODE>)        <ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> m4 configuration</I></PRE></BLOCKQUOTE></P><PCLASS="para">If <CODECLASS="literal">DefaultCharSet</CODE> is undefined, <CODECLASS="replaceable"><I>charset</I></CODE>defaults to the string &quot;unknown-8bit.&quot;The default for the <EMCLASS="emphasis">m4</EM> technique is to omit this option.</P><PCLASS="para">Note that if the <CODECLASS="literal">C=</CODE> equate (<ACLASS="xref"HREF="ch30_04.htm#SML2-CH-30-SECT-4-2"TITLE="">Section 30.4.2, C=</A>)is present for the sender's delivery agent, thatcharacter set supersedes the <CODECLASS="literal">DefaultCharSet</CODE>.</P><PCLASS="para">The <CODECLASS="literal">DefaultCharSet</CODE> option is safe. If specified from the command line,<EMCLASS="emphasis">sendmail</EM> will not relinquish its <EMCLASS="emphasis">root</EM> privilege.</P></DIV></BLOCKQUOTE></DIV><DIVCLASS="refentry"><DIVCLASS="refnamediv"><H3CLASS="refname"><ACLASS="refname"NAME="SML2-CH-34-SECT-8-15">34.8.15 DefaultUser (g)(u)</A></H3><PCLASS="refpurpose">Default delivery agent identity</P>(All versions)</DIV><BLOCKQUOTE><DIVCLASS="refsect1"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-42843"></A><ACLASS="indexterm"NAME="AUTOID-42846"></A><ACLASS="indexterm"NAME="AUTOID-42849"></A>The <EMCLASS="emphasis">sendmail</EM> program can be run as an <EMCLASS="emphasis">suid</EM> <EMCLASS="emphasis">root</EM> process(that is, with the permissions of the <EMCLASS="emphasis">root</EM>, no matter who runs it)or as an ordinaryprocess, run by an ordinary (nonprivileged) user (that is,with <EMCLASS="emphasis">root</EM> privilege <EMCLASS="emphasis">only</EM> if it is run by <EMCLASS="emphasis">root</EM>).When <EMCLASS="emphasis">sendmail</EM> is run so that it has <EMCLASS="emphasis">root</EM>privilege, it must give up that privilege under certain circumstancesto remain secure.[8]When it can't set its identityto that of a real user, <EMCLASS="emphasis">sendmail</EM> sets its <EMCLASS="emphasis">gid</EM> to that specifiedby the <CODECLASS="literal">g</CODE> option and its <EMCLASS="emphasis">uid</EM> to that specified by the <CODECLASS="literal">u</CODE>option. For version 8.7 and above, the<CODECLASS="literal">DefaultUser</CODE> option sets both the user and group identities.[9]</P><BLOCKQUOTECLASS="footnote"><PCLASS="para">[8] V8 is more security conscious and presumes that it is still <EMCLASS="emphasis">root</EM> even if ithas given up that privilege.</P><PCLASS="para">[9] In essence, the <CODECLASS="literal">g</CODE> and <CODECLASS="literal">u</CODE> options have been deprecated in favor of a single <CODECLASS="literal">DefaultUser</CODE> option, which sets both.</P></BLOCKQUOTE><PCLASS="para">When <EMCLASS="emphasis">sendmail</EM> is running with <EMCLASS="emphasis">root</EM> privilege andwhen the <CODECLASS="literal">F=S</CODE> delivery agent flag (see <ACLASS="xref"HREF="ch30_08.htm#SML2-CH-30-SECT-8-40"TITLE="">Section 30.8.40, F=S</A>)is <EMCLASS="emphasis">not</EM> specified, <EMCLASS="emphasis">sendmail</EM>changes its owner and group identity to that of an ordinaryuser in the following circumstances:&#13;</P><DLCLASS="variablelist"><DTCLASS="term">1.</DT><DDCLASS="listitem"><PCLASS="para">If the mail message is forwarded because of a user's <EMCLASS="emphasis">~/.forward</EM>file and if delivery is via a deliveryagent that has the <CODECLASS="literal">F=o</CODE> flag set (see<ACLASS="xref"HREF="ch30_08.htm#SML2-CH-30-SECT-8-33"TITLE="">Section 30.8.33, F=o</A>), then <EMCLASS="emphasis">sendmail</EM> changes its owner andgroup identity to that of the user whose <EMCLASS="emphasis">~/.forward</EM> file was read.&#13;</P></DD><DTCLASS="term">2.</DT><DDCLASS="listitem"><PCLASS="para">Otherwise, if the mail message is being delivered through an<EMCLASS="emphasis">aliases</EM>(5) file's <CODECLASS="literal">:include:</CODE> mailing list expansionand if delivery is via a deliveryagent that has the <CODECLASS="literal">F=o</CODE> flag set (see <ACLASS="xref"HREF="ch30_08.htm#SML2-CH-30-SECT-8-33"TITLE="">Section 30.8.33</A>)or to a file, then <EMCLASS="emphasis">sendmail</EM> changes its owner andgroup identity to that of the owner of the file that wasspecified by the <CODECLASS="literal">:include:</CODE> line.&#13;</P></DD><DTCLASS="term">3.</DT><DDCLASS="listitem"><PCLASS="para">Otherwise, if the sender of the mail message is localand if delivery is via a deliveryagent that does not have the <CODECLASS="literal">F=o</CODE> flag set (see <ACLASS="xref"HREF="ch30_08.htm#SML2-CH-30-SECT-8-33"TITLE="">Section 30.8.33</A>)or to a file, then <EMCLASS="emphasis">sendmail</EM> changes its owner andgroup identity to that of the sender. If the sender is <EMCLASS="emphasis">root</EM>,<EMCLASS="emphasis">sendmail</EM> changes its owner andgroup identity to that specified by the <CODECLASS="literal">DefaultUser</CODE>option.&#13;</P></DD><DTCLASS="term">4.</DT><DDCLASS="listitem"><PCLASS="para">Otherwise, <EMCLASS="emphasis">sendmail</EM> changes its owner andgroup identity to that specified by the <CODECLASS="literal">DefaultUser</CODE>option.</P></DD></DL><PCLASS="para">These user and group defaults are ignoredif the delivery agent's <CODECLASS="literal">F=</CODE> equate includes the <CODECLASS="literal">S</CODE> flag(run as another specified user). These user and group defaults are also ignoredfor any delivery agent that specifies the <CODECLASS="literal">U=</CODE> equate (see<ACLASS="xref"HREF="ch30_04.htm#SML2-CH-30-SECT-4-13"TITLE="">Section 30.4.13, U=</A>), which customizes user and group identitiesat the individual delivery agent level, but only if the <CODECLASS="literal">F=o</CODE>equate is not specified.</P><PCLASS="para">The forms of the <CODECLASS="literal">DefaultUser</CODE> (<CODECLASS="literal">u</CODE>) (<CODECLASS="literal">g</CODE>) option are as follows:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">Ou<CODECLASS="replaceable"><I>uid                               </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> user, configuration file (old form)</I>-ou<CODECLASS="replaceable"><I>uid                              </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> user, command line (old form)</I>Og<CODECLASS="replaceable"><I>gid                               </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> group, configuration file (old form)</I>-og<CODECLASS="replaceable"><I>gid                              </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> group, command line (old form)</I>Ou<CODECLASS="replaceable"><I>uid:gid                           </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> both, configuration file (beginning with V8.7)</I>-ou<CODECLASS="replaceable"><I>uid:gid                          </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> both, command line (beginning with V8.7)</I>O DefaultUser=<CODECLASS="replaceable"><I>uid:gid               </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> both, configuration file (beginning with V8.7)</I>-ODefaultUser=<CODECLASS="replaceable"><I>uid:gid               </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> both, command line (beginning with V8.7)</I>define(`confDEF_USER_ID',<CODECLASS="replaceable"><I>uid</I></CODE>)       <ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> user, V8 m4 configuration</I>define(`confDEF_GROUP_ID',<CODECLASS="replaceable"><I>gid</I></CODE>)      <ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> group, V8 m4 configuration (obsolete as of V8.7)</I>define(`confDEF_USER_ID',<CODECLASS="replaceable"><I>uid:gid</I></CODE>)   <ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> both, V8 m4 configuration</I></PRE></BLOCKQUOTE></P><PCLASS="para">The arguments <CODECLASS="replaceable"><I>uid</I></CODE> and <CODECLASS="replaceable"><I>gid</I></CODE> are of type numeric. Beginning withV8 <EMCLASS="emphasis">sendmail</EM>, user or group names can also be text (for example, <CODECLASS="literal">nobody</CODE>).Beginning with V8.7 <EMCLASS="emphasis">sendmail</EM>, the user definitionwith <CODECLASS="literal">DefaultUser</CODE> or <CODECLASS="literal">u</CODE> can specify both user and group.For example,</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">O DefaultUser=daemon:nogroup</PRE></BLOCKQUOTE></P><PCLASS="para">There may be arbitrary whitespace between the user (<CODECLASS="literal">daemon</CODE>), thecolon,[10]and the group (<CODECLASS="literal">nogroup</CODE>). If the group is missing, thevalue that is assigned to it varies depending on the nature of the <CODECLASS="literal">uid</CODE>specification.If the <CODECLASS="literal">uid</CODE> is a name, the group becomesthe default group of that user as defined in the <EMCLASS="emphasis">passwd</EM>(5) file.If the <CODECLASS="literal">uid</CODE> is numeric, the value in the group is not changed.For example, consider this <EMCLASS="emphasis">passwd</EM>(5) file entry,where the group <CODECLASS="literal">12</CODE> corresponds to the group name <CODECLASS="literal">bumgroup</CODE>:</P><BLOCKQUOTECLASS="footnote"><PCLASS="para">[10] The character between the user and group notations can be a colon,a period, or a forward slash. The colon is recommended.</P></BLOCKQUOTE><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">bogus:*:10:12::/:</PRE></BLOCKQUOTE></P><PCLASS="para">Then all the following are equivalent:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">O DefaultUser=bogusO DefaultUser=bogus:12O DefaultUser=bogus:bumgroup</PRE></BLOCKQUOTE></P><TABLECLASS="informaltable"><TBODYCLASS="tbody"><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><CODECLASS="literal">Og12</CODE></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><IMGSRC="../chars/lbbcb.gif"ALT="[lbbcb]"></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><EMCLASS="emphasis"> taken together </EM></TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><CODECLASS="literal">Ou10</CODE></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><IMGSRC="../chars/ltbcb.gif"ALT="[ltbcb]"></TD></TR></TBODY></TABLE><PCLASS="para">But the following combination causes the group to reset to 12:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">Og77Oubogus</PRE></BLOCKQUOTE></P><PCLASS="para">Under pre-8.7 <EMCLASS="emphasis">sendmail</EM>a missing argument causes the value 0 to be used for the respective user or group identities.If an entire <CODECLASS="literal">u</CODE> or <CODECLASS="literal">g</CODE> option ismissing, the default value becomes 1 (usually <EMCLASS="emphasis">daemon</EM>). UnderV8.7 <EMCLASS="emphasis">sendmail</EM> the default is -1.In NFS-mounted environments, safe values for these options areone less than those of the user <EMCLASS="emphasis">nobody</EM> and the group <EMCLASS="emphasis">nogroup</EM>.</P><PCLASS="para">For maximum security, you should create a special pseudo-user andassign that pseudo-user to this option. (See <ACLASS="xref"HREF="ch22_08.htm#SML2-CH-22-SECT-8-3-1"TITLE="The DefaultUser option">Section 22.8.3.1, "The DefaultUser option"</A>for a more detailed description of this approach.)</P><PCLASS="para">The <CODECLASS="literal">g</CODE>, <CODECLASS="literal">u</CODE>, and <CODECLASS="literal">DefaultUser</CODE> options are not safe. If specified from the command line,they may cause <EMCLASS="emphasis">sendmail</EM> to relinquish its <EMCLASS="emphasis">root</EM> privilege.</P></DIV></BLOCKQUOTE></DIV><DIVCLASS="refentry"><DIVCLASS="refnamediv"><H3CLASS="refname"><ACLASS="refname"NAME="SML2-CH-34-SECT-8-16">34.8.16 DeliveryMode (d)</A></H3><PCLASS="refpurpose">Set delivery mode</P>(All versions)</DIV><BLOCKQUOTE><DIVCLASS="refsect1"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-43018"></A>There are four modes that <EMCLASS="emphasis">sendmail</EM> can use fordelivering mail. Three have always been a part of <EMCLASS="emphasis">sendmail</EM>: background, interactive, and queue-only.One is new to V8.7 <EMCLASS="emphasis">sendmail</EM>: deferred.</P><PCLASS="para">The mode is selected with the <CODECLASS="literal">DeliveryMode</CODE> (<CODECLASS="literal">d</CODE>) option:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">Od<CODECLASS="replaceable"><I>mode                             </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> configuration file (old form)</I>-od<CODECLASS="replaceable"><I>mode                            </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> command line (old form)</I>O DeliveryMode=<CODECLASS="replaceable"><I>mode                </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> configuration file (beginning with V8.7)</I>-ODeliveryMode=<CODECLASS="replaceable"><I>mode                </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> command line (beginning with V8.7)</I>define(`confDELIVERY_MODE',<CODECLASS="replaceable"><I>mode</I></CODE>)   <ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> V8 m4 configuration</I></PRE></BLOCKQUOTE></P><PCLASS="para">The <CODECLASS="replaceable"><I>mode</I></CODE> argument is of type character. It is case sensitive (mustbe lowercase) and is selected from one of the keywordsshown in<ACLASS="xref"HREF="ch34_08.htm#SML2-CH-34-TAB-12"TITLE="DeliveryMode Option Keywords">Table 34.13</A>.Only the first letter of each is recognized, but we recommend full words for improved clarity.</P><TABLECLASS="table"><CAPTIONCLASS="table"><ACLASS="title"NAME="SML2-CH-34-TAB-12">Table 34.13: DeliveryMode Option Keywords</A></CAPTION><THEADCLASS="thead"><TRCLASS="row"VALIGN="TOP"><THCLASS="entry"ALIGN="LEFT"ROWSPAN="1"COLSPAN="1">Keyword</TH><THCLASS="entry"ALIGN="LEFT"ROWSPAN="1"COLSPAN="1">Description</TH><THCLASS="entry"ALIGN="LEFT"ROWSPAN="1"COLSPAN="1"></TH></TR></THEAD><TBODYCLASS="tbody"><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><CODECLASS="literal">background</CODE></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch34_08.htm#SML2-CH-34-SECT-8-16-1"TITLE="DeliveryMode=background">Section 34.8.16.1, "DeliveryMode=background"</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><PCLASS="para">Background (asynchronous) delivery</P></TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><CODECLASS="literal">deferred</CODE></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch34_08.htm#SML2-CH-34-SECT-8-16-2"TITLE="DeliveryMode=deferred">Section 34.8.16.2, "DeliveryMode=deferred"</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><PCLASS="para">Deferred (held as is) delivery (beginning with V8.7)</P></TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><CODECLASS="literal">interactive</CODE></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch34_08.htm#SML2-CH-34-SECT-8-16-3"TITLE="DeliveryMode=interactive">Section 34.8.16.3, "DeliveryMode=interactive"</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><PCLASS="para">Interactive (synchronous) delivery</P></TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><CODECLASS="literal">queueonly</CODE></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch34_08.htm#SML2-CH-34-SECT-8-16-4"TITLE="DeliveryMode=queueonly">Section 34.8.16.4, "DeliveryMode=queueonly"</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><PCLASS="para">Queued (held but processed) delivery</P></TD></TR></TBODY></TABLE><PCLASS="para">If the <CODECLASS="literal">mode</CODE> argument is missing,this option defaults to the <CODECLASS="literal">i</CODE> or interactive mode.If the entire <CODECLASS="literal">DeliveryMode</CODE> (<CODECLASS="literal">d</CODE>) option is missing, V8 <EMCLASS="emphasis">sendmail</EM> then defaults to background mode,but old <EMCLASS="emphasis">sendmail</EM> behaves unpredictably;consequently, this option should be considered mandatory. The default for a V8 <EMCLASS="emphasis">m4</EM> configuration is also background.</P><PCLASS="para">If the mode character is other than one of the first lowercase letters shown in<ACLASS="xref"HREF="ch34_08.htm#SML2-CH-34-TAB-12"TITLE="DeliveryMode Option Keywords">Table 34.13</A><EMCLASS="emphasis">sendmail</EM> will print and log the following errorand will immediately exit with an exit value of EX_USAGEas defined in <EMCLASS="emphasis">&lt;sysexits.h&gt;</EM>:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">Unknown delivery mode <CODECLASS="replaceable"><I>char</I></CODE></PRE></BLOCKQUOTE></P><PCLASS="para">Queue-only and deferred modes are only available if QUEUE was defined when <EMCLASS="emphasis">sendmail</EM> wascompiled (see <ACLASS="xref"HREF="ch18_08.htm#SML2-CH-18-SECT-8-37"TITLE="">Section 18.8.37, QUEUE</A>). If QUEUE was notdefined and one of these two modes is selected, <EMCLASS="emphasis">sendmail</EM>will print and log the following:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">need QUEUE to set -odqueue or -oddefer</PRE></BLOCKQUOTE></P><PCLASS="para">The <CODECLASS="literal">DeliveryMode</CODE> (<CODECLASS="literal">d</CODE>) option is safe.  Even if it is specified from the command line,<EMCLASS="emphasis">sendmail</EM> retains its <EMCLASS="emphasis">root</EM> privilege.&#13;</P><DIVCLASS="refsect2"><H4CLASS="refsect2"><ACLASS="title"NAME="SML2-CH-34-SECT-8-16-1">34.8.16.1 DeliveryMode=background</A></H4><PCLASS="para">Background mode&nbsp;- intended primarily[11]for use in the configuration file&nbsp;- allows <EMCLASS="emphasis">sendmail</EM> to run <EMCLASS="emphasis">asynchronously</EM>.This means that once <EMCLASS="emphasis">sendmail</EM> has gathered the entire messageand verified that the recipient is deliverable,it will <EMCLASS="emphasis">fork</EM>(3) a copy of itself and exit. The copy, runningin the background (asynchronously), will then handle the delivery. From the user's pointof view, this mode allows the mail interface program to actas though it sent the message nearly instantaneously.&#13;</P><BLOCKQUOTECLASS="footnote"><PCLASS="para">[11] A sending program (MUA) might need to use backgroundmode on the command line (<CODECLASS="literal">db</CODE>) if themessage is urgent and if the default in <EMCLASS="emphasis">sendmail</EM>'s configurationfile is to queue all messages (with <CODECLASS="literal">q</CODE> mode). </P></BLOCKQUOTE></DIV><DIVCLASS="refsect2"><H4CLASS="refsect2"><ACLASS="title"NAME="SML2-CH-34-SECT-8-16-2">34.8.16.2 DeliveryMode=deferred</A></H4><PCLASS="para">Deferred mode&nbsp;- for use in either the command line or the configurationfile&nbsp;- is much like queue-only mode except that all database lookups,including DNS,are deferred until the actual queue run. Deferred mode (new with V8.7)is preferredfor dial-on-demand sites (typically, modem-based SL/IP or PPPconnections). As in queue-only mode, all mail is queued forlater delivery, but with deferred mode, code inside <EMCLASS="emphasis">sendmail</EM> thatwould ordinarily interact with DNS is suppressed. This preventsthe modem from being dialed and connections from being established everytime mail is queued.&#13;</P></DIV><DIVCLASS="refsect2"><H4CLASS="refsect2"><ACLASS="title"NAME="SML2-CH-34-SECT-8-16-3">34.8.16.3 DeliveryMode=interactive</A></H4><PCLASS="para">Interactive mode&nbsp;- intended for use from the commandline&nbsp;- causes <EMCLASS="emphasis">sendmail</EM> to run <EMCLASS="emphasis">synchronously</EM>.This mode is useful primarily for debugging mail problems.Instead of going into the background with <EMCLASS="emphasis">fork</EM>(3), it runsin the foreground (synchronously). In this mode, error messages are printedback to the controlling terminal rather than being mailed tothe user as bounced mail. The <CODECLASS="literal">-v</CODE> command-line switch (see <ACLASS="xref"HREF="ch36_07.htm#SML2-CH-36-SECT-7-41"TITLE="">Section 36.7.41</A>)automatically sets the mode to interactive.&#13;</P></DIV><DIVCLASS="refsect2"><H4CLASS="refsect2"><ACLASS="title"NAME="SML2-CH-34-SECT-8-16-4">34.8.16.4 DeliveryMode=queueonly</A></H4><PCLASS="para">Queue-only mode&nbsp;- for use in either the command line or the configurationfile&nbsp;- causes<EMCLASS="emphasis">sendmail</EM> to synchronously queue mail.Queue-only mode is useful at sites that have huge amountsof UUCP mail or Usenet news batch feeds or when delivering tolow priority addresses such as mailing lists.Queuing has the beneficial effect of serializing delivery throughqueue runs, and it reduces the load on a machine that many parallelbackgrounded <EMCLASS="emphasis">sendmail</EM> processes can cause.Queue-only mode is typically supplied as a command-line option to <EMCLASS="emphasis">sendmail</EM> by the <EMCLASS="emphasis">uuxqt</EM>(8) program.When queue-only mode is selected, all mail isqueued for delivery, and none is actually delivered. A separate runof <EMCLASS="emphasis">sendmail</EM> with its <CODECLASS="literal">-q</CODE> command-line switch (see <ACLASS="xref"HREF="ch23_06.htm#SML2-CH-23-SECT-6-1"TITLE="Periodically with -q">Section 23.6.1, "Periodically with -q"</A>) is needed to actually process the queue. Note that addresses can still be looked up with DNS as a partof the queueing process. Consequently, queue-only mode is probably notsuitable for dial-on-demand sites.</P></DIV></DIV></BLOCKQUOTE></DIV><DIVCLASS="refentry"><DIVCLASS="refnamediv"><H3CLASS="refname"><ACLASS="refname"NAME="SML2-CH-34-SECT-8-17">34.8.17 DialDelay</A></H3><PCLASS="refpurpose">Connect failure retry time</P>(V8.7 and above)</DIV><BLOCKQUOTE><DIVCLASS="refsect1"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-43146"></A><ACLASS="indexterm"NAME="AUTOID-43148"></A>Many Internet providers allow small sites (such as home machines) todial up when there is a demand for network traffic to flow. Such connectionsare usually of short duration and use the PPP or SL/IP protocols.A problem can arise when thisdial-up-on-demand is instigated by <EMCLASS="emphasis">sendmail</EM>.[12]The process of negotiating a dial-up connection can take so longthat <EMCLASS="emphasis">sendmail</EM> will have its attempt to <EMCLASS="emphasis">connect</EM>(2) fail.(See also the <CODECLASS="literal">connect</CODE> keyword for the <CODECLASS="literal">Timeout</CODE>option in <ACLASS="xref"HREF="ch34_08.htm#SML2-CH-34-SECT-8-70-2"TITLE="Timeout.connect">Section 34.8.70.2</A>).To remedy this situation, V8.7 <EMCLASS="emphasis">sendmail</EM> offers the<CODECLASS="literal">DialDelay</CODE> option. It is declared like this:</P><BLOCKQUOTECLASS="footnote"><PCLASS="para">[12] Or by any other network-oriented program, such as FTP or Mosaic.</P></BLOCKQUOTE><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">O DialDelay=<CODECLASS="replaceable"><I>delay              </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> configuration file</I>-ODialDelay=<CODECLASS="replaceable"><I>delay              </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> command line</I>define(`confDIAL_DELAY',<CODECLASS="replaceable"><I>delay) </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> m4 configuration</I></PRE></BLOCKQUOTE></P><PCLASS="para">The argument <CODECLASS="replaceable"><I>delay</I></CODE> is of type time.If this option is entirely omitted or if <CODECLASS="replaceable"><I>delay</I></CODE> is omitted,the default is then zero and no delay is enabled.The default for the <EMCLASS="emphasis">m4</EM> configuration technique is also zero. If the unitof time is omitted from the time declaration, the default is seconds.</P><PCLASS="para">If <CODECLASS="replaceable"><I>delay</I></CODE> is nonzero and <EMCLASS="emphasis">sendmail</EM> has itsinitial <EMCLASS="emphasis">connect</EM>(2) fail, it will <EMCLASS="emphasis">sleep</EM>(3) for<CODECLASS="replaceable"><I>delay</I></CODE> seconds and then try to <EMCLASS="emphasis">connect</EM>(2) again.Note that <EMCLASS="emphasis">sendmail</EM> tries a second time only once, sothe <CODECLASS="replaceable"><I>delay</I></CODE> should be large enough to accommodate youranticipated worst-case delay.On the other hand, care should be taken toavoid excessively long delays that can make <EMCLASS="emphasis">sendmail</EM>appear to hang. No check is made by <EMCLASS="emphasis">sendmail</EM> for absurdly large valuesgiven to <CODECLASS="replaceable"><I>delay</I></CODE>.</P><PCLASS="para">The <CODECLASS="literal">DialDelay</CODE> option is safe. If it is specified from the command line,<EMCLASS="emphasis">sendmail</EM> will not relinquish its <EMCLASS="emphasis">root</EM> privilege.</P></DIV></BLOCKQUOTE></DIV><DIVCLASS="refentry"><DIVCLASS="refnamediv"><H3CLASS="refname"><ACLASS="refname"NAME="SML2-CH-34-SECT-8-18">34.8.18 DontExpandCnames</A></H3><PCLASS="refpurpose">Prevent CNAME expansion</P>(V8.7 and above)</DIV><BLOCKQUOTE><DIVCLASS="refsect1"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-43196"></A><ACLASS="indexterm"NAME="AUTOID-43198"></A>Ordinarily, the <CODECLASS="literal">$[</CODE> and <CODECLASS="literal">$]</CODE> operators (see <ACLASS="xref"HREF="ch28_06.htm#SML2-CH-28-SECT-6-6"TITLE="Canonicalize Hostname: $[ and $]">Section 28.6.6, "Canonicalize Hostname: $[ and $]"</A>)cause the enclosed hostname to be looked up with DNS andreplaced with the canonical name for that host. The canonicalname is the A DNS record. For example, considerthese DNS records:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">here.us.edu.    IN     A     123.45.67.89ftp.us.edu.     IN     CNAME here.us.edu.</PRE></BLOCKQUOTE></P><PCLASS="para">If the address <EMCLASS="emphasis">ftp.us.edu</EM> is fed to the <CODECLASS="literal">$[</CODE> and <CODECLASS="literal">$]</CODE> operators in the RHS of a rule:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">R...      $[ $1 $]</PRE></BLOCKQUOTE></P><PCLASS="para">then the rewritten result of passing <EMCLASS="emphasis">ftp.us.edu</EM> as <CODECLASS="literal">$1</CODE>will be the A record name <EMCLASS="emphasis">here.us.edu</EM>.This behavior is correct under RFC822 and RFC1123,but the IETF is currently moving toward a change.</P><PCLASS="para">Sometimes it is important for the CNAME to appear in emailheaders as the canonical name. One example might be that of an FTPservice moving from one machine to another during a transition phase.In that case, outgoing mail should appear to be from <EMCLASS="emphasis">ftp.us.edu</EM>,because the records will change after the move, and wewant to maintain the ability to reply to such mail.</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">here.us.edu.    IN     A     123.45.67.89     <ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> retired and gone</I>ftp.us.edu.     IN     CNAME <CODECLASS="userinput"><B>there.us.edu.</B></CODE><CODECLASS="userinput"><B>there.us.edu</B></CODE>.   IN     A     123.45.67.90</PRE></BLOCKQUOTE></P><PCLASS="para">Another possibility might be that of a mobile host (a workstationthat plugs into different networks and thus has different Arecords over time):</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">mobile.us.edu.    IN     CNAME monday.dc.gov.monday.dc.gov.    IN     A     12.34.56.78tuesday.foo.com.  IN     A     23.45.67.89</PRE></BLOCKQUOTE></P><PCLASS="para">Whenever this workstation is plugged in, its CNAMErecord is changed to point to the A record of the day:<EMCLASS="emphasis">monday.dc.gov</EM> on Monday and <EMCLASS="emphasis">tuesday.foo.com</EM>on Tuesday. But no matter what its A record happens to be,outgoing mail should look as though it came from <EMCLASS="emphasis">mobile.us.edu</EM>.</P><PCLASS="para">The <CODECLASS="literal">DontExpandCnames</CODE> option causes <EMCLASS="emphasis">sendmail</EM> to acceptCNAME records as canonical. It is intended for use onsending hosts with special CNAME needs and should notbe enabled without good reason. It is declared like this:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">O DontExpandCnames=<CODECLASS="replaceable"><I>bool			  </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> configuration file (V8.7)</I>-ODontExpandCnames=<CODECLASS="replaceable"><I>bool			  </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> command line (V8.7)</I>define(`confDONT_EXPAND_CNAMES',<CODECLASS="replaceable"><I>bool</I></CODE>)	  <ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> V8 m4 configuration</I></PRE></BLOCKQUOTE></P><PCLASS="para">The argument <CODECLASS="replaceable"><I>bool</I></CODE> is of type Boolean. If <CODECLASS="replaceable"><I>bool</I></CODE>is missing, the default is true (use the CNAME).If the entire <CODECLASS="literal">DontExpandCnames</CODE> option is missing,the default is false (convert CNAMEs to A records).</P><PCLASS="para">The <CODECLASS="literal">DontExpandCnames</CODE> option is not safe.If specified from the command line,it may cause <EMCLASS="emphasis">sendmail</EM> to relinquish its <EMCLASS="emphasis">root</EM> privilege.</P></DIV></BLOCKQUOTE></DIV><DIVCLASS="refentry"><DIVCLASS="refnamediv"><H3CLASS="refname"><ACLASS="refname"NAME="SML2-CH-34-SECT-8-19">34.8.19 DontInitGroups</A></H3><PCLASS="refpurpose">Don't use initgroups(3)</P>(V8.7 and above)</DIV><BLOCKQUOTE><DIVCLASS="refsect1"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-43256"></A><ACLASS="indexterm"NAME="AUTOID-43258"></A>Just before executing any delivery agent (including the <CODECLASS="literal">*include*</CODE>delivery agent) and just before opening a <EMCLASS="emphasis">~/.forward</EM> file, <EMCLASS="emphasis">sendmail</EM> sets itsgroup and user identities as appropriate.To illustrate, consider the <CODECLASS="literal">U=</CODE> equate (see <ACLASS="xref"HREF="ch30_04.htm#SML2-CH-30-SECT-4-13"TITLE="">Section 30.4.13</A>).If the <CODECLASS="literal">fax</CODE> delivery agent has the <CODECLASS="literal">U=</CODE> equate set like this:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">U=fax:fax</PRE></BLOCKQUOTE></P><PCLASS="para">its <CODECLASS="literal">A=</CODE> program will be executed by the user <EMCLASS="emphasis">fax</EM> whois in the group <EMCLASS="emphasis">fax</EM>. In addition, <EMCLASS="emphasis">sendmail</EM> callsthe <EMCLASS="emphasis">initgroups</EM>(3) system call to expand the list ofgroups to which the user belongs. In the case of <EMCLASS="emphasis">fax</EM>,it may also belong to the groups <EMCLASS="emphasis">faxadm</EM> and <EMCLASS="emphasis">faxusers</EM>.The total result is that <EMCLASS="emphasis">fax</EM> can execute, read, andwrite any files that have the appropriate group permissionsset for any of the groups <EMCLASS="emphasis">fax</EM>, <EMCLASS="emphasis">faxadm</EM>, and <EMCLASS="emphasis">faxusers</EM>.</P><PCLASS="para">This versatility, however, has a price. As group files get hugeor as <EMCLASS="emphasis">nis</EM>, <EMCLASS="emphasis">nisplus</EM>, or <EMCLASS="emphasis">hesiod</EM> services becomeslow (probably because they are also large), the <EMCLASS="emphasis">initgroups</EM>(3)call can start to adversely affect <EMCLASS="emphasis">sendmail</EM>'s performance.</P><PCLASS="para">When performance is a concern, the <EMCLASS="emphasis">DontInitGroups</EM> option can beused to disable <EMCLASS="emphasis">initgroups</EM>(3):</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">O DontInitGroups=<CODECLASS="replaceable"><I>bool    </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> configuration file</I>-ODontInitGroups=<CODECLASS="replaceable"><I>bool    </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> command line</I>define(`confDONT_INIT_GROUPS',<CODECLASS="replaceable"><I>bool</I></CODE>)   <ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> V8 m4 configuration</I></PRE></BLOCKQUOTE></P><PCLASS="para">The argument <CODECLASS="replaceable"><I>bool</I></CODE> is of type Boolean. If it is missing, thedefault value is true &nbsp;- don't call <EMCLASS="emphasis">initgroups</EM>(3).If the entire option is missing, the default value is false&nbsp;- do call <EMCLASS="emphasis">initgroups</EM>(3).See <ACLASS="xref"HREF="ch18_08.htm#SML2-CH-18-SECT-8-31"TITLE="">Section 18.8.31, NO-GROUP-SET</A> for a discussion of how NO_GROUP_SETdetermines whether or not this option also affects the <EMCLASS="emphasis">getgrgid</EM>(3) system call.</P><PCLASS="para">The <CODECLASS="literal">DontInitGroups</CODE> option is not safe as of V8.8.4.  Even ifit is specified from the command line, may cause<EMCLASS="emphasis">sendmail</EM> to relinquish its <EMCLASS="emphasis">root</EM> privilege.</P></DIV></BLOCKQUOTE></DIV><DIVCLASS="refentry"><DIVCLASS="refnamediv"><H3CLASS="refname"><ACLASS="refname"NAME="SML2-CH-34-SECT-8-20">34.8.20 DontPruneRoutes (R)</A></H3><PCLASS="refpurpose">Don't prune route addresses</P>(V8.1 and above)</DIV><BLOCKQUOTE><DIVCLASS="refsect1"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-43317"></A><ACLASS="indexterm"NAME="AUTOID-43319"></A><ACLASS="indexterm"NAME="AUTOID-43322"></A><ACLASS="indexterm"NAME="AUTOID-43325"></A><ACLASS="indexterm"NAME="AUTOID-43327"></A>One form of address is called a <EMCLASS="emphasis">route address</EM>, because it specifiesa route (sequence of hosts) through which the message should bedelivered. For example:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">@hostA,@hostB:user@hostC</PRE></BLOCKQUOTE></P><PCLASS="para">&#13;This address specifies that the message should first go to<CODECLASS="literal">hostA</CODE>, then from <CODECLASS="literal">hostA</CODE> to <CODECLASS="literal">hostB</CODE>, andfinally from <CODECLASS="literal">hostB</CODE> to <CODECLASS="literal">hostC</CODE> for deliveryto <CODECLASS="literal">user</CODE>.[13]</P><BLOCKQUOTECLASS="footnote"><PCLASS="para">[13] Also see how route addresses are handled in rules in <ACLASS="xref"HREF="ch29_04.htm#SML2-CH-29-SECT-4-3"TITLE="Handling Routing Addresses">Section 29.4.3, "Handling Routing Addresses"</A>and the <CODECLASS="literal">F=d</CODE> delivery agent flag in <ACLASS="xref"HREF="ch30_08.htm#SML2-CH-30-SECT-8-16"TITLE="">Section 30.8.16, F=d</A>).</P></BLOCKQUOTE><PCLASS="para">RFC1123, in Section 5.3.3, specifies that delivery agentsshould always try to eliminate source routing when they are able.V8 <EMCLASS="emphasis">sendmail</EM> takes an address like the above andchecks to see whether it can connect to <CODECLASS="literal">hostC</CODE> directly.If it can, it rewrites the address like this:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">user@hostC</PRE></BLOCKQUOTE></P><PCLASS="para">This is called &quot;pruning route addresses.&quot;There may be times when such pruning is inappropriate. Internalnetworks, for example, may be set up to encourage manual specificationof a route through a high-speed network. If left to its own,<EMCLASS="emphasis">sendmail</EM> always tosses the route and tries to connectdirectly.</P><PCLASS="para">The <CODECLASS="literal">DontPruneRoutes</CODE> (<CODECLASS="literal">R</CODE>) option causes <EMCLASS="emphasis">sendmail</EM> to never prune routeaddresses. The forms of this option are as follows:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">OR<CODECLASS="replaceable"><I>bool                                          </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> configuration file (old form)</I>-oR<CODECLASS="replaceable"><I>bool                                         </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> command line (old form)</I>O DontPruneRoutes=<CODECLASS="replaceable"><I>bool                          </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> configuration file (beginning with V8.7)</I>-ODontPruneRoutes=<CODECLASS="replaceable"><I>bool                          </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> command line (beginning with V8.7)</I>define(`confDONT_PRUNE_ROUTES',`<CODECLASS="replaceable"><I>bool</I></CODE>')          <ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> V8 m4 configuration</I></PRE></BLOCKQUOTE></P><PCLASS="para">The argument <CODECLASS="replaceable"><I>bool</I></CODE> is of type Boolean. If it is missing, thedefault value is true(nothing special is done with route addresses).If the entire <CODECLASS="literal">R</CODE> option is missing, the default becomesfalse(route addresses are pruned).With the V8 <EMCLASS="emphasis">m4</EM> configuration technique the default is false.</P><PCLASS="para">The <CODECLASS="literal">DontPruneRoutes</CODE> (<CODECLASS="literal">R</CODE>) option isnot safe.  If specified from the command line,it may cause <EMCLASS="emphasis">sendmail</EM> to relinquish its <EMCLASS="emphasis">root</EM> privilege.</P></DIV></BLOCKQUOTE></DIV><DIVCLASS="refentry"><DIVCLASS="refnamediv"><H3CLASS="refname"><ACLASS="refname"NAME="SML2-CH-34-SECT-8-21">34.8.21 DoubleBounceAddress</A></H3><PCLASS="refpurpose">Errors when sending errors</P>(V8.8 and above)</DIV><BLOCKQUOTE><DIVCLASS="refsect1"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-43385"></A><ACLASS="indexterm"NAME="AUTOID-43387"></A><ACLASS="indexterm"NAME="AUTOID-43390"></A><ACLASS="indexterm"NAME="AUTOID-43393"></A>Ordinarily, when <EMCLASS="emphasis">sendmail</EM> sends error notificationmail, it expects that error notification to be successfully delivered.Upon occasion, error mail itself will bounce or fail too. This is calleda &quot;double-bounce&quot; situation.Prior to V8.8, <EMCLASS="emphasis">sendmail</EM> would notify <CODECLASS="literal">postmaster</CODE> iferror notification failed.But this might not be the best solution in all cases. Consider, for example,a site that has a sitewide postmaster and several departmental postmasters.In such situations, double-bounce mail should probably go to the sitewidepostmaster.</P><PCLASS="para">Beginning with V8.8 <EMCLASS="emphasis">sendmail</EM>, the <CODECLASS="literal">DoubleBounceAddress</CODE>option can be used to define who gets double-bounce mail:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">O DoubleBounceAddress=<CODECLASS="replaceable"><I>addr                      </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> configuration file (beginning with V8.8)</I>-ODoubleBounceAddress=<CODECLASS="replaceable"><I>addr                      </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> command line (beginning with V8.8)</I>define(`confDOUBLE_BOUNCE_ADDRESS',`<CODECLASS="replaceable"><I>addr</I></CODE>')      <ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> V8 m4 configuration</I></PRE></BLOCKQUOTE></P><PCLASS="para">Here, <CODECLASS="replaceable"><I>addr</I></CODE> is of type string and is a comma-separated list of one or more email addresses. If <CODECLASS="replaceable"><I>addr</I></CODE> is missing, the following error is printed and the option is ignored:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">readcf: option DoubleBounceAddress: value required</PRE></BLOCKQUOTE></P><PCLASS="para">If the entire option is missing, the defaultbecomes <CODECLASS="literal">postmaster</CODE>. If <EMCLASS="emphasis">sendmail</EM> is unable tosend double-bounce mail to <CODECLASS="literal">addr</CODE>, it logs the followingerror:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">cannot parse <CODECLASS="replaceable"><I>addr</I></CODE></PRE></BLOCKQUOTE></P><PCLASS="para">The <CODECLASS="literal">DoubleBounceAddress</CODE> option is not safe.If specified from the command line,it may cause <EMCLASS="emphasis">sendmail</EM> to relinquish its <EMCLASS="emphasis">root</EM> privilege.</P></DIV></BLOCKQUOTE></DIV><DIVCLASS="refentry"><DIVCLASS="refnamediv"><H3CLASS="refname"><ACLASS="refname"NAME="SML2-CH-34-SECT-8-22">34.8.22 EightBitMode (8)</A></H3><PCLASS="refpurpose">How to convert MIME input</P>(V8.7 and above)</DIV><BLOCKQUOTE><DIVCLASS="refsect1"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-43434"></A><ACLASS="indexterm"NAME="AUTOID-43436"></A>The data portion of an email message is transmitted during the DATAphase of an SMTP transaction. Prior to V8.6 the data were presumedto be 7-bit. That is, the high (8th) bit of every byte of themessage could be cleared (reset or made zero) with no change in themeaning of that data.With the advent of ESMTP and MIME, it became possible for <EMCLASS="emphasis">sendmail</EM>to receive data for which the preservation of the 8th bit is important.</P><PCLASS="para">There are two kinds of 8-bit data. Data that arrive with the high bitset and for which no notification was given are called &quot;unlabeled&quot;8-bit data. Data for which notification <EMCLASS="emphasis">was</EM> given (using8BITMIME in the ESMTP sessionor with the <CODECLASS="literal">-B8BITMIME</CODE> command-line switch, see <ACLASS="xref"HREF="ch36_07.htm#SML2-CH-36-SECT-7-1"TITLE="">Section 36.7.1, -B</A>,or with a <CODECLASS="literal">MIME-Version:</CODE> header in the message, see <ACLASS="xref"HREF="ch35_10.htm#SML2-CH-35-SECT-10-21"TITLE="">Section 35.10.21, MIME-Version:</A>) are called &quot;labeled.&quot;</P><PCLASS="para">The <CODECLASS="literal">EightBitMode</CODE> (<CODECLASS="literal">8</CODE>) option tells <EMCLASS="emphasis">sendmail</EM> howto treat incoming unlabeled8-bit data. The forms of this option are as follows:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">O8<CODECLASS="replaceable"><I>key                                  </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> configuration file (V8,6)</I>-o8<CODECLASS="replaceable"><I>key                                 </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> command line (V8,6)</I>O EightBitMode=<CODECLASS="replaceable"><I>key                     </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> configuration file (beginning with V8.7)</I>-OEightBitMode=<CODECLASS="replaceable"><I>key                     </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> command line (beginning with V8.7)</I>define(`confEIGHT_BIT_HANDLING',<CODECLASS="replaceable"><I>key</I></CODE>)   <ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> m4 configuration</I></PRE></BLOCKQUOTE></P><PCLASS="para">The <CODECLASS="replaceable"><I>key</I></CODE> is mandatory and must be selected from one of thoseshown in<ACLASS="xref"HREF="ch34_08.htm#SML2-CH-34-TAB-13"TITLE="EightBitMode Option Characters">Table 34.14</A>.If the <CODECLASS="replaceable"><I>key</I></CODE> is missing or if <CODECLASS="replaceable"><I>key</I></CODE> is notone of those listed, <EMCLASS="emphasis">sendmail</EM> will print the followingerror and ignore the option:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">Unknown 8-bit mode <CODECLASS="replaceable"><I>char</I></CODE></PRE></BLOCKQUOTE></P><PCLASS="para">Only the first character of the <CODECLASS="replaceable"><I>key</I></CODE> is recognized, but we still recommendthat the full word be used for clarity.</P><TABLECLASS="table"><CAPTIONCLASS="table"><ACLASS="title"NAME="SML2-CH-34-TAB-13">Table 34.14: EightBitMode Option Characters</A></CAPTION><THEADCLASS="thead"><TRCLASS="row"VALIGN="TOP"><THCLASS="entry"ALIGN="LEFT"ROWSPAN="1"COLSPAN="1">Key</TH><THCLASS="entry"ALIGN="LEFT"ROWSPAN="1"COLSPAN="1"></TH><THCLASS="entry"ALIGN="LEFT"ROWSPAN="1"COLSPAN="1">Meaning</TH></TR></THEAD><TBODYCLASS="tbody"><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">mimify</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch34_08.htm#SML2-CH-34-SECT-8-22-1"TITLE="EightBitMode=mimefy">Section 34.8.22.1, "EightBitMode=mimefy"</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><PCLASS="para">Do any necessary conversion of 8BITMIME to 7-bit</P></TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">pass</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch34_08.htm#SML2-CH-34-SECT-8-22-2"TITLE="EightBitMode=pass">Section 34.8.22.2, "EightBitMode=pass"</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><PCLASS="para">Pass unlabeled 8-bit input through as is</P></TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">strict</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch34_08.htm#SML2-CH-34-SECT-8-22-3"TITLE="EightBitMode=strict">Section 34.8.22.3, "EightBitMode=strict"</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><PCLASS="para">Reject unlabeled 8-bit input</P></TD></TR></TBODY></TABLE><PCLASS="para">If the entire <CODECLASS="literal">EightBitMode</CODE> (<CODECLASS="literal">8</CODE>) option is missing,the default becomes <CODECLASS="literal">p</CODE> (pass8-bit and convert MIME). If you configure with V8's <EMCLASS="emphasis">m4</EM> technique,the default is also <CODECLASS="literal">p</CODE>.</P><PCLASS="para">Depending on the <CODECLASS="replaceable"><I>key</I></CODE> selected and the nature of incoming mail, any ofseveral error messages may be generated:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">Eight bit data not allowedCannot send 8-bit data to 7-bit destination<EMCLASS="emphasis">host</EM> does not support 8BITMIME</PRE></BLOCKQUOTE></P><PCLASS="para">Conversion from 8 to 7 bit is complex. First, <EMCLASS="emphasis">sendmail</EM> looks fora MIME <CODECLASS="literal">Content-Type:</CODE> header. If the header is found, <EMCLASS="emphasis">sendmail</EM>looks for and, if found,uses a MIME <CODECLASS="literal">boundary</CODE> definition to delimit conversion.[14]If more than 1/4 of a section has the high bit set after readingat least 4 kilobytes of data, <EMCLASS="emphasis">sendmail</EM> presumes base64 encoding[15]and inserts the following MIME header into the data stream:</P><BLOCKQUOTECLASS="footnote"><PCLASS="para">[14] A boundary is used only for <CODECLASS="literal">multipart</CODE> messages.</P><PCLASS="para">[15] Also see the <CODECLASS="literal">$=q</CODE> class (<ACLASS="xref"HREF="ch32_05.htm#SML2-CH-32-SECT-5-5"TITLE="">Section 32.5.5, $=q</A>)for a way to require quoted-printable encoding.</P></BLOCKQUOTE><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">Content-Transfer-Encoding: base64</PRE></BLOCKQUOTE></P><PCLASS="para">Base64 encoding converts 8-bit data into a stream of 6-bit bytesthat contain universally readable text. Base64 is described in RFC1521.</P><PCLASS="para">If less than 1/4 of the data that were scanned have the high bit setor if the type in the <CODECLASS="literal">Content-Type:</CODE> header is listed in <CODECLASS="literal">$=q</CODE>(<ACLASS="xref"HREF="ch32_05.htm#SML2-CH-32-SECT-5-5"TITLE="">Section 32.5.5</A>),the data are converted from 8 to 7 bit by using Quoted-Printable encoding,and the following MIME header is inserted into the stream:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">Content-Transfer-Encoding: quoted-printable</PRE></BLOCKQUOTE></P><PCLASS="para">Under Quoted-Printable encoding, ASCII control characters(in the range 0x00 through 0x20), the tab character, the &quot;=&quot;character, and all characters with the high bit setare converted.First an &quot;=&quot; character is output, then thecharacter is converted to an ASCII representation of its hexadecimal value,and that value is output. For example,</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">0xb9      <ICLASS="lineannotation"><IMGSRC="../chars/rarr.gif"ALT="-&gt;"> becomes</I>   =B9</PRE></BLOCKQUOTE></P><PCLASS="para">Under this scheme, the <CODECLASS="literal">=</CODE> character is considered binary and isencoded as <CODECLASS="literal">=3D</CODE>.If the <CODECLASS="literal">F=3</CODE> flag (see <ACLASS="xref"HREF="ch30_08.htm#SML2-CH-30-SECT-8-2"TITLE="">Section 30.8.2, F=3</A>) isset for a selected delivery agent, the characters</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">! &quot; # $ @ \ [ ] ^ ` { | } ~</PRE></BLOCKQUOTE></P><PCLASS="para">are also converted. If <CODECLASS="literal">F=3</CODE> is not set,those characters are output as is.</P><PCLASS="para">Lines longer than 72 characters (bytes) are broken with the insertionof an &quot;=&quot; character and the <CODECLASS="literal">E=</CODE> end-of-line characters definedfor the current delivery agent.Any lines that end in a whitespace character have thatcharacter converted to quoted-printable even if the line is under 72 characters.Quoted-printable is described in RFC1521. Where <CODECLASS="literal">m</CODE> (mimefy) may not be appropriate for a givendelivery agent, the <CODECLASS="literal">F=8</CODE> flag (see <ACLASS="xref"HREF="ch30_08.htm#SML2-CH-30-SECT-8-5"TITLE="">Section 30.8.5, F=8</A>) can be specified to force <CODECLASS="literal">p</CODE> (pass8bit) behavior.</P><PCLASS="para">The <CODECLASS="literal">EightBitMode</CODE> (<CODECLASS="literal">8</CODE>) option is safe. Even if it is specified from the command line, <EMCLASS="emphasis">sendmail</EM> retains its <EMCLASS="emphasis">root</EM> privilege.</P><DIVCLASS="refsect2"><H4CLASS="refsect2"><ACLASS="title"NAME="SML2-CH-34-SECT-8-22-1">34.8.22.1 EightBitMode=mimefy</A></H4><PCLASS="para">Convert unlabeled 8-bit input to 8BITMIME, and do any necessaryconversion of 8BITMIME to 7-bit.When running as a daemon receiving mailvia SMTP, advertise the 8BITMIME ESMTP keyword as valid.This <CODECLASS="replaceable"><I>key</I></CODE> specifies that yoursite will be a full-time MIME installation. Note that compilingwith MIME8TO1=1 (see <ACLASS="xref"HREF="ch18_08.htm#SML2-CH-18-SECT-8-22"TITLE="">Section 18.8.22, MIME8TO7</A>) causes ESMTPto always advertise 8BITMIME.</P></DIV><DIVCLASS="refsect2"><H4CLASS="refsect2"><ACLASS="title"NAME="SML2-CH-34-SECT-8-22-2">34.8.22.2 EightBitMode=pass</A></H4><PCLASS="para">Pass unlabeled 8-bit input through as is.  Convert labeled 8BITMIMEinput to 7-bit as required by any delivery agent with the <CODECLASS="literal">F=7</CODE>flag set (see <ACLASS="xref"HREF="ch30_08.htm#SML2-CH-30-SECT-8-4"TITLE="">Section 30.8.4, F=7</A>)or any SMTP server that does not advertise 8BITMIME. </P></DIV><DIVCLASS="refsect2"><H4CLASS="refsect2"><ACLASS="title"NAME="SML2-CH-34-SECT-8-22-3">34.8.22.3 EightBitMode=strict</A></H4><PCLASS="para">Reject unlabeled 8-bit input. Convert 8BITMIME to 7-bit as requiredby any delivery agent with the <CODECLASS="literal">F=7</CODE> flag set (see <ACLASS="xref"HREF="ch30_08.htm#SML2-CH-30-SECT-8-4"TITLE="">Section 30.8.4</A>)or any SMTP server that does not advertise 8BITMIME. </P></DIV></DIV></BLOCKQUOTE></DIV><DIVCLASS="refentry"><DIVCLASS="refnamediv"><H3CLASS="refname"><ACLASS="refname"NAME="SML2-CH-34-SECT-8-23">34.8.23 ErrorHeader (E)</A></H3><PCLASS="refpurpose">Set error message header</P>(V8 and above)</DIV><BLOCKQUOTE><DIVCLASS="refsect1"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-43579"></A><ACLASS="indexterm"NAME="AUTOID-43581"></A>When a notification of a mail error is sent to the sender, the detailsof the error are taken from the text saved in the <CODECLASS="literal">xf</CODE> file(see <ACLASS="xref"HREF="ch23_02.htm#SML2-CH-23-SECT-2-7"TITLE="The Transcript File: xf">Section 23.2.7, "The Transcript File: xf"</A>).The <CODECLASS="literal">ErrorHeader</CODE> (<CODECLASS="literal">E</CODE>) option, availableonly with V8 <EMCLASS="emphasis">sendmail</EM>, allows you to prependcustom text ahead of that error text.</P><PCLASS="para">Custom error text is useful for sites that wish to offerhelp as part of the error message. For example, one commonkind of error message is notification of an unknown user:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">--- Transcript of session follows ---550 smith@wash.dc.gov... User unknown   --- Unsent message follows ---</PRE></BLOCKQUOTE></P><PCLASS="para">Here, the user <CODECLASS="literal">smith</CODE> is one that is unknown.A useful error help message for your site to produce might be</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">Common problems:        User unknown: the user or login name is wrong.        Host unknown: you mistyped the host part of the address.   --- Transcript of session follows ---550 smith@wash.dc.gov... User unknown   --- Unsent message follows ---</PRE></BLOCKQUOTE></P><PCLASS="para">The forms for the <CODECLASS="literal">ErrorHeader</CODE> (<CODECLASS="literal">E</CODE>) option are as follows:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">OE<CODECLASS="replaceable"><I>text                               </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> configuration file (V8.6)</I>-oE<CODECLASS="replaceable"><I>text                              </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> command line (V8.6)</I>O ErrorHeader=<CODECLASS="replaceable"><I>text                   </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> configuration file (beginning with V8.7)</I>-OErrorHeader=<CODECLASS="replaceable"><I>text                   </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> command line (beginning with V8.7)</I>define(`confERROR_MESSAGE',`<CODECLASS="replaceable"><I>text</I></CODE>')   <ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> V8 m4 configuration</I></PRE></BLOCKQUOTE></P><PCLASS="para">The argument <CODECLASS="replaceable"><I>text</I></CODE> is mandatory. If it is missing,this option is ignored. The <CODECLASS="replaceable"><I>text</I></CODE> is either theactual error text that is printed or the nameof a file containing that text. If <CODECLASS="replaceable"><I>text</I></CODE> beginswith the <CODECLASS="literal">/</CODE> character, it is taken as theabsolute pathname of the file (a relative name is notpossible). If the specified file cannot beopened for reading, this option is silently ignored.</P><PCLASS="para">Macros may be used in the error text, and they areexpanded as they are printed. For example, the textmight contain</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">For help with $u, try &quot;finger $u&quot;</PRE></BLOCKQUOTE></P><PCLASS="para">which might produce this error message:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">For help with smith@wash.dc.gov, try &quot;finger smith@wash.dc.gov&quot;   --- Transcript of session follows ---550 smith@wash.dc.gov... User unknown   --- Unsent message follows ---</PRE></BLOCKQUOTE></P><PCLASS="para">The <CODECLASS="literal">ErrorHeader</CODE> (<CODECLASS="literal">E</CODE>) option is not safe.If specified from the command line,it may cause <EMCLASS="emphasis">sendmail</EM> to relinquish its <EMCLASS="emphasis">root</EM> privilege.</P></DIV></BLOCKQUOTE></DIV><DIVCLASS="refentry"><DIVCLASS="refnamediv"><H3CLASS="refname"><ACLASS="refname"NAME="SML2-CH-34-SECT-8-24">34.8.24 ErrorMode (e)</A></H3><PCLASS="refpurpose">Specify mode of error handling</P>(All versions)</DIV><BLOCKQUOTE><DIVCLASS="refsect1"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-43635"></A>The <EMCLASS="emphasis">sendmail</EM> program is flexible in its handling of delivery errors.By selecting from five possible modes with the <CODECLASS="literal">ErrorMode</CODE> (<CODECLASS="literal">e</CODE>) option, you can tailor notification of delivery errorsto suit many needs. </P><PCLASS="para">This option is intended primarily for use from the command line. Ifincluded in the configuration file, it should be given only the<CODECLASS="literal">p</CODE> argument, for print mode (the default).</P><PCLASS="para">The forms of the <CODECLASS="literal">ErrorMode</CODE> (<CODECLASS="literal">e</CODE>) option are as follows:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">Oe<CODECLASS="replaceable"><I>mode                          </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> configuration file (old form)</I>-oe<CODECLASS="replaceable"><I>mode                         </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> command line (old form)</I>-e<CODECLASS="replaceable"><I>mode                          </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> command-line shorthand (not recommended)</I>O ErrorMode=<CODECLASS="replaceable"><I>mode                </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> configuration file (beginning with V8.7)</I>-OErrorMode=<CODECLASS="replaceable"><I>mode                </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> command line (beginning with V8.7)</I>define(`confERROR_MODE',<CODECLASS="replaceable"><I>mode</I></CODE>)   <ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> V8 m4 configuration</I></PRE></BLOCKQUOTE></P><PCLASS="para">The type of <CODECLASS="replaceable"><I>mode</I></CODE> is character. If <CODECLASS="replaceable"><I>mode</I></CODE>is missing, the default value is <CODECLASS="literal">p</CODE> (for print normally).Under older versions of <EMCLASS="emphasis">sendmail</EM>, if this <CODECLASS="literal">ErrorMode</CODE> (<CODECLASS="literal">e</CODE>)option is entirely missing, the default valuefor <CODECLASS="literal">mode</CODE> is the C language character constant '<CODECLASS="literal">\0</CODE>'.Under V8 <EMCLASS="emphasis">sendmail</EM>, the default value in this case is <CODECLASS="literal">p</CODE>.</P><PCLASS="para">The possible characters for the <CODECLASS="replaceable"><I>mode</I></CODE> argument are listedin<ACLASS="xref"HREF="ch34_08.htm#SML2-CH-34-TAB-14"TITLE="ErrorMode Option Modes">Table 34.15</A>.</P><TABLECLASS="table"><CAPTIONCLASS="table"><ACLASS="title"NAME="SML2-CH-34-TAB-14">Table 34.15: ErrorMode Option Modes</A></CAPTION><THEADCLASS="thead"><TRCLASS="row"VALIGN="TOP"><THCLASS="entry"ALIGN="LEFT"ROWSPAN="1"COLSPAN="1">Mode</TH><THCLASS="entry"ALIGN="LEFT"ROWSPAN="1"COLSPAN="1"></TH><THCLASS="entry"ALIGN="LEFT"ROWSPAN="1"COLSPAN="1">Meaning</TH></TR></THEAD><TBODYCLASS="tbody"><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">e</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch34_08.htm#SML2-CH-34-SECT-8-24-1"TITLE="ErrorMode=e">Section 34.8.24.1, "ErrorMode=e"</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><PCLASS="para">Like <CODECLASS="literal">m</CODE>, but always exit with a zero exit status</P></TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">m</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch34_08.htm#SML2-CH-34-SECT-8-24-2"TITLE="ErrorMode=m">Section 34.8.24.2, "ErrorMode=m"</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><PCLASS="para">Mail error notification to the sender no matter what</P></TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">p</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch34_08.htm#SML2-CH-34-SECT-8-24-3"TITLE="ErrorMode=p">Section 34.8.24.3, "ErrorMode=p"</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><PCLASS="para">Print error messages (the default)</P></TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">q</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch34_08.htm#SML2-CH-34-SECT-8-24-4"TITLE="ErrorMode=q">Section 34.8.24.4, "ErrorMode=q"</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><PCLASS="para">Remain silent about all delivery errors</P></TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">w</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch34_08.htm#SML2-CH-34-SECT-8-24-5"TITLE="ErrorMode=w">Section 34.8.24.5, "ErrorMode=w"</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><PCLASS="para">Write errors to the sender's terminal screen</P></TD></TR></TBODY></TABLE><PCLASS="para">Note that the error-handling mode is automatically set to <CODECLASS="literal">m</CODE>(for mail errors) in two special circumstances. First, if a mailinglist is being processed and if an owner is found for that list(see <ACLASS="xref"HREF="ch25_03.htm"TITLE="Defining a Mailing List Owner">Section 25.3, "Defining a Mailing List Owner"</A>),the mode is set to <CODECLASS="literal">m</CODE> to force mail notification to that owner.Second, if SMTP delivery is to multiple recipients, the mode isset to <CODECLASS="literal">m</CODE> to force mail notification to the sender.This latter assumes that multiple recipients qualify as a mailing list.</P><PCLASS="para">Also note that V8 <EMCLASS="emphasis">sendmail</EM> sets the error-handling modeto <CODECLASS="literal">q</CODE> (for quiet) when <EMCLASS="emphasis">sendmail</EM> is given the <CODECLASS="literal">-bv</CODE>(address verification) command line switch. This prevents spuriouserror messages from being mailed to root in testing addresses.</P><PCLASS="para">The <CODECLASS="literal">ErrorMode</CODE> (<CODECLASS="literal">e</CODE>) option is safe.  Even if it is specified from the command line,<EMCLASS="emphasis">sendmail</EM> retains its <EMCLASS="emphasis">root</EM> privilege.&#13;</P><DIVCLASS="refsect2"><H4CLASS="refsect2"><ACLASS="title"NAME="SML2-CH-34-SECT-8-24-1">34.8.24.1 ErrorMode=e</A></H4><PCLASS="para">Like <CODECLASS="literal">m</CODE>, but always exit with a zero exit status.This mode is intended for use from the command line.This <CODECLASS="literal">e</CODE> mode is used by the <EMCLASS="emphasis">rmail</EM>(8) program whenit invokes <EMCLASS="emphasis">sendmail</EM>. On some systems, if <EMCLASS="emphasis">sendmail</EM>exits with a nonzero value (fails), the <EMCLASS="emphasis">uuxqt</EM>(8) programsends its own error message. This results in two error messagesbeing sent, whereas only one should ever be sent. Worse still,the error message from <EMCLASS="emphasis">uuxqt</EM> may contain a bad address,one that may itself bounce.&#13;</P></DIV><DIVCLASS="refsect2"><H4CLASS="refsect2"><ACLASS="title"NAME="SML2-CH-34-SECT-8-24-2">34.8.24.2 ErrorMode=m</A></H4><PCLASS="para">Mail error notification to the sender no matter what. This mode triesto find the most rational way to return mail. All aliasing is disabledto prevent loops. Nothing is ever saved to <EMCLASS="emphasis">~/dead.letter</EM>.This mode is intended for use from the command line.The <CODECLASS="literal">m</CODE> mode is appropriate for mail generated by an applicationthat arises from a login but for which no humanis present to monitor messages. One example might be a data-acquisitionsystem that is manually logged in but is then left to fend foritself. Similarly, when the user <EMCLASS="emphasis">news</EM> sends articles by mail,error messages should not be placed in <EMCLASS="emphasis">~news/dead.letter</EM>, wherethey may be overlooked; rather, this mode should be used so thaterrors are placed in a mail spool file where they can be periodicallymonitored.&#13;</P></DIV><DIVCLASS="refsect2"><H4CLASS="refsect2"><ACLASS="title"NAME="SML2-CH-34-SECT-8-24-3">34.8.24.3 ErrorMode=p</A></H4><PCLASS="para">Print error messages (the default). The <EMCLASS="emphasis">sendmail</EM> programsimply tries to save a copy of the failed mail in <EMCLASS="emphasis">~/dead.letter</EM> andprints an error message to its standard output.If the sender is remote, it sends notification of the problem backto that sender via email.If <EMCLASS="emphasis">~/dead.letter</EM> is not writable, a copyis saved to <EMCLASS="emphasis">/usr/tmp/dead.letter</EM>.Note that this default path was hard-coded into pre-V8 versions of <EMCLASS="emphasis">sendmail</EM>as a string constant.  The only way to change it wasby editing <EMCLASS="emphasis">savemail.c</EM>. But beginning with V8 <EMCLASS="emphasis">sendmail</EM>, the pathcomponent is defined by the _PATH_VARTMP definition, and that can betuned in your <EMCLASS="emphasis">Makefile</EM>  (see <ACLASS="xref"HREF="ch18_08.htm#SML2-CH-18-SECT-8-34"TITLE="">Section 18.8.34, PATH...</A>).The default for _PATH_VARTMP is <EMCLASS="emphasis">/usr/tmp/</EM>.The file named <EMCLASS="emphasis">dead.letter</EM> is hard-coded in all versions of<EMCLASS="emphasis">sendmail</EM>.&#13;</P></DIV><DIVCLASS="refsect2"><H4CLASS="refsect2"><ACLASS="title"NAME="SML2-CH-34-SECT-8-24-4">34.8.24.4 ErrorMode=q</A></H4><PCLASS="para">Quiet; remain silent about all delivery errors.If the sender is local, this mode assumesthat the program or person that ran <EMCLASS="emphasis">sendmail</EM> willgive notification of the error.Mail is not sent, and<EMCLASS="emphasis">~/dead.letter</EM> is not saved. Error information is provided only in the <EMCLASS="emphasis">sendmail</EM> program's<EMCLASS="emphasis">exit</EM>(2) status (see <ACLASS="xref"HREF="ch36_05.htm"TITLE="sendmail's exit() Status">Section 36.5, "sendmail's exit() Status"</A>).This mode is intended for use from thecommand line. One possible use might be exploding a junk-mail mailinglist with a program that could correctly interpret the exit status.&#13;</P></DIV><DIVCLASS="refsect2"><H4CLASS="refsect2"><ACLASS="title"NAME="SML2-CH-34-SECT-8-24-5">34.8.24.5 ErrorMode=w</A></H4><PCLASS="para">Write errors to the sender's terminal screen if logged in (similarto <EMCLASS="emphasis">write</EM>(1)); otherwise, send mail to that user.First tries to write to <EMCLASS="emphasis">stdout</EM>. If that fails, it revertsto mail notification.This mode is intended for use from the command line.The reason for this mode has been lost to history,[16]and it should be considered obsolete.</P><BLOCKQUOTECLASS="footnote"><PCLASS="para">[16] According to Eric Allman, &quot;Dubious, someone bugged me for it;I forget why.&quot;</P></BLOCKQUOTE></DIV></DIV></BLOCKQUOTE></DIV><DIVCLASS="refentry"><DIVCLASS="refnamediv"><H3CLASS="refname"><ACLASS="refname"NAME="SML2-CH-34-SECT-8-25">34.8.25 FallbackMXhost (V)</A></H3><PCLASS="refpurpose">Fallback MX host</P>(V8.4 and above)</DIV><BLOCKQUOTE><DIVCLASS="refsect1"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-43783"></A><ACLASS="indexterm"NAME="AUTOID-43785"></A>At sites with poor (connect on demand, or unreliable) networkconnections, SMTP connections may often fail.In such situations it may not be desirable for each workstationto queue the mail locally for a later attempt.Under V8 <EMCLASS="emphasis">sendmail</EM> it is possible to specify a <EMCLASS="emphasis">fallback</EM>host to which the mail should instead be forwarded. One suchhost might be a central mail hub machine.</P><PCLASS="para">The <CODECLASS="literal">FallbackMXhost</CODE> (<CODECLASS="literal">V</CODE>) option specifies the name of a mail exchangermachine (MX record) of last resort. It is given an artificiallylow priority (high preference number) so that <EMCLASS="emphasis">sendmail</EM>tries to connect to it only if all other connection attemptsfor the target host have failed.</P><PCLASS="para">Note that this fallback MX host is used only for connectionfailures. It is not used if the name server lookup failed.It is available only for the <CODECLASS="literal">[IPC]</CODE> delivery agent(see <ACLASS="xref"HREF="ch30_04.htm#SML2-CH-30-SECT-4-1-2"TITLE="$h and other arguments in A=[IPC]">Section 30.4.1.2, "$h and other arguments in A=[IPC]"</A>). Note that MX lookups are availableonly if <EMCLASS="emphasis">sendmail</EM> is compiled with NAMED_BIND defined(see <ACLASS="xref"HREF="ch18_08.htm#SML2-CH-18-SECT-8-23"TITLE="">Section 18.8.23, NAMED-BIND</A>).</P><PCLASS="para">The forms of the <CODECLASS="literal">FallbackMXhost</CODE> (<CODECLASS="literal">V</CODE>) option are as follows:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">OV<CODECLASS="replaceable"><I>host                             </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> configuration file (V8.6)</I>-oV<CODECLASS="replaceable"><I>host                            </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> command line (V8.6)</I>O FallbackMXhost=<CODECLASS="replaceable"><I>host              </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> configuration file (beginning with V8.7)</I>-OFallbackMXhost=<CODECLASS="replaceable"><I>host              </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> command line (beginning with V8.7)</I>define(`confFALLBACK_MX',`<CODECLASS="replaceable"><I>host</I></CODE>')   <ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> V8 m4 configuration</I></PRE></BLOCKQUOTE></P><PCLASS="para">Here, <CODECLASS="replaceable"><I>host</I></CODE> is of type string and is the fully qualifieddomain name of the fallback host. If <CODECLASS="replaceable"><I>host</I></CODE> or the entireoption is missing, no fallback MX record is used.The effect of this option can be seen by using the <CODECLASS="literal">/mx</CODE>rule-testing command (see <ACLASS="xref"HREF="ch38_05.htm#SML2-CH-38-SECT-5-2"TITLE="Look Up MX Records with /mx">Section 38.5.2, "Look Up MX Records with /mx"</A>).</P><PCLASS="para">The <CODECLASS="literal">FallbackMXhost</CODE> (<CODECLASS="literal">V</CODE>) option is not safe.If specified from the command line,it may cause <EMCLASS="emphasis">sendmail</EM> to relinquish its <EMCLASS="emphasis">root</EM> privilege.</P></DIV></BLOCKQUOTE></DIV><DIVCLASS="refentry"><DIVCLASS="refnamediv"><H3CLASS="refname"><ACLASS="refname"NAME="SML2-CH-34-SECT-8-26">34.8.26 ForkEachJob (Y)</A></H3><PCLASS="refpurpose">Process queue files individually</P>(All versions)</DIV><BLOCKQUOTE><DIVCLASS="refsect1"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-43832"></A><ACLASS="indexterm"NAME="AUTOID-43834"></A>On machines with a small amount of memory (such as 3B1s and oldSun 3s) it is best to limit the size of running processes.One way to do this is to have the <EMCLASS="emphasis">sendmail</EM> program<EMCLASS="emphasis">fork</EM>(2) a copy of itself to handle each individual queued message.The <CODECLASS="literal">ForkEachJob</CODE> (<CODECLASS="literal">Y</CODE>) option can be used to allow those <EMCLASS="emphasis">fork</EM>(2)'s.</P><PCLASS="para">The forms of the <CODECLASS="literal">ForkEachJob</CODE> (<CODECLASS="literal">Y</CODE>) option are as follows:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">OY<CODECLASS="replaceable"><I>bool                             </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> configuration file (old style)</I>-oY<CODECLASS="replaceable"><I>bool                            </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> command line (old style)</I>O ForkEachJob=<CODECLASS="replaceable"><I>bool                 </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> configuration file (beginning with V8.7)</I>-OForkEachJob=<CODECLASS="replaceable"><I>bool                 </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> command line (beginning with V8.7)</I>define(`confSEPARATE_PROC',<CODECLASS="replaceable"><I>bool</I></CODE>)   <ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> V8 m4 configuration</I></PRE></BLOCKQUOTE></P><PCLASS="para">The argument <CODECLASS="replaceable"><I>bool</I></CODE> is of type Boolean. If <CODECLASS="replaceable"><I>bool</I></CODE>is missing, the default is true (fork).The default for the V8 <EMCLASS="emphasis">m4</EM> technique is true.If the entire <CODECLASS="literal">ForkEachJob</CODE> (<CODECLASS="literal">Y</CODE>) option is missing, the default is false (don't fork).</P><PCLASS="para">If option <CODECLASS="literal">ForkEachJob</CODE> (<CODECLASS="literal">Y</CODE>) is set (true), there is a <EMCLASS="emphasis">fork</EM>(2) to startprocessing of the queue, then another <EMCLASS="emphasis">fork</EM>(2) to processeach message in the queue. If option <CODECLASS="literal">ForkEachJob</CODE> (<CODECLASS="literal">Y</CODE>) is not set (false),only the initial <EMCLASS="emphasis">fork</EM>(2) takes place, greatlyimproving the efficiency of a queue run. For example, a singleprocess (as with <CODECLASS="literal">ForkEachJob</CODE> (<CODECLASS="literal">Y</CODE>) false) retains information aboutdown hosts and so does not waste time trying to connect againfor subsequent mail to the same host during the current queue run.For all modern machines the <CODECLASS="literal">ForkEachJob</CODE> (<CODECLASS="literal">Y</CODE>) option should be false.</P><PCLASS="para">The <CODECLASS="literal">ForkEachJob</CODE> (<CODECLASS="literal">Y</CODE>) option is not safe.  If specified from the command line,it may cause <EMCLASS="emphasis">sendmail</EM> to relinquish its <EMCLASS="emphasis">root</EM> privilege.</P></DIV></BLOCKQUOTE></DIV><DIVCLASS="refentry"><DIVCLASS="refnamediv"><H3CLASS="refname"><ACLASS="refname"NAME="SML2-CH-34-SECT-8-27">34.8.27 ForwardPath (J)</A></H3><PCLASS="refpurpose">Set ~/.forward search path</P>(V8 and above)</DIV><BLOCKQUOTE><DIVCLASS="refsect1"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-43888"></A><ACLASS="indexterm"NAME="AUTOID-43890"></A><ACLASS="indexterm"NAME="AUTOID-43893"></A>When mail is being delivered to a local user, <EMCLASS="emphasis">sendmail</EM> attemptsto open and read a file in the user's home directory called <EMCLASS="emphasis">.forward</EM>.If that file exists and is readable, the aliases in that filereplace the local username for delivery.</P><PCLASS="para">Under V8 <EMCLASS="emphasis">sendmail</EM> the <CODECLASS="literal">ForwardPath</CODE> (<CODECLASS="literal">J</CODE>) option is used to definealternative locations for the user's <EMCLASS="emphasis">~/.forward</EM> file.</P><PCLASS="para">The forms of the <CODECLASS="literal">ForwardPath</CODE> (<CODECLASS="literal">J</CODE>) option are as follows:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">OJ<CODECLASS="replaceable"><I>path                            </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> configuration file (V8.6)</I>-oJ<CODECLASS="replaceable"><I>path                           </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> command line (V8.6)</I>O ForwardPath=<CODECLASS="replaceable"><I>path                </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> configuration file (beginning with V8.7)</I>-OForwardPath=<CODECLASS="replaceable"><I>path                </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> command line (beginning with V8.7)</I>define(`confFORWARD_PATH',<CODECLASS="replaceable"><I>path</I></CODE>)   <ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> V8 m4 configuration</I></PRE></BLOCKQUOTE></P><PCLASS="para">The <CODECLASS="replaceable"><I>path</I></CODE> is a colon-separated list of files.An attempt is made toopen and read each in turn, from left to right, until oneis successfully read:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">OJ/var/forward/$u:$z/.forward</PRE></BLOCKQUOTE></P><PCLASS="para">Macros may, and should, be used in the <CODECLASS="replaceable"><I>path</I></CODE> file locations.In the above example, <EMCLASS="emphasis">sendmail</EM> first looks in the file<EMCLASS="emphasis">/var/forward/$u</EM> (where the macro <CODECLASS="literal">$u</CODE> contains theuser's login name; see <ACLASS="xref"HREF="ch31_10.htm#SML2-CH-31-SECT-10-36"TITLE="">Section 31.10.36, $u</A>).If that file can't be opened for reading,<EMCLASS="emphasis">sendmail</EM> tries reading <EMCLASS="emphasis">$z/.forward</EM> (where the <CODECLASS="literal">$z</CODE>macro contains the user's home directory; see <ACLASS="xref"HREF="ch31_10.htm#SML2-CH-31-SECT-10-46"TITLE="">Section 31.10.46, $z</A>).Other macros of interest are <CODECLASS="literal">$w</CODE> (the local hostname; see <ACLASS="xref"HREF="ch31_10.htm#SML2-CH-31-SECT-10-40"TITLE="">Section 31.10.40, $w</A>),<CODECLASS="literal">$x</CODE> (the user's full name; see <ACLASS="xref"HREF="ch31_10.htm#SML2-CH-31-SECT-10-14"TITLE="">Section 31.10.14, $f</A>),<CODECLASS="literal">$r</CODE> (the sending protocol; see <ACLASS="xref"HREF="ch31_10.htm#SML2-CH-31-SECT-10-31"TITLE="">Section 31.10.31, $r</A>),and <CODECLASS="literal">$s</CODE> (the sending host; see <ACLASS="xref"HREF="ch31_10.htm#SML2-CH-31-SECT-10-33"TITLE="">Section 31.10.33, $s</A>).The recommended declaration is to use the name of the sending host thus:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">OJ$z/.forward.$w:$z/.forward</PRE></BLOCKQUOTE></P><PCLASS="para">If the <CODECLASS="replaceable"><I>path</I></CODE> or the entire option is omitted, the defaultis <EMCLASS="emphasis">$z/.forward</EM>. Therefore omitting the <CODECLASS="literal">ForwardPath</CODE> (<CODECLASS="literal">J</CODE>) option causes V8 <EMCLASS="emphasis">sendmail</EM> to emulate older versions by looking onlyin the <EMCLASS="emphasis">~/.forward</EM> file for user forwarding information.</P><PCLASS="para">Beginning with V8.7 <EMCLASS="emphasis">sendmail</EM>, the <CODECLASS="literal">F=w</CODE> delivery agent flag(see <ACLASS="xref"HREF="ch30_08.htm#SML2-CH-30-SECT-8-43"TITLE="">Section 30.8.43, F=w</A>) must be set for the recipient's delivery agent, or all forwardingis skipped. Previously, this was tied to the delivery agent named <CODECLASS="literal">local</CODE>.</P><PCLASS="para">The <CODECLASS="literal">ForwardPath</CODE> (<CODECLASS="literal">J</CODE>) option is not safe.  If specified from the command line,it may cause <EMCLASS="emphasis">sendmail</EM> to relinquish its <EMCLASS="emphasis">root</EM> privilege.</P></DIV></BLOCKQUOTE></DIV><DIVCLASS="refentry"><DIVCLASS="refnamediv"><H3CLASS="refname"><ACLASS="refname"NAME="SML2-CH-34-SECT-8-28">34.8.28 HelpFile (H)</A></H3><PCLASS="refpurpose">Specify location of the help file</P>(All versions)</DIV><BLOCKQUOTE><DIVCLASS="refsect1"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-43966"></A><ACLASS="indexterm"NAME="AUTOID-43968"></A>The <EMCLASS="emphasis">sendmail</EM> program implements the SMTP (and ESMTP)HELP commandby looking up help messagesin a text file. Beginning with V8.7 <EMCLASS="emphasis">sendmail</EM>, help messages for the <CODECLASS="literal">-bt</CODE>rule-testing mode are also looked up in that file.The location and name of that text file are specified byusing the <CODECLASS="literal">HelpFile</CODE> (<CODECLASS="literal">H</CODE>) option. If the name is the C language value NULLor if <EMCLASS="emphasis">sendmail</EM> cannot open that file for reading, <EMCLASS="emphasis">sendmail</EM> issues the following message and continues:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">502 HELP not implemented</PRE></BLOCKQUOTE></P><PCLASS="para">The help file is composed of lines of text, separated by tab charactersinto two fields per line. The leftmost field is an item for whichhelp is offered. The rightmost field (the rest of the line) is thehelp text to be printed. A few lines in a typical help file mightlook like this:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">.ps 8rset   RSETrset          Resets the system.quit   QUITquit          Exit sendmail (SMTP).verb   VERBverb          Go into verbose mode.  This sends 0xy responses that areverb          not RFC821 standard (but should be). They are recognizedverb          by humans and other sendmail implementations.vrfy   VRFY &lt;recipient&gt;vrfy          Verify an address.  If you want to see what it aliasesvrfy          to, use EXPN instead.</PRE></BLOCKQUOTE></P><PCLASS="para">For an SMTP request of <CODECLASS="literal">help&nbsp;vrfy</CODE>, <EMCLASS="emphasis">sendmail</EM> might produce</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">214-VRFY &lt;recipient&gt;214-     Verify an address.  If you want to see what it aliases214-     to, use EXPN instead.214 End of HELP info</PRE></BLOCKQUOTE></P><PCLASS="para">The forms of the <CODECLASS="literal">HelpFile</CODE> (<CODECLASS="literal">H</CODE>) option are as follows:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">OH<CODECLASS="replaceable"><I>file                       </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> configuration file (old form)</I>-oH<CODECLASS="replaceable"><I>file                      </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> command line (old form)</I>O HelpFile=<CODECLASS="replaceable"><I>file              </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> configuration file (beginning with V8.7)</I>-OHelpFile=<CODECLASS="replaceable"><I>file              </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> command line (beginning with V8.7)</I>define(`HELP_FILE',`<CODECLASS="replaceable"><I>file</I></CODE>')   <ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> V8 m4 configuration</I></PRE></BLOCKQUOTE></P><PCLASS="para">The argument <CODECLASS="replaceable"><I>file</I></CODE> is of type string and may be a full orrelative pathname. Relative names are always relative to the queue directory.If <CODECLASS="replaceable"><I>file</I></CODE> is omitted, then the name of thehelp file defaults to <EMCLASS="emphasis">sendmail.hf</EM>. If the entire <CODECLASS="literal">H</CODE>option is omitted, the name of the help file becomes the C languagevalue NULL.The Simple Mail Transfer Protocol (SMTP) is described inRFC821, and Extended SMTP (ESMTP) is described in RFC1869.</P><PCLASS="para">The <CODECLASS="literal">HelpFile</CODE> (<CODECLASS="literal">H</CODE>) option is not safe.  If specified from the command line,it may cause <EMCLASS="emphasis">sendmail</EM> to relinquish its <EMCLASS="emphasis">root</EM> privilege.</P></DIV></BLOCKQUOTE></DIV><DIVCLASS="refentry"><DIVCLASS="refnamediv"><H3CLASS="refname"><ACLASS="refname"NAME="SML2-CH-34-SECT-8-29">34.8.29 HoldExpensive (c)</A></H3><PCLASS="refpurpose">Queue for expensive mailers</P>(All versions)</DIV><BLOCKQUOTE><DIVCLASS="refsect1"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-44020"></A><ACLASS="indexterm"NAME="AUTOID-44022"></A><ACLASS="indexterm"NAME="AUTOID-44024"></A><ACLASS="indexterm"NAME="AUTOID-44026"></A>An <EMCLASS="emphasis">expensive mailer</EM> is a delivery agent thatcontains an <CODECLASS="literal">e</CODE> flag in its <CODECLASS="literal">F=</CODE> equate (see <ACLASS="xref"HREF="ch30_08.htm#SML2-CH-30-SECT-8-18"TITLE="">Section 30.8.18, F=e</A>). Typically, such delivery agents are associated with slow network connections such as SL/IP or with costly networks such as those with high per connect or connection startup rates.Whatever the reason, the <CODECLASS="literal">HoldExpensive</CODE> (<CODECLASS="literal">c</CODE>) optionallows you to queue all suchmail for later delivery rather than connecting on demand.(Queuing is described in <ACLASS="xref"HREF="ch23_01.htm"TITLE="The Queue">Chapter 23</A>.)</P><PCLASS="para">Note that this option affects only the initial delivery attempt,not later attempts when the queue is processed. Essentially, all thisoption does is to defer delivery until the next time the queue isprocessed.</P><PCLASS="para">The forms of the <CODECLASS="literal">HoldExpensive</CODE> (<CODECLASS="literal">c</CODE>) option are as follows:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">Oc<CODECLASS="replaceable"><I>bool                             </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> configuration file (old form)</I>-oc<CODECLASS="replaceable"><I>bool                            </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> command line (old form)</I>-c<CODECLASS="replaceable"><I>                                 </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> command-line shorthand (not recommended)</I>O HoldExpensive=<CODECLASS="replaceable"><I>bool               </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> configuration file (beginning with V8.7)</I>-OHoldExpensive=<CODECLASS="replaceable"><I>bool               </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> command line (beginning with V8.7)</I>define(`confCON_EXPENSIVE',<CODECLASS="replaceable"><I>bool</I></CODE>)   <ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> V8 m4 configuration</I></PRE></BLOCKQUOTE></P><PCLASS="para">The argument <CODECLASS="replaceable"><I>bool</I></CODE> is of type Boolean.If the <CODECLASS="replaceable"><I>bool</I></CODE> argument is missing, the default is true (expensive mailis queued).If the entire <CODECLASS="literal">HoldExpensive</CODE> (<CODECLASS="literal">c</CODE>)option is missing, the default value is false (expensive mailis delivered immediately).</P><PCLASS="para">The <CODECLASS="literal">-v</CODE> (verbose) command-line switch automatically sets the<CODECLASS="literal">HoldExpensive</CODE> (<CODECLASS="literal">c</CODE>) option to false.The <CODECLASS="literal">HoldExpensive</CODE> (<CODECLASS="literal">c</CODE>) option is not safe.If specified from the command line,it may cause <EMCLASS="emphasis">sendmail</EM> to relinquish its <EMCLASS="emphasis">root</EM> privilege.</P></DIV></BLOCKQUOTE></DIV><DIVCLASS="refentry"><DIVCLASS="refnamediv"><H3CLASS="refname"><ACLASS="refname"NAME="SML2-CH-34-SECT-8-30">34.8.30 HostsFile</A></H3><PCLASS="refpurpose">Specify alternate /etc/hosts file</P>(V8.7 and above)</DIV><BLOCKQUOTE><DIVCLASS="refsect1"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-44075"></A><ACLASS="indexterm"NAME="AUTOID-44077"></A>When canonifying a host's name, <EMCLASS="emphasis">sendmail</EM> will usethe method described under the <CODECLASS="literal">ServiceSwitchFile</CODE>option (see <ACLASS="xref"HREF="ch34_08.htm#SML2-CH-34-SECT-8-61"TITLE="">Section 34.8.61</A>). When that methodis <CODECLASS="literal">files</CODE>, <EMCLASS="emphasis">sendmail</EM> parses the <EMCLASS="emphasis">/etc/hosts</EM>file to find the canonical name. If a different file should beused on your system, you can specify it with this<CODECLASS="literal">HostsFile</CODE> option:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">O HostsFile=<CODECLASS="replaceable"><I>path</I></CODE>               <ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> configuration file (beginning with V8.7)</I>-OHostsFile=<CODECLASS="replaceable"><I>path</I></CODE>               <ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> command line (beginning with V8.7)</I>define(`confHOSTS_FILE',<CODECLASS="replaceable"><I>path</I></CODE>)  <ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> V8 m4 configuration</I></PRE></BLOCKQUOTE></P><PCLASS="para">Here, <CODECLASS="replaceable"><I>path</I></CODE> is of type string. If <CODECLASS="replaceable"><I>path</I></CODE> is missing, the nameof the <EMCLASS="emphasis">/etc/hosts</EM> file becomes an empty string. If the entireoption is missing, the default is the value that was given to_PATH_HOSTS when <EMCLASS="emphasis">sendmail</EM> was compiled (see <ACLASS="xref"HREF="ch18_08.htm#SML2-CH-18-SECT-8-34"TITLE="">Section 18.8.34</A>).If the <CODECLASS="replaceable"><I>path</I></CODE> cannot be opened for reading (for any reasonat all), host canonification by this method is silently skipped.</P><PCLASS="para">One example of a use for the <CODECLASS="literal">HostsFile</CODE> option would be touse a switched-service file to cause all host lookups to useDNS first, then files:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">hosts:    dns files</PRE></BLOCKQUOTE></P><PCLASS="para">In that case you would use a special file to hold information aboutinternal hosts that are not known to DNS. Such a file might looklike this:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">123.45.67.89	secret.internal.host.domain</PRE></BLOCKQUOTE></P><PCLASS="para">This special file would be defined with the <CODECLASS="literal">HostsFile</CODE> option.</P><PCLASS="para">The <CODECLASS="literal">HostsFile</CODE> option is not safe.If specified from the command line,it may cause <EMCLASS="emphasis">sendmail</EM> to relinquish its <EMCLASS="emphasis">root</EM> privilege.</P></DIV></BLOCKQUOTE></DIV><DIVCLASS="refentry"><DIVCLASS="refnamediv"><H3CLASS="refname"><ACLASS="refname"NAME="SML2-CH-34-SECT-8-31">34.8.31 HostStatusDirectory</A></H3><PCLASS="refpurpose">Location of persistent host status</P>(V8.8 and above)</DIV><BLOCKQUOTE><DIVCLASS="refsect1"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-44122"></A>The process of delivering network mail requires that <EMCLASS="emphasis">sendmail</EM><EMCLASS="emphasis">fork</EM>(2) so that the child process can handle the queue.Then, if the <CODECLASS="literal">ForkEachJob</CODE> (<CODECLASS="literal">Y</CODE>) option (see<ACLASS="xref"HREF="ch34_08.htm#SML2-CH-34-SECT-8-26"TITLE="">Section 34.8.26</A>) is true, each job in the queue has to <EMCLASS="emphasis">fork</EM>(2)again so that each child-of-a-child can perform each task.Internally, <EMCLASS="emphasis">sendmail</EM> maintains tables of status informationabout network hosts (such as whether the host is up or down or refusingconnections). A problem can arise when multiple queue-processingchildren are running. Because they are separate processes, theirseparate children lack access to the common pool of host informationthat is stored internally by each parent.[17]</P><BLOCKQUOTECLASS="footnote"><PCLASS="para">[17] Also status information from previous queue runs is lost.</P></BLOCKQUOTE><PCLASS="para">One solution is to store host status information externallyso that all children can access it.Inspired by KJS <EMCLASS="emphasis">sendmail</EM>, V8.8 has introducedthe <CODECLASS="literal">HostStatusDirectory</CODE> option. This option both tells<EMCLASS="emphasis">sendmail</EM> that it should save host status information externallyand defines where that information will be stored on disk.</P><PCLASS="para">The form for the <CODECLASS="literal">HostStatusDirectory</CODE> option looks like this:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">O HostStatusDirectory=<CODECLASS="replaceable"><I>path                     </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> V8.8 and above</I>define(`confHOST_STATUS_DIRECTORY', `<CODECLASS="replaceable"><I>path'</I></CODE>)    <ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> V8 m4 technique</I></PRE></BLOCKQUOTE></P><PCLASS="para">Here, <CODECLASS="replaceable"><I>path</I></CODE> is of type string and, if present, specifies thebase directory under which host status will be stored. This maybe a full or relative path specification. If it is a relative path, it is interpretedas relative to the queue directory. If <CODECLASS="replaceable"><I>path</I></CODE> is omittedor if the entire option is omitted, the default is that no persistent host information will be saved.If <CODECLASS="replaceable"><I>path</I></CODE> does not exist or if it exists and is not a directory, <EMCLASS="emphasis">sendmail</EM>will then print the following error and will store no persistent host information:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">Cannot use HostStatusDirectory = <CODECLASS="replaceable"><I>path</I></CODE>: <ICLASS="lineannotation">reason here</I></PRE></BLOCKQUOTE></P><PCLASS="para">The form of the information stored and the way files and directoriesunder this base directory are named are detailed in Appendix <ACLASS="xref"HREF="appb_01.htm"TITLE="Host Status File Internals">Appendix B, <CITECLASS="appendix">Host Status File Internals</CITE></A>.Note that the status information in this directory can be printed with the<EMCLASS="emphasis">hoststat</EM>(1) command (see <ACLASS="xref"HREF="ch36_01.htm#SML2-CH-36-SECT-1-1"TITLE="hoststat (V8.8 and Above)">Section 36.1.1, "hoststat (V8.8 and Above)"</A>).Also note that the <CODECLASS="literal">HostStatusDirectory</CODE> option will not workif the <CODECLASS="literal">ConnectionCacheSize</CODE> option (see <ACLASS="xref"HREF="ch34_08.htm#SML2-CH-34-SECT-8-10"TITLE="">Section 34.8.10</A>)is set to zero:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">Warning: HostStatusDirectory disabled with ConnectionCacheSize = 0</PRE></BLOCKQUOTE></P><PCLASS="para">Note that on machines that send out a great deal of mail, you should probablycompare performance with and without this option enabled and baseyour decision to use it on the result.Also note that this option is required if you wish to alsouse the <CODECLASS="literal">SingleThreadDelivery</CODE> option (see <ACLASS="xref"HREF="ch34_08.htm#SML2-CH-34-SECT-8-64"TITLE="">Section 34.8.64</A>).</P><PCLASS="para">Avoid using a directory that is on a <EMCLASS="emphasis">tmpfs</EM> file system (priorto Sun Solaris 2.5), because file locking is not supported. Avoid using a directory that is on an <EMCLASS="emphasis">nfs</EM> filesystem, because record locking is unreliable and single-threaded and can add extra RPC traffic.</P><PCLASS="para">The <CODECLASS="literal">HostStatusDirectory</CODE> option is not safe.  If it is specified from the command line,it may cause <EMCLASS="emphasis">sendmail</EM> to give up its <EMCLASS="emphasis">root</EM> privilege.</P></DIV></BLOCKQUOTE></DIV><DIVCLASS="refentry"><DIVCLASS="refnamediv"><H3CLASS="refname"><ACLASS="refname"NAME="SML2-CH-34-SECT-8-32">34.8.32 IgnoreDots (i)</A></H3><PCLASS="refpurpose">Ignore leading dots in messages</P>(All versions)</DIV><BLOCKQUOTE><DIVCLASS="refsect1"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-44181"></A><ACLASS="indexterm"NAME="AUTOID-44183"></A><ACLASS="indexterm"NAME="AUTOID-44186"></A>There are two ways that <EMCLASS="emphasis">sendmail</EM> can detect the end of a mailmessage: by noting an end-of-file (EOF) condition or by findinga line composed of a single dot. Accordingto the SMTP and ESMTP protocols (RFC821), the end of the mail data isindicatedby sending a line containing only a period.The <CODECLASS="literal">IgnoreDots</CODE> (<CODECLASS="literal">i</CODE>) option tells <EMCLASS="emphasis">sendmail</EM> to treat any line that containsonly a single period as ordinary text, not as an end-of-file indicator.</P><PCLASS="para">This option is used from the command line to prevent <EMCLASS="emphasis">sendmail</EM>from wrongly thinking that a message is complete when collectingthe message from its standard input. This differs from the correctbehavior when <EMCLASS="emphasis">sendmail</EM> is reading from an SMTP connection.Over SMTP a lone dot must signal the end of the message.</P><PCLASS="para">This option is intended for use from the command line.This option should be used in the configuration file onlyfor sites that have no SMTP network connections.But V8 <EMCLASS="emphasis">sendmail</EM> has built-in protection. If this optionis specified in the configuration file, it is automatically forced false forall SMTP connections.</P><PCLASS="para">The forms of the <CODECLASS="literal">i</CODE> option are as follows:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">Oi<CODECLASS="replaceable"><I>bool                           </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> configuration file (old form)</I>-oi<CODECLASS="replaceable"><I>bool                          </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> command line (old form)</I>-i<CODECLASS="replaceable"><I>                               </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> command-line</I>shorthand (deprecated)O IgnoreDots=<CODECLASS="replaceable"><I>bool                </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> configuration file (beginning with V8.7)</I>-OIgnoreDots=<CODECLASS="replaceable"><I>bool                </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> command line (beginning with V8.7)</I>define(`confIGNORE_DOTS',<CODECLASS="replaceable"><I>bool</I></CODE>)   <ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> V8 m4 configuration</I></PRE></BLOCKQUOTE></P><PCLASS="para">The argument <CODECLASS="replaceable"><I>bool</I></CODE> is of type Boolean. If <CODECLASS="replaceable"><I>bool</I></CODE> ismissing, the default value is true (ignore leading dots).If the <CODECLASS="literal">IgnoreDots</CODE> (<CODECLASS="literal">i</CODE>)option is entirely omitted, the default is false(recognize leading dots as special).</P><PCLASS="para">The <CODECLASS="literal">IgnoreDots</CODE> (<CODECLASS="literal">i</CODE>) option is safe.Even if it is specified from the command line,<EMCLASS="emphasis">sendmail</EM> retains its <EMCLASS="emphasis">root</EM> privilege.</P></DIV></BLOCKQUOTE></DIV><DIVCLASS="refentry"><DIVCLASS="refnamediv"><H3CLASS="refname"><ACLASS="refname"NAME="SML2-CH-34-SECT-8-33">34.8.33 LogLevel (L)</A></H3><PCLASS="refpurpose">Set (increase) logging level</P>(All versions)</DIV><BLOCKQUOTE><DIVCLASS="refsect1"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-44232"></A>The <EMCLASS="emphasis">sendmail</EM> program is able to loga wide variety of information about what it is doing. There isno default file for recording information. Instead, <EMCLASS="emphasis">sendmail</EM> sendsall such information via the UNIX <EMCLASS="emphasis">syslog</EM>(3) mechanism.The disposition of messages by <EMCLASS="emphasis">syslog</EM> is determined byinformation in the file <EMCLASS="emphasis">/etc/syslog.conf</EM> (see <ACLASS="xref"HREF="ch26_01.htm#SML2-CH-26-SECT-1-2"TITLE="Tuning syslog.conf">Section 26.1.2, "Tuning syslog.conf"</A>).One common scheme places noncriticalmessages <EMCLASS="emphasis">/var/log/syslog</EM> but routes importantmessages to <EMCLASS="emphasis">/dev/console</EM> or <EMCLASS="emphasis">/var/adm/messages</EM>.</P><PCLASS="para">The meaningful values for the logging level, andtheir <EMCLASS="emphasis">syslog</EM> priorities, are outlined below.[18]Higher logging levels include thelower logging levels. For example, logging level 2 also causes level1 messages to be logged. &#13;</P><BLOCKQUOTECLASS="footnote"><PCLASS="para">[18] Note that the pre-V8 organization differsand is not covered in this book.</P></BLOCKQUOTE><DLCLASS="variablelist"><DTCLASS="term"><EMCLASS="emphasis">0</EM></DT><DDCLASS="listitem"><PCLASS="para">Minimal logging. See <ACLASS="xref"HREF="ch34_08.htm#SML2-CH-34-SECT-8-33-1"TITLE="What is logged at LogLevel=0">Section 34.8.33.1, "What is logged at LogLevel=0"</A> for examplesof what is logged at this setting.&#13;</P></DD><DTCLASS="term"><EMCLASS="emphasis">1</EM></DT><DDCLASS="listitem"><PCLASS="para">Serious system failures and security problems logged at LOG_CRIT or LOG_ALERT.&#13;</P></DD><DTCLASS="term"><EMCLASS="emphasis">2</EM></DT><DDCLASS="listitem"><PCLASS="para">Communication failures, (e.g., lost connections or protocol failures) logged at LOG_CRIT.&#13;</P></DD><DTCLASS="term"><EMCLASS="emphasis">3</EM></DT><DDCLASS="listitem"><PCLASS="para">Malformed addresses logged at LOG_NOTICE.Transient forward/include errors logged at LOG_ERROR.Connect timeouts logged at LOG_NOTICE.&#13;</P></DD><DTCLASS="term"><EMCLASS="emphasis">4</EM></DT><DDCLASS="listitem"><PCLASS="para">Malformed <CODECLASS="literal">qf</CODE> filenames and minor errors logged at LOG_NOTICE.Out of date alias databases logged at LOG_INFO.Connection rejections (via <EMCLASS="emphasis">libwrap.a</EM> or one of the<CODECLASS="literal">check_</CODE> rule sets) logged at LOG_NOTICE.&#13;</P></DD><DTCLASS="term"><EMCLASS="emphasis">5</EM></DT><DDCLASS="listitem"><PCLASS="para">A record of each message received logged at LOG_INFO.Envelope cloning logged at LOG_INFO.&#13;</P></DD><DTCLASS="term"><EMCLASS="emphasis">6</EM></DT><DDCLASS="listitem"><PCLASS="para">SMTP VRFY attempts and messages returned to the originalsender logged at LOG_INFO.The ETRN and EXPN ESMTP commands logged at LOG_INFO.&#13;</P></DD><DTCLASS="term"><EMCLASS="emphasis">7</EM></DT><DDCLASS="listitem"><PCLASS="para">Delivery failures, excluding mail deferred because of the lack ofa resource, logged at LOG_INFO.&#13;</P></DD><DTCLASS="term"><EMCLASS="emphasis">8</EM></DT><DDCLASS="listitem"><PCLASS="para">Successful deliveries logged at LOG_INFO.Alias database rebuilds logged at LOG_NOTICE.&#13;</P></DD><DTCLASS="term"><EMCLASS="emphasis">9</EM></DT><DDCLASS="listitem"><PCLASS="para">Mail deferred because of a lack of a resource logged at LOG_INFO.&#13;</P></DD><DTCLASS="term"><EMCLASS="emphasis">10</EM></DT><DDCLASS="listitem"><PCLASS="para">Each key as looked up in a database, and the result ofeach lookup, logged at LOG_INFO.&#13;</P></DD><DTCLASS="term"><EMCLASS="emphasis">11</EM></DT><DDCLASS="listitem"><PCLASS="para">All <EMCLASS="emphasis">nis</EM> errors logged at LOG_INFO.The end of processing (job deletion) logged at LOG_INFO.&#13;</P></DD><DTCLASS="term"><EMCLASS="emphasis">12</EM></DT><DDCLASS="listitem"><PCLASS="para">SMTP connects logged at LOG_INFO.&#13;</P></DD><DTCLASS="term"><EMCLASS="emphasis">13</EM></DT><DDCLASS="listitem"><PCLASS="para">Log bad user shells, world-writable files, and other questionablesituations.&#13;</P></DD><DTCLASS="term"><EMCLASS="emphasis">14</EM></DT><DDCLASS="listitem"><PCLASS="para">Connection refusals logged at LOG_INFO.&#13;</P></DD><DTCLASS="term"><EMCLASS="emphasis">15</EM></DT><DDCLASS="listitem"><PCLASS="para">All incoming and outgoing SMTP commands and theirarguments logged at LOG_INFO.&#13;</P></DD><DTCLASS="term"><EMCLASS="emphasis">16-98</EM></DT><DDCLASS="listitem"><PCLASS="para">Debugging information. You'll need the source to understand thislogging. You can <EMCLASS="emphasis">grep</EM>(1) <CODECLASS="literal">LogLevel</CODE> in all the <EMCLASS="emphasis">.c</EM> filesto find interesting things to look for.These are logged at LOG_DEBUG.</P></DD></DL><PCLASS="para">The forms of the <CODECLASS="literal">LogLevel</CODE> (<CODECLASS="literal">L</CODE>) option are as follows:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">OL<CODECLASS="replaceable"><I>lev                         </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> configuration file (old form)</I>-oL<CODECLASS="replaceable"><I>lev                        </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> command line (old form)</I>O LogLevel=<CODECLASS="replaceable"><I>lev                </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> configuration file (beginning with V8.7)</I>-OLogLevel=<CODECLASS="replaceable"><I>lev                </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> command line (beginning with V8.7)</I>define(`confLOG_LEVEL',<CODECLASS="replaceable"><I>lev</I></CODE>)   <ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> V8 m4 configuration</I></PRE></BLOCKQUOTE></P><PCLASS="para">The type for <CODECLASS="replaceable"><I>lev</I></CODE> is numeric and defaults to 0.For the <EMCLASS="emphasis">m4</EM> technique the default is 9.Negative values are equivalent to a logging level of 0.</P><PCLASS="para">Logging is effective only if <EMCLASS="emphasis">sendmail</EM> is compiled with LOGdefined in <EMCLASS="emphasis">conf.h</EM> (see <ACLASS="xref"HREF="ch18_08.htm#SML2-CH-18-SECT-8-16"TITLE="">Section 18.8.16, LOG</A>). The <CODECLASS="literal">-d0.1</CODE>debugging switch (see <ACLASS="xref"HREF="ch37_05.htm#SML2-CH-37-SECT-5-1"TITLE="">Section 37.5.1, -d0.1</A>) can be used to see if LOG wasdefined for your system.</P><PCLASS="para">The <CODECLASS="literal">LogLevel</CODE> (<CODECLASS="literal">L</CODE>) option is safe.  Even if it is specified from the command line,<EMCLASS="emphasis">sendmail</EM> retained its <EMCLASS="emphasis">root</EM> privilege. For securityreasons the logging level of V8.6 and above <EMCLASS="emphasis">sendmail</EM>can be increased from the command line but not decreased.[19]&#13;</P><BLOCKQUOTECLASS="footnote"><PCLASS="para">[19] V8.7.3 <EMCLASS="emphasis">sendmail</EM> was released with the <CODECLASS="literal">LogLevel</CODE> (<CODECLASS="literal">L</CODE>) option set as not safe.</P></BLOCKQUOTE><DIVCLASS="refsect2"><H4CLASS="refsect2"><ACLASS="title"NAME="SML2-CH-34-SECT-8-33-1">34.8.33.1 What is logged at LogLevel=0</A></H4><PCLASS="para">Because of their severe nature, some errors and problems are loggedeven though the <CODECLASS="literal">LogLevel</CODE> (<CODECLASS="literal">L</CODE>) option is set to zero.Specifically,problems with <CODECLASS="literal">$j</CODE> and <CODECLASS="literal">$=w</CODE> that are checked if<EMCLASS="emphasis">sendmail</EM> was compiled with XDEBUG defined:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">daemon process doesn't have $j in $=w; see syslogdaemon process $j lost dot; see syslog</PRE></BLOCKQUOTE></P><PCLASS="para">Failure to find your unqualified hostname or qualified domain:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">My unqualified host name (<ICLASS="lineannotation">my host name</I>) unknownunable to qualify my own domain name (<ICLASS="lineannotation">my host name</I>) - using short name</PRE></BLOCKQUOTE></P><PCLASS="para">If the daemon was invoked without a full pathname:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">daemon invoked without full pathname; kill -1 won't work</PRE></BLOCKQUOTE></P><PCLASS="para">&#13;Normal startup of the daemon:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">starting daemon (<ICLASS="lineannotation">version</I>): <ICLASS="lineannotation">how</I></PRE></BLOCKQUOTE></P><PCLASS="para">File descriptor failure if <EMCLASS="emphasis">sendmail</EM> was compiled with XDEBUG defined:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen"><ICLASS="lineannotation">subroutine</I>: fd <ICLASS="lineannotation">number</I> not open</PRE></BLOCKQUOTE></P><PCLASS="para">Possible attacks based on a newline in a string:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">POSSIBLE ATTACK from <ICLASS="lineannotation">address</I>: newline in string &quot;<ICLASS="lineannotation">string here</I>&quot;</PRE></BLOCKQUOTE></P><PCLASS="para">Also the states dumped as a result of a SIGUSR1 (see <ACLASS="xref"HREF="ch26_03.htm#SML2-CH-26-SECT-3-3"TITLE="SIGUSR1  Dump States">Section 26.3.3, "SIGUSR1  Dump States"</A>) are logged, and the output causedby the <CODECLASS="literal">-d91.100</CODE> switch (see <ACLASS="xref"HREF="ch37_05.htm#SML2-CH-37-SECT-5-192"TITLE="">Section 37.5.192, -d91.100</A>).&#13;</P></DIV></DIV></BLOCKQUOTE></DIV><DIVCLASS="refentry"><DIVCLASS="refnamediv"><H3CLASS="refname"><ACLASS="refname"NAME="SML2-CH-34-SECT-8-34">34.8.34 MatchGECOS (G)</A></H3><PCLASS="refpurpose">Match recipient in gecos field</P>(V8.1 and above)</DIV><BLOCKQUOTE><DIVCLASS="refsect1"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-44422"></A><ACLASS="indexterm"NAME="AUTOID-44424"></A>The <EMCLASS="emphasis">gecos</EM> field is the portion of a <EMCLASS="emphasis">passwd</EM>(5) file line thatcontains a user's full name. Typical <EMCLASS="emphasis">passwd</EM> file lines areillustrated below with the <EMCLASS="emphasis">gecos</EM> field of each highlighted in bold type:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">george:Vnn9x34sEVbCN:101:29:<CODECLASS="userinput"><B>George Washington</B></CODE>:/usr/george:/bin/cshbcx:/a88.97eGSx1l:102:5:<CODECLASS="userinput"><B>Bill Xavier</B></CODE>,,,:/usr/bcx:/bin/cshtim:Fss9UdQl55cde:103:45:<CODECLASS="userinput"><B>&amp; Plenty (Jr)</B></CODE>:/usr/tim:/bin/csh</PRE></BLOCKQUOTE></P><PCLASS="para">When <EMCLASS="emphasis">sendmail</EM> attempts to deliver through a delivery agent thathas the <CODECLASS="literal">F=w</CODE> flag set (see <ACLASS="xref"HREF="ch30_08.htm#SML2-CH-30-SECT-8-43"TITLE="">Section 30.8.43</A>)it looks up the recipient's name in the <EMCLASS="emphasis">passwd</EM> file soit can locate the user's home directory. That lookup triesto match the login name, the leftmost field in the <EMCLASS="emphasis">passwd</EM>file. If <EMCLASS="emphasis">sendmail</EM> has beencompiled with MATCHGECOS defined (see<ACLASS="xref"HREF="ch18_08.htm#SML2-CH-18-SECT-8-18"TITLE="">Section 18.8.18, MATCHGECOS</A>) andthis<CODECLASS="literal">MatchGECOS</CODE> (<CODECLASS="literal">G</CODE>) option is true, <EMCLASS="emphasis">sendmail</EM> also tries to match the recipient name to the <EMCLASS="emphasis">gecos</EM> field.[20]</P><BLOCKQUOTECLASS="footnote"><PCLASS="para">[20] Note that IDA <EMCLASS="emphasis">sendmail</EM> can be configured to match addressesin the <EMCLASS="emphasis">gecos</EM> field, but the algorithm it uses differs fromthat described here.</P></BLOCKQUOTE><PCLASS="para">First, <EMCLASS="emphasis">sendmail</EM> converts any underscore characters in the addressinto spaces and, if the <CODECLASS="literal">BlankSub</CODE> (<CODECLASS="literal">B</CODE>) option is set(see <ACLASS="xref"HREF="ch34_08.htm#SML2-CH-34-SECT-8-5"TITLE="">Section 34.8.5</A>), anycharacters that match that space substitution character intospaces. This makes the recipient name look like a normal full name.</P><PCLASS="para">Second, <EMCLASS="emphasis">sendmail</EM> normalizes each <EMCLASS="emphasis">gecos</EM> entry bythrowing away everything following and including the first comma, semicolon,and percent characters. It also converts the <CODECLASS="literal">&amp;</CODE>to the login name wherever one is found.  If any of the characters</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">&lt; &gt;( ) ' .</PRE></BLOCKQUOTE></P><PCLASS="para">are inside the name, the whole <EMCLASS="emphasis">gecos</EM> name is quoted; otherwise,it's unquoted.</P><PCLASS="para">After each <EMCLASS="emphasis">gecos</EM> name is normalized, it is compared in a case-insensitivemanner to the recipient. If they match, the <EMCLASS="emphasis">passwd</EM> entry for thatuser is used.</P><PCLASS="para">This feature allows users to receive mail addressed to their fullname as given in the <EMCLASS="emphasis">gecos</EM> field of the <EMCLASS="emphasis">passwd</EM> file. The usualform is to replace spaces in the full name with dots or underscores:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">George_WashingtonBill.Xavier&quot;Tim_Plenty_(Jr)&quot;</PRE></BLOCKQUOTE></P><PCLASS="para">Full names in <EMCLASS="emphasis">gecos</EM> fields that contain characters withspecial meaning to <EMCLASS="emphasis">sendmail</EM>, like the last one above,must be quoted when used as addresses.</P><PCLASS="para">You should not enable this option if yoursite lets users edit their own <EMCLASS="emphasis">gecos</EM> fields with the<EMCLASS="emphasis">chfn</EM>(1) program. At best, they can change their namein a way that can cause mail to start failing. Worse, theycan change their name to match another user's andbegin to capture that other user's mail. Even if the <EMCLASS="emphasis">gecos</EM>field is secure, you should avoid this option if your <EMCLASS="emphasis">passwd</EM>file is large. The <EMCLASS="emphasis">sendmail</EM> program performs a sequentialread of the <EMCLASS="emphasis">passwd</EM> file, which could be very slow.</P><PCLASS="para">The forms of the <CODECLASS="literal">MatchGECOS</CODE> (<CODECLASS="literal">G</CODE>) option are as follows:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">OG<CODECLASS="replaceable"><I>bool                           </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> configuration file (old form)</I>-oG<CODECLASS="replaceable"><I>bool                          </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> command line (old form)</I>O MatchGECOS=<CODECLASS="replaceable"><I>bool                </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> configuration file (beginning with V8.7)</I>-OMatchGECOS=<CODECLASS="replaceable"><I>bool                </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> command line (beginning with V8.7)</I>define(`confMATCH_GECOS',<CODECLASS="replaceable"><I>bool</I></CODE>)   <ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> V8 m4 configuration</I></PRE></BLOCKQUOTE></P><PCLASS="para">The <CODECLASS="literal">MatchGECOS</CODE> (<CODECLASS="literal">G</CODE>) option is not safe.  If it is specified from the command line,it may cause <EMCLASS="emphasis">sendmail</EM> to give up its <EMCLASS="emphasis">root</EM> privilege.</P></DIV></BLOCKQUOTE></DIV><DIVCLASS="refentry"><DIVCLASS="refnamediv"><H3CLASS="refname"><ACLASS="refname"NAME="SML2-CH-34-SECT-8-35">34.8.35 MaxDaemonChildren</A></H3><PCLASS="refpurpose">Maximum forked children</P>(V8.8 and above)</DIV><BLOCKQUOTE><DIVCLASS="refsect1"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-44510"></A><ACLASS="indexterm"NAME="AUTOID-44512"></A>The <EMCLASS="emphasis">sendmail</EM> program <EMCLASS="emphasis">fork</EM>(3)'s often. It forks to process eachincoming connection, and it forks to process its queue.</P><PCLASS="para">You can limit the number offorked children that <EMCLASS="emphasis">sendmail</EM> produces by defining the<CODECLASS="literal">MaxDaemonChildren</CODE> option: </P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">O MaxDaemonChildren=<CODECLASS="replaceable"><I>num                  </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> configuration file (beginning with V8.7)</I>-OMaxDaemonChildren=<CODECLASS="replaceable"><I>num                  </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> command line (beginning with V8.7)</I>define(`confMAX_DAEMON_CHILDREN', `<CODECLASS="replaceable"><I>num')   </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> V8 m4 technique</I></PRE></BLOCKQUOTE></P><PCLASS="para">The <CODECLASS="replaceable"><I>num</I></CODE> is of type numeric and specifies the maximum number offorked children that are allowed to exist at any one time.If <CODECLASS="replaceable"><I>num</I></CODE> is less than or equal to zero, if it is missing,or if this entire option is missing, no limit is imposed.If <CODECLASS="replaceable"><I>num</I></CODE> is greater than zero,connections that cause more than that number offorked children to be created will be rejected. While rejecting more connections,<EMCLASS="emphasis">sendmail</EM> will change its process title to read</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">rejecting connections: maximum children: <CODECLASS="replaceable"><I>num</I></CODE></PRE></BLOCKQUOTE></P><PCLASS="para">If <CODECLASS="replaceable"><I>num</I></CODE> is greater than zero, <EMCLASS="emphasis">sendmail</EM> will also limitthe number of forked children it creates to handle queue runs.</P><PCLASS="para">Note the <CODECLASS="literal">MaxDaemonChildren</CODE> option should not be set in the configurationfile. If the daemon handling incoming mail has this option set, a denial-of-service attack can easily be launched against your machine.Beginning with V8.8, the <CODECLASS="literal">ConnectionRateThrottle</CODE> option(see <ACLASS="xref"HREF="ch34_08.htm#SML2-CH-34-SECT-8-12"TITLE="">Section 34.8.12</A>) can be used to slow rapid incomingconnections and can be used with the incoming daemon.</P><PCLASS="para">The <CODECLASS="literal">MaxDaemonChildren</CODE> option is appropriate for use in certainqueue-processing situations. For example, consider a specialqueue that exclusively holds mail for a popular host (say, <EMCLASS="emphasis">/var/spool/bigqueue</EM>).To handle the outgoing mail, you could run <EMCLASS="emphasis">sendmail</EM>in queue-processing mode like this:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">/usr/lib/sendmail -q5m -OMaxDaemonChildren=2 -OQueueDirectory=/var/spool/bigqueue</PRE></BLOCKQUOTE></P><PCLASS="para">Here, the queue is processed once every five minutes. If the number of children were not limited and if the queue were large or the destination host slow,too many parallel invocations of <EMCLASS="emphasis">sendmail</EM> would be spawned, thuscausing excessive connections to the destination host. By limiting thenumber of children with the <CODECLASS="literal">MaxDaemonChildren</CODE> option, you allowa small, polite amount of parallelism.</P><PCLASS="para">The <CODECLASS="literal">MaxDaemonChildren</CODE> option is not safe.If specified from the command line,it may cause <EMCLASS="emphasis">sendmail</EM> to relinquish its <EMCLASS="emphasis">root</EM> privilege.</P></DIV></BLOCKQUOTE></DIV><DIVCLASS="refentry"><DIVCLASS="refnamediv"><H3CLASS="refname"><ACLASS="refname"NAME="SML2-CH-34-SECT-8-36">34.8.36 MaxHopCount (h)</A></H3><PCLASS="refpurpose">Set maximum hop count</P>(All version)</DIV><BLOCKQUOTE><DIVCLASS="refsect1"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-44563"></A><ACLASS="indexterm"NAME="AUTOID-44565"></A>A <EMCLASS="emphasis">hop</EM> is the transmittal of a mail message fromone machine to another.[21]Many hops may be required to deliver a message.The number of hops is determined by counting the <CODECLASS="literal">Received:</CODE> and<CODECLASS="literal">Via:</CODE> lines[22]in the header of an email message.</P><BLOCKQUOTECLASS="footnote"><PCLASS="para">[21] The IP transport protocol also has the concept of hops. A message going fromone machine to another has only one mail hop but may havemany IP hops.</P><PCLASS="para">[22] Actually, only the headers that are marked withan H_TRACE flag (see <ACLASS="xref"HREF="ch35_05.htm#SML2-CH-35-SECT-5-8"TITLE="H_TRACE">Section 35.5.8, "H_TRACE"</A>) are counted.</P></BLOCKQUOTE><PCLASS="para">The <CODECLASS="literal">MaxHopCount</CODE> (<CODECLASS="literal">h</CODE>) option tells <EMCLASS="emphasis">sendmail</EM>the maximum number of timesa message can be forwarded. When <EMCLASS="emphasis">sendmail</EM>receives a message via email, it calculates the hop count. If that countis above the maximum allowed, it bounces the message backto the sender with the error</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">sendmail: too many hops (17 max)</PRE></BLOCKQUOTE></P><PCLASS="para">In this case, <CODECLASS="literal">17</CODE> is the maximum. Detecting too manyhops is useful in stopping <EMCLASS="emphasis">mail loops</EM>&nbsp;- messagesbeing forwarded back and forth between two machines.</P><PCLASS="para">The forms of the <CODECLASS="literal">MaxHopCount</CODE> (<CODECLASS="literal">h</CODE>) option are as follows:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">Oh<CODECLASS="replaceable"><I>hops                       </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> configuration file (old form)</I>-oh<CODECLASS="replaceable"><I>hops                      </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> command line (old form)</I>O MaxHopCount=<CODECLASS="replaceable"><I>hops           </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> configuration file (beginning with V8.7)</I>-OMaxHopCount=<CODECLASS="replaceable"><I>hops           </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> command line (beginning with V8.7)</I>define(`confMAX_HOP',<CODECLASS="replaceable"><I>hops</I></CODE>)   <ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> V8 m4 configuration</I></PRE></BLOCKQUOTE></P><PCLASS="para">The <CODECLASS="replaceable"><I>hops</I></CODE> argument is of type numeric.If <CODECLASS="replaceable"><I>hops</I></CODE> is missing, the value becomes zero and causesall mail to fail with the error:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">sendmail: too many hops (0 max)</PRE></BLOCKQUOTE></P><PCLASS="para">If the entire <CODECLASS="literal">MaxHopCount</CODE> (<CODECLASS="literal">h</CODE>) option is missing, <CODECLASS="replaceable"><I>hops</I></CODE> defaults to 25.A good value is 15 or more. This allows mail to followa fairly long route through many machines (as it could with UUCP)but still catches and bounces mail caught in a loop between two machines.</P><PCLASS="para">In pre-V8 <EMCLASS="emphasis">sendmail</EM> there was no <CODECLASS="literal">h</CODE> option for setting the maximumnumber of hops. Instead, the number of hops could be limited only by thecompile-time definition of MAXHOP in <EMCLASS="emphasis">conf.h</EM>.The default definition variedbetween 15 for IDA <EMCLASS="emphasis">sendmail</EM> and 30 for V5 and earlierSunOS <EMCLASS="emphasis">sendmail</EM>.</P><PCLASS="para">The <CODECLASS="literal">MaxHopCount</CODE> (<CODECLASS="literal">h</CODE>) option should not be confusedwith the <CODECLASS="literal">-h</CODE> command-line switch (see <ACLASS="xref"HREF="ch36_07.htm#SML2-CH-36-SECT-7-22"TITLE="">Section 36.7.22, -h</A>).The <CODECLASS="literal">MaxHopCount</CODE> (<CODECLASS="literal">h</CODE>)option specifies the maximum number ofhops allowed, whereas the <CODECLASS="literal">-h</CODE> command-line switch presets the(beginning) hop count for a given email message.</P><PCLASS="para">The <CODECLASS="literal">MaxHopCount</CODE> (<CODECLASS="literal">h</CODE>) option is not safe.  If specified from the command line,it may cause <EMCLASS="emphasis">sendmail</EM> to relinquish its <EMCLASS="emphasis">root</EM> privilege.</P></DIV></BLOCKQUOTE></DIV><DIVCLASS="refentry"><DIVCLASS="refnamediv"><H3CLASS="refname"><ACLASS="refname"NAME="SML2-CH-34-SECT-8-37">34.8.37 MaxMessageSize</A></H3><PCLASS="refpurpose">Maximum incoming ESMTP message size</P>(V8.7 and above)</DIV><BLOCKQUOTE><DIVCLASS="refsect1"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-44636"></A><ACLASS="indexterm"NAME="AUTOID-44638"></A><ACLASS="indexterm"NAME="AUTOID-44641"></A><ACLASS="indexterm"NAME="AUTOID-44644"></A><ACLASS="indexterm"NAME="AUTOID-44646"></A><ACLASS="indexterm"NAME="AUTOID-44649"></A>The SIZE keyword to the ESMTP MAIL command tells V8 <EMCLASS="emphasis">sendmail</EM>how big an incoming message is in bytes.If the SIZE keyword is not specified,<EMCLASS="emphasis">sendmail</EM> assumes that the incoming message is zero bytes in size.V8 <EMCLASS="emphasis">sendmail</EM> can reject a message at this pointif it is larger than a definable maximum message size:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">Message size exceeds fixed maximum message size (<CODECLASS="replaceable"><I>max</I></CODE>)</PRE></BLOCKQUOTE></P><PCLASS="para">Here, <CODECLASS="replaceable"><I>max</I></CODE> is the maximum acceptable size in bytes.Ordinarily, there no maximum. If you want to define one,you may do so with the <CODECLASS="literal">MaxMessageSize</CODE> (<CODECLASS="literal">b</CODE>) option:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">Ob<CODECLASS="replaceable"><I>minblocks/maxsize</I></CODE>                      <ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> configuration file (beginning with V8.1)</I>-ob<CODECLASS="replaceable"><I>minblocks/maxsize</I></CODE>                     <ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> command line (beginning with V8.1)</I>O MaxMessageSize=<CODECLASS="replaceable"><I>maxsize</I></CODE>                 <ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> configuration file (beginning with V8.7)</I>-OMaxMessageSize=<CODECLASS="replaceable"><I>maxsize</I></CODE>                 <ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> command line (beginning with V8.7)</I>define(`confMAX_MESSAGE_SIZE',<CODECLASS="replaceable"><I>maxsize</I></CODE>)   <ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> V8 m4 configuration</I></PRE></BLOCKQUOTE></P><PCLASS="para">If <CODECLASS="replaceable"><I>maxsize</I></CODE> is omitted or if this entire optionis omitted,the default is 0 (for unlimited message sizes). For the <EMCLASS="emphasis">m4</EM> configuration the default is <CODECLASS="literal">0</CODE> (unlimited).Note that the <CODECLASS="literal">b</CODE> option can also set the minimum blocksfree (see <ACLASS="xref"HREF="ch34_08.htm#SML2-CH-34-SECT-8-40"TITLE="">Section 34.8.40</A>).</P><PCLASS="para">This limit on message size is enforced during the SMTP dialogue.Later, after a delivery agent has been selected, further limitationscan be imposed by using the <CODECLASS="literal">M=</CODE> delivery agent equate (see <ACLASS="xref"HREF="ch30_04.htm#SML2-CH-30-SECT-4-7"TITLE="">Section 30.4.7, M=</A>).</P><PCLASS="para">The <CODECLASS="literal">MaxMessageSize</CODE> (<CODECLASS="literal">b</CODE>) option is not safe.If specified from the command line,it may cause <EMCLASS="emphasis">sendmail</EM> to relinquish its <EMCLASS="emphasis">root</EM> privilege.</P></DIV></BLOCKQUOTE></DIV><DIVCLASS="refentry"><DIVCLASS="refnamediv"><H3CLASS="refname"><ACLASS="refname"NAME="SML2-CH-34-SECT-8-38">34.8.38 MaxQueueRunSize</A></H3><PCLASS="refpurpose">Maximum queue messages processed</P>(V8.7 and above)</DIV><BLOCKQUOTE><DIVCLASS="refsect1"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-44695"></A><ACLASS="indexterm"NAME="AUTOID-44697"></A>Ordinarily (beginning with V8.6 <EMCLASS="emphasis">sendmail</EM>), there is nolimit to the number of queued messages that can be processedduring a single queue run. If there are more messages than<EMCLASS="emphasis">sendmail</EM> has allocated memory for, <EMCLASS="emphasis">sendmail</EM> will calmlyallocate more memory. (Previously, there was a fixed limit imposedat compile time.)</P><PCLASS="para">Some systems process so much mail that a single queue run canbecome unmanageably large&nbsp;- so huge, in fact, that system resourcesare strained to the limit with an adverse effect on system performance.If your site suffers from this problem, beginning with V8.7 you can set an upper limit on the number of queued messagesto be processed by using the <CODECLASS="literal">MaxQueueRunSize</CODE> option:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">O MaxQueueRunSize=<CODECLASS="replaceable"><I>limit</I></CODE>                     <ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> configuration file (beginning with V8.7)</I>-OMaxQueueRunSize=<CODECLASS="replaceable"><I>limit</I></CODE>                     <ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> command line (beginning with V8.7)</I>define(`confMAX_QUEUE_RUN_SIZE',<CODECLASS="replaceable"><I>limit</I></CODE>)      <ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> m4 configuration</I></PRE></BLOCKQUOTE></P><PCLASS="para">Here, <CODECLASS="replaceable"><I>limit</I></CODE> is of type numeric and defines the upper limiton how many queued messages can be processed during a single queuerun. If <CODECLASS="replaceable"><I>limit</I></CODE> is less than or equal to zero, if itis missing, or if the entire option is missing,no limit is imposed.The default is to impose no limit.</P><PCLASS="para">If <CODECLASS="literal">MaxQueueRunSize</CODE> is defined and if that limit is reached while processingthe queue, <EMCLASS="emphasis">sendmail</EM> will log the following message at LOG_ALERT:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">WorkList for <CODECLASS="replaceable"><I>queuedir</I></CODE> maxed out at <CODECLASS="replaceable"><I>limit</I></CODE></PRE></BLOCKQUOTE></P><PCLASS="para">Processing of the queue is described in <ACLASS="xref"HREF="ch23_05.htm"TITLE="How the Queue Is Processed">Section 23.5, "How the Queue Is Processed"</A>.That process can be watched with the <CODECLASS="literal">-d41</CODE> debugging switch (see <ACLASS="xref"HREF="ch37_05.htm#SML2-CH-37-SECT-5-144"TITLE="">Section 37.5.144, -d41.1</A>).</P><PCLASS="para">The <CODECLASS="literal">MaxQueueRunSize</CODE> option is safe. Even if it is specified from the command line,<EMCLASS="emphasis">sendmail</EM> retains its <EMCLASS="emphasis">root</EM> privilege.</P></DIV></BLOCKQUOTE></DIV><DIVCLASS="refentry"><DIVCLASS="refnamediv"><H3CLASS="refname"><ACLASS="refname"NAME="SML2-CH-34-SECT-8-39">34.8.39 MeToo (m)</A></H3><PCLASS="refpurpose">Send to me too</P>(All versions)</DIV><BLOCKQUOTE><DIVCLASS="refsect1"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-44739"></A><ACLASS="indexterm"NAME="AUTOID-44741"></A><ACLASS="indexterm"NAME="AUTOID-44744"></A>When you send mail to a mailing list that includes your name as a partof that list, <EMCLASS="emphasis">sendmail</EM> normally excludes you from that mailing.There are two good reasons for that behavior:</P><ULCLASS="itemizedlist"><LICLASS="listitem"><PCLASS="para">Since you sent the mail, it is assumed that you already have a copyof the letter. Most mailing programs have options that allow youto automatically retain copies of your outgoing mail. The BSD <EMCLASS="emphasis">Mail</EM>program, for example, has the <EMCLASS="emphasis">outfolder</EM> option.</P></LI><LICLASS="listitem"><PCLASS="para">When mail passes through a site that is acting as an exploder foran outside mailing list, mail loops could be caused by sending a copyof the message back to the original sender.</P></LI></UL><PCLASS="para">The <CODECLASS="literal">MeToo</CODE> (<CODECLASS="literal">m</CODE>) option overrides this behavior, but it is usuallybest to keep it turned off. If individualusers want to be included in mailings to lists that they belong to,they can set this behavior from their mail-sending programs.BSD <EMCLASS="emphasis">Mail</EM>, for example, allows you to <CODECLASS="literal">set&nbsp;metoo</CODE> inyour <EMCLASS="emphasis">~/.mailrc</EM> file. This use of <CODECLASS="literal">metoo</CODE> simply causes<EMCLASS="emphasis">Mail</EM> to invoke <EMCLASS="emphasis">sendmail</EM> with the <CODECLASS="literal">-om</CODE> switch,thereby setting the <CODECLASS="literal">MeToo</CODE> (<CODECLASS="literal">m</CODE>) option.</P><PCLASS="para">The forms of the <CODECLASS="literal">MeToo</CODE> (<CODECLASS="literal">m</CODE>) option are as follows:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">Om<CODECLASS="replaceable"><I>bool                      </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> configuration file (old form)</I>-om<CODECLASS="replaceable"><I>bool                     </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> command line (old form)</I>-m<CODECLASS="replaceable"><I>                          </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> command-line shorthand</I>O MeToo=<CODECLASS="replaceable"><I>bool                </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> configuration file (beginning with V8.7)</I>-OMeToo=<CODECLASS="replaceable"><I>bool                </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> command line (beginning with V8.7)</I>define(`confME_TOO',<CODECLASS="replaceable"><I>bool</I></CODE>)   <ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> V8 m4 configuration</I></PRE></BLOCKQUOTE></P><PCLASS="para">The optional argument <CODECLASS="replaceable"><I>bool</I></CODE>, when missing, defaults to true (includethe sender).If this option is entirely missing, it defaults to false (exclude the sender).</P><PCLASS="para">The <CODECLASS="literal">MeToo</CODE> (<CODECLASS="literal">m</CODE>) option is safe.  Even if it is specified from the command line,<EMCLASS="emphasis">sendmail</EM> retains its <EMCLASS="emphasis">root</EM> privilege.</P></DIV></BLOCKQUOTE></DIV><DIVCLASS="refentry"><DIVCLASS="refnamediv"><H3CLASS="refname"><ACLASS="refname"NAME="SML2-CH-34-SECT-8-40">34.8.40 MinFreeBlocks (b)</A></H3><PCLASS="refpurpose">Define minimum free disk blocks</P>(V8.1 and above)</DIV><BLOCKQUOTE><DIVCLASS="refsect1"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-44799"></A><ACLASS="indexterm"NAME="AUTOID-44801"></A>The SIZE keyword to the ESMTP MAIL command tells V8 <EMCLASS="emphasis">sendmail</EM>how big an incoming message is in bytes.If the SIZE keyword is not specified,<EMCLASS="emphasis">sendmail</EM> assumes that the incoming message is zero bytes in size.In either case it calls the subroutine <EMCLASS="emphasis">enoughspace</EM>()in <EMCLASS="emphasis">conf.c</EM> to see whether enough space is available inthe queue to accept the message. Unless <EMCLASS="emphasis">sendmail</EM> istold otherwise, it assumes it can use 100% of the diskspace in the queue. If SIZE bytes will overfill the queue disk,<EMCLASS="emphasis">sendmail</EM> prints the following error and rejects themail message:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">Insufficient disk space; try again later</PRE></BLOCKQUOTE></P><PCLASS="para">Note that the SIZE keyword (if received) is just an estimate that allowsoversized mail to be rejected early in the ESMTP dialogue.V8 <EMCLASS="emphasis">sendmail</EM> still properly diagnoses out-of-spaceconditions when it actually reads the message.</P><PCLASS="para">If using 100% of the disk space is unacceptable, you canuse the <CODECLASS="literal">MinFreeBlocks</CODE> (<CODECLASS="literal">b</CODE>) option to reserve space for otherkinds of files:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">Ob<CODECLASS="replaceable"><I>minblocks/maxsize                             </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> configuration file (beginning with V8.6)</I>-ob<CODECLASS="replaceable"><I>minblocks/maxsize                            </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> command line (beginning with V8.6)</I>O MinFreeBlocks=<CODECLASS="replaceable"><I>minblocks                       </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> configuration file (beginning with V8.7)</I>-OMinFreeBlocks=<CODECLASS="replaceable"><I>minblocks                       </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> command line (beginning with V8.7)</I>define(`confMIN_FREE_BLOCKS',<CODECLASS="replaceable"><I>minblocks</I></CODE>)         <ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> V8 m4 configuration</I></PRE></BLOCKQUOTE></P><PCLASS="para">Here, <CODECLASS="replaceable"><I>minblocks</I></CODE> is of type numeric and isthe number of disk blocks you wish to reserve. If <CODECLASS="replaceable"><I>minblocks</I></CODE> is missing or negative or if theentire option is omitted, no blocks are reserved.For the V8.6 form of the <CODECLASS="literal">b</CODE> option aslash is required to separate <CODECLASS="replaceable"><I>minblocks</I></CODE> from<CODECLASS="replaceable"><I>maxsize</I></CODE> (<CODECLASS="replaceable"><I>maxsize</I></CODE> is described underthe <CODECLASS="literal">MaxMessageSize</CODE> option, <ACLASS="xref"HREF="ch34_08.htm#SML2-CH-34-SECT-8-37"TITLE="">Section 34.8.37</A>).The default when configuring with the V8 <EMCLASS="emphasis">m4</EM> method is 100.</P><PCLASS="para">Note that <CODECLASS="literal">minblocks</CODE> are reserved only for the ESMTP SIZE keyword to the MAIL command.No check is made for any other kind of queuing to reservespace. Consequently, you should reserve a sufficient number ofblocks to satisfy your normal queuing needs.</P><PCLASS="para">The <CODECLASS="literal">MinFreeBlocks</CODE> (<CODECLASS="literal">b</CODE>) option is not safe.If specified from the command line,it may cause <EMCLASS="emphasis">sendmail</EM> to relinquish its <EMCLASS="emphasis">root</EM> privilege.</P></DIV></BLOCKQUOTE></DIV><DIVCLASS="refentry"><DIVCLASS="refnamediv"><H3CLASS="refname"><ACLASS="refname"NAME="SML2-CH-34-SECT-8-41">34.8.41 MinQueueAge</A></H3><PCLASS="refpurpose">Skip queue file if too young</P>(V8.7 and above)</DIV><BLOCKQUOTE><DIVCLASS="refsect1"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-44853"></A><ACLASS="indexterm"NAME="AUTOID-44855"></A>Ordinarily, all messages in the queue are processed whenever<EMCLASS="emphasis">sendmail</EM> is run in queue-processing mode.No distinction is made between recently queued messages and messagesthat have been in the queue for a long time (other than by priority whichsimply orders the processing).</P><PCLASS="para">Some sites may prefer to process the queue often, say, once every fiveminutes. This ensures that all important mail will be delivered promptly but can exact a price in degraded performance.Every time the queue is processed, <EMCLASS="emphasis">sendmail</EM> tries to deliver everymail message the queue contains, but at many sites therecan be many queued messages that should not be retriedevery five minutes.One way to handle this problem is to set the <CODECLASS="literal">MinQueueAge</CODE> option.If it is set to <CODECLASS="literal">1h</CODE> (one hour),every queued message is forced to remain in the queue for a minimum of onehour, even if the queue is processed more frequently:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">O MinQueueAge=<CODECLASS="replaceable"><I>wait			</I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> configuration file (beginning with V8.7)</I>-OMinQueueAge=<CODECLASS="replaceable"><I>wait			</I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> command line (beginning with V8.7)</I>define(`confMIN_QUEUE_AGE',`<CODECLASS="replaceable"><I>wait</I></CODE>')		<ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> V8 m4 configuration</I></PRE></BLOCKQUOTE></P><PCLASS="para">The argument <CODECLASS="replaceable"><I>wait</I></CODE> is of type time. If <CODECLASS="replaceable"><I>wait</I></CODE> isless than or equal to zero or if it is missing, this feature is disabled.If the units in the time expression are omitted, the default is minutes.There is no default for the <EMCLASS="emphasis">m4</EM> method.</P><PCLASS="para">Note that the decision of whether to process or not is <EMCLASS="emphasis">not</EM> basedon the time the message was placed into the queue. Itis instead based on the time the message was last processed from the queue.This time is stored in the <CODECLASS="literal">K</CODE> line of the <CODECLASS="literal">qf</CODE> file(see <ACLASS="xref"HREF="ch23_09.htm#SML2-CH-23-SECT-9-8"TITLE="">Section 23.9.8, K line</A>). This minimum is enforced only if the number oftimes delivery has been attempted is greater than zero (see the<CODECLASS="literal">qf</CODE> file's <CODECLASS="literal">N</CODE> line, <ACLASS="xref"HREF="ch23_09.htm#SML2-CH-23-SECT-9-10"TITLE="">Section 23.9.10, N line</A>). This ensuresthat the first delivery attempt will be made immediately.</P><PCLASS="para">The <CODECLASS="literal">MinQueueAge</CODE> option is safe. If specified from the command line,<EMCLASS="emphasis">sendmail</EM> will not relinquish its <EMCLASS="emphasis">root</EM> privilege.</P></DIV></BLOCKQUOTE></DIV><DIVCLASS="refentry"><DIVCLASS="refnamediv"><H3CLASS="refname"><ACLASS="refname"NAME="SML2-CH-34-SECT-8-42">34.8.42 MustQuoteChars</A></H3><PCLASS="refpurpose">Quote nonaddress characters</P>(V8.8 and above)</DIV><BLOCKQUOTE><DIVCLASS="refsect1"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-44894"></A><ACLASS="indexterm"NAME="AUTOID-44896"></A>All addresses are composed of address information and nonaddress information.The two most common forms of addresses look like this:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">address (non-address)non-address &lt;address&gt;</PRE></BLOCKQUOTE></P><PCLASS="para">Usually, the nonaddress information is a user's full name or somethingsimilar. RFC822 requires that certain characters be quoted if theyappear in the nonaddress part of an address:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">@ , ; : \ ( ) [ ] . \'</PRE></BLOCKQUOTE></P><PCLASS="para">Nonaddress information inside parentheses is already quoted by thoseparentheses. Other nonaddress that contains any of these charactersneeds to be quoted with full quotation marks. To illustrate, considerthis address:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">From: Bob@home &lt;bob@here.uofa.edu&gt;</PRE></BLOCKQUOTE></P><PCLASS="para">Because the nonaddress part <CODECLASS="literal">Bob@home</CODE> contains an <CODECLASS="literal">@</CODE>character, <EMCLASS="emphasis">sendmail</EM> is required to quote the entire phrase,thus forming</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">From: &quot;Bob@home&quot; &lt;bob@here.uofa.edu&gt;</PRE></BLOCKQUOTE></P><PCLASS="para">This quoting is automatic and cannot be turned off for the first ninecharacters:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">@ , ; : \ ( ) [ ] . \'                  <IMGSRC="../chars/uarr.gif"ALT="-^"> <IMGSRC="../chars/uarr.gif"ALT="-^">		<ICLASS="lineannotation">the last two are optional (but are required by RFC822)</I></PRE></BLOCKQUOTE></P><PCLASS="para">The last two characters are optional (but required by RFC822). All 11 charactersare the default for the <CODECLASS="literal">MustQuoteChars</CODE> option.If you wish to add characters to the mandatory list of characters that will be quoted, youmay do so with the <CODECLASS="literal">MustQuoteChars</CODE> option:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">O MustQuoteChars=<CODECLASS="replaceable"><I>more            </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> V8.8 and above</I>-OMustQuoteChars=<CODECLASS="replaceable"><I>more            </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> V8.8 and above</I></PRE></BLOCKQUOTE></P><PCLASS="para">Here, <CODECLASS="replaceable"><I>more</I></CODE> is of type string and is the list of additionalcharacters that you wish to see quoted in the nonaddress part of addresses.The <CODECLASS="replaceable"><I>more</I></CODE> characters replace the optional characters and appendto the mandatory characters.If <CODECLASS="replaceable"><I>more</I></CODE> is missing, the optional characters are dropped.There is no <EMCLASS="emphasis">m4</EM> shorthand for setting this option.</P><PCLASS="para">The <CODECLASS="literal">MustQuoteChars</CODE> option is not safe.If specified from the command line,it may cause <EMCLASS="emphasis">sendmail</EM> to relinquish its <EMCLASS="emphasis">root</EM> privilege.</P></DIV></BLOCKQUOTE></DIV><DIVCLASS="refentry"><DIVCLASS="refnamediv"><H3CLASS="refname"><ACLASS="refname"NAME="SML2-CH-34-SECT-8-43">34.8.43 NoRecipientAction</A></H3><PCLASS="refpurpose">Handle no recipients in header</P>(V8.7 and above)</DIV><BLOCKQUOTE><DIVCLASS="refsect1"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-44942"></A><ACLASS="indexterm"NAME="AUTOID-44944"></A>The header portion of a mail message must contain at leastone recipient header. Problemscan arise when an MUA produces a recipientless message orwhen the only recipients are listed in a <CODECLASS="literal">Bcc:</CODE> headerline. In the past, <EMCLASS="emphasis">sendmail</EM> inserted an <CODECLASS="literal">Apparently-To:</CODE> header<ACLASS="indexterm"NAME="AUTOID-44950"></A>(see <ACLASS="xref"HREF="ch35_10.htm#SML2-CH-35-SECT-10-2"TITLE="">Section 35.10.2, Apparently-To:</A>)into any message that lacked header recipients. The addressesin the <CODECLASS="literal">Apparently-To:</CODE> were gleaned from the envelope.</P><PCLASS="para">Beginning with V8.7 <EMCLASS="emphasis">sendmail</EM>, it is possibleto chose how recipientless headers will be handled. This isdone with the <CODECLASS="literal">NoRecipientAction</CODE> option, which is used likethis:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">O NoRecipientAction=<CODECLASS="replaceable"><I>what              </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> configuration file (beginning with V8.7)</I>-ONoRecipientAction=<CODECLASS="replaceable"><I>what              </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> command line (beginning with V8.7)</I>define(`confNO_RCPT_ACTION',<CODECLASS="replaceable"><I>what</I></CODE>)     <ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> m4 configuration</I></PRE></BLOCKQUOTE></P><PCLASS="para">&#13;The argument <CODECLASS="replaceable"><I>what</I></CODE> is of type string and must be selected fromthose shown in<ACLASS="xref"HREF="ch34_08.htm#SML2-CH-34-TAB-15"TITLE="NoRecipientAction Option Keywords">Table 34.16</A>.If the <CODECLASS="replaceable"><I>what</I></CODE> is omitted or if it is otherthan one of the possibilities shown, the following error is printed,and the option is ignored:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">Invalid NoRecipientAction: <ICLASS="lineannotation">badwhat</I></PRE></BLOCKQUOTE></P><PCLASS="para">If the entire option is omitted, the default becomes <CODECLASS="literal">none</CODE>.The default for the <EMCLASS="emphasis">m4</EM> technique is to omit this option.</P><PCLASS="para">The <CODECLASS="replaceable"><I>what</I></CODE> is case-insensitive, meaning that <CODECLASS="literal">none</CODE>and <CODECLASS="literal">nOnE</CODE> are both identical.</P><TABLECLASS="table"><CAPTIONCLASS="table"><ACLASS="title"NAME="SML2-CH-34-TAB-15">Table 34.16: NoRecipientAction Option Keywords</A></CAPTION><THEADCLASS="thead"><TRCLASS="row"VALIGN="TOP"><THCLASS="entry"ALIGN="LEFT"ROWSPAN="1"COLSPAN="1">What</TH><THCLASS="entry"ALIGN="LEFT"ROWSPAN="1"COLSPAN="1"></TH><THCLASS="entry"ALIGN="LEFT"ROWSPAN="1"COLSPAN="1">Meaning</TH></TR></THEAD><TBODYCLASS="tbody"><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">add-apparently-to</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch34_08.htm#SML2-CH-34-SECT-8-43-1"TITLE="NoRecipientAction=add-apparently-to">Section 34.8.43.1, "NoRecipientAction=add-apparently-to"</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><PCLASS="para">Add an <CODECLASS="literal">Apparently-To:</CODE> header</P></TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">add-bcc</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch34_08.htm#SML2-CH-34-SECT-8-43-2"TITLE="NoRecipientAction=add-bcc">Section 34.8.43.2, "NoRecipientAction=add-bcc"</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><PCLASS="para">Add an empty <CODECLASS="literal">Bcc:</CODE> header</P></TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">add-to</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch34_08.htm#SML2-CH-34-SECT-8-43-3"TITLE="NoRecipientAction=add-to">Section 34.8.43.3, "NoRecipientAction=add-to"</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><PCLASS="para">Add a <CODECLASS="literal">To:</CODE> header</P></TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">add-to-undisclosed</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch34_08.htm#SML2-CH-34-SECT-8-43-4"TITLE="NoRecipientAction=add-to-undisclosed">Section 34.8.43.4, "NoRecipientAction=add-to-undisclosed"</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><PCLASS="para">Add <CODECLASS="literal">To: undisclosed-recipients:;</CODE></P></TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">none</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch34_08.htm#SML2-CH-34-SECT-8-43-5"TITLE="NoRecipientAction=none">Section 34.8.43.5, "NoRecipientAction=none"</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><PCLASS="para">Pass the message unchanged</P></TD></TR></TBODY></TABLE><PCLASS="para">The <CODECLASS="literal">NoRecipientAction</CODE> option is safe. If it is specified from the command line,<EMCLASS="emphasis">sendmail</EM> will not relinquish its <EMCLASS="emphasis">root</EM> privilege.&#13;</P><DIVCLASS="refsect2"><H4CLASS="refsect2"><ACLASS="title"NAME="SML2-CH-34-SECT-8-43-1">34.8.43.1 NoRecipientAction=add-apparently-to</A></H4><PCLASS="para">Add an <CODECLASS="literal">Apparently-To:</CODE> header. That is, act like pre-V8.7sendmail. But note that this choice has been deprecated and should notbe used.&#13;</P></DIV><DIVCLASS="refsect2"><H4CLASS="refsect2"><ACLASS="title"NAME="SML2-CH-34-SECT-8-43-2">34.8.43.2 NoRecipientAction=add-bcc</A></H4><PCLASS="para">Add an empty <CODECLASS="literal">Bcc:</CODE> header. This makes the header portionof the mail message legal under RFC822 but impliesthat all recipients originally appeared in <CODECLASS="literal">Bcc:</CODE> header lines.But be aware that old versions of <EMCLASS="emphasis">sendmail</EM> will strip all<CODECLASS="literal">Bcc:</CODE> headers, so the next site may add an <CODECLASS="literal">Apparently-To:</CODE>header and wrongly expose the address.&#13;</P></DIV><DIVCLASS="refsect2"><H4CLASS="refsect2"><ACLASS="title"NAME="SML2-CH-34-SECT-8-43-3">34.8.43.3 NoRecipientAction=add-to</A></H4><PCLASS="para">Add a <CODECLASS="literal">To:</CODE> header and fill it out with all the recipientsfrom the envelope. This may be misleading because it can givea false picture of the intended recipients. It can also cause<CODECLASS="literal">Bcc:</CODE> header addresses to be mistakenly revealed.This choice may be appropriate in the command line when <EMCLASS="emphasis">sendmail</EM>is run from an MUA that routinely omits recipient headers.&#13;</P></DIV><DIVCLASS="refsect2"><H4CLASS="refsect2"><ACLASS="title"NAME="SML2-CH-34-SECT-8-43-4">34.8.43.4 NoRecipientAction=add-to-undisclosed</A></H4><PCLASS="para">Add a <CODECLASS="literal">To:</CODE> header, but list in it only the address of anempty, but descriptive, mailing list:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">To: undisclosed-recipients:;</PRE></BLOCKQUOTE></P><PCLASS="para">This is the recommended setting for use in configuration files.&#13;</P></DIV><DIVCLASS="refsect2"><H4CLASS="refsect2"><ACLASS="title"NAME="SML2-CH-34-SECT-8-43-5">34.8.43.5 NoRecipientAction=none</A></H4><PCLASS="para">Pass the message unchanged. Currently, this is technically illegal because RFC822requires at least one recipient header in every mail message. This choicemay be appropriate for naive sites that kick all mail to a smarthost for processing. Note that the IETF is consideringmaking this legal.</P></DIV></DIV></BLOCKQUOTE></DIV><DIVCLASS="refentry"><DIVCLASS="refnamediv"><H3CLASS="refname"><ACLASS="refname"NAME="SML2-CH-34-SECT-8-44">34.8.44 OldStyleHeaders (o)</A></H3><PCLASS="refpurpose">Allow spaces in recipient lists</P>(All versions)</DIV><BLOCKQUOTE><DIVCLASS="refsect1"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-45062"></A><ACLASS="indexterm"NAME="AUTOID-45064"></A><ACLASS="indexterm"NAME="AUTOID-45067"></A><ACLASS="indexterm"NAME="AUTOID-45070"></A>In pre-RFC821 days, lists of recipients were commonly space-delimited; that is,</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">hans christian andersen</PRE></BLOCKQUOTE></P><PCLASS="para">was considered a list of three mail recipients, rather than a single,three-part name. Currently, individual recipient names must bedelimited with commas, and internal spaces must be quoted. That is,</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">hans,christian,andersen<ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> three recipients</I>&quot;hans christian andersen&quot;<ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> a single three-part name</I>hans christian andersen<ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> illegal</I></PRE></BLOCKQUOTE></P><PCLASS="para">Since some users and some old programs still delimit recipientlists with spaces, the <CODECLASS="literal">OldStyleHeaders</CODE> (<CODECLASS="literal">o</CODE>)option can be used to tell <EMCLASS="emphasis">sendmail</EM>to internally convert those spaces to commas.</P><PCLASS="para">The forms of the <CODECLASS="literal">OldStyleHeaders</CODE> (<CODECLASS="literal">o</CODE>) option are as follows:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">Oo<CODECLASS="replaceable"><I>bool                                 </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> configuration file (old form)</I>-oo<CODECLASS="replaceable"><I>bool                                </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> command line (old form)</I>O OldStyleHeaders=<CODECLASS="replaceable"><I>bool                 </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> configuration file (beginning with V8.7)</I>-OOldStyleHeaders=<CODECLASS="replaceable"><I>bool                 </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> command line (beginning with V8.7)</I>define(`confOLD_STYLE_HEADERS',<CODECLASS="replaceable"><I>bool</I></CODE>)   <ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> V8 m4 configuration</I></PRE></BLOCKQUOTE></P><PCLASS="para">The argument <CODECLASS="replaceable"><I>bool</I></CODE> is of type Boolean. If thatargument is missing, the default value is true, and unquoted spacesin an address are converted to commas.The default when configuring with the <EMCLASS="emphasis">m4</EM> technique is true.If the entire<CODECLASS="literal">OldStyleHeaders</CODE> (<CODECLASS="literal">o</CODE>) option is missing,it defaults to false, and unquoted spacesare converted to the character defined by the <CODECLASS="literal">BlankSub</CODE> (<CODECLASS="literal">B</CODE>) option(see <ACLASS="xref"HREF="ch34_08.htm#SML2-CH-34-SECT-8-5"TITLE="">Section 34.8.5</A>).</P><PCLASS="para">The <EMCLASS="emphasis">sendmail</EM> program is somewhat adaptive about commas.When first examining a list of addresses, it looks to see whetherone of the following four characters appears in that list:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">, ; &lt; (</PRE></BLOCKQUOTE></P><PCLASS="para">If it finds any of these characters in an address list, it turns off the<CODECLASS="literal">OldStyleHeaders</CODE> (<CODECLASS="literal">o</CODE>) option for the remainder of the list. You alwayswant to enable this option in your configuration file. The onlyexception might be the unusual situation in which all addresses are normallycomma-separated but some legal addresses contain spaces.</P><PCLASS="para">Note that comma delimiting allows spaces around recipientnames for clarity. That is, both of the following are equivalent:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">hans,christian,andersenhans, christian, andersen</PRE></BLOCKQUOTE></P><PCLASS="para">The <CODECLASS="literal">OldStyleHeaders</CODE> (<CODECLASS="literal">o</CODE>) option is safe.  Even if it is specified from the command line,<EMCLASS="emphasis">sendmail</EM> retains its <EMCLASS="emphasis">root</EM> privilege.</P></DIV></BLOCKQUOTE></DIV><DIVCLASS="refentry"><DIVCLASS="refnamediv"><H3CLASS="refname"><ACLASS="refname"NAME="SML2-CH-34-SECT-8-45">34.8.45 OperatorChars or $o</A></H3><PCLASS="refpurpose">Set token separation operators</P>(V8.7 and above)</DIV><BLOCKQUOTE><DIVCLASS="refsect1"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-45132"></A><ACLASS="indexterm"NAME="AUTOID-45135"></A><ACLASS="indexterm"NAME="AUTOID-45137"></A><ACLASS="indexterm"NAME="AUTOID-45139"></A>The <CODECLASS="literal">OperatorChars</CODE> option stores as its value a sequenceof characters, any one of which can be used to separate the componentsof an address into tokens (see <ACLASS="xref"HREF="ch08_03.htm"TITLE="Rule Sets">Section 8.3, "Rule Sets"</A>).Prior to V8.7 the <EMCLASS="emphasis">$o</EM> macro fulfilled this role.Beginning with V8.7, the <CODECLASS="literal">OperatorChars</CODE> option has taken over:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">Do.:%@!^=/[]                          <ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> prior to V8.7</I>O OperatorChars=.:%@!^=/[]            <ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> beginning with V8.7</I></PRE></BLOCKQUOTE></P><PCLASS="para">The list of separation operators declared with this option is joinedby <EMCLASS="emphasis">sendmail</EM> to an internal list of hard-coded separation operators:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">()&lt;&gt;,;\&quot;\r\n</PRE></BLOCKQUOTE></P><PCLASS="para">The combined list is used in tokenizing the workspace for rule-setprocessing. The order in which the characters appear in the <CODECLASS="literal">OperatorChars</CODE> option declarationis arbitrary. The space and tab characters need not be included inthat list because they are always used to separate tokens.</P><PCLASS="para">Care should be taken in eliminating any given character from thislist. Before doing so, the entire configuration file should be examined in detailto be sure that no rule requires that character.The use of the individual characters in addresses is beyond the scopeof this book. The book <EMCLASS="emphasis">!%@:: A Directory of Electronic MailAddressing and Networks</EM>, by Donnalyn Frey and Rick Adams (O'Reilly &amp;Associates, 1993), contains the many forms of addressing in great detail.</P><PCLASS="para">The <CODECLASS="literal">OperatorChars</CODE> option is used like this:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">O OperatorChars=<CODECLASS="replaceable"><I>text               </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> beginning with V8.7</I>define(`confOPERATORS',`<CODECLASS="replaceable"><I>text</I></CODE>')     <ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> V8 m4 technique</I></PRE></BLOCKQUOTE></P><PCLASS="para">The <CODECLASS="replaceable"><I>text</I></CODE> is of type <CODECLASS="literal">string</CODE>.If it is missing and if the configuration file version is less than 7, <EMCLASS="emphasis">sendmail</EM> tries touse the value of the <CODECLASS="literal">$o</CODE> macro. If that macro is also undefined,a default of &quot;<CODECLASS="literal">.:@[]</CODE>&quot; is used. If <CODECLASS="replaceable"><I>text</I></CODE> is longerthan 39 characters, it is truncated to 39 characters.In using the V8 <EMCLASS="emphasis">m4</EM> technique, a default of &quot;<CODECLASS="literal">.:%@!^/[]+</CODE>&quot; is used.</P><PCLASS="para">The <CODECLASS="literal">OperatorChars</CODE> option is not safe.If specified from the command line,it may cause <EMCLASS="emphasis">sendmail</EM> to relinquish its <EMCLASS="emphasis">root</EM> privilege.</P></DIV></BLOCKQUOTE></DIV><DIVCLASS="refentry"><DIVCLASS="refnamediv"><H3CLASS="refname"><ACLASS="refname"NAME="SML2-CH-34-SECT-8-46">34.8.46 PostmasterCopy (P)</A></H3><PCLASS="refpurpose">Extra copies of postmaster mail</P>(All versions)</DIV><BLOCKQUOTE><DIVCLASS="refsect1"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-45187"></A><ACLASS="indexterm"NAME="AUTOID-45189"></A>RFC822, entitled<EMCLASS="emphasis">Standard for the Format of ARPA Internet Text Messages</EM>,requires that all sites be set up so that mail addressed tothe special name <EMCLASS="emphasis">Postmaster</EM>[23]always be successfully delivered.This requirementensures that notification of mail problems can always be sentand successfully delivered to the offending site.[24]At most sites the name <EMCLASS="emphasis">Postmaster</EM> is an alias to a realperson's name in the <EMCLASS="emphasis">aliases</EM> file.Mail to <EMCLASS="emphasis">Postmaster</EM> should never be ignored.</P><BLOCKQUOTECLASS="footnote"><PCLASS="para">[23] The name <EMCLASS="emphasis">Postmaster</EM> is case-insensitive. That is, <EMCLASS="emphasis">POSTMASTER</EM>,<EMCLASS="emphasis">Postmaster</EM>, <EMCLASS="emphasis">postmaster</EM>, and even <EMCLASS="emphasis">PoStMaStEr</EM> areall equivalent.</P><PCLASS="para">[24] Note that adoption of RFC1648, entitled<EMCLASS="emphasis">Postmaster Convention for X.400 Operations</EM>,has extended this concept to includehosts addressed as <EMCLASS="emphasis">user@host.domain</EM> thatare really X.400 sites masquerading as Internet sites.</P></BLOCKQUOTE><PCLASS="para">Ordinarily, notification of locally bounced mailand other mail problems is sent back (bounced) to the sender of the message.The local person in the role of <EMCLASS="emphasis">Postmaster</EM> does not geta copy of local failed mail.</P><PCLASS="para">The <CODECLASS="literal">PostmasterCopy</CODE> (<CODECLASS="literal">P</CODE>) option tells <EMCLASS="emphasis">sendmail</EM> to send a copy of all failedmail to another person, often <EMCLASS="emphasis">Postmaster</EM>.Under V8 and SunOS that copy contains only the failed message'sheader. Under other versions of <EMCLASS="emphasis">sendmail</EM> that copy includesboth the header and the body.</P><PCLASS="para">The forms of the <CODECLASS="literal">PostmasterCopy</CODE> (<CODECLASS="literal">P</CODE>) option are as follows:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">OP<CODECLASS="replaceable"><I>user                              </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> configuration file (old form)</I>-oP<CODECLASS="replaceable"><I>user                             </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> command line (old form)</I>O PostmasterCopy=<CODECLASS="replaceable"><I>user               </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> configuration file (beginning with V8.7)</I>-OPostmasterCopy=<CODECLASS="replaceable"><I>user               </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> command line (beginning with V8.7)</I>define(`confCOPY_ERRORS_TO',<CODECLASS="replaceable"><I>user</I></CODE>)   <ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> V8 m4 configuration</I></PRE></BLOCKQUOTE></P><PCLASS="para">&#13;The argument <CODECLASS="replaceable"><I>user</I></CODE> is of type string. If the argument is missing or if the <CODECLASS="literal">PostmasterCopy</CODE> (<CODECLASS="literal">P</CODE>) option is entirelymissing, no extra copy is sent.The default for the <EMCLASS="emphasis">m4</EM> configuration technique to not send an extracopy.</P><PCLASS="para">While debugging a new <EMCLASS="emphasis">sendmail.cf</EM> file, it is wise todefine the <CODECLASS="literal">PostmasterCopy</CODE> (<CODECLASS="literal">P</CODE>) option so that you receive a copyof all failed mail. Once the configuration file is stable, eitherthe <CODECLASS="literal">PostmasterCopy</CODE> (<CODECLASS="literal">P</CODE>) option may be removed or the name may be replaced with an alias to a program. Such a program could filter the copiesof error mail so that only serious problems would be seen.</P><PCLASS="para">Macros used in the <CODECLASS="replaceable"><I>user</I></CODE> argument will be correctly expanded before use.For example,</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">DHmailhost                                <ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> old form</I>OPPostmaster@$H                           <ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> old form</I>D{NOTIFYHOST}mailhost                     <ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> beginning with V8.7</I>O PostmasterCopy=Postmaster@${NOTIFYHOST} <ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> beginning with V8.7</I></PRE></BLOCKQUOTE></P><PCLASS="para">The <CODECLASS="literal">PostmasterCopy</CODE> (<CODECLASS="literal">P</CODE>) option is not safe.  If specified from the command line,it may cause <EMCLASS="emphasis">sendmail</EM> to relinquish its <EMCLASS="emphasis">root</EM> privilege.</P></DIV></BLOCKQUOTE></DIV><DIVCLASS="refentry"><DIVCLASS="refnamediv"><H3CLASS="refname"><ACLASS="refname"NAME="SML2-CH-34-SECT-8-47">34.8.47 PrivacyOptions (p)</A></H3><PCLASS="refpurpose">Increase privacy of the daemon</P>(V8.1 and above)</DIV><BLOCKQUOTE><DIVCLASS="refsect1"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-45262"></A><ACLASS="indexterm"NAME="AUTOID-45264"></A><ACLASS="indexterm"NAME="AUTOID-45267"></A>The <CODECLASS="literal">PrivacyOptions</CODE> (<CODECLASS="literal">p</CODE>) option is used primarilyas a way to force other sites to adhere to SMTPconventions, but can also be used to improve security.</P><PCLASS="para">The forms of the <CODECLASS="literal">PrivacyOptions</CODE> (<CODECLASS="literal">p</CODE>) option are as follows:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">Op<CODECLASS="replaceable"><I>what,...                               </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> configuration file (old mode)</I>-op<CODECLASS="replaceable"><I>what,...                              </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> command line (old mode)</I>O PrivacyOptions=<CODECLASS="replaceable"><I>what,...                </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> configuration file (beginning with V8.7)</I>-OPrivacyOptions=<CODECLASS="replaceable"><I>what,...                </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> command line (beginning with V8.7)</I>define(`confPRIVACY_FLAGS',`<CODECLASS="replaceable"><I>what,...</I></CODE>')   <ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> V8 m4 configuration</I></PRE></BLOCKQUOTE></P><PCLASS="para">Multiple <CODECLASS="replaceable"><I>what</I></CODE> arguments may be listed and must be separatedfrom one another by commas(there may be arbitrary spaces around the commas), for example,</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">Op authwarnings, needmailheloO PrivacyOptions=authwarnings, needmailhelo</PRE></BLOCKQUOTE></P><PCLASS="para">If this option is entirelyomitted or if no <CODECLASS="replaceable"><I>what</I></CODE> arguments are listed, the option defaultsto <CODECLASS="literal">public</CODE>.The default for the <EMCLASS="emphasis">m4</EM> configuration technique is <CODECLASS="literal">authwarnings</CODE>.The possible <CODECLASS="replaceable"><I>what</I></CODE> arguments are listed in<ACLASS="xref"HREF="ch34_08.htm#SML2-CH-34-TAB-16"TITLE="PrivacyOptions Option Keywords">Table 34.17</A>.</P><TABLECLASS="table"><CAPTIONCLASS="table"><ACLASS="title"NAME="SML2-CH-34-TAB-16">Table 34.17: PrivacyOptions Option Keywords</A></CAPTION><THEADCLASS="thead"><TRCLASS="row"VALIGN="TOP"><THCLASS="entry"ALIGN="LEFT"ROWSPAN="1"COLSPAN="1">Keyword</TH><THCLASS="entry"ALIGN="LEFT"ROWSPAN="1"COLSPAN="1"></TH><THCLASS="entry"ALIGN="LEFT"ROWSPAN="1"COLSPAN="1">Meaning</TH></TR></THEAD><TBODYCLASS="tbody"><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">authwarnings</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch34_08.htm#SML2-CH-34-SECT-8-47-1"TITLE="&quot;PrivacyOptions=authwarnings">Section 34.8.47.1, "&quot;PrivacyOptions=authwarnings"</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><PCLASS="para">Enable <CODECLASS="literal">X-Authentication-Warning:</CODE> headers</P></TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">goaway</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch34_08.htm#SML2-CH-34-SECT-8-47-2"TITLE="&quot;PrivacyOptions=goaway">Section 34.8.47.2, "&quot;PrivacyOptions=goaway"</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><PCLASS="para">Much checking for privacy and security</P></TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">needexpnhelo</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch34_08.htm#SML2-CH-34-SECT-8-47-3"TITLE="PrivacyOptions=needexpnhelo">Section 34.8.47.3, "PrivacyOptions=needexpnhelo"</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><PCLASS="para">Require HELO before EXPN</P></TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">needmailhelo</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch34_08.htm#SML2-CH-34-SECT-8-47-4"TITLE="PrivacyOptions=needmailhelo">Section 34.8.47.4, "PrivacyOptions=needmailhelo"</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><PCLASS="para">Require HELO before MAIL</P></TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">needvrfyhelo</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch34_08.htm#SML2-CH-34-SECT-8-47-5"TITLE="PrivacyOptions=needvrfyhelo">Section 34.8.47.5, "PrivacyOptions=needvrfyhelo"</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><PCLASS="para">Require HELO before VRFY</P></TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">noexpn</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch34_08.htm#SML2-CH-34-SECT-8-47-6"TITLE="&quot;PrivacyOptions=noexpn">Section 34.8.47.6, "&quot;PrivacyOptions=noexpn"</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><PCLASS="para">Disallow all SMTP EXPN commands</P></TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">noreceipts</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch34_08.htm#SML2-CH-34-SECT-8-47-7"TITLE="&quot;PrivacyOptions=noreceipts">Section 34.8.47.7, "&quot;PrivacyOptions=noreceipts"</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><PCLASS="para">Prevent return receipts</P></TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">novrfy</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch34_08.htm#SML2-CH-34-SECT-8-47-8"TITLE="&quot;PrivacyOptions=novrfy">Section 34.8.47.8, "&quot;PrivacyOptions=novrfy"</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><PCLASS="para">Disallow all SMTP VRFY commands</P></TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">public</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch34_08.htm#SML2-CH-34-SECT-8-47-9"TITLE="PrivacyOptions=public">Section 34.8.47.9, "PrivacyOptions=public"</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><PCLASS="para">No extra checking for privacy or security</P></TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">restrictmailq</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch34_08.htm#SML2-CH-34-SECT-8-47-10"TITLE="&quot;PrivacyOptions=restrictmailq">Section 34.8.47.10, "&quot;PrivacyOptions=restrictmailq"</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><PCLASS="para">Restrict who may run <EMCLASS="emphasis">mailq</EM>(1)</P></TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">restrictqrun</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch34_08.htm#SML2-CH-34-SECT-8-47-11"TITLE="&quot;PrivacyOptions=restrictqrun">Section 34.8.47.11, "&quot;PrivacyOptions=restrictqrun"</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><PCLASS="para">Restrict who processes the queue</P></TD></TR></TBODY></TABLE><PCLASS="para">If <CODECLASS="replaceable"><I>what</I></CODE> is not one of the keywords listed in the table,<EMCLASS="emphasis">sendmail</EM> prints the following message and ignores the unknown word:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">readcf: Op line: <ICLASS="lineannotation">unknown_word</I> unrecognized</PRE></BLOCKQUOTE></P><PCLASS="para">Note that <EMCLASS="emphasis">sendmail</EM> checks for nonroot use of the <CODECLASS="literal">-C</CODE> (see <ACLASS="xref"HREF="ch36_07.htm#SML2-CH-36-SECT-7-15"TITLE="">Section 36.7.15, -C</A>) and<CODECLASS="literal">-oQ</CODE> (see <ACLASS="xref"HREF="ch34_08.htm#SML2-CH-34-SECT-8-48"TITLE="">Section 34.8.48</A>) command line switches anddangerous uses of the <CODECLASS="literal">-f</CODE> (see <ACLASS="xref"HREF="ch36_07.htm#SML2-CH-36-SECT-7-21"TITLE="">Section 36.7.21, -f and -r</A>) command line switchwhen the command line is read but does not issue warningsuntil after the configuration file is read. That way, theconfiguration file determines how <CODECLASS="literal">X-Authentication-Warning:</CODE>headers will be issued.</P><PCLASS="para">The <CODECLASS="literal">PrivacyOptions</CODE> (<CODECLASS="literal">p</CODE>) option is safe.  If specified from the command line,it does not cause <EMCLASS="emphasis">sendmail</EM> to relinquish its <EMCLASS="emphasis">root</EM> privilege.Because it is really a mask, specifications in the configurationfile or on the command line can only make it more restrictive.&#13;</P><DIVCLASS="refsect2"><H4CLASS="refsect2"><ACLASS="title"NAME="SML2-CH-34-SECT-8-47-1">34.8.47.1 &quot;PrivacyOptions=authwarnings</A></H4><PCLASS="para">Setting <CODECLASS="literal">authwarnings</CODE> causes <EMCLASS="emphasis">sendmail</EM> to insert specialheaders into the mail message that advise the recipient ofreasons to suspect that the message may not be authentic.The general form of this special header is shown at the end ofthis paragraph. The possible reasons are listed in <ACLASS="xref"HREF="ch35_01.htm"TITLE="Headers">Chapter 35, <CITECLASS="chapter">Headers</CITE></A>(see <ACLASS="xref"HREF="ch35_10.htm#SML2-CH-35-SECT-10-35"TITLE="">Section 35.10.35, X-Authentication-Warning:</A>). </P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">X-Authentication-Warning: <CODECLASS="replaceable"><I>ourhost</I></CODE>: <CODECLASS="replaceable"><I>reason</I></CODE></PRE></BLOCKQUOTE></P><PCLASS="para"></P></DIV><DIVCLASS="refsect2"><H4CLASS="refsect2"><ACLASS="title"NAME="SML2-CH-34-SECT-8-47-2">34.8.47.2 &quot;PrivacyOptions=goaway</A></H4><PCLASS="para">A shorthand way to set all of <CODECLASS="literal">authwarnings</CODE>, <CODECLASS="literal">noexpn</CODE>,<CODECLASS="literal">novrfy</CODE>, <CODECLASS="literal">needmailhelo</CODE>, <CODECLASS="literal">needexpnhelo</CODE>, and<CODECLASS="literal">needvrfyhelo</CODE>.&#13;</P></DIV><DIVCLASS="refsect2"><H4CLASS="refsect2"><ACLASS="title"NAME="SML2-CH-34-SECT-8-47-3">34.8.47.3 PrivacyOptions=needexpnhelo</A></H4><PCLASS="para">The SMTP EXPN command causes <EMCLASS="emphasis">sendmail</EM> to &quot;expand&quot;a local address and print the result.If the address is an alias, it shows allthe addresses that result from the alias expansion. If the addressis local, it shows the result of aliasing through a user's <EMCLASS="emphasis">~/.forward</EM>file. If <CODECLASS="literal">needexpnhelo</CODE> is specified, <EMCLASS="emphasis">sendmail</EM> requires thatthe requesting site first introduce itself with an SMTP HELO or ELHOcommand. If the requesting site has not done so, <EMCLASS="emphasis">sendmail</EM>responds with the following message rather than providing the requested expansion information:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">503 I demand that you introduce yourself first</PRE></BLOCKQUOTE></P><PCLASS="para"></P></DIV><DIVCLASS="refsect2"><H4CLASS="refsect2"><ACLASS="title"NAME="SML2-CH-34-SECT-8-47-4">34.8.47.4 PrivacyOptions=needmailhelo</A></H4><PCLASS="para">The SMTP protocol specifies that the sending siteshould issue the HELO or ELHO command to identifyitself before specifying the name of the sender withthe MAIL command. By listing <CODECLASS="literal">needmailhelo</CODE> withthe <CODECLASS="literal">PrivacyOptions</CODE> (<CODECLASS="literal">p</CODE>) option, you cause the followingerror to be returned to the sending site in thissituation:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">503 Polite people say HELO first</PRE></BLOCKQUOTE></P><PCLASS="para">If <CODECLASS="literal">needmailhelo</CODE> is not specified but <CODECLASS="literal">authwarnings</CODE> is specified,then the following header is added to the messagedescribing the problem:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">X-Authentication-Warning: <EMCLASS="emphasis">ourself</EM>: Host <EMCLASS="emphasis">they</EM> didn't use HELO protocol</PRE></BLOCKQUOTE></P><PCLASS="para"></P></DIV><DIVCLASS="refsect2"><H4CLASS="refsect2"><ACLASS="title"NAME="SML2-CH-34-SECT-8-47-5">34.8.47.5 PrivacyOptions=needvrfyhelo</A></H4><PCLASS="para">The SMTP VRFY command causes <EMCLASS="emphasis">sendmail</EM> to verify that anaddress is that of a local user or local alias. Unlike EXPNabove, VRFY does not cause mailing list contents,the result of aliasing, or the contents of <EMCLASS="emphasis">~/.forward</EM>files to be displayed.If <CODECLASS="literal">needvrfyhelo</CODE> is specified, <EMCLASS="emphasis">sendmail</EM> requires thatthe requesting site first introduce itself with an SMTP HELO or ELHO command. If the requesting site has not done so, <EMCLASS="emphasis">sendmail</EM>responds with the same message as for <CODECLASS="literal">needexpnhelo</CODE>above, rather than providing the requested verification information.&#13;</P></DIV><DIVCLASS="refsect2"><H4CLASS="refsect2"><ACLASS="title"NAME="SML2-CH-34-SECT-8-47-6">34.8.47.6 &quot;PrivacyOptions=noexpn</A></H4><PCLASS="para">Setting <CODECLASS="literal">noexpn</CODE> causes <EMCLASS="emphasis">sendmail</EM> to disallow all SMTPEXPN commands. In place of information, <EMCLASS="emphasis">sendmail</EM> sendsthe following reply to the requesting host:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">502 That's none of your business            <ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> prior to V8.7</I>502 Sorry, we do not allow this operation   <ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> beginning with V8.7</I></PRE></BLOCKQUOTE></P><PCLASS="para">Setting <CODECLASS="literal">noexpn</CODE> also causes <EMCLASS="emphasis">sendmail</EM> to reject all SMTPVERB commands:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">502 Verbose unavailable</PRE></BLOCKQUOTE></P><PCLASS="para">&#13;Other <EMCLASS="emphasis">sendmail</EM> programs may send VERB if the deliveryagent making the connection has the <CODECLASS="literal">F=I</CODE> flag set (see <ACLASS="xref"HREF="ch30_08.htm#SML2-CH-30-SECT-8-25"TITLE="">Section 30.8.25, F=I (uppercase i)</A>).&#13;</P></DIV><DIVCLASS="refsect2"><H4CLASS="refsect2"><ACLASS="title"NAME="SML2-CH-34-SECT-8-47-7">34.8.47.7 &quot;PrivacyOptions=noreceipts</A></H4><PCLASS="para">Setting <CODECLASS="literal">noreceipts</CODE> causes pre-V8.7 <EMCLASS="emphasis">sendmail</EM> to silently skipthe processing of all <CODECLASS="literal">Return-Receipt-To:</CODE> headers (see<ACLASS="xref"HREF="ch35_10.htm#SML2-CH-35-SECT-10-29"TITLE="">Section 35.10.29, Return-Receipt-To:</A>).Beginning with V8.7 <EMCLASS="emphasis">sendmail</EM>, notification of successful deliveryis governed by the NOTIFY keyword (see RFC1891)to the ESMTP RCPT command:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">RCPT TO: &lt;<CODECLASS="replaceable"><I>address</I></CODE>&gt; NOTIFY=SUCCESS</PRE></BLOCKQUOTE></P><PCLASS="para">Setting <CODECLASS="literal">noreceipts</CODE> causes V8.7 <EMCLASS="emphasis">sendmail</EM> to silently skip all such requests for notification of successful delivery.&#13;</P></DIV><DIVCLASS="refsect2"><H4CLASS="refsect2"><ACLASS="title"NAME="SML2-CH-34-SECT-8-47-8">34.8.47.8 &quot;PrivacyOptions=novrfy</A></H4><PCLASS="para">Setting <CODECLASS="literal">novrfy</CODE> causes <EMCLASS="emphasis">sendmail</EM> to disallow all SMTP VRFYcommands. In place of verification, <EMCLASS="emphasis">sendmail</EM> sends the followingreply to the requesting host:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">252 Who's to say?                                                  <ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> V8.6</I>252 Cannot VRFY user; try RCPT to attempt delivery (or try finger) <ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> V8.7</I></PRE></BLOCKQUOTE></P><PCLASS="para"></P></DIV><DIVCLASS="refsect2"><H4CLASS="refsect2"><ACLASS="title"NAME="SML2-CH-34-SECT-8-47-9">34.8.47.9 PrivacyOptions=public</A></H4><PCLASS="para">The default for the non-m4 version of the<CODECLASS="literal">PrivacyOptions</CODE> (<CODECLASS="literal">p</CODE>) option is <CODECLASS="literal">public</CODE>.This means that there is no extra checking for validSMTP syntax and no checking for the security matters.&#13;</P></DIV><DIVCLASS="refsect2"><H4CLASS="refsect2"><ACLASS="title"NAME="SML2-CH-34-SECT-8-47-10">34.8.47.10 &quot;PrivacyOptions=restrictmailq</A></H4><PCLASS="para">Ordinarily, anyone may examine the mail queue's contents by usingthe <EMCLASS="emphasis">mailq</EM>(1) command (see <ACLASS="xref"HREF="ch23_04.htm"TITLE="Printing the Queue">Section 23.4, "Printing the Queue"</A>). To restrict who may examine thequeue's contents, specify <CODECLASS="literal">restrictmailq</CODE>. If restricted,<EMCLASS="emphasis">sendmail</EM> allows only users who are in the same groupas the group ownership of the queue directory to examine thecontents. This allows the queue directory to be fully protectedwith mode 0700 yet for selected users to still be ableto see its contents.&#13;</P></DIV><DIVCLASS="refsect2"><H4CLASS="refsect2"><ACLASS="title"NAME="SML2-CH-34-SECT-8-47-11">34.8.47.11 &quot;PrivacyOptions=restrictqrun</A></H4><PCLASS="para">Ordinarily, anyone may process the queue with the <CODECLASS="literal">-q</CODE>switch (see <ACLASS="xref"HREF="ch23_06.htm#SML2-CH-23-SECT-6-1"TITLE="Periodically with -q">Section 23.6.1</A>).To limit queue processing to <EMCLASS="emphasis">root</EM> and the owner of the queue directory,specify <CODECLASS="literal">restrictqrun</CODE>.If queue processing is restricted, any nonprivileged user who attemptsto process the queue will get this message:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">You do not have permission to process the queue</PRE></BLOCKQUOTE></P></DIV></DIV></BLOCKQUOTE></DIV><DIVCLASS="refentry"><DIVCLASS="refnamediv"><H3CLASS="refname"><ACLASS="refname"NAME="SML2-CH-34-SECT-8-48">34.8.48 QueueDirectory (Q)</A></H3><PCLASS="refpurpose">Location of queue directory</P>(All versions)</DIV><BLOCKQUOTE><DIVCLASS="refsect1"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-45527"></A><ACLASS="indexterm"NAME="AUTOID-45529"></A>Mail messages that have not yet been deliveredare stored in the <EMCLASS="emphasis">sendmail</EM> program's queue directory.The location of that directory is defined by the <CODECLASS="literal">QueueDirectory</CODE> (<CODECLASS="literal">Q</CODE>) option.That location may be a relative pathname (for testing) or an absolutepathname. If the specified location does not exist, <EMCLASS="emphasis">sendmail</EM>prints something like the following:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">cannot chdir(/var/spool/mqueue): No such file or directory</PRE></BLOCKQUOTE></P><PCLASS="para">If the location exists but is not a directory, sendmailprints something like the following:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">cannot chdir(/var/spool/mqueue): Not a directory</PRE></BLOCKQUOTE></P><PCLASS="para">In both cases, <EMCLASS="emphasis">sendmail</EM> also logs an error message via<EMCLASS="emphasis">syslog</EM>(8) if the logging level of the <CODECLASS="literal">LogLevel</CODE> (<CODECLASS="literal">L</CODE>) option (see <ACLASS="xref"HREF="ch34_08.htm#SML2-CH-34-SECT-8-33"TITLE="">Section 34.8.33</A>) permits.In both cases, <EMCLASS="emphasis">sendmail</EM> aborts immediately.</P><PCLASS="para">The forms of the <CODECLASS="literal">QueueDirectory</CODE> (<CODECLASS="literal">Q</CODE>) option are as follows:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">OQ<CODECLASS="replaceable"><I>path                       </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> configuration file (old form)</I>-oQ<CODECLASS="replaceable"><I>path                      </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> command line (old form)</I>O QueueDirectory=<CODECLASS="replaceable"><I>path        </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> configuration file (beginning with V8.7)</I>-OQueueDirectory=<CODECLASS="replaceable"><I>path        </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> command line (beginning with V8.7)</I>define(`QUEUE_DIR',`<CODECLASS="replaceable"><I>path</I></CODE>')   <ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> V8 m4 configuration</I></PRE></BLOCKQUOTE></P><PCLASS="para">The <CODECLASS="replaceable"><I>path</I></CODE> argument is of type string. If it is missing, thevalue for <CODECLASS="replaceable"><I>path</I></CODE> defaults to &quot;mqueue&quot;. Relative names for the queue are always relative to the directoryin which <EMCLASS="emphasis">sendmail</EM> was invoked. If the entire <CODECLASS="literal">QueueDirectory</CODE> (<CODECLASS="literal">Q</CODE>)option is missing, the value for <CODECLASS="replaceable"><I>path</I></CODE> defaults to the C languagevalue of NULL, and <EMCLASS="emphasis">sendmail</EM> complains with</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">cannot chdir((null)): Bad file number</PRE></BLOCKQUOTE></P><PCLASS="para">The default in configuring with the <EMCLASS="emphasis">m4</EM> technique varies dependingon your operating system.</P><PCLASS="para">The <CODECLASS="literal">QueueDirectory</CODE> (<CODECLASS="literal">Q</CODE>) option is not safe.  If specified from the command line,it may cause <EMCLASS="emphasis">sendmail</EM> to relinquish its <EMCLASS="emphasis">root</EM> privilege.</P></DIV></BLOCKQUOTE></DIV><DIVCLASS="refentry"><DIVCLASS="refnamediv"><H3CLASS="refname"><ACLASS="refname"NAME="SML2-CH-34-SECT-8-49">34.8.49 QueueFactor (q)</A></H3><PCLASS="refpurpose">Factor for high-load queuing</P>(All versions)</DIV><BLOCKQUOTE><DIVCLASS="refsect1"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-45587"></A><ACLASS="indexterm"NAME="AUTOID-45590"></A>When the load average on a machine (the average number of processes in the run queue over the last minute)becomes too high, <EMCLASS="emphasis">sendmail</EM> can compensateby queuing all mail, rather than delivering it.The <CODECLASS="literal">QueueFactor</CODE> (<CODECLASS="literal">q</CODE>) optionis used in combination with the <CODECLASS="literal">QueueLA</CODE> (<CODECLASS="literal">x</CODE>) option (see <ACLASS="xref"HREF="ch34_08.htm#SML2-CH-34-SECT-8-50"TITLE="">Section 34.8.50</A>)to calculate the point at which <EMCLASS="emphasis">sendmail</EM> stops delivering.If the current load average is greater than or equal to the valuegiven to the <CODECLASS="literal">QueueLA</CODE> (<CODECLASS="literal">x</CODE>) option,then the following formula is evaluated:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">msgpri &gt; q / (la - x + 1)</PRE></BLOCKQUOTE></P><PCLASS="para">Here, <CODECLASS="literal">q</CODE> is the value set by this option, <CODECLASS="literal">la</CODE> isthe current load average, and <CODECLASS="literal">x</CODE> is the cutoff loadspecified by the <CODECLASS="literal">QueueLA</CODE> (<CODECLASS="literal">x</CODE>) option. If the value yielded by thiscalculation is less than or equal to the priority of the currentmail message (<CODECLASS="literal">msgpri</CODE> above), the messageis queued rather than delivered. Priorities are initialized withthe <CODECLASS="literal">P</CODE> <EMCLASS="emphasis">sendmail.cf</EM> command (see <ACLASS="xref"HREF="ch35_08.htm"TITLE="Precedence">Section 35.8, "Precedence"</A>)and tuned with the<CODECLASS="literal">RecipientFactor</CODE> (<CODECLASS="literal">y</CODE>) and <CODECLASS="literal">ClassFactor</CODE> (<CODECLASS="literal">z</CODE>) options (see <ACLASS="xref"HREF="ch34_08.htm#SML2-CH-34-SECT-8-53"TITLE="">Section 34.8.53</A>).As the load average (<CODECLASS="literal">la</CODE>) grows, the value to the rightof the <CODECLASS="literal">&gt;</CODE> becomes smaller, increasing the chance that <CODECLASS="literal">msgpri</CODE> will exceed that threshold (so that themail will be queued).Beginning with V8.7 <EMCLASS="emphasis">sendmail</EM>, this relation can be tuned with thehelp of the <CODECLASS="literal">-d3.30</CODE> debugging switch (see <ACLASS="xref"HREF="ch37_05.htm#SML2-CH-37-SECT-5-18"TITLE="">Section 37.5.18, -d3.30</A>).</P><PCLASS="para">The forms of <CODECLASS="literal">QueueFactor</CODE> (<CODECLASS="literal">q</CODE>) option are as follows:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">Oq<CODECLASS="replaceable"><I>fact                            </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> configuration file (old form)</I>-oq<CODECLASS="replaceable"><I>fact                           </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> command line (old form)</I>O QueueFactor=<CODECLASS="replaceable"><I>fact                </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> configuration file (beginning with V8.7)</I>-OQueueFactor=<CODECLASS="replaceable"><I>fact                </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> command line (beginning with V8.7)</I>define(`confQUEUE_FACTOR',<CODECLASS="replaceable"><I>fact</I></CODE>)   <ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> V8 m4 configuration</I></PRE></BLOCKQUOTE></P><PCLASS="para">The argument <CODECLASS="replaceable"><I>fact</I></CODE> is of type numeric.It may be positive, negative, or zero. If <CODECLASS="replaceable"><I>fact</I></CODE>is missing, the value defaults to zero. If the entire <CODECLASS="literal">QueueFactor</CODE> (<CODECLASS="literal">q</CODE>) option is missing,the default value given to <CODECLASS="replaceable"><I>fact</I></CODE> is 600000 (six hundred thousand). The default for the <EMCLASS="emphasis">m4</EM> technique is to omit this option.</P><PCLASS="para">Note that the load average is effective only if your <EMCLASS="emphasis">sendmail</EM>binary was compiled with load-average support(see <ACLASS="xref"HREF="ch18_08.htm#SML2-CH-18-SECT-8-14"TITLE="">Section 18.8.14, LA-TYPE</A>). Use the <CODECLASS="literal">-d3.1</CODE>debugging switch (<ACLASS="xref"HREF="ch37_05.htm#SML2-CH-37-SECT-5-14"TITLE="">Section 37.5.14, -d3.1</A>) to discover whether your binary includes that support.</P><PCLASS="para">The <CODECLASS="literal">QueueFactor</CODE> (<CODECLASS="literal">q</CODE>) option is not safe.  If specified from the command line,it may cause <EMCLASS="emphasis">sendmail</EM> to relinquish its <EMCLASS="emphasis">root</EM> privilege.</P></DIV></BLOCKQUOTE></DIV><DIVCLASS="refentry"><DIVCLASS="refnamediv"><H3CLASS="refname"><ACLASS="refname"NAME="SML2-CH-34-SECT-8-50">34.8.50 QueueLA (x)</A></H3><PCLASS="refpurpose">On high load, queue only</P>(All versions)</DIV><BLOCKQUOTE><DIVCLASS="refsect1"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-45664"></A>The <CODECLASS="literal">QueueLA</CODE> (<CODECLASS="literal">x</CODE>) option specifies the load above which <EMCLASS="emphasis">sendmail</EM>queues messages rather than delivering them. The <CODECLASS="literal">QueueLA</CODE> (<CODECLASS="literal">x</CODE>) and<CODECLASS="literal">QueueFactor</CODE> (<CODECLASS="literal">q</CODE>) options interact to determine this cutoff; they are bothcovered under the <CODECLASS="literal">QueueFactor</CODE> (<CODECLASS="literal">q</CODE>) option (<ACLASS="xref"HREF="ch34_08.htm#SML2-CH-34-SECT-8-49"TITLE="">Section 34.8.49</A>).</P><PCLASS="para">The forms of the <CODECLASS="literal">QueueLA</CODE> (<CODECLASS="literal">x</CODE>) option are as follows:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">Ox<CODECLASS="replaceable"><I>load                        </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> configuration file (old form)</I>-ox<CODECLASS="replaceable"><I>load                       </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> command line (old form)</I>O QueueLA=<CODECLASS="replaceable"><I>load                </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> configuration file (beginning with V8.7)</I>-OQueueLA=<CODECLASS="replaceable"><I>load                </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> command line (beginning with V8.7)</I>define(`confQUEUE_LA',<CODECLASS="replaceable"><I>load</I></CODE>)   <ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> V8 m4 configuration</I></PRE></BLOCKQUOTE></P><PCLASS="para">The optional argument <CODECLASS="replaceable"><I>load</I></CODE>, of type numeric, defaults tozero if it is missing. If the entire <CODECLASS="literal">QueueLA</CODE> (<CODECLASS="literal">x</CODE>) option is missing,the default value given to <CODECLASS="replaceable"><I>load</I></CODE> is eight.The default for the <EMCLASS="emphasis">m4</EM> technique is to omit this option.On newer, faster machines a higher setting may be more appropriate.</P><PCLASS="para">This <CODECLASS="literal">QueueLA</CODE> (<CODECLASS="literal">x</CODE>) option is effective only if your <EMCLASS="emphasis">sendmail</EM>binary was compiled with load-average support(see <ACLASS="xref"HREF="ch18_08.htm#SML2-CH-18-SECT-8-14"TITLE="">Section 18.8.14</A>). You can use the <CODECLASS="literal">-d3.1</CODE>debugging switch (<ACLASS="xref"HREF="ch37_05.htm#SML2-CH-37-SECT-5-14"TITLE="">Section 37.5.14</A>) to discover whether your binaryincludes the necessary support.</P><PCLASS="para">The <CODECLASS="literal">QueueLA</CODE> (<CODECLASS="literal">x</CODE>) option is not safe.  If specified from the command line,it may cause <EMCLASS="emphasis">sendmail</EM> to relinquish its <EMCLASS="emphasis">root</EM> privilege.</P></DIV></BLOCKQUOTE></DIV><DIVCLASS="refentry"><DIVCLASS="refnamediv"><H3CLASS="refname"><ACLASS="refname"NAME="SML2-CH-34-SECT-8-51">34.8.51 QueueSortOrder</A></H3><PCLASS="refpurpose">How to pre-sort the queue</P>(V8.7 and above)</DIV><BLOCKQUOTE><DIVCLASS="refsect1"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-45717"></A><ACLASS="indexterm"NAME="AUTOID-45719"></A><ACLASS="indexterm"NAME="AUTOID-45722"></A>Prior to V8.7 <EMCLASS="emphasis">sendmail</EM>, mail messages in the queue weresorted by priority when the queue was processed.Under V8.7 an enhanced sort can be implemented with the<CODECLASS="literal">QueueSortOrder</CODE> option:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">O QueueSortOrder=<CODECLASS="replaceable"><I>how                  </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> configuration file (beginning with V8.7)</I>-OQueueSortOrder=<CODECLASS="replaceable"><I>how                  </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> command line (beginning with V8.7)</I>define(`confQUEUE_SORT_ORDER',<CODECLASS="replaceable"><I>how</I></CODE>)    <ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> V8 m4 configuration</I></PRE></BLOCKQUOTE></P><PCLASS="para">The argument <CODECLASS="replaceable"><I>how</I></CODE> is of type character.[25]It can be a <CODECLASS="literal">P</CODE> or <CODECLASS="literal">p</CODE> (for priority), which causes <EMCLASS="emphasis">sendmail</EM>to emulate its old (sort by priority) behavior. It can be an <CODECLASS="literal">H</CODE> or <CODECLASS="literal">h</CODE> (for host), which causes <EMCLASS="emphasis">sendmail</EM>to perform a new enhanced sort. Beginning with V8.8 <EMCLASS="emphasis">sendmail</EM>, it can be <CODECLASS="literal">T</CODE> or <CODECLASS="literal">t</CODE>(for time), which sorts by submission time.If any other character is specified orif <CODECLASS="replaceable"><I>how</I></CODE> is omitted, the following message is printed and theoption is skipped:</P><BLOCKQUOTECLASS="footnote"><PCLASS="para">[25] Of course, we recommend using full words for clarity.</P></BLOCKQUOTE><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">Invalid queue sort order &quot;<EMCLASS="emphasis">badchar</EM>&quot;</PRE></BLOCKQUOTE></P><PCLASS="para">If this option is entirely omitted, the default is to sort by <CODECLASS="literal">priority</CODE>.The default in configuring with the V8 <EMCLASS="emphasis">m4</EM> technique is also <CODECLASS="literal">priority</CODE>.</P><PCLASS="para">The <CODECLASS="literal">QueueSortOrder</CODE> option is safe. If specified from the command line,<EMCLASS="emphasis">sendmail</EM> will not relinquish its <EMCLASS="emphasis">root</EM> privilege.&#13;</P></DIV><DIVCLASS="refsect1"><H4CLASS="refsect1"><ACLASS="title"NAME="SML2-CH-34-SECT-8-51-1">34.8.51.1 </A>QueueSortOrder=host</H4><PCLASS="para">If <CODECLASS="replaceable"><I>what</I></CODE> is <CODECLASS="literal">host</CODE>, the messages in the queue are firstsorted by recipient host, lock status, and priority. If any message fora host is locked (currentlybeing delivered) all the messages for that host are also marked as locked.Then the queue is sorted again, this time bylock status (unlocked first), recipient host, and priority.Delivery attempts after this sort tend to group SMTP connectionsto the same host together sequentially.</P><PCLASS="para">Be careful in sorting by host. If you have a large backlog oflow-priority (batch) mail on a low-speed link to some host(for example <EMCLASS="emphasis">news</EM>),you might end up delaying higher-priority mail intended for other hosts.The host sort is recommended for high-speed linksbut is less desirable on low-speed links.&#13;</P></DIV><DIVCLASS="refsect1"><H4CLASS="refsect1"><ACLASS="title"NAME="SML2-CH-34-SECT-8-51-2">34.8.51.2 </A>QueueSortOrder=priority</H4><PCLASS="para">The method to order a queue run that has been used by <EMCLASS="emphasis">sendmail</EM>for many years is a simple sort of the message priorities.A message's priority is found in the <CODECLASS="literal">qf</CODE> file's <CODECLASS="literal">P</CODE>line (see <ACLASS="xref"HREF="ch23_09.htm#SML2-CH-23-SECT-9-11"TITLE="">Section 23.9.11, P line</A>). The sort is one of cost. That is,low (less positive) priorities are sorted ahead of high (more positive)values.&#13;</P></DIV><DIVCLASS="refsect1"><H4CLASS="refsect1"><ACLASS="title"NAME="SML2-CH-34-SECT-8-51-3">34.8.51.3 </A>QueueSortOrder=time (V8.8 and above)</H4><PCLASS="para">Beginning with V8.8, <EMCLASS="emphasis">sendmail</EM> recognizes the <CODECLASS="literal">time</CODE>keyword, which causes it to sort based on submission time.This setting is not intended for use in the configuration file.Instead, it should be used only from the command line andin combination with the <CODECLASS="literal">-qR</CODE> command-line switch(see <ACLASS="xref"HREF="ch23_06.htm#SML2-CH-23-SECT-6-2-3"TITLE="Process by identifier/recipient/sender: -q[ISR]">Section 23.6.2.3, "Process by identifier/recipient/sender: -q[ISR]"</A>).</P><PCLASS="para">If you wrongly set <CODECLASS="literal">time</CODE> in the configuration file, large jobsand old jobs will be sorted in with small and new jobs.This can delay important mail. Also note that thereis no guarantee that mail will be delivered in submissionorder unless the <CODECLASS="literal">DeliveryMode</CODE> option(see <ACLASS="xref"HREF="ch34_08.htm#SML2-CH-34-SECT-8-16"TITLE="">Section 34.8.16</A>) is set to <CODECLASS="literal">queue</CODE> or<CODECLASS="literal">defer</CODE>.</P></DIV></BLOCKQUOTE></DIV><DIVCLASS="refentry"><DIVCLASS="refnamediv"><H3CLASS="refname"><ACLASS="refname"NAME="SML2-CH-34-SECT-8-52">34.8.52 QueueTimeout (T)</A></H3><PCLASS="refpurpose">Limit life of a message in the queue</P>(deprecated</DIV><BLOCKQUOTE><DIVCLASS="refsect1"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-45794"></A><ACLASS="indexterm"NAME="AUTOID-45796"></A><ACLASS="indexterm"NAME="AUTOID-45799"></A>When mail cannot be delivered promptly, itis left in the queue. At intervals specified by<EMCLASS="emphasis">sendmail</EM>'s <CODECLASS="literal">-q</CODE> command-line switch, redeliveryof that queued mail is attempted. The maximum timea mail message can remain in the queue before being bouncedas undeliverable is defined by the <CODECLASS="literal">T</CODE> option.(Note that the <CODECLASS="literal">QueueTimeout</CODE> (<CODECLASS="literal">T</CODE>)option has been deprecated in favor of the<CODECLASS="literal">Timeout</CODE> option of V8.7 <EMCLASS="emphasis">sendmail</EM>.)</P><PCLASS="para">The forms of the <CODECLASS="literal">QueueTimeout</CODE> (<CODECLASS="literal">T</CODE>) option are as follows:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">OT<CODECLASS="replaceable"><I>qtime                               </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> configuration file (old form)</I>-oT<CODECLASS="replaceable"><I>qtime                              </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> command line (old form)</I>O QueueTimeout=<CODECLASS="replaceable"><I>qtime                  </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> configuration file (deprecated)</I>define(`confMESSAGE_TIMEOUT',<CODECLASS="replaceable"><I>qtime</I></CODE>)   <ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> V8 m4 configuration</I></PRE></BLOCKQUOTE></P><PCLASS="para">The argument <CODECLASS="replaceable"><I>qtime</I></CODE> is of type time. If this argumentis missing or if the entire <CODECLASS="literal">QueueTimeout</CODE> (<CODECLASS="literal">T</CODE>) option is missing, the valuegiven to <CODECLASS="replaceable"><I>qtime</I></CODE> is zero, and nomail is ever queued.[26]The <CODECLASS="replaceable"><I>qtime</I></CODE> is generally specified asa number of days, <CODECLASS="literal">5d</CODE> for example. (Incidentally, RFC1123recommends five days as a minimum.)</P><BLOCKQUOTECLASS="footnote"><PCLASS="para">[26] That is, each message is instantly bounced if it cannot be delivered on the first try.</P></BLOCKQUOTE><PCLASS="para">All queued mail is timed out on the basis of its creation time compared tothe timeout period specified by the <CODECLASS="literal">QueueTimeout</CODE> (<CODECLASS="literal">T</CODE>) option.Each queued message has its creation time stored in its <CODECLASS="literal">qf</CODE>file's <CODECLASS="literal">T</CODE> line (see <ACLASS="xref"HREF="ch23_09.htm#SML2-CH-23-SECT-9-15"TITLE="">Section 23.9.15, T line</A>).When <EMCLASS="emphasis">sendmail</EM> is run (either as a daemon or by hand)to process the queue, it gets its timeout period from the valueof the <CODECLASS="literal">QueueTimeout</CODE> (<CODECLASS="literal">T</CODE>) option. As the queue is processed, each message'screation time is checked to see whether it has timed out on the basis ofthe <EMCLASS="emphasis">current</EM> value of the <CODECLASS="literal">QueueTimeout</CODE> (<CODECLASS="literal">T</CODE>) option.Since theconfiguration file is read only once (when <EMCLASS="emphasis">sendmail</EM> firststarts), the timeout period cannot be subsequently changed. Thereare only two ways to lengthen the timeout period:first, by modifying the configuration file's <CODECLASS="literal">QueueTimeout</CODE> (<CODECLASS="literal">T</CODE>) option(which prior to V8 could involve creating a freeze file) and killingand restarting <EMCLASS="emphasis">sendmail</EM>; second, by running <EMCLASS="emphasis">sendmail</EM> by hand withthe <CODECLASS="literal">-q</CODE> command-line switch (see <ACLASS="xref"HREF="ch23_06.htm#SML2-CH-23-SECT-6-1"TITLE="Periodically with -q">Section 23.6.1</A>) and setting a new timeoutusing the <CODECLASS="literal">-oT</CODE><CODECLASS="replaceable"><I>timeout</I></CODE> command-line switch.</P><PCLASS="para">Since the creationtime is stored in a queued file's <CODECLASS="literal">qf</CODE> file, messages can theoreticallybe rejuvenated (made to appear young again) by simply modifying that entry.The details of the <CODECLASS="literal">qf</CODE> queue file are presented in <ACLASS="xref"HREF="ch23_09.htm"TITLE="The qf File Internals">Section 23.9, "The qf File Internals"</A>.</P><PCLASS="para">Under V8 <EMCLASS="emphasis">sendmail</EM> the sender can be notified when a message isdelayed.This feature is enabled by the inclusion ofa second argument following the <CODECLASS="replaceable"><I>qtime</I></CODE> argument in the<CODECLASS="literal">QueueTimeout</CODE> (<CODECLASS="literal">T</CODE>) option declaration:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">OT<CODECLASS="replaceable"><I>qtime</I></CODE>/<CODECLASS="replaceable"><I>notify                     </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> configuration file (V8.6)</I>-oT<CODECLASS="replaceable"><I>qtime</I></CODE>/<CODECLASS="replaceable"><I>notify                    </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> command line (V8.6)</I>O QueueTimeout=<CODECLASS="replaceable"><I>qtime</I></CODE>/<CODECLASS="replaceable"><I>notify        </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> configuration file (V8.7; deprecated)</I></PRE></BLOCKQUOTE></P><PCLASS="para">If the second argument is present, it must be separated from thefirst by a <CODECLASS="literal">/</CODE>. The <CODECLASS="literal">notify</CODE> specifies the amount of time<EMCLASS="emphasis">sendmail</EM> should wait, after the message is first queued,before sending notification to the sender that it was delayed.If <CODECLASS="replaceable"><I>notify</I></CODE> is missing or longer than <CODECLASS="replaceable"><I>qtime</I></CODE>,no warning messages are sent.If <CODECLASS="replaceable"><I>notify</I></CODE> is longer than <CODECLASS="replaceable"><I>qtime</I></CODE>,no notification is ever sent.</P><PCLASS="para">Note that this is a crude method compared to the one described underthe <CODECLASS="literal">Timeout</CODE> option in <ACLASS="xref"HREF="ch34_08.htm#SML2-CH-34-SECT-8-70"TITLE="">Section 34.8.70</A>. Beginning with V8.7<EMCLASS="emphasis">sendmail</EM> and using the<CODECLASS="literal">queuereturn</CODE> and <CODECLASS="literal">queuewarn</CODE> keywords of that option, the <CODECLASS="replaceable"><I>qtime</I></CODE> and <CODECLASS="literal">notify</CODE> values above can be tunedon the basis of individual mail message priorities.</P><PCLASS="para">The <CODECLASS="literal">QueueTimeout</CODE> (<CODECLASS="literal">T</CODE>) option is not safe.  If specified from the command line,it may cause <EMCLASS="emphasis">sendmail</EM> to relinquish its <EMCLASS="emphasis">root</EM> privilege.</P></DIV></BLOCKQUOTE></DIV><DIVCLASS="refentry"><DIVCLASS="refnamediv"><H3CLASS="refname"><ACLASS="refname"NAME="SML2-CH-34-SECT-8-53">34.8.53 RecipientFactor (y)</A></H3><PCLASS="refpurpose">Penalize large recipient lists</P>(All versions)</DIV><BLOCKQUOTE><DIVCLASS="refsect1"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-45901"></A><ACLASS="indexterm"NAME="AUTOID-45903"></A>Not all messages need to be treated equally.When sendmail processes the messages in its queue,it sorts them by priority.[27]The priority that is given to a message is calculated once, when it is firstcreated, and adjusted (incremented or decremented) each time itis processed in the queue.Mail with the <EMCLASS="emphasis">lowest</EM> priority number is handled first.The formula for the initial calculationis</P><BLOCKQUOTECLASS="footnote"><PCLASS="para">[27] See the <CODECLASS="literal">QueueSortOrder</CODE> option, <ACLASS="xref"HREF="ch34_08.htm#SML2-CH-34-SECT-8-51"TITLE="">Section 34.8.51</A>,for alternative ways to sort.</P></BLOCKQUOTE><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">priority = nbytes - (class * z) + (recipients * y)</PRE></BLOCKQUOTE></P><PCLASS="para">The items in this calculation are as follows:&#13;</P><DLCLASS="variablelist"><DTCLASS="term"><CODECLASS="literal">priority</CODE></DT><DDCLASS="listitem"><PCLASS="para">Priority of the message when it was first created.&#13;</P></DD><DTCLASS="term"><CODECLASS="literal">nbytes</CODE></DT><DDCLASS="listitem"><PCLASS="para">Number of bytes in the total message, including theheader and body of the message.&#13;</P></DD><DTCLASS="term"><CODECLASS="literal">class</CODE></DT><DDCLASS="listitem"><PCLASS="para">Value given to a message by the <CODECLASS="literal">Precedence:</CODE> linein the header of the message.The string following the <CODECLASS="literal">Precedence:</CODE> is usually either<CODECLASS="literal">first-class</CODE>, <CODECLASS="literal">special-delivery</CODE>, <CODECLASS="literal">junk</CODE>, <CODECLASS="literal">bulk</CODE>,or <CODECLASS="literal">list</CODE>.That stringis converted to a numeric value determined by the <CODECLASS="literal">P</CODE> command (see <ACLASS="xref"HREF="ch35_08.htm"TITLE="Precedence">Section 35.8</A>) in the <EMCLASS="emphasis">sendmail.cf</EM> file.&#13;</P></DD><DTCLASS="term"><CODECLASS="literal">z</CODE></DT><DDCLASS="listitem"><PCLASS="para">Value given the <CODECLASS="literal">ClassFactor</CODE> (<CODECLASS="literal">z</CODE>) option (see <ACLASS="xref"HREF="ch34_08.htm#SML2-CH-34-SECT-8-8"TITLE="">Section 34.8.8</A>)and a weighting factor to adjust therelative importance of the <CODECLASS="literal">class</CODE>.&#13;</P></DD><DTCLASS="term"><CODECLASS="literal">recipients</CODE></DT><DDCLASS="listitem"><PCLASS="para">Number of recipients to whom the message is addressed. Thisnumber is counted <EMCLASS="emphasis">after</EM> all alias expansion.&#13;</P></DD><DTCLASS="term"><CODECLASS="literal">y</CODE></DT><DDCLASS="listitem"><PCLASS="para">Value given this <CODECLASS="literal">RecipientFactor</CODE> (<CODECLASS="literal">y</CODE>) option and weighting factor to adjust the relativeimportance of the number of recipients.</P></DD></DL><PCLASS="para">The forms of the <CODECLASS="literal">RecipientFactor</CODE> (<CODECLASS="literal">y</CODE>) option are as follows:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">Oy<CODECLASS="replaceable"><I>factor                                     </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> configuration file (old form)</I>-oy<CODECLASS="replaceable"><I>factor                                    </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> command line (old form)</I>O RecipientFactor=<CODECLASS="replaceable"><I>factor                     </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> configuration file (beginning with V8.7)</I>-ORecipientFactor=<CODECLASS="replaceable"><I>factor                     </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> command line (beginning with V8.7)</I>define(`confWORK_RECIPIENT_FACTOR',<CODECLASS="replaceable"><I>factor</I></CODE>)   <ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> V8 m4 configuration</I></PRE></BLOCKQUOTE></P><PCLASS="para">The argument <CODECLASS="replaceable"><I>factor</I></CODE> is of type numeric. If thatargument is missing, the default value is zero. If the entire <CODECLASS="literal">RecipientFactor</CODE> (<CODECLASS="literal">y</CODE>)option is missing, the default value is 30000 (thirty thousand).The default for the <EMCLASS="emphasis">m4</EM> technique is to omit this option.</P><PCLASS="para">The <CODECLASS="literal">RecipientFactor</CODE> (<CODECLASS="literal">y</CODE>) option is not safe.  If specified from the command line,it may cause <EMCLASS="emphasis">sendmail</EM> to relinquish its <EMCLASS="emphasis">root</EM> privilege.</P></DIV></BLOCKQUOTE></DIV><DIVCLASS="refentry"><DIVCLASS="refnamediv"><H3CLASS="refname"><ACLASS="refname"NAME="SML2-CH-34-SECT-8-54">34.8.54 RefuseLA (X)</A></H3><PCLASS="refpurpose">Refuse connections on high load</P>(All versions)</DIV><BLOCKQUOTE><DIVCLASS="refsect1"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-45995"></A><ACLASS="indexterm"NAME="AUTOID-45997"></A><ACLASS="indexterm"NAME="AUTOID-46000"></A>When the load average on a machine(the average number of jobs in the run queue over the last minute)becomes too high, <EMCLASS="emphasis">sendmail</EM> can compensateby refusing to accept SMTP connections. Some experts consider this a more seriousproblem than the queuing caused by the <CODECLASS="literal">QueueLA</CODE> (<CODECLASS="literal">x</CODE>) option (see <ACLASS="xref"HREF="ch34_08.htm#SML2-CH-34-SECT-8-50"TITLE="">Section 34.8.50</A>),so prior to the introduction of V8.7 <EMCLASS="emphasis">sendmail</EM>, they generally recommended that the load specified for this <CODECLASS="literal">RefuseLA</CODE> (<CODECLASS="literal">X</CODE>) optionshould be higher.[28]Under V8.7 the two options have been decoupled, andyou can now tune them according to your personal philosophy.</P><BLOCKQUOTECLASS="footnote"><PCLASS="para">[28] Others take the opposite stand.Paul Vixie, for one, believes that the <CODECLASS="literal">RefuseLA</CODE> option should be lowerthan the <CODECLASS="literal">QueueLA</CODE> option so that you stop accepting mail before youstop processing it.</P></BLOCKQUOTE><PCLASS="para">The forms of the <CODECLASS="literal">RefuseLA</CODE> (<CODECLASS="literal">X</CODE>) option are as follows:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">OX<CODECLASS="replaceable"><I>load                         </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> configuration file (old form)</I>-oX<CODECLASS="replaceable"><I>load                        </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> command line (old form)</I>O RefuseLA=<CODECLASS="replaceable"><I>load                </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> configuration file (beginning with V8.7)</I>-ORefuseLA=<CODECLASS="replaceable"><I>load                </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> command line (beginning with V8.7)</I>define(`confREFUSE_LA',<CODECLASS="replaceable"><I>load</I></CODE>)   <ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> V8 m4 configuration</I></PRE></BLOCKQUOTE></P><PCLASS="para">The argument <CODECLASS="replaceable"><I>load</I></CODE> is of type numeric. If <CODECLASS="replaceable"><I>load</I></CODE>is missing, the value becomes zero, causing all SMTP connections to berefused. If the entire <CODECLASS="literal">RefuseLA</CODE> (<CODECLASS="literal">X</CODE>) option is missing,the  value for the load cutoff defaults to 12. The default for the<EMCLASS="emphasis">m4</EM> technique is to omit this option.</P><PCLASS="para">This <CODECLASS="literal">RefuseLA</CODE> (<CODECLASS="literal">X</CODE>) option is effective only if your<EMCLASS="emphasis">sendmail</EM> binary was compiled with load-average support included(see <ACLASS="xref"HREF="ch18_08.htm#SML2-CH-18-SECT-8-14"TITLE="">Section 18.8.14</A>). You can use the <CODECLASS="literal">-d3.1</CODE> debugging switch(see <ACLASS="xref"HREF="ch37_05.htm#SML2-CH-37-SECT-5-14"TITLE="">Section 37.5.14</A>) to discover whether your binary includes thenecessary support.</P><PCLASS="para">The <CODECLASS="literal">RefuseLA</CODE> (<CODECLASS="literal">X</CODE>) option is not safe.  If specifiedfrom the command line, it may cause <EMCLASS="emphasis">sendmail</EM> to relinquish its<EMCLASS="emphasis">root</EM> privilege.</P></DIV></BLOCKQUOTE></DIV><DIVCLASS="refentry"><DIVCLASS="refnamediv"><H3CLASS="refname"><ACLASS="refname"NAME="SML2-CH-34-SECT-8-55">34.8.55 ResolverOptions (I)</A></H3><PCLASS="refpurpose">Tune DNS lookups</P>(All versions)</DIV><BLOCKQUOTE><DIVCLASS="refsect1"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-46055"></A><ACLASS="indexterm"NAME="AUTOID-46057"></A><ACLASS="indexterm"NAME="AUTOID-46060"></A>The <CODECLASS="literal">ResolverOptions</CODE> (<CODECLASS="literal">I</CODE>) allows you to tune the wayDNS lookups are performed:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">OI<CODECLASS="replaceable"><I>bool                              </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> configuration file (old form)</I>-oI<CODECLASS="replaceable"><I>bool                             </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> command line (old form)</I>-oI<CODECLASS="replaceable"><I>&quot;arg ...&quot;                        </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> command line (V8.6)</I>OI<CODECLASS="replaceable"><I>arg ...                           </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> configuration file (V8.6)</I>O ResolverOptions=<CODECLASS="replaceable"><I>&quot;arg ...&quot;         </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> configuration file (V8.7)</I>-OResolverOptions=<CODECLASS="replaceable"><I>&quot;arg ...&quot;         </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> command line (V8.7)</I>define(`confBIND_OPTS',`<CODECLASS="replaceable"><I>arg ...</I></CODE>')   <ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> V8 m4 configuration</I></PRE></BLOCKQUOTE></P><PCLASS="para">The <CODECLASS="replaceable"><I>arg</I></CODE> is one or more arguments that allow you to tunethe behavior of the name server.The <CODECLASS="replaceable"><I>arg</I></CODE> arguments are identical to the flagslisted in <EMCLASS="emphasis">resolver</EM>(3), but you omit the <CODECLASS="literal">RES_</CODE> prefix.For example, RES_DNSRCH is expressed DNSRCH.A flag may be preceded by a plus or a minusto enable or disable the corresponding name server option.If no pluses or minuses appear, the name server option is enabled justas though a plus was present.Consider the following:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">OI+AAONLY -DNSRCHO ResolverOptions=+AAONLY -DNSRCH</PRE></BLOCKQUOTE></P><PCLASS="para">These turn on the AAONLY name server option(Authoritative Answers Only) and turn off the DNSRCH name server option (search the domain path).If the <CODECLASS="literal">ResolverOptions</CODE> (<CODECLASS="literal">I</CODE>) option is entirely omitted,the default is for the DNSRCH, DEFNAMES, and RECURSE name serveroptions to be enabled and all others to be disabled. Thus, for example,DNSRCH is always enabled unless you specifically turn it off.</P><PCLASS="para">Beginning with V8.7 <EMCLASS="emphasis">sendmail</EM>, the special string<CODECLASS="literal">HasWildcardMX</CODE> can be listed along with the other resolver options:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">O ResolverOptions=+AAONLY -DNSRCH HasWildcardMX</PRE></BLOCKQUOTE></P><PCLASS="para">This string causes MX lookups to be done with RES_QUERY set (provided thatthe level of the configuration is 6 or above; see <ACLASS="xref"HREF="ch27_05.htm"TITLE="The V Configuration Command">Section 27.5</A>); otherwise,those lookups are done with RES_SEARCH. It also inhibits MX lookupswhen getting the canonical name of the local host. It should always beused if you have a wildcard MX record that matches your local domain.</P><PCLASS="para">Note that omitting the <CODECLASS="literal">ResolverOptions</CODE> (<CODECLASS="literal">I</CODE>)option <EMCLASS="emphasis">does not</EM> disable DNSlookups. To disable DNS under V8.6 <EMCLASS="emphasis">sendmail</EM>,you must compile a version of <EMCLASS="emphasis">sendmail</EM> withNAMED_BIND support omitted (see <ACLASS="xref"HREF="ch18_08.htm#SML2-CH-18-SECT-8-23"TITLE="">Section 18.8.23</A>).Beginning with V8.7 <EMCLASS="emphasis">sendmail</EM>, you can disable use of DNSvia your service-switch file(see <ACLASS="xref"HREF="ch34_08.htm#SML2-CH-34-SECT-8-61"TITLE="">Section 34.8.61</A>).</P><PCLASS="para">Under V8 <EMCLASS="emphasis">sendmail</EM>, any Boolean argumentfollowing the <CODECLASS="literal">ResolverOptions</CODE> (<CODECLASS="literal">I</CODE>) is silently ignored. Thereforean initial <CODECLASS="literal">True</CODE> may be included for compatibilitywith previous versions of <EMCLASS="emphasis">sendmail</EM>. Note that under V8 <EMCLASS="emphasis">sendmail</EM>, a <CODECLASS="literal">False</CODE> produces an errorand cannot be used to disable this option.</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">OITrue</PRE></BLOCKQUOTE></P><PCLASS="para">Version 1 configuration files (see <ACLASS="xref"HREF="ch27_05.htm"TITLE="The V Configuration Command">Section 27.5</A>)cause <EMCLASS="emphasis">sendmail</EM> to disable DNSRCH and DEFNAMESwhen doing delivery lookups but leave them on at all other times.Version 2 and above configuration files cause <EMCLASS="emphasis">sendmail</EM>to use the resolver options defined by the <CODECLASS="literal">ResolverOptions</CODE> (<CODECLASS="literal">I</CODE>) option, except that it always enables DNSRCH whendoing lookups with the <CODECLASS="literal">$[</CODE> and <CODECLASS="literal">$]</CODE> operators.Starting with Version 8, <EMCLASS="emphasis">sendmail</EM> defers the decision of whether or notto use DNS lookups to the <CODECLASS="literal">ServiceSwitchFile</CODE> option (see<ACLASS="xref"HREF="ch34_08.htm#SML2-CH-34-SECT-8-61"TITLE="">Section 34.8.61</A>). DNS is now only consideredcanonical if the <CODECLASS="literal">dns</CODE> service is listed for <CODECLASS="literal">hosts</CODE> inthe <CODECLASS="literal">ServiceSwitchFile</CODE>.</P><PCLASS="para">Finally, note that an attempt to use this option with a version of<EMCLASS="emphasis">sendmail</EM> that does not support DNS lookups (see <ACLASS="xref"HREF="ch18_08.htm#SML2-CH-18-SECT-8-23"TITLE="">Section 18.8.23</A>)will result in this error message:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">name server (I option) specified but BIND not compiled in</PRE></BLOCKQUOTE></P><PCLASS="para">The <CODECLASS="literal">ResolverOptions</CODE> (<CODECLASS="literal">I</CODE>) option is not safe.  If specified from the command line,it may cause <EMCLASS="emphasis">sendmail</EM> to relinquish its <EMCLASS="emphasis">root</EM> privilege.</P></DIV></BLOCKQUOTE></DIV><DIVCLASS="refentry"><DIVCLASS="refnamediv"><H3CLASS="refname"><ACLASS="refname"NAME="SML2-CH-34-SECT-8-56">34.8.56 RetryFactor (Z)</A></H3><PCLASS="refpurpose">Increment per job priority</P>(All versions)</DIV><BLOCKQUOTE><DIVCLASS="refsect1"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-46149"></A><ACLASS="indexterm"NAME="AUTOID-46151"></A>When sendmail processes the messages in its queue,it sorts them by priority and handles those with the <EMCLASS="emphasis">lowest</EM>(least positive) priority first.</P><PCLASS="para">The priority of a message is calculated once, using the<CODECLASS="literal">RecipientFactor</CODE> (<CODECLASS="literal">y</CODE>) (see <ACLASS="xref"HREF="ch34_08.htm#SML2-CH-34-SECT-8-53"TITLE="">Section 34.8.53</A>)and <CODECLASS="literal">ClassFactor</CODE> (<CODECLASS="literal">z</CODE>) (see <ACLASS="xref"HREF="ch34_08.htm#SML2-CH-34-SECT-8-8"TITLE="">Section 34.8.8</A>)options, when the message is first created,and it is adjusted, using this <CODECLASS="literal">RetryFactor</CODE> (<CODECLASS="literal">Z</CODE>) option, each time the messageis processed in the queue.</P><PCLASS="para">Each time a message from the queue fails to be delivered and needsto be requeued, its priority is adjusted.That adjustment is made by adding the value of this <CODECLASS="literal">RetryFactor</CODE> (<CODECLASS="literal">Z</CODE>) option.</P><PCLASS="para">The forms of the <CODECLASS="literal">RetryFactor</CODE> (<CODECLASS="literal">Z</CODE>) option are as follows:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">OZ<CODECLASS="replaceable"><I>inc                                </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> configuration file (old form)</I>-oZ<CODECLASS="replaceable"><I>inc                               </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> command line (old form)</I>O RetryFactor=<CODECLASS="replaceable"><I>inc                    </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> configuration file (beginning with V8.7)</I>-ORetryFactor=<CODECLASS="replaceable"><I>inc                    </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> command line (beginning with V8.7)</I>define(`confWORK_TIME_FACTOR',<CODECLASS="replaceable"><I>inc</I></CODE>)   <ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> V8 m4 configuration</I></PRE></BLOCKQUOTE></P><PCLASS="para">The argument <CODECLASS="replaceable"><I>inc</I></CODE> is of type numeric. If <CODECLASS="replaceable"><I>inc</I></CODE> ismissing, the default value is zero. If the entire <CODECLASS="literal">RetryFactor</CODE> (<CODECLASS="literal">Z</CODE>) optionis missing, the value for <CODECLASS="replaceable"><I>inc</I></CODE> defaults to90000 (ninety thousand). The default for the <EMCLASS="emphasis">m4</EM> technique is to omit this option.The increment is performed by adding the value of <CODECLASS="replaceable"><I>inc</I></CODE>to the previously stored message priority each time thatmessage is queued.</P><PCLASS="para">The <CODECLASS="literal">RetryFactor</CODE> (<CODECLASS="literal">Z</CODE>) option is not safe.  If specified from the command line,it may cause <EMCLASS="emphasis">sendmail</EM> to relinquish its <EMCLASS="emphasis">root</EM> privilege.</P></DIV></BLOCKQUOTE></DIV><DIVCLASS="refentry"><DIVCLASS="refnamediv"><H3CLASS="refname"><ACLASS="refname"NAME="SML2-CH-34-SECT-8-57">34.8.57 RunAsUser</A></H3><PCLASS="refpurpose">Run as non-root (on a firewall)</P>(V8.8 and above)</DIV><BLOCKQUOTE><DIVCLASS="refsect1"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-46204"></A><ACLASS="indexterm"NAME="AUTOID-46206"></A><ACLASS="indexterm"NAME="AUTOID-46209"></A>On firewalls, for reasons of additional security, it is often desirableto run <EMCLASS="emphasis">sendmail</EM> as a user other than <EMCLASS="emphasis">root</EM>.Beginning with V8.8 <EMCLASS="emphasis">sendmail</EM>, you can accomplish thisby using the <CODECLASS="literal">RunAsUser</CODE> option: </P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">O RunAsUser=<CODECLASS="replaceable"><I>user</I></CODE>:<CODECLASS="replaceable"><I>group                       </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> V8.8 and above</I>-ORunAsUser=<CODECLASS="replaceable"><I>user</I></CODE>:<CODECLASS="replaceable"><I>group                       </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> V8.8 and above</I>define(`confRUN_AS_USER', `<CODECLASS="replaceable"><I>user</I></CODE>:<CODECLASS="replaceable"><I>group</I></CODE>')       <ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> V8 m4 technique</I></PRE></BLOCKQUOTE></P><PCLASS="para">Here, <CODECLASS="replaceable"><I>user</I></CODE> is either the <EMCLASS="emphasis">uid</EM> number of the identity youwant <EMCLASS="emphasis">sendmail</EM> to run under or a symbolic name for that identity.If a symbolic name is specified and if that name cannot be lookedup in the <EMCLASS="emphasis">passwd</EM>(5) file, <EMCLASS="emphasis">sendmail</EM> prints the followingerror:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">readcf: option RunAsUser: unknown user <ICLASS="lineannotation">bad symbolic name here</I></PRE></BLOCKQUOTE></P><PCLASS="para">If the symbolic name is found in the <EMCLASS="emphasis">passwd</EM>(5) file, the<EMCLASS="emphasis">uid</EM> and <EMCLASS="emphasis">gid</EM> that <EMCLASS="emphasis">sendmail</EM> will run under areset from that file.</P><PCLASS="para">The <CODECLASS="literal">:</CODE>, if it is present,[29]signals to <EMCLASS="emphasis">sendmail</EM> that you also intend to specifya group identity.</P><BLOCKQUOTECLASS="footnote"><PCLASS="para">[29] It can also be a <CODECLASS="literal">.</CODE> or a <CODECLASS="literal">/</CODE> character.</P></BLOCKQUOTE><PCLASS="para">The <CODECLASS="replaceable"><I>group</I></CODE> is either the numeric <EMCLASS="emphasis">gid</EM> that you want<EMCLASS="emphasis">sendmail</EM> to run as or a symbolic name for a group.If it is a symbolic name, that name is looked up inthe <EMCLASS="emphasis">group</EM>(5) file. If it is not found in thatfile, the following error is printed:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">readcf: option RunAsUser: unknown group <ICLASS="lineannotation">bad group name here</I></PRE></BLOCKQUOTE></P><PCLASS="para">If the symbolic name is in that file, <EMCLASS="emphasis">sendmail</EM> willrun under the <EMCLASS="emphasis">gid</EM> found there.</P><PCLASS="para">The <EMCLASS="emphasis">sendmail</EM> program assumes the identity specified justafter the configuration file is read for all but thedaemon mode. As a daemon, <EMCLASS="emphasis">sendmail</EM> remains <EMCLASS="emphasis">root</EM>to listen for incoming SMTP connections. Each timeit receives a connection, it validates that connection(see <ACLASS="xref"HREF="ch22_04.htm#SML2-CH-22-SECT-4-1"TITLE="Accept/Reject Connections via libwrap.a">Section 22.4.1, "Accept/Reject Connections via libwrap.a"</A> and <ACLASS="xref"HREF="ch29_10.htm#SML2-CH-29-SECT-10-3"TITLE="The check_relay Rule Set">Section 29.10.3, "The check_relay Rule Set"</A>), then<EMCLASS="emphasis">fork</EM>(2)'s. The child then processes the incoming message.Immediately after the fork, the child assumes the identityspecified by this <CODECLASS="literal">RunAsUser</CODE> option.</P><PCLASS="para">Note that running as non-<EMCLASS="emphasis">root</EM> can lead to problems, especiallyon machines that do more than simply relay mail between networks.As non-<EMCLASS="emphasis">root</EM>, <EMCLASS="emphasis">sendmail</EM> may not be able to read some <CODECLASS="literal">:include:</CODE>files, will certainly not be able to read protected <EMCLASS="emphasis">~/.forward</EM> files,and won't be able to save messages to the queue, all unless permissionsare relaxed to allow the non-<EMCLASS="emphasis">root</EM> user such access.This option is intended to be used on a firewall machine. It shoulddefinitely <EMCLASS="emphasis">not</EM> be used on nonfirewall machines.</P><PCLASS="para">The <CODECLASS="literal">RunAsUser</CODE> option is not safe.If specified from the command line,it may cause <EMCLASS="emphasis">sendmail</EM> to relinquish its <EMCLASS="emphasis">root</EM> privilege.</P></DIV></BLOCKQUOTE></DIV><DIVCLASS="refentry"><DIVCLASS="refnamediv"><H3CLASS="refname"><ACLASS="refname"NAME="SML2-CH-34-SECT-8-58">34.8.58 SafeFileEnvironment</A></H3><PCLASS="refpurpose">Directory for safe file writes</P>(V8.7 and above)</DIV><BLOCKQUOTE><DIVCLASS="refsect1"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-46287"></A><ACLASS="indexterm"NAME="AUTOID-46290"></A><ACLASS="indexterm"NAME="AUTOID-46293"></A><ACLASS="indexterm"NAME="AUTOID-46296"></A>For security it is desirable to control the manner and circumstancesunder which messages are delivered to files. Beginning with V8.7<EMCLASS="emphasis">sendmail</EM> you can enhance the security of writing to fileswith the <CODECLASS="literal">SafeFileEnvironment</CODE> option. It is used like this:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">O SafeFileEnvironment=<CODECLASS="replaceable"><I>path              </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> configuration file (beginning with V8.7)</I>-OSafeFileEnvironment=<CODECLASS="replaceable"><I>path              </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> command line (beginning with V8.7)</I>define(`confSAFE_FILE_ENV',<CODECLASS="replaceable"><I>path)        </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> m4 configuration (beginning with V8.7)</I></PRE></BLOCKQUOTE></P><PCLASS="para">The <CODECLASS="replaceable"><I>path</I></CODE> is of type string and, if present, mustbe the full path name of a directory. The default, if either <CODECLASS="replaceable"><I>path</I></CODE>or the entire option is missing, is NULL, causingthis feature to be ignored.</P><PCLASS="para">When preparing to save a message to a file, <EMCLASS="emphasis">sendmail</EM> firstobtains the permissions of that file, if the file exists, andsaves them (see <ACLASS="xref"HREF="ch24_02.htm#SML2-CH-24-SECT-2-2"TITLE="Delivery to Files">Section 24.2.2, "Delivery to Files"</A>). The <EMCLASS="emphasis">sendmail</EM>program uses <EMCLASS="emphasis">lstat</EM>(2) to obtain those permissions ifit was compiled with HASLSTAT defined (see <ACLASS="xref"HREF="ch18_08.htm#SML2-CH-18-SECT-8-9"TITLE="">Section 18.8.9, HAS...</A>).Otherwise, it uses <EMCLASS="emphasis">stat</EM>(2).</P><PCLASS="para">Ordinarily, <EMCLASS="emphasis">sendmail</EM> does a <EMCLASS="emphasis">chroot</EM>(2) to the <EMCLASS="emphasis">/</EM>directory just before it opens the file for writing. If the<CODECLASS="replaceable"><I>path</I></CODE> is non-NULL and nonempty, <EMCLASS="emphasis">sendmail</EM>then precedes that <EMCLASS="emphasis">chroot</EM>(2) with a:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">chroot(<CODECLASS="replaceable"><I>path</I></CODE>)</PRE></BLOCKQUOTE></P><PCLASS="para">If the <EMCLASS="emphasis">chroot</EM>(2) fails, <EMCLASS="emphasis">sendmail</EM> prints thefollowing error and bounces the mail message:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">mailfile: Cannot chroot(<CODECLASS="replaceable"><I>path</I></CODE>)</PRE></BLOCKQUOTE></P><PCLASS="para">&#13;If the name of the file begins with <CODECLASS="replaceable"><I>path</I></CODE>, that prefixis stripped after the <EMCLASS="emphasis">chroot</EM>(2) and before the <EMCLASS="emphasis">fopen</EM>(3).</P><PCLASS="para">For example, consider the need to safely store all mail archivefiles on the mail hub in a directory called <EMCLASS="emphasis">/archives</EM>.You would first create this configuration declaration:&#13;</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">O SafeFileEnvironment=/archives</PRE></BLOCKQUOTE></P><PCLASS="para">&#13;Then every file archive notation in the <EMCLASS="emphasis">aliases</EM> databaseshould be changed to reference this base directory:[30]&#13;</P><BLOCKQUOTECLASS="footnote"><PCLASS="para">[30] This is not strictly necessary. Both <EMCLASS="emphasis">/archives/admin/log</EM> and<EMCLASS="emphasis">/admin/log</EM> will work equally well. The former, however,is preferred for clarity.</P></BLOCKQUOTE><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">adminlist:   :include:/usr/local/maillists/admin.list,             /archives/admin/log</PRE></BLOCKQUOTE></P><PCLASS="para">&#13;For safety, <EMCLASS="emphasis">sendmail</EM> will henceforth <EMCLASS="emphasis">chroot</EM>(2) intothe <EMCLASS="emphasis">/archives</EM> directory before delivering to any files.Note that this <CODECLASS="literal">SafeFileEnvironment</CODE> option affects allwrites to files, so auser's <EMCLASS="emphasis">~/.forward</EM> entry (such as the following) will becomerelative to <EMCLASS="emphasis">/archives</EM> and so may fail depending onyour specific setup:&#13;</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">/u/bill/tmp/incoming     <ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> written as /archives/u/bill/tmp/incoming</I></PRE></BLOCKQUOTE></P><PCLASS="para">&#13;The <CODECLASS="literal">SafeFileEnvironment</CODE> option also causes <EMCLASS="emphasis">sendmail</EM>to verify that the file that is being written to is a plain file. If itis anything else, <EMCLASS="emphasis">sendmail</EM> prints the following errorand bounces the messages:&#13;</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">/dev/tty... Can't create output: Error 0</PRE></BLOCKQUOTE></P><PCLASS="para">&#13;Here, an attempt to dump the message to <EMCLASS="emphasis">/dev/tty</EM> failedbecause <EMCLASS="emphasis">sendmail</EM> discovered it was a device rather thanan ordinary file. But note that beginning with V8.8, it islegal to write to the special device named <EMCLASS="emphasis">/dev/null</EM>.</P><PCLASS="para">The <CODECLASS="literal">SafeFileEnvironment</CODE> option is not safe.If specified from the command line,it may cause <EMCLASS="emphasis">sendmail</EM> to relinquish its <EMCLASS="emphasis">root</EM> privilege.</P></DIV></BLOCKQUOTE></DIV><DIVCLASS="refentry"><DIVCLASS="refnamediv"><H3CLASS="refname"><ACLASS="refname"NAME="SML2-CH-34-SECT-8-59">34.8.59 SaveFromLine (f)</A></H3><PCLASS="refpurpose">Save UNIX-style From lines</P>(All versions)</DIV><BLOCKQUOTE><DIVCLASS="refsect1"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-46382"></A><ACLASS="indexterm"NAME="AUTOID-46384"></A>Many UNIX MUAs, as well as some transmittal systems like UUCP,require that a mail-message header begin with a line that beginswith the five-character sequence &quot;<CODECLASS="literal">From&nbsp;</CODE>&quot;.  All other header linesmust adhere to the RFC822 standard and be delimited with a colon:&#13;</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">From jqp@Washington.DC.gov Fri Jul 26 12:35:25 1991Return-Path: &lt;jqp@Washington.DC.gov&gt;Date: Fri, 26 Jul 91 12:35:15 PDTFrom: jqp@Washington.DC.gov (John Q Public)</PRE></BLOCKQUOTE></P><PCLASS="para">&#13;If you don't set the <CODECLASS="literal">SaveFromLine</CODE> (<CODECLASS="literal">f</CODE>) option, the first line in the aboveexample is stripped out by <EMCLASS="emphasis">sendmail</EM>.The <CODECLASS="literal">SaveFromLine</CODE> (<CODECLASS="literal">f</CODE>) option prevents this, because ittells <EMCLASS="emphasis">sendmail</EM> to keep header linesthat begin with the five characters &quot;<CODECLASS="literal">From&nbsp;</CODE>&quot;.But note that it also causes this header to no longer berecognized as a header.</P><PCLASS="para">The forms of the <CODECLASS="literal">SaveFromLine</CODE> (<CODECLASS="literal">f</CODE>) option are as follows:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">Of<CODECLASS="replaceable"><I>bool                               </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> configuration file (old form)</I>-of<CODECLASS="replaceable"><I>bool                              </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> command line (old form)</I>-s<CODECLASS="replaceable"><I>                                   </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> command-line shorthand (not recommended)</I>O SaveFromLine=<CODECLASS="replaceable"><I>bool                  </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> configuration file (beginning with V8.7)</I>-OSaveFromLine=<CODECLASS="replaceable"><I>bool                  </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> command line (beginning with V8.7)</I>define(`confSAVE_FROM_LINES',<CODECLASS="replaceable"><I>bool</I></CODE>)   <ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> V8 m4 configuration</I></PRE></BLOCKQUOTE></P><PCLASS="para">The optional argument <CODECLASS="replaceable"><I>bool</I></CODE> is of type Boolean. If <CODECLASS="replaceable"><I>bool</I></CODE>is missing, this option becomes true (the &quot;<CODECLASS="literal">From&nbsp;</CODE>&quot; line is saved).If the entire option is missing, it defaults to false (neither savethe &quot;<CODECLASS="literal">From&nbsp;</CODE>&quot; line nor recognize it as a header).</P><PCLASS="para">The <CODECLASS="literal">SaveFromLine</CODE> (<CODECLASS="literal">f</CODE>) option is not safe.  If specified from the command line,it may cause <EMCLASS="emphasis">sendmail</EM> to relinquish its <EMCLASS="emphasis">root</EM> privilege.</P></DIV></BLOCKQUOTE></DIV><DIVCLASS="refentry"><DIVCLASS="refnamediv"><H3CLASS="refname"><ACLASS="refname"NAME="SML2-CH-34-SECT-8-60">34.8.60 SendMimeErrors (j)</A></H3><PCLASS="refpurpose">Return MIME format errors</P>(V6.57 and above)</DIV><BLOCKQUOTE><DIVCLASS="refsect1"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-46432"></A><ACLASS="indexterm"NAME="AUTOID-46434"></A><ACLASS="indexterm"NAME="AUTOID-46437"></A>MIME (Multipurpose Internet Mail Extensions)is documented in RFC1341, with addition details in RFC1344, RFC1426,RFC1428, RFC1437, RFC1521, RFC1522,RFC1523, RFC1556, RFC1563, RFC1641,RFC1740, RFC1741, and RFC1767.MIME is a method of incorporating non-ASCIItext (such as images and sounds) in mail messages.</P><PCLASS="para">When <EMCLASS="emphasis">sendmail</EM> composes an error notification of failed (bounced) mail,this <CODECLASS="literal">SendMimeErrors</CODE> (<CODECLASS="literal">j</CODE>) option tells <EMCLASS="emphasis">sendmail</EM> to include MIMEformat headers in that error notification. MIME format is required forDSN notification to work (the two go hand in hand). This optionaffects only returned (bounced) mail.</P><PCLASS="para">If the <CODECLASS="literal">SendMimeErrors</CODE> (<CODECLASS="literal">j</CODE>) option is true and if <EMCLASS="emphasis">sendmail</EM> is composinga returned mail message, the following two headers are added to the headerportion of that message:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">MIME-Version: 1.0Content-Type: multipart/report; report-type=delivery-status;        boundary=<EMCLASS="emphasis">magic</EM></PRE></BLOCKQUOTE></P><PCLASS="para">The version (1.0) of the <CODECLASS="literal">MIME-Version:</CODE> header(see <ACLASS="xref"HREF="ch35_10.htm#SML2-CH-35-SECT-10-21"TITLE="">Section 35.10.21</A>)is hard-coded into V8 <EMCLASS="emphasis">sendmail</EM>, so it cannot be changed.The <CODECLASS="literal">Content-Type:</CODE> is instead <CODECLASS="literal">multipart/mixed</CODE> if<EMCLASS="emphasis">sendmail</EM> was compiled without DSN support (see <ACLASS="xref"HREF="ch18_08.htm#SML2-CH-18-SECT-8-5"TITLE="">Section 18.8.5, DSN</A>).The <EMCLASS="emphasis">magic</EM> of <CODECLASS="literal">Content-Type:</CODE>is a string that is used to separate thevarious parts of the message body. The string is formed fromthe queue ID, the time, and the hostname. For example:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">Content-Type: multipart/report; report-type=delivery-status;         boundary=AA26662.9306241634/hostname</PRE></BLOCKQUOTE></P><PCLASS="para">Then <EMCLASS="emphasis">sendmail</EM> prefixes the body of the returned message (if thereis one), a line of notification, and this boundary:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">This is a MIME-encapsulated message-AA26662.9306241634/hostname           <ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> message body begins here</I></PRE></BLOCKQUOTE></P><PCLASS="para">Newer MUAs are aware of MIME and can send and receive MIME messages.Such MUAs understand <CODECLASS="literal">MIME-Version:</CODE> header in a mail message.Older (non-MIME aware) MUAs ignore that header.</P><PCLASS="para">Unless you bounce mail to a site that cannot handle MIME,you should always set this <CODECLASS="literal">SendMimeErrors</CODE> (<CODECLASS="literal">j</CODE>) optionto true.</P><PCLASS="para">The forms of the <CODECLASS="literal">SendMimeErrors</CODE> (<CODECLASS="literal">j</CODE>) option are as follows:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">Oj<CODECLASS="replaceable"><I>bool                                  </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> configuration file (V8.6)</I>-oj<CODECLASS="replaceable"><I>bool                                 </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> command line (V8.6)</I>O SendMimeErrors=<CODECLASS="replaceable"><I>bool                   </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> configuration file (V8.7)</I>-OSendMimeErrors=<CODECLASS="replaceable"><I>bool                   </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> command line (V8.7)</I>define(`confMIME_FORMAT_ERRORS',<CODECLASS="replaceable"><I>bool</I></CODE>)   <ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> V8 m4 configuration</I></PRE></BLOCKQUOTE></P><PCLASS="para">The optional argument <CODECLASS="replaceable"><I>bool</I></CODE> is of type Boolean. If <CODECLASS="replaceable"><I>bool</I></CODE>is missing, this option becomes true (errors are sent in MIMEformat).If the entire option is missing it defaults to false (errors aresent just as they were before this option was introduced).</P><PCLASS="para">The <CODECLASS="literal">SendMimeErrors</CODE> (<CODECLASS="literal">j</CODE>) option is safe.  Even if it is specified from the command line,<EMCLASS="emphasis">sendmail</EM> retains its <EMCLASS="emphasis">root</EM> privilege.</P></DIV></BLOCKQUOTE></DIV><DIVCLASS="refentry"><DIVCLASS="refnamediv"><H3CLASS="refname"><ACLASS="refname"NAME="SML2-CH-34-SECT-8-61">34.8.61 ServiceSwitchFile</A></H3><PCLASS="refpurpose">Specify file for switched services</P>(V8.7 and above)</DIV><BLOCKQUOTE><DIVCLASS="refsect1"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-46505"></A><ACLASS="indexterm"NAME="AUTOID-46507"></A>Some implementations of UNIX recognize that system informationcan be found in a variety of places.On Solaris, for example, hostnamescan be obtained from the <EMCLASS="emphasis">/etc/hosts</EM> file, from <EMCLASS="emphasis">nis</EM>, from <EMCLASS="emphasis">nisplus</EM>,or from DNS.Solaris allows the system administrator to choose the orderin which these services are searched with a &quot;service-switch&quot; file.Other systems, such as Ultrix and DEC OSF/1, have a similar concept,but some (such as SunOS) use built-in rulesthat cannot be changed without the source code.</P><PCLASS="para">V8.7 <EMCLASS="emphasis">sendmail</EM> uses a system-service switchif one is available. Otherwise, <EMCLASS="emphasis">sendmail</EM> uses theservice switch defined by this <CODECLASS="literal">ServiceSwitchFile</CODE> option.</P><PCLASS="para">The form for redefining the switched-services file is as follows:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">O ServiceSwitchFile=<CODECLASS="replaceable"><I>path</I></CODE>                 <ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> configuration file (beginning with V8.7)</I>-OServiceSwitchFile=<CODECLASS="replaceable"><I>path</I></CODE>                 <ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> command line (beginning with V8.7)</I>define(`confSERVICE_SWITCH_FILE',<CODECLASS="replaceable"><I>path</I></CODE>)   <ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> V8 m4 configuration</I></PRE></BLOCKQUOTE></P><PCLASS="para">If this option is defined on an operating system that <EMCLASS="emphasis">does</EM>offer a service-switch(such as Solaris, DEC OSF/1 or Ultrix), it is ignored.Otherwise, <CODECLASS="replaceable"><I>path</I></CODE> is used as the full pathname ofthe file that is to be used as the service-switch.If <CODECLASS="replaceable"><I>path</I></CODE> is omitted, the default is NULL.If the entire option is omitted, the default is <EMCLASS="emphasis">/etc/service.switch</EM>.The default for the <EMCLASS="emphasis">m4</EM> technique is to omit this option.</P><PCLASS="para">The form of each line in that file is</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen"><CODECLASS="replaceable"><I>service  how how</I></CODE></PRE></BLOCKQUOTE></P><PCLASS="para">Here, <CODECLASS="replaceable"><I>service</I></CODE> is either <CODECLASS="literal">hosts</CODE> (which states how hostnames are looked up) <CODECLASS="literal">aliases</CODE> (which states how aliases arelooked up), or <CODECLASS="literal">passwd</CODE> (which states how <EMCLASS="emphasis">passwd</EM>(5) informationis looked up).For each of these services, there may be one or more <CODECLASS="replaceable"><I>how</I></CODE> methods (notall of which make sense with all services).The <CODECLASS="replaceable"><I>service</I></CODE> and the <CODECLASS="replaceable"><I>hows</I></CODE> must be separated from eachother by whitespace.The possible methods (values for each <CODECLASS="replaceable"><I>how</I></CODE>) are<CODECLASS="literal">files</CODE> (the information is in a file or database, such as <EMCLASS="emphasis">/etc/hosts</EM>),<CODECLASS="literal">netinfo</CODE> (for information on NeXT machines),<CODECLASS="literal">nis</CODE> (the information is in an <EMCLASS="emphasis">nis</EM> map),<CODECLASS="literal">nisplus</CODE> (the information is in an <EMCLASS="emphasis">nisplus</EM> map),<CODECLASS="literal">dns</CODE> (the host information is looked up with DNS), or <CODECLASS="literal">hesiod</CODE> (the information is listed with a Hesiod service).[31]</P><BLOCKQUOTECLASS="footnote"><PCLASS="para">[31] Currently, the list is limited to those shown. Future versions of<EMCLASS="emphasis">sendmail</EM> may offer others.</P></BLOCKQUOTE><PCLASS="para">For example, consider the contents of the following <EMCLASS="emphasis">/etc/service.switch</EM> file:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">aliases nispasswd nis fileshosts dns</PRE></BLOCKQUOTE></P><PCLASS="para">Here, <EMCLASS="emphasis">sendmail</EM> will look up aliases in the <EMCLASS="emphasis">nis</EM> map <EMCLASS="emphasis">mail.aliases</EM>.Password information, such as local user login names and full name informationfrom the <EMCLASS="emphasis">gecos</EM> field, will first be looked up in the <EMCLASS="emphasis">nis</EM>map <EMCLASS="emphasis">passwd.byname</EM>. If not found there, they will then be looked up inthe file <EMCLASS="emphasis">/etc/passwd</EM>. The last line tells <EMCLASS="emphasis">sendmail</EM>to look up A and MX records for hosts using the DNS services.</P><PCLASS="para">The <CODECLASS="literal">hosts</CODE> line can also determine how MX records aretreated (see <ACLASS="xref"HREF="ch21_02.htm#SML2-CH-21-SECT-2-3"TITLE="Look Up Addresses for Delivery">Section 21.2.3, "Look Up Addresses for Delivery"</A>).If &quot;dns&quot; does not appear in that line,<EMCLASS="emphasis">sendmail</EM> disables lookups of MX records.If <EMCLASS="emphasis">sendmail</EM> is configured to look up hostswith <EMCLASS="emphasis">nis</EM> first, then DNS, it will do the MX lookupin DNS <EMCLASS="emphasis">before</EM> the <EMCLASS="emphasis">nis</EM> lookup.</P><PCLASS="para">For Solaris, <CODECLASS="literal">hosts</CODE> is looked up with the <EMCLASS="emphasis">nsswitch.conf</EM>(4) service.For DEC OSF/1 and Ultrix, <CODECLASS="literal">hosts</CODE> is looked up with the<EMCLASS="emphasis">svc.conf</EM>(5) service.For all others the file defined by the <CODECLASS="literal">ServiceSwitchFile</CODE> is examinedfor a line that begins with the word <CODECLASS="literal">hosts</CODE>. If that line is missingor if the file doesn't exist,&quot;dns&quot; is returned by default. But if NAMED_BIND was not defined (see <ACLASS="xref"HREF="ch18_08.htm#SML2-CH-18-SECT-8-23"TITLE="">Section 18.8.23</A>)when <EMCLASS="emphasis">sendmail</EM> was compiled, the defaultreturned is &quot;nis&quot; for Solaris and SunOS, and on other systems it is &quot;files.&quot;</P><PCLASS="para">Note that on systems such as SunOS, a version of <EMCLASS="emphasis">gethostbyname</EM>(3) is still calledthat ignores the <EMCLASS="emphasis">sendmail</EM> programs service-switch file. On such systemsyou may need to download the source, recompile, and install a version thatworks correctly.</P><PCLASS="para">The <CODECLASS="literal">ServiceSwitchFile</CODE> option is not safe.  If specified from the command line,it may cause <EMCLASS="emphasis">sendmail</EM> to relinquish its <EMCLASS="emphasis">root</EM> privilege.</P></DIV></BLOCKQUOTE></DIV><DIVCLASS="refentry"><DIVCLASS="refnamediv"><H3CLASS="refname"><ACLASS="refname"NAME="SML2-CH-34-SECT-8-62">34.8.62 SevenBitInput (7)</A></H3><PCLASS="refpurpose">Force 7-bit input</P>(V8.1 and above)</DIV><BLOCKQUOTE><DIVCLASS="refsect1"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-46602"></A><ACLASS="indexterm"NAME="AUTOID-46604"></A>By default, V8 <EMCLASS="emphasis">sendmail</EM> leaves as is all bytes of every mailmessage it reads.This differs from other releases of <EMCLASS="emphasis">sendmail</EM> that alwaysclear (zero) the high (most-significant) bit.To make V8 <EMCLASS="emphasis">sendmail</EM> behave likeolder versions and always clear the high bit on input, the <CODECLASS="literal">SevenBitInput</CODE> (<CODECLASS="literal">7</CODE>) optionis available:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">O7<CODECLASS="replaceable"><I>bool                               </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> configuration file (V8.6)</I>-o7<CODECLASS="replaceable"><I>bool                              </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> command line (V8.6)</I>O SevenBitInput=<CODECLASS="replaceable"><I>bool                 </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> configuration file (V8.7 and above)</I>-OSevenBitInput=<CODECLASS="replaceable"><I>bool                 </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> command line (V8.7 and above)</I>define(`confSEVEN_BIT_INPUT',<CODECLASS="replaceable"><I>bool</I></CODE>)   <ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> V8 m4 configuration</I></PRE></BLOCKQUOTE></P><PCLASS="para">The argument <CODECLASS="replaceable"><I>bool</I></CODE> is of type Boolean. If <CODECLASS="replaceable"><I>bool</I></CODE> ismissing, the default value is true (clear the 8th bit). If this option isomitted entirely, the default is false (the 8th bit is unmodified).If you configure with V8's <EMCLASS="emphasis">m4</EM> technique, the default for<CODECLASS="literal">confSEVEN_BIT_INPUT</CODE> is false.</P><PCLASS="para">Note that this option is temporarily set to false for a singlemessage if the ESMTP BODY=8BITMIME parameter isgiven and is set to true if the BODY=7BIT parameter isgiven.</P><PCLASS="para">Also note that the <CODECLASS="literal">SevenBitInput</CODE> (<CODECLASS="literal">7</CODE>) option affects input only.The <CODECLASS="literal">F=7</CODE> delivery agent flag (see <ACLASS="xref"HREF="ch30_08.htm#SML2-CH-30-SECT-8-4"TITLE="">Section 30.8.4</A>) can be used to set 7-bitoutput on an individual delivery agent basis.</P><PCLASS="para">The <CODECLASS="literal">SevenBitInput</CODE> (<CODECLASS="literal">7</CODE>) option is safe. If specified from the command line,<EMCLASS="emphasis">sendmail</EM> will not relinquish its <EMCLASS="emphasis">root</EM> privilege.</P></DIV></BLOCKQUOTE></DIV><DIVCLASS="refentry"><DIVCLASS="refnamediv"><H3CLASS="refname"><ACLASS="refname"NAME="SML2-CH-34-SECT-8-63">34.8.63 SingleLineFromHeader</A></H3><PCLASS="refpurpose">Strip newlines from From: headers</P>(V8.8 and above)</DIV><BLOCKQUOTE><DIVCLASS="refsect1"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-46647"></A><ACLASS="indexterm"NAME="AUTOID-46649"></A><ACLASS="indexterm"NAME="AUTOID-46651"></A><ACLASS="indexterm"NAME="AUTOID-46654"></A>Lotus Notes' SMTP mail gateway can generate <CODECLASS="literal">From:</CODE> headersthat contain newlines and that contain the address on the second line:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">From: Full Name        &lt;address&gt;</PRE></BLOCKQUOTE></P><PCLASS="para">Although this is legal per RFC822, many MUAs mishandle suchheaders and are unable to find the address.If your site suffers from this problem, you may define the <CODECLASS="literal">SingleLineFromHeader</CODE>option:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">O SingleLineFromHeader=<CODECLASS="replaceable"><I>bool                  </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> configuration file (V8.8)</I>-OSingleLineFromHeader=<CODECLASS="replaceable"><I>bool                  </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> command line (V8.8)</I></PRE></BLOCKQUOTE></P><PCLASS="para">The <CODECLASS="replaceable"><I>bool</I></CODE> is of type Boolean. If it is true, <EMCLASS="emphasis">sendmail</EM> will convertall newlines found in a <CODECLASS="literal">From:</CODE> header into space characters.If it is false, <EMCLASS="emphasis">sendmail</EM> will leave all <CODECLASS="literal">From:</CODE> headers as is.</P><PCLASS="para">The <CODECLASS="literal">SingleLineFromHeader</CODE> option is safe.  Even if it is specified from the command line,<EMCLASS="emphasis">sendmail</EM> retains its <EMCLASS="emphasis">root</EM> privilege.</P></DIV></BLOCKQUOTE></DIV><DIVCLASS="refentry"><DIVCLASS="refnamediv"><H3CLASS="refname"><ACLASS="refname"NAME="SML2-CH-34-SECT-8-64">34.8.64 SingleThreadDelivery</A></H3><PCLASS="refpurpose">Set single threaded delivery</P>(V8.8 and above)</DIV><BLOCKQUOTE><DIVCLASS="refsect1"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-46686"></A><ACLASS="indexterm"NAME="AUTOID-46688"></A>Ordinarily, when <EMCLASS="emphasis">sendmail</EM> processes the queue, it pays relativelylittle attention to other <EMCLASS="emphasis">sendmail</EM> processes that may beprocessing the same queue at the same time.It locks a single <CODECLASS="literal">qf</CODE> file during delivery so that no other<EMCLASS="emphasis">sendmail</EM> will attempt delivery of that message at the same time, but that is all.In sending many messages to a single other host, it is possiblefor multiple, parallel <EMCLASS="emphasis">sendmail</EM> processes to try to deliverdifferent messages from that queue to that single host all at once.</P><PCLASS="para">When accidental parallelism is not desirable, as in justprocessing the queue, you may wishto set up <EMCLASS="emphasis">sendmail</EM> to be single-threaded. This ensures that only a single <EMCLASS="emphasis">sendmail</EM>will ever be delivering to a given host at a given time.Single-threaded delivery is enabled with the <CODECLASS="literal">SingleThreadDelivery</CODE> option:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">O SingleThreadDelivery=<CODECLASS="replaceable"><I>bool</I></CODE>                       <ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> V8.8 and above</I>-OSingleThreadDelivery=<CODECLASS="replaceable"><I>bool</I></CODE>                       <ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> V8.8 and above</I>define(`confSINGLE_THREAD_DELIVERY',<CODECLASS="replaceable"><I>bool</I></CODE>)         <ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> V8 m4 technique</I></PRE></BLOCKQUOTE></P><PCLASS="para">The argument <CODECLASS="replaceable"><I>bool</I></CODE> is of type Boolean. If it is missing, thedefault value is true (deliver single-threaded).If the entire <CODECLASS="literal">SingleThreadDelivery</CODE> option is missing, the default becomesfalse (deliver in parallel).There is no <EMCLASS="emphasis">m4</EM> shorthand for enabling this option.</P><PCLASS="para">Note that the <CODECLASS="literal">SingleThreadDelivery</CODE> option will work only ifthe <CODECLASS="literal">HostStatusDirectory</CODE> option is also declared(see <ACLASS="xref"HREF="ch34_08.htm#SML2-CH-34-SECT-8-31"TITLE="">Section 34.8.31</A>).If it is not, <EMCLASS="emphasis">sendmail</EM> will print the following error and reset the<CODECLASS="literal">SingleThreadDelivery</CODE> option to false:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">Warning: HostStatusDirectory required for SingleThreadDelivery</PRE></BLOCKQUOTE></P><PCLASS="para">Also note that the <CODECLASS="literal">SingleThreadDelivery</CODE> option should probably neverbe set in the configuration file. To see why, consider an ongoingqueue run to a host that is receiving many messages. If interactiveuser mail arrives during that run, the <EMCLASS="emphasis">sendmail</EM> process executed bythe user's MUA may find that it cannot send the message becauseit is single-threaded and the other <EMCLASS="emphasis">sendmail</EM> has that host locked.In that case the user's message will be queued and will wait in the queue until the next queue is run.Even if your site is on the Internet, one large message to a slowsite can cause interactive mail for that site to be wrongly queued.</P><PCLASS="para">The appropriate use for the <CODECLASS="literal">SingleThreadDelivery</CODE> option ison the command line when processing the queue. In daemon mode, forexample, these startup commands may be appropriate:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">/usr/lib/sendmail -bd/usr/lib/sendmail -OSingleThreadDelivery -q30m</PRE></BLOCKQUOTE></P><PCLASS="para">Note that two <EMCLASS="emphasis">sendmail</EM> programs are started: one to act asa daemon and the other to periodically process the queue.Don't combine them when using the <CODECLASS="literal">SingleThreadDelivery</CODE>option, because incoming (relayed) mail can wrongly affect outgoing mail.</P><PCLASS="para">The <CODECLASS="literal">SingleThreadDelivery</CODE> option is not safe.  If specified from the command line,it may cause <EMCLASS="emphasis">sendmail</EM> to relinquish its <EMCLASS="emphasis">root</EM> privilege.</P></DIV></BLOCKQUOTE></DIV><DIVCLASS="refentry"><DIVCLASS="refnamediv"><H3CLASS="refname"><ACLASS="refname"NAME="SML2-CH-34-SECT-8-65">34.8.65 SmtpGreetingMessage or $e</A></H3><PCLASS="refpurpose">The SMTP greeting message</P>(All versions)</DIV><BLOCKQUOTE><DIVCLASS="refsect1"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-46744"></A><ACLASS="indexterm"NAME="AUTOID-46747"></A><ACLASS="indexterm"NAME="AUTOID-46749"></A><ACLASS="indexterm"NAME="AUTOID-46751"></A><ACLASS="indexterm"NAME="AUTOID-46753"></A>When <EMCLASS="emphasis">sendmail</EM> accepts an incoming SMTP connectionit sends a greeting message to the other host.This message identifies the local machine andis the first thing it sends to say it is ready.</P><PCLASS="para">Prior to V8.7 <EMCLASS="emphasis">sendmail</EM>, this message was declared with the <CODECLASS="literal">$e</CODE>macro. Beginning with V8.7 <EMCLASS="emphasis">sendmail</EM>, it is declared with the <CODECLASS="literal">SmtpGreetingMessage</CODE> option. In both cases the message mustbegin with the fully qualifiedname of the local host. Usually, that name is stored in <CODECLASS="literal">$j</CODE>.The minimal definition for both is</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">De$j                           <ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> V8.6 and earlier</I>O SmtpGreetingMessage=$j       <ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> beginning with V8.7</I></PRE></BLOCKQUOTE></P><PCLASS="para">Additional information may follow the local hostname.Any additional informationmust be separated from the hostname by at least one space:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">De$j <CODECLASS="replaceable"><I>additional information</I></CODE>    <ICLASS="lineannotation"><IMGSRC="../chars/uarr.gif"ALT="-^"></I>    <ICLASS="lineannotation">at least one space</I></PRE></BLOCKQUOTE></P><PCLASS="para">Traditionally, that additional information is the name of thelistening program (in our case, always <EMCLASS="emphasis">sendmail</EM>), the versionof that program, and a statement that the program is ready.For example:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">De$j Sendmail $v ready at $b                      <ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> V8.6 and earlier</I>O SmtpGreetingMessage=$j Sendmail $v ready at $b  <ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> beginning with V8.7</I></PRE></BLOCKQUOTE></P><PCLASS="para">Note that it is not uncommon to see imaginative (and legal) variationsin the additional information:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">De$j Sun's sendmail.mx is set to go (at $b), let 'er rip!</PRE></BLOCKQUOTE></P><PCLASS="para">Under versions V8.6 and earlier there was no default for this greeting message.You had to define <CODECLASS="literal">$e</CODE> in every configuration file. Beginning withV8.7, <EMCLASS="emphasis">sendmail</EM> now checks to see whether the <CODECLASS="literal">SmtpGreetingMessage</CODE>option was defined and uses that value if it was. Otherwise, it checksto see whether the level of the configurationfile is 6 or less. If it is and if the <CODECLASS="literal">$e</CODE> macro was definedit uses that value. Otherwise, it uses the following default:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">$j Sendmail $v ready at $b</PRE></BLOCKQUOTE></P><PCLASS="para">The forms for the <CODECLASS="literal">$e</CODE> and <CODECLASS="literal">SmtpGreetingMessage</CODE> are as follows:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">De<CODECLASS="replaceable"><I>message</I></CODE>                                      <ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> V8.6 and earlier</I>O SmtpGreetingMessage=<CODECLASS="replaceable"><I>message</I></CODE>                  <ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> configuration file (beginning with V8.7)</I>-OSmtpGreetingMessage=<CODECLASS="replaceable"><I>message</I></CODE>                  <ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> command line (beginning with V8.7)</I>define(`confSMTP_LOGIN_MSG',<CODECLASS="replaceable"><I>message</I></CODE>)           <ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> V8 m4 technique</I></PRE></BLOCKQUOTE></P><PCLASS="para">The <CODECLASS="literal">message</CODE> is of type string and must be present. It mustcontain, at minimum, the fully qualified name of the local host.</P><PCLASS="para">Note that in V8.1 through V8.6, <EMCLASS="emphasis">sendmail</EM> always added the extra line</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">ESMTP spoken here</PRE></BLOCKQUOTE></P><PCLASS="para">to its initial greeting message.Beginning with V8.7, <EMCLASS="emphasis">sendmail</EM> instead inserts the word &quot;ESMTP&quot;into the greeting message itself just after the fully qualified hostname.</P><PCLASS="para">The <CODECLASS="literal">SmtpGreetingMessage</CODE> option is not safe.  If specified from the command line,it may cause <EMCLASS="emphasis">sendmail</EM> to relinquish its <EMCLASS="emphasis">root</EM> privilege.</P></DIV></BLOCKQUOTE></DIV><DIVCLASS="refentry"><DIVCLASS="refnamediv"><H3CLASS="refname"><ACLASS="refname"NAME="SML2-CH-34-SECT-8-66">34.8.66 StatusFile (S)</A></H3><PCLASS="refpurpose">Specify statistics file</P>(All versions)</DIV><BLOCKQUOTE><DIVCLASS="refsect1"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-46821"></A><ACLASS="indexterm"NAME="AUTOID-46824"></A>At busy and complex mail sites, many different delivery agents are active.For example, one kind of mail might be routed over the Internetusing the TCP delivery agent, while another might be routed viathe UUCP suite of programs, and yet another might be routed over a DS3 link to a group of research machines. In such circumstances, itis useful to gather statistical information about the totaluse to date of each delivery agent.</P><PCLASS="para">The <CODECLASS="literal">StatusFile</CODE> (<CODECLASS="literal">S</CODE>) option tells <EMCLASS="emphasis">sendmail</EM> the nameof the file into which it should save those statistics. Thisoption does <EMCLASS="emphasis">not</EM> cause statistics to be gathered. It merelyspecifies the name of the file where they may be saved.When <EMCLASS="emphasis">sendmail</EM> runs, itchecks for the existence of such a file. If the file exists,it opens and updates the statistics in the file. If thefile doesn't exist, <EMCLASS="emphasis">sendmail</EM> quietly ignores statistics.The statistics can be viewed by using the <EMCLASS="emphasis">mailstats</EM>(8)[32]program (see <ACLASS="xref"HREF="ch26_02.htm#SML2-CH-26-SECT-2-1"TITLE="The sendmail.st File">Section 26.2.1, "The sendmail.st File"</A>).</P><BLOCKQUOTECLASS="footnote"><PCLASS="para">[32] If you install V8 <EMCLASS="emphasis">sendmail</EM> over an existing <EMCLASS="emphasis">sendmail</EM> installation,you need to also install the V8 <EMCLASS="emphasis">mailstats</EM> program.</P></BLOCKQUOTE><PCLASS="para">The forms of the <CODECLASS="literal">StatusFile</CODE> (<CODECLASS="literal">S</CODE>) option are as follows:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">OS<CODECLASS="replaceable"><I>path                         </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> configuration file (old form)</I>-oS<CODECLASS="replaceable"><I>path                        </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> command line (old form)</I>O StatusFile=<CODECLASS="replaceable"><I>path              </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> configuration file (beginning with V8.7)</I>-OStatusFile=<CODECLASS="replaceable"><I>path              </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> command line (beginning with V8.7)</I>define(`STATUS_FILE',`<CODECLASS="replaceable"><I>path</I></CODE>')   <ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> V8 m4 configuration</I></PRE></BLOCKQUOTE></P><PCLASS="para">The optional argument <CODECLASS="replaceable"><I>path</I></CODE> is of type string. It may bea relative or a full pathname. The default value for <CODECLASS="replaceable"><I>path</I></CODE>is <EMCLASS="emphasis">sendmail.st</EM>. Relative names are always relative to the queue directory.If the entire option is missing, the valuefor <CODECLASS="literal">path</CODE> becomes the C language value NULL.The default in configuring with the V8 <EMCLASS="emphasis">m4</EM> technique variesdepending on your operating system.</P><PCLASS="para">The <CODECLASS="literal">S</CODE> option is not safe.  If specified from the command line,it may cause <EMCLASS="emphasis">sendmail</EM> to relinquish its <EMCLASS="emphasis">root</EM> privilege.</P></DIV></BLOCKQUOTE></DIV><DIVCLASS="refentry"><DIVCLASS="refnamediv"><H3CLASS="refname"><ACLASS="refname"NAME="SML2-CH-34-SECT-8-67">34.8.67 SuperSafe (s)</A></H3><PCLASS="refpurpose">Queue everything just in case</P>(All versions)</DIV><BLOCKQUOTE><DIVCLASS="refsect1"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-46873"></A><ACLASS="indexterm"NAME="AUTOID-46875"></A><ACLASS="indexterm"NAME="AUTOID-46878"></A><ACLASS="indexterm"NAME="AUTOID-46881"></A>At times, such as when calling <EMCLASS="emphasis">/bin/mail</EM> to deliver localmail, <EMCLASS="emphasis">sendmail</EM> holds an entire message internally whilewaiting for that delivery to complete. Clearly, this runs the riskthat the message will be lost if the system crashes at the wrong time.</P><PCLASS="para">As a safeguard against such rare catastrophes, the <CODECLASS="literal">SuperSafe</CODE> (<CODECLASS="literal">s</CODE>) optioncan be used to force <EMCLASS="emphasis">sendmail</EM> to queueevery message. The queued copy is left in placeuntil <EMCLASS="emphasis">sendmail</EM> is sure that delivery was successful.We recommend that this option always be declared as true.</P><PCLASS="para">The forms of the <CODECLASS="literal">SuperSafe</CODE> (<CODECLASS="literal">s</CODE>) option are as follows:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">Os<CODECLASS="replaceable"><I>bool                          </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> configuration file (old form)</I>-os<CODECLASS="replaceable"><I>bool                         </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> command line (old form)</I>O SuperSafe=<CODECLASS="replaceable"><I>bool                </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> configuration file (beginning with V8.7)</I>-OSuperSafe=<CODECLASS="replaceable"><I>bool                </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> command line (beginning with V8.7)</I>define(`confSAFE_QUEUE',<CODECLASS="replaceable"><I>bool</I></CODE>)   <ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> V8 m4 configuration</I></PRE></BLOCKQUOTE></P><PCLASS="para">The argument <CODECLASS="replaceable"><I>bool</I></CODE> is of type Boolean. If it is missing, thedefault value is true (everything is queued).The default for the V8 <EMCLASS="emphasis">m4</EM> configuration technique is also true.If the entire <CODECLASS="literal">SuperSafe</CODE> (<CODECLASS="literal">s</CODE>) option is missing, the default becomesfalse (no special queuing behavior).</P><PCLASS="para">The <CODECLASS="literal">SuperSafe</CODE> (<CODECLASS="literal">s</CODE>) option is safe.  Even if it is specified from the command line,<EMCLASS="emphasis">sendmail</EM> retains its <EMCLASS="emphasis">root</EM> privilege.</P></DIV></BLOCKQUOTE></DIV><DIVCLASS="refentry"><DIVCLASS="refnamediv"><H3CLASS="refname"><ACLASS="refname"NAME="SML2-CH-34-SECT-8-68">34.8.68 TempFileMode (F)</A></H3><PCLASS="refpurpose">Permissions for temporary files</P>(All versions)</DIV><BLOCKQUOTE><DIVCLASS="refsect1"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-46925"></A><ACLASS="indexterm"NAME="AUTOID-46927"></A><ACLASS="indexterm"NAME="AUTOID-46930"></A>The <CODECLASS="literal">TempFileMode</CODE> (<CODECLASS="literal">F</CODE>) option tells <EMCLASS="emphasis">sendmail</EM> what mode (file permissions)to give its temporary files and its freeze file.[33]Because the files in the queue contain private email, this optionis usually set to the least permissive level, 0600. On dedicatedmail servers (hub machines), where logins are restricted to mailmanagers, you may wish to relax permissions for easier problemsolving.</P><BLOCKQUOTECLASS="footnote"><PCLASS="para">[33] V8 <EMCLASS="emphasis">sendmail</EM> no longer supports freeze files.</P></BLOCKQUOTE><PCLASS="para">The forms of the <CODECLASS="literal">TempFileMode</CODE> (<CODECLASS="literal">F</CODE>) option are as follows:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">OF<CODECLASS="replaceable"><I>mode                              </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> configuration file (old mode)</I>-oF<CODECLASS="replaceable"><I>mode                             </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> command line (old mode)</I>O TempFileMode=<CODECLASS="replaceable"><I>mode                 </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> configuration file (beginning with V8.7)</I>-OTempFileMode=<CODECLASS="replaceable"><I>mode                 </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> command line (beginning with V8.7)</I>define(`confTEMP_FILE_MODE',<CODECLASS="replaceable"><I>mode</I></CODE>)   <ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> V8 m4 configuration</I></PRE></BLOCKQUOTE></P><PCLASS="para">The <CODECLASS="replaceable"><I>mode</I></CODE> is of type octal.If this option is entirely missing, the default permissions are 0644.Beware of omitting just the <CODECLASS="replaceable"><I>mode</I></CODE> argument&nbsp;- if you do,the permissions become 0000, and <EMCLASS="emphasis">sendmail</EM> may not be able toread or write its own files.</P><PCLASS="para">The <CODECLASS="literal">TempFileMode</CODE> (<CODECLASS="literal">F</CODE>) option is not safe.  If specified from the command line,it may cause <EMCLASS="emphasis">sendmail</EM> to relinquish its <EMCLASS="emphasis">root</EM> privilege.</P></DIV></BLOCKQUOTE></DIV><DIVCLASS="refentry"><DIVCLASS="refnamediv"><H3CLASS="refname"><ACLASS="refname"NAME="SML2-CH-34-SECT-8-69">34.8.69 TimeZoneSpec (t)</A></H3><PCLASS="refpurpose">Set time zone</P>(All versions)</DIV><BLOCKQUOTE><DIVCLASS="refsect1"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-46971"></A><ACLASS="indexterm"NAME="AUTOID-46973"></A>Under System V UNIX, processes must look for the local time zone inthe environment variable <CODECLASS="literal">TZ</CODE>. Because <EMCLASS="emphasis">sendmail</EM>is often run as an SUID <EMCLASS="emphasis">root</EM> program, it cannot (and should not)trust its environment variables. Consequently, on System Vmachines it is necessary to use the <CODECLASS="literal">TimeZoneSpec</CODE> (<CODECLASS="literal">t</CODE>) option to give<EMCLASS="emphasis">sendmail</EM> the correct time zone information.</P><PCLASS="para">The forms for the <CODECLASS="literal">TimeZoneSpec</CODE> (<CODECLASS="literal">t</CODE>) option are as follows:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">Ot<CODECLASS="replaceable"><I>zone                           </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> configuration file (old mode)</I>-ot<CODECLASS="replaceable"><I>zone                          </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> command line (old mode)</I>O TimeZoneSpec=<CODECLASS="replaceable"><I>zone              </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> configuration file (beginning with V8.7)</I>-OTimeZoneSpec=<CODECLASS="replaceable"><I>zone              </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> command line (beginning with V8.7)</I>define(`confTIME_ZONE',`<CODECLASS="replaceable"><I>zone</I></CODE>')   <ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> V8 m4 configuration</I></PRE></BLOCKQUOTE></P><PCLASS="para">Here, the <CODECLASS="replaceable"><I>zone</I></CODE> is of type string and is usually three arguments in one:[34]the local abbreviation for standard time,the number of hours the local time differs from GMT,and the local abbreviation for daylight savings time.For example, on thewest coast of the United States, you might declare</P><BLOCKQUOTECLASS="footnote"><PCLASS="para">[34] This is actually a convention that is not used by all versions of UNIX.Consult your online documentation to find the correct form for your system.</P></BLOCKQUOTE><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">OtPST8PDT                             <ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> pre-V8.7 form</I>O TimeZoneSpec=PST8PDT                <ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> beginning with V8.7</I></PRE></BLOCKQUOTE></P><PCLASS="para">For pre-V8 <EMCLASS="emphasis">sendmail</EM> on System V, if the <CODECLASS="replaceable"><I>zone</I></CODE> argument isomitted or if this entire option is omitted, the default is the value compiled into your C languagelibrary (often the east coastof the United States, <CODECLASS="literal">EST5EDT</CODE>). For BSD the default is NULL.</P><PCLASS="para">Beginning with V8 <EMCLASS="emphasis">sendmail</EM>, if the entire <CODECLASS="literal">TimeZoneSpec</CODE> (<CODECLASS="literal">t</CODE>) optionis missing, the default is to unset the TZ environmental variable (use thesystem default).If <CODECLASS="replaceable"><I>zone</I></CODE> is missing, thedefault is to import the TZ variable from the environment.If <CODECLASS="replaceable"><I>zone</I></CODE> is present, time zone is set to that specified.</P><PCLASS="para">The system default varies depending on the operatingsystem. For BSD UNIX it is the value returned by the <EMCLASS="emphasis">gettimeofday</EM>(3)call. For SysV UNIX it is whatever was compiled into the C library (usuallyNew Jersey time).</P><PCLASS="para">For the <EMCLASS="emphasis">m4</EM> declaration, <CODECLASS="literal">zone</CODE> should be either a literalUSE_SYSTEM, which causes the entire option to be omitted, or aliteral USE_TZ, which causes the option to be declared butthe <CODECLASS="literal">zone</CODE> to be omitted (thus importing the TZ variablefrom the calling environment). Otherwise, a time zone declaration is as described above:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">define(`confTIME_ZONE',`USE_SYSTEM')  <ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> use system default</I>#O TimeZoneSpec=                      <ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> the same </I>define(`confTIME_ZONE',`USE_TZ')      <ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> use environment TZ</I>O TimeZoneSpec=                       <ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> the same </I>define(`confTIME_ZONE',`EST5EDT')     <ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> use EST5EDT</I>O TimeZoneSpec=EST5EDT                <ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> the same</I></PRE></BLOCKQUOTE></P><PCLASS="para">The <CODECLASS="literal">TimeZoneSpec</CODE> (<CODECLASS="literal">t</CODE>) option is not safe.  If specified from the command line,it may cause <EMCLASS="emphasis">sendmail</EM> to relinquish its <EMCLASS="emphasis">root</EM> privilege.</P></DIV></BLOCKQUOTE></DIV><DIVCLASS="refentry"><DIVCLASS="refnamediv"><H3CLASS="refname"><ACLASS="refname"NAME="SML2-CH-34-SECT-8-70">34.8.70 Timeout (r)</A></H3><PCLASS="refpurpose">Set timeouts</P>(All versions)</DIV><BLOCKQUOTE><DIVCLASS="refsect1"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-47042"></A><ACLASS="indexterm"NAME="AUTOID-47044"></A>Many events can take a long time to complete&nbsp;- so long, in fact, that they can cause<EMCLASS="emphasis">sendmail</EM> to appear to hang if they don't time out. For example,when reading commands or data from a remote SMTP connection,the other side can be so slow that it becomesnecessary for the local <EMCLASS="emphasis">sendmail</EM> to time out and breakthe connection. Similarly, when reading from its standard input,<EMCLASS="emphasis">sendmail</EM> may find that the program feeding it informationis taking so long that a timeout becomes necessary.</P><PCLASS="para">The V8 version of the <EMCLASS="emphasis">sendmail</EM> program has introduceddefaults for the amount of timeit waits under various circumstances.The forms of the <CODECLASS="literal">Timeout</CODE> (<CODECLASS="literal">r</CODE>) option are as follows:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">Or<CODECLASS="replaceable"><I>time                                          </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> configuration file (old form)</I>-or<CODECLASS="replaceable"><I>time                                         </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> command line (old form)</I>Or<CODECLASS="replaceable"><I>keyword=value,...                             </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> configuration file (V8.1)</I>-or<CODECLASS="replaceable"><I>keyword=value,...                            </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> command line (V8.1)</I>O Timeout=<CODECLASS="replaceable"><I>keyword=value,...                     </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> configuration file (V8.7 and above)</I>-OTimeout=<CODECLASS="replaceable"><I>keyword=value,...                     </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> command line (V8.7 and above)</I>define(`confREAD_TIMEOUT',`<CODECLASS="replaceable"><I>keyword=value,...</I></CODE>')  <ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> V8 m4 configuration (not V8.7 up)</I></PRE></BLOCKQUOTE></P><PCLASS="para">Prior to V8 <EMCLASS="emphasis">sendmail</EM>, only a single <CODECLASS="replaceable"><I>time</I></CODE> could be specified, whichset the timeout for all SMTP transactions.Beginning with V8 <EMCLASS="emphasis">sendmail</EM>, a list of <CODECLASS="replaceable"><I>keyword</I></CODE> and<CODECLASS="replaceable"><I>value</I></CODE> pairs can be specified that individually set a wide assortment of timeouts.The recognized <CODECLASS="literal">keyword</CODE> words are listed in<ACLASS="xref"HREF="ch34_08.htm#SML2-CH-34-TAB-17"TITLE="Timeout Option Keywords">Table 34.18</A>.The default and minimum <CODECLASS="replaceable"><I>value</I></CODE> for each in described in the individual section.</P><TABLECLASS="table"><CAPTIONCLASS="table"><ACLASS="title"NAME="SML2-CH-34-TAB-17">Table 34.18: Timeout Option Keywords</A></CAPTION><THEADCLASS="thead"><TRCLASS="row"VALIGN="TOP"><THCLASS="entry"ALIGN="LEFT"ROWSPAN="1"COLSPAN="1">Keyword</TH><THCLASS="entry"ALIGN="LEFT"ROWSPAN="1"COLSPAN="1"></TH><THCLASS="entry"ALIGN="LEFT"ROWSPAN="1"COLSPAN="1">Meaning</TH></TR></THEAD><TBODYCLASS="tbody"><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">command</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch34_08.htm#SML2-CH-34-SECT-8-70-1"TITLE="Timeout.command">Section 34.8.70.1</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><PCLASS="para">Wait for the next command</P></TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">connect</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch34_08.htm#SML2-CH-34-SECT-8-70-2"TITLE="Timeout.connect">Section 34.8.70.2</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><PCLASS="para">Wait for <EMCLASS="emphasis">connect</EM>(2) to return</P></TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">datablock</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch34_08.htm#SML2-CH-34-SECT-8-70-3"TITLE="Timeout.datablock">Section 34.8.70.3</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><PCLASS="para">Wait for each DATA block read</P></TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">datafinal</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch34_08.htm#SML2-CH-34-SECT-8-70-4"TITLE="Timeout.datafinal">Section 34.8.70.4</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><PCLASS="para">Wait for acknowledgment of final dot</P></TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">datainit</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch34_08.htm#SML2-CH-34-SECT-8-70-5"TITLE="Timeout.datainit">Section 34.8.70.5</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><PCLASS="para">Wait for DATA acknowledgment</P></TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">fileopen</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch34_08.htm#SML2-CH-34-SECT-8-70-6"TITLE="Timeout.fileopen">Section 34.8.70.6</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><PCLASS="para">Wait an NFS file to open (V8.7 and above)</P></TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">helo</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch34_08.htm#SML2-CH-34-SECT-8-70-7"TITLE="Timeout.helo">Section 34.8.70.7</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><PCLASS="para">Wait for HELO or EHLO</P></TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">hoststatus</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch34_08.htm#SML2-CH-34-SECT-8-70-8"TITLE="Timeout.hoststatus">Section 34.8.70.8</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><PCLASS="para">Duration of host status (V8.8 and above)</P></TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">iconnect</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch34_08.htm#SML2-CH-34-SECT-8-70-9"TITLE="Timeout.iconnect">Section 34.8.70.9</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><PCLASS="para">Wait for first <EMCLASS="emphasis">connect</EM>(2) (V8.8 and above)</P></TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">ident</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch34_08.htm#SML2-CH-34-SECT-8-70-10"TITLE="Timeout.ident">Section 34.8.70.10</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><PCLASS="para">Wait for RFC1413 identification protocol</P></TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">initial</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch34_08.htm#SML2-CH-34-SECT-8-70-11"TITLE="Timeout.initial">Section 34.8.70.11</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><PCLASS="para">Wait for initial greeting message</P></TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">mail</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch34_08.htm#SML2-CH-34-SECT-8-70-12"TITLE="Timeout.mail">Section 34.8.70.12</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><PCLASS="para">Wait for MAIL acknowledgment</P></TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">misc</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch34_08.htm#SML2-CH-34-SECT-8-70-13"TITLE="Timeout.misc">Section 34.8.70.13</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><PCLASS="para">Wait for other SMTP commands</P></TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">queuereturn</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch34_08.htm#SML2-CH-34-SECT-8-70-14"TITLE="Timeout.queuereturn">Section 34.8.70.14</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><PCLASS="para">Bounce if still undelivered (V8.7 and above)</P></TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">queuewarn</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch34_08.htm#SML2-CH-34-SECT-8-70-15"TITLE="Timeout.queuewarn">Section 34.8.70.15</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><PCLASS="para">Warn if still undelivered (V8.7 and above)</P></TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">quit</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch34_08.htm#SML2-CH-34-SECT-8-70-16"TITLE="Timeout.quit">Section 34.8.70.16</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><PCLASS="para">Wait for QUIT acknowledgment</P></TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">rcpt</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch34_08.htm#SML2-CH-34-SECT-8-70-17"TITLE="Timeout.rcpt">Section 34.8.70.17</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><PCLASS="para">Wait for RCPT acknowledgment</P></TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">rset</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><ACLASS="xref"HREF="ch34_08.htm#SML2-CH-34-SECT-8-70-18"TITLE="Timeout.rset">Section 34.8.70.18</A></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><PCLASS="para">Wait for RSET acknowledgment</P></TD></TR></TBODY></TABLE><PCLASS="para">&#13;The minimums are not enforced but are rather the minimums recommendedby RFC1123, section 5.3.2.[35]The <CODECLASS="replaceable"><I>value</I></CODE> is of type time.The default,if a unit character is omitted, is minutes.For the <CODECLASS="literal">queuewarn</CODE> and <CODECLASS="literal">queuereturn</CODE> keywords, however, the defaults are hours and days, respectively.Note that some of the default values may seem overly long. This is intentionalbecause some events can legitimately take a very long time. Consider, for example,a misconfigured DNS server. If you time out too soon, your performancewill actually decrease because the timeouts will cause retransmits.</P><BLOCKQUOTECLASS="footnote"><PCLASS="para">[35] Note that the defaults are intentionally higher than the recommendedminimums. Setting timeouts too low can cause mail to fail unnecessarily.</P></BLOCKQUOTE><PCLASS="para">For the V8.7 and above <EMCLASS="emphasis">m4</EM> technique,each keyword is declared with its corresponding <CODECLASS="literal">confTO</CODE>_ expression.For example, the keyword <CODECLASS="literal">initial</CODE> is declared like this:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">define(`confTO_INITIAL',`5m')                  <ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> V8 m4 configuration</I></PRE></BLOCKQUOTE></P><PCLASS="para">The particular <CODECLASS="literal">confTO</CODE>_ expression and its correspondingdefault value are listed with each keyword.</P><PCLASS="para">For compatibility with old configuration files,if no <CODECLASS="replaceable"><I>keyword</I></CODE><CODECLASS="literal">=</CODE> is specified,timeouts for the <CODECLASS="literal">mail</CODE>, <CODECLASS="literal">rcpt</CODE>,<CODECLASS="literal">datainit</CODE>, <CODECLASS="literal">datablock</CODE>,<CODECLASS="literal">datafinal</CODE>, and <CODECLASS="literal">command</CODE> keywords are set to the indicated value:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">Or2h              <ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> set them to two hours</I></PRE></BLOCKQUOTE></P><PCLASS="para">An example of the <CODECLASS="literal">r</CODE> option with <CODECLASS="replaceable"><I>keyword</I></CODE><CODECLASS="literal">=</CODE> pairslooks like this:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">Orrcpt=25m,datablock=3h</PRE></BLOCKQUOTE></P><PCLASS="para">With the new V8.7 form of the <CODECLASS="literal">Timeout</CODE> option, individual timeoutscan be listed more attractively like this:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">O Timeout.rcpt      = 25mO Timeout.datablock =  3h</PRE></BLOCKQUOTE></P><PCLASS="para">For the above two examplesthe timeout for acknowledgment of the SMTP RCPTcommand (list a recipient) is 25 minutes and the timeout for acknowledgment of receipt of each lineof the mail message is three hours; all the others that are not specifiedassume the default values.</P><PCLASS="para">The <CODECLASS="literal">Timeout</CODE> (<CODECLASS="literal">r</CODE>) option is not safe.  If specified from the command line,it may cause <EMCLASS="emphasis">sendmail</EM> to relinquish its <EMCLASS="emphasis">root</EM> privilege.</P><DIVCLASS="refsect2"><H4CLASS="refsect2"><ACLASS="title"NAME="SML2-CH-34-SECT-8-70-1">34.8.70.1 Timeout.command</A></H4><PCLASS="para">When local <EMCLASS="emphasis">sendmail</EM> is running as an SMTP server,it acknowledges any SMTP command sentto it by the other host and then waits for the next command.The amount of time the local <EMCLASS="emphasis">sendmail</EM>waits for each command is definedwith the <CODECLASS="literal">command</CODE> keyword. The default is one hour, andthe minimum is specified as five minutes.The <EMCLASS="emphasis">m4</EM> technique should use <CODECLASS="literal">confTO_COMMAND</CODE> for whichnot default is defined.If a command is not received in time, the local <EMCLASS="emphasis">sendmail</EM>believes that the connection has hung and shuts it down.&#13;</P></DIV><DIVCLASS="refsect2"><H4CLASS="refsect2"><ACLASS="title"NAME="SML2-CH-34-SECT-8-70-2">34.8.70.2 Timeout.connect</A></H4><PCLASS="para">When <EMCLASS="emphasis">sendmail</EM> attempts to establish a network connectionto another host, it uses the <EMCLASS="emphasis">connect</EM>(2) system call.If the connection is going to fail, that system call willtime out after an amount time that varies with the operatingsystem. With Linux, for example, the timeout is 90 minutes,whereas for other versions of UNIX it is typically 5 minutes.</P><PCLASS="para">When the amount of time to wait for a connection to fail isof concern, you may override the system value with the<CODECLASS="literal">connect</CODE> keyword to the <CODECLASS="literal">Timeout</CODE> option:[36]</P><BLOCKQUOTECLASS="footnote"><PCLASS="para">[36] Note that you can decrease the system defined timeout, butyou cannot increase it.</P></BLOCKQUOTE><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">O Timeout.connect=3m		         <ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> V8.8 and above</I>define(`confTO_CONNECT', 3m)	         <ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> V8 m4 technique</I></PRE></BLOCKQUOTE></P><PCLASS="para">The default, if no timeout is specified, is to use thesystem imposed timeout. No default is defined for the <EMCLASS="emphasis">m4</EM> technique.</P><PCLASS="para">Note that if the <EMCLASS="emphasis">connect</EM>(2) call times out, deliverywill be deferred until the next queue run. If you wish the<EMCLASS="emphasis">connect</EM>(2) to be tried again (as you might fora dial-on-demand machine), you should investigate the<CODECLASS="literal">DialDelay</CODE> option (see <ACLASS="xref"HREF="ch34_08.htm#SML2-CH-34-SECT-8-17"TITLE="">Section 34.8.17</A>).&#13;</P></DIV><DIVCLASS="refsect2"><H4CLASS="refsect2"><ACLASS="title"NAME="SML2-CH-34-SECT-8-70-3">34.8.70.3 Timeout.datablock</A></H4><PCLASS="para">The local <EMCLASS="emphasis">sendmail</EM> then buffers the mail message and sends it to the receivingsite one line at a time. The amount of time that the receiving <EMCLASS="emphasis">sendmail</EM>waits for a read to complete is setwith the <CODECLASS="literal">datablock</CODE> keyword.[37]The default value is one hour, and the specified minimum is three minutes.The <EMCLASS="emphasis">m4</EM> technique should use <CODECLASS="literal">confTO_DATABLOCK</CODE>, which has no default.&#13;</P><BLOCKQUOTECLASS="footnote"><PCLASS="para">[37] The timeout for writes by the sending <EMCLASS="emphasis">sendmail</EM> are timed out on the basis of the number of recipients.</P></BLOCKQUOTE></DIV><DIVCLASS="refsect2"><H4CLASS="refsect2"><ACLASS="title"NAME="SML2-CH-34-SECT-8-70-4">34.8.70.4 Timeout.datafinal</A></H4><PCLASS="para">After the entire mail message has been transmitted, the local<EMCLASS="emphasis">sendmail</EM> sends a lone dot to say that it is done, thenwaits for the receiving <EMCLASS="emphasis">sendmail</EM> to acknowledgeacceptance of that dot:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">250 Mail accepted</PRE></BLOCKQUOTE></P><PCLASS="para">The amount of time that the local <EMCLASS="emphasis">sendmail</EM> waits for acknowledgmentthat the mail message was received is set with the <CODECLASS="literal">datafinal</CODE> keyword.The default value is one hour, and the specified minimum is 10 minutes.The <EMCLASS="emphasis">m4</EM> technique should use <CODECLASS="literal">confTO_DATAFINAL</CODE>, which has no default.If the value is shorter than the time actually neededfor the receiving site to deliver the message, the local <EMCLASS="emphasis">sendmail</EM>times out before seeing the &quot;Mail accepted&quot; message when, in fact,the mail was accepted. This can lead to the local <EMCLASS="emphasis">sendmail</EM>wrongly attempting to deliver the message later for a second time.&#13;</P></DIV><DIVCLASS="refsect2"><H4CLASS="refsect2"><ACLASS="title"NAME="SML2-CH-34-SECT-8-70-5">34.8.70.5 Timeout.datainit</A></H4><PCLASS="para">After all the recipients have been specified, the local <EMCLASS="emphasis">sendmail</EM>declares that it is ready to send the mail message itself.It issues the SMTP DATA command to the other site:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">DATA</PRE></BLOCKQUOTE></P><PCLASS="para">The local <EMCLASS="emphasis">sendmail</EM> then waits for acknowledgment, whichlooks like this:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">354 Enter mail, end with &quot;.&quot; on a line by itself</PRE></BLOCKQUOTE></P><PCLASS="para">The amount of time that the local <EMCLASS="emphasis">sendmail</EM> waits for acknowledgmentof its DATA command is set with the <CODECLASS="literal">datainit</CODE> keyword. The defaultvalue is five minutes, and the specified minimum is two minutes.The <EMCLASS="emphasis">m4</EM> technique should use <CODECLASS="literal">confTO_DATAINIT</CODE>, which has no default.&#13;</P></DIV><DIVCLASS="refsect2"><H4CLASS="refsect2"><ACLASS="title"NAME="SML2-CH-34-SECT-8-70-6">34.8.70.6 Timeout.fileopen</A></H4><PCLASS="para">If a directory is remotely mounted and the server is downor not responding, an attempt to open a file in that directorycan hang. Beginning with V8.7, the<CODECLASS="literal">fileopen</CODE> keyword sets the amount of timeto wait for a remote open to complete.[38]The default is zero seconds, which sets no limit.The <EMCLASS="emphasis">m4</EM> technique should use <CODECLASS="literal">confTO_FILEOPEN</CODE>, which has no default.&#13;</P><BLOCKQUOTECLASS="footnote"><PCLASS="para">[38] Note that this works only if the file system is mounted withthe <CODECLASS="literal">intr</CODE> mount option.</P></BLOCKQUOTE></DIV><DIVCLASS="refsect2"><H4CLASS="refsect2"><ACLASS="title"NAME="SML2-CH-34-SECT-8-70-7">34.8.70.7 Timeout.helo</A></H4><PCLASS="para">After the greeting, the local <EMCLASS="emphasis">sendmail</EM> sends a HELO (or EHLO to getESMTP) message toidentify itself. That message looks something like this:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">HELO here.us.edu</PRE></BLOCKQUOTE></P><PCLASS="para">The other site then replies with acknowledgment of the local HELO or EHLO:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">250 there.dc.gov  Hello here.us.edu, pleased to meet you</PRE></BLOCKQUOTE></P><PCLASS="para">The amount of time the local <EMCLASS="emphasis">sendmail</EM> waits for the othersite to acknowledge the local HELO or EHLO is set with the <CODECLASS="literal">helo</CODE> keyword.The default value is five minutes. There is no specified minimum,but we recommend no less than five minutes (because some sites useDNS to validate the hostname).The <EMCLASS="emphasis">m4</EM> technique should use <CODECLASS="literal">confTO_HELO</CODE>, which has no default.</P></DIV><DIVCLASS="refsect2"><H4CLASS="refsect2"><ACLASS="title"NAME="SML2-CH-34-SECT-8-70-8">34.8.70.8 Timeout.hoststatus</A></H4><PCLASS="para">When processing the queue, <EMCLASS="emphasis">sendmail</EM> saves the connection status ofeach host to which it connects and each host to which it fails to connect. It does thisbecause an unsuccessful host should not be tried again duringthe same queue run. This makes sense when you consider that failurestend to remain failures for a while.</P><PCLASS="para">At sites that process huge queues, on the other hand, such behavior maynot be appropriate. If it takes hours (rather than minutes) to processthe queue, the likelihood increases that a previously failed connectionmay succeed. For such sites, V8.8 <EMCLASS="emphasis">sendmail</EM> has introducedthe <CODECLASS="literal">Timeout.hoststatus</CODE> option:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">O Timeout.hoststatus=<CODECLASS="replaceable"><I>interval                  	</I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> V8.8 and above</I>-OTimeout.hoststatus=<CODECLASS="replaceable"><I>interval			</I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> V8.8 and above</I>define(`confTO_HOSTSTATUS', <CODECLASS="replaceable"><I>interval</I></CODE>)		<ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> V8 m4 techniqueue</I></PRE></BLOCKQUOTE></P><PCLASS="para">Here, <CODECLASS="replaceable"><I>interval</I></CODE> is of type time. If <CODECLASS="replaceable"><I>interval</I></CODE> is present, it specifies the length of time informationabout a host will be considered valid.  If a queue run finishes faster than this interval,it has no effect. But when queue runs take longer than this interval,a previously down host will be given a second try if it appears in thequeue again.</P><PCLASS="para">If <CODECLASS="replaceable"><I>interval</I></CODE> is missing, it is interpreted as zero, and no hostinformation is ever saved. If the entire option is missing, the defaultis 30 minutes.The <EMCLASS="emphasis">m4</EM> technique should use <CODECLASS="literal">confTO_HOSTSTATUS</CODE>, which has no default.&#13;</P></DIV><DIVCLASS="refsect2"><H4CLASS="refsect2"><ACLASS="title"NAME="SML2-CH-34-SECT-8-70-9">34.8.70.9 Timeout.iconnect</A></H4><PCLASS="para">When <EMCLASS="emphasis">sendmail</EM> attempts to establish a network connectionto another host, it uses the <EMCLASS="emphasis">connect</EM>(2) system call.If the connection is going to fail, that system call willtime out after an amount of time that varies with the operatingsystem. You can override the system timeout with the <CODECLASS="literal">connect</CODE> keyword (see <ACLASS="xref"HREF="ch34_08.htm#SML2-CH-34-SECT-8-70-2"TITLE="Timeout.connect">Section 34.8.70.2</A>) to the <CODECLASS="literal">Timeout</CODE> option.</P><PCLASS="para">When outgoing mail is first processed, mail to responsivehosts should precede mail to sluggish hosts. To understandwhy, consider that all mail is processed serially during each queue run.If a sluggish host precedes all the other hosts in the queue, thoseother hosts will not even be tried until the sluggish host finishesor times out.With this in mind, the very first time <EMCLASS="emphasis">sendmail</EM> attemptsto deliver a message, it should enforce a shorter <EMCLASS="emphasis">connect</EM>(2)timeout than it should for latter attempts.</P><PCLASS="para">Beginning with V8.8 <EMCLASS="emphasis">sendmail</EM>, you can set an initial<EMCLASS="emphasis">connect</EM>(2) timeout with the <CODECLASS="literal">iconnect</CODE> keywordto the <CODECLASS="literal">Timeout</CODE> option:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">O Timeout.iconnect=10s              <ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> time out first connection</I>O Timeout.connect=3m                <ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> time out all others</I>define(`confTO_ICONNECT', `10s')    <ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> v8 m4 technique</I></PRE></BLOCKQUOTE></P><PCLASS="para">The default, if no <CODECLASS="literal">Timeout.iconnect</CODE> is specified or if the entire<CODECLASS="literal">Timeout.iconnect</CODE> option is omitted, is to time out the first connectionthe same as the timeout for all connections.The <EMCLASS="emphasis">m4</EM> technique should use <CODECLASS="literal">confTO_ICONNECT</CODE>, for which there is no default.The <CODECLASS="literal">N</CODE> line in the <CODECLASS="literal">qf</CODE> file (see <ACLASS="xref"HREF="ch23_09.htm#SML2-CH-23-SECT-9-10"TITLE="">Section 23.9.10</A>)determines whether this is the first attempt or not. If the value in that lineis zero, this is the first delivery attempt.&#13;</P></DIV><DIVCLASS="refsect2"><H4CLASS="refsect2"><ACLASS="title"NAME="SML2-CH-34-SECT-8-70-10">34.8.70.10 Timeout.ident</A></H4><PCLASS="para">The <EMCLASS="emphasis">sendmail</EM> daemon queries every outside connecting host with theRFC1413 identification protocol to record the identityof the user at the other end who made the connection and to verifythe true name of the remote connecting host.The default timeout is to wait 30 seconds for a response.The <CODECLASS="literal">ident</CODE> keyword is used to change this timeout.If your site accepts mail from PCs running SMTPsoftware, you may need todisable this feature.Some PCs get stuckwhen queried with the RFC1413 identification protocol.If the timeout is zero, the ident protocol is disabled.The <EMCLASS="emphasis">m4</EM> technique should use <CODECLASS="literal">confTO_IDENT</CODE>, for which thereis no default.&#13;</P></DIV><DIVCLASS="refsect2"><H4CLASS="refsect2"><ACLASS="title"NAME="SML2-CH-34-SECT-8-70-11">34.8.70.11 Timeout.initial</A></H4><PCLASS="para">The amount of time to wait for the initial greeting message. Thismessage is printed by the remote site when it first makesits connection. The greeting message always starts with 220 andlooks something like this:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">220 there.dc.gov Sendmail 8.1/3x ready at ...</PRE></BLOCKQUOTE></P><PCLASS="para">&#13;The default for the greeting wait and the recommended minimum are bothfive minutes.[39]The <EMCLASS="emphasis">m4</EM> technique should use <CODECLASS="literal">confTO_INITIAL</CODE>, for whichthere is no default.&#13;</P><BLOCKQUOTECLASS="footnote"><PCLASS="para">[39] Because DNS name resolution can time out and retry and can actuallytake up to five minutes!</P></BLOCKQUOTE></DIV><DIVCLASS="refsect2"><H4CLASS="refsect2"><ACLASS="title"NAME="SML2-CH-34-SECT-8-70-12">34.8.70.12 Timeout.mail</A></H4><PCLASS="para">The local <EMCLASS="emphasis">sendmail</EM> next sends the address of the sender (theenvelope sender address) with an SMTP MAIL command:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">MAIL From:&lt;you@here.us.edu&gt;</PRE></BLOCKQUOTE></P><PCLASS="para">The local <EMCLASS="emphasis">sendmail</EM> then waits for acknowledgment, whichlooks like this:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">250 &lt;you@here.us.edu&gt;... Sender ok</PRE></BLOCKQUOTE></P><PCLASS="para">The amount of time that the local <EMCLASS="emphasis">sendmail</EM> waits for acknowledgmentof its MAIL command is set with the <CODECLASS="literal">mail</CODE> keyword. The defaultvalue is 10 minutes, and the specified minimum is five minutes.The <EMCLASS="emphasis">m4</EM> technique should use <CODECLASS="literal">confTO_MAIL</CODE>, for which thereis no default.&#13;</P></DIV><DIVCLASS="refsect2"><H4CLASS="refsect2"><ACLASS="title"NAME="SML2-CH-34-SECT-8-70-13">34.8.70.13 Timeout.misc</A></H4><PCLASS="para">During the course of mail transfer, the local <EMCLASS="emphasis">sendmail</EM> mayissue short miscellaneous commands. Examples are NOOP (whichstands for no operation) and VERB (which tells the otherside to enter verbose mode).The time that the local <EMCLASS="emphasis">sendmail</EM>waits for acknowledgment of these miscellaneous commands is definedwith the <CODECLASS="literal">misc</CODE> keyword. The default is two minutes, andno minimum is specified.The <EMCLASS="emphasis">m4</EM> technique should use <CODECLASS="literal">confTO_MISC</CODE>, for which thereis no default.&#13;</P></DIV><DIVCLASS="refsect2"><H4CLASS="refsect2"><ACLASS="title"NAME="SML2-CH-34-SECT-8-70-14">34.8.70.14 Timeout.queuereturn</A></H4><PCLASS="para">That this keyworddetermines a mail message's lifetime in the queue. Beginning with V8.7, this <CODECLASS="literal">queuereturn</CODE> keyword is used to set the amountof time a message must wait in the queue before it is bounced as nondeliverable.Either it can be expressed as an interval of time:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">O Timeout.queuereturn=5dO Timeout.queuereturn.*=5d          <ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> the same</I>define(`confTO_QUEUERETURN',`5d')   <ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> V8 m4 technique</I></PRE></BLOCKQUOTE></P><PCLASS="para">or it can be tuned on the basis of any of three possible levelsof priority that a mail message may have. That is, both of the aboveset all three levels to five days, whereas the following tunes eachlevel to three, five, and six days, respectively:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">O Timeout.queuereturn.urgent=3dO Timeout.queuereturn.normal=5dO Timeout.queuereturn.non-urgent=6ddefine(`confTO_QUEUERETURN_URGENT',`3d')       <ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> V8 m4 technique</I>define(`confTO_QUEUERETURN_NORMAL',`5d')       <ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> V8 m4 technique</I>define(`confTO_QUEUERETURN_NONURGENT',`6d')    <ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> V8 m4 technique</I></PRE></BLOCKQUOTE></P><PCLASS="para">The default for the <EMCLASS="emphasis">m4</EM> configuration technique is to bounce all messagesthat remain in the queue for more than four days.</P><PCLASS="para">The keywords <CODECLASS="literal">urgent</CODE>, <CODECLASS="literal">normal</CODE>, and <CODECLASS="literal">non-urgent</CODE> correspond to the <CODECLASS="literal">Precedence:</CODE> header from the mail message. When the numeric equivalent of the <CODECLASS="literal">Precedence:</CODE> header as translated from the <CODECLASS="literal">P</CODE> line of the configuration file (see <ACLASS="xref"HREF="ch35_08.htm"TITLE="Precedence">Section 35.8</A>) is negative, the message is classified as nonurgent. When it is greater than zero, the message is classified as urgent. Otherwise, it is normal.</P><PCLASS="para">In addition to a message's precedence, a new <CODECLASS="literal">Priority:</CODE>header is available (see <ACLASS="xref"HREF="ch35_10.htm#SML2-CH-35-SECT-10-24"TITLE="">Section 35.10.24, Priority:</A>)to specify the message priority and therebybypass the value obtained from the <CODECLASS="literal">Precedence:</CODE> header.</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">Priority: urgentPriority: normalPriority: non-urgent</PRE></BLOCKQUOTE></P><PCLASS="para">There is currently no way to specify a <CODECLASS="literal">Priority:</CODE>header's value from the <EMCLASS="emphasis">sendmail</EM> command line.&#13;</P></DIV><DIVCLASS="refsect2"><H4CLASS="refsect2"><ACLASS="title"NAME="SML2-CH-34-SECT-8-70-15">34.8.70.15 Timeout.queuewarn</A></H4><PCLASS="para">When a message is queued, <EMCLASS="emphasis">sendmail</EM> sends a message to thesender explaining that the original message could not bedelivered right away and that <EMCLASS="emphasis">sendmail</EM> will keep trying.Beginning with V8.7, this <CODECLASS="literal">queuewarn</CODE> keyword is used to set the amountof time a message must wait in the queue before that explanationis mailed. Either it can be expressed as an interval of time:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">O Timeout.queuewarn=4dO Timeout.queuewarn.*=4d          <ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> the same</I>define(`confTO_QUEUEWARN',`4d')   <ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> V8 m4 technique</I></PRE></BLOCKQUOTE></P><PCLASS="para">or it can be tuned on the basis of any of three possible levelsof priority a mail message may have. That is, both of the aboveset all three levels to four days, whereas the following tunes eachlevel to one, two, and four days, respectively:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">O Timeout.queuewarn.urgent=1dO Timeout.queuewarn.normal=2dO Timeout.queuewarn.non-urgent=4ddefine(`confTO_QUEUEWARN_URGENT',`1d')       <ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> V8 m4 technique</I>define(`confTO_QUEUEWARN_NORMAL',`2d')       <ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> V8 m4 technique</I>define(`confTO_QUEUEWARN_NONURGENT',`4d')    <ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> V8 m4 technique</I></PRE></BLOCKQUOTE></P><PCLASS="para">&#13;The defaults for the <EMCLASS="emphasis">m4</EM> configuration technique are to send a warningfor normal mail after four hours, for urgent mail after one hour, andfor nonurgent mail after twelve hours.</P><PCLASS="para">The keywords <CODECLASS="literal">urgent</CODE>, <CODECLASS="literal">normal</CODE>, and <CODECLASS="literal">non-urgent</CODE> correspond to the <CODECLASS="literal">Precedence:</CODE> header from the mail message. When the numeric equivalent of the <CODECLASS="literal">Precedence:</CODE> header as translated from the <CODECLASS="literal">P</CODE> line of the configuration file (see <ACLASS="xref"HREF="ch35_08.htm"TITLE="Precedence">Section 35.8</A>) is negative, the message is classified as nonurgent. When it is greater than zero, the message is classified as urgent. Otherwise, it is normal.</P><PCLASS="para">In addition to a message's precedence, a new <CODECLASS="literal">Priority:</CODE>header is available (see <ACLASS="xref"HREF="ch35_10.htm#SML2-CH-35-SECT-10-24"TITLE="">Section 35.10.24</A>)to specify the message priority and therebybypass the value obtained from the <CODECLASS="literal">Precedence:</CODE> header:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">Priority: urgentPriority: normalPriority: non-urgent</PRE></BLOCKQUOTE></P><PCLASS="para">There is currently no way to specify a <CODECLASS="literal">Priority:</CODE>header's value from the <EMCLASS="emphasis">sendmail</EM> command line.&#13;</P></DIV><DIVCLASS="refsect2"><H4CLASS="refsect2"><ACLASS="title"NAME="SML2-CH-34-SECT-8-70-16">34.8.70.16 Timeout.quit</A></H4><PCLASS="para">When the local <EMCLASS="emphasis">sendmail</EM> is finished and wishes to break theconnection, it sends the SMTP QUIT command.</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">QUIT</PRE></BLOCKQUOTE></P><PCLASS="para">The other side acknowledges, and the connection is terminated:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">221 there.dc.gov delivering mail</PRE></BLOCKQUOTE></P><PCLASS="para">The time the local <EMCLASS="emphasis">sendmail</EM>waits for acknowledgment of the QUIT command is definedwith the <CODECLASS="literal">quit</CODE> keyword. The default is two minutes, andno minimum is specified.The <EMCLASS="emphasis">m4</EM> technique should use <CODECLASS="literal">confTO_QUIT</CODE>, for which thereis no default.&#13;</P></DIV><DIVCLASS="refsect2"><H4CLASS="refsect2"><ACLASS="title"NAME="SML2-CH-34-SECT-8-70-17">34.8.70.17 Timeout.rcpt</A></H4><PCLASS="para">Next, the local <EMCLASS="emphasis">sendmail</EM> issues one RCPT command to specifyeach envelope recipient. One such RCPT line might look like this:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">RCPT To:&lt;them@there.dc.gov&gt;</PRE></BLOCKQUOTE></P><PCLASS="para">The local <EMCLASS="emphasis">sendmail</EM> then waits for acknowledgment, whichlooks like this:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">250 &lt;them@there.dc.gov&gt;... Recipient ok</PRE></BLOCKQUOTE></P><PCLASS="para">&#13;The amount of time that the local <EMCLASS="emphasis">sendmail</EM> waits for acknowledgmentof each RCPT command is set with the <CODECLASS="literal">rcpt</CODE> keyword. The defaultvalue is one hour,[40]and the specified minimum is five minutes.The <EMCLASS="emphasis">m4</EM> technique should use <CODECLASS="literal">confTO_RCPT</CODE>, for which thereis no default.&#13;</P><BLOCKQUOTECLASS="footnote"><PCLASS="para">[40] This timeout should be generously long because a recipientmay be the name of a mailing list and the other side may takea long time to expand all the names in that list before replying.</P></BLOCKQUOTE></DIV><DIVCLASS="refsect2"><H4CLASS="refsect2"><ACLASS="title"NAME="SML2-CH-34-SECT-8-70-18">34.8.70.18 Timeout.rset</A></H4><PCLASS="para">If connection caching is enabled (see option <CODECLASS="literal">k</CODE>),the local <EMCLASS="emphasis">sendmail</EM> sendsan SMTP RSET command to reset the other side.The time the local <EMCLASS="emphasis">sendmail</EM>waits for acknowledgment of the RSET command is definedwith the <CODECLASS="literal">rset</CODE> keyword. The default is five minutes, andno minimum is specified.The <EMCLASS="emphasis">m4</EM> technique should use <CODECLASS="literal">confTO_RSET</CODE>, for which there is no default.</P></DIV></DIV></BLOCKQUOTE></DIV><DIVCLASS="refentry"><DIVCLASS="refnamediv"><H3CLASS="refname"><ACLASS="refname"NAME="SML2-CH-34-SECT-8-71">34.8.71 TryNullMXList (w)</A></H3><PCLASS="refpurpose">Use A if no best MX record</P>(V8.1 and above)</DIV><BLOCKQUOTE><DIVCLASS="refsect1"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-47540"></A><ACLASS="indexterm"NAME="AUTOID-47542"></A><ACLASS="indexterm"NAME="AUTOID-47544"></A>RFC974 says that when mail is being sent from a hostthat is an MX record for the receiving host,all MX records of a preference equal to or greater than the sendinghost must be discarded.In some circumstances this can leave no usable MX records.In this absence, V8 <EMCLASS="emphasis">sendmail</EM> bases its action on the settingof its <CODECLASS="literal">TryNullMXList</CODE> (<CODECLASS="literal">w</CODE>) option.</P><PCLASS="para">The forms of the <CODECLASS="literal">TryNullMXList</CODE> (<CODECLASS="literal">w</CODE>) option are as follows:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">Ow<CODECLASS="replaceable"><I>bool                                </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> configuration file (V8.6)</I>-ow<CODECLASS="replaceable"><I>bool                               </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> command line (V8.6)</I>O TryNullMXList=<CODECLASS="replaceable"><I>bool                  </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> configuration file (beginning with V8.7)</I>-OTryNullMXList=<CODECLASS="replaceable"><I>bool                  </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> command line (beginning with V8.7)</I>define(`confTRY_NULL_MX_LIST',<CODECLASS="replaceable"><I>bool</I></CODE>)   <ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> V8 m4 configuration</I></PRE></BLOCKQUOTE></P><PCLASS="para">The <CODECLASS="literal">bool</CODE> is of type Boolean.If it is false, <EMCLASS="emphasis">sendmail</EM> bounces the mail message with the following error message:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">MX list for <ICLASS="lineannotation">otherhost</I> points back to <ICLASS="lineannotation">thishost</I></PRE></BLOCKQUOTE></P><PCLASS="para">If it is true, <EMCLASS="emphasis">sendmail</EM> looks to see whether the receiving host has anA record. If it does, V8 <EMCLASS="emphasis">sendmail</EM> tries to deliver the mail messagedirectly to that host's A record address. If the host doesn't have an A record, <EMCLASS="emphasis">sendmail</EM> bounces the message.See <ACLASS="xref"HREF="ch21_03.htm#SML2-CH-21-SECT-3-7"TITLE="Ambiguous MX Records">Section 21.3.7, "Ambiguous MX Records"</A> in <ACLASS="xref"HREF="ch21_01.htm"TITLE="DNS and sendmail">Chapter 21, <CITECLASS="chapter">DNS and sendmail</CITE></A>,for a full discussion of why one setting may be preferable over the other.The default with the V8 <EMCLASS="emphasis">m4</EM> configuration technique is false.</P><PCLASS="para">The <CODECLASS="literal">TryNullMXList</CODE> (<CODECLASS="literal">w</CODE>) option is not safe as of V8.8.4. If it is specified from the command line, may cause <EMCLASS="emphasis">sendmail</EM> to relinquish its <EMCLASS="emphasis">root</EM> privilege.</P></DIV></BLOCKQUOTE></DIV><DIVCLASS="refentry"><DIVCLASS="refnamediv"><H3CLASS="refname"><ACLASS="refname"NAME="SML2-CH-34-SECT-8-72">34.8.72 UnixFromLine or $l</A></H3><PCLASS="refpurpose">Define the From format</P>(All versions)</DIV><BLOCKQUOTE><DIVCLASS="refsect1"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-47592"></A><ACLASS="indexterm"NAME="AUTOID-47595"></A><ACLASS="indexterm"NAME="AUTOID-47597"></A>The <CODECLASS="literal">UnixFromLine</CODE> option replaces the pre-V8.7 <CODECLASS="literal">$l</CODE> macro.It has two functions:</P><ULCLASS="itemizedlist"><LICLASS="listitem"><PCLASS="para">It defines the look of the five character &quot;<CODECLASS="literal">From&nbsp;</CODE>&quot;  header line needed by UUCP software.</P></LI><LICLASS="listitem"><PCLASS="para">It defines the format of the line that is used to separate one messagefrom another in a file of many mail messages.</P></LI></UL><PCLASS="para">The forms of the <CODECLASS="literal">UnixFromLine</CODE> option and <CODECLASS="literal">$l</CODE> macroare as follows:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">Dl<CODECLASS="replaceable"><I>format</I></CODE>                           <ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> configuration file (V8.6 and earlier)</I>O UnixFromLine=<CODECLASS="replaceable"><I>format</I></CODE>              <ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> configuration file (beginning with V8.7)</I>-OUnixFromLine=<CODECLASS="replaceable"><I>format</I></CODE>              <ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> command line (beginning with V8.7)</I>define(`confFROM_LINE',`<CODECLASS="replaceable"><I>format</I></CODE>')   <ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> V8 m4 configuration</I></PRE></BLOCKQUOTE></P><PCLASS="para">The <CODECLASS="literal">format</CODE> is of type string.Under versions V8.6 and earlier there was no default for <CODECLASS="replaceable"><I>format</I></CODE>. Sothe <CODECLASS="literal">$l</CODE> macro always had to be defined.Beginning with V8.7, <EMCLASS="emphasis">sendmail</EM> first checks to see if the <CODECLASS="literal">UnixFromLine</CODE>option was defined and uses that value if it was. Otherwise, it checksto see whether the level of the configurationfile is 6 or less. If it is and if the <CODECLASS="literal">$l</CODE> macro was defined,it uses that value. Otherwise, it uses the default</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">From $g  $d</PRE></BLOCKQUOTE></P><PCLASS="para">The <CODECLASS="literal">UnixFromLine</CODE> option is not safe.If specified from the command line,it may cause <EMCLASS="emphasis">sendmail</EM> to relinquish its <EMCLASS="emphasis">root</EM> privilege.</P><DIVCLASS="refsect2"><H4CLASS="refsect2"><ACLASS="title"NAME="SML2-CH-34-SECT-8-72-1">34.8.72.1 UnixFromLine in UUCP software</A></H4><PCLASS="para">UUCP software requires all messages to begin with a header linethat looks like</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">From <CODECLASS="replaceable"><I>sender</I></CODE>  <CODECLASS="replaceable"><I>date</I></CODE> remote from &lt;<CODECLASS="replaceable"><I>host</I></CODE>&gt;</PRE></BLOCKQUOTE></P><PCLASS="para">The <EMCLASS="emphasis">sendmail</EM> program prepends such a line to a mail message'sheaders if the <CODECLASS="literal">F=U</CODE> flag (see <ACLASS="xref"HREF="ch30_08.htm#SML2-CH-30-SECT-8-42"TITLE="">Section 30.8.42, F=U</A>) is set for the delivery agent.[41]Prior to V8.7,if the local machine supports UUCP,the <CODECLASS="literal">l</CODE> macro must be supplied with&quot;<CODECLASS="literal">From&nbsp;</CODE>&quot;, <CODECLASS="replaceable"><I>sender</I></CODE>, and <CODECLASS="replaceable"><I>date</I></CODE>:</P><BLOCKQUOTECLASS="footnote"><PCLASS="para">[41] Prior to V8.7 thisbehavior was supported only if UGLYUUCP was defined in <EMCLASS="emphasis">conf.h</EM>when <EMCLASS="emphasis">sendmail</EM> was compiled.</P></BLOCKQUOTE><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">DlFrom $g $d</PRE></BLOCKQUOTE></P><PCLASS="para">The rest of the information is supplied by <EMCLASS="emphasis">sendmail</EM>.</P></DIV><DIVCLASS="refsect2"><H4CLASS="refsect2"><ACLASS="title"NAME="SML2-CH-34-SECT-8-72-2">34.8.72.2 UnixFromLine with mail files</A></H4><PCLASS="para">Under UNIX, in a file of many mail messages such as a user's mailbox,lines that begin with the five characters &quot;<CODECLASS="literal">From&nbsp;</CODE>&quot; areused to separate one message from another. This is a convention thatis not shared by all MUAs. The <EMCLASS="emphasis">sendmail</EM> programappends mail messages to files under only two circumstances: whensaving failed mail to the user's <EMCLASS="emphasis">dead-letter</EM> file and whendelivering to a local address that begins with the <CODECLASS="literal">/</CODE>character. In appending messages to files, it usesthe <CODECLASS="literal">UnixFromLine</CODE> (<CODECLASS="literal">$l</CODE>) optionto define the form of the message separator lines.</P><PCLASS="para">For sites that use the Rand MUA (and that donot also use UUCP) the <CODECLASS="literal">UnixFromLine</CODE> (<CODECLASS="literal">$l</CODE>) optioncan be defined to be four CTRL-A characters:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">Dl^A^A^A^AO UnixFromLine=^A^A^A^A</PRE></BLOCKQUOTE></P></DIV></DIV></BLOCKQUOTE></DIV><DIVCLASS="refentry"><DIVCLASS="refnamediv"><H3CLASS="refname"><ACLASS="refname"NAME="SML2-CH-34-SECT-8-73">34.8.73 UnsafeGroupWrites</A></H3><PCLASS="refpurpose">Check unsafe group permissions</P>(V8.8 and above)</DIV><BLOCKQUOTE><DIVCLASS="refsect1"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-47679"></A><ACLASS="indexterm"NAME="AUTOID-47681"></A><ACLASS="indexterm"NAME="AUTOID-47684"></A><ACLASS="indexterm"NAME="AUTOID-47686"></A>In processing a <EMCLASS="emphasis">~/.forward</EM> file or a <EMCLASS="emphasis">:include:</EM> file,a question arises when group or world write permission is enabled.Should <EMCLASS="emphasis">sendmail</EM> trust the addresses found in such files?Clearly the answer is &quot;no&quot; when world write permission is enabled.But what of group write permission?</P><PCLASS="para">Beginning with V8.8 <EMCLASS="emphasis">sendmail</EM>, the decision of whether ornot to trust group write permission is left to the <CODECLASS="literal">UnsafeGroupWrites</CODE>option:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">O UnsafeGroupWrites=<CODECLASS="replaceable"><I>bool                 </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> configuration file (beginning with V8.8)</I>-OUnsafeGroupWrites=<CODECLASS="replaceable"><I>bool                 </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> command line (beginning with V8.8)</I>define(`confUNSAFE_GROUP_WRITES',<CODECLASS="replaceable"><I>bool</I></CODE>)   <ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> V8 m4 configuration</I></PRE></BLOCKQUOTE></P><PCLASS="para">The optional argument <CODECLASS="replaceable"><I>bool</I></CODE>, when missing, defaults to true (checkfor unsafe group write permission).If this option is entirely missing, it defaults to false(don't check for unsafe group write permission).</P><PCLASS="para">With this option set to true, a <EMCLASS="emphasis">~/.forward</EM> file or a <EMCLASS="emphasis">:include:</EM> filewith group or world writability will result in one of these four errorsbeing logged:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen"><CODECLASS="replaceable"><I>filename</I></CODE>: group writable forward file, marked unsafe<CODECLASS="replaceable"><I>filename</I></CODE>: world writable forward file, marked unsafe<CODECLASS="replaceable"><I>filename</I></CODE>: group writable include file, marked unsafe<CODECLASS="replaceable"><I>filename</I></CODE>: world writable include file, marked unsafe</PRE></BLOCKQUOTE></P><PCLASS="para">Any address in the file that is a file or a program willresult in a bounce and this message:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">Address <CODECLASS="replaceable"><I>address</I></CODE> is unsafe for mailing to programsAddress <CODECLASS="replaceable"><I>address</I></CODE> is unsafe for mailing to files</PRE></BLOCKQUOTE></P><PCLASS="para">&#13;The <CODECLASS="literal">UnsafeGroupWrites</CODE> option is not safe.  If specified from the command line,it may cause <EMCLASS="emphasis">sendmail</EM> to relinquish its <EMCLASS="emphasis">root</EM> privilege.</P></DIV></BLOCKQUOTE></DIV><DIVCLASS="refentry"><DIVCLASS="refnamediv"><H3CLASS="refname"><ACLASS="refname"NAME="SML2-CH-34-SECT-8-74">34.8.74 UseErrorsTo (l)</A></H3><PCLASS="refpurpose">Use Errors-To: for errors</P>(V8.1 and above)</DIV><BLOCKQUOTE><DIVCLASS="refsect1"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-47731"></A><ACLASS="indexterm"NAME="AUTOID-47733"></A>Ordinarily, V8 <EMCLASS="emphasis">sendmail</EM> sends notification of failed mailto the envelope sender. It specifically does not send notificationto the addresses listed in the <CODECLASS="literal">Errors-To:</CODE> header.It does this because the <CODECLASS="literal">Errors-To:</CODE> header violates RFC1123.For additional information about the <CODECLASS="literal">Errors-To:</CODE> header,see <ACLASS="xref"HREF="ch35_10.htm#SML2-CH-35-SECT-10-13"TITLE="">Section 35.10.13, Errors-To:</A>.</P><PCLASS="para">The <CODECLASS="literal">UseErrorsTo</CODE> (<CODECLASS="literal">l</CODE>) option is available to prevent older versionsof software from failing. When set, it allows error notificationto be sent to the address listed in the <CODECLASS="literal">Errors-To:</CODE> headerin addition to that sent to the envelope sender.</P><PCLASS="para">The forms of the <CODECLASS="literal">UseErrorsTo</CODE> (<CODECLASS="literal">l</CODE>) option are as follows:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">Ol<CODECLASS="replaceable"><I>bool                             </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> configuration file (old form)</I>-ol<CODECLASS="replaceable"><I>bool                            </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> command line (old form)</I>O UseErrorsTo=<CODECLASS="replaceable"><I>bool                 </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> configuration file (beginning with V8.7)</I>-OUseErrorsTo=<CODECLASS="replaceable"><I>bool                 </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> command line (beginning with V8.7)</I>define(`confUSE_ERRORS_TO',<CODECLASS="replaceable"><I>bool</I></CODE>)   <ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> V8 m4 configuration</I></PRE></BLOCKQUOTE></P><PCLASS="para">The optional argument <CODECLASS="replaceable"><I>bool</I></CODE>, when missing, defaults to true (errorsare sent to the <CODECLASS="literal">Errors-To:</CODE> header).If this option is entirely missing, it defaults to false (the <CODECLASS="literal">Errors-To:</CODE> headeris ignored).</P><PCLASS="para">The <CODECLASS="literal">UseErrorsTo</CODE> (<CODECLASS="literal">l</CODE>) option is safe.  Even if it is specified from the command line,<EMCLASS="emphasis">sendmail</EM> retains its <EMCLASS="emphasis">root</EM> privilege.</P></DIV></BLOCKQUOTE></DIV><DIVCLASS="refentry"><DIVCLASS="refnamediv"><H3CLASS="refname"><ACLASS="refname"NAME="SML2-CH-34-SECT-8-75">34.8.75 UserDatabaseSpec (U)</A></H3><PCLASS="refpurpose">Specify user database</P>(V8.1 and above)</DIV><BLOCKQUOTE><DIVCLASS="refsect1"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-47776"></A><ACLASS="indexterm"NAME="AUTOID-47778"></A><ACLASS="indexterm"NAME="AUTOID-47780"></A>V8 <EMCLASS="emphasis">sendmail</EM>, if compiled with USERDB defined (see<ACLASS="xref"HREF="ch18_08.htm#SML2-CH-18-SECT-8-54"TITLE="">Section 18.8.54, USERDB</A>), can usea special, internally understood database calledthe User Database. Addresses that are defined in the User Database canbe looked up and modified after aliasing and before processingof the user's <EMCLASS="emphasis">~/.forward</EM> file.</P><PCLASS="para">The workings of this database aredescribed in <ACLASS="xref"HREF="ch33_05.htm"TITLE="The User Database">Section 33.5, "The User Database"</A>.The <CODECLASS="literal">UserDatabaseSpec</CODE> (<CODECLASS="literal">U</CODE>) optiondefines the name and location of the file containing thisUser Database information.</P><PCLASS="para">The forms of the <CODECLASS="literal">UserDatabaseSpec</CODE> (<CODECLASS="literal">U</CODE>) option are as follows:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">OU<CODECLASS="replaceable"><I>path,...                             </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> configuration file (V8.6)</I>-oU<CODECLASS="replaceable"><I>path,...                            </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> command line (V8.6)</I>O UserDatabaseSpec=<CODECLASS="replaceable"><I>path,...            </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> configuration file (V8.7)</I>-OUserDatabaseSpec=<CODECLASS="replaceable"><I>path,...            </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> command line (V8.7)</I>define(`confUSERDB_SPEC',`<CODECLASS="replaceable"><I>path,...</I></CODE>')   <ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> V8 m4 configuration</I></PRE></BLOCKQUOTE></P><PCLASS="para">The argument <CODECLASS="replaceable"><I>path,...</I></CODE> is of type string and isa comma- or space-separated list of elements. Those elementscan be database pathnames or other information as described below. If <CODECLASS="replaceable"><I>path,...</I></CODE> is missingor if the entire option is missing, the userdatabase is not used. Otherwise, the user database is used, and eachdatabase is accessed in turn, leftmost to rightmost, in the list of paths.There is no default for the V8 <EMCLASS="emphasis">m4</EM> technique.</P><PCLASS="para">The elements of <CODECLASS="replaceable"><I>path,...</I></CODE> can either be pathnames of filesor other methods of lookup depending on the first character of each:&#13;</P><DLCLASS="variablelist"><DTCLASS="term"><EMCLASS="emphasis">/</EM></DT><DDCLASS="listitem"><PCLASS="para">A lead slash causes the element to be interpreted as a pathname;for example, <EMCLASS="emphasis">/etc/userdb</EM>.&#13;</P></DD><DTCLASS="term"><EMCLASS="emphasis">@</EM></DT><DDCLASS="listitem"><PCLASS="para">A leading <CODECLASS="literal">@</CODE> causes a copy of the message for each userto be forwarded to a specified host. The assumptionis that the other host is in a better position to perform user databaselookups. Such a declaration looks like <EMCLASS="emphasis">@dbhost.our.domain</EM>.Note that this form of declaration must be last in the list thatconstitutes <CODECLASS="replaceable"><I>path,...</I></CODE> because it always succeeds.&#13;</P></DD><DTCLASS="term"><EMCLASS="emphasis">h</EM></DT><DDCLASS="listitem"><PCLASS="para">Beginning with V8.7,a leading <CODECLASS="literal">h</CODE> or <CODECLASS="literal">H</CODE> causes <EMCLASS="emphasis">sendmail</EM> to performa case-insensitive comparison ofthe <CODECLASS="replaceable"><I>path</I></CODE> to the string &quot;hesiod.&quot; If they match,user database inquiries are looked up via Hesiod services.</P></DD></DL><PCLASS="para">For example, the following declares two user databases. The first that is usedup will be <EMCLASS="emphasis">/etc/userdb</EM>. If the entry is not found in thatdatabase, it will be forwarded to the host <EMCLASS="emphasis">mail.here.us</EM> forhandling there:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">O UserDatabaseSpec=/etc/userdb,@mail.here.us</PRE></BLOCKQUOTE></P><PCLASS="para">Any leading character other than those shown abovecauses an error message to be printedand that particular <CODECLASS="replaceable"><I>path,...</I></CODE> element to be ignored.</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">Unknown UDB spec <ICLASS="lineannotation">badpath</I></PRE></BLOCKQUOTE></P><PCLASS="para">Note that future releases of <EMCLASS="emphasis">sendmail</EM> may includeadditional subfields for each <CODECLASS="replaceable"><I>path</I></CODE>. These willlook like <CODECLASS="literal">:opt=value</CODE>. Consequently, the <CODECLASS="replaceable"><I>path</I></CODE>that you specify should not include the colon character.</P><PCLASS="para">If UDB_DEFAULT_SPEC is defined in <EMCLASS="emphasis">Makefile</EM> when<EMCLASS="emphasis">sendmail</EM> is compiled (see <ACLASS="xref"HREF="ch18_08.htm#SML2-CH-18-SECT-8-53"TITLE="">Section 18.8.53, UDB-DEFAULT-SPEC</A>),that value becomes the default if the <CODECLASS="literal">UserDatabaseSpec</CODE> (<CODECLASS="literal">U</CODE>)option is missing. If UDB_DEFAULT_SPEC is undefined, the defaultbecomes NULL and no User Database lookups are performed.</P><PCLASS="para">The <CODECLASS="literal">UserDatabaseSpec</CODE> (<CODECLASS="literal">U</CODE>) option is not safe.  If specified from the command line,it may cause <EMCLASS="emphasis">sendmail</EM> to relinquish its <EMCLASS="emphasis">root</EM> privilege.</P></DIV></BLOCKQUOTE></DIV><DIVCLASS="refentry"><DIVCLASS="refnamediv"><H3CLASS="refname"><ACLASS="refname"NAME="SML2-CH-34-SECT-8-76">34.8.76 Verbose</A></H3><PCLASS="refpurpose">Run in verbose mode</P>(v)</DIV><BLOCKQUOTE><DIVCLASS="refsect1"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-47869"></A><ACLASS="indexterm"NAME="AUTOID-47871"></A>The <EMCLASS="emphasis">sendmail</EM> program offers a verbosemode of operation.In this &quot;blow-by-blow&quot; mode a description of all the <EMCLASS="emphasis">sendmail</EM>program's actions is printed to the standard output. This modeis valuable in running <EMCLASS="emphasis">sendmail</EM> interactively but uselessin running in daemon mode. Consequently, you should never set thisoption in the <EMCLASS="emphasis">sendmail.cf</EM> file. Instead, you should set itfrom the command line using the <CODECLASS="literal">-v</CODE> command-line switch.</P><PCLASS="para">After the <EMCLASS="emphasis">sendmail.cf</EM> file is parsed and the command-linearguments have been processed, <EMCLASS="emphasis">sendmail</EM> checks to see whether itis in verbose mode. If it is, it sets the <CODECLASS="literal">HoldExpensive</CODE> (<CODECLASS="literal">c</CODE>) option (don'tconnect to expensive mailers; see <ACLASS="xref"HREF="ch34_08.htm#SML2-CH-34-SECT-8-29"TITLE="">Section 34.8.29</A>) to false and sets the <CODECLASS="literal">DeliveryMode</CODE> (<CODECLASS="literal">d</CODE>) option(see <ACLASS="xref"HREF="ch34_08.htm#SML2-CH-34-SECT-8-16"TITLE="">Section 34.8.16</A>) to interactive.</P><PCLASS="para">The forms of the <CODECLASS="literal">Verbose</CODE> (<CODECLASS="literal">v</CODE>) option are as follows:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">Ov<CODECLASS="replaceable"><I>bool            </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> configuration file (old form)</I>-ov<CODECLASS="replaceable"><I>bool           </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> command line (old form)</I>-v<CODECLASS="replaceable"><I>                </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> command-line shorthand</I>O Verbose=<CODECLASS="replaceable"><I>bool    </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> configuration file (beginning with V8.7)</I>-OVerbose=<CODECLASS="replaceable"><I>bool    </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> command line (beginning with V8.7)</I></PRE></BLOCKQUOTE></P><PCLASS="para">The argument <CODECLASS="replaceable"><I>bool</I></CODE> is of type Boolean. If it is missing, thedefault value is true (be verbose).If the entire option is missing, the default value is false (be quiet).</P><PCLASS="para">The <CODECLASS="literal">Verbose</CODE> (<CODECLASS="literal">v</CODE>) option is safe.  When it is specified from the command line,<EMCLASS="emphasis">sendmail</EM> retains its <EMCLASS="emphasis">root</EM> privilege. Note that the <CODECLASS="literal">Verbose</CODE> (<CODECLASS="literal">v</CODE>) optionshould <EMCLASS="emphasis">never</EM> be set in the configuration file.</P></DIV></BLOCKQUOTE></DIV><DIVCLASS="refentry"><DIVCLASS="refnamediv"><H3CLASS="refname"><ACLASS="refname"NAME="SML2-CH-34-SECT-8-77">34.8.77 (M)</A></H3><PCLASS="refpurpose">Define a macro</P>(Obsolete as of V8.7)</DIV><BLOCKQUOTE><DIVCLASS="refsect1"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-47920"></A><ACLASS="indexterm"NAME="AUTOID-47922"></A><ACLASS="indexterm"NAME="AUTOID-47926"></A>The <CODECLASS="literal">M</CODE> option is used to set or change a defined macro's value.Although this option is allowed in the <EMCLASS="emphasis">sendmail.cf</EM> file, it isexclusively intended for use from the command line.Macros that are defined in the command line <EMCLASS="emphasis">will not</EM> override the valuesof those same macros defined in the configuration file.</P><PCLASS="para">The forms of the <CODECLASS="literal">M</CODE> option are as follows:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">OM<CODECLASS="replaceable"><I>Xvalue    </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> configuration file</I>-oM<CODECLASS="replaceable"><I>Xvalue   </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> command line (old obsolete form)</I>-M<CODECLASS="replaceable"><I>Xvalue    </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> command line (beginning with V8.7)</I>D<CODECLASS="replaceable"><I>Xvalue     </I></CODE><ICLASS="lineannotation"><IMGSRC="../chars/larr.gif"ALT="&lt;-"> both are equivalent of this in the configuration and </I><EMCLASS="emphasis">m4</EM> files</PRE></BLOCKQUOTE></P><PCLASS="para">In all four cases the argument <CODECLASS="replaceable"><I>value</I></CODE> is of type string.The <CODECLASS="replaceable"><I>value</I></CODE> is assigned to the macro named <CODECLASS="literal">X</CODE>.Pre-V8.7 macro names are always a single character.Multicharacter macro names that are available with V8.7 are described in<ACLASS="xref"HREF="ch31_01.htm"TITLE="Defined Macros">Chapter 31, <CITECLASS="chapter">Defined Macros</CITE></A>.</P><PCLASS="para">One example of the usefulness of this option concernsthe <EMCLASS="emphasis">rmail</EM>(8) program.Suppose a machine is used for networked mail.Ordinarily, the <CODECLASS="literal">r</CODE> macro is given the value &quot;smtp&quot;to signify that mail is received over the network.But for UUCP mail the <CODECLASS="literal">r</CODE> macro should be given the value&quot;UUCP.&quot;One way to effect such a change is to arrange for <EMCLASS="emphasis">rmail</EM>(8)to invoke <EMCLASS="emphasis">sendmail</EM> with a command-line argument of</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">-oMrUUCP</PRE></BLOCKQUOTE></P><PCLASS="para">In this command line, the <CODECLASS="literal">-o</CODE> switch tells <EMCLASS="emphasis">sendmail</EM> to definea macro (the <CODECLASS="literal">M</CODE>) whose name is <CODECLASS="literal">r</CODE>to have the text <CODECLASS="literal">UUCP</CODE> as its new value.[42]This new value overrideswhatever value <CODECLASS="literal">r</CODE> may have been given in the configuration file.The <CODECLASS="literal">M</CODE> option should be approached with caution. If you laterupgrade your <EMCLASS="emphasis">sendmail</EM> program and install a new configurationfile, you may find that the names of macros aren't what youexpect. Previouscommand-line assumptions about macro names may suddenly break.</P><BLOCKQUOTECLASS="footnote"><PCLASS="para">[42] Under V8 <EMCLASS="emphasis">sendmail</EM> the <CODECLASS="literal">$s</CODE> and <CODECLASS="literal">$r</CODE> macros shouldbe assigned values with <CODECLASS="literal">-p</CODE> command-line switch (see <ACLASS="xref"HREF="ch36_07.htm#SML2-CH-36-SECT-7-32"TITLE="">Section 36.7.32, -p</A> in <ACLASS="xref"HREF="ch36_01.htm"TITLE="The Command Line">Chapter 36</A>).Also note that <CODECLASS="literal">-oM</CODE> has been deprecated in favor of the new <CODECLASS="literal">-M</CODE> switch.</P></BLOCKQUOTE><PCLASS="para">The <CODECLASS="literal">M</CODE> option is safe only in assigning values to the<CODECLASS="literal">r</CODE> and <CODECLASS="literal">s</CODE> macros. For all other macros it is unsafeand, if specified from the command line,may cause <EMCLASS="emphasis">sendmail</EM> to relinquish its <EMCLASS="emphasis">root</EM> privilege.Pre-V8 SunOS <EMCLASS="emphasis">sendmail</EM> was an exception in that it considered thisoption safe for all macros.Note that the <CODECLASS="literal">M</CODE> optionshould <EMCLASS="emphasis">never</EM> be used in the configuration file.</P></DIV></BLOCKQUOTE></DIV></DIV><DIVCLASS="htmlnav"><P></P><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch34_07.htm"TITLE="34.7 Pitfalls"><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 34.7 Pitfalls"BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="book"HREF="index.htm"TITLE="sendmail"><IMGSRC="../gifs/txthome.gif"ALT="sendmail"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="CHAPTER"HREF="ch35_01.htm"TITLE="35. Headers"><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 35. Headers"BORDER="0"></A></TD></TR><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172">34.7 Pitfalls</TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="index"HREF="index/idx_0.htm"TITLE="Book Index"><IMGSRC="../gifs/index.gif"ALT="Book Index"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172">35. Headers</TD></TR></TABLE><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><PCLASS="nav"><FONTSIZE="-1">[ <AHREF="../index.htm"TITLE="The Networking CD Bookshelf">Library Home</A> | <AHREF="../dnsbind/index.htm"TITLE="DNS &amp; BIND">DNS &amp; BIND</A> | <AHREF="../tcpip/index.htm"TITLE="TCP/IP Network Administration">TCP/IP</A> | <AHREF="index.htm"TITLE="sendmail">sendmail</A> | <AHREF="../smdref/index.htm"TITLE="sendmail Desktop Reference">sendmail Reference</A> | <AHREF="../firewall/index.htm"TITLE="Building Internet Firewalls">Firewalls</A> | <AHREF="../puis/index.htm"TITLE="Practical UNIX &amp; Internet Security">Practical Security</A> ]</FONT></P></DIV></BODY></HTML>