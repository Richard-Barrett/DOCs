<HTML><HEAD><TITLE>[Chapter 35] 35.4 ?flags? in Header Definitions</TITLE><METANAME="DC.title"CONTENT="sendmail"><METANAME="DC.creator"CONTENT="Bryan Costales &amp; Eric Allman"><METANAME="DC.publisher"CONTENT="O'Reilly &amp; Associates, Inc."><METANAME="DC.date"CONTENT="1999-01-06T21:48:14Z"><METANAME="DC.type"CONTENT="Text.Monograph"><METANAME="DC.format"CONTENT="text/html"SCHEME="MIME"><METANAME="DC.source"CONTENT="1-56592-222-0"SCHEME="ISBN"><METANAME="DC.language"CONTENT="en-US"><METANAME="generator"CONTENT="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><LINKREV="made"HREF="mailto:online-books@oreilly.com"TITLE="Online Books Comments"><LINKREL="up"HREF="ch35_01.htm"TITLE="35. Headers"><LINKREL="prev"HREF="ch35_03.htm"TITLE="35.3 Header Field Contents"><LINKREL="next"HREF="ch35_05.htm"TITLE="35.5 Header Behavior in conf.c"></HEAD><BODYBGCOLOR="#FFFFFF"TEXT="#000000"><DIVCLASS="htmlnav"><H1><IMGSRC="gifs/smbanner.gif"ALT="sendmail"USEMAP="#srchmap"BORDER="0"></H1><MAPNAME="srchmap"><AREASHAPE="RECT"COORDS="0,0,466,65"HREF="index.htm"ALT="sendmail"><AREASHAPE="RECT"COORDS="467,0,514,18"HREF="../search/ssrch.htm"ALT="Search this book"></MAP><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch35_03.htm"TITLE="35.3 Header Field Contents"><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 35.3 Header Field Contents"BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><B><FONTFACE="ARIEL,HELVETICA,HELV,SANSERIF"SIZE="-1">Chapter 35<BR>Headers</FONT></B></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch35_05.htm"TITLE="35.5 Header Behavior in conf.c"><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 35.5 Header Behavior in conf.c"BORDER="0"></A></TD></TR></TABLE>&nbsp;<HRALIGN="LEFT"WIDTH="515"TITLE="footer"></DIV><DIVCLASS="SECT1"><H2CLASS="sect1"><ACLASS="title"NAME="SML2-CH-35-SECT-4">35.4 ?flags? in Header Definitions</A></H2><PCLASS="para"><ACLASS="indexterm"NAME="SML2-CH-35-IX-FLAGS-DELIVERY-AGENT"></A><ACLASS="indexterm"NAME="SML2-CH-35-IX-DELIVERY-AGENTS-MTAS-FLAGS"></A><ACLASS="indexterm"NAME="SML2-CH-35-IX-HEADERS-MESSAGE-DELIVERY-AGENT-FLAGS-AND"></A><ACLASS="indexterm"NAME="AUTOID-48389"></A>The <CODECLASS="replaceable"><I>name</I></CODE> part of the <CODECLASS="literal">H</CODE>configuration command can be prefixedwith a list of flags. This list, if present,must be surrounded by <CODECLASS="literal">?</CODE> characters:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">H?<CODECLASS="replaceable"><I>flags</I></CODE>?<CODECLASS="replaceable"><I>name</I></CODE>:<CODECLASS="replaceable"><I>field</I></CODE></PRE></BLOCKQUOTE></P><PCLASS="para">The <CODECLASS="literal">?</CODE> characters must immediatelyfollow the <CODECLASS="literal">H</CODE> and immediately precedethe <CODECLASS="replaceable"><I>name</I></CODE> with no intervening spaces. If a spaceprecedes the first <CODECLASS="literal">?</CODE>, that <CODECLASS="literal">?</CODE> ismisinterpreted as part of the header <CODECLASS="replaceable"><I>name</I></CODE>, ratherthan as the start of a list of flags, and this error message is printed:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">header syntax error, line &quot; ?flags?name: field&quot;                           <ICLASS="lineannotation"><IMGSRC="../chars/uarr.gif"ALT="-^"></I>                           <ICLASS="lineannotation">note leading space</I></PRE></BLOCKQUOTE></P><PCLASS="para">If the first <CODECLASS="literal">?</CODE>is present but the second is absent, <EMCLASS="emphasis">sendmail</EM> printsthe same error message and skips that <CODECLASS="literal">H</CODE> configurationcommand.The flags that are listed between the <CODECLASS="literal">?</CODE> characters correspondto flags that are listed with delivery agent <CODECLASS="literal">F=</CODE> equates. Whenprocessing a mail message for forwarding or delivery, <EMCLASS="emphasis">sendmail</EM>adds a header line if a flag is common to both the <CODECLASS="literal">H</CODE> definitionlist of flags and the delivery agent's list of flags. For example,</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">H?P?Return-Path: &lt;$g&gt;</PRE></BLOCKQUOTE></P><PCLASS="para">The above <CODECLASS="literal">H</CODE> definition begins with a <CODECLASS="literal">P</CODE> flag. Thistells <EMCLASS="emphasis">sendmail</EM> to add this header line to the mail messageonly if a selected delivery agent also contains that flag. Sincethe <CODECLASS="literal">Return-Path:</CODE> header (see <ACLASS="xref"HREF="ch35_10.htm#SML2-CH-35-SECT-10-28"TITLE="">Section 35.10.28, Return-Path:</A>) should be added only duringfinal delivery, the <CODECLASS="literal">P</CODE> flag appears only in the <CODECLASS="literal">prog</CODE>and <CODECLASS="literal">local</CODE> delivery agent definitions:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">Mprog,  P=/bin/sh,   F=lsDFMeu<CODECLASS="userinput"><B>P</B></CODE>,  S=10, R=20, A=sh -c $uMlocal, P=/bin/mail, F=rlsDFMmn<CODECLASS="userinput"><B>P</B></CODE>, S=10, R=20, A=mail -d $u                               <ICLASS="lineannotation"><IMGSRC="../chars/uarr.gif"ALT="-^"></I>                               <ICLASS="lineannotation">note</I></PRE></BLOCKQUOTE></P><PCLASS="para">No check is made to ensure that the <CODECLASS="literal">H</CODE> flags correspond to existingdelivery agent flags. Beware that if a corresponding <CODECLASS="literal">F=</CODE> flag does notexist in some delivery agent definition,that header may never be added to any mail message.</P><PCLASS="para">Care should be used to avoid selecting flags that have other meaningsfor delivery agents. <ACLASS="xref"HREF="ch30_08.htm#SML2-CH-30-TAB-7"TITLE="Delivery Agent F= Flags">Table 30.8</A> in <ACLASS="xref"HREF="ch30_08.htm"TITLE="Alphabetized F= Flags">Section 30.8, "Alphabetized F= Flags"</A>lists all the delivery agent flagsthat have predefined meanings, including those traditionally usedwith header definitions.<ACLASS="indexterm"NAME="AUTOID-48441"></A><ACLASS="indexterm"NAME="AUTOID-48442"></A><ACLASS="indexterm"NAME="AUTOID-48443"></A></P></DIV><DIVCLASS="htmlnav"><P></P><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch35_03.htm"TITLE="35.3 Header Field Contents"><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 35.3 Header Field Contents"BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="book"HREF="index.htm"TITLE="sendmail"><IMGSRC="../gifs/txthome.gif"ALT="sendmail"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch35_05.htm"TITLE="35.5 Header Behavior in conf.c"><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 35.5 Header Behavior in conf.c"BORDER="0"></A></TD></TR><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172">35.3 Header Field Contents</TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="index"HREF="index/idx_0.htm"TITLE="Book Index"><IMGSRC="../gifs/index.gif"ALT="Book Index"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172">35.5 Header Behavior in conf.c</TD></TR></TABLE><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><PCLASS="nav"><FONTSIZE="-1">[ <AHREF="../index.htm"TITLE="The Networking CD Bookshelf">Library Home</A> | <AHREF="../dnsbind/index.htm"TITLE="DNS &amp; BIND">DNS &amp; BIND</A> | <AHREF="../tcpip/index.htm"TITLE="TCP/IP Network Administration">TCP/IP</A> | <AHREF="index.htm"TITLE="sendmail">sendmail</A> | <AHREF="../smdref/index.htm"TITLE="sendmail Desktop Reference">sendmail Reference</A> | <AHREF="../firewall/index.htm"TITLE="Building Internet Firewalls">Firewalls</A> | <AHREF="../puis/index.htm"TITLE="Practical UNIX &amp; Internet Security">Practical Security</A> ]</FONT></P></DIV></BODY></HTML>