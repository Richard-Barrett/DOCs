<HTML><HEAD><TITLE>[Chapter 2] The sendmail.cf File</TITLE><METANAME="DC.title"CONTENT="sendmail Desktop Reference"><METANAME="DC.creator"CONTENT="Bryan Costales &amp; Eric Allman"><METANAME="DC.publisher"CONTENT="O'Reilly &amp; Associates, Inc."><METANAME="DC.date"CONTENT="1999-02-04T00:04:15Z"><METANAME="DC.type"CONTENT="Text.Monograph"><METANAME="DC.format"CONTENT="text/html"SCHEME="MIME"><METANAME="DC.source"CONTENT="1-56592-278-6"SCHEME="ISBN"><METANAME="DC.language"CONTENT="en-US"><METANAME="generator"CONTENT="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><LINKREV="made"HREF="mailto:online-books@oreilly.com"TITLE="Online Books Comments"><LINKREL="up"HREF="index.htm"TITLE="sendmail Desktop Reference"><LINKREL="prev"HREF="ch01_05.htm"TITLE="1.5 Hints"><LINKREL="next"HREF="ch02_02.htm"TITLE="2.2 Delivery Agent Equates"></HEAD><BODYBGCOLOR="#FFFFFF"TEXT="#000000"><DIVCLASS="htmlnav"><H1><IMGSRC="gifs/smbanner.gif"ALT="sendmail Desktop Reference"USEMAP="#srchmap"BORDER="0"></H1><MAPNAME="srchmap"><AREASHAPE="RECT"COORDS="0,0,466,65"HREF="index.htm"ALT="sendmail Desktop Reference"><AREASHAPE="RECT"COORDS="467,0,514,18"HREF="../search/rsrch.htm"ALT="Search this book"></MAP><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch01_05.htm"TITLE="1.5 Hints"><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 1.5 Hints"BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><B><FONTFACE="ARIEL,HELVETICA,HELV,SANSERIF"SIZE="-1">Chapter 2</FONT></B></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch02_02.htm"TITLE="2.2 Delivery Agent Equates"><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 2.2 Delivery Agent Equates"BORDER="0"></A></TD></TR></TABLE>&nbsp;<HRALIGN="LEFT"WIDTH="515"TITLE="footer"></DIV><DIVCLASS="CHAPTER"><H1CLASS="chapter"><ACLASS="title"NAME="SMQR-CH-2">2. The sendmail.cf File</A></H1><DIVCLASS="htmltoc"><P><B>Contents:</B><BR><ACLASS="SECT1"HREF="#SMQR-CH-2-SECT-1"TITLE="2.1 Overview">Overview</A><BR><ACLASS="SECT1"HREF="ch02_02.htm"TITLE="2.2 Delivery Agent Equates">Delivery Agent Equates</A><BR><ACLASS="SECT1"HREF="ch02_03.htm"TITLE="2.3 Delivery Agent F= Flags">Delivery Agent F= Flags</A><BR><ACLASS="SECT1"HREF="ch02_04.htm"TITLE="2.4 Defined Macros">Defined Macros</A><BR><ACLASS="SECT1"HREF="ch02_05.htm"TITLE="2.5 Class Macros">Class Macros</A><BR><ACLASS="SECT1"HREF="ch02_06.htm"TITLE="2.6 Options">Options</A><BR><ACLASS="SECT1"HREF="ch02_07.htm"TITLE="2.7 The Timeout Option">The Timeout Option</A><BR><ACLASS="SECT1"HREF="ch02_08.htm"TITLE="2.8 Rule Sets">Rule Sets</A><BR><ACLASS="SECT1"HREF="ch02_09.htm"TITLE="2.9 Delivery Agent S= and R=">Delivery Agent S= and R=</A><BR><ACLASS="SECT1"HREF="ch02_10.htm"TITLE="2.10 The check_ Rule Sets">The check_ Rule Sets</A><BR><ACLASS="SECT1"HREF="ch02_11.htm"TITLE="2.11 Rules">Rules</A><BR><ACLASS="SECT1"HREF="ch02_12.htm"TITLE="2.12 Wildcard Operators in the LHS">Wildcard Operators in the LHS</A><BR><ACLASS="SECT1"HREF="ch02_13.htm"TITLE="2.13 Positional Operators in the RHS">Positional Operators in the RHS</A><BR><ACLASS="SECT1"HREF="ch02_14.htm"TITLE="2.14 Other Operators in the RHS">Other Operators in the RHS</A><BR><ACLASS="SECT1"HREF="ch02_15.htm"TITLE="2.15 Operators that Return a Triple">Operators that Return a Triple</A><BR><ACLASS="SECT1"HREF="ch02_16.htm"TITLE="2.16 Conditional Operators">Conditional Operators</A><BR><ACLASS="SECT1"HREF="ch02_17.htm"TITLE="2.17 Hints">Hints</A></P><P></P></DIV><PCLASS="para">The <EMCLASS="emphasis">sendmail</EM> configuration file, usually called <EMCLASS="emphasis">sendmail.cf</EM>,provides all the central information that controls the <EMCLASS="emphasis">sendmail</EM> program's behavior.It lists the location of all the other files <EMCLASS="emphasis">sendmail</EM> needs to access andthe location of all the directories in which <EMCLASS="emphasis">sendmail</EM> needsto create and remove files.It sets the definitions <EMCLASS="emphasis">sendmail</EM> uses when rewriting addresses.It defines the rules and sets of rules <EMCLASS="emphasis">sendmail</EM> uses for transforming mail addresses(and aliases for those addresses) into usable information, such aswhich delivery agent to use and the correct form of the address to usewith that delivery agent. </P><DIVCLASS="sect1"><H2CLASS="sect1"><ACLASS="title"NAME="SMQR-CH-2-SECT-1">2.1 Overview</A></H2><PCLASS="para">Each line in the configuration files begins with a key characterthat defines the function of that line.Any character other than those shown here is an error.&#13;</P><DLCLASS="variablelist"><DTCLASS="term"><BCLASS="emphasis.bold">#</B></DT><DDCLASS="listitem"><PCLASS="para">Begins a comment line (the entire line is ignored).&#13;</P></DD><DTCLASS="term"><EMCLASS="emphasis">tab</EM></DT><DDCLASS="listitem"><PCLASS="para">Continues the previous line.&#13;</P></DD><DTCLASS="term"><EMCLASS="emphasis">space</EM></DT><DDCLASS="listitem"><PCLASS="para">Continues the previous line.&#13;</P></DD><DTCLASS="term"><BCLASS="emphasis.bold">C</B><CODECLASS="literal">w </CODE><EMCLASS="emphasis">localhost</EM></DT><DDCLASS="listitem"><PCLASS="para">Adds <EMCLASS="emphasis">localhost</EM> to class <CODECLASS="literal">w</CODE> (see &#167;32.5.8).&#13;</P></DD><DTCLASS="term"><BCLASS="emphasis.bold">C</B><CODECLASS="literal">{GuestDomains} </CODE><EMCLASS="emphasis">guest.com visit.com</EM></DT><DDCLASS="listitem"><PCLASS="para">Adds <EMCLASS="emphasis">guest.com</EM> and <EMCLASS="emphasis">visit.com</EM> to themulti-character class named <CODECLASS="literal">{GuestDomains}</CODE>(see &#167;32.1.1).&#13;</P></DD><DTCLASS="term"><BCLASS="emphasis.bold">D</B><CODECLASS="literal">m</CODE><EMCLASS="emphasis">our.domain</EM></DT><DDCLASS="listitem"><PCLASS="para">Defines macro <CODECLASS="literal">m</CODE> with the value <EMCLASS="emphasis">our.domain</EM>(see &#167;31.10.24).&#13;</P></DD><DTCLASS="term"><BCLASS="emphasis.bold">D</B><CODECLASS="literal">{OurOldDomain}</CODE><EMCLASS="emphasis">old.domain</EM></DT><DDCLASS="listitem"><PCLASS="para">Defines multi-character macro name <CODECLASS="literal">{OurOldDomain}</CODE>with the value <EMCLASS="emphasis">old.domain</EM>(see &#167;31.3).&#13;</P></DD><DTCLASS="term"><BCLASS="emphasis.bold">E</B><CODECLASS="literal">HOME</CODE><BCLASS="emphasis.bold">=</B><EMCLASS="emphasis">/u/mail</EM></DT><DDCLASS="listitem"><PCLASS="para">Assigns value <EMCLASS="emphasis">/u/mail</EM> to the environmental variable <CODECLASS="literal">HOME</CODE>.(Such assignments are only available to delivery agents that<EMCLASS="emphasis">sendmail</EM> executes.)(See 22.2.1.)&#13;</P></DD><DTCLASS="term"><BCLASS="emphasis.bold">E</B><CODECLASS="literal">USER</CODE></DT><DDCLASS="listitem"><PCLASS="para">Imports the value of <CODECLASS="literal">USER</CODE> from the environment and makesit available to delivery agents.&#13;</P></DD><DTCLASS="term"><BCLASS="emphasis.bold">F</B><CODECLASS="literal">w </CODE><EMCLASS="emphasis">/etc/sendmail.cw</EM></DT><DDCLASS="listitem"><PCLASS="para">Fills the class <CODECLASS="literal">w</CODE> with values read from the <EMCLASS="emphasis">/etc/sendmail.cw</EM> file(see &#167;19.6.26).&#13;</P></DD><DTCLASS="term"><BCLASS="emphasis.bold">F</B><CODECLASS="literal">k </CODE>|<EMCLASS="emphasis">/usr/sbin/showuu</EM></DT><DDCLASS="listitem"><PCLASS="para">Runs the program <EMCLASS="emphasis">/usr/sbin/showuu</EM> and fillsthe class <CODECLASS="literal">k</CODE> with values printed bythat program.(see &#167;32.5.2).&#13;</P></DD><DTCLASS="term"><BCLASS="emphasis.bold">H</B><CODECLASS="literal">Date: </CODE><EMCLASS="emphasis">$a</EM></DT><DDCLASS="listitem"><PCLASS="para">Defines the <CODECLASS="literal">Date:</CODE> header with the value<EMCLASS="emphasis">$a</EM>(see &#167;35.10.10).&#13;</P></DD><DTCLASS="term"><BCLASS="emphasis.bold">H</B><CODECLASS="literal">?P?Return-Path: </CODE><EMCLASS="emphasis">&lt;$g&gt;</EM></DT><DDCLASS="listitem"><PCLASS="para">Defines the <CODECLASS="literal">Return-Path:</CODE> header with thevalue <EMCLASS="emphasis">&lt;$g&gt;</EM>. This header will only be outputif the <BCLASS="emphasis.bold">P</B> in <CODECLASS="literal">?P?</CODE> appears in the deliveryagent's <BCLASS="emphasis.bold">F=</B> equate(see &#167;35.4).&#13;</P></DD><DTCLASS="term"><BCLASS="emphasis.bold">K</B><EMCLASS="emphasis">uid text -z: -k2 -v0 /etc/passwd</EM></DT><DDCLASS="listitem"><PCLASS="para">Declares a database named <EMCLASS="emphasis">uid</EM> to be of class <EMCLASS="emphasis">text</EM>,which will look up keys in the flat file named <EMCLASS="emphasis">/etc/passwd</EM>(see &#167;33.8.18).The <EMCLASS="emphasis">-z:</EM>, <EMCLASS="emphasis">-k2</EM>, and <EMCLASS="emphasis">-v0</EM> say that <EMCLASS="emphasis">/etc/passwd</EM>has colon-delimited fields, that the key will be in theindex 2 field, and the value in the index 0 field,thus converting <EMCLASS="emphasis">uid</EM> values to login names,see &#167;33.3.4.12).&#13;</P></DD><DTCLASS="term"><BCLASS="emphasis.bold">M</B><EMCLASS="emphasis">name</EM><BCLASS="emphasis.bold">,</B><EMCLASS="emphasis"> equate</EM><BCLASS="emphasis.bold">=</B><EMCLASS="emphasis">value, ...</EM></DT><DDCLASS="listitem"><PCLASS="para">Declares a mail delivery agent. The <EMCLASS="emphasis">name</EM> is the symbolicname for this agent. The items in the <EMCLASS="emphasis">equate</EM> list are described in the next section, &quot;Delivery Agent Equates.&quot;&#13;</P></DD><DTCLASS="term"><BCLASS="emphasis.bold">O </B><CODECLASS="literal">MaxQueueRunSize=</CODE><EMCLASS="emphasis">100</EM></DT><DDCLASS="listitem"><PCLASS="para">Gives the option <CODECLASS="literal">MaxQueueRunSize</CODE> the value <EMCLASS="emphasis">100</EM>(see &#167;34.8.38).Note that there must be a spacebetween the <BCLASS="emphasis.bold">O</B> and the option name.Options are summarized later in this chapter.&#13;</P></DD><DTCLASS="term"><BCLASS="emphasis.bold">O</B><EMCLASS="emphasis">J/var/forward/$u:$z/.forward</EM></DT><DDCLASS="listitem"><PCLASS="para">Uses the old single-character name <EMCLASS="emphasis">J</EM> to define the<EMCLASS="emphasis">ForwardPath</EM> option(see &#167;34.8.27).&#13;</P></DD><DTCLASS="term"><BCLASS="emphasis.bold">P</B><CODECLASS="literal">bulk=</CODE><EMCLASS="emphasis">-60</EM></DT><DDCLASS="listitem"><PCLASS="para">Associates the symbolic name <CODECLASS="literal">bulk</CODE> with a delivery priorityof <EMCLASS="emphasis">-60</EM>. These symbolic names are compared to the<CODECLASS="literal">Precedence:</CODE> header (if one) during delivery, andused to begin a message's priority in the queue(see &#167;35.8).&#13;</P></DD><DTCLASS="term"><BCLASS="emphasis.bold">R</B>LHS <EMCLASS="emphasis">tabs</EM> RHS [<EMCLASS="emphasis">tabs</EM> COMMENT ]</DT><DDCLASS="listitem"><PCLASS="para">Defines a rewriting rule (do-while clause) where the RHSrewrites an address while the LHS comparison evaluates to true.The LHS and RHS must be separated by one or more<EMCLASS="emphasis">tab</EM> characters. Optional <EMCLASS="emphasis">tabs</EM> and a COMMENT mayfollow and are not part of the rewriting rule(see &#167;28.1).&#13;</P></DD><DTCLASS="term"><BCLASS="emphasis.bold">S</B><EMCLASS="emphasis">name</EM>[<BCLASS="emphasis.bold">=</B><EMCLASS="emphasis">val</EM>]</DT><DDCLASS="listitem"><PCLASS="para">Declares a rule-set start to have the name <EMCLASS="emphasis">name</EM> (where <EMCLASS="emphasis">name</EM> is either a number or is symbolic text).When <EMCLASS="emphasis">name</EM> is symbolic, an optional numericvalue <EMCLASS="emphasis">val</EM> may be assigned to it(see &#167;29.1).&#13;</P></DD><DTCLASS="term"><BCLASS="emphasis.bold">T </B><EMCLASS="emphasis">bob jane</EM></DT><DDCLASS="listitem"><PCLASS="para">Declares that the users <EMCLASS="emphasis">bob</EM> and <EMCLASS="emphasis">jane</EM> are &quot;trusted&quot;and may use the <BCLASS="emphasis.bold">-f</B> command-line switch to precondition the senderidentity. Users who are not trusted and who use the<BCLASS="emphasis.bold">-f</B> switch cause a warning to be included in the outgoingmail headers(see &#167;22.8.1).&#13;</P></DD><DTCLASS="term"><BCLASS="emphasis.bold">V</B><EMCLASS="emphasis">7/Berkeley</EM></DT><DDCLASS="listitem"><PCLASS="para">Specifies the version of the configuration file to be<EMCLASS="emphasis">7</EM>. An optional slash and a vendoridentifier may follow, as <EMCLASS="emphasis">/Berkeley</EM>(see &#167;27.5).</P></DD></DL></DIV></DIV><DIVCLASS="htmlnav"><P></P><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch01_05.htm"TITLE="1.5 Hints"><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 1.5 Hints"BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="book"HREF="index.htm"TITLE="sendmail Desktop Reference"><IMGSRC="../gifs/txthome.gif"ALT="sendmail Desktop Reference"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch02_02.htm"TITLE="2.2 Delivery Agent Equates"><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 2.2 Delivery Agent Equates"BORDER="0"></A></TD></TR><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172">1.5 Hints</TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171">&nbsp;</TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172">2.2 Delivery Agent Equates</TD></TR></TABLE><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><PCLASS="nav"><FONTSIZE="-1">[ <AHREF="../index.htm"TITLE="The Networking CD Bookshelf">Library Home</A> | <AHREF="../dnsbind/index.htm"TITLE="DNS &amp; BIND">DNS &amp; BIND</A> | <AHREF="../tcpip/index.htm"TITLE="TCP/IP Network Administration">TCP/IP</A> | <AHREF="../sendmail/index.htm"TITLE="sendmail">sendmail</A> | <AHREF="index.htm"TITLE="sendmail Desktop Reference">sendmail Reference</A> | <AHREF="../firewall/index.htm"TITLE="Building Internet Firewalls">Firewalls</A> | <AHREF="../puis/index.htm"TITLE="Practical UNIX &amp; Internet Security">Practical Security</A> ]</FONT></P></DIV></BODY></HTML>