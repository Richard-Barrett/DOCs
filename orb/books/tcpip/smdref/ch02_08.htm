<HTML><HEAD><TITLE>[Chapter 2] 2.8 Rule Sets</TITLE><METANAME="DC.title"CONTENT="sendmail Desktop Reference"><METANAME="DC.creator"CONTENT="Bryan Costales &amp; Eric Allman"><METANAME="DC.publisher"CONTENT="O'Reilly &amp; Associates, Inc."><METANAME="DC.date"CONTENT="1999-02-04T00:04:23Z"><METANAME="DC.type"CONTENT="Text.Monograph"><METANAME="DC.format"CONTENT="text/html"SCHEME="MIME"><METANAME="DC.source"CONTENT="1-56592-278-6"SCHEME="ISBN"><METANAME="DC.language"CONTENT="en-US"><METANAME="generator"CONTENT="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><LINKREV="made"HREF="mailto:online-books@oreilly.com"TITLE="Online Books Comments"><LINKREL="up"HREF="ch02_01.htm"TITLE="2. The sendmail.cf File"><LINKREL="prev"HREF="ch02_07.htm"TITLE="2.7 The Timeout Option"><LINKREL="next"HREF="ch02_09.htm"TITLE="2.9 Delivery Agent S= and R="></HEAD><BODYBGCOLOR="#FFFFFF"TEXT="#000000"><DIVCLASS="htmlnav"><H1><IMGSRC="gifs/smbanner.gif"ALT="sendmail Desktop Reference"USEMAP="#srchmap"BORDER="0"></H1><MAPNAME="srchmap"><AREASHAPE="RECT"COORDS="0,0,466,65"HREF="index.htm"ALT="sendmail Desktop Reference"><AREASHAPE="RECT"COORDS="467,0,514,18"HREF="../search/rsrch.htm"ALT="Search this book"></MAP><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch02_07.htm"TITLE="2.7 The Timeout Option"><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 2.7 The Timeout Option"BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><B><FONTFACE="ARIEL,HELVETICA,HELV,SANSERIF"SIZE="-1">Chapter 2<BR>The sendmail.cf File</FONT></B></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch02_09.htm"TITLE="2.9 Delivery Agent S= and R="><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 2.9 Delivery Agent S= and R="BORDER="0"></A></TD></TR></TABLE>&nbsp;<HRALIGN="LEFT"WIDTH="515"TITLE="footer"></DIV><DIVCLASS="SECT1"><H2CLASS="sect1"><ACLASS="title"NAME="SMQR-CH-2-SECT-8">2.8 Rule Sets</A></H2><PCLASS="para">Rule sets are declared in the configuration file by beginning a linewith the letter <CODECLASS="literal">S</CODE>:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen"><BCLASS="emphasis.bold">S</B><CODECLASS="replaceable"><I>number</I></CODE><BCLASS="emphasis.bold">S</B><CODECLASS="replaceable"><I>name</I></CODE><BCLASS="emphasis.bold">S</B><CODECLASS="replaceable"><I>name</I></CODE><BCLASS="emphasis.bold">=</B><CODECLASS="replaceable"><I>number</I></CODE></PRE></BLOCKQUOTE></P><PCLASS="para">Rule sets are identified either by <EMCLASS="emphasis">number</EM> or symbolic <EMCLASS="emphasis">name</EM>.When identified by name, a number is internally assigned by<EMCLASS="emphasis">sendmail</EM>. An optional <BCLASS="emphasis.bold">=</B> and number mayfollow a name to force specific association of number to name.</P><PCLASS="para">Rule sets numbered 0 through 9 are reserved for <EMCLASS="emphasis">sendmail</EM>'s internal use.Addresses are rewritten by a specific sequence of rules numbered0 through 4 (see<ACLASS="xref"HREF="ch02_08.htm#SMQR-CH-2-FIG-1"TITLE="Sequence of rule sets; envelope (solid) versus header (dashed)">Figure 2.1</A>).</P><H4CLASS="figure"><ACLASS="title"NAME="SMQR-CH-2-FIG-1">Figure 2.1: Sequence of rule sets; envelope (solid) versus header (dashed)</A></H4><IMGCLASS="graphic"SRC="figs/smq_0201.gif"ALT="Figure 2.1"><DLCLASS="variablelist"><DTCLASS="term"><BCLASS="emphasis.bold">S3</B></DT><DDCLASS="listitem"><PCLASS="para">Rewrites all addresses to prepare them for entry into the sequencefor rule sets. It usually focuses on the host part of an addressand detects the various forms of the local hostname, so thatlocal delivery can take place(see &#167;29.4).&#13;</P></DD><DTCLASS="term"><BCLASS="emphasis.bold">S4</B></DT><DDCLASS="listitem"><PCLASS="para">Undoes any special rewriting done by rule set 3.Rule set 4 is always last(see &#167;29.5).&#13;</P></DD><DTCLASS="term"><BCLASS="emphasis.bold">S0</B></DT><DDCLASS="listitem"><PCLASS="para">Selects a delivery agent that determines the <BCLASS="emphasis.bold">R=</B> and <BCLASS="emphasis.bold">S=</B>rule sets. It also selects the recipient user (which is separatelyrewritten and placed into <BCLASS="emphasis.bold">$u</B>) and the recipient host (whichis placed as-is into <BCLASS="emphasis.bold">$h</B>).(See &#167;.29.6)&#13;</P></DD><DTCLASS="term"><BCLASS="emphasis.bold">S1</B></DT><DDCLASS="listitem"><PCLASS="para">Rewrites all sender addresses(see &#167;29.9).&#13;</P></DD><DTCLASS="term"><BCLASS="emphasis.bold">S2</B></DT><DDCLASS="listitem"><PCLASS="para">Rewrites all recipient addresses(see &#167;29.8).&#13;</P></DD><DTCLASS="term"><BCLASS="emphasis.bold">S5</B></DT><DDCLASS="listitem"><PCLASS="para">&#13;(Not shown in  <ACLASS="xref"HREF="ch02_08.htm#SMQR-CH-2-FIG-1"TITLE="Sequence of rule sets; envelope (solid) versus header (dashed)">Figure 2.1</A>.)Can select a new delivery agent (just like rule set 0).If the address is <EMCLASS="emphasis">not</EM> matched in the <EMCLASS="emphasis">aliases</EM>(5) database,it is passed to rule set 5. Addresses are given to rule set 5 before<EMCLASS="emphasis">~/.forward</EM> files are processed(see &#167;29.7).</P></DD></DL></DIV><DIVCLASS="htmlnav"><P></P><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch02_07.htm"TITLE="2.7 The Timeout Option"><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 2.7 The Timeout Option"BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="book"HREF="index.htm"TITLE="sendmail Desktop Reference"><IMGSRC="../gifs/txthome.gif"ALT="sendmail Desktop Reference"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch02_09.htm"TITLE="2.9 Delivery Agent S= and R="><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 2.9 Delivery Agent S= and R="BORDER="0"></A></TD></TR><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172">2.7 The Timeout Option</TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171">&nbsp;</TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172">2.9 Delivery Agent S= and R=</TD></TR></TABLE><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><PCLASS="nav"><FONTSIZE="-1">[ <AHREF="../index.htm"TITLE="The Networking CD Bookshelf">Library Home</A> | <AHREF="../dnsbind/index.htm"TITLE="DNS &amp; BIND">DNS &amp; BIND</A> | <AHREF="../tcpip/index.htm"TITLE="TCP/IP Network Administration">TCP/IP</A> | <AHREF="../sendmail/index.htm"TITLE="sendmail">sendmail</A> | <AHREF="index.htm"TITLE="sendmail Desktop Reference">sendmail Reference</A> | <AHREF="../firewall/index.htm"TITLE="Building Internet Firewalls">Firewalls</A> | <AHREF="../puis/index.htm"TITLE="Practical UNIX &amp; Internet Security">Practical Security</A> ]</FONT></P></DIV></BODY></HTML>