<HTML><HEAD><TITLE>[Chapter 2] 2.10 The check_ Rule Sets</TITLE><METANAME="DC.title"CONTENT="sendmail Desktop Reference"><METANAME="DC.creator"CONTENT="Bryan Costales &amp; Eric Allman"><METANAME="DC.publisher"CONTENT="O'Reilly &amp; Associates, Inc."><METANAME="DC.date"CONTENT="1999-02-04T00:04:24Z"><METANAME="DC.type"CONTENT="Text.Monograph"><METANAME="DC.format"CONTENT="text/html"SCHEME="MIME"><METANAME="DC.source"CONTENT="1-56592-278-6"SCHEME="ISBN"><METANAME="DC.language"CONTENT="en-US"><METANAME="generator"CONTENT="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><LINKREV="made"HREF="mailto:online-books@oreilly.com"TITLE="Online Books Comments"><LINKREL="up"HREF="ch02_01.htm"TITLE="2. The sendmail.cf File"><LINKREL="prev"HREF="ch02_09.htm"TITLE="2.9 Delivery Agent S= and R="><LINKREL="next"HREF="ch02_11.htm"TITLE="2.11 Rules"></HEAD><BODYBGCOLOR="#FFFFFF"TEXT="#000000"><DIVCLASS="htmlnav"><H1><IMGSRC="gifs/smbanner.gif"ALT="sendmail Desktop Reference"USEMAP="#srchmap"BORDER="0"></H1><MAPNAME="srchmap"><AREASHAPE="RECT"COORDS="0,0,466,65"HREF="index.htm"ALT="sendmail Desktop Reference"><AREASHAPE="RECT"COORDS="467,0,514,18"HREF="../search/rsrch.htm"ALT="Search this book"></MAP><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch02_09.htm"TITLE="2.9 Delivery Agent S= and R="><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 2.9 Delivery Agent S= and R="BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><B><FONTFACE="ARIEL,HELVETICA,HELV,SANSERIF"SIZE="-1">Chapter 2<BR>The sendmail.cf File</FONT></B></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch02_11.htm"TITLE="2.11 Rules"><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 2.11 Rules"BORDER="0"></A></TD></TR></TABLE>&nbsp;<HRALIGN="LEFT"WIDTH="515"TITLE="footer"></DIV><DIVCLASS="SECT1"><H2CLASS="sect1"><ACLASS="title"NAME="SMQR-CH-2-SECT-10">2.10 The check_ Rule Sets</A></H2><PCLASS="para">V8.8 <EMCLASS="emphasis">sendmail</EM> has introduced a suite of named rulesets that have special internal meaning.If one of these rule setsdoes not exist, the address is accepted. If it exists and ifthe rule set returnsanything other than an <CODECLASS="literal">#error</CODE> delivery agent,the message is accepted. Otherwise the message is rejected.&#13;</P><DLCLASS="variablelist"><DTCLASS="term"><BCLASS="emphasis.bold">check_compat</B></DT><DDCLASS="listitem"><PCLASS="para">Compares or contrasts each envelope sender and envelope recipientpair of addresses just before delivery, and validatesbased on the result. The workspace looks like this:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen"><CODECLASS="replaceable"><I>sender</I></CODE> $| <CODECLASS="replaceable"><I>recipient</I></CODE></PRE></BLOCKQUOTE></P><PCLASS="para">The sender address is separated from the recipient address by a single tokenthat is the <BCLASS="emphasis.bold">$|</B> operator(see &#167;29.10.4).&#13;</P></DD><DTCLASS="term"><BCLASS="emphasis.bold">check_mail</B></DT><DDCLASS="listitem"><PCLASS="para">Validates the sender-envelope address as given inthe SMTP MAIL command.The workspace, on entry, contains a hostname thatshould be preprocessed by rule set 3(see &#167;29.10.1).&#13;</P></DD><DTCLASS="term"><BCLASS="emphasis.bold">check_rcpt</B></DT><DDCLASS="listitem"><PCLASS="para">Validates the recipient-envelope address as given inthe SMTP RCPT command.The workspace, on entry, contains a hostname thatshould be preprocessed by rule set 3(see &#167;29.10.2).&#13;</P></DD><DTCLASS="term"><BCLASS="emphasis.bold">check_relay</B></DT><DDCLASS="listitem"><PCLASS="para">Validates incoming network connections and can be used if <EMCLASS="emphasis">libwrap.a</EM> codewas omitted from your release of <EMCLASS="emphasis">sendmail</EM>.The workspace looks like this:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen"><CODECLASS="replaceable"><I>hostname</I></CODE> $| <CODECLASS="replaceable"><I>IPnumber</I></CODE></PRE></BLOCKQUOTE></P><PCLASS="para">The hostname is separated from the IP number by a single tokenthat is the <BCLASS="emphasis.bold">$|</B> operator(see &#167;29.10.3).</P></DD></DL></DIV><DIVCLASS="htmlnav"><P></P><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch02_09.htm"TITLE="2.9 Delivery Agent S= and R="><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 2.9 Delivery Agent S= and R="BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="book"HREF="index.htm"TITLE="sendmail Desktop Reference"><IMGSRC="../gifs/txthome.gif"ALT="sendmail Desktop Reference"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch02_11.htm"TITLE="2.11 Rules"><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 2.11 Rules"BORDER="0"></A></TD></TR><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172">2.9 Delivery Agent S= and R=</TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171">&nbsp;</TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172">2.11 Rules</TD></TR></TABLE><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><PCLASS="nav"><FONTSIZE="-1">[ <AHREF="../index.htm"TITLE="The Networking CD Bookshelf">Library Home</A> | <AHREF="../dnsbind/index.htm"TITLE="DNS &amp; BIND">DNS &amp; BIND</A> | <AHREF="../tcpip/index.htm"TITLE="TCP/IP Network Administration">TCP/IP</A> | <AHREF="../sendmail/index.htm"TITLE="sendmail">sendmail</A> | <AHREF="index.htm"TITLE="sendmail Desktop Reference">sendmail Reference</A> | <AHREF="../firewall/index.htm"TITLE="Building Internet Firewalls">Firewalls</A> | <AHREF="../puis/index.htm"TITLE="Practical UNIX &amp; Internet Security">Practical Security</A> ]</FONT></P></DIV></BODY></HTML>