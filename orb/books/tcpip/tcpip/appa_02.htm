<HTML><HEAD><TITLE>[Appendix A] A.2 The PPP Daemon</TITLE><METANAME="DC.title"CONTENT="TCP/IP Network Administration"><METANAME="DC.creator"CONTENT="Craig Hunt"><METANAME="DC.publisher"CONTENT="O'Reilly &amp; Associates, Inc."><METANAME="DC.date"CONTENT="1999-02-04T01:42:33Z"><METANAME="DC.type"CONTENT="Text.Monograph"><METANAME="DC.format"CONTENT="text/html"SCHEME="MIME"><METANAME="DC.source"CONTENT="1-56592-322-7"SCHEME="ISBN"><METANAME="DC.language"CONTENT="en-US"><METANAME="generator"CONTENT="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><LINKREV="made"HREF="mailto:online-books@oreilly.com"TITLE="Online Books Comments"><LINKREL="up"HREF="appa_01.htm"TITLE="A. PPP Tools"><LINKREL="prev"HREF="appa_01.htm"TITLE="A.1 Dial-Up IP"><LINKREL="next"HREF="appa_03.htm"TITLE="A.3 chat"></HEAD><BODYBGCOLOR="#FFFFFF"TEXT="#000000"><DIVCLASS="htmlnav"><H1><IMGSRC="gifs/smbanner.gif"ALT="TCP/IP Network Administration"USEMAP="#srchmap"BORDER="0"></H1><MAPNAME="srchmap"><AREASHAPE="RECT"COORDS="0,0,466,65"HREF="index.htm"ALT="TCP/IP Network Administration"><AREASHAPE="RECT"COORDS="467,0,514,18"HREF="../search/tsrch.htm"ALT="Search this book"></MAP><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="appa_01.htm"TITLE="A.1 Dial-Up IP"><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: A.1 Dial-Up IP"BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><B><FONTFACE="ARIEL,HELVETICA,HELV,SANSERIF"SIZE="-1">Appendix A<BR>PPP Tools</FONT></B></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="appa_03.htm"TITLE="A.3 chat"><IMGSRC="../gifs/txtnexta.gif"ALT="Next: A.3 chat"BORDER="0"></A></TD></TR></TABLE>&nbsp;<HRALIGN="LEFT"WIDTH="515"TITLE="footer"></DIV><DIVCLASS="SECT1"><H2CLASS="sect1"><ACLASS="title"NAME="TCP2-AP-1-SECT-2">A.2 The PPP Daemon</A></H2><PCLASS="para"><ACLASS="indexterm"NAME="TCP2-AP-1-IX-POINT-TO-POINT-PROTOCOL-PPP-DAEMON-PPPD-TOOLS-REFERENCE"></A>The PPP Daemon (<BCLASS="emphasis.bold">pppd</B>) is a freely available implementation ofthe Point-to-Point Protocol (PPP) that runs on many UNIX systems.Examples of configuring and using <BCLASS="emphasis.bold">pppd</B> are covered in <ACLASS="xref"HREF="ch06_01.htm"TITLE="Configuring the Interface ">Chapter 6</A>.The syntax of the <BCLASS="emphasis.bold">pppd</B> command is:</P><DLCLASS="variablelist"><DTCLASS="term"></DT><DDCLASS="listitem"><PCLASS="para"><BCLASS="emphasis.bold">pppd </B>[<CODECLASS="replaceable"><I>device</I></CODE>] [<CODECLASS="replaceable"><I>speed</I></CODE>] [<CODECLASS="replaceable"><I>options</I></CODE>]</P></DD></DL><PCLASS="para"><CODECLASS="replaceable"><I>device</I></CODE> is the name of the serial port over which the PPPprotocol operates and <CODECLASS="replaceable"><I>speed</I></CODE> is the transmission speed of thatport in bits per second. The complexity of this command comes not fromthese simple parameters but from the large number of <CODECLASS="replaceable"><I>options</I></CODE>that it supports. There are so many options, in fact, that they areoften stored in a file. There are three options files that can be used<ACLASS="indexterm"NAME="AUTOID-19846"></A><ACLASS="indexterm"NAME="AUTOID-19848"></A>with <BCLASS="emphasis.bold">pppd</B>: the <EMCLASS="emphasis">/etc/ppp/options</EM> file, which is used to set<ACLASS="indexterm"NAME="AUTOID-19853"></A>system-wide <BCLASS="emphasis.bold">pppd</B> options; the <EMCLASS="emphasis">~/.ppprc</EM> file, which is usedby an individual to set personal <BCLASS="emphasis.bold">pppd</B> options, and the<EMCLASS="emphasis">/etc/ppp/options.</EM>device file, which sets options for a serial<ACLASS="indexterm"NAME="AUTOID-19859"></A><ACLASS="indexterm"NAME="AUTOID-19861"></A>device, e.g., <EMCLASS="emphasis">/etc/ppp/options.cua0</EM> sets options for cua0. Theorder of precedence for options is that those specified in the<EMCLASS="emphasis">/etc/ppp/options</EM>.device file are the highest priority, followedby those defined on the command line, then those in the <EMCLASS="emphasis">~/.ppprc</EM>file, and, finally, those defined in the <EMCLASS="emphasis">/etc/ppp/options</EM>file. Some options that relate to system security, once defined in the<EMCLASS="emphasis">/etc/ppp/options</EM> file, cannot be overridden by the user throughthe command line or the <EMCLASS="emphasis">~/.ppprc</EM> file. The system administratorcan override any option set by the user by setting the option in the<EMCLASS="emphasis">/etc/ppp/options</EM>.device file.</P><PCLASS="para">The following list contains all of the <BCLASS="emphasis.bold">pppd</B> options exceptthose that do not relate to TCP/IP:</P><DLCLASS="variablelist"><DTCLASS="term"><CODECLASS="replaceable"><I>local_IP_address</I></CODE>:<CODECLASS="replaceable"><I>remote_IP_address</I></CODE></DT><DDCLASS="listitem"><PCLASS="para">Defines static local and remote IP addresses. Either address maybe omitted. For example: 172.16.25.3: defines only the local address,while :172.16.25.12 defines only the remote address. The default localaddress is the IP address associated with the local system's hostname.</P></DD><DTCLASS="term"><BCLASS="emphasis.bold">-ac</B></DT><DDCLASS="listitem"><PCLASS="para">Disables Address/Control compression negotiation.</P></DD><DTCLASS="term"><BCLASS="emphasis.bold">-all</B></DT><DDCLASS="listitem"><PCLASS="para">Disables all LCP and IPCP negotiations.</P></DD><DTCLASS="term"><BCLASS="emphasis.bold">-am</B></DT><DDCLASS="listitem"><PCLASS="para">Disables <BCLASS="emphasis.bold">asyncmap</B> negotiation. Sends all control characters astwo-character escape sequences.&#13;</P></DD><DTCLASS="term"><BCLASS="emphasis.bold">asyncmap</B> <CODECLASS="replaceable"><I>map</I></CODE></DT><DDCLASS="listitem"><PCLASS="para">Defines the ASCII control characters that must be sent as two-characterescape sequences. The first 32 ASCII characters are control characters.<CODECLASS="replaceable"><I>map</I></CODE> is a 32-bit hex number with each bit representing a controlcharacter. Bit 0 (00000001) represents the character 0x00; bit 31(80000000) represents the character 0x1f. If a bit is on in <CODECLASS="replaceable"><I>map</I></CODE>,the character represented by that bit must be sent as an escape sequence.If no <BCLASS="emphasis.bold">asyncmap</B> option is specified, all control characters are sentas escape sequences. The <BCLASS="emphasis.bold">asyncmap</B> option can also be written inthe form <BCLASS="emphasis.bold">-as</B> <CODECLASS="replaceable"><I>map</I></CODE>.</P></DD><DTCLASS="term"><BCLASS="emphasis.bold">auth</B></DT><DDCLASS="listitem"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-19913"></A>Requires the use of an authentication protocol. See <ACLASS="xref"HREF="ch06_01.htm"TITLE="Configuring the Interface ">Chapter 6</A> for adiscussion of the authentication protocols CHAP and PAP.</P></DD><DTCLASS="term"><BCLASS="emphasis.bold">bsdcomp</B> <CODECLASS="replaceable"><I>receive</I></CODE>,<CODECLASS="replaceable"><I>transmit</I></CODE></DT><DDCLASS="listitem"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-19924"></A>Enables the BSD-Compress scheme to compress packets. The maximumlength code word used to compress packets accepted by this host is<CODECLASS="replaceable"><I>receive</I></CODE> bits long. The maximum code word length used to compresspackets sent by this host is <CODECLASS="replaceable"><I>transmit</I></CODE> bits long. Acceptable codeword length is 9 to 15 bits. Disable compression when receivingor transmitting by placing a 0 in <CODECLASS="replaceable"><I>receive</I></CODE> or <CODECLASS="replaceable"><I>transmit</I></CODE>,respectively.</P></DD><DTCLASS="term"><BCLASS="emphasis.bold">-bsdcomp</B></DT><DDCLASS="listitem"><PCLASS="para">Disables BSD-Compress compression.</P></DD><DTCLASS="term"><BCLASS="emphasis.bold">+chap</B></DT><DDCLASS="listitem"><PCLASS="para">Requires the use of the <EMCLASS="emphasis">Challenge Handshake AuthenticationProtocol</EM> (CHAP).<ACLASS="indexterm"NAME="AUTOID-19941"></A></P></DD><DTCLASS="term"><BCLASS="emphasis.bold">-chap</B></DT><DDCLASS="listitem"><PCLASS="para">Disables the use of CHAP. This is a bad idea.</P></DD><DTCLASS="term"><BCLASS="emphasis.bold">chap-interval</B></DT><DDCLASS="listitem"><PCLASS="para">Tells system to use CHAP to reauthenticate the remote system every<CODECLASS="replaceable"><I>n</I></CODE> seconds.</P></DD><DTCLASS="term"><BCLASS="emphasis.bold">chap-max-challenge</B> <CODECLASS="replaceable"><I>n</I></CODE></DT><DDCLASS="listitem"><PCLASS="para">Tells system to send the CHAP challenge to the remote system a maximumof <CODECLASS="replaceable"><I>n</I></CODE> times until the remote system responds. The default is10.</P></DD><DTCLASS="term"><BCLASS="emphasis.bold">chap-restart</B> <CODECLASS="replaceable"><I>n</I></CODE></DT><DDCLASS="listitem"><PCLASS="para">Tells system to wait <CODECLASS="replaceable"><I>n</I></CODE> seconds before retransmitting a CHAPchallenges when the remote system fails to respond. The default is 3seconds.&#13;</P></DD><DTCLASS="term"><BCLASS="emphasis.bold">connect</B> <CODECLASS="replaceable"><I>script</I></CODE></DT><DDCLASS="listitem"><PCLASS="para">Invokes a <CODECLASS="replaceable"><I>script</I></CODE> to create the serial connection. Anyscripting language can be used, but <BCLASS="emphasis.bold">chat</B> is the most common. See<ACLASS="xref"HREF="ch06_01.htm"TITLE="Configuring the Interface ">Chapter 6</A> for an example of using <BCLASS="emphasis.bold">connect</B> to invoke an inline<BCLASS="emphasis.bold">chat</B> script.</P></DD><DTCLASS="term"><BCLASS="emphasis.bold">crtscts</B></DT><DDCLASS="listitem"><PCLASS="para">Enables hardware flow control (RTS/CTS).</P></DD><DTCLASS="term"><BCLASS="emphasis.bold">-crtscts</B></DT><DDCLASS="listitem"><PCLASS="para">Disables hardware flow control (RTS/CTS).</P></DD><DTCLASS="term"><BCLASS="emphasis.bold">debug</B></DT><DDCLASS="listitem"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-19994"></A>Logs all control packets sent or received using <BCLASS="emphasis.bold">syslogd</B> with facility<EMCLASS="emphasis">daemon</EM> and level <EMCLASS="emphasis">debug</EM>. The <BCLASS="emphasis.bold">debug</B> option can also bewritten as <BCLASS="emphasis.bold">-d</B>.</P></DD><DTCLASS="term"><BCLASS="emphasis.bold">defaultroute</B></DT><DDCLASS="listitem"><PCLASS="para">Defines the PPP link as the default route. The route is removed whenthe connection is closed.</P></DD><DTCLASS="term"><BCLASS="emphasis.bold">-defaultroute</B></DT><DDCLASS="listitem"><PCLASS="para">Prevents users from creating a default route using the<BCLASS="emphasis.bold">defaultroute</B> option.</P></DD><DTCLASS="term"><BCLASS="emphasis.bold">-detach</B></DT><DDCLASS="listitem"><PCLASS="para">Prevents <BCLASS="emphasis.bold">pppd</B> from running as a background process. See theexample in <ACLASS="xref"HREF="ch06_01.htm"TITLE="Configuring the Interface ">Chapter 6</A>.</P></DD><DTCLASS="term"><BCLASS="emphasis.bold">disconnect</B> <CODECLASS="replaceable"><I>script</I></CODE></DT><DDCLASS="listitem"><PCLASS="para">Invokes a <CODECLASS="replaceable"><I>script</I></CODE> to gracefully shut down the serial connection.Any scripting language can be used, but <BCLASS="emphasis.bold">chat</B> is the most common.<ACLASS="indexterm"NAME="AUTOID-20027"></A></P></DD><DTCLASS="term"><BCLASS="emphasis.bold">domain</B> <CODECLASS="replaceable"><I>name</I></CODE></DT><DDCLASS="listitem"><PCLASS="para">Defines the name of the local domain. Use this if <BCLASS="emphasis.bold">hostname</B>does not return a fully qualified name for the local system.</P></DD><DTCLASS="term"><BCLASS="emphasis.bold">escape</B> <CODECLASS="replaceable"><I>x,x,...</I></CODE></DT><DDCLASS="listitem"><PCLASS="para">Specifies characters that should be transmitted as two-character escapesequences. The characters are specified in a comma-separated list ofhex numbers. Any character except 0x20 - 0x3f and 0x5e can beescaped.</P></DD><DTCLASS="term"><BCLASS="emphasis.bold">file</B> <CODECLASS="replaceable"><I>file</I></CODE></DT><DDCLASS="listitem"><PCLASS="para">Defines another options file, where <CODECLASS="replaceable"><I>file</I></CODE> is the name of thenew file. Options are normally read for <EMCLASS="emphasis">/etc/ppp/options</EM>, <EMCLASS="emphasis">~/.ppprc</EM>,the command line, and <EMCLASS="emphasis">/etc/ppp/options</EM>.device. See the descriptionof these files earlier in this section.</P></DD><DTCLASS="term"><BCLASS="emphasis.bold">-ip</B></DT><DDCLASS="listitem"><PCLASS="para">Disables IP address negotiation. When used, the remote IP address mustbe explicitly defined by a <BCLASS="emphasis.bold">pppd</B> option.</P></DD><DTCLASS="term"><BCLASS="emphasis.bold">+ip-protocol</B></DT><DDCLASS="listitem"><PCLASS="para">Enables the IPCP and IP protocols, which is the default.</P></DD><DTCLASS="term"><BCLASS="emphasis.bold">-ip-protocol</B></DT><DDCLASS="listitem"><PCLASS="para">Disables the IPCP and IP protocols. This should never be used on a TCP/IPnetwork. It is for pure IPX networks.<ACLASS="indexterm"NAME="AUTOID-20068"></A></P></DD><DTCLASS="term"><BCLASS="emphasis.bold">ipcp-accept-local</B></DT><DDCLASS="listitem"><PCLASS="para">Tells system to use the local IP address provided by the remote server even if it is defined locally.</P></DD><DTCLASS="term"><BCLASS="emphasis.bold">ipcp-accept-remote</B></DT><DDCLASS="listitem"><PCLASS="para">Tells system to use the remote IP address provided by the remote server even if it is defined locally.</P></DD><DTCLASS="term"><BCLASS="emphasis.bold">ipcp-max-configure</B> <CODECLASS="replaceable"><I>n</I></CODE></DT><DDCLASS="listitem"><PCLASS="para">Tells system to send the IPCP configure-request packet a maximum of <CODECLASS="replaceable"><I>n</I></CODE> times.The default is 10.</P></DD><DTCLASS="term"><BCLASS="emphasis.bold">ipcp-max-failure</B> <CODECLASS="replaceable"><I>n</I></CODE></DT><DDCLASS="listitem"><PCLASS="para">Tells system to accept up to <CODECLASS="replaceable"><I>n</I></CODE> IPCP configure-NAKs before sendinga configure-reject. The default is 10.</P></DD><DTCLASS="term"><BCLASS="emphasis.bold">ipcp-max-terminate</B> <CODECLASS="replaceable"><I>n</I></CODE></DT><DDCLASS="listitem"><PCLASS="para">Tells system to send no more than <CODECLASS="replaceable"><I>n</I></CODE> IPCP terminate-request packetswithout receiving an acknowledgment. The default is 3.</P></DD><DTCLASS="term"><BCLASS="emphasis.bold">ipcp-restart</B> <CODECLASS="replaceable"><I>n</I></CODE></DT><DDCLASS="listitem"><PCLASS="para">Tells system to wait <CODECLASS="replaceable"><I>n</I></CODE> seconds before resending an IPCP configure-request packet.The default is 3.</P></DD><DTCLASS="term"><BCLASS="emphasis.bold">ipparam</B> <CODECLASS="replaceable"><I>string</I></CODE></DT><DDCLASS="listitem"><PCLASS="para">Passes <CODECLASS="replaceable"><I>string</I></CODE> to the ip-up and ip-down scripts.  <EMCLASS="emphasis">/etc/ppp/ip-up</EM>is a shell script executed by <BCLASS="emphasis.bold">pppd</B> when the link comesup.  <EMCLASS="emphasis">/etc/ppp/ip-down</EM> is a shell script executed by <BCLASS="emphasis.bold">pppd</B> when thelink is brought down.</P></DD><DTCLASS="term"><BCLASS="emphasis.bold">kdebug</B> <CODECLASS="replaceable"><I>n</I></CODE></DT><DDCLASS="listitem"><PCLASS="para">Enables kernel-level debugging. <CODECLASS="replaceable"><I>n</I></CODE> is 1 to print generaldebugging messages, 2 to print received packets, and 4 to printtransmitted packets.</P></DD><DTCLASS="term"><BCLASS="emphasis.bold">lcp-echo-failure</B> <CODECLASS="replaceable"><I>n</I></CODE></DT><DDCLASS="listitem"><PCLASS="para">Tells system to terminate the connection if no reply is received to <CODECLASS="replaceable"><I>n</I></CODE> LCPecho-requests. Normally echo-requests are not used for this purposebecause &quot;link down&quot; conditions are determined by the modem hardware.</P></DD><DTCLASS="term"><BCLASS="emphasis.bold">lcp-echo-interval</B> <CODECLASS="replaceable"><I>n</I></CODE></DT><DDCLASS="listitem"><PCLASS="para">Tells system to wait <CODECLASS="replaceable"><I>n</I></CODE> seconds before sending another LCP echo-request when theremote system fails to reply.</P></DD><DTCLASS="term"><BCLASS="emphasis.bold">lcp-max-configure</B> <CODECLASS="replaceable"><I>n</I></CODE></DT><DDCLASS="listitem"><PCLASS="para">Tells system to send the LCP configure-request packet a maximum of <CODECLASS="replaceable"><I>n</I></CODE> times.The default is 10.</P></DD><DTCLASS="term"><BCLASS="emphasis.bold">lcp-max-failure</B> <CODECLASS="replaceable"><I>n</I></CODE></DT><DDCLASS="listitem"><PCLASS="para">Tells system to accept up to <CODECLASS="replaceable"><I>n</I></CODE> LCP configure-NAKs before sendinga configure-reject. The default is 10.</P></DD><DTCLASS="term"><BCLASS="emphasis.bold">lcp-max-terminate</B> <CODECLASS="replaceable"><I>n</I></CODE></DT><DDCLASS="listitem"><PCLASS="para">Tells system to send no more than <CODECLASS="replaceable"><I>n</I></CODE> LCP terminate-request transmissionswithout receiving an acknowledgment. The default is 3.</P></DD><DTCLASS="term"><BCLASS="emphasis.bold">lcp-restart</B> <CODECLASS="replaceable"><I>n</I></CODE></DT><DDCLASS="listitem"><PCLASS="para">Tells system to wait <CODECLASS="replaceable"><I>n</I></CODE> seconds before resending a LCP configure-request packet.The default is 3.</P></DD><DTCLASS="term"><BCLASS="emphasis.bold">local</B></DT><DDCLASS="listitem"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-20173"></A>Tells system to ignore the DCD (Data Carrier Detect) and DTR (Data Terminal Ready)modem control lines.<ACLASS="indexterm"NAME="AUTOID-20175"></A></P></DD><DTCLASS="term"><BCLASS="emphasis.bold">lock</B></DT><DDCLASS="listitem"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-20182"></A>Tells system to use a UUCP-style lock file to ensure that <BCLASS="emphasis.bold">pppd</B> has exclusive accessto the serial device.</P></DD><DTCLASS="term"><BCLASS="emphasis.bold">login</B></DT><DDCLASS="listitem"><PCLASS="para">Tells system to use the <EMCLASS="emphasis">/etc/passwd</EM> file to authenticate PAP users. Records the login in the <EMCLASS="emphasis">wtmp</EM> file.</P></DD><DTCLASS="term"><BCLASS="emphasis.bold">modem</B></DT><DDCLASS="listitem"><PCLASS="para">Tells system to use the DCD (Data Carrier Detect) and DTR (Data Terminal Ready) modem control lines; wait for the DCD signal before opening the serial device;and drop the DTR signal when terminating a connection.</P></DD><DTCLASS="term"><BCLASS="emphasis.bold">-mn</B></DT><DDCLASS="listitem"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-20202"></A>Disables magic number negotiation.</P></DD><DTCLASS="term"><BCLASS="emphasis.bold">mru</B> <CODECLASS="replaceable"><I>n</I></CODE></DT><DDCLASS="listitem"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-20210"></A><ACLASS="indexterm"NAME="AUTOID-20212"></A>Sets the Maximum Receive Unit (MRU) to <CODECLASS="replaceable"><I>n</I></CODE> bytes. MRU is used to tellthe remote system the maximum packet size the local system can accept.The minimum is 128. The default is 1500.</P></DD><DTCLASS="term"><BCLASS="emphasis.bold">-mru</B></DT><DDCLASS="listitem"><PCLASS="para">Disables Maximum Receive Unit (MRU) negotiation.</P></DD><DTCLASS="term"><BCLASS="emphasis.bold">mtu</B> <CODECLASS="replaceable"><I>n</I></CODE></DT><DDCLASS="listitem"><PCLASS="para">Sets the Maximum Transmission Unit (MTU) to <CODECLASS="replaceable"><I>n</I></CODE> bytes. MTU definesthe maximum length of a packet that can be sent. The smaller of thelocal MTU and the remote MRU is used to define the maximum packetlength.</P></DD><DTCLASS="term"><BCLASS="emphasis.bold">name</B> <CODECLASS="replaceable"><I>name</I></CODE></DT><DDCLASS="listitem"><PCLASS="para">Tells system to use <CODECLASS="replaceable"><I>name</I></CODE> as the name of the local system for authentication purposes.</P></DD><DTCLASS="term"><BCLASS="emphasis.bold">netmask</B> <CODECLASS="replaceable"><I>mask</I></CODE></DT><DDCLASS="listitem"><PCLASS="para">Defines the subnet mask.</P></DD><DTCLASS="term"><BCLASS="emphasis.bold">noipdefault</B></DT><DDCLASS="listitem"><PCLASS="para">Instructs system not to use <BCLASS="emphasis.bold">hostname</B> to determine the local IP address. The address mustbe obtained from the remote system or explicitly set by an option.</P></DD><DTCLASS="term"><BCLASS="emphasis.bold">+pap</B></DT><DDCLASS="listitem"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-20251"></A><ACLASS="indexterm"NAME="AUTOID-20253"></A>Requires the use of the <EMCLASS="emphasis">Password Authentication Protocol</EM> (PAP).</P></DD><DTCLASS="term"><BCLASS="emphasis.bold">-pap</B></DT><DDCLASS="listitem"><PCLASS="para">Disables the use of PAP.</P></DD><DTCLASS="term"><BCLASS="emphasis.bold">papcrypt</B></DT><DDCLASS="listitem"><PCLASS="para">Instructs system not to accept passwords that are identical to those in the<EMCLASS="emphasis">/etc/ppp/pap-secrets</EM> file because the ones in the file are encrypted.Therefore the transmitted password should not match an entry in the<EMCLASS="emphasis">pap-secrets</EM> file until it is also encrypted.</P></DD><DTCLASS="term"><BCLASS="emphasis.bold">pap-max-authreq</B> <CODECLASS="replaceable"><I>n</I></CODE></DT><DDCLASS="listitem"><PCLASS="para">Tells system to transmit no more than <CODECLASS="replaceable"><I>n</I></CODE> PAP authenticate-requests if the remotesystem does not respond. The default is 10.</P></DD><DTCLASS="term"><BCLASS="emphasis.bold">pap-restart</B> <CODECLASS="replaceable"><I>n</I></CODE></DT><DDCLASS="listitem"><PCLASS="para">Tells system to wait <CODECLASS="replaceable"><I>n</I></CODE> seconds before retransmitting a PAP authenticate-request.The default is 3 seconds.</P></DD><DTCLASS="term"><BCLASS="emphasis.bold">pap-timeout</B> <CODECLASS="replaceable"><I>n</I></CODE></DT><DDCLASS="listitem"><PCLASS="para">Tells system to wait no more than <CODECLASS="replaceable"><I>n</I></CODE> seconds for the remote system to authenticateitself. When <CODECLASS="replaceable"><I>n</I></CODE> is 0, there is no time limit.</P></DD><DTCLASS="term"><BCLASS="emphasis.bold">passive</B></DT><DDCLASS="listitem"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-20295"></A><ACLASS="indexterm"NAME="AUTOID-20297"></A>Tells system to wait for a Link Control Protocol (LCP) packet from the remote system even if that system does not reply to the initial LCP packet sent by thelocal system. Without this option the local system aborts the connectionwhen it does not receive a reply. The <BCLASS="emphasis.bold">passive</B> option can also be written as <BCLASS="emphasis.bold">-p</B>.</P></DD><DTCLASS="term"><BCLASS="emphasis.bold">-pc</B></DT><DDCLASS="listitem"><PCLASS="para">Disables protocol field compression negotiation. By default, protocolfield compression is not used. Setting this option means that even ifthe remote end requests it, it will not be used.</P></DD><DTCLASS="term"><BCLASS="emphasis.bold">persist</B></DT><DDCLASS="listitem"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-20311"></A>Tells system to reopen the connection if it was terminated by a SIGHUP signal.</P></DD><DTCLASS="term"><BCLASS="emphasis.bold">pred1comp</B></DT><DDCLASS="listitem"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-20318"></A>Tells system to ask the remote system to use Predictor-1 compression.</P></DD><DTCLASS="term"><BCLASS="emphasis.bold">-pred1comp</B></DT><DDCLASS="listitem"><PCLASS="para">Tells system not to use Predictor-1 compression.</P></DD><DTCLASS="term"><BCLASS="emphasis.bold">proxyarp</B></DT><DDCLASS="listitem"><PCLASS="para">Tells system to enable proxy ARP. This adds a proxy ARP entry for the remote system tothe local system's ARP table.</P></DD><DTCLASS="term"><BCLASS="emphasis.bold">-proxyarp</B></DT><DDCLASS="listitem"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-20335"></A>Disables the <BCLASS="emphasis.bold">proxyarp</B> option, preventing users from creating proxyARP entries with <EMCLASS="emphasis">pppd</EM>.</P></DD><DTCLASS="term"><BCLASS="emphasis.bold">remotename</B> <CODECLASS="replaceable"><I>name</I></CODE></DT><DDCLASS="listitem"><PCLASS="para">Tells system to use <CODECLASS="replaceable"><I>name</I></CODE> as the remote system's name for authentication purposes.</P></DD><DTCLASS="term"><BCLASS="emphasis.bold">silent</B></DT><DDCLASS="listitem"><PCLASS="para">Tells system to wait for an LCP packet from the remote system. Do not send the firstLCP packet.</P></DD><DTCLASS="term"><BCLASS="emphasis.bold">usehostname</B></DT><DDCLASS="listitem"><PCLASS="para">Disables the <BCLASS="emphasis.bold">name</B> option, forcing the local hostname to be used forauthentication purposes.</P></DD><DTCLASS="term"><BCLASS="emphasis.bold">user</B> <CODECLASS="replaceable"><I>username</I></CODE></DT><DDCLASS="listitem"><PCLASS="para">Tells system to use <CODECLASS="replaceable"><I>username</I></CODE> for PAP authentication when challenged by a remotehost.</P></DD><DTCLASS="term"><BCLASS="emphasis.bold">-vj</B></DT><DDCLASS="listitem"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-20369"></A>Disables Van Jacobson header compression.</P></DD><DTCLASS="term"><BCLASS="emphasis.bold">-vjccomp</B></DT><DDCLASS="listitem"><PCLASS="para">Disables the connection-ID compression option in Van Jacobson headercompression.</P></DD><DTCLASS="term"><BCLASS="emphasis.bold">vj-max-slots</B> <CODECLASS="replaceable"><I>n</I></CODE></DT><DDCLASS="listitem"><PCLASS="para">Tells system to use <CODECLASS="replaceable"><I>n</I></CODE> connection slots for Van Jacobson header compression. <CODECLASS="replaceable"><I>n</I></CODE> must be a number from 2 to 16.</P></DD></DL><PCLASS="para">Several of the options listed above concern PPP security. One ofthe strengths of PPP is its security. The <EMCLASS="emphasis">Challenge Handshake<ACLASS="indexterm"NAME="AUTOID-20387"></A>Authentication Protocol</EM> (CHAP) is the preferred PPP security protocol.<ACLASS="indexterm"NAME="AUTOID-20389"></A>The <EMCLASS="emphasis">Password Authentication Protocol</EM> (PAP) is less secure and onlyprovided for compatibility with less capable systems. The usernames,IP addresses, and secret keys used for these protocols are defined in the<EMCLASS="emphasis">/etc/ppp/chap-secrets</EM> file and the <EMCLASS="emphasis">/etc/ppp/pap-secrets</EM> file. <ACLASS="xref"HREF="ch06_01.htm"TITLE="Configuring the Interface ">Chapter 6</A>shows the format of these files and describes their use.</P><PCLASS="para">It is very important that the directory <EMCLASS="emphasis">/etc/ppp</EM> and the files inthat directory not be world- or group-writable. Modifications tothe <EMCLASS="emphasis">chap-secrets</EM>, <EMCLASS="emphasis">pap-secrets</EM>, or <EMCLASS="emphasis">options</EM> files couldcompromise system security. In addition, the script files <EMCLASS="emphasis">/etc/ppp/ip-up</EM>and <EMCLASS="emphasis">/etc/ppp/ip-down</EM> may run with root privilege. If <BCLASS="emphasis.bold">pppd</B> finds afile with the name <EMCLASS="emphasis">ip-up</EM> in the <EMCLASS="emphasis">/etc/ppp</EM> directory, it executes it as soon as the PPP connection is established. The <EMCLASS="emphasis">ip-up</EM> script is usedto modify the routing table, process the <BCLASS="emphasis.bold">sendmail</B> queue, or doother tasks that depend on the presences of the network connection.The <EMCLASS="emphasis">ip-down</EM> script is executed by <BCLASS="emphasis.bold">pppd</B> after the PPP connectionis closed and is used to terminate processes that depend on the link.<ACLASS="indexterm"NAME="AUTOID-20409"></A><ACLASS="indexterm"NAME="AUTOID-20411"></A>Clearly these scripts and the <EMCLASS="emphasis">/etc/ppp</EM> directory must be protected.</P><DIVCLASS="sect2"><H3CLASS="sect2"><ACLASS="title"NAME="TCP2-AP-1-SECT-2.0.1">A.2.1 Signal processing</A></H3><PCLASS="para"><ACLASS="indexterm"NAME="TCP2-AP-1-IX-SIGNAL-PROCESSING-IN-PPPD"></A><BCLASS="emphasis.bold">pppd</B> handles the following signals:</P><DLCLASS="variablelist"><DTCLASS="term">SIGUSR1</DT><DDCLASS="listitem"><PCLASS="para">This signal toggles debugging on or off. The first SIGUSR1 signalreceived by <BCLASS="emphasis.bold">pppd</B> turns on debugging and begins logging diagnosticmessages through <BCLASS="emphasis.bold">syslogd</B> with facility set to <EMCLASS="emphasis">daemon</EM> andlevel set to <EMCLASS="emphasis">debug</EM>. The second SIGUSR1 signal turns offdebugging and closes the log file. See the <BCLASS="emphasis.bold">debug</B> optiondescribed above.</P></DD><DTCLASS="term">SIGUSR2</DT><DDCLASS="listitem"><PCLASS="para">This signal causes <BCLASS="emphasis.bold">pppd</B> to renegotiate compression. It has limitedapplicability because it is only needed to restart compression aftera fatal error has occurred. Most people close the PPP connection andopen a new one after a fatal error.</P></DD><DTCLASS="term">SIGHUP</DT><DDCLASS="listitem"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-20441"></A>This signal closes the PPP connection, returns the serial device to itsnormal operating mode, and terminates <BCLASS="emphasis.bold">pppd</B>. If the <BCLASS="emphasis.bold">persist</B>option is specified, <BCLASS="emphasis.bold">pppd</B> opens an new connection instead ofterminating.</P></DD><DTCLASS="term">SIGINT</DT><DDCLASS="listitem"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-20450"></A>This signal, or the SIGTERM signal, closes the PPP connection,returns the serial device to its normal operating mode, and terminates<BCLASS="emphasis.bold">pppd</B>. The <BCLASS="emphasis.bold">persist</B> option has no effect.<ACLASS="indexterm"NAME="AUTOID-20454"></A><ACLASS="indexterm"NAME="AUTOID-20455"></A></P></DD></DL></DIV></DIV><DIVCLASS="htmlnav"><P></P><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="appa_01.htm"TITLE="A.1 Dial-Up IP"><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: A.1 Dial-Up IP"BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="book"HREF="index.htm"TITLE="TCP/IP Network Administration"><IMGSRC="../gifs/txthome.gif"ALT="TCP/IP Network Administration"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="appa_03.htm"TITLE="A.3 chat"><IMGSRC="../gifs/txtnexta.gif"ALT="Next: A.3 chat"BORDER="0"></A></TD></TR><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172">A.1 Dial-Up IP</TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="index"HREF="index/idx_0.htm"TITLE="Book Index"><IMGSRC="../gifs/index.gif"ALT="Book Index"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172">A.3 chat</TD></TR></TABLE><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><PCLASS="nav"><FONTSIZE="-1">[ <AHREF="../index.htm"TITLE="The Networking CD Bookshelf">Library Home</A> | <AHREF="../dnsbind/index.htm"TITLE="DNS &amp; BIND">DNS &amp; BIND</A> | <AHREF="index.htm"TITLE="TCP/IP Network Administration">TCP/IP</A> | <AHREF="../sendmail/index.htm"TITLE="sendmail">sendmail</A> | <AHREF="../smdref/index.htm"TITLE="sendmail Desktop Reference">sendmail Reference</A> | <AHREF="../firewall/index.htm"TITLE="Building Internet Firewalls">Firewalls</A> | <AHREF="../puis/index.htm"TITLE="Practical UNIX &amp; Internet Security">Practical Security</A> ]</FONT></P></DIV></BODY></HTML>