<HTML><HEAD><TITLE>[Appendix B] B.4 Trace Statements</TITLE><METANAME="DC.title"CONTENT="TCP/IP Network Administration"><METANAME="DC.creator"CONTENT="Craig Hunt"><METANAME="DC.publisher"CONTENT="O'Reilly &amp; Associates, Inc."><METANAME="DC.date"CONTENT="1999-02-04T01:42:51Z"><METANAME="DC.type"CONTENT="Text.Monograph"><METANAME="DC.format"CONTENT="text/html"SCHEME="MIME"><METANAME="DC.source"CONTENT="1-56592-322-7"SCHEME="ISBN"><METANAME="DC.language"CONTENT="en-US"><METANAME="generator"CONTENT="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><LINKREV="made"HREF="mailto:online-books@oreilly.com"TITLE="Online Books Comments"><LINKREL="up"HREF="appb_01.htm"TITLE="B. A gated Reference"><LINKREL="prev"HREF="appb_03.htm"TITLE="B.3 Directive Statements"><LINKREL="next"HREF="appb_05.htm"TITLE="B.5 Options Statements"></HEAD><BODYBGCOLOR="#FFFFFF"TEXT="#000000"><DIVCLASS="htmlnav"><H1><IMGSRC="gifs/smbanner.gif"ALT="TCP/IP Network Administration"USEMAP="#srchmap"BORDER="0"></H1><MAPNAME="srchmap"><AREASHAPE="RECT"COORDS="0,0,466,65"HREF="index.htm"ALT="TCP/IP Network Administration"><AREASHAPE="RECT"COORDS="467,0,514,18"HREF="../search/tsrch.htm"ALT="Search this book"></MAP><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="appb_03.htm"TITLE="B.3 Directive Statements"><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: B.3 Directive Statements"BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><B><FONTFACE="ARIEL,HELVETICA,HELV,SANSERIF"SIZE="-1">Appendix B<BR>A gated Reference</FONT></B></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="appb_05.htm"TITLE="B.5 Options Statements"><IMGSRC="../gifs/txtnexta.gif"ALT="Next: B.5 Options Statements"BORDER="0"></A></TD></TR></TABLE>&nbsp;<HRALIGN="LEFT"WIDTH="515"TITLE="footer"></DIV><DIVCLASS="SECT1"><H2CLASS="sect1"><ACLASS="title"NAME="TCP2-AP-2-SECT-4">B.4 Trace Statements</A></H2><PCLASS="para"><ACLASS="indexterm"NAME="TCP2-AP-2-IX-TRACE-STATEMENTS-IN-GATED"></A>Trace statements allow you to control the trace file and its contentsfrom within the <EMCLASS="emphasis">gated.conf</EM> file. The trace statement is:</P><PCLASS="para"><BCLASS="emphasis.bold">traceoptions </B>[<CODECLASS="literal">&quot;</CODE><CODECLASS="replaceable"><I>trace_file</I></CODE><CODECLASS="literal">&quot;</CODE> [<BCLASS="emphasis.bold">replace</B>] [<BCLASS="emphasis.bold">size</B> <CODECLASS="replaceable"><I>bytes</I></CODE>[<BCLASS="emphasis.bold">k</B>|<BCLASS="emphasis.bold">m</B>] <BCLASS="emphasis.bold">files</B> <CODECLASS="replaceable"><I>n</I></CODE>]] [<BCLASS="emphasis.bold">nostamp</B>]    <CODECLASS="replaceable"><I>trace_options</I></CODE> [<BCLASS="emphasis.bold">except</B> <CODECLASS="replaceable"><I>trace_options</I></CODE>] <BCLASS="emphasis.bold">;</B></P><PCLASS="para">Its components are as follows:</P><PCLASS="para"></P><DLCLASS="variablelist"><DTCLASS="term"><CODECLASS="replaceable"><I>trace_file</I></CODE></DT><DDCLASS="listitem"><PCLASS="para">Identifies the file that receives the trace output. It has exactlythe same function as the <CODECLASS="replaceable"><I>trace_file</I></CODE> argument on the <BCLASS="emphasis.bold">gated</B>command line.</P></DD><DTCLASS="term"><BCLASS="emphasis.bold">replace</B></DT><DDCLASS="listitem"><PCLASS="para">Replaces the existing trace file. If you do not use this keyword, thetrace output is appended to the current contents of the file. </P></DD><DTCLASS="term"><BCLASS="emphasis.bold">size</B> <CODECLASS="replaceable"><I>bytes</I></CODE>[<BCLASS="emphasis.bold">k</B>|<BCLASS="emphasis.bold">m</B>] [<BCLASS="emphasis.bold">files</B> <CODECLASS="replaceable"><I>n</I></CODE>]</DT><DDCLASS="listitem"><PCLASS="para">Limits the trace file to a maximum size of <CODECLASS="replaceable"><I>bytes</I></CODE>. The optional<BCLASS="emphasis.bold">k</B> or <BCLASS="emphasis.bold">m</B> indicates thousands (<BCLASS="emphasis.bold">k</B>) or millions (<BCLASS="emphasis.bold">m</B>)of bytes. Thus 1000000 and 10m are equivalent entries. The size of thetrace file cannot be less than 10k bytes. <CODECLASS="replaceable"><I>n</I></CODE> defines the maximumnumber of trace files that should be saved. When the trace file reachesthe maximum size, it is saved as <CODECLASS="replaceable"><I>trace_file</I></CODE>.0, <CODECLASS="replaceable"><I>trace_file</I></CODE>.1,<CODECLASS="replaceable"><I>trace_file</I></CODE>.2 up to <CODECLASS="replaceable"><I>trace_file</I></CODE>.<CODECLASS="replaceable"><I>n</I></CODE>. The next save thenoverwrites <CODECLASS="replaceable"><I>trace_file</I></CODE>.0. The value for <CODECLASS="replaceable"><I>n</I></CODE> must be at least 2.</P></DD><DTCLASS="term"><BCLASS="emphasis.bold">nostamp</B></DT><DDCLASS="listitem"><PCLASS="para">Specifies that trace lines should not begin with a timestamp.<ACLASS="indexterm"NAME="AUTOID-21038"></A>Timestamping each line of trace data is the default.</P></DD><DTCLASS="term"><CODECLASS="replaceable"><I>trace_options</I></CODE></DT><DDCLASS="listitem"><PCLASS="para">Define the events to be traced by <BCLASS="emphasis.bold">gated</B>. Each trace option isspecified by a keyword name. The available trace options are:<DLCLASS="variablelist"><DTCLASS="term"><BCLASS="emphasis.bold">none</B></DT><DDCLASS="listitem"><PCLASS="para">Turns off all tracing. </P></DD><DTCLASS="term"><BCLASS="emphasis.bold">all</B></DT><DDCLASS="listitem"><PCLASS="para">Turns on all types of global tracing. </P></DD><DTCLASS="term"><BCLASS="emphasis.bold">general</B></DT><DDCLASS="listitem"><PCLASS="para">Turns on both <BCLASS="emphasis.bold">normal</B> and <BCLASS="emphasis.bold">route</B> tracing. </P></DD><DTCLASS="term"><BCLASS="emphasis.bold">state</B></DT><DDCLASS="listitem"><PCLASS="para">Traces state machine transitions for protocols such as OSPF and BGP.The RFCs describe these protocols using<ACLASS="indexterm"NAME="AUTOID-21069"></A><EMCLASS="emphasis">finite state machine</EM>(FSM) diagrams or tables. The protocols transition from one state toanother based on the occurrence of certain events. For example, thestate might change from <EMCLASS="emphasis">idle</EM> to <EMCLASS="emphasis">connect</EM> when a<EMCLASS="emphasis">connection open</EM> event occurs. This is a highly specialized traceflag, useful only to those who have a thorough understanding of theprotocols involved. Use this option within the protocol statement totrace a specific protocol's transitions.</P></DD><DTCLASS="term"><BCLASS="emphasis.bold">normal</B></DT><DDCLASS="listitem"><PCLASS="para">Traces normal protocols interactions. Errors are always traced. </P></DD><DTCLASS="term"><BCLASS="emphasis.bold">policy</B></DT><DDCLASS="listitem"><PCLASS="para">Traces the application of routing policies. Use this to check that youhave properly configured your routing policy.</P></DD><DTCLASS="term"><BCLASS="emphasis.bold">task</B></DT><DDCLASS="listitem"><PCLASS="para">Traces system-level processing. </P></DD><DTCLASS="term"><BCLASS="emphasis.bold">timer</B></DT><DDCLASS="listitem"><PCLASS="para">Traces the various timers used by a protocol or peer. </P></DD><DTCLASS="term"><BCLASS="emphasis.bold">route</B></DT><DDCLASS="listitem"><PCLASS="para">Traces routing table changes. Use this to check that routes areproperly installed by the protocol.</P></DD><DTCLASS="term"><BCLASS="emphasis.bold">detail</B></DT><DDCLASS="listitem"><PCLASS="para">Traces the contents of the packets exchanged by the router. Must bespecified before <BCLASS="emphasis.bold">send</B> or <BCLASS="emphasis.bold">recv</B>.</P></DD><DTCLASS="term"><BCLASS="emphasis.bold">send</B></DT><DDCLASS="listitem"><PCLASS="para">Limits the <BCLASS="emphasis.bold">detail</B> trace to packets sent by this router. &#13;</P></DD><DTCLASS="term"><BCLASS="emphasis.bold">recv</B></DT><DDCLASS="listitem"><PCLASS="para">Limits the <BCLASS="emphasis.bold">detail</B> trace to packets received by this router.Without these two options, all packets are traced when <BCLASS="emphasis.bold">detail</B> isspecified.</P></DD><DTCLASS="term"><BCLASS="emphasis.bold">symbols</B></DT><DDCLASS="listitem"><PCLASS="para">Traces the symbols read from the kernel at startup. See the <BCLASS="emphasis.bold">-t</B>command-line argument.</P></DD><DTCLASS="term"><BCLASS="emphasis.bold">iflist</B></DT><DDCLASS="listitem"><PCLASS="para">Traces the kernel interface list. See the <BCLASS="emphasis.bold">-t</B> command-line argument. </P></DD><DTCLASS="term"><BCLASS="emphasis.bold">parse</B></DT><DDCLASS="listitem"><PCLASS="para">Traces the lexical analyzer and parser. </P></DD><DTCLASS="term"><BCLASS="emphasis.bold">adv</B></DT><DDCLASS="listitem"><PCLASS="para">Traces the allocation and release of blocks. </P></DD></DL>&#13;</P></DD><DTCLASS="term"><BCLASS="emphasis.bold">except</B> <CODECLASS="replaceable"><I>trace_options</I></CODE></DT><DDCLASS="listitem"><PCLASS="para">Disables specific trace options. Must be used in conjunction with<CODECLASS="replaceable"><I>trace_options</I></CODE> that enable a wide variety of tracing. For example:<CODECLASS="literal">traceoptions all except state</CODE> turns on all traces except forfinite state machine tracing.</P></DD></DL><PCLASS="para"><BCLASS="emphasis.bold">gated</B> provides the flexibility for you to choose where you wantto control tracing&nbsp;- on the command line or in the configuration file.By and large, the same trace options can be set on the <BCLASS="emphasis.bold">gated</B>command line or in the configuration file. <BCLASS="emphasis.bold">detail</B>, <BCLASS="emphasis.bold">send</B>and <BCLASS="emphasis.bold">recv</B> can be set only in the configuration file. </P><PCLASS="para">Two others, <BCLASS="emphasis.bold">symbols</B> and <BCLASS="emphasis.bold">iflist</B>, are primarily used on thecommand line.  Refer to the section on the <BCLASS="emphasis.bold">gated</B> command linefor a description of setting trace options with <BCLASS="emphasis.bold">-t</B>.</P><PCLASS="para">Some trace options<ACLASS="indexterm"NAME="AUTOID-21163"></A>are only useful for protocol developers and otherexperts. For most of us, <BCLASS="emphasis.bold">general</B>, which enables <BCLASS="emphasis.bold">normal</B> and<BCLASS="emphasis.bold">route</B> tracing, is an appropriate level of information fordebugging routing problems. Occasionally <BCLASS="emphasis.bold">policy</B> is useful fortesting a routing policy. Most of the time, however, no tracing isneeded.<ACLASS="indexterm"NAME="AUTOID-21170"></A></P></DIV><DIVCLASS="htmlnav"><P></P><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="appb_03.htm"TITLE="B.3 Directive Statements"><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: B.3 Directive Statements"BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="book"HREF="index.htm"TITLE="TCP/IP Network Administration"><IMGSRC="../gifs/txthome.gif"ALT="TCP/IP Network Administration"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="appb_05.htm"TITLE="B.5 Options Statements"><IMGSRC="../gifs/txtnexta.gif"ALT="Next: B.5 Options Statements"BORDER="0"></A></TD></TR><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172">B.3 Directive Statements</TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="index"HREF="index/idx_0.htm"TITLE="Book Index"><IMGSRC="../gifs/index.gif"ALT="Book Index"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172">B.5 Options Statements</TD></TR></TABLE><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><PCLASS="nav"><FONTSIZE="-1">[ <AHREF="../index.htm"TITLE="The Networking CD Bookshelf">Library Home</A> | <AHREF="../dnsbind/index.htm"TITLE="DNS &amp; BIND">DNS &amp; BIND</A> | <AHREF="index.htm"TITLE="TCP/IP Network Administration">TCP/IP</A> | <AHREF="../sendmail/index.htm"TITLE="sendmail">sendmail</A> | <AHREF="../smdref/index.htm"TITLE="sendmail Desktop Reference">sendmail Reference</A> | <AHREF="../firewall/index.htm"TITLE="Building Internet Firewalls">Firewalls</A> | <AHREF="../puis/index.htm"TITLE="Practical UNIX &amp; Internet Security">Practical Security</A> ]</FONT></P></DIV></BODY></HTML>