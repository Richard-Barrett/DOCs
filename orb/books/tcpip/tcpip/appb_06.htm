<HTML><HEAD><TITLE>[Appendix B] B.6 Interface Statements</TITLE><METANAME="DC.title"CONTENT="TCP/IP Network Administration"><METANAME="DC.creator"CONTENT="Craig Hunt"><METANAME="DC.publisher"CONTENT="O'Reilly &amp; Associates, Inc."><METANAME="DC.date"CONTENT="1999-02-04T01:42:52Z"><METANAME="DC.type"CONTENT="Text.Monograph"><METANAME="DC.format"CONTENT="text/html"SCHEME="MIME"><METANAME="DC.source"CONTENT="1-56592-322-7"SCHEME="ISBN"><METANAME="DC.language"CONTENT="en-US"><METANAME="generator"CONTENT="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><LINKREV="made"HREF="mailto:online-books@oreilly.com"TITLE="Online Books Comments"><LINKREL="up"HREF="appb_01.htm"TITLE="B. A gated Reference"><LINKREL="prev"HREF="appb_05.htm"TITLE="B.5 Options Statements"><LINKREL="next"HREF="appb_07.htm"TITLE="B.7 Definition Statements"></HEAD><BODYBGCOLOR="#FFFFFF"TEXT="#000000"><DIVCLASS="htmlnav"><H1><IMGSRC="gifs/smbanner.gif"ALT="TCP/IP Network Administration"USEMAP="#srchmap"BORDER="0"></H1><MAPNAME="srchmap"><AREASHAPE="RECT"COORDS="0,0,466,65"HREF="index.htm"ALT="TCP/IP Network Administration"><AREASHAPE="RECT"COORDS="467,0,514,18"HREF="../search/tsrch.htm"ALT="Search this book"></MAP><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="appb_05.htm"TITLE="B.5 Options Statements"><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: B.5 Options Statements"BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><B><FONTFACE="ARIEL,HELVETICA,HELV,SANSERIF"SIZE="-1">Appendix B<BR>A gated Reference</FONT></B></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="appb_07.htm"TITLE="B.7 Definition Statements"><IMGSRC="../gifs/txtnexta.gif"ALT="Next: B.7 Definition Statements"BORDER="0"></A></TD></TR></TABLE>&nbsp;<HRALIGN="LEFT"WIDTH="515"TITLE="footer"></DIV><DIVCLASS="SECT1"><H2CLASS="sect1"><ACLASS="title"NAME="TCP2-AP-2-SECT-6">B.6 Interface Statements</A></H2><PCLASS="para"><ACLASS="indexterm"NAME="TCP2-AP-2-IX-INTERFACES-STATEMENTS-IN-GATED"></A>An interface statement defines configuration options for the networkinterfaces. The <CODECLASS="replaceable"><I>interface_list</I></CODE> identifies the interfacesaffected by the configuration options. The interfaces in the list areidentified by interface name (e.g., le0), by hostname, by IP address,or by the keyword <BCLASS="emphasis.bold">all</B>. The keyword <BCLASS="emphasis.bold">all</B> refers to everyinterface on the system. The interface name can refer to a singleinterface or a group of interfaces. For example, an interface name ofeth0 refers to the interface eth0, whereas the name le refers to allinstalled interfaces that start with the letters le (which mightinclude le0, le1, and le2). A hostname can be used if it resolves toonly one address.  </P><PCLASS="para">Most system administrators prefer to use the IPaddress to identify an interface. After all, IP addresses areinherently a part of TCP/IP, and it's TCP/IP routing that this fileconfigures. </P><PCLASS="para">Additionally, remote systems know this interface by its IP address,not its interface name. Finally, DNS may provide more than one addressfor a hostname, and future UNIX operating systems may allow more thanone address per interface. IP addresses are safest.</P><PCLASS="para"><BCLASS="emphasis.bold">gated</B> supports four types of interfaces: loopback, broadcast,point-to-point, and non-broadcast multi-access (NBMA).<ACLASS="indexterm"NAME="AUTOID-21255"></A><ACLASS="indexterm"NAME="AUTOID-21257"></A>All of these are discussed in the text of this book except forNBMA. It is a multi-access interface, but the underlying network isnot capable of broadcast.  Examples are frame relay and X.25.</P><PCLASS="para"><BCLASS="emphasis.bold">gated</B> ignores any interface in the list that has an invalidlocal, remote, or broadcast address, or an invalid subnetmask. <BCLASS="emphasis.bold">gated</B> also ignores a point-to-point interface that has thesame local and remote addresses. <BCLASS="emphasis.bold">gated</B> assumes that interfacesthat are not marked UP by the kernel do not exist.</P><PCLASS="para">The syntax of the interfaces statement is:</P><BLOCKQUOTECLASS="literallayout"><PCLASS="literallayout"><BCLASS="emphasis.bold">interfaces {</B><BR>    <BCLASS="emphasis.bold">options</B><BR>        [<BCLASS="emphasis.bold">strictinterfaces</B>]<BR>        [<BCLASS="emphasis.bold">scaninterval</B> <CODECLASS="replaceable"><I>time</I></CODE>] <BCLASS="emphasis.bold">;</B><BR>    <BCLASS="emphasis.bold">interface</B> <CODECLASS="replaceable"><I>interface_list</I></CODE><BR>        [<BCLASS="emphasis.bold">preference</B> <CODECLASS="replaceable"><I>preference</I></CODE>]<BR>        [<BCLASS="emphasis.bold">down preference</B> <CODECLASS="replaceable"><I>preference</I></CODE>]<BR>        [<BCLASS="emphasis.bold">passive</B>]<BR>        [<BCLASS="emphasis.bold">simplex</B>]<BR>        [<BCLASS="emphasis.bold">reject</B>]<BR>        [<BCLASS="emphasis.bold">blackhole</B>] <BCLASS="emphasis.bold">;</B><BR>    <BCLASS="emphasis.bold">define address</B><BR>        [<BCLASS="emphasis.bold">broadcast</B> <CODECLASS="replaceable"><I>address</I></CODE>] | [<BCLASS="emphasis.bold">pointtopoint</B> <CODECLASS="replaceable"><I>address</I></CODE>]<BR>        [<BCLASS="emphasis.bold">netmask</B> <CODECLASS="replaceable"><I>mask</I></CODE>]<BR>        [<BCLASS="emphasis.bold">multicast</B>] <BCLASS="emphasis.bold">;<BR>} ;</B></P></BLOCKQUOTE><PCLASS="para">&#13;The configuration options defined before the interface list are globaloptions. The global options are:</P><DLCLASS="variablelist"><DTCLASS="term"><BCLASS="emphasis.bold">strictinterfaces</B></DT><DDCLASS="listitem"><PCLASS="para">Generates a fatal error if an interface is referenced in the configurationfile that is not found when <BCLASS="emphasis.bold">gated</B> scans the kernel at startup and isnot listed in a <BCLASS="emphasis.bold">define</B> statement. (See the <BCLASS="emphasis.bold">define</B> optionlater in this section.) Normally a warning message is issued and <BCLASS="emphasis.bold">gated</B>continues running.</P></DD><DTCLASS="term"><BCLASS="emphasis.bold">scaninterval</B> <CODECLASS="replaceable"><I>time</I></CODE></DT><DDCLASS="listitem"><PCLASS="para">Specifies how often <BCLASS="emphasis.bold">gated</B> scans the kernel interface list forchanges.  The default is every 15 seconds on most systems, and 60seconds on systems that pass interface status changes through therouting socket, e.g., BSD 4.4. Note that <BCLASS="emphasis.bold">gated</B> also scans theinterface list on receipt of a SIGUSR2.</P></DD></DL><PCLASS="para">The <BCLASS="emphasis.bold">interface</B> command defines the <CODECLASS="replaceable"><I>interface_list</I></CODE> and allof the options that affect the specified interfaces. Options availableon this statement are:</P><DLCLASS="variablelist"><DTCLASS="term"><BCLASS="emphasis.bold">preference</B> <CODECLASS="replaceable"><I>preference</I></CODE></DT><DDCLASS="listitem"><PCLASS="para"><ACLASS="indexterm"NAME="TCP2-AP-2-IX-PREFERENCE-VALUES"></A>Sets the preference for this interface. The value <CODECLASS="replaceable"><I>preference</I></CODE>is a number between 0 and 255. <BCLASS="emphasis.bold">gated</B> prefers routes throughinterfaces with low preference numbers. The default preference for alldirectly attached network interfaces is 0.</P></DD><DTCLASS="term"><BCLASS="emphasis.bold">down preference</B> <CODECLASS="replaceable"><I>preference</I></CODE></DT><DDCLASS="listitem"><PCLASS="para">Sets the preference used when <BCLASS="emphasis.bold">gated</B> believes an interface is notfunctioning properly. The default is 120.</P></DD><DTCLASS="term"><BCLASS="emphasis.bold">passive</B></DT><DDCLASS="listitem"><PCLASS="para">Prevents <BCLASS="emphasis.bold">gated</B> from downgrading the preference of the interfacewhen it is not functioning properly. <BCLASS="emphasis.bold">gated</B> assumes that aninterface is down when it stops receiving routing information throughthat interface. <BCLASS="emphasis.bold">gated</B> only performs this check if the interfaceis actively participating in a routing protocol.<ACLASS="indexterm"NAME="AUTOID-21339"></A></P></DD><DTCLASS="term"><BCLASS="emphasis.bold">simplex</B></DT><DDCLASS="listitem"><PCLASS="para">Specifies that <BCLASS="emphasis.bold">gated</B> should not use packets generated by thissystem as an indication that the interface is functioningproperly. Only packets from remote systems are used to indicate thatthe interface is operating.</P></DD><DTCLASS="term"><BCLASS="emphasis.bold">reject</B> | <BCLASS="emphasis.bold">blackhole</B></DT><DDCLASS="listitem"><PCLASS="para">Either of these keywords identifies the interface as the<ACLASS="indexterm"NAME="AUTOID-21352"></A>&quot;blackhole interface&quot; used to install rejected routes in the kernel. (See thecontrol statements for more about rejected routes.) This isavailable only on BSD systems that have installed a reject/blackholepseudo-interface.&#13;</P></DD></DL><PCLASS="para">The <BCLASS="emphasis.bold">define </B><CODECLASS="replaceable"><I>address</I></CODE> command lists interfaces that might not bepresent when <BCLASS="emphasis.bold">gated</B> scans the kernel interface list at startup. Itoverrides the <BCLASS="emphasis.bold">strictinterfaces</B> option for the interface definedby <CODECLASS="replaceable"><I>address</I></CODE>. Possible options for the <BCLASS="emphasis.bold">define</B> command are:</P><DLCLASS="variablelist"><DTCLASS="term"><BCLASS="emphasis.bold">broadcast</B> <CODECLASS="replaceable"><I>address</I></CODE></DT><DDCLASS="listitem"><PCLASS="para">Defines the broadcast address. </P></DD><DTCLASS="term"><BCLASS="emphasis.bold">pointopoint</B> <CODECLASS="replaceable"><I>address</I></CODE></DT><DDCLASS="listitem"><PCLASS="para">Defines the local address for a point-to-point interface.<ACLASS="indexterm"NAME="AUTOID-21375"></A>(See <ACLASS="xref"HREF="ch06_01.htm"TITLE="Configuring the Interface ">Chapter 6, <CITECLASS="chapter">Configuring the Interface </CITE></A> for a discussion of point-to-point interfaces.) Whenthis option isused, the address on the <BCLASS="emphasis.bold">define</B> statement specifies the address ofthe remote host, and the address specified after the <BCLASS="emphasis.bold">pointopoint</B>keyword defines the local address. Don't use both <BCLASS="emphasis.bold">broadcast</B> and<BCLASS="emphasis.bold">pointopoint</B> in the same <BCLASS="emphasis.bold">define</B>.</P></DD><DTCLASS="term"><BCLASS="emphasis.bold">netmask</B> <CODECLASS="replaceable"><I>mask</I></CODE></DT><DDCLASS="listitem"><PCLASS="para">Defines the subnet mask.</P></DD><DTCLASS="term"><BCLASS="emphasis.bold">multicast</B></DT><DDCLASS="listitem"><PCLASS="para">Specifies that the interface supports multicasting. <ACLASS="indexterm"NAME="AUTOID-21394"></A></P></DD></DL></DIV><DIVCLASS="htmlnav"><P></P><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="appb_05.htm"TITLE="B.5 Options Statements"><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: B.5 Options Statements"BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="book"HREF="index.htm"TITLE="TCP/IP Network Administration"><IMGSRC="../gifs/txthome.gif"ALT="TCP/IP Network Administration"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="appb_07.htm"TITLE="B.7 Definition Statements"><IMGSRC="../gifs/txtnexta.gif"ALT="Next: B.7 Definition Statements"BORDER="0"></A></TD></TR><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172">B.5 Options Statements</TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="index"HREF="index/idx_0.htm"TITLE="Book Index"><IMGSRC="../gifs/index.gif"ALT="Book Index"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172">B.7 Definition Statements</TD></TR></TABLE><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><PCLASS="nav"><FONTSIZE="-1">[ <AHREF="../index.htm"TITLE="The Networking CD Bookshelf">Library Home</A> | <AHREF="../dnsbind/index.htm"TITLE="DNS &amp; BIND">DNS &amp; BIND</A> | <AHREF="index.htm"TITLE="TCP/IP Network Administration">TCP/IP</A> | <AHREF="../sendmail/index.htm"TITLE="sendmail">sendmail</A> | <AHREF="../smdref/index.htm"TITLE="sendmail Desktop Reference">sendmail Reference</A> | <AHREF="../firewall/index.htm"TITLE="Building Internet Firewalls">Firewalls</A> | <AHREF="../puis/index.htm"TITLE="Practical UNIX &amp; Internet Security">Practical Security</A> ]</FONT></P></DIV></BODY></HTML>