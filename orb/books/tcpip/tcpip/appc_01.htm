<HTML><HEAD><TITLE>[Appendix C] A named Reference</TITLE><METANAME="DC.title"CONTENT="TCP/IP Network Administration"><METANAME="DC.creator"CONTENT="Craig Hunt"><METANAME="DC.publisher"CONTENT="O'Reilly &amp; Associates, Inc."><METANAME="DC.date"CONTENT="1999-02-04T01:43:31Z"><METANAME="DC.type"CONTENT="Text.Monograph"><METANAME="DC.format"CONTENT="text/html"SCHEME="MIME"><METANAME="DC.source"CONTENT="1-56592-322-7"SCHEME="ISBN"><METANAME="DC.language"CONTENT="en-US"><METANAME="generator"CONTENT="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><LINKREV="made"HREF="mailto:online-books@oreilly.com"TITLE="Online Books Comments"><LINKREL="up"HREF="index.htm"TITLE="TCP/IP Network Administration"><LINKREL="prev"HREF="appb_11.htm"TITLE="B.11 The Aggregate Statements"><LINKREL="next"HREF="appc_02.htm"TITLE="C.2 named.boot Configuration Commands"></HEAD><BODYBGCOLOR="#FFFFFF"TEXT="#000000"><DIVCLASS="htmlnav"><H1><IMGSRC="gifs/smbanner.gif"ALT="TCP/IP Network Administration"USEMAP="#srchmap"BORDER="0"></H1><MAPNAME="srchmap"><AREASHAPE="RECT"COORDS="0,0,466,65"HREF="index.htm"ALT="TCP/IP Network Administration"><AREASHAPE="RECT"COORDS="467,0,514,18"HREF="../search/tsrch.htm"ALT="Search this book"></MAP><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="appb_11.htm"TITLE="B.11 The Aggregate Statements"><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: B.11 The Aggregate Statements"BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><B><FONTFACE="ARIEL,HELVETICA,HELV,SANSERIF"SIZE="-1">Appendix C</FONT></B></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="appc_02.htm"TITLE="C.2 named.boot Configuration Commands"><IMGSRC="../gifs/txtnexta.gif"ALT="Next: C.2 named.boot Configuration Commands"BORDER="0"></A></TD></TR></TABLE>&nbsp;<HRALIGN="LEFT"WIDTH="515"TITLE="footer"></DIV><DIVCLASS="APPENDIX"><H1CLASS="appendix"><ACLASS="title"NAME="TCP2-AP-3">C. A named Reference</A></H1><DIVCLASS="htmltoc"><P><B>Contents:</B><BR><ACLASS="SECT1"HREF="#TCP2-AP-3-SECT-1"TITLE="C.1 The named Command">The named Command</A><BR><ACLASS="SECT1"HREF="appc_02.htm"TITLE="C.2 named.boot Configuration Commands">named.boot Configuration Commands</A><BR><ACLASS="SECT1"HREF="appc_03.htm"TITLE="C.3 Zone File Records">Zone File Records</A></P><P></P></DIV><PCLASS="para"><ACLASS="indexterm"NAME="TCP2-AP-3-IX-NAMED-SERVER-DAEMON-TOOLS-REFERENCE"></A>This appendix provides detailed information about <BCLASS="emphasis.bold">named</B> syntaxand the commands and files used to configure it. This is primarilya reference to use in conjunction with the tutorial information in<ACLASS="xref"HREF="ch08_01.htm"TITLE="Configuring DNS Name Service ">Chapter 8, <CITECLASS="chapter">Configuring DNS Name Service </CITE></A>. This information is useful to any domain administrator.</P><DIVCLASS="sect1"><H2CLASS="sect1"><ACLASS="title"NAME="TCP2-AP-3-SECT-1">C.1 The named Command</A></H2><PCLASS="para"><ACLASS="indexterm"NAME="TCP2-AP-3-IX-NAMED-SERVER-DAEMON-COMMAND"></A>The server side of DNS is run by the name server daemon, <BCLASS="emphasis.bold">named</B>.The syntax of the <BCLASS="emphasis.bold">named</B> command is:[1]</P><BLOCKQUOTECLASS="footnote"><PCLASS="para">[1] Sun systems use <BCLASS="emphasis.bold">in.named</B> instead of <BCLASS="emphasis.bold">named</B>.</P></BLOCKQUOTE><PCLASS="para"><BCLASS="emphasis.bold">named</B> [<BCLASS="emphasis.bold">-d</B> <CODECLASS="replaceable"><I>level</I></CODE>] [<BCLASS="emphasis.bold">-p</B> <CODECLASS="replaceable"><I>port</I></CODE>[<BCLASS="emphasis.bold">/</B><CODECLASS="replaceable"><I>localport</I></CODE>]] [[<BCLASS="emphasis.bold">-b</B>] <CODECLASS="replaceable"><I>bootfile</I></CODE>] [[<BCLASS="emphasis.bold">-q</B>] [[<BCLASS="emphasis.bold">-r</B>]</P><PCLASS="para">The three options used on the <BCLASS="emphasis.bold">named</B> command line are:</P><DLCLASS="variablelist"><DTCLASS="term"><BCLASS="emphasis.bold">-d</B> <CODECLASS="replaceable"><I>level</I></CODE></DT><DDCLASS="listitem"><PCLASS="para">Logs debugging information in the file <EMCLASS="emphasis">/usr/tmp/named.run</EM>. Theargument <CODECLASS="replaceable"><I>level</I></CODE> is a number from 1 to 9. A higher <CODECLASS="replaceable"><I>level</I></CODE>number increases the detail of the information logged, but even when<CODECLASS="replaceable"><I>level</I></CODE> is set to 1, the <EMCLASS="emphasis">named.run</EM> file grows veryrapidly. Whenever you use debugging, keep an eye on the size of the<EMCLASS="emphasis">named.run</EM> file and use SIGUSR2 to close and remove the file ifit gets too large. Signal handling is covered in the next section.</P><PCLASS="para">It is not necessary to turn on debugging with the <BCLASS="emphasis.bold">-d</B> option toreceive error messages from <BCLASS="emphasis.bold">named</B>. <BCLASS="emphasis.bold">named</B> displays errormessages on the console and stores them in the <EMCLASS="emphasis">messages</EM>, even ifdebugging is not specified. The <BCLASS="emphasis.bold">-d</B> option provides<EMCLASS="emphasis">additional</EM> debugging information.</P></DD><DTCLASS="term"><BCLASS="emphasis.bold">-p</B> <CODECLASS="replaceable"><I>port</I></CODE>[<BCLASS="emphasis.bold">/</B><CODECLASS="replaceable"><I>localport</I></CODE>]</DT><DDCLASS="listitem"><PCLASS="para">Defines the UDP/TCP port used by <BCLASS="emphasis.bold">named</B>. <CODECLASS="replaceable"><I>port</I></CODE> is the portnumber used to connect to the remote name server. <CODECLASS="replaceable"><I>localport</I></CODE> isthe number of the port on which the local name server daemon listensfor connections. If the <BCLASS="emphasis.bold">-p</B> option is not specified, thestandard port (53) is used. Since port 53 is a well-known port,changing the port number makes the name server inaccessible tostandard software packages.  Therefore, <BCLASS="emphasis.bold">-p</B> is only used fortesting.</P></DD><DTCLASS="term"><BCLASS="emphasis.bold">-b</B> <CODECLASS="replaceable"><I>bootfile</I></CODE></DT><DDCLASS="listitem"><PCLASS="para">Specifies the file <BCLASS="emphasis.bold">named</B> uses as its configurationfile. By default the configuration file is <EMCLASS="emphasis">/etc/named.boot</EM>, but<ACLASS="indexterm"NAME="AUTOID-24040"></A><ACLASS="indexterm"NAME="AUTOID-24042"></A>the <BCLASS="emphasis.bold">-b</B> option allows the administrator to choose anotherconfiguration file. Note that the <BCLASS="emphasis.bold">-b</B> isoptional. As long as the filename used for <CODECLASS="replaceable"><I>bootfile</I></CODE> doesn'tstart with a dash, the <BCLASS="emphasis.bold">-b</B> flag is not required. Any filenamewritten on the <BCLASS="emphasis.bold">named</B> command line is assumed to be the bootfile.</P></DD><DTCLASS="term"><BCLASS="emphasis.bold">-q</B></DT><DDCLASS="listitem"><PCLASS="para">Logs all incoming queries. <BCLASS="emphasis.bold">named</B> must be compiledwith the QRYLOG option set to enable this type of logging.</P></DD><DTCLASS="term"><BCLASS="emphasis.bold">-r</B></DT><DDCLASS="listitem"><PCLASS="para">Turns off recursion. With this option set, the server willonly provide answers for zones for which it is an authoritative server.It will not pursue the query through other servers or zones.</P></DD></DL><DIVCLASS="sect2"><H3CLASS="sect2"><ACLASS="title"NAME="TCP2-AP-3-SECT-1.1">C.1.1 Signal Processing</A></H3><PCLASS="para"><ACLASS="indexterm"NAME="TCP2-AP-3-IX-SIGNAL-PROCESSING-IN-NAMED"></A><BCLASS="emphasis.bold">named</B> handles the following signals:</P><DLCLASS="variablelist"><DTCLASS="term">SIGHUP</DT><DDCLASS="listitem"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-24073"></A>Causes <BCLASS="emphasis.bold">named</B> to reread the <EMCLASS="emphasis">named.boot</EM> file and reload thename server database. <BCLASS="emphasis.bold">named</B> then continues to run with the newconfiguration. This signal is particularly useful for forcingsecondary servers to reload a database from the primaryserver. Normally the databases are downloaded from the primary serveron a periodic basis. Using SIGHUP causes the reload to occurimmediately.</P></DD><DTCLASS="term">SIGINT</DT><DDCLASS="listitem"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-24082"></A>Causes <BCLASS="emphasis.bold">named</B> to dump its cache to<EMCLASS="emphasis">/usr/tmp/named_dump.db</EM>. The dump file contains all of the domaininformation that the local name server knows. The file begins with theroot servers, and marks off every domain under the root that the localserver knows anything about. If you examine this file, you'll see thatit shows a complete picture of the information the server has learned.</P></DD><DTCLASS="term">SIGUSR1</DT><DDCLASS="listitem"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-24090"></A>Turns on debugging; each subsequent SIGUSR1 signal increases the levelof debugging. Debugging information is written to<EMCLASS="emphasis">/usr/tmp/named.run</EM> just as it is when the <BCLASS="emphasis.bold">-d</B> option isused on the <BCLASS="emphasis.bold">named</B> command line. Debugging does not have to beenabled with the <BCLASS="emphasis.bold">-d</B> option for the SIGUSR1 signal towork. SIGUSR1 allows debugging to be turned on when a problem issuspected, without stopping <BCLASS="emphasis.bold">named</B> and restarting it with the<BCLASS="emphasis.bold">-d</B> option.</P></DD><DTCLASS="term">SIGUSR2</DT><DDCLASS="listitem"><PCLASS="para">Turns off debugging and closes <EMCLASS="emphasis">/usr/tmp/named.run</EM>. After issuingSIGUSR2, you can examine <EMCLASS="emphasis">named.run</EM> or remove it if it is gettingtoo large.</P></DD></DL><PCLASS="para">Optionally, some other signals can be handled by <BCLASS="emphasis.bold">named</B>.These additional signals require <BCLASS="emphasis.bold">named</B> to be compiled with theappropriate options to support the signals:</P><DLCLASS="variablelist"><DTCLASS="term">SIGABRT</DT><DDCLASS="listitem"><PCLASS="para">Writes statistics data to <EMCLASS="emphasis">/var/tmp/named.stats</EM>.  <BCLASS="emphasis.bold">named</B>must be compiled with -DSTATS for this signal to work.</P></DD><DTCLASS="term">SIGSYS</DT><DDCLASS="listitem"><PCLASS="para">Writes profiling data into the <EMCLASS="emphasis">/var/tmp</EM> directory.<BCLASS="emphasis.bold">named</B> must be compiled with profiling to support this signal.</P></DD><DTCLASS="term">SIGTERM</DT><DDCLASS="listitem"><PCLASS="para">Writes back the primary and secondary database files.  This is used tosave data modified by dynamic updates before the system is shutdown. <BCLASS="emphasis.bold">named</B> must be compiled with dynamic updating enabled.</P></DD><DTCLASS="term">SIGWINCH</DT><DDCLASS="listitem"><PCLASS="para">Toggles logging of all incoming queries via <BCLASS="emphasis.bold">syslogd</B>. <BCLASS="emphasis.bold">named</B>must be compiled with QRYLOG option to support this.<ACLASS="indexterm"NAME="AUTOID-24131"></A><ACLASS="indexterm"NAME="AUTOID-24132"></A></P></DD></DL></DIV></DIV></DIV><DIVCLASS="htmlnav"><P></P><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="appb_11.htm"TITLE="B.11 The Aggregate Statements"><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: B.11 The Aggregate Statements"BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="book"HREF="index.htm"TITLE="TCP/IP Network Administration"><IMGSRC="../gifs/txthome.gif"ALT="TCP/IP Network Administration"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="appc_02.htm"TITLE="C.2 named.boot Configuration Commands"><IMGSRC="../gifs/txtnexta.gif"ALT="Next: C.2 named.boot Configuration Commands"BORDER="0"></A></TD></TR><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172">B.11 The Aggregate Statements</TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="index"HREF="index/idx_0.htm"TITLE="Book Index"><IMGSRC="../gifs/index.gif"ALT="Book Index"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172">C.2 named.boot Configuration Commands</TD></TR></TABLE><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><PCLASS="nav"><FONTSIZE="-1">[ <AHREF="../index.htm"TITLE="The Networking CD Bookshelf">Library Home</A> | <AHREF="../dnsbind/index.htm"TITLE="DNS &amp; BIND">DNS &amp; BIND</A> | <AHREF="index.htm"TITLE="TCP/IP Network Administration">TCP/IP</A> | <AHREF="../sendmail/index.htm"TITLE="sendmail">sendmail</A> | <AHREF="../smdref/index.htm"TITLE="sendmail Desktop Reference">sendmail Reference</A> | <AHREF="../firewall/index.htm"TITLE="Building Internet Firewalls">Firewalls</A> | <AHREF="../puis/index.htm"TITLE="Practical UNIX &amp; Internet Security">Practical Security</A> ]</FONT></P></DIV></BODY></HTML>