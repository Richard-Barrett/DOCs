<HTML><HEAD><TITLE>[Appendix E] E.3 m4 sendmail Macros</TITLE><METANAME="DC.title"CONTENT="TCP/IP Network Administration"><METANAME="DC.creator"CONTENT="Craig Hunt"><METANAME="DC.publisher"CONTENT="O'Reilly &amp; Associates, Inc."><METANAME="DC.date"CONTENT="1999-02-04T01:44:28Z"><METANAME="DC.type"CONTENT="Text.Monograph"><METANAME="DC.format"CONTENT="text/html"SCHEME="MIME"><METANAME="DC.source"CONTENT="1-56592-322-7"SCHEME="ISBN"><METANAME="DC.language"CONTENT="en-US"><METANAME="generator"CONTENT="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><LINKREV="made"HREF="mailto:online-books@oreilly.com"TITLE="Online Books Comments"><LINKREL="up"HREF="appe_01.htm"TITLE="E. A sendmail Reference"><LINKREL="prev"HREF="appe_02.htm"TITLE="E.2 The sendmail Command"><LINKREL="next"HREF="appe_04.htm"TITLE="E.4 More sendmail.cf"></HEAD><BODYBGCOLOR="#FFFFFF"TEXT="#000000"><DIVCLASS="htmlnav"><H1><IMGSRC="gifs/smbanner.gif"ALT="TCP/IP Network Administration"USEMAP="#srchmap"BORDER="0"></H1><MAPNAME="srchmap"><AREASHAPE="RECT"COORDS="0,0,466,65"HREF="index.htm"ALT="TCP/IP Network Administration"><AREASHAPE="RECT"COORDS="467,0,514,18"HREF="../search/tsrch.htm"ALT="Search this book"></MAP><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="appe_02.htm"TITLE="E.2 The sendmail Command"><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: E.2 The sendmail Command"BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><B><FONTFACE="ARIEL,HELVETICA,HELV,SANSERIF"SIZE="-1">Appendix E<BR>A sendmail Reference</FONT></B></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="appe_04.htm"TITLE="E.4 More sendmail.cf"><IMGSRC="../gifs/txtnexta.gif"ALT="Next: E.4 More sendmail.cf"BORDER="0"></A></TD></TR></TABLE>&nbsp;<HRALIGN="LEFT"WIDTH="515"TITLE="footer"></DIV><DIVCLASS="SECT1"><H2CLASS="sect1"><ACLASS="title"NAME="TCP2-AP-5-SECT-3">E.3 m4 sendmail Macros</A></H2><PCLASS="para"><ACLASS="indexterm"NAME="TCP2-AP-5-IX-M4-MACROS"></A>The sendmail distribution comes with several sample configuration files.<ACLASS="xref"HREF="ch10_01.htm"TITLE="sendmail ">Chapter 10</A> provides an example of how the <EMCLASS="emphasis">tcpproto.mc</EM> file ismodified to produce a configuration file suitable for a Linux system.The prototype files are <BCLASS="emphasis.bold">m4</B> macro configuration files thatproduce useable <EMCLASS="emphasis">sendmail.cf</EM> files as output. The prototypefiles are located in the <EMCLASS="emphasis">sendmail/cf/cf</EM> directory of the sendmaildistribution. All of the <BCLASS="emphasis.bold">m4</B> macro configuration files end withthe <EMCLASS="emphasis">.mc</EM> file name extension. The <EMCLASS="emphasis">.mc</EM> files can be composedof the following <BCLASS="emphasis.bold">m4</B> macros:[1]</P><BLOCKQUOTECLASS="footnote"><PCLASS="para">[1] The macro commands are listed in the order they would occur in theconfiguration file.</P></BLOCKQUOTE><DLCLASS="variablelist"><DTCLASS="term">VERSIONID</DT><DDCLASS="listitem"><PCLASS="para">Defines the version number of the <EMCLASS="emphasis">.mc</EM> source file. RCS or SCCSversion numbers are commonly used. This command is optional.</P></DD><DTCLASS="term">OSTYPE</DT><DDCLASS="listitem"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-26553"></A>Points to the <BCLASS="emphasis.bold">m4</B> source file that contains the operatingsystem-specific information for this configuration. This is required.</P></DD><DTCLASS="term">DOMAIN</DT><DDCLASS="listitem"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-26561"></A>Points to the <BCLASS="emphasis.bold">m4</B> source file that contains configuration informationspecific to this domain. This is optional.</P></DD><DTCLASS="term">FEATURE</DT><DDCLASS="listitem"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-26568"></A>Points to an <BCLASS="emphasis.bold">m4</B> source file that defines an optional sendmailfeature. This is not required for <BCLASS="emphasis.bold">m4</B> to process the <EMCLASS="emphasis">.mc</EM>source file, but many configurations have multiple FEATURE entries.</P></DD><DTCLASS="term">HACKS</DT><DDCLASS="listitem"><PCLASS="para">Points to an <BCLASS="emphasis.bold">m4</B> source file that contains site-specificconfiguration information. This is a temporary configuration used tofix a temporary problem. The use of HACKS is discouraged.</P></DD><DTCLASS="term">SITECONFIG</DT><DDCLASS="listitem"><PCLASS="para">Points to a source file that contains <BCLASS="emphasis.bold">m4</B> SITE commands that definethe UUCP sites<ACLASS="indexterm"NAME="AUTOID-26584"></A>connected to this host. The format of the command is:<BCLASS="emphasis.bold">SITECONFIG(</B><EMCLASS="emphasis">file</EM><BCLASS="emphasis.bold">, </B><EMCLASS="emphasis">local-hostname</EM><BCLASS="emphasis.bold">, </B><EMCLASS="emphasis">class</EM><BCLASS="emphasis.bold">)</B>, whichreads the UUCP hostnames from <EMCLASS="emphasis">file</EM> into <EMCLASS="emphasis">class</EM>. </P></DD><DTCLASS="term">define</DT><DDCLASS="listitem"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-26599"></A>Defines a local value. Most &quot;defines&quot; are done in the <BCLASS="emphasis.bold">m4</B> sourcefiles that are called by the <EMCLASS="emphasis">.mc</EM> file, not in the <EMCLASS="emphasis">.mc</EM>file itself. It can define a value for a <EMCLASS="emphasis">sendmail.cf</EM> macro,option, or other command.</P></DD><DTCLASS="term">MAILER</DT><DDCLASS="listitem"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-26609"></A>Points to an <BCLASS="emphasis.bold">m4</B> source file that contains the configuration commandsthat define a sendmail mailer. A least one MAILER command must appear inthe configuration file. Generally more than one MAILER command is used.</P></DD><DTCLASS="term">LOCAL_RULE_<CODECLASS="replaceable"><I>n</I></CODE></DT><DDCLASS="listitem"><PCLASS="para">Heads a section of code to be added to ruleset <CODECLASS="replaceable"><I>n</I></CODE>, where <CODECLASS="replaceable"><I>n</I></CODE> is0, 1, 2, or 3. The code that follows the LOCAL_RULE_<CODECLASS="replaceable"><I>n</I></CODE> command iscomposed of standard <EMCLASS="emphasis">sendmail.cf</EM> rewrite rules.[2]The LOCAL_RULE_<EMCLASS="emphasis">n</EM> command is rarely used.</P><BLOCKQUOTECLASS="footnote"><PCLASS="para">[2] The one exception to this is the UUCPSMTP macro that can be used inthe local rule. See the <EMCLASS="emphasis">New sendmail Configuration Files</EM>document that come with the sendmail V8 distribution if you havequestions about UUCP configuration.</P></BLOCKQUOTE></DD><DTCLASS="term">LOCAL_CONFIG</DT><DDCLASS="listitem"><PCLASS="para">Heads a section of code to be added to the <EMCLASS="emphasis">sendmail.cf</EM> file afterthe local information section and before the rewrite rules. The sectionof code contains standard <EMCLASS="emphasis">sendmail.cf</EM> configuration commands.This macro is rarely used.</P></DD></DL><PCLASS="para">Most of the macros in the <EMCLASS="emphasis">.mc</EM> file point to other <BCLASS="emphasis.bold">m4</B> sourcefiles. The macro names OSTYPE, DOMAIN, FEATURE, MAILER, HACKS, andSITECONFIG are all names of subdirectories within the <EMCLASS="emphasis">sendmail/cf</EM>directory. The value passed to each of these macros is the name of a filewithin the specified directory. For example, the command FEATURE(nouucp)tells <BCLASS="emphasis.bold">m4</B> to load the file <EMCLASS="emphasis">nouucp.m4</EM> from the <EMCLASS="emphasis">feature</EM>directory and process the <BCLASS="emphasis.bold">m4</B> source code found there. The realmeat of the sendmail configuration is contained in the source filespointed to by the OSTYPE, DOMAIN, FEATURE, and MAILER commands.</P><PCLASS="para">The macro commands HACK, SITECONFIG, LOCAL_RULE_<EMCLASS="emphasis">n</EM>, and LOCAL_CONFIGare rarely used in a macro configuration file. To simplify this appendix,we do not mention them again.[3]Likewise, for the sake of simplicity we avoid discussing UUCPconfiguration and concentrate on SMTP. Still, <BCLASS="emphasis.bold">m4</B> configuration canappear to be enormously complex. Please remember that this appendix is areference, and as such lists as many of the <BCLASS="emphasis.bold">m4</B> macros as possible.Most of these you will never need to use. Refer to <ACLASS="xref"HREF="ch10_01.htm"TITLE="sendmail ">Chapter 10</A> for arealistic example of how <BCLASS="emphasis.bold">m4</B> is used to build a <EMCLASS="emphasis">sendmail.cf</EM>file.</P><BLOCKQUOTECLASS="footnote"><PCLASS="para">[3] To see examples of some of these commands, look at the <EMCLASS="emphasis">ucbvax.mc</EM>sample file that comes with the sendmail V8 distribution.</P></BLOCKQUOTE><PCLASS="para">In the following section we provide additional information about theOSTYPE, DOMAIN, FEATURE, and MAILER macros and details of the variouscommands used to build the <BCLASS="emphasis.bold">m4</B> source files they call. <ACLASS="xref"HREF="ch10_01.htm"TITLE="sendmail ">Chapter 10</A>provides an example of building a custom DOMAIN macro source file.The source files can contain any of the macros we have already mentionedas well as the additional ones documented below. The macro configuration(<EMCLASS="emphasis">.mc</EM>) file also can contain any of the commands documented below.In fact, pretty much any macro can appear in any file.</P><PCLASS="para">To bring some order out of this chaos, we have organized the commandsaccording to the files they are most likely to appear in, which issimilar to the organization found in the documentation that comes withsendmail distribution. Just remember, actual implementation files mayhave a different organization. We start by examining the <BCLASS="emphasis.bold">define</B>macros and the <BCLASS="emphasis.bold">FEATURE</B> macros that are the primary buildingblocks of all the other files.</P><DIVCLASS="sect2"><H3CLASS="sect2"><ACLASS="title"NAME="TCP2-AP-5-SECT-3.1">E.3.1 define</A></H3><PCLASS="para"><ACLASS="indexterm"NAME="TCP2-AP-5-IX-DEFINE-MACRO-IN-SENDMAIL"></A>The syntax of the <BCLASS="emphasis.bold">define</B> macro is:</P><BLOCKQUOTECLASS="blockquote"><PCLASS="para"><CODECLASS="userinput"><B>define('</B></CODE><CODECLASS="replaceable"><I>parameter</I></CODE><BCLASS="emphasis.bold">', '</B><CODECLASS="replaceable"><I>value</I></CODE><BCLASS="emphasis.bold">')</B></P></BLOCKQUOTE><PCLASS="para">Where <CODECLASS="replaceable"><I>parameter</I></CODE> is the keyword name of a sendmail configurationparameter and <CODECLASS="replaceable"><I>value</I></CODE> is the value assigned to that configurationparameter. The <CODECLASS="replaceable"><I>parameter</I></CODE> and the <CODECLASS="replaceable"><I>value</I></CODE> are normallyenclosed in single quotes to prevent inappropriate macro expansion.</P><PCLASS="para">Many of the configuration parameters that can be set using the<BCLASS="emphasis.bold">define</B> command are shown below. Most of the parameterscorrespond to sendmail options, macros, or classes. The name of theoption, macro, or class set by the parameter is listed in the parameterdescription enclosed in square brackets ([]). Macro names begin with adollar sign (<BCLASS="emphasis.bold">$j</B>), class names begin with a dollar sign and an equalsign (<BCLASS="emphasis.bold">$=w</B>), and options are shown with long option names(<BCLASS="emphasis.bold">SingleThreadDelivery</B>). To find out more about these parameters, seethe descriptions of the macros, options, and classes they represent thatare provided later in this appendix.</P><PCLASS="para">Because many <BCLASS="emphasis.bold">define</B> parameters are equivalent to options, macros,and classes, the command:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">define('confDOMAIN_NAME', 'peanut.nuts.com')</PRE></BLOCKQUOTE></P><PCLASS="para">placed in an <BCLASS="emphasis.bold">m4</B> source file has the same effect as:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">Djpeanut.nuts.com</PRE></BLOCKQUOTE></P><PCLASS="para">placed directly in the <EMCLASS="emphasis">sendmail.cf</EM> file. If you compile andinstall a new version of sendmail, build your configuration with<BCLASS="emphasis.bold">m4</B> and set values for macros, classes, and options with the<BCLASS="emphasis.bold">m4 define</B> macro.</P><PCLASS="para">The list of <BCLASS="emphasis.bold">define</B> parameters is quite long. However, becausemost of the parameters default to a reasonable value they do not haveto be explicitly set in the <BCLASS="emphasis.bold">m4</B> source file. The default value ofeach parameter is shown in the listing&nbsp;- unless there is no default.</P><DLCLASS="variablelist"><DTCLASS="term">confMAILER_NAME</DT><DDCLASS="listitem"><PCLASS="para">Default is MAILER-DAEMON. The sender name used on error messages. [$n]</P></DD><DTCLASS="term">confDOMAIN_NAME</DT><DDCLASS="listitem"><PCLASS="para">The full hostname. [$j]</P></DD><DTCLASS="term">confCF_VERSION</DT><DDCLASS="listitem"><PCLASS="para">The configuration file's version number. [$Z]</P></DD><DTCLASS="term">confFROM_HEADER</DT><DDCLASS="listitem"><PCLASS="para">Default is <CODECLASS="literal">$?x$x &lt;$g&gt;$|$g$.</CODE> .  The From: header format.</P></DD><DTCLASS="term">confRECEIVED_HEADER</DT><DDCLASS="listitem"><PCLASS="para">Default is <CODECLASS="literal">$?sfrom $s $.$?_($?s$|from $.$_) $.by $j ($v/$Z)$?rwith $r$. id $i$?u for $u$.; $b</CODE> .  The Received: header format.</P></DD><DTCLASS="term">confCW_FILE</DT><DDCLASS="listitem"><PCLASS="para">Default is <EMCLASS="emphasis">/etc/sendmail.cw</EM>. The file of local host aliases. [$=w]</P></DD><DTCLASS="term">confCT_FILE</DT><DDCLASS="listitem"><PCLASS="para">Default is <EMCLASS="emphasis">/etc/sendmail.ct</EM>. The file of trusted usernames. [$=t]</P></DD><DTCLASS="term">confTRUSTED_USERS</DT><DDCLASS="listitem"><PCLASS="para">Trusted users name to add to <EMCLASS="emphasis">root</EM>, <EMCLASS="emphasis">uucp</EM>, and <EMCLASS="emphasis">daemon</EM>.</P></DD><DTCLASS="term">confSMTP_MAILER</DT><DDCLASS="listitem"><PCLASS="para">Default is esmtp. The mailer used for SMTP connections; must be smtp,smtp8, or esmtp.</P></DD><DTCLASS="term">confUUCP_MAILER</DT><DDCLASS="listitem"><PCLASS="para">Default is uucp-old. The default UUCP mailer.</P></DD><DTCLASS="term">confLOCAL_MAILER</DT><DDCLASS="listitem"><PCLASS="para">Default is local. The mailer used for local connections.</P></DD><DTCLASS="term">confRELAY_MAILER</DT><DDCLASS="listitem"><PCLASS="para">Default is relay. The default mailer name for relaying.</P></DD><DTCLASS="term">confSEVEN_BIT_INPUT</DT><DDCLASS="listitem"><PCLASS="para">Default is False. Force input to seven bits. [SevenBitInput]</P></DD><DTCLASS="term">confEIGHT_BIT_HANDLING</DT><DDCLASS="listitem"><PCLASS="para">Default is pass8. Defines how 8-bit data is handled. [EightBitMode]</P></DD><DTCLASS="term">confALIAS_WAIT</DT><DDCLASS="listitem"><PCLASS="para">Default is 10m. The amount of time to wait for alias file rebuild.[AliasWait]</P></DD><DTCLASS="term">confMIN_FREE_BLOCKS</DT><DDCLASS="listitem"><PCLASS="para">Default is 100. The minimum number of free blocks on the queuefilesystem that must be available to accept SMTP mail. [MinFreeBlocks]</P></DD><DTCLASS="term">confMAX_MESSAGE_SIZE</DT><DDCLASS="listitem"><PCLASS="para">Default is infinite. The maximum message size. [MaxMessageSize]</P></DD><DTCLASS="term">confBLANK_SUB</DT><DDCLASS="listitem"><PCLASS="para">The character used to replace unquoted blank characters in emailaddresses. [BlankSub]</P></DD><DTCLASS="term">confCON_EXPENSIVE</DT><DDCLASS="listitem"><PCLASS="para">Default is False. Tells system to hold mail bound for mailers thathave the <BCLASS="emphasis.bold">e</B> flag set until the next queue run. [HoldExpensive]</P></DD><DTCLASS="term">confCHECKPOINT_INTERVAL</DT><DDCLASS="listitem"><PCLASS="para">Default is 10. Tells system to checkpoint the queue files after thisnumber of queued items are processed. [CheckpointInterval]</P></DD><DTCLASS="term">confDELIVERY_MODE</DT><DDCLASS="listitem"><PCLASS="para">Default is background. Sets the default delivery mode. [DeliveryMode]</P></DD><DTCLASS="term">confAUTO_REBUILD</DT><DDCLASS="listitem"><PCLASS="para">Default is False. Automatically rebuilds alias file. [AutoRebuildAliases]</P></DD><DTCLASS="term">confERROR_MODE</DT><DDCLASS="listitem"><PCLASS="para">Default is print. Defines how errors are handled. [ErrorMode]</P></DD><DTCLASS="term">confERROR_MESSAGE</DT><DDCLASS="listitem"><PCLASS="para">Points to a file containing a message that is prepended to errormessages. [ErrorHeader]</P></DD><DTCLASS="term">confSAVE_FROM_LINES</DT><DDCLASS="listitem"><PCLASS="para">Tells system not to discard UNIX From: lines. They are discarded ifthis is not set.  [SaveFromLine]</P></DD><DTCLASS="term">confTEMP_FILE_MODE</DT><DDCLASS="listitem"><PCLASS="para">Default is 0600. File mode for temporary files. [TempFileMode]</P></DD><DTCLASS="term">confMATCH_GECOS</DT><DDCLASS="listitem"><PCLASS="para">Tells system to match the email username to the GECOS field. This match is not done if this is not set. [MatchGECOS]</P></DD><DTCLASS="term">confMAX_HOP</DT><DDCLASS="listitem"><PCLASS="para">Default is 25. The counter used to determine mail loops. [MaxHopCount]</P></DD><DTCLASS="term">confIGNORE_DOTS</DT><DDCLASS="listitem"><PCLASS="para">Default is False. Tells system to ignore dots in incoming messages. [IgnoreDots]</P></DD><DTCLASS="term">confBIND_OPTS</DT><DDCLASS="listitem"><PCLASS="para">Default is undefined. Sets options for DNS resolver. [ResolverOptions]</P></DD><DTCLASS="term">confMIME_FORMAT_ERRORS*</DT><DDCLASS="listitem"><PCLASS="para">Default is True. Tells system to send MIME-encapsulated error messages. [SendMimeErrors]</P></DD><DTCLASS="term">confFORWARD_PATH</DT><DDCLASS="listitem"><PCLASS="para">Default is <EMCLASS="emphasis">$z/.forward.$w:$z/.forward</EM>. Places to searchfor <EMCLASS="emphasis">.forward</EM> files. [ForwardPath]</P></DD><DTCLASS="term">confMCI_CACHE_SIZE</DT><DDCLASS="listitem"><PCLASS="para">Default is 2. The number of open connections that can be cached.[ConnectionCacheSize]</P></DD><DTCLASS="term">confMCI_CACHE_TIMEOUT</DT><DDCLASS="listitem"><PCLASS="para">Default is 5m. The amount of time inactive open connections are heldin the cache. [ConnectionCacheTimeout]</P></DD><DTCLASS="term">confHOST_STATUS_DIRECTORY</DT><DDCLASS="listitem"><PCLASS="para">Directory in which host status is saved. [HostStatusDirectory]</P></DD><DTCLASS="term">confUSE_ERRORS_TO*</DT><DDCLASS="listitem"><PCLASS="para">Default is False. Delivers errors using the Errors-To: header. [UserErrorsTo]</P></DD><DTCLASS="term">confLOG_LEVEL</DT><DDCLASS="listitem"><PCLASS="para">Default is 9. Level of detail for the logfile. [LogLevel]</P></DD><DTCLASS="term">confME_TOO</DT><DDCLASS="listitem"><PCLASS="para">Default is False. Sends a copy to the sender. [MeToo]</P></DD><DTCLASS="term">confCHECK_ALIASES</DT><DDCLASS="listitem"><PCLASS="para">Default is False. Looks up every alias during alias file build. [CheckAliases]</P></DD><DTCLASS="term">confOLD_STYLE_HEADERS*</DT><DDCLASS="listitem"><PCLASS="para">Default is True. Treats headers without special chars as old style. [OldStyleHeaders]</P></DD><DTCLASS="term">confDAEMON_OPTIONS</DT><DDCLASS="listitem"><PCLASS="para">SMTP daemon options. [DaemonPortOptions]</P></DD><DTCLASS="term">confPRIVACY_FLAGS</DT><DDCLASS="listitem"><PCLASS="para">Default is authwarnings. These flags restrict the use of some mailcommands. [PrivacyOptions]</P></DD><DTCLASS="term">confCOPY_ERRORS_TO</DT><DDCLASS="listitem"><PCLASS="para">Address to receive copies of error messages. [PostmasterCopy]</P></DD><DTCLASS="term">confQUEUE_FACTOR</DT><DDCLASS="listitem"><PCLASS="para">Default is 600000. Used to calculate when a loaded system should queuemail instead of attempting delivery. [QueueFactor]</P></DD><DTCLASS="term">confDONT_PRUNE_ROUTES</DT><DDCLASS="listitem"><PCLASS="para">Default is False. Don't prune route-addresses to the minimum possible. [DontPruneRoutes]</P></DD><DTCLASS="term">confSAFE_QUEUE</DT><DDCLASS="listitem"><PCLASS="para">Create a queue file, then attempt delivery. This is not done unlessthis paramter is specified. [SuperSafe]</P></DD><DTCLASS="term">confTO_INITIAL</DT><DDCLASS="listitem"><PCLASS="para">Default is 5m. Maximum time to wait for the initial connect response.[Timeout.initial]</P></DD><DTCLASS="term">confTO_CONNECT</DT><DDCLASS="listitem"><PCLASS="para">Default is 0. Maximum time to wait for a connect to complete.[Timeout.connect]</P></DD><DTCLASS="term">confTO_ICONNECT</DT><DDCLASS="listitem"><PCLASS="para">Maximum time to wait for the very first connect attempt to a host.[Timeout.iconnect]</P></DD><DTCLASS="term">confTO_HELO</DT><DDCLASS="listitem"><PCLASS="para">Default is 5m. Maximum time to wait for a HELO or EHLO response.[Timeout.helo]</P></DD><DTCLASS="term">confTO_MAIL</DT><DDCLASS="listitem"><PCLASS="para">Default is 10m. Maximum time to wait for a MAIL command response.[Timeout.mail]</P></DD><DTCLASS="term">confTO_RCPT</DT><DDCLASS="listitem"><PCLASS="para">Default is 1h. Maximum time to wait for a RCPT command response.[Timeout.rcpt]</P></DD><DTCLASS="term">confTO_DATAINIT</DT><DDCLASS="listitem"><PCLASS="para">Default is 5m. Maximum time to wait for a DATA command response.[Timeout.datainit]</P></DD><DTCLASS="term">confTO_DATABLOCK</DT><DDCLASS="listitem"><PCLASS="para">Default is 1h. Maximum time to wait for a block during DATA phase.[Timeout.datablock]</P></DD><DTCLASS="term">confTO_DATAFINAL</DT><DDCLASS="listitem"><PCLASS="para">Default is 1h. Maximum time to wait for a response to the terminating&quot;.&quot;. [Timeout.datafinal]</P></DD><DTCLASS="term">confTO_RSET</DT><DDCLASS="listitem"><PCLASS="para">Default is 5m. Maximum time to wait for a RSET command response.[Timeout.rset]</P></DD><DTCLASS="term">confTO_QUIT</DT><DDCLASS="listitem"><PCLASS="para">Default is 2m. Maximum time to wait for a QUIT command response.[Timeout.quit]</P></DD><DTCLASS="term">confTO_MISC</DT><DDCLASS="listitem"><PCLASS="para">Default is 2m. Maximum time to wait for other SMTP command responses.[Timeout.misc]</P></DD><DTCLASS="term">confTO_COMMAND</DT><DDCLASS="listitem"><PCLASS="para">Default is 1h. Maximum time to wait for a command to be issued.[Timeout.command]</P></DD><DTCLASS="term">confTO_IDENT</DT><DDCLASS="listitem"><PCLASS="para">Default is 30s. Maximum time to wait for an IDENT query response.[Timeout.ident]</P></DD><DTCLASS="term">confTO_FILEOPEN</DT><DDCLASS="listitem"><PCLASS="para">Default is 60s. Maximum time to wait for a file open.[Timeout.fileopen]</P></DD><DTCLASS="term">confTO_QUEUERETURN</DT><DDCLASS="listitem"><PCLASS="para">Default is 5d. Time until a message is returned from the queue asundeliverable. [Timeout.queuereturn]</P></DD><DTCLASS="term">confTO_QUEUERETURN_NORMAL</DT><DDCLASS="listitem"><PCLASS="para">&quot;Undeliverable&quot; timeout for normal priority messages. [Timeout.queuereturn.normal]</P></DD><DTCLASS="term">confTO_QUEUERETURN_URGENT</DT><DDCLASS="listitem"><PCLASS="para">&quot;Undeliverable&quot; timeout for urgent priority messages. [Timeout.queuereturn.urgent]</P></DD><DTCLASS="term">confTO_QUEUERETURN_NONURGENT</DT><DDCLASS="listitem"><PCLASS="para">&quot;Undeliverable&quot; timeout for low priority messages. [Timeout.queuereturn.non-urgent]</P></DD><DTCLASS="term">confTO_QUEUEWARN</DT><DDCLASS="listitem"><PCLASS="para">Default is 4h. Time until a &quot;still queued&quot; warning is sent about a message. [Timeout.queuewarn]</P></DD><DTCLASS="term">confTO_QUEUEWARN_NORMAL</DT><DDCLASS="listitem"><PCLASS="para">Time until a &quot;still queued&quot; warning is sent for normal priority messages. [Timeout.queuewarn.normal]</P></DD><DTCLASS="term">confTO_QUEUEWARN_URGENT</DT><DDCLASS="listitem"><PCLASS="para">Time until a &quot;still queued&quot; warning is sent for urgent priority messages. [Timeout.queuewarn.urgent]</P></DD><DTCLASS="term">confTO_QUEUEWARN_NONURGENT</DT><DDCLASS="listitem"><PCLASS="para">Time until a &quot;still queued&quot; warning is sent for low priority messages. [Timeout.queuewarn.non-urgent]</P></DD><DTCLASS="term">confTO_HOSTSTATUS</DT><DDCLASS="listitem"><PCLASS="para">Default is 30m. Timer for stale host status information. [Timeout.hoststatus]</P></DD><DTCLASS="term">confTIME_ZONE</DT><DDCLASS="listitem"><PCLASS="para">Default is USE_SYSTEM. Sets time zone from the system (USE_SYSTEM) or the TZ variable (USE_TZ). [TimeZoneSpec]</P></DD><DTCLASS="term">confDEF_USER_ID</DT><DDCLASS="listitem"><PCLASS="para">Default is 1:1. Default user ID and group ID. [DefaultUser]</P></DD><DTCLASS="term">confUSERDB_SPEC</DT><DDCLASS="listitem"><PCLASS="para">Path of the user database file. [UserDatabaseSpec]</P></DD><DTCLASS="term">confFALLBACK_MX</DT><DDCLASS="listitem"><PCLASS="para">Backup MX host. [FallbackMXhost]</P></DD><DTCLASS="term">confTRY_NULL_MX_LIST</DT><DDCLASS="listitem"><PCLASS="para">Default is False. Instructs system to connect to the remote host directly if the MX point to the local host. [TryNullMXList]</P></DD><DTCLASS="term">confQUEUE_LA</DT><DDCLASS="listitem"><PCLASS="para">Default is 8. Sends mail directly to the queue when this load averageis reached. [QueueLA]</P></DD><DTCLASS="term">confREFUSE_LA</DT><DDCLASS="listitem"><PCLASS="para">Default is 12. Refuses incoming SMTP connections at this load average. [RefuseLA]</P></DD><DTCLASS="term">confMAX_DAEMON_CHILDREN</DT><DDCLASS="listitem"><PCLASS="para">If set, refuses connection when this number of children is reached. [MaxDaemonChildren]</P></DD><DTCLASS="term">confCONNECTION_RATE_THROTTLE</DT><DDCLASS="listitem"><PCLASS="para">Maximum number of connections permitted per second, if set. [ConnectionRateThrottle]</P></DD><DTCLASS="term">confWORK_RECIPIENT_FACTOR</DT><DDCLASS="listitem"><PCLASS="para">Default is 30000. Factor used to lower the priority of a job for eachadditional recipient. [RecipientFactor]</P></DD><DTCLASS="term">confSEPARATE_PROC</DT><DDCLASS="listitem"><PCLASS="para">Default is False. Delivers messages with separate processes. [ForkEachJob]</P></DD><DTCLASS="term">confWORK_CLASS_FACTOR</DT><DDCLASS="listitem"><PCLASS="para">Default is 1800. The factor used to favor a high-priority job. [ClassFactor]</P></DD><DTCLASS="term">confWORK_TIME_FACTOR</DT><DDCLASS="listitem"><PCLASS="para">Default is 90000. Factor used to lower the priority of a job for eachdelivery attempt. [RetryFactor]</P></DD><DTCLASS="term">confQUEUE_SORT_ORDER</DT><DDCLASS="listitem"><PCLASS="para">Default is Priority. Sorts queue by Priority or Host order. [QueueSortOrder]</P></DD><DTCLASS="term">confMIN_QUEUE_AGE</DT><DDCLASS="listitem"><PCLASS="para">Default is 0. Minimum time a job must be queued. [MinQueueAge]</P></DD><DTCLASS="term">confDEF_CHAR_SET</DT><DDCLASS="listitem"><PCLASS="para">Default is unknown-8bit. Default character set for unlabeled 8-bit MIME data. [DefaultCharSet]</P></DD><DTCLASS="term">confSERVICE_SWITCH_FILE</DT><DDCLASS="listitem"><PCLASS="para">Default is <EMCLASS="emphasis">/etc/service.switch</EM>. The path to the service switch file. [ServiceSwitchFile]</P></DD><DTCLASS="term">confHOSTS_FILE</DT><DDCLASS="listitem"><PCLASS="para">Default is <EMCLASS="emphasis">/etc/hosts</EM>. The path to the hostnames file. [HostsFile]</P></DD><DTCLASS="term">confDIAL_DELAY</DT><DDCLASS="listitem"><PCLASS="para">Default is 0s. Amount of time to delay before retrying a &quot;dial ondemand&quot; connection. 0s means &quot;don't retry&quot;. [DialDelay]</P></DD><DTCLASS="term">confNO_RCPT_ACTION</DT><DDCLASS="listitem"><PCLASS="para">Default is <BCLASS="emphasis.bold">none</B>. Handling for mail with no recipient headers: donothing (<BCLASS="emphasis.bold">none</B>); add To: header (<BCLASS="emphasis.bold">add-to</B>); addApparently-To: header (<BCLASS="emphasis.bold">add-apparently-to</B>); add a Bcc: header(<BCLASS="emphasis.bold">add-bcc</B>); add &quot;To: undisclosed-recipients&quot; header(<BCLASS="emphasis.bold">add-to-undisclosed</B>).  [NoRecipientAction]</P></DD><DTCLASS="term">confSAFE_FILE_ENV</DT><DDCLASS="listitem"><PCLASS="para">Default is undefined. <BCLASS="emphasis.bold">chroot()</B> to this directory before writing files.[SafeFileEnvironment]</P></DD><DTCLASS="term">confCOLON_OK_IN_ADDR</DT><DDCLASS="listitem"><PCLASS="para">Default is True. Treats colons as regular characters in addresses.[ColonOkInAddr]</P></DD><DTCLASS="term">confMAX_QUEUE_RUN_SIZE</DT><DDCLASS="listitem"><PCLASS="para">Default is 0. Limits the number of entries processed in a queue run. 0means no limit. [MaxQueueRunSize]</P></DD><DTCLASS="term">confDONT_EXPAND_CNAMES</DT><DDCLASS="listitem"><PCLASS="para">Default is False. If true, don't convert nicknames to canonicalnames. False means &quot;do convert.&quot; [DontExpandCnames]</P></DD><DTCLASS="term">confFROM_LINE</DT><DDCLASS="listitem"><PCLASS="para">Default is From $g  $d. The format of the UNIX From: line. [UnixFromLine]</P></DD><DTCLASS="term">confOPERATORS</DT><DDCLASS="listitem"><PCLASS="para">Default is .:%@!^/[]+.  Address operator characters. [OperatorChars]</P></DD><DTCLASS="term">confSMTP_LOGIN_MSG</DT><DDCLASS="listitem"><PCLASS="para">Default is <EMCLASS="emphasis">$j sendmail $v/$Z; $b</EM>. The SMTP greetingmessage. [SmtpGreetingMessage]</P></DD><DTCLASS="term">confDONT_INIT_GROUPS</DT><DDCLASS="listitem"><PCLASS="para">Default is False. If true, disable the initgroups(3) routine. Falsemeans &quot;use the initgroups(3) routine.  [DontInitGroups]</P></DD><DTCLASS="term">confUNSAFE_GROUP_WRITES</DT><DDCLASS="listitem"><PCLASS="para">Default is False. If true, don't reference programs or file fromgroup-writable <EMCLASS="emphasis">:include:</EM> and <EMCLASS="emphasis">.forward</EM>files. [UnsafeGroupWrites]</P></DD><DTCLASS="term">confDOUBLE_BOUNCE_ADDRESS</DT><DDCLASS="listitem"><PCLASS="para">Default is <EMCLASS="emphasis">postmaster</EM>. When errors occur sending an errormessage, send the second error message to thisaddress. [DoubleBounceAddress]</P></DD><DTCLASS="term">confRUN_AS_USER</DT><DDCLASS="listitem"><PCLASS="para">Default is undefined. Run as this user to read and deliver mail.[RunAsUser]</P></DD><DTCLASS="term">confSINGLE_THREAD_DELIVERY</DT><DDCLASS="listitem"><PCLASS="para">Default is False. Force single threaded mail deliver<ACLASS="indexterm"NAME="AUTOID-27126"></A>when set withHostStatusDirectory. [SingleThreadDelivery]</P></DD></DL><PCLASS="para"><BCLASS="emphasis.bold">define</B> macros are the most common macros in the <BCLASS="emphasis.bold">m4</B> sourcefiles. The next most commonly used macro is the FEATURE macro.<ACLASS="indexterm"NAME="AUTOID-27131"></A></P></DIV><DIVCLASS="sect2"><H3CLASS="sect2"><ACLASS="title"NAME="TCP2-AP-5-SECT-3.2">E.3.2 FEATURE</A></H3><PCLASS="para"><ACLASS="indexterm"NAME="TCP2-AP-5-IX-FEATURE-MACRO-IN-SENDMAIL"></A>The FEATURE macro processes <BCLASS="emphasis.bold">m4</B> source code from the <EMCLASS="emphasis">cf/feature</EM><ACLASS="indexterm"NAME="AUTOID-27140"></A>directory. Source files in that directory define optional sendmailfeatures that you may wish to include in your configuration. The syntaxof the FEATURE macro is:</P><BLOCKQUOTECLASS="blockquote"><PCLASS="para"><CODECLASS="literal">FEATURE</CODE>(<CODECLASS="replaceable"><I>name</I></CODE>, [<CODECLASS="replaceable"><I>argument</I></CODE>])</P></BLOCKQUOTE><PCLASS="para">The FEATURE source file can be called with or without an optionalargument. If an argument is passed to the source file the argument isused by the source file to generate code for the <EMCLASS="emphasis">sendmail.cf</EM> file.For example:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">FEATURE(mailertable, dbm /usr/lib/mailertable)</PRE></BLOCKQUOTE></P><PCLASS="para">generates the code for accessing the mailertable and defines that tableas being a dbm database located in the file <EMCLASS="emphasis">/usr/lib/mailertable</EM>.</P><PCLASS="para"><ACLASS="indexterm"NAME="TCP2-AP-5-IX-FEATURE-MACRO-IN-SENDMAIL-FEATURES-LISTED"></A>There are several features available in sendmail V8. They are alllisted in <ACLASS="xref"HREF="appe_03.htm#TCP2-AP-5-TAB-2"TITLE="sendmail V8 Features">Table 13.6</A>The table provides the name of each feature andits purpose.</P><TABLECLASS="table"><CAPTIONCLASS="table"><ACLASS="title"NAME="TCP2-AP-5-TAB-2">Table E.3: sendmail V8 Features</A></CAPTION><THEADCLASS="thead"><TRCLASS="row"VALIGN="TOP"><THCLASS="entry"ALIGN="LEFT"ROWSPAN="1"COLSPAN="1">Name</TH><THCLASS="entry"ALIGN="LEFT"ROWSPAN="1"COLSPAN="1">Purpose</TH></TR></THEAD><TBODYCLASS="tbody"><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">use_cw_file</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Load <BCLASS="emphasis.bold">$=w</B> from <EMCLASS="emphasis">/etc/sendmail.cw</EM>.</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">use_ct_file</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Load <BCLASS="emphasis.bold">$=t</B> from <EMCLASS="emphasis">/etc/sendmail.ct</EM>.</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">redirect</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Support the .REDIRECT pseudo-domain.</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">nouucp</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Don't include UUCP address processing.</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">nocanonify</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Don't convert names with $[ ... $] syntax.</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">stickyhost</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Treat &quot;user&quot; different than &quot;user@local.host&quot;.[4]</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">mailertable</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Mail routing using a mailer table.</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">domaintable</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Domain name mapping using a domain table.</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">bitdomain</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Use a table to map bitnet hosts to Internet addresses.</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">uucpdomain</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Use a table to map UUCP hosts to Internet addresses.</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">always_add_domain</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Add the local hostname to all locally delivered mail.</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">allmasquerade</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Also masquerade recipient addresses.</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">limited_masquerade</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Only masquerade hosts listed in <BCLASS="emphasis.bold">$=M</B>.</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">masquerade_entire_domain</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Masquerade all hosts within the masquerading domains.</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">genericstable</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Use a table to rewrite local addresses.</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">virtusertable</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Maps virtual domain names to real mail addresses.</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">nodns</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Don't include DNS support.</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">nullclient</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Forwarding all mail to a central server.</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">local_procmail</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Use procmail as the local mailer.</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">bestmx_is_local</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><PCLASS="para">Accept mail as local when it is addressed to a host that lists us as its MX server.</P></TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">smrsh</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Use <BCLASS="emphasis.bold">smrsh</B> as the prog mailer.</TD></TR></TBODY></TABLE><BLOCKQUOTECLASS="footnote"><PCLASS="para">[4] See the discussion of &quot;stickyhost&quot; in the &quot;DOMAIN&quot; section later in thisappendix.</P></BLOCKQUOTE><PCLASS="para">The <BCLASS="emphasis.bold">use_cw_file</B> and the <BCLASS="emphasis.bold">use_ct_file features</B> are equivalent to<BCLASS="emphasis.bold">Fw/etc/sendmail.cw</B> and <BCLASS="emphasis.bold">Fw/etc/sendmail.ct</B> commands in the <EMCLASS="emphasis">sendmail.cf</EM> file. See <ACLASS="xref"HREF="ch10_01.htm"TITLE="sendmail ">Chapter 10</A> for descriptions of host aliases (<BCLASS="emphasis.bold">$=w</B>) and trusted users (<BCLASS="emphasis.bold">$=t</B>).<ACLASS="indexterm"NAME="AUTOID-27248"></A></P><PCLASS="para">The .REDIRECT pseudo-domain code returns an error message to the sendertelling them to try a new address for the recipient. This is used tohandle mail for people who no longer read mail at your site but who arestill getting mail sent to a very old address. Enable this feature withthe <BCLASS="emphasis.bold">FEATURE(redirect)</B> command and then add aliases for each obsoletemailing address in the form:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen"><CODECLASS="replaceable"><I>old-address        new-address.</I></CODE>REDIRECT</PRE></BLOCKQUOTE></P><PCLASS="para">For example: assume that Edward Winslow is no longer a valid user of<EMCLASS="emphasis">almond.nuts.com</EM>. His old username, <EMCLASS="emphasis">ed</EM>, should no longeraccept mail. His new mailing address is <EMCLASS="emphasis">WinslowE@industry.com</EM>. We enterthe following alias in the <EMCLASS="emphasis">/etc/aliases</EM> file:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">ed                 WinslowE@industry.com.REDIRECT</PRE></BLOCKQUOTE></P><PCLASS="para">Now when mail is to the <EMCLASS="emphasis">ed</EM> account on <EMCLASS="emphasis">almond</EM>, the followingerror is returned to the sender:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">551 User not local; please try &lt;WinslowE@industry.com&gt;</PRE></BLOCKQUOTE></P><PCLASS="para">Several of the FEATURE macros actually remove features from the<EMCLASS="emphasis">sendmail.cf</EM> file instead of adding them. nouucp removes the codeto handle UUCP addresses for systems that do not have access to UUCPnetworks, and nodns removes the code for DNS lookups for systems thatdo not have access to DNS. nocanonify, which is rarely used, disablesthe <BCLASS="emphasis.bold">$[</B><EMCLASS="emphasis">name</EM><BCLASS="emphasis.bold">]$</B> syntax that converts nicknames and IPaddresses; see Table 10-7. Finally, the nullclient feature stripseverything out of the configuration except for the ability to forwardmail to a single mail server via a local SMTP link. The name of themail server is provided as the argument on the nullclient commandline. For example, <BCLASS="emphasis.bold">FEATURE(nullclient, ms.big.com</B>) forwards allmail to <EMCLASS="emphasis">ms.big.com</EM> without any local mail processing.</P><PCLASS="para">Several features relate to mail relaying and masquerading. Theyare: stickyhost, allmasquerade, limited_masquerade andmasquerade_entire_domain. All of these features are covered in the&quot;DOMAIN&quot; section later in this appendix.</P><PCLASS="para">Several of the features define databases that are used to perform specialaddress processing. All of these features accept an optional argumentthat defines the database. (See the sample <BCLASS="emphasis.bold">mailertable</B> command at thebeginning of this section for an example of defining the database withthe optional argument.) If the optional argument is not provided thedatabase description always defaults to <BCLASS="emphasis.bold">hash -o /etc/</B><EMCLASS="emphasis">filename</EM>,where <EMCLASS="emphasis">filename</EM> matches the name of the feature. For example:<BCLASS="emphasis.bold">mailertable</B> defaults to the definition <CODECLASS="literal">hash -o /etc/mailertable</CODE>.The database features are:</P><DLCLASS="variablelist"><DTCLASS="term"><BCLASS="emphasis.bold">mailertable</B></DT><DDCLASS="listitem"><PCLASS="para">Maps host and domain names to specific mailer:host pairs.[5]If the host or domain name in the recipient addresses matches a keyfield in the mailertable database, it returns the mailer and host forthat address. The format of mailertable entries is:</P><BLOCKQUOTECLASS="footnote"><PCLASS="para">[5] See <ACLASS="xref"HREF="ch10_01.htm"TITLE="sendmail ">Chapter 10</A> for a description of the mailer, host, and usertriple returned by ruleset 0.</P></BLOCKQUOTE><PCLASS="para"><CODECLASS="replaceable"><I>domain-name      mailer</I></CODE><BCLASS="emphasis.bold">:</B><CODECLASS="replaceable"><I>host</I></CODE></P><PCLASS="para">where <CODECLASS="replaceable"><I>domain-name</I></CODE> is either a full hostname (host plus domain)or a domain name. If a domain name is used it must start with a dot(.), and it will match every host in the specified domain.</P></DD><DTCLASS="term"><BCLASS="emphasis.bold">domaintable</B></DT><DDCLASS="listitem"><PCLASS="para">Converts an old domain name to a new domain name. The old name is thekey and the new name is the value returned for the key.</P></DD><DTCLASS="term"><BCLASS="emphasis.bold">bitdomain</B></DT><DDCLASS="listitem"><PCLASS="para">Converts a Bitnet hostname to an Internet hostname. The Bitnetname is the key and the Internet hostname is the value returned.The <BCLASS="emphasis.bold">bitdomain</B> program that comes with sendmail V8 can be used tobuild this database.</P></DD><DTCLASS="term"><BCLASS="emphasis.bold">uucpdomain</B></DT><DDCLASS="listitem"><PCLASS="para">Converts a UUCP name to an Internet hostname. The key is the UUCP hostname and the value returned is the Internet hostname.</P></DD><DTCLASS="term"><BCLASS="emphasis.bold">generictable</B></DT><DDCLASS="listitem"><PCLASS="para">Converts a sender email address. The key to the database is either ausername or a full email address (username and hostname). The valuereturned by the database is always a full email address. If the valuespecified in the database is not a full address, <BCLASS="emphasis.bold">genericstable</B>appends the value from <BCLASS="emphasis.bold">$j</B> to the value to force it to be a fulladdress.  <BCLASS="emphasis.bold">genericstable</B> converts the same address as thoseprocessed for masquerading<ACLASS="indexterm"NAME="AUTOID-27320"></A>and the features that affect masqueradingaffect the <BCLASS="emphasis.bold">genericstable</B> conversion in exactly the same way. See<ACLASS="xref"HREF="ch10_01.htm"TITLE="sendmail ">Chapter 10</A> for an example of using the <BCLASS="emphasis.bold">genericstable</B> andsee the &quot;DOMAIN&quot; section later in this appendix for information onmasquerading. Note that if you use the <BCLASS="emphasis.bold">genericstable</B> and youdon't use masquerading, you can still get the functionality of theMASQUERADE_DOMAIN and the MASQUERADE_DOMAIN_FILE by usingGENERICS_DOMAIN and GENERICS_DOMAIN_FILE. These commands have the samefunction and are used in the same way as their masqueradecounterparts, which are described in the following section.</P></DD><DTCLASS="term"><BCLASS="emphasis.bold">virtusertable</B></DT><DDCLASS="listitem"><PCLASS="para">Aliases incoming email addresses. Essentially, this is an extended aliasdatabase for aliasing addresses that are not local to this host. The keyto the database is a full email address or a domain name. The valuereturned by the database is the recipient address to which the mailis delivered. If a domain name is used as a key, it must begin withan at-sign (@). Mail addressed to any user in the specified domain issent to the recipient defined by the virtusertable database. Any hostname used as a key in the virtusertable database must also be defined inclass w.</P></DD></DL><PCLASS="para">Two of the remaining FEATURE commands relate to domains.<ACLASS="indexterm"NAME="AUTOID-27332"></A>The<BCLASS="emphasis.bold">always_add_domain</B> macro makes sendmail add the local hostname toall locally delivered mail, even to those pieces of mail that wouldnormally have just a username as an address. The <BCLASS="emphasis.bold">bestmx_is_local</B>feature accepts mail addressed to a host that lists the local host asits preferred MX server as if the mail was local mail. If this featureis not used, mail bound for a remote host is sent directly to theremote host even if its MX record lists the local host as its preferredMX server. The <BCLASS="emphasis.bold">bestmx_is_local</B> feature should not be used if you use awildcard MX record for your domain.</P><PCLASS="para">The last two features are used to select optional programs for the localand the prog mailers. local_procmail selects <BCLASS="emphasis.bold">procmail</B> as thelocal mailer. Provide the path to <BCLASS="emphasis.bold">procmail</B> as the argument inthe FEATURE command. The <BCLASS="emphasis.bold">smrsh</B> feature selects the sendmail RestrictedSHell (<BCLASS="emphasis.bold">smrsh</B>) as the prog mailer. <BCLASS="emphasis.bold">smrsh</B> provides improvedsecurity over /bin/sh, which is normally used as the prog mailer.Provide the path to <BCLASS="emphasis.bold">smrsh</B> as the argument in the FEATURE command.</P><PCLASS="para">The FEATURE commands discussed in this section and the <BCLASS="emphasis.bold">define</B> macrosdiscussed previously are used to build the <BCLASS="emphasis.bold">m4</B> source files. Theremainder of this section describes the purpose and structure of theOSTYPE, DOMAIN, and MAILER source files.<ACLASS="indexterm"NAME="AUTOID-27347"></A></P></DIV><DIVCLASS="sect2"><H3CLASS="sect2"><ACLASS="title"NAME="TCP2-AP-5-SECT-3.3">E.3.3 OSTYPE</A></H3><PCLASS="para"><ACLASS="indexterm"NAME="TCP2-AP-5-IX-OSTYPE-MACRO-IN-SENDMAIL"></A>The source file for the OSTYPE macro defines operating system-specificparameters. Many operating systems are pre-defined. Look in the<EMCLASS="emphasis">sendmail/cf/ostype</EM> directory for a full listing of the systemsthat are already defined.</P><PCLASS="para"><ACLASS="indexterm"NAME="TCP2-AP-5-IX-OSTYPE-MACRO-DEFINES-LISTED"></A>OSTYPE source files are mostly composed of <BCLASS="emphasis.bold">define</B> macros.<ACLASS="xref"HREF="appe_03.htm#TCP2-AP-5-TAB-3"TITLE="OSTYPE Defines">Table 13.7</A>lists the <BCLASS="emphasis.bold">define</B> parameters most frequentlyassociated with the OSTYPE source file and the function of eachparameter. The default value assigned to each parameter is shownenclosed in square brackets after its functional description, if theparameter has a default value.</P><TABLECLASS="table"><CAPTIONCLASS="table"><ACLASS="title"NAME="TCP2-AP-5-TAB-3">Table E.4: OSTYPE Defines</A></CAPTION><THEADCLASS="thead"><TRCLASS="row"VALIGN="TOP"><THCLASS="entry"ALIGN="LEFT"ROWSPAN="1"COLSPAN="1">Parameter</TH><THCLASS="entry"ALIGN="LEFT"ROWSPAN="1"COLSPAN="1">Function</TH></TR></THEAD><TBODYCLASS="tbody"><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">ALIAS_FILE</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Name of the alias file. [<EMCLASS="emphasis">/etc/aliases</EM>]</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">HELP_FILE</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Name of the help file. [<EMCLASS="emphasis">/usr/lib/sendmail.hf</EM>]</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">QUEUE_DIR</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Directory containing queue files. [<EMCLASS="emphasis">/var/spool/mqueue</EM>]</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">STATUS_FILE</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Name of the status file. [<EMCLASS="emphasis">/etc/sendmail.st</EM>]</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">LOCAL_MAILER_PATH</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">The local mail delivery program. [<EMCLASS="emphasis">/bin/mail</EM>]</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">LOCAL_MAILER_FLAGS</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Local mailer flags added to &quot;lsDFM&quot;. [<BCLASS="emphasis.bold">rmn</B>]</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">LOCAL_MAILER_ARGS</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Arguments for local mail delivery. [<BCLASS="emphasis.bold">mail -d $u</B>]</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">LOCAL_MAILER_MAX</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Maximum size of local mail. </TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">LOCAL_MAILER_CHARSET</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Character set for local 8-bit MIME mail. </TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">LOCAL_SHELL_PATH</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Shell used to deliver piped email. [<EMCLASS="emphasis">/bin/sh</EM>]</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">LOCAL_SHELL_FLAGS</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Flags added to lsDFM for the shell mailer. [<BCLASS="emphasis.bold">eu</B>]</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">LOCAL_SHELL_ARGS</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Arguments for the &quot;prog&quot; mail. [<BCLASS="emphasis.bold">sh -c $u</B>]</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">LOCAL_SHELL_DIR</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Directory which the shell should run. [<EMCLASS="emphasis">$z:/</EM>]</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">USENET_MAILER_PATH</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Program used for news. [<EMCLASS="emphasis">/usr/lib/news/inews</EM>]</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">USENET_MAILER_FLAGS</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Usenet mailer flags. [<BCLASS="emphasis.bold">rlsDFMmn</B>]</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">USENET_MAILER_ARGS</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Arguments for the usenet mailer. [<BCLASS="emphasis.bold">-m -h -n</B>]</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">USENET_MAILER_MAX</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Maximum size of usenet mail messages. [100000]</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">SMTP_MAILER_FLAGS</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Flags added to &quot;mDFMUX&quot; for all SMTP mailers. </TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">SMTP_MAILER_MAX</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Maximum size of messages for all SMTP mailers. </TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">SMTP_MAILER_ARGS</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">smtp mailer arguments. [<BCLASS="emphasis.bold">IPC $h</B>]</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">ESMTP_MAILER_ARGS</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">esmtp mailer arguments. [<BCLASS="emphasis.bold">IPC $h</B>]</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">SMTP8_MAILER_ARGS</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">smtp8 mailer arguments. [<BCLASS="emphasis.bold">IPC $h</B>]</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">RELAY_MAILER_ARGS</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">relay mailer arguments. [<BCLASS="emphasis.bold">IPC $h</B>]</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">SMTP_MAILER_CHARSET</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Character set for SMTP 8-bit MIME mail. </TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">UUCP_MAILER_PATH</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Path to the UUCP mail program. [<EMCLASS="emphasis">/usr/bin/uux</EM>]</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">UUCP_MAILER_FLAGS</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Flags added to &quot;DFMhuU&quot; for the UUCP mailer. </TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">UUCP_MAILER_ARGS</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">UUCP mailer arguments.</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">&nbsp;&nbsp;&nbsp;[<EMCLASS="emphasis">uux - -r -z -a$g -gC $h!rmail ($u)</EM>]</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">UUCP_MAILER_MAX</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Maximum size for UUCP messages. [100000]</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">UUCP_MAILER_CHARSET</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Character set for UUCP 8-bit MIME mail. </TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">FAX_MAILER_PATH</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Path to the FAX program. [<EMCLASS="emphasis">/usr/local/lib/fax/mailfax</EM>]</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">FAX_MAILER_ARGS</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">FAX mailer arguments. [<BCLASS="emphasis.bold">mailfax $u $h $f</B>]</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">FAX_MAILER_MAX</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Maximum size of a FAX. [100000]</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">POP_MAILER_PATH</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Path of the POP mailer. [<EMCLASS="emphasis">/usr/lib/mh/spop</EM>]</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">POP_MAILER_FLAGS</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Flags added to &quot;lsDFM&quot; for the POP mailer. [<BCLASS="emphasis.bold">Penu</B>]</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">POP_MAILER_ARGS</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">POP mailer arguments. [<BCLASS="emphasis.bold">pop $u</B>]</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">PROCMAIL_MAILER_PATH</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Path to the procmail program. [<EMCLASS="emphasis">/usr/local/bin/procmail</EM>]</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">PROCMAIL_MAILER_FLAGS</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Flags added to &quot;DFMmn&quot; for the Procmail mailer. [<BCLASS="emphasis.bold">Shu</B>]</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">PROCMAIL_MAILER_ARGS</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Procmail mailer arguments. [<BCLASS="emphasis.bold">procmail -m $h $f $u</B>]</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">PROCMAIL_MAILER_MAX</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Maximum size message for the Procmail mailer. </TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">MAIL11_MAILER_PATH</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Path to the mail11 mailer. [<EMCLASS="emphasis">/usr/etc/mail11</EM>]</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">MAIL11_MAILER_FLAGS</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Flags for the mail11 mailer. [<BCLASS="emphasis.bold">nsFx</B>]</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">MAIL11_MAILER_ARGS</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">mail11 mailer arguments. [<BCLASS="emphasis.bold">mail11 $g $x $h $u</B>]</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">PH_MAILER_PATH</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Path to the phquery program. [<EMCLASS="emphasis">/usr/local/etc/phquery</EM>]</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">PH_MAILER_FLAGS</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Flags for the phquery mailer. [<BCLASS="emphasis.bold">ehmu</B>]</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">PH_MAILER_ARGS</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">phquery mailer arguments. [<BCLASS="emphasis.bold">phquery -- $u</B>]</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">CYRUS_MAILER_FLAGS</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Flags added to &quot;lsDFMnP&quot; for the cyrus mailer. [<BCLASS="emphasis.bold">A5@</B>]</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">CYRUS_MAILER_PATH</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Path to the cyrus mailer. [<EMCLASS="emphasis">/usr/cyrus/bin/deliver</EM>]</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">CYRUS_MAILER_ARGS</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">cyrus mailer arguments. [<BCLASS="emphasis.bold">deliver -e -m $h -- $u</B>]</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">CYRUS_MAILER_MAX</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Maximum size message for the cyrus mailer. </TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">CYRUS_MAILER_USER</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">User and group used to the cyrus mailer. [<EMCLASS="emphasis">cyrus:mail</EM>]</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">CYRUS_BB_MAILER_FLAGS</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Flags added to &quot;lsDFMnP&quot; for the cyrusbb mailer. </TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">CYRUS_BB_MAILER_ARGS</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">cyrusbb mailer arguments. [<BCLASS="emphasis.bold">deliver -e -m $u</B>]</TD></TR></TBODY></TABLE><PCLASS="para">Despite the long list of parameters in <ACLASS="xref"HREF="appe_03.htm#TCP2-AP-5-TAB-3"TITLE="OSTYPE Defines">Table 13.7</A>most OSTYPE macrosare very short. The largest OSTYPE file in the sendmail V8distribution contains only eight <BCLASS="emphasis.bold">define</B>s. There are a few reasons forthis. First, many of the parameters in the table are redundant. Theydefine the same things for different mailers, and no operating systemsuses all of the mailers. Second, the default values are oftencorrect. A <BCLASS="emphasis.bold">define</B> only needs to be made if the operating systemrequires a value different than the default.<ACLASS="indexterm"NAME="AUTOID-27572"></A><ACLASS="indexterm"NAME="AUTOID-27573"></A></P></DIV><DIVCLASS="sect2"><H3CLASS="sect2"><ACLASS="title"NAME="TCP2-AP-5-SECT-3.4">E.3.4 DOMAIN</A></H3><PCLASS="para"><ACLASS="indexterm"NAME="TCP2-AP-5-IX-DOMAIN-SOURCE-FILE-IN-SENDMAIL"></A>The DOMAIN source file defines configuration parameters that arerelated to the local domain. <ACLASS="xref"HREF="ch10_01.htm"TITLE="sendmail ">Chapter 10</A> provides an example of aDOMAIN file built for the imaginary <EMCLASS="emphasis">nuts.com</EM> domain.</P><PCLASS="para"><ACLASS="indexterm"NAME="TCP2-AP-5-IX-DOMAIN-SOURCE-FILE-IN-SENDMAIL-MAIL-RELAY-DEFINES-LISTED"></A><ACLASS="xref"HREF="appe_03.htm#TCP2-AP-5-TAB-4"TITLE="Mail Relay Defines">Table 13.8</A>shows some <BCLASS="emphasis.bold">define</B> macros that commonly appear in DOMAINfiles. (See the syntax of the <BCLASS="emphasis.bold">define</B> macro earlier.) This tablelists the parameters and the function of each parameter. All of theseparameters are used to define mail relay hosts. The value provided foreach parameter is either a hostname, i.e., the name of a mail relayserver, or a mailer:hostname pair where the mailer is the internal nameof a local sendmail mailer and the hostname is the name of theremote mail relay server. If only a hostname is used, the mailerdefaults to <EMCLASS="emphasis">relay</EM>, which is the name of the SMTP relay mailer.If no values are provided for these parameters, the BITNET, DECNET, andFAX pseudo-domains are not used, and the local host must be able tohandle its own UUCP and &quot;local&quot; mail.</P><TABLECLASS="table"><CAPTIONCLASS="table"><ACLASS="title"NAME="TCP2-AP-5-TAB-4">Table E.5: Mail Relay Defines</A></CAPTION><THEADCLASS="thead"><TRCLASS="row"VALIGN="TOP"><THCLASS="entry"ALIGN="LEFT"ROWSPAN="1"COLSPAN="1">Parameter</TH><THCLASS="entry"ALIGN="LEFT"ROWSPAN="1"COLSPAN="1">Function</TH></TR></THEAD><TBODYCLASS="tbody"><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">UUCP_RELAY</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Server for UUCP-addressed email</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">BITNET_RELAY</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Server for BITNET-addressed email</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">DECNET_RELAY</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Server for DECNET-addressed email</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">FAX_RELAY</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Server for mail to the .FAX pseudo-domain[6]</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">LOCAL_RELAY</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Sever for unqualified names</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">LUSER_RELAY</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Server for apparently local names that really aren't local</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">MAIL_HUB</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Server for all incoming mail</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">SMART_HOST</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Server for all outgoing mail</TD></TR></TBODY></TABLE><BLOCKQUOTECLASS="footnote"><PCLASS="para">[6] The &quot;fax&quot; mailer overrides this value.</P></BLOCKQUOTE><PCLASS="para">The precedence of the relays defined by these parameters is from themost specific to the least specific. If both the BITNET_RELAY andthe SMART_HOST relay are defined, the BITNET_RELAY is used for outgoingBITNET mail even though the SMART_HOST relay is defined as handling &quot;all&quot;outgoing mail. If you define both LOCAL_RELAY and MAIL_HUB, you mustalso use the FEATURE(stickyhost) command to get the expected behavior.</P><PCLASS="para">When the stickyhost feature is specified, LOCAL_RELAY handles all localaddresses that do not have a host part, and MAIL_HUB handles all localaddresses that do have a host part. If stickyhost is not specified andboth relays are defined, the LOCAL_RELAY is ignored and MAIL_HUB handlesall local addresses.<ACLASS="indexterm"NAME="AUTOID-27625"></A>&#13;</P><PCLASS="para">In addition to the defines shown in <ACLASS="xref"HREF="appe_03.htm#TCP2-AP-5-TAB-4"TITLE="Mail Relay Defines">Table 13.8</A>there are a group ofmacros that relate to masquerading and relaying that also appear in theDOMAIN source file. Some of these are used in the examples in <ACLASS="xref"HREF="ch10_01.htm"TITLE="sendmail ">Chapter 10</A>.The macros are:</P><DLCLASS="variablelist"><DTCLASS="term">LOCAL_USER(<CODECLASS="replaceable"><I>usernames</I></CODE>)</DT><DDCLASS="listitem"><PCLASS="para">Defines local usernames that should not be relayed even if LOCAL_RELAYor MAIL_HUB are defined. This command is the same as adding usernamesto class L in the <EMCLASS="emphasis">sendmail.cf</EM> file.</P></DD><DTCLASS="term">MASQUERADE_AS(<CODECLASS="replaceable"><I>host.domain</I></CODE>)</DT><DDCLASS="listitem"><PCLASS="para"><ACLASS="indexterm"NAME="TCP2-AP-5-IX-MASQUERADING"></A>Converts the host portion of the sender address on outgoing mail to thedomain name defined by <EMCLASS="emphasis">host.domain</EM>. Sender addresses that haveno hostname or that have a hostname found in the w class are converted.This has the same as effect as defining <EMCLASS="emphasis">host.domain</EM> for the Mmacro in the <EMCLASS="emphasis">sendmail.cf</EM> file. See examples of MASQUERADE_AS andmacro M in <ACLASS="xref"HREF="ch10_01.htm"TITLE="sendmail ">Chapter 10</A>.</P></DD><DTCLASS="term">MASQUERADE_DOMAIN(<CODECLASS="replaceable"><I>otherhost.domain</I></CODE>)</DT><DDCLASS="listitem"><PCLASS="para">Converts the host portion of the sender address on outgoing mail to thedomain name defined by the MASQUERADE_AS command, if the host portion ofthe sender address matches <EMCLASS="emphasis">otherhost.domain</EM>. This command must beused in conjunction with MASQUERADE_AS. Its effect is the same as addinghostnames to class M in the <EMCLASS="emphasis">sendmail.cf</EM> file. See <ACLASS="xref"HREF="ch10_01.htm"TITLE="sendmail ">Chapter 10</A>.</P></DD><DTCLASS="term">MASQUERADE_DOMAIN_FILE(<CODECLASS="replaceable"><I>filename</I></CODE>)</DT><DDCLASS="listitem"><PCLASS="para">Loads <EMCLASS="emphasis">otherhost.domain</EM> hostnames from the file identified by<EMCLASS="emphasis">filename</EM>. This can be used in place of multiple MASQUERADE_DOMAINcommands. Its effect is the same as loading class M from a file byusing the <BCLASS="emphasis.bold">FM</B><CODECLASS="replaceable"><I>filename</I></CODE> command in the <EMCLASS="emphasis">sendmail.cf</EM> file.</P></DD><DTCLASS="term">EXPOSED_USER(<CODECLASS="replaceable"><I>username</I></CODE>)</DT><DDCLASS="listitem"><PCLASS="para">Disables masquerading when the user portion of the sender address matches<EMCLASS="emphasis">username</EM>. Some usernames, such as root, occur on many systemsand are therefore not unique across a domain. For those usernames, convertingthe host portion of the address makes it impossible to sort out wherethe message really came from and makes replies impossible. This commandprevents the MASQUERADE_AS command from having an effect on the senderaddresses for specific users. This is the same as setting the values inclass E in the <EMCLASS="emphasis">sendmail.cf</EM> file.</P></DD></DL><PCLASS="para">There are several features that affect relaying and masquerading.We have already discussed FEATURE(stickyhost). Others are:</P><DLCLASS="variablelist"><DTCLASS="term">FEATURE(masquerade_envelope)</DT><DDCLASS="listitem"><PCLASS="para">Causes envelop addresses to be masqueraded in the same way that senderaddresses are masqueraded. See <ACLASS="xref"HREF="ch10_01.htm"TITLE="sendmail ">Chapter 10</A> for an example of thiscommand.</P></DD><DTCLASS="term">FEATURE(allmasquerade)</DT><DDCLASS="listitem"><PCLASS="para">Causes recipient addresses to be masqueraded in the same way thatsender addresses are masqueraded. Thus, if the host portion of therecipient address matches the requirements of the MASQUERADE_AScommand, it is converted.Don't use this feature unless you are positive that every alias knownto the local system is also known to the mail server that handles mailfor the masquerade domain.</P></DD><DTCLASS="term">FEATURE(limited_masquerade)</DT><DDCLASS="listitem"><PCLASS="para">Limits masquerading to those hosts definedin class M. The hosts defined in class w are not masqueraded.</P></DD><DTCLASS="term">FEATURE(masquerade_entire_domain)</DT><DDCLASS="listitem"><PCLASS="para">Causes MASQUERADE_DOMAIN to be interpreted as referring to all hostswith an entire domain.  If this feature is not used, only an addressthat exactly matches the value defined by MASQUERADE_DOMAIN isconverted. If this feature is used, all addresses that end with thevalue defined by MASQUERADE_DOMAIN are converted.For example, assume that the options MASQUERADE_AS(nuts.com) andMASQUERADE_DOMAIN(sales.nuts.com) are defined. IfFEATURE (masquerade_entire_domain) is set, every hostname in the<EMCLASS="emphasis">sales.nuts.com</EM> domain is converted to <EMCLASS="emphasis">nuts.com</EM> on outgoingemail. Otherwise only the hostname <EMCLASS="emphasis">sales.nuts.com</EM> is converted.<ACLASS="indexterm"NAME="AUTOID-27694"></A></P></DD></DL><PCLASS="para">See the &quot;FEATURE&quot; section earlier in this chapter for more informationon the available features.<ACLASS="indexterm"NAME="AUTOID-27696"></A></P></DIV><DIVCLASS="sect2"><H3CLASS="sect2"><ACLASS="title"NAME="TCP2-AP-5-SECT-3.5">E.3.5 MAILER</A></H3><PCLASS="para"><ACLASS="indexterm"NAME="TCP2-AP-5-IX-MAILER-SOURCE-FILE-IN-SENDMAIL"></A>It is possible that you will need to customize a file location in anOSTYPE file or that you will need to define domain specific information in aDOMAIN file, but unless you develop your own mail delivery program youwill not need to create a MAILER source file. Instead, you will needto invoke one or more existing files in your macro configuration file.</P><PCLASS="para"><ACLASS="indexterm"NAME="TCP2-AP-5-IX-MAILER-SOURCE-FILE-IN-SENDMAIL-VALUES-AVAILABLE-LISTED"></A>The available MAILER files are listed in <ACLASS="xref"HREF="appe_03.htm#TCP2-AP-5-TAB-5"TITLE="MAILER Values">Table 13.9</A>This table listseach MAILER value and its function. These are invoked using theMAILER(<CODECLASS="replaceable"><I>value</I></CODE>) command in the macro configuration (<EMCLASS="emphasis">.mc</EM>)file, where <CODECLASS="replaceable"><I>value</I></CODE> is one of the mailer names from the table.</P><TABLECLASS="table"><CAPTIONCLASS="table"><ACLASS="title"NAME="TCP2-AP-5-TAB-5">Table E.6: MAILER Values</A></CAPTION><THEADCLASS="thead"><TRCLASS="row"VALIGN="TOP"><THCLASS="entry"ALIGN="LEFT"ROWSPAN="1"COLSPAN="1">Name</TH><THCLASS="entry"ALIGN="LEFT"ROWSPAN="1"COLSPAN="1">Function</TH></TR></THEAD><TBODYCLASS="tbody"><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">local</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">The local and prog mailers</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">smtp</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">All SMTP mailers: smtp, esmtp, smtp8, and relay</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">uucp</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">All UUCP mailers: uucp-old (uucp) and uucp-new (suucp)</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">usenet</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Usenet news support</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">fax</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Fax support using FlexFAX software</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">pop</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Post Office Protocol (POP) support</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">procmail</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">An interface for procmail</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">mail11</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">The DECnet mail11 mailer</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">phquery</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">The phquery program for CSO phone book</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">cyrus</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">The cyrus and cyrusbb mailers</TD></TR></TBODY></TABLE><PCLASS="para">Your macro configuration file should have a MAILER(local) and aMAILER(smtp) entry. This gives you the local and prog mailers required bysendmail, the smtp mailer for standard SMTP mail, the esmtp mailerfor Extended SMTP, the smtp8 mailer for 8-bit MIME mail, and the relaymailer for the various mail relay servers mentioned in the &quot;DOMAIN&quot;section of this appendix. Selecting <BCLASS="emphasis.bold">local</B> and <BCLASS="emphasis.bold">smtp</B> provideseverything you need for a standard TCP/IP installation.<ACLASS="indexterm"NAME="AUTOID-27751"></A></P><PCLASS="para">Of all the remaining mailers, only uucp is widely used.uucp provides UUCP mail support for<ACLASS="indexterm"NAME="AUTOID-27753"></A>systems directly connected toUUCP networks. The uucp-old mailer supports standard UUCP mail and theuucp-new mailer is used for remote sites that can handle multiplerecipients in one transfer. The system needs the mailer that iscorrect for the capabilities of the remote site. Use class U todefine the hostnames of systems that need the old mailer and class Yfor the names of remote systems that can work with the new mailer.Specify MAILER(uucp) after the MAILER(smtp) entry if your system hasboth TCP/IP and UUCP connections. Ordering the MAILER statements inthis way adds two more mailers to the two standard UUCP mailers: theuucp-dom mailer to support standard domain names, and the uucp-uudommailer to support standard domain names with a standard UUCP envelop.</P><PCLASS="para">The other mailers are rarely used:</P><DLCLASS="variablelist"><DTCLASS="term"><EMCLASS="emphasis">usenet</EM></DT><DDCLASS="listitem"><PCLASS="para">Modifies the sendmail rewrite rules to send local mail that contains&quot;.usenet&quot; in the username to the program inews. Instead of thismailer, choose a user mail agent that supports Usenet news.<ACLASS="indexterm"NAME="AUTOID-27762"></A>Don't hack sendmail to handle it.</P></DD><DTCLASS="term"><EMCLASS="emphasis">fax</EM></DT><DDCLASS="listitem"><PCLASS="para">This is still experimental in sendmail V8, though built-in fax support<ACLASS="indexterm"NAME="AUTOID-27769"></A>could be useful when it is ready.</P></DD><DTCLASS="term"><EMCLASS="emphasis">pop</EM></DT><DDCLASS="listitem"><PCLASS="para">On most systems, POP support is provided separately by the <BCLASS="emphasis.bold">popd</B>daemon, and the MAILER(pop) command is not used.</P></DD><DTCLASS="term"><EMCLASS="emphasis">procmail</EM></DT><DDCLASS="listitem"><PCLASS="para">Only provides an interface to procmail<ACLASS="indexterm"NAME="AUTOID-27782"></A>for use in the mailertable.The sendmail V8 distribution does not provide procmail. Even whenprocmail is used as the local mailer, as it is in Slackware Linux,the <BCLASS="emphasis.bold">MAILER(procmail)</B> command is not required.</P></DD><DTCLASS="term"><EMCLASS="emphasis">mail11</EM></DT><DDCLASS="listitem"><PCLASS="para">Only used on DECNET mail networks that use the mail11 mailer.</P></DD><DTCLASS="term"><EMCLASS="emphasis">phquery</EM></DT><DDCLASS="listitem"><PCLASS="para">Provides a name lookup program for the CSO phone book (ph) directoryservice. User directory services are usually configured in the usermail agent, not in sendmail.</P></DD><DTCLASS="term"><EMCLASS="emphasis">cyrus</EM></DT><DDCLASS="listitem"><PCLASS="para">This is a local mail delivery program with a mailbox architecture. cyrus<ACLASS="indexterm"NAME="AUTOID-27800"></A>and cyrusbb mailers are not widely used.</P></DD></DL><PCLASS="para">This concludes our discussion of <BCLASS="emphasis.bold">m4</B> macros. The output of all ofthe files and commands that go into the <BCLASS="emphasis.bold">m4</B> processor is a<EMCLASS="emphasis">sendmail.cf</EM> file. The remainder of this appendix providesadditional details about the <EMCLASS="emphasis">sendmail.cf</EM> configuration andexcerpts from a <EMCLASS="emphasis">sendmail.cf</EM> file. The bulk of information about<EMCLASS="emphasis">sendmail.cf</EM> is found in <ACLASS="xref"HREF="ch10_01.htm"TITLE="sendmail ">Chapter 10</A>.<ACLASS="indexterm"NAME="AUTOID-27810"></A><ACLASS="indexterm"NAME="AUTOID-27811"></A></P></DIV></DIV><DIVCLASS="htmlnav"><P></P><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="appe_02.htm"TITLE="E.2 The sendmail Command"><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: E.2 The sendmail Command"BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="book"HREF="index.htm"TITLE="TCP/IP Network Administration"><IMGSRC="../gifs/txthome.gif"ALT="TCP/IP Network Administration"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="appe_04.htm"TITLE="E.4 More sendmail.cf"><IMGSRC="../gifs/txtnexta.gif"ALT="Next: E.4 More sendmail.cf"BORDER="0"></A></TD></TR><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172">E.2 The sendmail Command</TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="index"HREF="index/idx_0.htm"TITLE="Book Index"><IMGSRC="../gifs/index.gif"ALT="Book Index"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172">E.4 More sendmail.cf</TD></TR></TABLE><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><PCLASS="nav"><FONTSIZE="-1">[ <AHREF="../index.htm"TITLE="The Networking CD Bookshelf">Library Home</A> | <AHREF="../dnsbind/index.htm"TITLE="DNS &amp; BIND">DNS &amp; BIND</A> | <AHREF="index.htm"TITLE="TCP/IP Network Administration">TCP/IP</A> | <AHREF="../sendmail/index.htm"TITLE="sendmail">sendmail</A> | <AHREF="../smdref/index.htm"TITLE="sendmail Desktop Reference">sendmail Reference</A> | <AHREF="../firewall/index.htm"TITLE="Building Internet Firewalls">Firewalls</A> | <AHREF="../puis/index.htm"TITLE="Practical UNIX &amp; Internet Security">Practical Security</A> ]</FONT></P></DIV></BODY></HTML>