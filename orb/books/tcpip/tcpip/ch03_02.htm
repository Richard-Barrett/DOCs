<HTML><HEAD><TITLE>[Chapter 3] 3.2 The Host Table</TITLE><METANAME="DC.title"CONTENT="TCP/IP Network Administration"><METANAME="DC.creator"CONTENT="Craig Hunt"><METANAME="DC.publisher"CONTENT="O'Reilly &amp; Associates, Inc."><METANAME="DC.date"CONTENT="1999-02-04T01:31:30Z"><METANAME="DC.type"CONTENT="Text.Monograph"><METANAME="DC.format"CONTENT="text/html"SCHEME="MIME"><METANAME="DC.source"CONTENT="1-56592-322-7"SCHEME="ISBN"><METANAME="DC.language"CONTENT="en-US"><METANAME="generator"CONTENT="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><LINKREV="made"HREF="mailto:online-books@oreilly.com"TITLE="Online Books Comments"><LINKREL="up"HREF="ch03_01.htm"TITLE="3. Network Services"><LINKREL="prev"HREF="ch03_01.htm"TITLE="3.1 Names and Addresses"><LINKREL="next"HREF="ch03_03.htm"TITLE="3.3 Domain Name Service"></HEAD><BODYBGCOLOR="#FFFFFF"TEXT="#000000"><DIVCLASS="htmlnav"><H1><IMGSRC="gifs/smbanner.gif"ALT="TCP/IP Network Administration"USEMAP="#srchmap"BORDER="0"></H1><MAPNAME="srchmap"><AREASHAPE="RECT"COORDS="0,0,466,65"HREF="index.htm"ALT="TCP/IP Network Administration"><AREASHAPE="RECT"COORDS="467,0,514,18"HREF="../search/tsrch.htm"ALT="Search this book"></MAP><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch03_01.htm"TITLE="3.1 Names and Addresses"><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 3.1 Names and Addresses"BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><B><FONTFACE="ARIEL,HELVETICA,HELV,SANSERIF"SIZE="-1">Chapter 3<BR>Network Services</FONT></B></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch03_03.htm"TITLE="3.3 Domain Name Service"><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 3.3 Domain Name Service"BORDER="0"></A></TD></TR></TABLE>&nbsp;<HRALIGN="LEFT"WIDTH="515"TITLE="footer"></DIV><DIVCLASS="SECT1"><H2CLASS="sect1"><ACLASS="title"NAME="TCP2-CH-3-SECT-2">3.2 The Host Table</A></H2><PCLASS="para"><ACLASS="indexterm"NAME="TCP2-CH-3-IX-HOSTS-TABLE"></A>The <EMCLASS="emphasis">host table</EM> is a simple text file that associates IPaddresses with hostnames. On most UNIX systems, the table is in thefile <EMCLASS="emphasis">/etc/hosts</EM>.<ACLASS="indexterm"NAME="AUTOID-2367"></A><ACLASS="indexterm"NAME="AUTOID-2370"></A>Each table entry in <EMCLASS="emphasis">/etc/hosts</EM> contains an IP addressseparated by whitespace from a list of hostnames associated with thataddress. Comments begin with <CODECLASS="literal">#</CODE>.<ACLASS="indexterm"NAME="AUTOID-2374"></A><ACLASS="indexterm"NAME="AUTOID-2376"></A><ACLASS="indexterm"NAME="AUTOID-2378"></A><ACLASS="indexterm"NAME="AUTOID-2380"></A></P><PCLASS="para">The host table on <EMCLASS="emphasis">peanut</EM> might contain the following entries:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">## Table of IP addresses and hostnames#172.16.12.2     peanut.nuts.com peanut127.0.0.1       localhost172.16.12.1     almond.nuts.com almond loghost172.16.12.4     walnut.nuts.com walnut172.16.12.3     pecan.nuts.com pecan172.16.1.2      filbert.nuts.com filbert172.16.6.4      salt.plant.nuts.com salt.plant salt</PRE></BLOCKQUOTE></P><PCLASS="para">The first entry in the sample table is for <EMCLASS="emphasis">peanut</EM> itself. The IPaddress 172.16.12.2 is associated with the hostname<EMCLASS="emphasis">peanut.nuts.com</EM> and the alternate hostname (or alias)<EMCLASS="emphasis">peanut</EM>. The hostname and all of its aliases resolve to the same IPaddress, in this case 172.16.12.2.</P><PCLASS="para">Aliases provide for name changes, alternate spellings, and shorterhostnames. They also allow for &quot;generic hostnames.&quot; Look at theentry for 172.16.12.1. One of the aliases associated with that addressis <EMCLASS="emphasis">loghost</EM>.<ACLASS="indexterm"NAME="AUTOID-2392"></A><EMCLASS="emphasis">loghost</EM> is a special hostname used by the syslog daemon,<ACLASS="indexterm"NAME="AUTOID-2395"></A><ACLASS="indexterm"NAME="AUTOID-2397"></A><BCLASS="emphasis.bold">syslogd</B>. Programs like <BCLASS="emphasis.bold">syslogd</B> are designed to directtheir output to the host that has a certain generic name.  You candirect the output to any host you choose by assigning it theappropriate generic name as an alias. Other commonly used generic hostnames are <EMCLASS="emphasis">lprhost</EM>, <EMCLASS="emphasis">mailhost</EM>, and <EMCLASS="emphasis">dumphost</EM>.</P><PCLASS="para">The second entry in the sample file assigns the address 127.0.0.1 tothe hostname <EMCLASS="emphasis">localhost</EM>.<ACLASS="indexterm"NAME="AUTOID-2406"></A>As we have discussed, the class Anetwork address 127 is reserved for the loopback network. The hostaddress 127.0.0.1 is a special address used to designate the loopbackaddress of the local host&nbsp;- hence the hostname <EMCLASS="emphasis">localhost</EM>. Thisspecial addressing convention allows the host to address itself thesame way it addresses a remote host. The loopback address simplifies<ACLASS="indexterm"NAME="AUTOID-2409"></A>software by allowing common code to be used for communicating withlocal or remote processes. This addressing convention also reducesnetwork traffic because the <EMCLASS="emphasis">localhost</EM> address is associated witha loopback device that loops data back to the host before it iswritten out to the network.</P><PCLASS="para">Although the host table system has been superseded by DNS, it is stillwidely used for the following reasons:</P><ULCLASS="itemizedlist"><LICLASS="listitem"><PCLASS="para">Most systems have a small host table containing name and addressinformation about the important hosts on the local network. This smalltable is used when DNS is not running, such as during the initialsystem startup. Even if you use DNS, you should create a small<ACLASS="indexterm"NAME="AUTOID-2417"></A><ACLASS="indexterm"NAME="AUTOID-2421"></A><EMCLASS="emphasis">/etc/hosts</EM> file containing entries for your host, for<EMCLASS="emphasis">localhost</EM>, and for the gateways and servers on your local net.</P></LI><LICLASS="listitem"><PCLASS="para">Sites that use NIS use the host table as input to the NIS host database.You can use NIS in conjunction with DNS; but even when they are usedtogether, most NIS sites create host tables that have an entry for everyhost on the local network. <ACLASS="xref"HREF="ch09_01.htm"TITLE="Configuring Network Servers ">Chapter 9, <CITECLASS="chapter">Configuring Network Servers </CITE></A>, explains how to use NIS with DNS.</P></LI><LICLASS="listitem"><PCLASS="para">Very small sites that are not connected to the Internet sometimes usethe host table. If there are few local hosts and the information aboutthese hosts rarely changes, and there is no need to communicate viaTCP/IP with remote sites, then there is little advantage to usingDNS.</P></LI></UL><PCLASS="para">The old host table system is inadequate for the global Internet for<ACLASS="indexterm"NAME="AUTOID-2432"></A>two reasons: inability to scale and lack of an automated updateprocess. Prior to adopting DNS, the Network Information Center (NIC)maintained a large table of Internet hosts called the <EMCLASS="emphasis">NIC hosttable</EM>. Hosts included in the table were called <EMCLASS="emphasis">registered<ACLASS="indexterm"NAME="AUTOID-2437"></A>hosts</EM>, and the NIC placed hostnames and addresses into this filefor all sites on the Internet.</P><PCLASS="para">Even when the host table was the primary means fortranslating hostnames to IP addresses, most sites registered only alimited number of key systems. But even with limited registration, thetable grew so large that it became an inefficient way to convert hostnames to IP addresses. There is no way that a simple table couldprovide adequate service for the enormous number of hosts in today'sInternet.</P><PCLASS="para">Another problem with the host table system is that it lacks a technique<ACLASS="indexterm"NAME="AUTOID-2441"></A>for automatically distributing information about newly registered<ACLASS="indexterm"NAME="AUTOID-2445"></A>hosts. Newly registered hosts can be referenced by name as soon as a sitereceives the new version of the host table. However, there is noway to guarantee that the host table is distributed to a site. TheNIC didn't know who had a current version of the table, and whodid not. This lack of guaranteed uniform distributionis a major weakness of the host table system.</P><PCLASS="para">Some versions of UNIX<ACLASS="indexterm"NAME="AUTOID-2448"></A><ACLASS="indexterm"NAME="AUTOID-2451"></A>provide the command <BCLASS="emphasis.bold">htable</B> to automatically build<EMCLASS="emphasis">/etc/hosts</EM> and <EMCLASS="emphasis">/etc/networks</EM> from the NIC hosttable. <BCLASS="emphasis.bold">htable</B> and the NIC host table are no longer used to buildthe <EMCLASS="emphasis">/etc/hosts</EM> file. However, the command is still useful forbuilding <EMCLASS="emphasis">/etc/networks</EM>. The <EMCLASS="emphasis">/etc/networks</EM> file is<ACLASS="indexterm"NAME="AUTOID-2461"></A><ACLASS="indexterm"NAME="AUTOID-2464"></A>still used to map network addresses to network names because manynetwork names are not included in the DNS database.To create the <EMCLASS="emphasis">/etc/networks</EM> file, download the file<ACLASS="indexterm"NAME="AUTOID-2467"></A><ACLASS="systemitem.url"HREF="ftp://rs.internic.net/netinfo/networks.txt">ftp://rs.internic.net/netinfo/networks.txt</A> into a local work<ACLASS="indexterm"NAME="AUTOID-2470"></A>directory. Run <BCLASS="emphasis.bold">htable networks.txt</B>. Discard the <EMCLASS="emphasis">hosts</EM> fileand the <EMCLASS="emphasis">gateways</EM> file produced by <BCLASS="emphasis.bold">htable</B>, and move the<EMCLASS="emphasis">networks</EM> file to the <EMCLASS="emphasis">/etc</EM> directory.</P><PCLASS="para">This is the last we'll speak of the NIC host table: it has beensuperseded by DNS. All hosts connected to the Internet should useDNS.<ACLASS="indexterm"NAME="AUTOID-2480"></A></P></DIV><DIVCLASS="htmlnav"><P></P><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch03_01.htm"TITLE="3.1 Names and Addresses"><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 3.1 Names and Addresses"BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="book"HREF="index.htm"TITLE="TCP/IP Network Administration"><IMGSRC="../gifs/txthome.gif"ALT="TCP/IP Network Administration"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch03_03.htm"TITLE="3.3 Domain Name Service"><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 3.3 Domain Name Service"BORDER="0"></A></TD></TR><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172">3.1 Names and Addresses</TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="index"HREF="index/idx_0.htm"TITLE="Book Index"><IMGSRC="../gifs/index.gif"ALT="Book Index"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172">3.3 Domain Name Service</TD></TR></TABLE><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><PCLASS="nav"><FONTSIZE="-1">[ <AHREF="../index.htm"TITLE="The Networking CD Bookshelf">Library Home</A> | <AHREF="../dnsbind/index.htm"TITLE="DNS &amp; BIND">DNS &amp; BIND</A> | <AHREF="index.htm"TITLE="TCP/IP Network Administration">TCP/IP</A> | <AHREF="../sendmail/index.htm"TITLE="sendmail">sendmail</A> | <AHREF="../smdref/index.htm"TITLE="sendmail Desktop Reference">sendmail Reference</A> | <AHREF="../firewall/index.htm"TITLE="Building Internet Firewalls">Firewalls</A> | <AHREF="../puis/index.htm"TITLE="Practical UNIX &amp; Internet Security">Practical Security</A> ]</FONT></P></DIV></BODY></HTML>