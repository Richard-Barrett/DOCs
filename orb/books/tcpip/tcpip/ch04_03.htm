<HTML><HEAD><TITLE>[Chapter 4] 4.3 Planning Routing </TITLE><METANAME="DC.title"CONTENT="TCP/IP Network Administration"><METANAME="DC.creator"CONTENT="Craig Hunt"><METANAME="DC.publisher"CONTENT="O'Reilly &amp; Associates, Inc."><METANAME="DC.date"CONTENT="1999-02-04T01:32:44Z"><METANAME="DC.type"CONTENT="Text.Monograph"><METANAME="DC.format"CONTENT="text/html"SCHEME="MIME"><METANAME="DC.source"CONTENT="1-56592-322-7"SCHEME="ISBN"><METANAME="DC.language"CONTENT="en-US"><METANAME="generator"CONTENT="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><LINKREV="made"HREF="mailto:online-books@oreilly.com"TITLE="Online Books Comments"><LINKREL="up"HREF="ch04_01.htm"TITLE="4. Getting Started "><LINKREL="prev"HREF="ch04_02.htm"TITLE="4.2 Basic Information "><LINKREL="next"HREF="ch04_04.htm"TITLE="4.4 Planning Naming Service "></HEAD><BODYBGCOLOR="#FFFFFF"TEXT="#000000"><DIVCLASS="htmlnav"><H1><IMGSRC="gifs/smbanner.gif"ALT="TCP/IP Network Administration"USEMAP="#srchmap"BORDER="0"></H1><MAPNAME="srchmap"><AREASHAPE="RECT"COORDS="0,0,466,65"HREF="index.htm"ALT="TCP/IP Network Administration"><AREASHAPE="RECT"COORDS="467,0,514,18"HREF="../search/tsrch.htm"ALT="Search this book"></MAP><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch04_02.htm"TITLE="4.2 Basic Information "><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 4.2 Basic Information "BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><B><FONTFACE="ARIEL,HELVETICA,HELV,SANSERIF"SIZE="-1">Chapter 4<BR>Getting Started </FONT></B></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch04_04.htm"TITLE="4.4 Planning Naming Service "><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 4.4 Planning Naming Service "BORDER="0"></A></TD></TR></TABLE>&nbsp;<HRALIGN="LEFT"WIDTH="515"TITLE="footer"></DIV><DIVCLASS="SECT1"><H2CLASS="sect1"><ACLASS="title"NAME="TCP2-CH-4-SECT-3">4.3 Planning Routing </A></H2><PCLASS="para"><ACLASS="indexterm"NAME="TCP2-CH-4-IX-ROUTING-PLANNING"></A>In <ACLASS="xref"HREF="ch02_01.htm"TITLE="Delivering the Data">Chapter 2</A>, we learned that hosts communicate directly only with othercomputers connected to the same network. Gateways<ACLASS="indexterm"NAME="AUTOID-4367"></A>are needed tocommunicate with systems on other networks. If the hosts on yournetwork need to communicate with computers on other networks, a routethrough a gateway must be defined. There are two ways to do this:</P><ULCLASS="itemizedlist"><LICLASS="listitem"><PCLASS="para">Routing can be handled by a <EMCLASS="emphasis">static routing table</EM><ACLASS="indexterm"NAME="AUTOID-4373"></A>built by the system administrator. Static routing tables are most usefulwhen the number of gateways is limited. Static tables do not dynamically adjustto changing network conditions, so each change in the table is mademanually by the network administrator. Complex environmentsrequire a moreflexible approach to routing than a static routing table provides.</P></LI><LICLASS="listitem"><PCLASS="para">Routing can be handled by a <EMCLASS="emphasis">dynamic routing table</EM><ACLASS="indexterm"NAME="AUTOID-4379"></A>that respondsto changing network conditions. Dynamic routing tables are built byrouting protocols. Routing protocols exchange routing information thatis used to update the routing table. Dynamic routing is used when thereare multiple gateways on a network, and is essential when more than onegateway can reach the same destination.</P></LI></UL><PCLASS="para">Many networks use a combination of both static and dynamic routing.Some systems on the network use static routing tables, while others runrouting protocols and have dynamic tables. While it is oftenappropriate for hosts to use static routing tables, gateways usuallyrun routing protocols.</P><PCLASS="para">The network administrator <ACLASS="indexterm"NAME="AUTOID-4384"></A>is responsible for deciding what type ofrouting to use and for choosing the default gateway<ACLASS="indexterm"NAME="AUTOID-4386"></A>for eachhost. Make these decisions before you start to configure your system.Here are a few guidelines to help you plan routing. If you have:</P><DLCLASS="variablelist"><DTCLASS="term"><EMCLASS="emphasis">A network with no gateways to other TCP/IP networks</EM></DT><DDCLASS="listitem"><PCLASS="para">No specialrouting configuration is required in this case. The gateways referredto in this discussion are IP routers that interconnect TCP/IPnetworks. If you are not interconnecting TCP/IP networks, you do notneed an IP router. Neither a default gateway nor a routing protocolneeds to be specified.</P></DD><DTCLASS="term"><EMCLASS="emphasis">A network with a single gateway</EM></DT><DDCLASS="listitem"><PCLASS="para">If you have only one gateway, don'trun any routing protocols. Specify the single gateway as the defaultgateway in a static routing table.</P></DD><DTCLASS="term"><EMCLASS="emphasis">A network with internal gateways to other subnets and a single gateway to the world</EM></DT><DDCLASS="listitem"><PCLASS="para">Here there is a real choice. You can statically specifyeach subnet route and make the gateway to the world your default route,or you can run a routing protocol. Decide which you want to do based onthe effort involved in maintaining a static table versus the slightoverhead of running a routing protocol on your hosts and networks. Ifyou have more than a few hosts, running a routing protocol is probablyeasiest.</P></DD><DTCLASS="term"><EMCLASS="emphasis">A network with multiple gateways to the world</EM></DT><DDCLASS="listitem"><PCLASS="para">If you have multiplegateways that can reach the same destination, use a routing protocol.This allows the gateways to adapt to network changes, giving youredundant access to the remote networks.</P></DD></DL><PCLASS="para"><ACLASS="xref"HREF="ch04_03.htm#TCP2-CH-4-FIG-0"TITLE="Routing and subnets">Figure 4.1</A>shows a subnetted network with five gateways identified as<EMCLASS="emphasis">A</EM> through <EMCLASS="emphasis">E</EM>. A central subnet (172.16.1.0) interconnectsfive other subnets. One of the subnets has a gateway to an externalnetwork. The network administrator would probably choose to run arouting protocol on the central subnet (172.16.1.0) and perhaps onsubnet 172.16.12.0, which is attached to an external network.Dynamic routing<ACLASS="indexterm"NAME="AUTOID-4414"></A>is appropriate on these subnets because they havemultiple gateways. Without dynamic routing, the administrator wouldneed to update every one of these gateways manually whenever any changeoccurred in the network&nbsp;- for example, whenever a new subnet was added.A mistake during the manual update could disrupt network service. Runninga routing protocol on these two subnets is simpler and more reliable.</P><H4CLASS="figure"><ACLASS="title"NAME="TCP2-CH-4-FIG-0">Figure 4.1: Routing and subnets</A></H4><IMGCLASS="graphic"SRC="figs/tcp2_0401.gif"ALT="Figure 4.1"><PCLASS="para">On the other hand, the administrator would probably choose static<ACLASS="indexterm"NAME="AUTOID-4422"></A>routing for the other subnets (172.16.3.0, 172.16.6.0, and 172.16.9.0).These subnets each use only one gateway to reach all destinations.Changes external to the subnets, such as the addition of a new subnet,do not change the fact that these three subnets still have only onerouting choice. Newly added networks are still reached through the samegateway. The hosts on these subnets specify the subnet's gateway astheir default route. In other words, the hosts on subnet 172.16.3.0specify <EMCLASS="emphasis">B</EM> as the default gateway, while the hosts on subnet172.16.9.0 specify <EMCLASS="emphasis">D</EM> as the default, no matter what happens onthe external networks.</P><PCLASS="para">Some routing decisions are thrust upon you by the external networksto which you connect. In <ACLASS="xref"HREF="ch04_03.htm#TCP2-CH-4-FIG-0"TITLE="Routing and subnets">Figure 4.1</A>the local network connects to anexternal network that requires that Border Gateway Protocol(BGP) be used for routing. Therefore, gateway <EMCLASS="emphasis">E</EM> has to run BGP toexchange routes with the external network.</P><DIVCLASS="sect2"><H3CLASS="sect2"><ACLASS="title"NAME="TCP2-CH-4-SECT-3.0.1">4.3.1 Obtaining an autonomous system number </A></H3><PCLASS="para">The Border Gateway Protocol (BGP)<ACLASS="indexterm"NAME="AUTOID-4434"></A>requires that gateways have a specialidentifier called an <EMCLASS="emphasis">autonomous system number</EM> (ASN).<ACLASS="indexterm"NAME="AUTOID-4437"></A>(Refer to thesection &quot;Internet Routing Architecture&quot; in <ACLASS="xref"HREF="ch02_01.htm"TITLE="Delivering the Data">Chapter 2</A> for a discussionof autonomous systems.) Most sites do not need to run BGP. Most sitesdo not need a unique ASN, even when they do run BGP. Usually those sitescan select one of the ASNs that have been set asidefor private use, which are the numbers from 64512 to 65535. Select anumber and coordinate your selection with your border gateway peers toavoid any possible conflicts. If you connect to the Internet througha single ISP, you almost certainly do not need an official ASN. If after discussions with your service provider you findthat you must obtain an official ASN, obtain theapplication form at <ACLASS="systemitem.url"HREF="ftp://rs.internic.net/templates/asn&#8211;template.txt.">ftp://rs.internic.net/templates/asn-template.txt.</A>(See the &quot;Internet Registries&quot; sidebar earlier in this chapter.)<ACLASS="indexterm"NAME="AUTOID-4442"></A></P><PCLASS="para">If you submit an application, you're asked to explain why you need aunique autonomous system number. Unless you are an ISP, probably theonly reason to obtain an ASN is that you are a <EMCLASS="emphasis">multi-homed site</EM>.<ACLASS="indexterm"NAME="AUTOID-4446"></A>A multi-homed site is any site that connects to more than one ISP.Reachability information for the site may be advertised by both ISPs,confusing the routing policy. Assigning the site an ASN gives it directresponsibility for setting its own routing policy and advertising its ownreachability information. This doesn't prevent the site from advertisingbad routes, but it makes the advertisement traceable back to one site andultimately to one technical contact.(Once you submit an ASN application, you have no one to blame but yourself!)<ACLASS="indexterm"NAME="AUTOID-4449"></A></P><PCLASS="para">All of the items we have discussed so far (addressing, subnetting, androuting) are required to configure the basic physical network on top ofwhich the applications and services run. Now we begin planning theservices that make the network useful and usable.</P></DIV></DIV><DIVCLASS="htmlnav"><P></P><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch04_02.htm"TITLE="4.2 Basic Information "><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 4.2 Basic Information "BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="book"HREF="index.htm"TITLE="TCP/IP Network Administration"><IMGSRC="../gifs/txthome.gif"ALT="TCP/IP Network Administration"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch04_04.htm"TITLE="4.4 Planning Naming Service "><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 4.4 Planning Naming Service "BORDER="0"></A></TD></TR><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172">4.2 Basic Information </TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="index"HREF="index/idx_0.htm"TITLE="Book Index"><IMGSRC="../gifs/index.gif"ALT="Book Index"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172">4.4 Planning Naming Service </TD></TR></TABLE><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><PCLASS="nav"><FONTSIZE="-1">[ <AHREF="../index.htm"TITLE="The Networking CD Bookshelf">Library Home</A> | <AHREF="../dnsbind/index.htm"TITLE="DNS &amp; BIND">DNS &amp; BIND</A> | <AHREF="index.htm"TITLE="TCP/IP Network Administration">TCP/IP</A> | <AHREF="../sendmail/index.htm"TITLE="sendmail">sendmail</A> | <AHREF="../smdref/index.htm"TITLE="sendmail Desktop Reference">sendmail Reference</A> | <AHREF="../firewall/index.htm"TITLE="Building Internet Firewalls">Firewalls</A> | <AHREF="../puis/index.htm"TITLE="Practical UNIX &amp; Internet Security">Practical Security</A> ]</FONT></P></DIV></BODY></HTML>