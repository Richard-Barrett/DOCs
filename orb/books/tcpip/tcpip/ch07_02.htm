<HTML><HEAD><TITLE>[Chapter 7] 7.2 The Minimal Routing Table </TITLE><METANAME="DC.title"CONTENT="TCP/IP Network Administration"><METANAME="DC.creator"CONTENT="Craig Hunt"><METANAME="DC.publisher"CONTENT="O'Reilly &amp; Associates, Inc."><METANAME="DC.date"CONTENT="1999-02-04T01:35:31Z"><METANAME="DC.type"CONTENT="Text.Monograph"><METANAME="DC.format"CONTENT="text/html"SCHEME="MIME"><METANAME="DC.source"CONTENT="1-56592-322-7"SCHEME="ISBN"><METANAME="DC.language"CONTENT="en-US"><METANAME="generator"CONTENT="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><LINKREV="made"HREF="mailto:online-books@oreilly.com"TITLE="Online Books Comments"><LINKREL="up"HREF="ch07_01.htm"TITLE="7. Configuring Routing "><LINKREL="prev"HREF="ch07_01.htm"TITLE="7.1 Common Routing Configurations "><LINKREL="next"HREF="ch07_03.htm"TITLE="7.3 Building a Static Routing Table "></HEAD><BODYBGCOLOR="#FFFFFF"TEXT="#000000"><DIVCLASS="htmlnav"><H1><IMGSRC="gifs/smbanner.gif"ALT="TCP/IP Network Administration"USEMAP="#srchmap"BORDER="0"></H1><MAPNAME="srchmap"><AREASHAPE="RECT"COORDS="0,0,466,65"HREF="index.htm"ALT="TCP/IP Network Administration"><AREASHAPE="RECT"COORDS="467,0,514,18"HREF="../search/tsrch.htm"ALT="Search this book"></MAP><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch07_01.htm"TITLE="7.1 Common Routing Configurations "><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 7.1 Common Routing Configurations "BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><B><FONTFACE="ARIEL,HELVETICA,HELV,SANSERIF"SIZE="-1">Chapter 7<BR>Configuring Routing </FONT></B></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch07_03.htm"TITLE="7.3 Building a Static Routing Table "><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 7.3 Building a Static Routing Table "BORDER="0"></A></TD></TR></TABLE>&nbsp;<HRALIGN="LEFT"WIDTH="515"TITLE="footer"></DIV><DIVCLASS="SECT1"><H2CLASS="sect1"><ACLASS="title"NAME="TCP2-CH-7-SECT-2">7.2 The Minimal Routing Table </A></H2><PCLASS="para"><ACLASS="indexterm"NAME="TCP2-CH-7-IX-ROUTING-TABLES-MINIMAL"></A>Let's look at the contents of the routing table constructed by<BCLASS="emphasis.bold">ifconfig</B> when <EMCLASS="emphasis">peanut</EM>'s network interfaces were configured:<ACLASS="indexterm"NAME="AUTOID-7661"></A></P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">% <CODECLASS="userinput"><B>netstat -rn</B></CODE>Routing tablesDestination       Gateway          Flags    Refcnt Use      Interface127.0.0.1         127.0.0.1        UH       1      132      lo0172.16.12.0       172.16.12.2      U        26     49041    1e0</PRE></BLOCKQUOTE></P><PCLASS="para">The first entry is the loopback route to <EMCLASS="emphasis">localhost</EM> created when<ACLASS="indexterm"NAME="AUTOID-7668"></A><ACLASS="indexterm"NAME="AUTOID-7671"></A>lo0 was configured. The other entry is the route to network 172.16.12.0through interface le0. Address 172.16.12.2 is not a remote gatewayaddress. It is the address assigned to the le0 interface on<EMCLASS="emphasis">peanut</EM>.</P><PCLASS="para">Look at the Flags field for each entry. Both entries have the U (up)<ACLASS="indexterm"NAME="AUTOID-7675"></A>flag set, indicating that they are ready to be used, but neither entryhas the G (gateway) flag set. The G flag indicates that an externalgateway is used. The G flag is not set because both of these routesare direct routes through local interfaces, not through externalgateways.</P><PCLASS="para">The loopback route also has the H (host) flag set. This indicates thatonly one host can be reached through this route. The meaning of thisflag becomes clear when you look at the Destination field for theloopback entry. It shows that the destination is a host address, not anetwork address. The loopback network address is 127.0.0.0. Thedestination address shown (127.0.0.1) is the address of<EMCLASS="emphasis">localhost</EM>, an individual host. This particular host route is inmost routing tables.</P><PCLASS="para">Although every routing table has this host-specific route,most routes lead to networks. One reasonnetwork routes are used is to reduce the size of the routing table.An organization may have only one network but hundreds of hosts. TheInternet has thousands of networks but millions ofhosts. A routing table with a route for every host would beunmanageable.</P><PCLASS="para">Our sample table contains only one network route, 172.16.12.0.Therefore, <EMCLASS="emphasis">peanut</EM> can communicate only with hosts located on thatnetwork. The limitedcapability of this routing table is easily verified with the <BCLASS="emphasis.bold">ping</B><ACLASS="indexterm"NAME="TCP2-CH-7-IX-PING-COMMAND"></A>command. <BCLASS="emphasis.bold">ping</B> uses the ICMPEcho Message to force a remote host to echo a packet back to the local<ACLASS="indexterm"NAME="AUTOID-7686"></A>host. If packets can travel to and from a remote host, itindicates that the two hosts can successfully communicate.</P><PCLASS="para">To check the routing table on <EMCLASS="emphasis">peanut</EM>, first <BCLASS="emphasis.bold">ping</B> anotherhost on the local network:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">% <CODECLASS="userinput"><B>ping -s almond</B></CODE>PING almond.nuts.com: 56 data bytes64 bytes from almond.nuts.com (172.16.12.1): icmp_seq=0. time=11. ms64 bytes from almond.nuts.com (172.16.12.1): icmp_seq=1. time=10. ms^C----almond.nuts.com PING Statistics----2 packets transmitted, 2 packets received, 0% packet lossround-trip (ms)  min/avg/max = 10/10/11</PRE></BLOCKQUOTE></P><PCLASS="para"><BCLASS="emphasis.bold">ping</B> displays a line of output for each ICMP ECHO_RESPONSEreceived.[3]When <BCLASS="emphasis.bold">ping</B> is interrupted, it displays some summary statistics. Allof this indicates successful communication with <EMCLASS="emphasis">almond</EM>. But if wecheck a host that is not on <EMCLASS="emphasis">nuts-net</EM>, say a host at O'Reilly, theresults are different.</P><BLOCKQUOTECLASS="footnote"><PCLASS="para">[3] Sun's <BCLASS="emphasis.bold">ping</B> would only display the message &quot;almond is alive&quot;if the <BCLASS="emphasis.bold">-s</B> option was not used. Some other <BCLASS="emphasis.bold">ping</B> implementationsdo not require the <BCLASS="emphasis.bold">-s</B> option.</P></BLOCKQUOTE><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">% <CODECLASS="userinput"><B>ping 207.25.98.2</B></CODE>sendto: Network is unreachable</PRE></BLOCKQUOTE></P><PCLASS="para">Here the message &quot;sendto: Network is unreachable&quot; indicates that<EMCLASS="emphasis">peanut</EM> does not know how to send data to the networkthat host 207.25.98.2 is on. There are only two routes in the <EMCLASS="emphasis">peanut</EM>routing table and neither is a route to 207.25.98.0.</P><PCLASS="para">Even other subnets on <EMCLASS="emphasis">nuts-net</EM> cannot be reached using thisrouting table. To demonstrate this, <BCLASS="emphasis.bold">ping</B> a host onanother subnet. For example:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">% <CODECLASS="userinput"><B>ping 172.16.1.2</B></CODE>sendto: Network is unreachable</PRE></BLOCKQUOTE></P><PCLASS="para">These <BCLASS="emphasis.bold">ping</B> tests show that the routing table created by<BCLASS="emphasis.bold">ifconfig</B> allows communication only with other hosts on the localnetwork. If your network does not require access to any other TCP/IPnetworks, this may be all you need. However, if it doesrequire access to other networks, you must add more routes to therouting table.<ACLASS="indexterm"NAME="AUTOID-7720"></A><ACLASS="indexterm"NAME="AUTOID-7721"></A></P></DIV><DIVCLASS="htmlnav"><P></P><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch07_01.htm"TITLE="7.1 Common Routing Configurations "><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 7.1 Common Routing Configurations "BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="book"HREF="index.htm"TITLE="TCP/IP Network Administration"><IMGSRC="../gifs/txthome.gif"ALT="TCP/IP Network Administration"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch07_03.htm"TITLE="7.3 Building a Static Routing Table "><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 7.3 Building a Static Routing Table "BORDER="0"></A></TD></TR><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172">7.1 Common Routing Configurations </TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="index"HREF="index/idx_0.htm"TITLE="Book Index"><IMGSRC="../gifs/index.gif"ALT="Book Index"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172">7.3 Building a Static Routing Table </TD></TR></TABLE><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><PCLASS="nav"><FONTSIZE="-1">[ <AHREF="../index.htm"TITLE="The Networking CD Bookshelf">Library Home</A> | <AHREF="../dnsbind/index.htm"TITLE="DNS &amp; BIND">DNS &amp; BIND</A> | <AHREF="index.htm"TITLE="TCP/IP Network Administration">TCP/IP</A> | <AHREF="../sendmail/index.htm"TITLE="sendmail">sendmail</A> | <AHREF="../smdref/index.htm"TITLE="sendmail Desktop Reference">sendmail Reference</A> | <AHREF="../firewall/index.htm"TITLE="Building Internet Firewalls">Firewalls</A> | <AHREF="../puis/index.htm"TITLE="Practical UNIX &amp; Internet Security">Practical Security</A> ]</FONT></P></DIV></BODY></HTML>