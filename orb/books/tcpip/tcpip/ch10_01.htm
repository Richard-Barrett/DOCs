<HTML><HEAD><TITLE>[Chapter 10] sendmail </TITLE><METANAME="DC.title"CONTENT="TCP/IP Network Administration"><METANAME="DC.creator"CONTENT="Craig Hunt"><METANAME="DC.publisher"CONTENT="O'Reilly &amp; Associates, Inc."><METANAME="DC.date"CONTENT="1999-02-04T01:38:28Z"><METANAME="DC.type"CONTENT="Text.Monograph"><METANAME="DC.format"CONTENT="text/html"SCHEME="MIME"><METANAME="DC.source"CONTENT="1-56592-322-7"SCHEME="ISBN"><METANAME="DC.language"CONTENT="en-US"><METANAME="generator"CONTENT="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><LINKREV="made"HREF="mailto:online-books@oreilly.com"TITLE="Online Books Comments"><LINKREL="up"HREF="index.htm"TITLE="TCP/IP Network Administration"><LINKREL="prev"HREF="ch09_08.htm"TITLE="9.8 Summary "><LINKREL="next"HREF="ch10_02.htm"TITLE="10.2 Running sendmail as a Daemon "></HEAD><BODYBGCOLOR="#FFFFFF"TEXT="#000000"><DIVCLASS="htmlnav"><H1><IMGSRC="gifs/smbanner.gif"ALT="TCP/IP Network Administration"USEMAP="#srchmap"BORDER="0"></H1><MAPNAME="srchmap"><AREASHAPE="RECT"COORDS="0,0,466,65"HREF="index.htm"ALT="TCP/IP Network Administration"><AREASHAPE="RECT"COORDS="467,0,514,18"HREF="../search/tsrch.htm"ALT="Search this book"></MAP><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch09_08.htm"TITLE="9.8 Summary "><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 9.8 Summary "BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><B><FONTFACE="ARIEL,HELVETICA,HELV,SANSERIF"SIZE="-1">Chapter 10</FONT></B></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch10_02.htm"TITLE="10.2 Running sendmail as a Daemon "><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 10.2 Running sendmail as a Daemon "BORDER="0"></A></TD></TR></TABLE>&nbsp;<HRALIGN="LEFT"WIDTH="515"TITLE="footer"></DIV><DIVCLASS="CHAPTER"><H1CLASS="chapter"><ACLASS="title"NAME="TCP2-CH-10">10. sendmail </A></H1><DIVCLASS="htmltoc"><P><B>Contents:</B><BR><ACLASS="SECT1"HREF="#TCP2-CH-10-SECT-1"TITLE="10.1 sendmail's Function ">sendmail's Function </A><BR><ACLASS="SECT1"HREF="ch10_02.htm"TITLE="10.2 Running sendmail as a Daemon ">Running sendmail as a Daemon </A><BR><ACLASS="SECT1"HREF="ch10_03.htm"TITLE="10.3 sendmail Aliases ">sendmail Aliases </A><BR><ACLASS="SECT1"HREF="ch10_04.htm"TITLE="10.4 The sendmail.cf File ">The sendmail.cf File </A><BR><ACLASS="SECT1"HREF="ch10_05.htm"TITLE="10.5 sendmail Configuration ">sendmail Configuration </A><BR><ACLASS="SECT1"HREF="ch10_06.htm"TITLE="10.6 Rewriting the Mail Address ">Rewriting the Mail Address </A><BR><ACLASS="SECT1"HREF="ch10_07.htm"TITLE="10.7 Modifying a sendmail.cf File ">Modifying a sendmail.cf File </A><BR><ACLASS="SECT1"HREF="ch10_08.htm"TITLE="10.8 Testing sendmail.cf ">Testing sendmail.cf </A><BR><ACLASS="SECT1"HREF="ch10_09.htm"TITLE="10.9 Summary ">Summary </A></P><P></P></DIV><PCLASS="para"><ACLASS="indexterm"NAME="TCP2-CH-10-IX-SENDMAIL"></A>Users have a love-hate relationship with email; they love to use it,and hate when it doesn't work. It's the system administrator's job tomake sure it does work. That is the job we tackle in this chapter.</P><PCLASS="para">sendmail is not the only mail transport program. MMDF (MultichannelMemorandum Distribution Facility)<ACLASS="indexterm"NAME="AUTOID-12861"></A>predates sendmail and is stillused today. There are also variations of basic sendmail, such<ACLASS="indexterm"NAME="AUTOID-12863"></A>as IDA sendmail, that are widely used. But plain sendmail is themost widely used mail transport program, and it's the one we cover.</P><PCLASS="para">This entire chapter is devoted to sendmail, and an entire book iseasily devoted to the subject.[1]In part this is because of email's importance, but it is also becausesendmail has a complex configuration.</P><BLOCKQUOTECLASS="footnote"><PCLASS="para">[1] See <EMCLASS="emphasis">sendmail</EM>, by Costales and Allman (O'Reilly &amp; Associates),for a book-length treatment of sendmail.</P></BLOCKQUOTE><PCLASS="para">The variety of programs and protocols used for email complicatesconfiguration and support. SMTP sends email over TCP/IPnetworks. Another program sends mail between users on the same system.Still another sends mail between systems on UUCP networks. Each ofthese mail systems&nbsp;- SMTP, UUCP, and local mail&nbsp;- has its own deliveryprogram and its own mail addressing scheme. All of this can causeconfusion for mail users and for system administrators.</P><DIVCLASS="sect1"><H2CLASS="sect1"><ACLASS="title"NAME="TCP2-CH-10-SECT-1">10.1 sendmail's Function </A></H2><PCLASS="para">sendmaileliminates some of the confusion caused by multiple mail deliveryprograms. It does this by routing mail for the user to the proper delivery program based on the email address. It accepts mail from auser's mail program, interprets the mail address, rewrites the addressinto the proper form for the delivery program, and routes the mail tothe correct delivery program. sendmail insulates the end userfrom these details. If the mail is properly addressed, sendmailwill see that it is properly passed on for delivery. Likewise, forincoming mail, sendmail interprets the address and either deliversthe mail to a user's mail program or forwards it to another system.</P><PCLASS="para"><ACLASS="xref"HREF="ch10_01.htm#TCP2-CH-10-FIG-0"TITLE="Mail is routed through sendmail">Figure 10.1</A>illustrates sendmail's special role in routing mailbetween the various mail programs found on UNIX systems.</P><H4CLASS="figure"><ACLASS="title"NAME="TCP2-CH-10-FIG-0">Figure 10.1: Mail is routed through sendmail</A></H4><IMGCLASS="graphic"SRC="figs/tcp2_1001.gif"ALT="Figure 10.1"><PCLASS="para">In addition to routing mail between user programs and deliveryprograms, sendmail:</P><ULCLASS="itemizedlist"><LICLASS="listitem"><PCLASS="para">Receives and delivers SMTP<ACLASS="indexterm"NAME="AUTOID-12882"></A>(internet) mail</P></LI><LICLASS="listitem"><PCLASS="para">Provides system-wide mail aliases,<ACLASS="indexterm"NAME="AUTOID-12887"></A>which allow mailing lists<ACLASS="indexterm"NAME="AUTOID-12890"></A></P></LI></UL><PCLASS="para">Configuring a system to perform all of these functions properly is a complextask. In this chapter we discuss each of these functions,look at how they are configured, and examine ways to simplify the task.First, we'll see how sendmail is run to receive SMTP mail.Then we'll see how mail aliases are used, and how sendmail isconfigured to route mail based on the mail's address.</P></DIV></DIV><DIVCLASS="htmlnav"><P></P><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch09_08.htm"TITLE="9.8 Summary "><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 9.8 Summary "BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="book"HREF="index.htm"TITLE="TCP/IP Network Administration"><IMGSRC="../gifs/txthome.gif"ALT="TCP/IP Network Administration"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch10_02.htm"TITLE="10.2 Running sendmail as a Daemon "><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 10.2 Running sendmail as a Daemon "BORDER="0"></A></TD></TR><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172">9.8 Summary </TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="index"HREF="index/idx_0.htm"TITLE="Book Index"><IMGSRC="../gifs/index.gif"ALT="Book Index"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172">10.2 Running sendmail as a Daemon </TD></TR></TABLE><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><PCLASS="nav"><FONTSIZE="-1">[ <AHREF="../index.htm"TITLE="The Networking CD Bookshelf">Library Home</A> | <AHREF="../dnsbind/index.htm"TITLE="DNS &amp; BIND">DNS &amp; BIND</A> | <AHREF="index.htm"TITLE="TCP/IP Network Administration">TCP/IP</A> | <AHREF="../sendmail/index.htm"TITLE="sendmail">sendmail</A> | <AHREF="../smdref/index.htm"TITLE="sendmail Desktop Reference">sendmail Reference</A> | <AHREF="../firewall/index.htm"TITLE="Building Internet Firewalls">Firewalls</A> | <AHREF="../puis/index.htm"TITLE="Practical UNIX &amp; Internet Security">Practical Security</A> ]</FONT></P></DIV></BODY></HTML>