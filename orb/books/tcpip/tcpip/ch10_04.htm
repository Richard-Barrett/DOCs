<HTML><HEAD><TITLE>[Chapter 10] 10.4 The sendmail.cf File </TITLE><METANAME="DC.title"CONTENT="TCP/IP Network Administration"><METANAME="DC.creator"CONTENT="Craig Hunt"><METANAME="DC.publisher"CONTENT="O'Reilly &amp; Associates, Inc."><METANAME="DC.date"CONTENT="1999-02-04T01:38:37Z"><METANAME="DC.type"CONTENT="Text.Monograph"><METANAME="DC.format"CONTENT="text/html"SCHEME="MIME"><METANAME="DC.source"CONTENT="1-56592-322-7"SCHEME="ISBN"><METANAME="DC.language"CONTENT="en-US"><METANAME="generator"CONTENT="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><LINKREV="made"HREF="mailto:online-books@oreilly.com"TITLE="Online Books Comments"><LINKREL="up"HREF="ch10_01.htm"TITLE="10. sendmail "><LINKREL="prev"HREF="ch10_03.htm"TITLE="10.3 sendmail Aliases "><LINKREL="next"HREF="ch10_05.htm"TITLE="10.5 sendmail Configuration "></HEAD><BODYBGCOLOR="#FFFFFF"TEXT="#000000"><DIVCLASS="htmlnav"><H1><IMGSRC="gifs/smbanner.gif"ALT="TCP/IP Network Administration"USEMAP="#srchmap"BORDER="0"></H1><MAPNAME="srchmap"><AREASHAPE="RECT"COORDS="0,0,466,65"HREF="index.htm"ALT="TCP/IP Network Administration"><AREASHAPE="RECT"COORDS="467,0,514,18"HREF="../search/tsrch.htm"ALT="Search this book"></MAP><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch10_03.htm"TITLE="10.3 sendmail Aliases "><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 10.3 sendmail Aliases "BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><B><FONTFACE="ARIEL,HELVETICA,HELV,SANSERIF"SIZE="-1">Chapter 10<BR>sendmail </FONT></B></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch10_05.htm"TITLE="10.5 sendmail Configuration "><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 10.5 sendmail Configuration "BORDER="0"></A></TD></TR></TABLE>&nbsp;<HRALIGN="LEFT"WIDTH="515"TITLE="footer"></DIV><DIVCLASS="SECT1"><H2CLASS="sect1"><ACLASS="title"NAME="TCP2-CH-10-SECT-4">10.4 The sendmail.cf File </A></H2><PCLASS="para"><ACLASS="indexterm"NAME="TCP2-CH-10-IX-SENDMAIL-CF-FILE"></A>The sendmail configuration file is <EMCLASS="emphasis">sendmail.cf</EM>.[5]It contains most of the sendmail configuration, including theinformation required to route mail between the user mail programs andthe mail delivery programs. The <EMCLASS="emphasis">sendmail.cf</EM> file has three mainfunctions:</P><BLOCKQUOTECLASS="footnote"><PCLASS="para">[5] The default location for the configuration file is the <EMCLASS="emphasis">/etc</EM>directory, but it is often placed in other directories, such as<EMCLASS="emphasis">/etc/mail</EM> and <EMCLASS="emphasis">/usr/lib</EM>.</P></BLOCKQUOTE><ULCLASS="itemizedlist"><LICLASS="listitem"><PCLASS="para">It defines the sendmail environment.</P></LI><LICLASS="listitem"><PCLASS="para">It rewrites addresses into the appropriate syntax for the receivingmailer.</P></LI><LICLASS="listitem"><PCLASS="para">It maps addresses into the instructions necessary to deliver the mail.</P></LI></UL><PCLASS="para">Several commands are necessary to perform all of these functions.Macro definitions and option commands define the environment. Rewriterules rewrite email addresses. Mailer definitions define theinstructions necessary to deliver the mail. The terse syntax of thesecommands makes most system administrators reluctant to read a<EMCLASS="emphasis">sendmail.cf</EM> file, let alone write one! Fortunately, you can avoidwriting your own <EMCLASS="emphasis">sendmail.cf</EM> file, and we'll show you how.</P><DIVCLASS="sect2"><H3CLASS="sect2"><ACLASS="title"NAME="TCP2-CH-10-SECT-4.1">10.4.1 Locating a Sample sendmail.cf File </A></H3><PCLASS="para"><ACLASS="indexterm"NAME="TCP2-CH-10-IX-SENDMAIL-CF-FILE-SAMPLE-OF-LOCATING"></A>There is rarely any good reason to write a <EMCLASS="emphasis">sendmail.cf</EM> filefrom scratch. Locate an existing file with a configuration similar toyour system's and modify it. That's how you configure sendmail,and that's what we discuss in this section.</P><PCLASS="para">Sample configuration files are delivered with most systems' software.Some system administrators use the configuration file that comes withthe system and make small modifications to it to handle site-specificconfiguration requirements. We cover this approach to sendmailconfiguration later in this chapter.</P><PCLASS="para">Other system administrators prefer to use the latest version ofsendmail. They download the <EMCLASS="emphasis">sendmail.tar</EM> file<ACLASS="indexterm"NAME="AUTOID-13096"></A>and use the<BCLASS="emphasis.bold">m4</B> source files it contains to build a <EMCLASS="emphasis">sendmail.cf</EM> file.The samples that come with your system are adequate only if you alsouse the sendmail executable that comes with your system. If youupdate sendmail, use the <BCLASS="emphasis.bold">m4</B> source files that are compatiblewith the updated version of sendmail.</P><PCLASS="para">The <BCLASS="emphasis.bold">tar</B> file can be downloaded via anonymous <BCLASS="emphasis.bold">ftp</B> from<EMCLASS="emphasis">ftp.sendmail.org</EM>.[6]Login and change to the <EMCLASS="emphasis">pub/sendmail</EM> directory. This displaysa list of the available versions of sendmail. See <ACLASS="xref"HREF="appe_01.htm"TITLE="A sendmail Reference">Appendix E</A>, for anexample of downloading and installing the sendmail distribution.</P><BLOCKQUOTECLASS="footnote"><PCLASS="para">[6] Even if your UNIX system comes with its own version of sendmail,obtain the <BCLASS="emphasis.bold">tar</B> file for the useful documentation it contains,e.g., the <EMCLASS="emphasis">Sendmail Installation and Operation Guide</EM>, by EricAllman.</P></BLOCKQUOTE><PCLASS="para">The sendmail <EMCLASS="emphasis">cf/cf</EM><ACLASS="indexterm"NAME="AUTOID-13113"></A>directory contains several sample configurationfiles. Several of these are generic files preconfigured for differentoperating systems. The <EMCLASS="emphasis">cf/cf</EM> directory on my system containsgeneric configurations for BSD, Solaris, SunOS, HP Unix, Ultrix, OSF1,and Next Step. The directory also contains a few prototype filesdesigned to be easily modified and used for other operating systems.We will modify the <EMCLASS="emphasis">tcpproto.mc</EM> file, which is for systems thathave direct TCP/IP network connections and no direct UUCP connections,to run on our Linux system.</P><DIVCLASS="sect3"><H4CLASS="sect3"><ACLASS="title"NAME="TCP2-CH-10-SECT-4.1.1">10.4.1.1 Building a sendmail.cf with m4 macros </A></H4><PCLASS="para"><ACLASS="indexterm"NAME="TCP2-CH-10-IX-M4-MACROS"></A>The prototype files that come with the sendmail <BCLASS="emphasis.bold">tar</B> are not &quot;readyto run.&quot;  They must be edited and then processed by the <BCLASS="emphasis.bold">m4</B> macroprocessor to produce the actual configuration files. For example,the <EMCLASS="emphasis">tcpproto.mc</EM> file contains the following macros:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">divert(0)dnlVERSIONID(`@(#)tcpproto.mc	8.5 (Berkeley) 3/23/96')OSTYPE(unknown)FEATURE(nouucp)MAILER(local)MAILER(smtp)</PRE></BLOCKQUOTE></P><PCLASS="para">These macros are not sendmail commands; they are input forthe <BCLASS="emphasis.bold">m4</B> macro processor. The few lines shown above are theimportant lines in the <EMCLASS="emphasis">tcpproto.mc</EM> file. They are precededby a section of comments, not shown here, that is discarded by <BCLASS="emphasis.bold">m4</B>because it follows a <BCLASS="emphasis.bold">divert(-1) command</B>, which diverts the output to the&quot;bit bucket.&quot;  This section of the file begins with a divert(0) commandthat means these commands should be processed and that the results shouldbe directed to standard output.[7]</P><BLOCKQUOTECLASS="footnote"><PCLASS="para">[7] The <BCLASS="emphasis.bold">dnl</B> option is used to prevent excessive blank lines from appearingin the output file. It affects the appearance, but not the function,of the output file. <BCLASS="emphasis.bold">dnl</B> can appear at the end of any macro command.</P></BLOCKQUOTE><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-13137"></A>The VERSIONID macro is used for version control. Usually the value passedin the macro call is a version number in RCS (Release Control System)<ACLASS="indexterm"NAME="AUTOID-13139"></A><ACLASS="indexterm"NAME="AUTOID-13141"></A>or SCCS (Source Code Control System) format. This macro is optionaland we just ignore it.</P><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-13144"></A>The OSTYPE macro defines operating system-specific information for the<EMCLASS="emphasis">sendmail.cf</EM> file. The <EMCLASS="emphasis">cf/ostype</EM> directory<ACLASS="indexterm"NAME="AUTOID-13148"></A>contains morethan 30 pre-defined operating system macro files. The OSTYPE macro isrequired and the value passed in the OSTYPE macro call must match thename of one of the files in the directory. Examples of values are: <CODECLASS="literal">bsd4.4</CODE>, <CODECLASS="literal">solaris2</CODE>, and <CODECLASS="literal">linux</CODE>.</P><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-13154"></A>The FEATURE macro defines optional features to be included in the<EMCLASS="emphasis">sendmail.cf</EM> file. The <EMCLASS="emphasis">nouucp</EM> feature in the sample shown abovesays that no special UUCP address processing is to be included inthe output file. Recall that in the previous section we identified<EMCLASS="emphasis">tcpproto.mc</EM> as the prototype file for systems that have no UUCPconnections. Another prototype file would have different FEATURE values.</P><PCLASS="para">The prototype file ends with the mailer macros. These must be thelast macros in the input file. The sample shown above specifies thelocal mailer macro, which adds the local mailer and the prog mailerto the output, and the smtp mailer macro, which adds mailers for SMTP,Extended SMTP, 8-bit SMTP and relayed mail. All of these mailersare described later in this chapter.</P><PCLASS="para">To create a sample <EMCLASS="emphasis">sendmail.cf</EM> for a Linux system from the<EMCLASS="emphasis">tcpproto.mc</EM> prototype file, copy the prototypefile to a work file. Edit the work file by changing the OSTYPE linefrom <CODECLASS="literal">unknown</CODE> to <CODECLASS="literal">linux</CODE> to specify the correct operatingsystem. In the example we use <BCLASS="emphasis.bold">sed</B> to change <CODECLASS="literal">unknown</CODE> to<CODECLASS="literal">linux</CODE>. We store the result in a file we call <EMCLASS="emphasis">linux.mc</EM>:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen"># sed 's/unknown/linux/' &lt; tcpproto.mc &gt; linux.mc</PRE></BLOCKQUOTE></P><PCLASS="para">Then enter the <BCLASS="emphasis.bold">m4</B> command:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen"># m4 ../m4/cf.m4 linux.mc &gt; sendmail.cf</PRE></BLOCKQUOTE></P><PCLASS="para">The <EMCLASS="emphasis">sendmail.cf</EM> file output by the <BCLASS="emphasis.bold">m4</B> command is in thecorrect format to be read by the sendmail program.[8]In fact, the output file produced above is almost identical to thesample <EMCLASS="emphasis">linux.smtp.cf</EM> configuration file delivered with Linux.</P><BLOCKQUOTECLASS="footnote"><PCLASS="para">[8] New syntax and functions in the latest version of the <EMCLASS="emphasis">sendmail.cf</EM>file may not be supported by older versions of the sendmailprogram.</P></BLOCKQUOTE><PCLASS="para">OSTYPE is not the only thing in the macro file that can be modified tocreate a custom configuration. There are a large number of configurationoptions, all of which are explained in <ACLASS="xref"HREF="appe_01.htm"TITLE="A sendmail Reference">Appendix E</A>. As an example wemodify a few options to create a custom configuration that converts<EMCLASS="emphasis">user@host</EM> email addresses originating from our computerinto <EMCLASS="emphasis">firstname.lastname@domain</EM>. To do this, we create two newconfiguration files: a macro file with specific values for the domainthat we name <EMCLASS="emphasis">nuts.com.m4</EM> and a modified macro control file,<EMCLASS="emphasis">linux.mc</EM>, that calls the new <EMCLASS="emphasis">nuts.com.m4</EM> file.</P><PCLASS="para">We create the new macro file <EMCLASS="emphasis">nuts.com.m4</EM> and place it in the<EMCLASS="emphasis">cf/domain</EM> directory. The new file contains thefollowing:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">MASQUERADE_AS(nuts.com)FEATURE(masquerade_envelope)FEATURE(genericstable)</PRE></BLOCKQUOTE></P><PCLASS="para">These lines say that we want to hide the real hostname and display thename <EMCLASS="emphasis">nuts.com</EM> in its place in outbound email addresses. Also,we want to do this on &quot;envelope&quot; addresses as well as message headeraddresses. The last line says that we will use the generic addressconversion database, which converts login usernames to any value wewish. We must build the database by creating a text file with the datawe want and processing that file through the <BCLASS="emphasis.bold">makemap</B> command that<ACLASS="indexterm"NAME="AUTOID-13197"></A>comes with sendmail V8.</P><PCLASS="para">The format of thedatabase can be very simple:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">dan Dan.Scribner@nuts.comtyler Tyler.McCafferty@nuts.compat Pat.Stover@nuts.comwilly Bill.Wright@nuts.comcraig Craig.Hunt@nuts.com</PRE></BLOCKQUOTE></P><PCLASS="para">Each line in the file has two fields: the first field is the key, whichis the login name, and the second field is an email addresscontaining the user's real first andlast names separated by a dot. Fields are separated by spaces. Usingthis database, a query for <CODECLASS="literal">dan</CODE> will return the value <CODECLASS="literal">Dan.Scribner@nuts.com</CODE>.A small database such as this one can be easily built by hand. On asystem with a large number of existing user accounts, you may want toautomate this process by extracting the user's login name, and firstand last names from the <EMCLASS="emphasis">/etc/passwd</EM> file.<ACLASS="indexterm"NAME="AUTOID-13206"></A><ACLASS="indexterm"NAME="AUTOID-13208"></A>The gcos field of the<EMCLASS="emphasis">/etc/passwd</EM> file often contains the user's real name.[9]Once the data is in a text file convert it to a database with the<BCLASS="emphasis.bold">makemap</B> command. The <BCLASS="emphasis.bold">makemap</B> command is included inthe sendmail V8 <BCLASS="emphasis.bold">tar</B> file. It requires the ndbm library.The syntax of the <BCLASS="emphasis.bold">makemap</B> command is:</P><BLOCKQUOTECLASS="footnote"><PCLASS="para">[9] See <ACLASS="xref"HREF="appe_01.htm"TITLE="A sendmail Reference">Appendix E</A> for a sample script that builds the realnames databasefrom <EMCLASS="emphasis">/etc/passwd</EM>.</P></BLOCKQUOTE><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen"><BCLASS="emphasis.bold">makemap</B> <CODECLASS="replaceable"><I>type name</I></CODE></PRE></BLOCKQUOTE></P><PCLASS="para"><BCLASS="emphasis.bold">makemap</B> reads the standard input and writes the database out to afile it creates using the value provided by <CODECLASS="replaceable"><I>name</I></CODE> as the filename.The <CODECLASS="replaceable"><I>type</I></CODE> field identifies the database type. The most commonlysupported database types for sendmail V8 are dbm, btree, and hash.[10]All of these types can be made with the <BCLASS="emphasis.bold">makemap</B> command.</P><BLOCKQUOTECLASS="footnote"><PCLASS="para">[10] On Sun OS and Solaris systems, NIS maps and NIS+ tables are built withstandard commands that come with those operating systems. The syntaxfor using those maps within sendmail is different (see Table10-4). <EMCLASS="emphasis">Networking Personal Computers with TCP/IP</EM>, by Craig Hunt(O'Reilly &amp; Associates) provides an example of using a NIS mapinside of sendmail.</P></BLOCKQUOTE><PCLASS="para">Assume that the data shown above has been put in a file named<EMCLASS="emphasis">realnames</EM>. The following commandconverts that file to a database:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen"># makemap hash genericstable &lt; realnames</PRE></BLOCKQUOTE></P><PCLASS="para"><BCLASS="emphasis.bold">makemap</B> reads the text file and produces a database file called<EMCLASS="emphasis">genericstable</EM>. The database maps login names to real names, e.g.,the key <CODECLASS="literal">willy</CODE> returns the value <CODECLASS="literal">Bill.Wright@nuts.com</CODE>.</P><PCLASS="para">Now that we have created the database, we create a new sendmailconfiguration file to use it. All of the <BCLASS="emphasis.bold">m4</B> macros related tousing the database are in the <EMCLASS="emphasis">nuts.com.m4</EM> file. We need to includethat file in the configuration. To do that, add a <CODECLASS="literal">DOMAIN(nuts.com)</CODE>line to the macro control file (<EMCLASS="emphasis">linux.mc</EM>)<ACLASS="indexterm"NAME="AUTOID-13246"></A>and then process the<EMCLASS="emphasis">linux.mc</EM> through <BCLASS="emphasis.bold">m4</B>. The following <BCLASS="emphasis.bold">grep</B> command showswhat the macros in the file look like after the change:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen"># grep '^[A-Z]' linux.mcVERSIONID(`@(#)tcpproto.mc	8.5 (Berkeley) 3/23/96')OSTYPE(linux)DOMAIN(nuts.com)FEATURE(nouucp)MAILER(local)MAILER(smtp)# m4 ../m4/cf.m4 linux.mc &gt; sendmail.cf</PRE></BLOCKQUOTE></P><PCLASS="para">Use the prototype <EMCLASS="emphasis">mc</EM> files as the starting point of yourconfiguration if you install sendmail from the <BCLASS="emphasis.bold">tar</B> file.To use the latest version of sendmail you must build a compatible<EMCLASS="emphasis">sendmail.cf</EM> file using the <BCLASS="emphasis.bold">m4</B> macros. Don't attempt touse an old <EMCLASS="emphasis">sendmail.cf</EM> file with a new version of sendmail.You'll just cause yourself grief. As you can see from the sample above,<BCLASS="emphasis.bold">m4</B> configuration files are very short and can be constructed fromonly a few macros. Use <BCLASS="emphasis.bold">m4</B> to build a fresh configuration every timeyou upgrade sendmail.</P><PCLASS="para">Conversely, you should not use a <EMCLASS="emphasis">sendmail.cf</EM> file created from theprototype files found in the sendmail distribution with an old versionof sendmail. Features in these files require that you run acompatible version of sendmail, which means it is necessary torecompile sendmail to use the new configuration file.[11]This is not something every system administrator will choose to do,because some systems don't have the correct libraries; others don'teven have a C compiler! If you choose not to recompile sendmail, youcan use the sample <EMCLASS="emphasis">sendmail.cf</EM> file provided with your systemas a starting point. However, if you have major changes planned foryour configuration, it is probably easier to recompile sendmailand build a new configuration with <BCLASS="emphasis.bold">m4</B> than it is to make majorchanges directly to the <EMCLASS="emphasis">sendmail.cf</EM>.<ACLASS="indexterm"NAME="AUTOID-13269"></A></P><BLOCKQUOTECLASS="footnote"><PCLASS="para">[11] See <ACLASS="xref"HREF="appe_01.htm"TITLE="A sendmail Reference">Appendix E</A> for information about compiling sendmail.</P></BLOCKQUOTE><PCLASS="para">In the next part of this chapter, we use one of the sample<EMCLASS="emphasis">sendmail.cf</EM> files provided with Linux. The specific file westart with is <EMCLASS="emphasis">linux.smtp.cf</EM> found in the <EMCLASS="emphasis">/usr/src/sendmail</EM>directory on the Slackware 96 version of Linux. All of the thingsthat we discuss in the remainder of the chapter apply equally well to<EMCLASS="emphasis">sendmail.cf</EM> files that are produced by <BCLASS="emphasis.bold">m4</B>. The structure ofa <EMCLASS="emphasis">sendmail.cf</EM> file, the commands that it contains, and the toolsused to debug it are universal.<ACLASS="indexterm"NAME="AUTOID-13277"></A></P></DIV></DIV><DIVCLASS="sect2"><H3CLASS="sect2"><ACLASS="title"NAME="TCP2-CH-10-SECT-4.2">10.4.2 General sendmail.cf Structure </A></H3><PCLASS="para"><ACLASS="indexterm"NAME="TCP2-CH-10-IX-SENDMAIL-CF-FILE-STRUCTURE-OF"></A>Many <EMCLASS="emphasis">sendmail.cf</EM> files have more or less the same structurebecause most are descendants of a few original files. Therefore,the files provided with your system probably are similar to the onesused in our examples. Some systems use a different structure, but thefunctions of the sections described here will be found somewhere in most<EMCLASS="emphasis">sendmail.cf</EM> files.</P><PCLASS="para">The Linux file, <EMCLASS="emphasis">linux.smtp.cf</EM>,<ACLASS="indexterm"NAME="AUTOID-13288"></A>is our example of<EMCLASS="emphasis">sendmail.cf</EM> file structure. The section labels from the samplefile are used here to provide an overview of the <EMCLASS="emphasis">sendmail.cf</EM>structure. These sections will be described in greater detail when wemodify a sample configuration. The sections are:</P><DLCLASS="variablelist"><DTCLASS="term"><EMCLASS="emphasis">Local Information</EM></DT><DDCLASS="listitem"><PCLASS="para">Defines the information that is specific to the individual host.In the <EMCLASS="emphasis">linux.smtp.cf</EM> file, Local Information defines the hostname, the names of any mail relay hosts, and the mail domain. It alsocontains the name that sendmail uses to identify itself when itreturns error messages, the message that sendmail displays duringan SMTP login, and the version number of the <EMCLASS="emphasis">sendmail.cf</EM> file.(Increase the version number each time you modify the configuration.)This section is usually customized during configuration.</P></DD><DTCLASS="term"><EMCLASS="emphasis">Options</EM></DT><DDCLASS="listitem"><PCLASS="para">Defines the sendmail options. This section usuallyrequires no modifications.</P></DD><DTCLASS="term"><EMCLASS="emphasis">Message Precedence</EM></DT><DDCLASS="listitem"><PCLASS="para">Defines the various message precedence values used bysendmail. This section is not modified.</P></DD><DTCLASS="term"><EMCLASS="emphasis">Trusted Users</EM></DT><DDCLASS="listitem"><PCLASS="para">Defines the users who are trusted to override the senderaddress when they are sending mail. This section is not modified.Adding users to this list is a potential security problem.</P></DD><DTCLASS="term"><EMCLASS="emphasis">Format of Headers</EM></DT><DDCLASS="listitem"><PCLASS="para">Defines the format of the headers that sendmailinserts into mail. This section is not modified.</P></DD><DTCLASS="term"><EMCLASS="emphasis">Rewriting Rules</EM></DT><DDCLASS="listitem"><PCLASS="para">Defines the rules used to rewrite mail addresses. Rewriting Rulescontains the general rules called by sendmail or other rewriterules. This section is not modified during the initial sendmailconfiguration. Rewrite rules are usually only modified to correct aproblem or to add a new service.</P></DD><DTCLASS="term"><EMCLASS="emphasis">Mailers</EM></DT><DDCLASS="listitem"><PCLASS="para">Defines the instructions used by sendmail to invoke the maildelivery programs. The specific rewrite rules associated with eachindividual mailer are also defined in this section. The mailerdefinitions are usually not modified. However, the rewrite rulesassociated with the mailers are sometimes modified to correct a problemor to add a new service.</P></DD></DL><PCLASS="para">The section labels in the sample file delivered with your system areprobably different from these. However, the structure of your samplefile is probably similar to the structure discussed above in theseways:</P><ULCLASS="itemizedlist"><LICLASS="listitem"><PCLASS="para">The information that is customized for each host is probably at thebeginning of the file.</P></LI><LICLASS="listitem"><PCLASS="para">Similar types of commands, e.g., option commands, header commands, etc.,are usually grouped together.</P></LI><LICLASS="listitem"><PCLASS="para">The bulk of the file consists of rewrite rules.</P></LI><LICLASS="listitem"><PCLASS="para">The last part of the file probably contains mailer definitionsintermixed with the rewrite rules that are associated with theindividual mailers.</P></LI></UL><PCLASS="para">Look at the comments in<ACLASS="indexterm"NAME="AUTOID-13341"></A>your <EMCLASS="emphasis">sendmail.cf</EM> file. Sometimes thesecomments provide valuable insight into the file structure andthe things that are necessary to configure a system.<ACLASS="indexterm"NAME="AUTOID-13345"></A></P><PCLASS="para">It's important to realize how little of <EMCLASS="emphasis">sendmail.cf</EM> needs to bemodified for a typical system. If you pick the right sample file towork from, you may only need to modify a few lines in the first section.From this perspective, sendmail configuration appears to be atrivial task. So why are system administrators intimidated by it? In large part it is because of thedifficult syntax of the <EMCLASS="emphasis">sendmail.cf</EM> configuration language.</P></DIV></DIV><DIVCLASS="htmlnav"><P></P><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch10_03.htm"TITLE="10.3 sendmail Aliases "><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 10.3 sendmail Aliases "BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="book"HREF="index.htm"TITLE="TCP/IP Network Administration"><IMGSRC="../gifs/txthome.gif"ALT="TCP/IP Network Administration"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch10_05.htm"TITLE="10.5 sendmail Configuration "><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 10.5 sendmail Configuration "BORDER="0"></A></TD></TR><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172">10.3 sendmail Aliases </TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="index"HREF="index/idx_0.htm"TITLE="Book Index"><IMGSRC="../gifs/index.gif"ALT="Book Index"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172">10.5 sendmail Configuration </TD></TR></TABLE><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><PCLASS="nav"><FONTSIZE="-1">[ <AHREF="../index.htm"TITLE="The Networking CD Bookshelf">Library Home</A> | <AHREF="../dnsbind/index.htm"TITLE="DNS &amp; BIND">DNS &amp; BIND</A> | <AHREF="index.htm"TITLE="TCP/IP Network Administration">TCP/IP</A> | <AHREF="../sendmail/index.htm"TITLE="sendmail">sendmail</A> | <AHREF="../smdref/index.htm"TITLE="sendmail Desktop Reference">sendmail Reference</A> | <AHREF="../firewall/index.htm"TITLE="Building Internet Firewalls">Firewalls</A> | <AHREF="../puis/index.htm"TITLE="Practical UNIX &amp; Internet Security">Practical Security</A> ]</FONT></P></DIV></BODY></HTML>