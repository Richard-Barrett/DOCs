<HTML><HEAD><TITLE>[Chapter 11] 11.2 Diagnostic Tools </TITLE><METANAME="DC.title"CONTENT="TCP/IP Network Administration"><METANAME="DC.creator"CONTENT="Craig Hunt"><METANAME="DC.publisher"CONTENT="O'Reilly &amp; Associates, Inc."><METANAME="DC.date"CONTENT="1999-02-04T01:40:17Z"><METANAME="DC.type"CONTENT="Text.Monograph"><METANAME="DC.format"CONTENT="text/html"SCHEME="MIME"><METANAME="DC.source"CONTENT="1-56592-322-7"SCHEME="ISBN"><METANAME="DC.language"CONTENT="en-US"><METANAME="generator"CONTENT="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><LINKREV="made"HREF="mailto:online-books@oreilly.com"TITLE="Online Books Comments"><LINKREL="up"HREF="ch11_01.htm"TITLE="11. Troubleshooting TCP/IP "><LINKREL="prev"HREF="ch11_01.htm"TITLE="11.1 Approaching a Problem "><LINKREL="next"HREF="ch11_03.htm"TITLE="11.3 Testing Basic Connectivity "></HEAD><BODYBGCOLOR="#FFFFFF"TEXT="#000000"><DIVCLASS="htmlnav"><H1><IMGSRC="gifs/smbanner.gif"ALT="TCP/IP Network Administration"USEMAP="#srchmap"BORDER="0"></H1><MAPNAME="srchmap"><AREASHAPE="RECT"COORDS="0,0,466,65"HREF="index.htm"ALT="TCP/IP Network Administration"><AREASHAPE="RECT"COORDS="467,0,514,18"HREF="../search/tsrch.htm"ALT="Search this book"></MAP><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch11_01.htm"TITLE="11.1 Approaching a Problem "><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 11.1 Approaching a Problem "BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><B><FONTFACE="ARIEL,HELVETICA,HELV,SANSERIF"SIZE="-1">Chapter 11<BR>Troubleshooting TCP/IP </FONT></B></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch11_03.htm"TITLE="11.3 Testing Basic Connectivity "><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 11.3 Testing Basic Connectivity "BORDER="0"></A></TD></TR></TABLE>&nbsp;<HRALIGN="LEFT"WIDTH="515"TITLE="footer"></DIV><DIVCLASS="SECT1"><H2CLASS="sect1"><ACLASS="title"NAME="TCP2-CH-11-SECT-2">11.2 Diagnostic Tools </A></H2><PCLASS="para"><ACLASS="indexterm"NAME="TCP2-CH-11-IX-DIAGNOSTIC-TOOLS"></A>Because most problems have a simple cause, developing a clear idea ofthe problem often provides the solution. Unfortunately, this is notalways true, so in this section we begin to discuss the tools that canhelp you attack the most intractable problems. Many diagnostic toolsare available, ranging from commercial systems with specializedhardware and software that may cost thousands of dollars, to freesoftware that is available from the Internet. Many software tools areprovided with your UNIX system. You should also keep some hardwaretools handy.</P><PCLASS="para">To maintain the network's equipment<ACLASS="indexterm"NAME="AUTOID-15294"></A>and wiring you need some simple hand tools. A pair of needle-nose pliers and a few screwdrivers may besufficient, but you may also need specialized tools. For example, attaching RJ45 connectors to Unshielded TwistedPair (UTP) cable requires special crimping tools. It is usually easiest<ACLASS="indexterm"NAME="AUTOID-15297"></A>to buy a ready-made network maintenance toolkit from your cablevendor.</P><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-15300"></A>A full-featured cable tester is also useful. Modern cable testers aresmall hand-held units with a keypad and LCD display that test boththinnet or UTP cable. Tests are selected from the keyboard and resultsare displayed on the LCD screen. It is not necessary to interpret theresults because the unit does that for you and displays the errorcondition in a simple text message. For example, a cable test mightproduce the message &quot;Short at 74 feet.&quot; This tells you that the cableis shorted 74 feet away from the tester. What could be simpler? Theproper test tools make it easier to locate, and therefore fix, cableproblems.</P><PCLASS="para">A laptop computer can be a most useful piece of test equipment when<ACLASS="indexterm"NAME="AUTOID-15303"></A>properly configured. Install TCP/IP software on the laptop. Take it tothe location where the user reports a network problem. Disconnect theEthernet cable from the back of the user's system and attach it to thelaptop. Configure the laptop with an appropriate address for the user'ssubnet and reboot it. Then <BCLASS="emphasis.bold">ping</B> various systems on the network andattach to one of the user's servers. If everything works, the fault isprobably in the user's computer. The user trusts this test because itdemonstrates something she does every day. She will have more confidence in the laptop than an unidentifiable pieceof test equipment displaying the message &quot;No faults found.&quot; If the test fails, the fault is probablyin the network equipment or wiring. That's the time to bring out thecable tester.</P><PCLASS="para">Another advantage of using a laptop as a piece of test equipment is itsinherent versatility. It runs a wide variety of test, diagnostic, andmanagement software. Install UNIX on the laptop and run the softwarediscussed in the rest of this chapter from your desktop or yourlaptop.</P><PCLASS="para">This book emphasizes free or &quot;built-in&quot; software diagnostic tools thatrun on UNIX systems. The software tools used in this chapter, and manymore, are described in RFC 1470, <EMCLASS="emphasis">FYI on a Network Management ToolCatalog: Tools for Monitoring and Debugging TCP/IP Internets andInterconnected Devices</EM>. A catchy title, and a very useful RFC! Thetools listed in that catalog and discussed in this book are:</P><DLCLASS="variablelist"><DTCLASS="term"><BCLASS="emphasis.bold">ifconfig</B></DT><DDCLASS="listitem"><PCLASS="para">Provides information about the basic configuration of the interface.<ACLASS="indexterm"NAME="AUTOID-15315"></A>It is useful for detecting bad IP addresses, incorrect subnet masks, and improper broadcast addresses. <ACLASS="xref"HREF="ch06_01.htm"TITLE="Configuring the Interface ">Chapter 6, <CITECLASS="chapter">Configuring the Interface </CITE></A>, covers <BCLASS="emphasis.bold">ifconfig</B> in detail. This tool is provided with the UNIX operating system.</P></DD><DTCLASS="term"><BCLASS="emphasis.bold">arp</B></DT><DDCLASS="listitem"><PCLASS="para">Provides information about Ethernet/IP address translation. It can be<ACLASS="indexterm"NAME="AUTOID-15325"></A>used to detect systems on the local network that are configured withthe wrong IP address. <BCLASS="emphasis.bold">arp</B> is covered in this chapter, and isused in an example in <ACLASS="xref"HREF="ch02_01.htm"TITLE="Delivering the Data">Chapter 2, <CITECLASS="chapter">Delivering the Data</CITE></A>. <BCLASS="emphasis.bold">arp</B> is delivered as part ofUNIX.</P></DD><DTCLASS="term"><BCLASS="emphasis.bold">netstat</B></DT><DDCLASS="listitem"><PCLASS="para">Provides a variety of information. It is commonly used to display<ACLASS="indexterm"NAME="AUTOID-15337"></A>detailed statistics about each network interface, networksockets, and the network routing table. <BCLASS="emphasis.bold">netstat</B> is usedrepeatedly in this book, most extensively in Chapters 2, 6, and 7.<BCLASS="emphasis.bold">netstat</B> is delivered as part of UNIX.</P></DD><DTCLASS="term"><BCLASS="emphasis.bold">ping</B></DT><DDCLASS="listitem"><PCLASS="para">Indicates whether a remote host can be reached.<BCLASS="emphasis.bold">ping</B> also displays statistics about packet loss anddelivery time. <BCLASS="emphasis.bold">ping</B> is discussed in <ACLASS="xref"HREF="ch01_01.htm"TITLE="Overview of TCP/IP">Chapter 1, <CITECLASS="chapter">Overview of TCP/IP</CITE></A> and used inChapter&nbsp;7. <BCLASS="emphasis.bold">ping</B> also comes as part of UNIX.</P></DD><DTCLASS="term"><BCLASS="emphasis.bold">nslookup</B></DT><DDCLASS="listitem"><PCLASS="para">Provides information about the DNS name service. <BCLASS="emphasis.bold">nslookup</B> is<ACLASS="indexterm"NAME="AUTOID-15357"></A><ACLASS="indexterm"NAME="AUTOID-15360"></A>covered in detail in <ACLASS="xref"HREF="ch08_01.htm"TITLE="Configuring DNS Name Service ">Chapter 8, <CITECLASS="chapter">Configuring DNS Name Service </CITE></A>. It comes as part of the BIND softwarepackage.</P></DD><DTCLASS="term"><BCLASS="emphasis.bold">dig</B></DT><DDCLASS="listitem"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-15368"></A>Also provides information about name service, and is similar to<BCLASS="emphasis.bold">nslookup</B>.</P></DD><DTCLASS="term"><BCLASS="emphasis.bold">ripquery</B></DT><DDCLASS="listitem"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-15376"></A>Provides information about the contents of the RIP update packets beingsent or received by your system. It is provided as part of the<ACLASS="indexterm"NAME="AUTOID-15378"></A><BCLASS="emphasis.bold">gated</B> software package, but it does not require that you run<BCLASS="emphasis.bold">gated</B>. It will work with any system running RIP.</P></DD><DTCLASS="term"><BCLASS="emphasis.bold">traceroute</B></DT><DDCLASS="listitem"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-15388"></A>Prints information about each routing hop that packets take going fromyour system to a remote system.</P></DD><DTCLASS="term"><BCLASS="emphasis.bold">snoop</B></DT><DDCLASS="listitem"><PCLASS="para">Analyzes the individual packets exchanged between hosts on a network.<ACLASS="indexterm"NAME="AUTOID-15395"></A><BCLASS="emphasis.bold">snoop</B> is a TCP/IP protocol analyzer that examines the contentsof packets, including their headers. It is most useful for analyzing<ACLASS="indexterm"NAME="AUTOID-15398"></A>protocol problems. <BCLASS="emphasis.bold">tcpdump</B> is a tool similar to <BCLASS="emphasis.bold">snoop</B> thatis available via anonymous FTP from the Internet.</P></DD></DL><PCLASS="para">This chapter discusses each of these tools, even those covered earlier in the text. We start with <BCLASS="emphasis.bold">ping</B>, which is used inmore troubleshooting situations than any other diagnostic tool.<ACLASS="indexterm"NAME="AUTOID-15404"></A></P></DIV><DIVCLASS="htmlnav"><P></P><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch11_01.htm"TITLE="11.1 Approaching a Problem "><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 11.1 Approaching a Problem "BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="book"HREF="index.htm"TITLE="TCP/IP Network Administration"><IMGSRC="../gifs/txthome.gif"ALT="TCP/IP Network Administration"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch11_03.htm"TITLE="11.3 Testing Basic Connectivity "><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 11.3 Testing Basic Connectivity "BORDER="0"></A></TD></TR><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172">11.1 Approaching a Problem </TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="index"HREF="index/idx_0.htm"TITLE="Book Index"><IMGSRC="../gifs/index.gif"ALT="Book Index"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172">11.3 Testing Basic Connectivity </TD></TR></TABLE><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><PCLASS="nav"><FONTSIZE="-1">[ <AHREF="../index.htm"TITLE="The Networking CD Bookshelf">Library Home</A> | <AHREF="../dnsbind/index.htm"TITLE="DNS &amp; BIND">DNS &amp; BIND</A> | <AHREF="index.htm"TITLE="TCP/IP Network Administration">TCP/IP</A> | <AHREF="../sendmail/index.htm"TITLE="sendmail">sendmail</A> | <AHREF="../smdref/index.htm"TITLE="sendmail Desktop Reference">sendmail Reference</A> | <AHREF="../firewall/index.htm"TITLE="Building Internet Firewalls">Firewalls</A> | <AHREF="../puis/index.htm"TITLE="Practical UNIX &amp; Internet Security">Practical Security</A> ]</FONT></P></DIV></BODY></HTML>