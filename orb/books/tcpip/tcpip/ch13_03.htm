<HTML><HEAD><TITLE>[Chapter 13] 13.3 Finding Files </TITLE><METANAME="DC.title"CONTENT="TCP/IP Network Administration"><METANAME="DC.creator"CONTENT="Craig Hunt"><METANAME="DC.publisher"CONTENT="O'Reilly &amp; Associates, Inc."><METANAME="DC.date"CONTENT="1999-02-04T01:42:16Z"><METANAME="DC.type"CONTENT="Text.Monograph"><METANAME="DC.format"CONTENT="text/html"SCHEME="MIME"><METANAME="DC.source"CONTENT="1-56592-322-7"SCHEME="ISBN"><METANAME="DC.language"CONTENT="en-US"><METANAME="generator"CONTENT="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><LINKREV="made"HREF="mailto:online-books@oreilly.com"TITLE="Online Books Comments"><LINKREL="up"HREF="ch13_01.htm"TITLE="13. Internet Information Resources "><LINKREL="prev"HREF="ch13_02.htm"TITLE="13.2 Anonymous FTP "><LINKREL="next"HREF="ch13_04.htm"TITLE="13.4 Retrieving RFCs "></HEAD><BODYBGCOLOR="#FFFFFF"TEXT="#000000"><DIVCLASS="htmlnav"><H1><IMGSRC="gifs/smbanner.gif"ALT="TCP/IP Network Administration"USEMAP="#srchmap"BORDER="0"></H1><MAPNAME="srchmap"><AREASHAPE="RECT"COORDS="0,0,466,65"HREF="index.htm"ALT="TCP/IP Network Administration"><AREASHAPE="RECT"COORDS="467,0,514,18"HREF="../search/tsrch.htm"ALT="Search this book"></MAP><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch13_02.htm"TITLE="13.2 Anonymous FTP "><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 13.2 Anonymous FTP "BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><B><FONTFACE="ARIEL,HELVETICA,HELV,SANSERIF"SIZE="-1">Chapter 13<BR>Internet Information Resources </FONT></B></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch13_04.htm"TITLE="13.4 Retrieving RFCs "><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 13.4 Retrieving RFCs "BORDER="0"></A></TD></TR></TABLE>&nbsp;<HRALIGN="LEFT"WIDTH="515"TITLE="footer"></DIV><DIVCLASS="SECT1"><H2CLASS="sect1"><ACLASS="title"NAME="TCP2-CH-13-SECT-3">13.3 Finding Files </A></H2><PCLASS="para"><ACLASS="indexterm"NAME="TCP2-CH-13-IX-FILE-FINDING"></A>Anonymous FTP requires detailed knowledge from the user. Toretrieve a file, you must know the FTP server and the directorywhere the file is located. When the network was small, this was not amajor problem. There were a limited number of important FTPservers, and they were well stocked with files. You could always<BCLASS="emphasis.bold">ftp</B> to a major server and search through some directories using<BCLASS="emphasis.bold">ftp</B>'s <BCLASS="emphasis.bold">ls</B> command. This old approach is not compatible witha large and expanding Internet for two reasons:</P><ULCLASS="itemizedlist"><LICLASS="listitem"><PCLASS="para">There are now thousands of major anonymous FTP servers. Knowingthem all is difficult.</P></LI><LICLASS="listitem"><PCLASS="para">There are now millions of Internet users. They cannot all rely on afew well-known servers. The servers would quickly be overwhelmed with<BCLASS="emphasis.bold">ftp</B> requests.</P></LI></UL><PCLASS="para"><BCLASS="emphasis.bold">archie</B> is an application designed to help with this problem. Itprovides a database of information about anonymous FTP sites andthe files they contain.</P><DIVCLASS="sect2"><H3CLASS="sect2"><ACLASS="title"NAME="TCP2-CH-13-SECT-3.1">13.3.1 archie </A></H3><PCLASS="para"><ACLASS="indexterm"NAME="TCP2-CH-13-IX-ARCHIE"></A><BCLASS="emphasis.bold">archie</B> expands the usefulness of anonymous FTP by helpingyou locate the file, program, or other information that you need.<BCLASS="emphasis.bold">archie</B> uses information servers that maintain databasescontaining information about hundreds of FTP servers, andthousands of files and programs throughout the Internet.</P><PCLASS="para"><BCLASS="emphasis.bold">archie</B>'s primary database is a listing of files and theservers from which the files can be retrieved. In the simplestsense, you tell <BCLASS="emphasis.bold">archie</B> which file you're looking for, and<BCLASS="emphasis.bold">archie</B> tells you which FTP servers the file is availablefrom.</P><PCLASS="para"><BCLASS="emphasis.bold">archie</B> can be used in four different ways: interactively, throughelectronic mail, via a Web browser, or from an <BCLASS="emphasis.bold">archie</B> client.<ACLASS="indexterm"NAME="AUTOID-18874"></A>To use <BCLASS="emphasis.bold">archie</B> interactively, <BCLASS="emphasis.bold">telnet</B> to one of the<BCLASS="emphasis.bold">archie</B> servers.<ACLASS="indexterm"NAME="AUTOID-18879"></A>[3]Log in using the username <EMCLASS="emphasis">archie</EM> and no password. At the<CODECLASS="literal">archie&gt;</CODE> prompt, type <BCLASS="emphasis.bold">help</B> to get a full set of interactive<BCLASS="emphasis.bold">archie</B> commands.</P><BLOCKQUOTECLASS="footnote"><PCLASS="para">[3] The list of publicly accessible servers is available at<ACLASS="systemitem.sitename"HREF="http://www.bunyip.com/products/archie/world/servers.html">http://www.bunyip.com/products/archie/world/servers.html</A>.</P></BLOCKQUOTE><PCLASS="para">There are many interactive <BCLASS="emphasis.bold">archie</B> commands, but the basicfunction of locating a program that is accessible via anonymous FTP canbe reduced to two commands.</P><DLCLASS="variablelist"><DTCLASS="term"><BCLASS="emphasis.bold">prog</B> <CODECLASS="replaceable"><I>pattern</I></CODE></DT><DDCLASS="listitem"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-18898"></A>Display all files in the database with names that match the specified<CODECLASS="replaceable"><I>pattern</I></CODE>.</P></DD><DTCLASS="term"><BCLASS="emphasis.bold">mail</B> <CODECLASS="replaceable"><I>address</I></CODE></DT><DDCLASS="listitem"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-18907"></A>Mail the output of the last command to <CODECLASS="replaceable"><I>address</I></CODE>, whichis normally your own email address.</P></DD></DL><PCLASS="para">The following example uses both of these commands to interactivelysearch for <EMCLASS="emphasis">gated-R3_5_5.tar</EM>, and then mail the results of thesearch to <EMCLASS="emphasis">craig@peanut.nuts.com</EM>.</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">% <CODECLASS="userinput"><B>telnet archie.internic.net</B></CODE>Trying 198.49.45.10...Connected to archie.ds.internic.net.Escape character is ']'.UNIX(r) System V Release 4.0 (ds0)login: <CODECLASS="userinput"><B>archie</B></CODE> # Bunyip Information Systems, Inc., 1993, 1994, 1995 archie&gt; <CODECLASS="userinput"><B>prog gated-R3_5_5.tar</B></CODE># Search type: sub.# Your queue position: 1# Estimated time for completion: 5 seconds.working... OHost ftp.zcu.cz    (147.228.206.16)Last updated 11:32 27 Jun 1997 Location: /pub/security/merit/gated  FILE -r--r--r-- 1460773 bytes Jan 1997 gated-R3_5_5.tar.gzarchie&gt; <CODECLASS="userinput"><B>mail craig@peanut.nuts.com</B></CODE>archie&gt; <CODECLASS="userinput"><B>quit</B></CODE></PRE></BLOCKQUOTE></P><PCLASS="para">The <BCLASS="emphasis.bold">archie</B> output provides all of the information you need toinitiate an anonymous FTP transfer:</P><ULCLASS="itemizedlist"><LICLASS="listitem"><PCLASS="para">The name of the server (<EMCLASS="emphasis">ftp.zcu.cz</EM> in our example)</P></LI><LICLASS="listitem"><PCLASS="para">The directory on the server that contains the file(<EMCLASS="emphasis">/pub/security/merit/gated</EM> in our example)</P></LI><LICLASS="listitem"><PCLASS="para">The full name of the file (<EMCLASS="emphasis">gated-R3_5_5.tar.gz</EM> in ourexample)</P></LI></UL><PCLASS="para">You can also use <BCLASS="emphasis.bold">archie</B> by sending email to <EMCLASS="emphasis">archie</EM> at anyone of the <BCLASS="emphasis.bold">archie</B> servers; for example,<EMCLASS="emphasis">archie@archie.internic.net</EM>.  The text of the mail message mustcontain a valid <BCLASS="emphasis.bold">archie</B> email command. To get a complete list of<BCLASS="emphasis.bold">archie</B> email commands, send mail containing the <EMCLASS="emphasis">help</EM>command to one of the servers. In the example below, the email helpfile is requested from <EMCLASS="emphasis">archie.internic.net</EM>.<ACLASS="indexterm"NAME="AUTOID-18942"></A></P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">% <CODECLASS="userinput"><B>mail archie@archie.internic.net</B></CODE>Subject:<CODECLASS="userinput"><B>help^D</B></CODE>EOT</PRE></BLOCKQUOTE></P><PCLASS="para">While these two methods of accessing <BCLASS="emphasis.bold">archie</B> work fine, the bestway to use <BCLASS="emphasis.bold">archie</B> is through a Web browser. Many Webservers provide an <BCLASS="emphasis.bold">archie</B> interface.<ACLASS="systemitem.sitename"HREF="http://pubweb.nexor.co/uk/public/archie/servers.html">http://pubweb.nexor.co/uk/public/archie/servers.html</A> lists several ofthese gateways. The server used in <ACLASS="xref"HREF="ch13_03.htm#TCP2-CH-13-FIG-3"TITLE="Archie Web interface">Figure 13.4</A>is <ACLASS="systemitem.sitename"HREF="http://archie.bunyip.com/archie.html">http://archie.bunyip.com/archie.html</A>.</P><H4CLASS="figure"><ACLASS="title"NAME="TCP2-CH-13-FIG-3">Figure 13.4: Archie Web interface</A></H4><IMGCLASS="graphic"SRC="figs/tcp2_1304.gif"ALT="Figure 13.4"><PCLASS="para">Enter the name of the program you want to locate in the <CODECLASS="literal">Searchfor:</CODE> box and press the <CODECLASS="literal">Search</CODE> button. Your browser displaysthe search results with links directly to the file you'reseeking. For example, assume we rerun the search for<EMCLASS="emphasis">gated-R3_5_5.tar.gz</EM> using the<ACLASS="systemitem.sitename"HREF="http://archie.bunyip.com/archie.html">http://archie.bunyip.com/archie.html</A> Web page. The server returns alist of eight matches, the first of which is the anonymous FTP serverat <EMCLASS="emphasis">ftp.zcu.cz</EM>. The filename <EMCLASS="emphasis">gated-R3_5_5.tar.gz</EM> that isdisplayed next to the FTP server is a link. Clicking on the linktransfers the file from <EMCLASS="emphasis">ftp.zcu.cz</EM> to your system. Search andretrieval all in one interface!</P><PCLASS="para">While the Web browser provides the easiest interface to <BCLASS="emphasis.bold">archie</B>, somepeople prefer to run an <BCLASS="emphasis.bold">archie</B> client on their local system. Using an<BCLASS="emphasis.bold">archie</B> client reduces the load on the servers and improvesresponsiveness for the user. If you believe you'll access<BCLASS="emphasis.bold">archie</B> very frequently, it might be worth setting up an<BCLASS="emphasis.bold">archie</B> client.</P><DIVCLASS="sect3"><H4CLASS="sect3"><ACLASS="title"NAME="TCP2-CH-13-SECT-3.1.1">13.3.1.1 archie client software </A></H4><PCLASS="para"><ACLASS="indexterm"NAME="TCP2-CH-13-IX-ARCHIE-CLIENT-SOFTWARE"></A><BCLASS="emphasis.bold">archie</B> client software is available via anonymous FTP from the<ACLASS="indexterm"NAME="AUTOID-18979"></A><EMCLASS="emphasis">ftp.bunyip.com</EM> server. The software is stored in the<EMCLASS="emphasis">pub/archie/clients</EM> directory. The README file in this directoryprovides a short description of each type of client. There are atleast three different client software packages for UNIX: an X windowsclient and two command-line clients, one written in C and the otherwritten in Perl. Check the <BCLASS="emphasis.bold">archie</B> servers for the latestdevelopments in client software.</P><PCLASS="para">This section uses the command-line <BCLASS="emphasis.bold">archie</B> client written in C asan example. The C code and the instruction to <BCLASS="emphasis.bold">make</B> the client areall contained in the <EMCLASS="emphasis">c-archie-1.4.1.tar.gz</EM> file from<EMCLASS="emphasis">ftp.bunyip.com</EM>. Once the client has been made and installed, itis invoked using the command:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">% <CODECLASS="userinput"><B>archie</B></CODE> [<CODECLASS="replaceable"><I>options</I></CODE>] <CODECLASS="replaceable"><I>string</I></CODE></PRE></BLOCKQUOTE></P><PCLASS="para">The <CODECLASS="replaceable"><I>string</I></CODE> is the name of the file that you are asking<BCLASS="emphasis.bold">archie</B>to find. It can be the exact filename, a substring of thename, or a regular expression.</P><PCLASS="para">The <EMCLASS="emphasis">options</EM> control how the <EMCLASS="emphasis">string</EM> is interpreted. The<BCLASS="emphasis.bold">-e</B>option searches for a filename that exactly matches the string; the<BCLASS="emphasis.bold">-s</B> option matches on anyrecord that contains the string as any part of the filename; and the<BCLASS="emphasis.bold">-r</B> option interprets the string as a UNIX regular expressionwhen looking for matches.</P><PCLASS="para">The following example uses the <BCLASS="emphasis.bold">archie</B> client to search for sitesfrom which the <BCLASS="emphasis.bold">ppp</B> software can be retrieved. The search uses aregular expression that will match any compressed <BCLASS="emphasis.bold">tar</B> file with aname that starts with <BCLASS="emphasis.bold">ppp</B>.</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">% <CODECLASS="userinput"><B>archie -r '^ppp.*\.tar\.Z' &gt; ppp.locations</B></CODE></PRE></BLOCKQUOTE></P><PCLASS="para">&#13;Our example stores <BCLASS="emphasis.bold">archie</B>'s output in the file <EMCLASS="emphasis">ppp.locations</EM>.You can then examine <EMCLASS="emphasis">ppp.locations</EM> to find the closest FTPserver that has the latest version of the <BCLASS="emphasis.bold">ppp</B> tar file.Redirecting the output to a file is usually a good idea because<BCLASS="emphasis.bold">archie</B> often produces a lot of output. By default, the <BCLASS="emphasis.bold">archie</B>client will return as many as 95 matches to the search. To limit thenumber of matches returned, use the option <BCLASS="emphasis.bold">-m</B><EMCLASS="emphasis">n</EM>, where <EMCLASS="emphasis">n</EM>is the maximum number of matches <BCLASS="emphasis.bold">archie</B> should return. For example,<BCLASS="emphasis.bold">-m</B>5 limits the search to five matches.<ACLASS="indexterm"NAME="AUTOID-19023"></A><ACLASS="indexterm"NAME="AUTOID-19024"></A><ACLASS="indexterm"NAME="AUTOID-19025"></A></P><PCLASS="para">The <BCLASS="emphasis.bold">archie</B> database is frequently out-of-date or dominated by obscureFTP servers that have poor connectivity. This limits its utility. Butsometimes <BCLASS="emphasis.bold">archie</B> is the only place you have to start your search fora file.</P></DIV></DIV></DIV><DIVCLASS="htmlnav"><P></P><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch13_02.htm"TITLE="13.2 Anonymous FTP "><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 13.2 Anonymous FTP "BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="book"HREF="index.htm"TITLE="TCP/IP Network Administration"><IMGSRC="../gifs/txthome.gif"ALT="TCP/IP Network Administration"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch13_04.htm"TITLE="13.4 Retrieving RFCs "><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 13.4 Retrieving RFCs "BORDER="0"></A></TD></TR><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172">13.2 Anonymous FTP </TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="index"HREF="index/idx_0.htm"TITLE="Book Index"><IMGSRC="../gifs/index.gif"ALT="Book Index"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172">13.4 Retrieving RFCs </TD></TR></TABLE><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><PCLASS="nav"><FONTSIZE="-1">[ <AHREF="../index.htm"TITLE="The Networking CD Bookshelf">Library Home</A> | <AHREF="../dnsbind/index.htm"TITLE="DNS &amp; BIND">DNS &amp; BIND</A> | <AHREF="index.htm"TITLE="TCP/IP Network Administration">TCP/IP</A> | <AHREF="../sendmail/index.htm"TITLE="sendmail">sendmail</A> | <AHREF="../smdref/index.htm"TITLE="sendmail Desktop Reference">sendmail Reference</A> | <AHREF="../firewall/index.htm"TITLE="Building Internet Firewalls">Firewalls</A> | <AHREF="../puis/index.htm"TITLE="Practical UNIX &amp; Internet Security">Practical Security</A> ]</FONT></P></DIV></BODY></HTML>