<HTML><HEAD><TITLE>[Appendix A] A.7 The Future of the Korn Shell</TITLE><METANAME="DC.title"CONTENT="Learning the Korn Shell"><METANAME="DC.creator"CONTENT="Bill Rosenblatt"><METANAME="DC.publisher"CONTENT="O'Reilly &amp; Associates, Inc."><METANAME="DC.date"CONTENT="1998-08-03T21:18:38Z"><METANAME="DC.type"CONTENT="Text.Monograph"><METANAME="DC.format"CONTENT="text/html"SCHEME="MIME"><METANAME="DC.source"CONTENT="1-56592-054-6"SCHEME="ISBN"><METANAME="DC.language"CONTENT="en-US"><METANAME="generator"CONTENT="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><LINKREV="made"HREF="mailto:online-books@oreilly.com"TITLE="Online Books Comments"><LINKREL="up"HREF="appa_01.htm"TITLE="A. Related Shells"><LINKREL="prev"HREF="appa_06.htm"TITLE="A.6 Workalikes on PC Platforms"><LINKREL="next"HREF="appb_01.htm"TITLE="B. Reference Lists"></HEAD><BODYBGCOLOR="#FFFFFF"TEXT="#000000"><DIVCLASS="htmlnav"><H1><IMGSRC="gifs/smbanner.gif"ALT="Learning the Korn Shell"USEMAP="#srchmap"BORDER="0"></H1><MAPNAME="srchmap"><AREASHAPE="RECT"COORDS="0,0,466,66"HREF="index.htm"ALT="Learning the Korn Shell"><AREASHAPE="RECT"COORDS="467,0,514,18"HREF="../search/ksrch.htm"ALT="Search this book"></MAP><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="appa_06.htm"TITLE="A.6 Workalikes on PC Platforms"><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: A.6 Workalikes on PC Platforms"BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><B><FONTFACE="ARIEL,HELVETICA,HELV,SANSERIF"SIZE="-1">Appendix A<BR>Related Shells</FONT></B></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="APPENDIX"HREF="appb_01.htm"TITLE="B. Reference Lists"><IMGSRC="../gifs/txtnexta.gif"ALT="Next: B. Reference Lists"BORDER="0"></A></TD></TR></TABLE>&nbsp;<HRALIGN="LEFT"WIDTH="515"TITLE="footer"></DIV><DIVCLASS="SECT1"><H2CLASS="sect1"><ACLASS="title"NAME="KSH-APA-SECT-7">A.7 The Future of the Korn Shell</A></H2><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-18060"></A>David Korn continues to enhance the Korn shell at AT&amp;T Bell Labs.At this writing, a new release is in beta test-usually thefinal step before a piece of software is released.  <ACLASS="indexterm"NAME="AUTOID-18062"></A><ACLASS="indexterm"NAME="AUTOID-18064"></A><ACLASS="indexterm"NAME="AUTOID-18066"></A>However,negotiations between AT&amp;T and USL (now Novell UNIX Systems Group) overdistribution rights could very well postpone the new shell'spublic release for a couple of years or more.</P><PCLASS="para">Nevertheless, the new Korn shell has significant enhancementsthat make it worth looking forward to. These features are subjectto change between the time of this writing and the new shell's publicrelease. Here are some highlights:<ACLASS="indexterm"NAME="KSH-APA-IX-NEXT-RELEASE-NEW-FEATURES"></A><ACLASS="indexterm"NAME="KSH-APA-IX-NEW-FEATURES-IN-NEXT-RELEASE"></A></P><ULCLASS="itemizedlist"><LICLASS="listitem"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-18077"></A><ACLASS="indexterm"NAME="AUTOID-18080"></A>The ability to customize key bindings, as in <EMCLASS="emphasis">bash</EM> and <EMCLASS="emphasis">pdksh</EM> but applicable tovi- as well as emacs-mode.  <ACLASS="indexterm"NAME="AUTOID-18085"></A>This is implemented as another &quot;fake signal&quot; trap (on keystrokes), soit's extremely flexible.</P></LI><LICLASS="listitem"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-18090"></A><ACLASS="indexterm"NAME="AUTOID-18093"></A>Many new customization variables and options.</P></LI><LICLASS="listitem"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-18098"></A>A greatly expanded set of string operators, providingsubstrings, substitutions, and other functionality.</P></LI><LICLASS="listitem"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-18103"></A><ACLASS="indexterm"NAME="AUTOID-18106"></A>An enhanced array variable facility that provides for associative arrays, which can be addressed by theircontents rather than by indices.</P></LI><LICLASS="listitem"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-18111"></A>Better prompt string customization capabilities(with command substitution and arithmetic expression evaluation).</P></LI><LICLASS="listitem"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-18117"></A><ACLASS="indexterm"NAME="AUTOID-18120"></A>Floating point (real number) arithmetic.</P></LI><LICLASS="listitem"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-18125"></A>An arithmetic <BCLASS="emphasis.bold">for</B> loop in the style of the Cprogramming language.</P></LI><LICLASS="listitem"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-18131"></A><ACLASS="indexterm"NAME="AUTOID-18133"></A>A new option to <BCLASS="emphasis.bold">print</B> that allows C language<BCLASS="emphasis.bold">printf()</B>-style output formatting.</P></LI><LICLASS="listitem"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-18140"></A>The ability to add new built-in commands, on systemsthat support dynamic loading (the <EMCLASS="emphasis">dlopen()</EM> system call).</P></LI><LICLASS="listitem"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-18146"></A>More user control over command lookup order,as in the POSIX standard and <EMCLASS="emphasis">bash</EM>.</P></LI><LICLASS="listitem"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-18153"></A>The ability to set timed &quot;alarms&quot; (with the ALRM signal).</P></LI><LICLASS="listitem"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-18158"></A>Expanded debugging support through additional fake signal traps.</P></LI><LICLASS="listitem"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-18163"></A>Online help for built-in commands through a standard<BCLASS="emphasis.bold">-</B><CODECLASS="literal">?</CODE> option.</P></LI></UL><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-18169"></A><ACLASS="indexterm"NAME="AUTOID-18170"></A><ACLASS="indexterm"NAME="KSH-APA-IX-NEXT-RELEASE-INCOMPATIBILITIES"></A><ACLASS="indexterm"NAME="KSH-APA-IX-INCOMPATIBILITES-IN-NEXT-RELEASE"></A>The next release is expected to be incompatible withthe 1988 Korn shell in a few ways, some of which arenecessary for POSIX compliance (refer to the sectionon POSIX in this Appendix for more details):</P><ULCLASS="itemizedlist"><LICLASS="listitem"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-18179"></A>The <BCLASS="emphasis.bold">alias</B> command will never display trackedaliases unless you specify the option <BCLASS="emphasis.bold">-t</B>.</P></LI><LICLASS="listitem"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-18187"></A>Functions defined with <EMCLASS="emphasis">fname()</EM> (the syntax not used in thisbook) will have weakerPOSIX-compliant semantics. However, functions definedwith <BCLASS="emphasis.bold">function</B> <EMCLASS="emphasis">fname</EM> will remain the same.</P></LI><LICLASS="listitem"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-18195"></A><ACLASS="indexterm"NAME="AUTOID-18198"></A>Tilde expansion can take place inside <BCLASS="emphasis.bold">${</B>...<BCLASS="emphasis.bold">}</B>-stylevariable expressions, whereas in the 1988 Korn shell,tildes in these expressions are treated literally.</P></LI><LICLASS="listitem"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-18205"></A><BCLASS="emphasis.bold">!</B> will be a keyword, as it is in the POSIX standard.</P></LI><LICLASS="listitem"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-18211"></A><ACLASS="indexterm"NAME="AUTOID-18215"></A><ACLASS="indexterm"NAME="AUTOID-18218"></A><ACLASS="indexterm"NAME="AUTOID-18221"></A><ACLASS="indexterm"NAME="AUTOID-18225"></A><ACLASS="indexterm"NAME="AUTOID-18228"></A><ACLASS="indexterm"NAME="AUTOID-18232"></A><ACLASS="indexterm"NAME="AUTOID-18235"></A>Command substitution and arithmetic expression evaluation (in addition to parameter expansion)will be performed on the variables <BCLASS="emphasis.bold">PS1</B>, <BCLASS="emphasis.bold">PS3</B>, and <BCLASS="emphasis.bold">ENV</B>when they are expanded. This will allow for more flexiblecustomization of prompt strings and environment files.<ACLASS="indexterm"NAME="AUTOID-18242"></A>It also means that grave accents (<CODECLASS="literal">`</CODE>)and <BCLASS="emphasis.bold">$(</B> must be quoted to be taken literally.</P></LI><LICLASS="listitem"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-18248"></A><ACLASS="indexterm"NAME="AUTOID-18251"></A><ACLASS="indexterm"NAME="AUTOID-18254"></A>Output of the built-in commands <BCLASS="emphasis.bold">set</B>, <BCLASS="emphasis.bold">typeset</B>,and <BCLASS="emphasis.bold">alias</B> will change so that any words containingspecial characters are single-quoted-so that these commands'output can be used directly for input.</P></LI><LICLASS="listitem"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-18262"></A>A new expansion operator, <BCLASS="emphasis.bold">$</B><CODECLASS="literal">'</CODE><BCLASS="emphasis.bold">...</B><CODECLASS="literal">'</CODE>, is used todelimit strings that conform to the ANSI C language standardfor character strings. In the 1988 Korn shell, <BCLASS="emphasis.bold">$</B><CODECLASS="literal">'</CODE> causesthe dollar sign to be treated literally; in future releases,it must be backslash-escaped.</P></LI><LICLASS="listitem"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-18273"></A><BCLASS="emphasis.bold">command</B> will be a built-in command, as in POSIX.</P></LI><LICLASS="listitem"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-18279"></A>Command lookup order will change so that built-in commandswill be treated as if they were installed in <EMCLASS="emphasis">/bin</EM>, i.e.,will be found at the same time as <EMCLASS="emphasis">/bin</EM> is searchedwhen the shell goes through your <BCLASS="emphasis.bold">PATH</B>.The rules will also change to comply with the POSIXstandard that allows certainbuilt-in commands to take precedence over functions.</P></LI><LICLASS="listitem"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-18288"></A><ACLASS="indexterm"NAME="AUTOID-18291"></A><ACLASS="indexterm"NAME="AUTOID-18294"></A><ACLASS="indexterm"NAME="AUTOID-18297"></A>Signal traps will propagate to subshells (whether nested or shellscripts invoked from shells) until the subshell issues a <BCLASS="emphasis.bold">trap</B>command (on any signal). Currently, traps donot propagate to subshells; see <ACLASS="xref"HREF="ch08_01.htm"TITLE="Process Handling">Chapter 8</A>.</P></LI><LICLASS="listitem"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-18304"></A><ACLASS="indexterm"NAME="AUTOID-18307"></A>The built-in variable <BCLASS="emphasis.bold">ERRNO</B> will be dropped;exit statuses will reflect system call error numbers.<ACLASS="indexterm"NAME="AUTOID-18310"></A><ACLASS="indexterm"NAME="AUTOID-18311"></A></P></LI></UL><PCLASS="para"><ACLASS="indexterm"NAME="KSH-APA-IX-NEXT-RELEASE-OBSOLETE-FEATURES-IN"></A><ACLASS="indexterm"NAME="KSH-APA-IX-OBSOLETE-FEATURES-IN-NEXT-RELEASE"></A>Finally, the following features are expected eventually to become obsolete:</P><ULCLASS="itemizedlist"><LICLASS="listitem"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-18321"></A>The command <BCLASS="emphasis.bold">fc</B> will be renamed <BCLASS="emphasis.bold">hist</B>;the built-in variable <BCLASS="emphasis.bold">FCEDIT</B> will be renamed<BCLASS="emphasis.bold">HISTEDIT</B>.</P></LI><LICLASS="listitem"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-18330"></A><ACLASS="indexterm"NAME="AUTOID-18334"></A>The <BCLASS="emphasis.bold">-t</B> option to <BCLASS="emphasis.bold">alias</B>, <BCLASS="emphasis.bold">set -h</B>, and<BCLASS="emphasis.bold">set -o trackall</B>. Alias tracking will always be on.</P></LI><LICLASS="listitem"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-18344"></A>The <BCLASS="emphasis.bold">-k</B> or <BCLASS="emphasis.bold">-o keyword</B> option.This will always be off (see <ACLASS="xref"HREF="ch03_01.htm"TITLE="Customizing Your Environment">Chapter 3</A>).</P></LI><LICLASS="listitem"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-18353"></A>Grave accents (<CODECLASS="literal">`</CODE>) for command substitution.Use <BCLASS="emphasis.bold">$(</B>...<BCLASS="emphasis.bold">)</B> instead.</P></LI><LICLASS="listitem"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-18362"></A>The <BCLASS="emphasis.bold">-a</B> (file existence)condition test will be renamed <BCLASS="emphasis.bold">-e</B>,to avoid clashing with the <BCLASS="emphasis.bold">-a</B> operator (logical &quot;and&quot;)in the old <EMCLASS="emphasis">test</EM> or <BCLASS="emphasis.bold">[</B>...<BCLASS="emphasis.bold">]</B> syntax.</P></LI><LICLASS="listitem"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-18374"></A>The <BCLASS="emphasis.bold">=</B> pattern-matching operator in <BCLASS="emphasis.bold">[[</B>...<BCLASS="emphasis.bold">]]</B> condition testswill be replaced by <BCLASS="emphasis.bold">==</B> for better syntactic alignmentwith the C language.</P></LI><LICLASS="listitem"><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-18384"></A>The arithmetic comparisons <BCLASS="emphasis.bold">-eq</B>, <BCLASS="emphasis.bold">-lt</B>, etc.Use <BCLASS="emphasis.bold">((</B>...<BCLASS="emphasis.bold">))</B> instead.<ACLASS="indexterm"NAME="AUTOID-18392"></A><ACLASS="indexterm"NAME="AUTOID-18393"></A><ACLASS="indexterm"NAME="AUTOID-18394"></A></P></LI></UL></DIV><DIVCLASS="htmlnav"><P></P><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="appa_06.htm"TITLE="A.6 Workalikes on PC Platforms"><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: A.6 Workalikes on PC Platforms"BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="book"HREF="index.htm"TITLE="Learning the Korn Shell"><IMGSRC="../gifs/txthome.gif"ALT="Learning the Korn Shell"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="APPENDIX"HREF="appb_01.htm"TITLE="B. Reference Lists"><IMGSRC="../gifs/txtnexta.gif"ALT="Next: B. Reference Lists"BORDER="0"></A></TD></TR><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172">A.6 Workalikes on PC Platforms</TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="index"HREF="index/idx_0.htm"TITLE="Book Index"><IMGSRC="../gifs/index.gif"ALT="Book Index"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172">B. Reference Lists</TD></TR></TABLE><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><IMGSRC="../gifs/smnavbar.gif"USEMAP="#map"BORDER="0"ALT="The UNIX CD Bookshelf Navigation"><MAPNAME="map"><AREASHAPE="RECT"COORDS="0,0,73,21"HREF="../index.htm"ALT="The UNIX CD Bookshelf"><AREASHAPE="RECT"COORDS="74,0,163,21"HREF="../upt/index.htm"ALT="UNIX Power Tools"><AREASHAPE="RECT"COORDS="164,0,257,21"HREF="../unixnut/index.htm"ALT="UNIX in a Nutshell"><AREASHAPE="RECT"COORDS="258,0,321,21"HREF="../vi/index.htm"ALT="Learning the vi Editor"><AREASHAPE="RECT"COORDS="322,0,378,21"HREF="../sedawk/index.htm"ALT="sed &amp; awk"><AREASHAPE="RECT"COORDS="379,0,438,21"HREF="index.htm"ALT="Learning the Korn Shell"><AREASHAPE="RECT"COORDS="439,0,514,21"HREF="../lrnunix/index.htm"ALT="Learning the UNIX Operating System"></MAP></DIV></BODY></HTML>