<HTML><HEAD><TITLE>[Chapter 10] Korn Shell Administration</TITLE><METANAME="DC.title"CONTENT="Learning the Korn Shell"><METANAME="DC.creator"CONTENT="Bill Rosenblatt"><METANAME="DC.publisher"CONTENT="O'Reilly &amp; Associates, Inc."><METANAME="DC.date"CONTENT="1998-08-03T21:16:59Z"><METANAME="DC.type"CONTENT="Text.Monograph"><METANAME="DC.format"CONTENT="text/html"SCHEME="MIME"><METANAME="DC.source"CONTENT="1-56592-054-6"SCHEME="ISBN"><METANAME="DC.language"CONTENT="en-US"><METANAME="generator"CONTENT="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><LINKREV="made"HREF="mailto:online-books@oreilly.com"TITLE="Online Books Comments"><LINKREL="up"HREF="index.htm"TITLE="Learning the Korn Shell"><LINKREL="prev"HREF="ch09_02.htm"TITLE="9.2 A Korn Shell Debugger"><LINKREL="next"HREF="ch10_02.htm"TITLE="10.2 Environment Customization"></HEAD><BODYBGCOLOR="#FFFFFF"TEXT="#000000"><DIVCLASS="htmlnav"><H1><IMGSRC="gifs/smbanner.gif"ALT="Learning the Korn Shell"USEMAP="#srchmap"BORDER="0"></H1><MAPNAME="srchmap"><AREASHAPE="RECT"COORDS="0,0,466,66"HREF="index.htm"ALT="Learning the Korn Shell"><AREASHAPE="RECT"COORDS="467,0,514,18"HREF="../search/ksrch.htm"ALT="Search this book"></MAP><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch09_02.htm"TITLE="9.2 A Korn Shell Debugger"><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 9.2 A Korn Shell Debugger"BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><B><FONTFACE="ARIEL,HELVETICA,HELV,SANSERIF"SIZE="-1">Chapter 10</FONT></B></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch10_02.htm"TITLE="10.2 Environment Customization"><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 10.2 Environment Customization"BORDER="0"></A></TD></TR></TABLE>&nbsp;<HRALIGN="LEFT"WIDTH="515"TITLE="footer"></DIV><DIVCLASS="CHAPTER"><H1CLASS="chapter"><ACLASS="title"NAME="KSH-CH10-KORNADMI">10. Korn Shell Administration</A></H1><DIVCLASS="htmltoc"><P><B>Contents:</B><BR><ACLASS="sect1"HREF="#KSH-CH-10-SECT-1"TITLE="10.1 Installing the Korn Shell as the Standard Shell">Installing the Korn Shell as the Standard Shell</A><BR><ACLASS="sect1"HREF="ch10_02.htm"TITLE="10.2 Environment Customization">Environment Customization</A><BR><ACLASS="sect1"HREF="ch10_03.htm"TITLE="10.3 System Security Features">System Security Features</A></P><P></P></DIV><PCLASS="para">System administrators use the shell as part of their job ofsetting up a system-wide environment for all users. In this chapter, we'll discuss the Korn shell's featuresthat relate to this task from two perspectives:customization that is available to all users and system security.We assume that you already know the basics of UNIXsystem administration.[1]</P><BLOCKQUOTECLASS="footnote"><PCLASS="para">[1] A good source of information on system administrationis <EMCLASS="emphasis">Essential System Administration</EM>, a NutshellHandbook from O'Reilly &amp; Associates, Inc., by AEleen Frisch.</P></BLOCKQUOTE><DIVCLASS="sect1"><H2CLASS="sect1"><ACLASS="title"NAME="KSH-CH-10-SECT-1">10.1 Installing the Korn Shell as the Standard Shell</A></H2><PCLASS="para"><ACLASS="indexterm"NAME="KSH-CH-10-IX-INSTALLING-KSH-AS-BINSH"></A><ACLASS="indexterm"NAME="AUTOID-16145"></A>As a prelude to system-wide customization, we want to emphasize something about the Kornshell that doesn't apply to most other shells: you caninstall it as if it were the standard Bourne shell, i.e.,as <EMCLASS="emphasis">/bin/sh</EM>. Just save the real Bourne shell asanother filename, such as <EMCLASS="emphasis">/bin/bsh</EM>, in case anyone actuallyneeds it for anything (which is doubtful), then rename yourKorn shell as <EMCLASS="emphasis">/bin/sh</EM>.</P><PCLASS="para">Many installations have done this with absolutely no ill effects. Not only does this make the Korn shell yoursystem's standard login shell, but it also makes mostexisting Bourne shell scripts run faster, and it hassecurity advantages that we'll see later in this chapter.</P><PCLASS="para"><ACLASS="indexterm"NAME="KSH-CH-10-IX-HAT-PIPE-CHAR-IN-BOURNE-SHELL"></A><ACLASS="indexterm"NAME="AUTOID-16155"></A>As we will see in <ACLASS="xref"HREF="appa_01.htm"TITLE="Related Shells">Appendix A, Related Shells</A>, the Korn shellis backward-compatible with the Bourne shell exceptthat it doesn't support <BCLASS="emphasis.bold">^</B> as a synonym for the pipecharacter <BCLASS="emphasis.bold">|</B>.  Unless you have an ancient UNIX system, or you have some very, very old shell scripts, you needn't worry about this.</P><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-16162"></A><ACLASS="indexterm"NAME="AUTOID-16164"></A><ACLASS="indexterm"NAME="AUTOID-16167"></A>But if you want to be absolutely sure, simply search throughall shell scripts in all directories in your <BCLASS="emphasis.bold">PATH</B>.An easy way to do this is to use the <EMCLASS="emphasis">file</EM> command,which we saw in <ACLASS="xref"HREF="ch05_01.htm"TITLE="Flow Control">Chapter 5, Flow Control</A> and <ACLASS="xref"HREF="ch09_01.htm"TITLE="Debugging Shell Programs">Chapter 9, Debugging Shell Programs</A>.<EMCLASS="emphasis">file</EM> prints &quot;executableshell script&quot; when given the name of one.[2]Here is a script that looks for <BCLASS="emphasis.bold">^</B> in shell scripts in every directory in your <BCLASS="emphasis.bold">PATH</B>:</P><BLOCKQUOTECLASS="footnote"><PCLASS="para">[2] The exact message varies from system to system;make sure that yours prints this message when given thename of a shell script. If not, just substitute the messageyour <EMCLASS="emphasis">file</EM> command prints for &quot;shell script&quot; in the code below.</P></BLOCKQUOTE><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">IFS=:for d in $PATH; do    print checking $d:    cd $d    scripts=$(file * | grep 'shell script' | cut -d: -f1)    for f in $scripts; do        grep '' $f /dev/null    donedone</PRE></BLOCKQUOTE></P><PCLASS="para">The first line of this script make it possible to use<BCLASS="emphasis.bold">$PATH</B> as an item list in the <BCLASS="emphasis.bold">for</B> loop.<ACLASS="indexterm"NAME="AUTOID-16184"></A><ACLASS="indexterm"NAME="AUTOID-16186"></A><ACLASS="indexterm"NAME="AUTOID-16188"></A>For each directory, it <BCLASS="emphasis.bold">cd</B>s thereand finds all shell scripts by piping the <EMCLASS="emphasis">file</EM>command into <EMCLASS="emphasis">grep</EM> and then, to extract the filenameonly, into <EMCLASS="emphasis">cut</EM>. Then for each shell script,it searches for the <BCLASS="emphasis.bold">^</B> character.[3]</P><BLOCKQUOTECLASS="footnote"><PCLASS="para">[3] <ACLASS="indexterm"NAME="AUTOID-16197"></A>The inclusion of <EMCLASS="emphasis">/dev/null</EM> in the <EMCLASS="emphasis">grep</EM>command is a kludge that forces <EMCLASS="emphasis">grep</EM>to print the names of files that contain a match, evenif there is only one such file in a given directory.</P></BLOCKQUOTE><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-16203"></A><ACLASS="indexterm"NAME="AUTOID-16206"></A><ACLASS="indexterm"NAME="AUTOID-16208"></A>If you run this script, you will probably find severaloccurrences of <BCLASS="emphasis.bold">^</B>-but these should beused within regular expressions in <EMCLASS="emphasis">grep</EM>, <EMCLASS="emphasis">sed</EM>,or <EMCLASS="emphasis">awk</EM> commands, not as pipe characters.Assuming this is the case, it is safe for you to installthe Korn shell as <EMCLASS="emphasis">/bin/sh</EM>.<ACLASS="indexterm"NAME="AUTOID-16215"></A><ACLASS="indexterm"NAME="AUTOID-16216"></A></P></DIV></DIV><DIVCLASS="htmlnav"><P></P><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch09_02.htm"TITLE="9.2 A Korn Shell Debugger"><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 9.2 A Korn Shell Debugger"BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="book"HREF="index.htm"TITLE="Learning the Korn Shell"><IMGSRC="../gifs/txthome.gif"ALT="Learning the Korn Shell"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch10_02.htm"TITLE="10.2 Environment Customization"><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 10.2 Environment Customization"BORDER="0"></A></TD></TR><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172">9.2 A Korn Shell Debugger</TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="index"HREF="index/idx_0.htm"TITLE="Book Index"><IMGSRC="../gifs/index.gif"ALT="Book Index"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172">10.2 Environment Customization</TD></TR></TABLE><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><IMGSRC="../gifs/smnavbar.gif"USEMAP="#map"BORDER="0"ALT="The UNIX CD Bookshelf Navigation"><MAPNAME="map"><AREASHAPE="RECT"COORDS="0,0,73,21"HREF="../index.htm"ALT="The UNIX CD Bookshelf"><AREASHAPE="RECT"COORDS="74,0,163,21"HREF="../upt/index.htm"ALT="UNIX Power Tools"><AREASHAPE="RECT"COORDS="164,0,257,21"HREF="../unixnut/index.htm"ALT="UNIX in a Nutshell"><AREASHAPE="RECT"COORDS="258,0,321,21"HREF="../vi/index.htm"ALT="Learning the vi Editor"><AREASHAPE="RECT"COORDS="322,0,378,21"HREF="../sedawk/index.htm"ALT="sed &amp; awk"><AREASHAPE="RECT"COORDS="379,0,438,21"HREF="index.htm"ALT="Learning the Korn Shell"><AREASHAPE="RECT"COORDS="439,0,514,21"HREF="../lrnunix/index.htm"ALT="Learning the UNIX Operating System"></MAP></DIV></BODY></HTML>