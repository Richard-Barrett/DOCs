<HTML><HEAD><TITLE>[Chapter 4] 4.5 Command History</TITLE><METANAME="DC.title"CONTENT="UNIX in a Nutshell: System V Edition"><METANAME="DC.creator"CONTENT="Daniel Gilly &amp; the Staff of O'Reilly &amp; Associates"><METANAME="DC.publisher"CONTENT="O'Reilly &amp; Associates, Inc."><METANAME="DC.date"CONTENT="1998-08-06T21:58:35Z"><METANAME="DC.type"CONTENT="Text.Monograph"><METANAME="DC.format"CONTENT="text/html"SCHEME="MIME"><METANAME="DC.source"CONTENT="1-56592-001-5"SCHEME="ISBN"><METANAME="DC.language"CONTENT="en-US"><METANAME="generator"CONTENT="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><LINKREV="made"HREF="mailto:online-books@oreilly.com"TITLE="Online Books Comments"><LINKREL="up"HREF="ch04_01.htm"TITLE="4. The Bourne Shell and Korn Shell"><LINKREL="prev"HREF="ch04_04.htm"TITLE="4.4 Arithmetic Expressions"><LINKREL="next"HREF="ch04_06.htm"TITLE="4.6 Built-in Commands (Bourne and Korn Shell)"></HEAD><BODYBGCOLOR="#FFFFFF"TEXT="#000000"><DIVCLASS="htmlnav"><H1><IMGSRC="gifs/smbanner.gif"ALT="UNIX in a Nutshell: System V Edition"USEMAP="#srchmap"BORDER="0"></H1><MAPNAME="srchmap"><AREASHAPE="RECT"COORDS="0,0,466,71"HREF="index.htm"ALT="UNIX in a Nutshell: System V Edition"><AREASHAPE="RECT"COORDS="467,0,514,18"HREF="../search/usrch.htm"ALT="Search this book"></MAP><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch04_04.htm"TITLE="4.4 Arithmetic Expressions"><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 4.4 Arithmetic Expressions"BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><B><FONTFACE="ARIEL,HELVETICA,HELV,SANSERIF"SIZE="-1">Chapter 4<BR>The Bourne Shell and Korn Shell</FONT></B></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch04_06.htm"TITLE="4.6 Built-in Commands (Bourne and Korn Shell)"><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 4.6 Built-in Commands (Bourne and Korn Shell)"BORDER="0"></A></TD></TR></TABLE>&nbsp;<HRALIGN="LEFT"WIDTH="515"TITLE="footer"></DIV><DIVCLASS="SECT1"><H2CLASS="sect1"><ACLASS="title"NAME="UNUT-CH-4-SECT-5">4.5 Command History</A></H2><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-18520"></A><ACLASS="indexterm"NAME="AUTOID-18523"></A>The Korn shell lets you display or modify previous commands.This is similar to the C shell's history mechanism.Commands in the history list can be modified using:</P><ULCLASS="itemizedlist"><LICLASS="listitem"><PCLASS="para">Line-edit mode</P></LI><LICLASS="listitem"><PCLASS="para">The <BCLASS="emphasis.bold">fc</B> command</P></LI></UL><DIVCLASS="sect2"><H3CLASS="sect2"><ACLASS="title"NAME="UNUT-CH-4-SECT-5.1">4.5.1 Line-edit Mode</A></H3><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-18535"></A>Line-edit mode lets you emulate many features of the vi or emacs editor.The history list is treated like a file.  When the editoris invoked, you type editing keystrokes to move tothe command line you want to execute.  You can alsochange the line before executing it.  When you're readyto issue the command, press RETURN.</P><PCLASS="para">Line-edit mode can be started in several ways.  For example, these areequivalent:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">$ <CODECLASS="userinput"><B>VISUAL=vi</B></CODE>$ <CODECLASS="userinput"><B>EDITOR=vi</B></CODE>$ <CODECLASS="userinput"><B>set -o vi</B></CODE>	<ICLASS="lineannotation">Overrides value of</I><CODECLASS="literal"> VISUAL </CODE>or<CODECLASS="literal"> EDITOR</CODE></PRE></BLOCKQUOTE></P><PCLASS="para">Note that vi starts in input mode; to type a vi command, press ESCAPE first.</P><DIVCLASS="sect3"><H4CLASS="sect3"><ACLASS="title"NAME="UNUT-CH-4-SECT-5.1.1">4.5.1.1 Common Editing Keystrokes</A></H4><TABLECLASS="informaltable"><TBODYCLASS="tbody"><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><PCLASS="para"><EMCLASS="emphasis">vi</EM></P></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><PCLASS="para"><EMCLASS="emphasis">emacs</EM></P></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><PCLASS="para"><EMCLASS="emphasis">Result</EM></P></TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><PCLASS="para">k</P></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><PCLASS="para">CTRL-p</P></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><PCLASS="para">Get previous command.</P></TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><PCLASS="para">j</P></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><PCLASS="para">CTRL-n</P></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><PCLASS="para">Get next command.</P></TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><PCLASS="para">/<CODECLASS="replaceable"><I>string</I></CODE></P></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><PCLASS="para">CTRL-r <CODECLASS="replaceable"><I>string</I></CODE></P></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><PCLASS="para">Get previous command containing <CODECLASS="replaceable"><I>string</I></CODE>.</P></TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><PCLASS="para">h</P></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><PCLASS="para">CTRL-b</P></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><PCLASS="para">Move back one character.</P></TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><PCLASS="para">l</P></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><PCLASS="para">CTRL-f</P></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><PCLASS="para">Move forward one character.</P></TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><PCLASS="para">b</P></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><PCLASS="para">ESC-b</P></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><PCLASS="para">Move back one word.</P></TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><PCLASS="para">w</P></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><PCLASS="para">ESC-f</P></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><PCLASS="para">Move forward one word.</P></TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><PCLASS="para">X</P></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><PCLASS="para">DEL</P></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><PCLASS="para">Delete previous character.</P></TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><PCLASS="para">x</P></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><PCLASS="para">CTRL-d</P></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><PCLASS="para">Delete one character.</P></TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><PCLASS="para">dw</P></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><PCLASS="para">ESC-d</P></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><PCLASS="para">Delete word forward.</P></TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><PCLASS="para">db</P></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><PCLASS="para">ESC-h</P></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><PCLASS="para">Delete word back.</P></TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><PCLASS="para">xp</P></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><PCLASS="para">CTRL-t</P></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><PCLASS="para">Transpose two characters.</P></TD></TR></TBODY></TABLE></DIV></DIV><DIVCLASS="sect2"><H3CLASS="sect2"><ACLASS="title"NAME="UNUT-CH-4-SECT-5.2">4.5.2 The fc Command</A></H3><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-18652"></A>Use <BCLASS="emphasis.bold">fc -l</B> to list history commands and <BCLASS="emphasis.bold">fc -e</B> to edit them.  See the entry under built-in commands for more information.</P><DIVCLASS="sect3"><H4CLASS="sect3"><ACLASS="title"NAME="UNUT-CH-4-SECT-5.2.1">4.5.2.1 Examples</A></H4><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">$ <CODECLASS="userinput"><B>history</B></CODE>	<ICLASS="lineannotation">List the last 16 commands.</I>	$ <CODECLASS="userinput"><B>fc -l 20 30</B></CODE>	<ICLASS="lineannotation">List commands 20 through 30.</I>$ <CODECLASS="userinput"><B>fc -l -5</B></CODE>	<ICLASS="lineannotation">List the last five commands.</I>$ <CODECLASS="userinput"><B>fc -l cat</B></CODE>	<ICLASS="lineannotation">List the last command beginning with</I> cat.$ <CODECLASS="userinput"><B>fc -ln 5 &gt; doit</B></CODE>	<ICLASS="lineannotation">Save command 5 to file</I> doit.	$ <CODECLASS="userinput"><B>fc -e vi 5 20</B></CODE>	<ICLASS="lineannotation">Edit commands 5 through 20 using</I> vi.$ <CODECLASS="userinput"><B>fc -e emacs</B></CODE>	<ICLASS="lineannotation">Edit previous command using</I> emacs.$ <CODECLASS="userinput"><B>r</B></CODE>	<ICLASS="lineannotation">Re-execute previous command.</I>$ <CODECLASS="userinput"><B>r cat</B></CODE>	<ICLASS="lineannotation">Re-execute last</I> cat <ICLASS="lineannotation">command.</I><CODECLASS="literal">$</CODE> <CODECLASS="userinput"><B>r doc=Doc</B></CODE>	<ICLASS="lineannotation">Substitute, then re-execute last command.</I>$ <CODECLASS="userinput"><B>r chap=doc c</B></CODE>	<ICLASS="lineannotation">Re-execute last command that begins with</I> c,	<ICLASS="lineannotation">but change string</I> chap <ICLASS="lineannotation">to</I> doc.</PRE></BLOCKQUOTE></P></DIV></DIV></DIV><DIVCLASS="htmlnav"><P></P><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch04_04.htm"TITLE="4.4 Arithmetic Expressions"><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 4.4 Arithmetic Expressions"BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="book"HREF="index.htm"TITLE="UNIX in a Nutshell: System V Edition"><IMGSRC="../gifs/txthome.gif"ALT="UNIX in a Nutshell: System V Edition"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch04_06.htm"TITLE="4.6 Built-in Commands (Bourne and Korn Shell)"><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 4.6 Built-in Commands (Bourne and Korn Shell)"BORDER="0"></A></TD></TR><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172">4.4 Arithmetic Expressions</TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="index"HREF="index/idx_0.htm"TITLE="Book Index"><IMGSRC="../gifs/index.gif"ALT="Book Index"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172">4.6 Built-in Commands (Bourne and Korn Shell)</TD></TR></TABLE><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><IMGSRC="../gifs/smnavbar.gif"USEMAP="#map"BORDER="0"ALT="The UNIX CD Bookshelf Navigation"><MAPNAME="map"><AREASHAPE="RECT"COORDS="0,0,73,21"HREF="../index.htm"ALT="The UNIX CD Bookshelf"><AREASHAPE="RECT"COORDS="74,0,163,21"HREF="../upt/index.htm"ALT="UNIX Power Tools"><AREASHAPE="RECT"COORDS="164,0,257,21"HREF="index.htm"ALT="UNIX in a Nutshell"><AREASHAPE="RECT"COORDS="258,0,321,21"HREF="../vi/index.htm"ALT="Learning the vi Editor"><AREASHAPE="RECT"COORDS="322,0,378,21"HREF="../sedawk/index.htm"ALT="sed &amp; awk"><AREASHAPE="RECT"COORDS="379,0,438,21"HREF="../ksh/index.htm"ALT="Learning the Korn Shell"><AREASHAPE="RECT"COORDS="439,0,514,21"HREF="../lrnunix/index.htm"ALT="Learning the UNIX Operating System"></MAP></DIV></BODY></HTML>