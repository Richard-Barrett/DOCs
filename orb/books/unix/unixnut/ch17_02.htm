<HTML><HEAD><TITLE>[Chapter 17] 17.2 Basic Operation</TITLE><METANAME="DC.title"CONTENT="UNIX in a Nutshell: System V Edition"><METANAME="DC.creator"CONTENT="Daniel Gilly &amp; the Staff of O'Reilly &amp; Associates"><METANAME="DC.publisher"CONTENT="O'Reilly &amp; Associates, Inc."><METANAME="DC.date"CONTENT="1998-08-06T22:01:46Z"><METANAME="DC.type"CONTENT="Text.Monograph"><METANAME="DC.format"CONTENT="text/html"SCHEME="MIME"><METANAME="DC.source"CONTENT="1-56592-001-5"SCHEME="ISBN"><METANAME="DC.language"CONTENT="en-US"><METANAME="generator"CONTENT="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><LINKREV="made"HREF="mailto:online-books@oreilly.com"TITLE="Online Books Comments"><LINKREL="up"HREF="ch17_01.htm"TITLE="17. The SCCS Utility"><LINKREL="prev"HREF="ch17_01.htm"TITLE="17.1 Overview of Commands"><LINKREL="next"HREF="ch17_03.htm"TITLE="17.3 Identification Keywords"></HEAD><BODYBGCOLOR="#FFFFFF"TEXT="#000000"><DIVCLASS="htmlnav"><H1><IMGSRC="gifs/smbanner.gif"ALT="UNIX in a Nutshell: System V Edition"USEMAP="#srchmap"BORDER="0"></H1><MAPNAME="srchmap"><AREASHAPE="RECT"COORDS="0,0,466,71"HREF="index.htm"ALT="UNIX in a Nutshell: System V Edition"><AREASHAPE="RECT"COORDS="467,0,514,18"HREF="../search/usrch.htm"ALT="Search this book"></MAP><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch17_01.htm"TITLE="17.1 Overview of Commands"><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 17.1 Overview of Commands"BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><B><FONTFACE="ARIEL,HELVETICA,HELV,SANSERIF"SIZE="-1">Chapter 17<BR>The SCCS Utility</FONT></B></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch17_03.htm"TITLE="17.3 Identification Keywords"><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 17.3 Identification Keywords"BORDER="0"></A></TD></TR></TABLE>&nbsp;<HRALIGN="LEFT"WIDTH="515"TITLE="footer"></DIV><DIVCLASS="SECT1"><H2CLASS="sect1"><ACLASS="title"NAME="UNUT-CH-17-SECT-2">17.2 Basic Operation</A></H2><PCLASS="para">This subsection outlines the steps to follow when using SCCS:</P><ULCLASS="itemizedlist"><LICLASS="listitem"><PCLASS="para">Creating an SCCS file</P></LI><LICLASS="listitem"><PCLASS="para">Retrieving a file</P></LI><LICLASS="listitem"><PCLASS="para">Creating new releases and branches</P></LI><LICLASS="listitem"><PCLASS="para">Recording changes</P></LI></UL><DIVCLASS="sect2"><H3CLASS="sect2"><ACLASS="title"NAME="UNUT-CH-17-SECT-2.1">17.2.1 Creating an SCCS File</A></H3><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-38909"></A>The <BCLASS="emphasis.bold">admin</B> command with the <BCLASS="emphasis.bold">-i</B> option creates and initializes SCCS files.For example:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen"><CODECLASS="userinput"><B>admin -ich01 s.ch01</B></CODE></PRE></BLOCKQUOTE></P><PCLASS="para">creates a new SCCS file and initializes it with the contents of<BCLASS="emphasis.bold">ch01</B>, which will become <CODECLASS="replaceable"><I>delta 1.1</I></CODE>.  The message, &quot;No idkeywords (cm7)&quot; appears if you do not specify any keywords.  In general, &quot;id keywords&quot; refer to variablesin the files that are replaced with appropriate values by <BCLASS="emphasis.bold">get</B>,identifying the date and time of creation, the version retrieved, etc.  A listing of identification keywords occurs later in this section.</P><PCLASS="para">Once the <BCLASS="emphasis.bold">s.ch01</B> file is created, the original file <BCLASS="emphasis.bold">ch01</B>can be removed, since it can be easily regenerated with the <BCLASS="emphasis.bold">get</B> command.</P></DIV><DIVCLASS="sect2"><H3CLASS="sect2"><ACLASS="title"NAME="UNUT-CH-17-SECT-2.2">17.2.2 Retrieving a File</A></H3><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-38927"></A>The <BCLASS="emphasis.bold">get</B> command can retrieve any version of a file from SCCS.  Using the example above, you can retrieve <BCLASS="emphasis.bold">ch01</B>by entering:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen"><CODECLASS="userinput"><B>get -e s.ch01</B></CODE></PRE></BLOCKQUOTE></P><PCLASS="para">and the messages: </P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">1.1new delta 1.2272 lines</PRE></BLOCKQUOTE></P><PCLASS="para">may appear.  This indicates that you are &quot;getting&quot; <CODECLASS="replaceable"><I>delta 1.1</I></CODE>,and the resulting file has 272 lines of text.  When the file is<ACLASS="indexterm"NAME="AUTOID-38939"></A>reentered into the SCCS file <BCLASS="emphasis.bold">s.ch01</B> with the <BCLASS="emphasis.bold">delta</B> command,its changes are <CODECLASS="replaceable"><I>delta 1.2</I></CODE>.</P><PCLASS="para">The <BCLASS="emphasis.bold">-e</B> option indicates to SCCS that you intend to make more changes to the file and then reenter it into SCCS.  Without this option, you will receive the file with read-only permissions.The <BCLASS="emphasis.bold">-e</B> option, besides releasing the file with read-write permissions, also creates a file <BCLASS="emphasis.bold">p.</B><BCLASS="emphasis.bold">ch01</B>, which records information that will be used by SCCS when the file is returned.</P></DIV><DIVCLASS="sect2"><H3CLASS="sect2"><ACLASS="title"NAME="UNUT-CH-17-SECT-2.3">17.2.3 Creating New Releases and Branches</A></H3><PCLASS="para">The <BCLASS="emphasis.bold">-r</B> option to <BCLASS="emphasis.bold">get</B> tells SCCS what release andlevel number you want, but if no level is specified it defaultsto the highest level available.With the command:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen"><CODECLASS="userinput"><B>get -r3.2 ch01</B></CODE></PRE></BLOCKQUOTE></P><PCLASS="para">delta 3.2 will be the release.  However, the command:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen"><CODECLASS="userinput"><B>get -r3 ch01</B></CODE></PRE></BLOCKQUOTE></P><PCLASS="para">returns the highest-numbered level in release 3,for example <BCLASS="emphasis.bold">3.8</B>.  With the <BCLASS="emphasis.bold">-r</B>option omitted, <BCLASS="emphasis.bold">get</B> defaults to the highest release, highest level&nbsp;-  in other words, the latest version.</P><PCLASS="para">When major changes are in store for a file, you may want to begin a newrelease of the file.  You can do that by &quot;getting&quot; the file with thenext highest release number.  For example, if the latest release ofa file is 3.2, and you want to start release 4, enter:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen"><CODECLASS="userinput"><B>get -e -r4 ch01</B></CODE></PRE></BLOCKQUOTE></P><PCLASS="para">You will receive the message:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">3.2new delta 4.153 lines</PRE></BLOCKQUOTE></P><PCLASS="para">If you want to make a change to an older version of the same file, you canenter:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen"><CODECLASS="userinput"><B>get -e -r2.2 ch01</B></CODE></PRE></BLOCKQUOTE></P><PCLASS="para">and receive the message:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">2.2new delta 2.2.1.1121 lines</PRE></BLOCKQUOTE></P><PCLASS="para">You have now created a new branch from the trunk, stemming fromversion 2.2.  Changes in this deltawill not affect those in the trunk deltas, i.e., 2.3, 3.1, etc.</P></DIV><DIVCLASS="sect2"><H3CLASS="sect2"><ACLASS="title"NAME="UNUT-CH-17-SECT-2.4">17.2.4 Recording Changes</A></H3><PCLASS="para">Once changes have been made to the SCCS file, return it to SCCSwith the command:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen"><CODECLASS="userinput"><B>delta s.ch01</B></CODE></PRE></BLOCKQUOTE></P><PCLASS="para">You are prompted for comments on the changes.  The <BCLASS="emphasis.bold">delta</B><ACLASS="indexterm"NAME="AUTOID-38988"></A>command then does its own <BCLASS="emphasis.bold">get</B> and uses <BCLASS="emphasis.bold">diff</B> to compare the new version of the file with the most recent version.It then prints messages giving the new release numberand the number of lines that were inserted, deleted, and unchanged.</P></DIV></DIV><DIVCLASS="htmlnav"><P></P><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch17_01.htm"TITLE="17.1 Overview of Commands"><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 17.1 Overview of Commands"BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="book"HREF="index.htm"TITLE="UNIX in a Nutshell: System V Edition"><IMGSRC="../gifs/txthome.gif"ALT="UNIX in a Nutshell: System V Edition"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch17_03.htm"TITLE="17.3 Identification Keywords"><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 17.3 Identification Keywords"BORDER="0"></A></TD></TR><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172">17.1 Overview of Commands</TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="index"HREF="index/idx_0.htm"TITLE="Book Index"><IMGSRC="../gifs/index.gif"ALT="Book Index"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172">17.3 Identification Keywords</TD></TR></TABLE><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><IMGSRC="../gifs/smnavbar.gif"USEMAP="#map"BORDER="0"ALT="The UNIX CD Bookshelf Navigation"><MAPNAME="map"><AREASHAPE="RECT"COORDS="0,0,73,21"HREF="../index.htm"ALT="The UNIX CD Bookshelf"><AREASHAPE="RECT"COORDS="74,0,163,21"HREF="../upt/index.htm"ALT="UNIX Power Tools"><AREASHAPE="RECT"COORDS="164,0,257,21"HREF="index.htm"ALT="UNIX in a Nutshell"><AREASHAPE="RECT"COORDS="258,0,321,21"HREF="../vi/index.htm"ALT="Learning the vi Editor"><AREASHAPE="RECT"COORDS="322,0,378,21"HREF="../sedawk/index.htm"ALT="sed &amp; awk"><AREASHAPE="RECT"COORDS="379,0,438,21"HREF="../ksh/index.htm"ALT="Learning the Korn Shell"><AREASHAPE="RECT"COORDS="439,0,514,21"HREF="../lrnunix/index.htm"ALT="Learning the UNIX Operating System"></MAP></DIV></BODY></HTML>