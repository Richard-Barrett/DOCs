<HTML><HEAD><TITLE>[Chapter 18] 18.3 General RCS Specifications</TITLE><METANAME="DC.title"CONTENT="UNIX in a Nutshell: System V Edition"><METANAME="DC.creator"CONTENT="Daniel Gilly &amp; the Staff of O'Reilly &amp; Associates"><METANAME="DC.publisher"CONTENT="O'Reilly &amp; Associates, Inc."><METANAME="DC.date"CONTENT="1998-08-06T22:01:55Z"><METANAME="DC.type"CONTENT="Text.Monograph"><METANAME="DC.format"CONTENT="text/html"SCHEME="MIME"><METANAME="DC.source"CONTENT="1-56592-001-5"SCHEME="ISBN"><METANAME="DC.language"CONTENT="en-US"><METANAME="generator"CONTENT="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><LINKREV="made"HREF="mailto:online-books@oreilly.com"TITLE="Online Books Comments"><LINKREL="up"HREF="ch18_01.htm"TITLE="18. The RCS Utility"><LINKREL="prev"HREF="ch18_02.htm"TITLE="18.2 Basic Operation"><LINKREL="next"HREF="ch18_04.htm"TITLE="18.4 Conversion Guide for SCCS Users"></HEAD><BODYBGCOLOR="#FFFFFF"TEXT="#000000"><DIVCLASS="htmlnav"><H1><IMGSRC="gifs/smbanner.gif"ALT="UNIX in a Nutshell: System V Edition"USEMAP="#srchmap"BORDER="0"></H1><MAPNAME="srchmap"><AREASHAPE="RECT"COORDS="0,0,466,71"HREF="index.htm"ALT="UNIX in a Nutshell: System V Edition"><AREASHAPE="RECT"COORDS="467,0,514,18"HREF="../search/usrch.htm"ALT="Search this book"></MAP><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch18_02.htm"TITLE="18.2 Basic Operation"><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 18.2 Basic Operation"BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><B><FONTFACE="ARIEL,HELVETICA,HELV,SANSERIF"SIZE="-1">Chapter 18<BR>The RCS Utility</FONT></B></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch18_04.htm"TITLE="18.4 Conversion Guide for SCCS Users"><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 18.4 Conversion Guide for SCCS Users"BORDER="0"></A></TD></TR></TABLE>&nbsp;<HRALIGN="LEFT"WIDTH="515"TITLE="footer"></DIV><DIVCLASS="SECT1"><H2CLASS="sect1"><ACLASS="title"NAME="UNUT-CH-18-SECT-3">18.3 General RCS Specifications</A></H2><PCLASS="para">This subsection discusses:</P><ULCLASS="itemizedlist"><LICLASS="listitem"><PCLASS="para">Keyword substitution</P></LI><LICLASS="listitem"><PCLASS="para">Revision numbering</P></LI><LICLASS="listitem"><PCLASS="para">Specifying the date</P></LI><LICLASS="listitem"><PCLASS="para">Specifying states</P></LI><LICLASS="listitem"><PCLASS="para">Standard options and environment variables</P></LI></UL><DIVCLASS="sect2"><H3CLASS="sect2"><ACLASS="title"NAME="UNUT-CH-18-SECT-3.1">18.3.1 Keyword Substitution</A></H3><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-40327"></A><ACLASS="indexterm"NAME="AUTOID-40329"></A>RCS lets you place keyword variables in your working files.These variables are later expanded into revision notes.You can then use the notes either as embedded comments in the input file,or as text strings that appear when the output is printed.To create revision notes via keyword substitution,follow this procedure:</P><OLCLASS="orderedlist"><LICLASS="listitem"><PCLASS="para">In your working file, type any of the keywords listed below.</P></LI><LICLASS="listitem"><PCLASS="para">Check the file in.</P></LI><LICLASS="listitem"><PCLASS="para">Check the file out again.  Upon checkout, the <BCLASS="emphasis.bold">co</B> command expands each keyword to include its value.  That is, <BCLASS="emphasis.bold">co</B>replaces instances of:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen"><CODECLASS="userinput"><B>$</B></CODE><CODECLASS="replaceable"><I>keyword</I></CODE><CODECLASS="userinput"><B>$</B></CODE></PRE></BLOCKQUOTE></P><PCLASS="para">with:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen"><CODECLASS="userinput"><B>$</B></CODE><CODECLASS="replaceable"><I>keyword</I></CODE><CODECLASS="userinput"><B>:</B></CODE><CODECLASS="replaceable"><I>value</I></CODE><CODECLASS="userinput"><B>$</B></CODE>.</PRE></BLOCKQUOTE></P><PCLASS="para"></P></LI><LICLASS="listitem"><PCLASS="para">Subsequent check in and check out of a file will update anyexisting keyword values.  Unless otherwise noted below,existing values are replaced by new values.</P></LI></OL><PCLASS="para">Note:  In RCS Version 5, many commands have a <BCLASS="emphasis.bold">-k</B> option thatprovides more flexibility during keyword substitution.</P></DIV><DIVCLASS="sect2"><H3CLASS="sect2"><ACLASS="title"NAME="UNUT-CH-18-SECT-3.1.1">18.3.2 Keywords</A></H3><DLCLASS="variablelist"><DTCLASS="term">$Author$</DT><DDCLASS="listitem"><PCLASS="para">Username of person who checked in revision.</P></DD><DTCLASS="term">$Date$</DT><DDCLASS="listitem"><PCLASS="para">Date and time of check in.</P></DD><DTCLASS="term">$Header$</DT><DDCLASS="listitem"><PCLASS="para">A title that includes RCS file's full pathname,revision number, date, author, state, and (if locked) the person who lockedthe file.</P></DD><DTCLASS="term">$Id$</DT><DDCLASS="listitem"><PCLASS="para">Same as <BCLASS="emphasis.bold">$Header$</B>, but exclude the full pathname of the RCS file.</P></DD><DTCLASS="term">$Locker$</DT><DDCLASS="listitem"><PCLASS="para">Username of person who locked the revision.If the file isn't locked, this value is empty.</P></DD><DTCLASS="term">$Log$</DT><DDCLASS="listitem"><PCLASS="para">The message that was typed during check in to describe the file,preceded by the RCS filename, revision number, author, and date.Log messages accumulate rather than being overwritten.</P></DD><DTCLASS="term">$RCSfile$</DT><DDCLASS="listitem"><PCLASS="para">The RCS filename, without its pathname.</P></DD><DTCLASS="term">$Revision$</DT><DDCLASS="listitem"><PCLASS="para">The assigned revision number.</P></DD><DTCLASS="term">$Source$</DT><DDCLASS="listitem"><PCLASS="para">The RCS filename, including its pathname.</P></DD><DTCLASS="term">$State$</DT><DDCLASS="listitem"><PCLASS="para">The state assigned by the <BCLASS="emphasis.bold">-s</B> option of <BCLASS="emphasis.bold">ci</B> or <BCLASS="emphasis.bold">rcs</B>.</P></DD></DL></DIV><DIVCLASS="sect2"><H3CLASS="sect2"><ACLASS="title"NAME="UNUT-CH-18-SECT-3.1.2">18.3.3 Example Values</A></H3><PCLASS="para">Let's assume that the file<BCLASS="emphasis.bold">/projects/new/chapter3</B> has been checked in and outby a user named <BCLASS="emphasis.bold">daniel</B>.  Here's what keyword substitution would produce for each keyword, for the second revision of the file:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">$Author: daniel $$Date: 92/03/18 17:51:36 $$Header: /projects/new/chapter3,v 1.2 92/03/18 17:51:36 daniel \    Exp Locker: daniel $$Id: chapter3,v 1.2 92/03/18 17:51:36 daniel Exp Locker: daniel $$Locker: daniel $$Log:    chapter3,v $# Revision 1.2  92/03/18  17:51:36  daniel# Added section on error-handling# # Revision 1.1  92/03/18  16:49:59  daniel# Initial revision# $RCSfile: chapter3,v $$Revision: 1.2 $$Source: /projects/new/chapter3,v $$State: Exp $</PRE></BLOCKQUOTE></P></DIV><DIVCLASS="sect2"><H3CLASS="sect2"><ACLASS="title"NAME="UNUT-CH-18-SECT-3.2">18.3.4 Revision Numbering</A></H3><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-40416"></A><ACLASS="indexterm"NAME="AUTOID-40418"></A><ACLASS="indexterm"NAME="AUTOID-40420"></A>Unless told otherwise, RCS commands typically operate on the latest revision.Some commands have a <BCLASS="emphasis.bold">-r</B> option that is used to specify a revision number.In addition, many options accept a revision number as an optional argument.(In the command summary, this argument is shown as [<CODECLASS="replaceable"><I>R</I></CODE>].)  Revision numbers consist of up to four fields:  release, level, branch, andsequence, but most revisions consist of only the release and level.For example, you can check out revision 1.4 as follows:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen"><CODECLASS="userinput"><B>co -l -r1.4 ch01</B></CODE></PRE></BLOCKQUOTE></P><PCLASS="para">When you check it in again, the new revision will be marked as 1.5.But suppose the edited copy needs to be checked in as the next release.You would type:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen"><CODECLASS="userinput"><B>ci -r2 ch01</B></CODE></PRE></BLOCKQUOTE></P><PCLASS="para">This creates revision 2.1.  You can also create a branch from an earlier revision.The following command creates revision 1.4.1.1:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen"><CODECLASS="userinput"><B>ci -r1.4.1 ch01</B></CODE></PRE></BLOCKQUOTE></P><PCLASS="para">Numbers are not the only way to specify revisions, though.You can assign a text label as a revision name,using the <BCLASS="emphasis.bold">-n</B> option of <BCLASS="emphasis.bold">ci</B> or <BCLASS="emphasis.bold">rcs</B>.You can also specify this name in any option that acceptsa revision number for an argument.For example, you could check in each of your C programs,using the same label regardless of the current revision number:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen"><CODECLASS="userinput"><B>ci -u -nPrototype *.c</B></CODE></PRE></BLOCKQUOTE></P><PCLASS="para">In addition, RCS version 5.6 lets you specify a $,which means the revision number extracted from the keywordsof a working file.  For example:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen"><CODECLASS="userinput"><B>rcsdiff -r$ ch01</B></CODE></PRE></BLOCKQUOTE></P><PCLASS="para">compares <BCLASS="emphasis.bold">ch01</B> to the revision that is checked in.You can also combine names and symbols.  The command:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen"><CODECLASS="userinput"><B>rcs -nDraft:$ ch*</B></CODE></PRE></BLOCKQUOTE></P><PCLASS="para">assigns a name to the revision numbers associated with several chapter files.</P></DIV><DIVCLASS="sect2"><H3CLASS="sect2"><ACLASS="title"NAME="UNUT-CH-18-SECT-3.3">18.3.5 Specifying the Date</A></H3><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-40456"></A>Revisions are timestamped by time and date of check in.Several keyword strings include the date in their values.Dates can be supplied in options to <BCLASS="emphasis.bold">ci</B>, <BCLASS="emphasis.bold">co</B>, and <BCLASS="emphasis.bold">rlog</B>.RCS uses the following date format as its default:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">1995/10/16 02:00:00	<ICLASS="lineannotation">(year/month/day   time)</I></PRE></BLOCKQUOTE></P><PCLASS="para">The default timezone is Greenwich Mean Time (GMT), which is also referred toas Coordinated Universal Time (UTC).  Dates can be supplied in free format.This lets you specify many different styles.  Here are some ofthe more common ones, which show the same time as in the example above:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">&#13;6:00 pm lt		<ICLASS="lineannotation">(assuming today is Oct. 16, 1995)</I>2:00 AM, Oct. 16, 1995Mon Oct 16 18:00:00 1995 LT	Mon Oct 16 18:00:00 PST 1995</PRE></BLOCKQUOTE></P><PCLASS="para">The uppercase or lowercase &quot;lt&quot; indicates local time (here, Pacific StandardTime).  The third line shows <BCLASS="emphasis.bold">ctime</B> format (plus the &quot;LT&quot;);the fourth line is the <BCLASS="emphasis.bold">date</B> command format.</P></DIV><DIVCLASS="sect2"><H3CLASS="sect2"><ACLASS="title"NAME="UNUT-CH-18-SECT-3.4">18.3.6 Specifying States</A></H3><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-40475"></A>In some situations, particularly programming environments,you want to know the status of a set of revisions.RCS files are marked by a text string that describes their <CODECLASS="replaceable"><I>state</I></CODE>.The default state is <BCLASS="emphasis.bold">Exp</B> (experimental).  Other common choicesinclude <BCLASS="emphasis.bold">Stab</B> (stable) or <BCLASS="emphasis.bold">Rel</B> (released).These words are user-defined and have no special internal meaning.Several keyword strings include the state in their values.In addition, states can be supplied in options to <BCLASS="emphasis.bold">ci</B>, <BCLASS="emphasis.bold">co</B>, <BCLASS="emphasis.bold">rcs</B>, and <BCLASS="emphasis.bold">rlog</B>.</P></DIV><DIVCLASS="sect2"><H3CLASS="sect2"><ACLASS="title"NAME="UNUT-CH-18-SECT-3.5">18.3.7 Standard Options</A></H3><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-40488"></A>RCS Version 5.6 defines an environment variable RCSINIT,which is used to set up default options for RCS commands.If you set RCSINIT to a space-separated list of options,they will be prepended to the command-line optionsyou supply to any RCS command.  Threeoptions are useful to include in RCSINIT:<BCLASS="emphasis.bold">-q</B>, <BCLASS="emphasis.bold">-V</B>, and <BCLASS="emphasis.bold">-x</B>.  They can be thought of as standard optionsbecause most RCS commands accept them.Note that <BCLASS="emphasis.bold">-V</B> is new in RCS Version 5 and that <BCLASS="emphasis.bold">-x</B> is new in Version 5.6.</P><PCLASS="para"></P><DLCLASS="variablelist"><DTCLASS="term">-q[<CODECLASS="replaceable"><I>R</I></CODE>]</DT><DDCLASS="listitem"><PCLASS="para">Quiet mode; don't show diagnostic output.  <CODECLASS="replaceable"><I>R</I></CODE> specifiesa file revision.</P></DD><DTCLASS="term">-V<CODECLASS="replaceable"><I>n</I></CODE></DT><DDCLASS="listitem"><PCLASS="para">Emulate version <CODECLASS="replaceable"><I>n</I></CODE> of RCS; useful when trading filesbetween systems that run different versions.<CODECLASS="replaceable"><I>n</I></CODE> can be 3, 4, or 5.</P></DD><DTCLASS="term">-x<CODECLASS="replaceable"><I>suffixes</I></CODE></DT><DDCLASS="listitem"><PCLASS="para">Specify an alternate list of <CODECLASS="replaceable"><I>suffixes</I></CODE> for RCS files.Each suffix is separated by a /.On UNIX systems, RCS files normally end with the characters <BCLASS="emphasis.bold">,v</B>.  The <BCLASS="emphasis.bold">-x</B> option provides a workaround for systems that don't allow a <BCLASS="emphasis.bold">,</B> character in filenames.&#13;</P></DD></DL><PCLASS="para">For example, when depositing a working file into an RCS file, the command:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen"><CODECLASS="userinput"><B>ci -x,v/ ch01</B></CODE>	<ICLASS="lineannotation">(second suffix is blank)</I></PRE></BLOCKQUOTE></P><PCLASS="para">searches in order for the RCS filenames:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">RCS/ch01,vch01,vRCS/ch01</PRE></BLOCKQUOTE></P></DIV></DIV><DIVCLASS="htmlnav"><P></P><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch18_02.htm"TITLE="18.2 Basic Operation"><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 18.2 Basic Operation"BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="book"HREF="index.htm"TITLE="UNIX in a Nutshell: System V Edition"><IMGSRC="../gifs/txthome.gif"ALT="UNIX in a Nutshell: System V Edition"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch18_04.htm"TITLE="18.4 Conversion Guide for SCCS Users"><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 18.4 Conversion Guide for SCCS Users"BORDER="0"></A></TD></TR><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172">18.2 Basic Operation</TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="index"HREF="index/idx_0.htm"TITLE="Book Index"><IMGSRC="../gifs/index.gif"ALT="Book Index"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172">18.4 Conversion Guide for SCCS Users</TD></TR></TABLE><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><IMGSRC="../gifs/smnavbar.gif"USEMAP="#map"BORDER="0"ALT="The UNIX CD Bookshelf Navigation"><MAPNAME="map"><AREASHAPE="RECT"COORDS="0,0,73,21"HREF="../index.htm"ALT="The UNIX CD Bookshelf"><AREASHAPE="RECT"COORDS="74,0,163,21"HREF="../upt/index.htm"ALT="UNIX Power Tools"><AREASHAPE="RECT"COORDS="164,0,257,21"HREF="index.htm"ALT="UNIX in a Nutshell"><AREASHAPE="RECT"COORDS="258,0,321,21"HREF="../vi/index.htm"ALT="Learning the vi Editor"><AREASHAPE="RECT"COORDS="322,0,378,21"HREF="../sedawk/index.htm"ALT="sed &amp; awk"><AREASHAPE="RECT"COORDS="379,0,438,21"HREF="../ksh/index.htm"ALT="Learning the Korn Shell"><AREASHAPE="RECT"COORDS="439,0,514,21"HREF="../lrnunix/index.htm"ALT="Learning the UNIX Operating System"></MAP></DIV></BODY></HTML>