<HTML><HEAD><TITLE>[Chapter 19] 19.3 Macros</TITLE><METANAME="DC.title"CONTENT="UNIX in a Nutshell: System V Edition"><METANAME="DC.creator"CONTENT="Daniel Gilly &amp; the Staff of O'Reilly &amp; Associates"><METANAME="DC.publisher"CONTENT="O'Reilly &amp; Associates, Inc."><METANAME="DC.date"CONTENT="1998-08-06T22:02:05Z"><METANAME="DC.type"CONTENT="Text.Monograph"><METANAME="DC.format"CONTENT="text/html"SCHEME="MIME"><METANAME="DC.source"CONTENT="1-56592-001-5"SCHEME="ISBN"><METANAME="DC.language"CONTENT="en-US"><METANAME="generator"CONTENT="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><LINKREV="made"HREF="mailto:online-books@oreilly.com"TITLE="Online Books Comments"><LINKREL="up"HREF="ch19_01.htm"TITLE="19. The make Utility"><LINKREL="prev"HREF="ch19_02.htm"TITLE="19.2 Description File Lines"><LINKREL="next"HREF="ch19_04.htm"TITLE="19.4 Special Target Names"></HEAD><BODYBGCOLOR="#FFFFFF"TEXT="#000000"><DIVCLASS="htmlnav"><H1><IMGSRC="gifs/smbanner.gif"ALT="UNIX in a Nutshell: System V Edition"USEMAP="#srchmap"BORDER="0"></H1><MAPNAME="srchmap"><AREASHAPE="RECT"COORDS="0,0,466,71"HREF="index.htm"ALT="UNIX in a Nutshell: System V Edition"><AREASHAPE="RECT"COORDS="467,0,514,18"HREF="../search/usrch.htm"ALT="Search this book"></MAP><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch19_02.htm"TITLE="19.2 Description File Lines"><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 19.2 Description File Lines"BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><B><FONTFACE="ARIEL,HELVETICA,HELV,SANSERIF"SIZE="-1">Chapter 19<BR>The make Utility</FONT></B></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch19_04.htm"TITLE="19.4 Special Target Names"><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 19.4 Special Target Names"BORDER="0"></A></TD></TR></TABLE>&nbsp;<HRALIGN="LEFT"WIDTH="515"TITLE="footer"></DIV><DIVCLASS="SECT1"><H2CLASS="sect1"><ACLASS="title"NAME="UNUT-CH-19-SECT-3">19.3 Macros</A></H2><PCLASS="para"><ACLASS="indexterm"NAME="UNUT-CH-19-IX-MACROS-FOR-MAKE-UTILITY"></A>This subsection summarizes internal macros, modifiers, string substitution, and special macros.</P><DIVCLASS="sect2"><H3CLASS="sect2"><ACLASS="title"NAME="UNUT-CH-19-SECT-3.1">19.3.1 Internal Macros</A></H3><DLCLASS="variablelist"><DTCLASS="term">$?</DT><DDCLASS="listitem"><PCLASS="para">The list of prerequisites that have been changed more recently than the current target.  Can be used only in normal description file entries&nbsp;- not suffix rules.</P></DD><DTCLASS="term">$@</DT><DDCLASS="listitem"><PCLASS="para">The name of the current target, except in description file entries for making libraries, where it becomes the library name.  Can be usedboth in normal description file entries and in suffix rules.</P></DD><DTCLASS="term">$$@</DT><DDCLASS="listitem"><PCLASS="para">The name of the current target.  Can be used only to the right of the colon in dependency lines.</P></DD><DTCLASS="term">$&lt;</DT><DDCLASS="listitem"><PCLASS="para">The name of the current prerequisite that has been modified more recentlythan the current target.  Can be used only in suffix rules and in the <CODECLASS="literal">.DEFAULT:</CODE>  entry.</P></DD><DTCLASS="term">$*</DT><DDCLASS="listitem"><PCLASS="para">The name&nbsp;- without the suffix&nbsp;- of the current prerequisite that hasbeen modified more recently than the current target.  Can be used only insuffix rules.</P></DD><DTCLASS="term">$%</DT><DDCLASS="listitem"><PCLASS="para">The name of the corresponding <CODECLASS="literal">.o</CODE> file when the current target is a library module.  Can be used both in normal description file entriesand in suffix rules.</P></DD></DL></DIV><DIVCLASS="sect2"><H3CLASS="sect2"><ACLASS="title"NAME="UNUT-CH-19-SECT-3.2">19.3.2 Macro Modifiers</A></H3><PCLASS="para">Macro modifiers are not available in all variants of <CODECLASS="literal">make</CODE>.</P><DLCLASS="variablelist"><DTCLASS="term">D</DT><DDCLASS="listitem"><PCLASS="para">The directory portion of any internal macro name except <CODECLASS="literal">$?</CODE>.  Valid uses are: </P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">$(*D)   $$(@D)$(&lt;D)   ${%D)$(@D)</PRE></BLOCKQUOTE></P><PCLASS="para"></P></DD><DTCLASS="term">F</DT><DDCLASS="listitem"><PCLASS="para">The file portion of any internal macro name except <CODECLASS="literal">$?</CODE>.Valid uses are:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">$(*F)   $$(@F)$(&lt;F)   ${%F}$(@F)</PRE></BLOCKQUOTE></P></DD></DL></DIV><DIVCLASS="sect2"><H3CLASS="sect2"><ACLASS="title"NAME="UNUT-CH-19-SECT-3.3">19.3.3 Macro String Substitution</A></H3><PCLASS="para">String substitution is not available in all variants of <CODECLASS="literal">make</CODE>.</P><DLCLASS="variablelist"><DTCLASS="term"><CODECLASS="literal">${</CODE><CODECLASS="replaceable"><I>macro</I></CODE>:<CODECLASS="replaceable"><I>s1</I></CODE>=<CODECLASS="replaceable"><I>s2</I></CODE>}</DT><DDCLASS="listitem"><PCLASS="para">Evaluates to the current definition of <CODECLASS="literal">${</CODE><CODECLASS="replaceable"><I>macro</I></CODE>},after substituting the string <EMCLASS="emphasis">s1</EM> for every occurrence of <EMCLASS="emphasis">s2</EM>that occurs either immediately before a blank or tab, or at the end ofthe macro definition.</P></DD></DL></DIV><DIVCLASS="sect2"><H3CLASS="sect2"><ACLASS="title"NAME="UNUT-CH-19-SECT-3.4">19.3.4 Macros with Special Handling</A></H3><DLCLASS="variablelist"><DTCLASS="term">SHELL</DT><DDCLASS="listitem"><PCLASS="para">Sets the shell that interprets commands.  If this macro isn't defined in thedescription file, the value depends on your system.Some UNIX implementations use the shell from the user's environment (as withother macros).  Other implementations (including SVR4) set the default SHELL to <CODECLASS="literal">/bin/sh</CODE>.</P></DD><DTCLASS="term">VPATH</DT><DDCLASS="listitem"><PCLASS="para">(Not available in all variants of <CODECLASS="literal">make</CODE>.)Specifies a list of directories to search for prerequisiteswhen they aren't found in the current directory.</P></DD></DL></DIV></DIV><DIVCLASS="htmlnav"><P></P><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch19_02.htm"TITLE="19.2 Description File Lines"><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 19.2 Description File Lines"BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="book"HREF="index.htm"TITLE="UNIX in a Nutshell: System V Edition"><IMGSRC="../gifs/txthome.gif"ALT="UNIX in a Nutshell: System V Edition"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch19_04.htm"TITLE="19.4 Special Target Names"><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 19.4 Special Target Names"BORDER="0"></A></TD></TR><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172">19.2 Description File Lines</TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="index"HREF="index/idx_0.htm"TITLE="Book Index"><IMGSRC="../gifs/index.gif"ALT="Book Index"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172">19.4 Special Target Names</TD></TR></TABLE><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><IMGSRC="../gifs/smnavbar.gif"USEMAP="#map"BORDER="0"ALT="The UNIX CD Bookshelf Navigation"><MAPNAME="map"><AREASHAPE="RECT"COORDS="0,0,73,21"HREF="../index.htm"ALT="The UNIX CD Bookshelf"><AREASHAPE="RECT"COORDS="74,0,163,21"HREF="../upt/index.htm"ALT="UNIX Power Tools"><AREASHAPE="RECT"COORDS="164,0,257,21"HREF="index.htm"ALT="UNIX in a Nutshell"><AREASHAPE="RECT"COORDS="258,0,321,21"HREF="../vi/index.htm"ALT="Learning the vi Editor"><AREASHAPE="RECT"COORDS="322,0,378,21"HREF="../sedawk/index.htm"ALT="sed &amp; awk"><AREASHAPE="RECT"COORDS="379,0,438,21"HREF="../ksh/index.htm"ALT="Learning the Korn Shell"><AREASHAPE="RECT"COORDS="439,0,514,21"HREF="../lrnunix/index.htm"ALT="Learning the UNIX Operating System"></MAP></DIV></BODY></HTML>