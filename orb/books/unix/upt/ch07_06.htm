<HTML><HEAD><TITLE>[Chapter 7] 7.6 Session Information in Your Terminal's Status Line </TITLE><METANAME="DC.title"CONTENT="UNIX Power Tools"><METANAME="DC.creator"CONTENT="Jerry Peek, Tim O'Reilly &amp; Mike Loukides"><METANAME="DC.publisher"CONTENT="O'Reilly &amp; Associates, Inc."><METANAME="DC.date"CONTENT="1998-08-04T21:33:47Z"><METANAME="DC.type"CONTENT="Text.Monograph"><METANAME="DC.format"CONTENT="text/html"SCHEME="MIME"><METANAME="DC.source"CONTENT="1-56592-260-3"SCHEME="ISBN"><METANAME="DC.language"CONTENT="en-US"><METANAME="generator"CONTENT="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><LINKREV="made"HREF="mailto:online-books@oreilly.com"TITLE="Online Books Comments"><LINKREL="up"HREF="ch07_01.htm"TITLE="7. Setting Your Shell Prompt"><LINKREL="prev"HREF="ch07_05.htm"TITLE="7.5 Multiline Shell Prompts "><LINKREL="next"HREF="ch07_07.htm"TITLE='7.7 A "Menu Prompt&quot; for Naive Users'></HEAD><BODYBGCOLOR="#FFFFFF"TEXT="#000000"><DIVCLASS="htmlnav"><H1><IMGSRC="gifs/smbanner.gif"ALT="UNIX Power Tools"USEMAP="#srchmap"BORDER="0"></H1><MAPNAME="srchmap"><AREASHAPE="RECT"COORDS="0,0,466,58"HREF="index.htm"ALT="UNIX Power Tools"><AREASHAPE="RECT"COORDS="467,0,514,18"HREF="../search/psrch.htm"ALT="Search this book"></MAP><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch07_05.htm"TITLE="7.5 Multiline Shell Prompts "><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 7.5 Multiline Shell Prompts "BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><B><FONTFACE="ARIEL,HELVETICA,HELV,SANSERIF"SIZE="-1">Chapter 7<BR>Setting Your Shell Prompt</FONT></B></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch07_07.htm"TITLE='7.7 A "Menu Prompt&quot; for Naive Users'><IMGSRC="../gifs/txtnexta.gif"ALT='Next: 7.7 A "Menu Prompt&quot; for Naive Users'BORDER="0"></A></TD></TR></TABLE>&nbsp;<HRALIGN="LEFT"WIDTH="515"TITLE="footer"></DIV><DIVCLASS="SECT1"><H2CLASS="sect1"><ACLASS="title"NAME="UPT-ART-1310">7.6 Session Information in Your Terminal's Status Line </A></H2><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-6862"></A>Some people don't like to put the current directory, hostname, etc.into their prompts because it makes the screen look cluttered to them.Here's another idea.  If your terminal or window system has a statusline or title bar, you might be able to put the information there.That's nice because you'll be able to see the information while yourun programs.  The bad side is that the information can getout-of-date if you use a command that takes you to another host ordirectory without updating the status line.</P><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-6866"></A><ACLASS="indexterm"NAME="AUTOID-6869"></A><ACLASS="indexterm"NAME="AUTOID-6872"></A><ACLASS="indexterm"NAME="AUTOID-6875"></A>When you <EMCLASS="emphasis">cd</EM>, an alias uses the <EMCLASS="emphasis">echo</EM> command to writespecial<SPANCLASS="link">escape sequences (<ACLASS="linkend"HREF="ch05_08.htm"TITLE="Terminal Escape Sequences ">5.8</A>)</SPAN>(terminal commands) to the terminal or window.</P><PCLASS="para">Here's a <EMCLASS="emphasis">cd</EM> alias and other commands for your <EMCLASS="emphasis">.cshrc</EM> file.If I were logged in to <EMCLASS="emphasis">www.jpeek.com</EM> in the directory <EMCLASS="emphasis">/home/jpeek</EM>,this alias would put:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">www:/home/jpeek</PRE></BLOCKQUOTE></P><PCLASS="para">in the status area.Of course, you can change the format of the status line.Change the command string below, <CODECLASS="literal">${host:h}:${cwd}</CODE>, to do whatyou need.</P><PCLASS="para"><TABLECLASS="screen.co"BORDER="1"><TR><THVALIGN="TOP"><PRECLASS="calloutlist"><ACLASS="co"HREF="ch45_35.htm"TITLE="45.35 Using a Control Character in a Script ">echo...033</A> <ACLASS="co"HREF="ch44_09.htm"TITLE="44.9 Testing Your Success ">&amp;&amp;</A> &#13;</PRE></TH><TDVALIGN="TOP"><PRECLASS="screen">set e=&quot;`echo -n x | tr x \\033`&quot;   # Make an ESCape characterset host=`uname -n`# Puts $host and $cwd in VT102 status line. Escape sequences are:# ${e}7 = save cursor position, ${e}[25;1f = go to start of status# line (line 25), ${e}[0K = erase line, ${e}8 = restore cursoralias cd 'chdir \!* &amp;&amp; \\   echo -n &quot;${e}7${e}[25;1f${e}[0K    ${host:h}:${cwd}${e}8&quot;'</PRE></TD></TR></TABLE></P><PCLASS="para">If you always use a VT102-type terminal (and many people do), that aliaswill work fine.If you use a different terminal, read its manual or its<SPANCLASS="link"><EMCLASS="emphasis">termcap</EM>/<EMCLASS="emphasis">terminfo</EM> entry (<ACLASS="linkend"HREF="ch41_11.htm"TITLE="How termcap and terminfo Describe Terminals ">41.11</A>)</SPAN>and find the escapesequences that work for it.</P><PCLASS="para">People who use more than one type of terminal, that aren't allVT102-compatible, can add a<SPANCLASS="link"><EMCLASS="emphasis">case</EM> (<ACLASS="linkend"HREF="ch44_05.htm"TITLE="Test String Values with Bourne Shell case ">44.5</A>)</SPAN>or<SPANCLASS="link"><EMCLASS="emphasis">switch</EM> (<ACLASS="linkend"HREF="ch47_06.htm"TITLE="Quick Reference: C Shell switch Statement ">47.6</A>)</SPAN>to test theterminal type and use a <EMCLASS="emphasis">cd</EM> alias written for that terminal.(The alias can also put the status information in the shell prompt onterminals that don't have a status line.)But you might have some trouble:if the alias is defined in your <EMCLASS="emphasis">.cshrc</EM> file but your terminal typeis set in your <EMCLASS="emphasis">.login</EM> file, the terminal type may not be setuntil after the alias has been read.There are<SPANCLASS="link">workarounds (<ACLASS="linkend"HREF="ch02_07.htm"TITLE="C Shell Setup Files Aren't Read When You Want Them to Be? ">2.7</A>)</SPAN>.</P><PCLASS="para">The status line can also get out of sync with reality if you use<SPANCLASS="link">remote logins (<ACLASS="linkend"HREF="ch01_33.htm"TITLE="UNIX Networking and Communications ">1.33</A>)</SPAN>,<SPANCLASS="link">subshells (<ACLASS="linkend"HREF="ch38_04.htm"TITLE="Subshells ">38.4</A>)</SPAN>,and other things.These might put a new prompt in the status line but not reset theoriginal prompt when it should be reset.The easiest workaround for this is by using the command below tochange directory to the current directory (<CODECLASS="literal">.</CODE>) andreset the status line:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">% <CODECLASS="userinput"><B>cd .</B></CODE></PRE></BLOCKQUOTE></P><DIVCLASS="sect1info"><PCLASS="SECT1INFO">- <SPANCLASS="authorinitials">JP</SPAN></P></DIV></DIV><DIVCLASS="htmlnav"><P></P><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch07_05.htm"TITLE="7.5 Multiline Shell Prompts "><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 7.5 Multiline Shell Prompts "BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="book"HREF="index.htm"TITLE="UNIX Power Tools"><IMGSRC="../gifs/txthome.gif"ALT="UNIX Power Tools"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch07_07.htm"TITLE='7.7 A "Menu Prompt&quot; for Naive Users'><IMGSRC="../gifs/txtnexta.gif"ALT='Next: 7.7 A "Menu Prompt&quot; for Naive Users'BORDER="0"></A></TD></TR><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172">7.5 Multiline Shell Prompts </TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="index"HREF="index/idx_0.htm"TITLE="Book Index"><IMGSRC="../gifs/index.gif"ALT="Book Index"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172">7.7 A "Menu Prompt&quot; for Naive Users</TD></TR></TABLE><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><IMGSRC="../gifs/smnavbar.gif"USEMAP="#map"BORDER="0"ALT="The UNIX CD Bookshelf Navigation"><MAPNAME="map"><AREASHAPE="RECT"COORDS="0,0,73,21"HREF="../index.htm"ALT="The UNIX CD Bookshelf"><AREASHAPE="RECT"COORDS="74,0,163,21"HREF="index.htm"ALT="UNIX Power Tools"><AREASHAPE="RECT"COORDS="164,0,257,21"HREF="../unixnut/index.htm"ALT="UNIX in a Nutshell"><AREASHAPE="RECT"COORDS="258,0,321,21"HREF="../vi/index.htm"ALT="Learning the vi Editor"><AREASHAPE="RECT"COORDS="322,0,378,21"HREF="../sedawk/index.htm"ALT="sed &amp; awk"><AREASHAPE="RECT"COORDS="379,0,438,21"HREF="../ksh/index.htm"ALT="Learning the Korn Shell"><AREASHAPE="RECT"COORDS="439,0,514,21"HREF="../lrnunix/index.htm"ALT="Learning the UNIX Operating System"></MAP></DIV></BODY></HTML>