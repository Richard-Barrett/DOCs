<HTML><HEAD><TITLE>[Chapter 10] 10.6 Avoiding C Shell Alias Loops </TITLE><METANAME="DC.title"CONTENT="UNIX Power Tools"><METANAME="DC.creator"CONTENT="Jerry Peek, Tim O'Reilly &amp; Mike Loukides"><METANAME="DC.publisher"CONTENT="O'Reilly &amp; Associates, Inc."><METANAME="DC.date"CONTENT="1998-08-04T21:35:53Z"><METANAME="DC.type"CONTENT="Text.Monograph"><METANAME="DC.format"CONTENT="text/html"SCHEME="MIME"><METANAME="DC.source"CONTENT="1-56592-260-3"SCHEME="ISBN"><METANAME="DC.language"CONTENT="en-US"><METANAME="generator"CONTENT="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><LINKREV="made"HREF="mailto:online-books@oreilly.com"TITLE="Online Books Comments"><LINKREL="up"HREF="ch10_01.htm"TITLE="10. Aliases"><LINKREL="prev"HREF="ch10_05.htm"TITLE="10.5 Sourceable Scripts "><LINKREL="next"HREF="ch10_07.htm"TITLE="10.7 How to Put if-then-else in a C Shell Alias "></HEAD><BODYBGCOLOR="#FFFFFF"TEXT="#000000"><DIVCLASS="htmlnav"><H1><IMGSRC="gifs/smbanner.gif"ALT="UNIX Power Tools"USEMAP="#srchmap"BORDER="0"></H1><MAPNAME="srchmap"><AREASHAPE="RECT"COORDS="0,0,466,58"HREF="index.htm"ALT="UNIX Power Tools"><AREASHAPE="RECT"COORDS="467,0,514,18"HREF="../search/psrch.htm"ALT="Search this book"></MAP><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch10_05.htm"TITLE="10.5 Sourceable Scripts "><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 10.5 Sourceable Scripts "BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><B><FONTFACE="ARIEL,HELVETICA,HELV,SANSERIF"SIZE="-1">Chapter 10<BR>Aliases</FONT></B></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch10_07.htm"TITLE="10.7 How to Put if-then-else in a C Shell Alias "><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 10.7 How to Put if-then-else in a C Shell Alias "BORDER="0"></A></TD></TR></TABLE>&nbsp;<HRALIGN="LEFT"WIDTH="515"TITLE="footer"></DIV><DIVCLASS="SECT1"><H2CLASS="sect1"><ACLASS="title"NAME="UPT-ART-0253">10.6 Avoiding C Shell Alias Loops </A></H2><PCLASS="para">[Article<ACLASS="xref"HREF="ch08_11.htm"TITLE="Which One Will bash Use? ">8.11</A>has similar information for <ICLASS="filename">bash</I>. -JP]</P><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-12008"></A><ACLASS="indexterm"NAME="AUTOID-12011"></A><ACLASS="indexterm"NAME="AUTOID-12013"></A><ACLASS="indexterm"NAME="AUTOID-12016"></A>Here's a situation that came up on the Net a while ago. Someonewanted an<SPANCLASS="link"><EMCLASS="emphasis">exit</EM> (<ACLASS="linkend"HREF="ch38_04.htm"TITLE="Subshells ">38.4</A>)</SPAN>alias that would run a<SPANCLASS="link"><EMCLASS="emphasis">~/.exit</EM> file (<ACLASS="linkend"HREF="ch14_14.htm"TITLE="Automatic Setup When You Enter/Exit a Directory ">14.14</A>)</SPAN>beforeleaving the shell. The obvious solution is:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">alias exit &quot;source ~/.exit; exit&quot;</PRE></BLOCKQUOTE></P><PCLASS="para">This doesn't work; when you use the <EMCLASS="emphasis">exit</EM> alias, the C shellthinks that the alias is trying to execute itself.Recursive aliases aren't allowed on many shells,so the C shell prints an error message (<CODECLASS="literal">Alias loop</CODE>) andgives up.</P><PCLASS="para">There are many, many ways to break the loop. Here's the best (in myopinion):</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">alias exit 'source ~/.exit; &quot;&quot;exit'</PRE></BLOCKQUOTE></P><PCLASS="para">Article<ACLASS="xref"HREF="ch08_12.htm"TITLE="Which One Will the C Shell Use? ">8.12</A>has the hairy details of what works and why.To summarize, if you need to use the alias's name within a C shellalias, you can use:<TABLECLASS="informaltable"><TBODYCLASS="tbody"><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">&quot;&quot;<CODECLASS="replaceable"><I>name</I></CODE></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><PCLASS="para">where <CODECLASS="replaceable"><I>name</I></CODE> is the name of a<SPANCLASS="link">built-in (<ACLASS="linkend"HREF="ch01_10.htm"TITLE="Internal and External Commands ">1.10</A>)</SPAN>commandor any &quot;regular&quot; command.</P></TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">\<CODECLASS="replaceable"><I>name</I></CODE></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><PCLASS="para">where <CODECLASS="replaceable"><I>name</I></CODE> is the name ofany &quot;regular&quot; command, but not a built-in command.</P></TD></TR></TBODY></TABLE>&#13;</P><PCLASS="para">Tempting as this all may sound (and I have to admit, if it didn'tsound a bit tempting, I wouldn't be writing this article), I can'treally recommend the practice of &quot;redefining&quot; commands with aliases. You shouldleave the original commands as they are. The original author couldhave avoided all these problems by calling his alias <EMCLASS="emphasis">quit</EM> ratherthan <EMCLASS="emphasis">exit</EM>.</P><PCLASS="para">If you redefine commands with aliases&nbsp;- then use another accountwhere your alias isn't defined (or, if you let someone type a commandon your account)-it's easy for things to go wrong.That's especially true for commands that do somethingpermanent&nbsp;- overwriting or removing files, for example.</P><PCLASS="para">Let me give one more example to show you what problems you can have. Let's say you've aliased the <EMCLASS="emphasis">exit</EM> command to <EMCLASS="emphasis">source</EM> a<EMCLASS="emphasis">.exit</EM> file before quitting. Fair enough. But now, let'ssay that you're not in your login shell, that you've <SPANCLASS="link"><EMCLASS="emphasis">set&nbsp;ignoreeof</EM> (<ACLASS="linkend"HREF="ch06_09.htm"TITLE="Special C Shell Variables ">6.9</A>)</SPAN>,and that, for no apparent reason, your <EMCLASS="emphasis">.exit</EM>file disappears (maybe it develops a bad block, so the system can'tread it; such things happen).</P><PCLASS="para">Now you're stuck. If you type <CODECLASS="literal">exit</CODE>, the <EMCLASS="emphasis">source</EM> commandwill fail, and the &quot;real&quot; <EMCLASS="emphasis">exit</EM> command will never be executed.You can't leave the shell. Of course, if you remember what you did,you can always type <CODECLASS="literal">unalias&nbsp;exit</CODE> and get the original command back.Or you can type <CODECLASS="literal">&lt;&quot;&gt;&lt;&quot;&gt;exit</CODE>.But if you've foisted this alias on a beginner, he or she mightnot know that. All of a sudden, you're stuck in some shell that youapparently can't get out of.</P><PCLASS="para">The biggest virtue of UNIX is that it's infinitely extendable.However, you aren't helping if your extensions hide the basicoperations that make everything work. So&nbsp;- extend all you want. Butwhen you write your extensions, give them <EMCLASS="emphasis">new&nbsp;names</EM>.End of sermon.</P><DIVCLASS="sect1info"><PCLASS="SECT1INFO">- <SPANCLASS="authorinitials">ML</SPAN> <SPANCLASS="bibliomisc">ML wrote, but material came from net postings by several people</SPAN></P></DIV></DIV><DIVCLASS="htmlnav"><P></P><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch10_05.htm"TITLE="10.5 Sourceable Scripts "><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 10.5 Sourceable Scripts "BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="book"HREF="index.htm"TITLE="UNIX Power Tools"><IMGSRC="../gifs/txthome.gif"ALT="UNIX Power Tools"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch10_07.htm"TITLE="10.7 How to Put if-then-else in a C Shell Alias "><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 10.7 How to Put if-then-else in a C Shell Alias "BORDER="0"></A></TD></TR><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172">10.5 Sourceable Scripts </TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="index"HREF="index/idx_0.htm"TITLE="Book Index"><IMGSRC="../gifs/index.gif"ALT="Book Index"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172">10.7 How to Put if-then-else in a C Shell Alias </TD></TR></TABLE><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><IMGSRC="../gifs/smnavbar.gif"USEMAP="#map"BORDER="0"ALT="The UNIX CD Bookshelf Navigation"><MAPNAME="map"><AREASHAPE="RECT"COORDS="0,0,73,21"HREF="../index.htm"ALT="The UNIX CD Bookshelf"><AREASHAPE="RECT"COORDS="74,0,163,21"HREF="index.htm"ALT="UNIX Power Tools"><AREASHAPE="RECT"COORDS="164,0,257,21"HREF="../unixnut/index.htm"ALT="UNIX in a Nutshell"><AREASHAPE="RECT"COORDS="258,0,321,21"HREF="../vi/index.htm"ALT="Learning the vi Editor"><AREASHAPE="RECT"COORDS="322,0,378,21"HREF="../sedawk/index.htm"ALT="sed &amp; awk"><AREASHAPE="RECT"COORDS="379,0,438,21"HREF="../ksh/index.htm"ALT="Learning the Korn Shell"><AREASHAPE="RECT"COORDS="439,0,514,21"HREF="../lrnunix/index.htm"ALT="Learning the UNIX Operating System"></MAP></DIV></BODY></HTML>