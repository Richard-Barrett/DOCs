<HTML><HEAD><TITLE>[Chapter 11] 11.13 Shell Command-Line Editing </TITLE><METANAME="DC.title"CONTENT="UNIX Power Tools"><METANAME="DC.creator"CONTENT="Jerry Peek, Tim O'Reilly &amp; Mike Loukides"><METANAME="DC.publisher"CONTENT="O'Reilly &amp; Associates, Inc."><METANAME="DC.date"CONTENT="1998-08-04T21:36:15Z"><METANAME="DC.type"CONTENT="Text.Monograph"><METANAME="DC.format"CONTENT="text/html"SCHEME="MIME"><METANAME="DC.source"CONTENT="1-56592-260-3"SCHEME="ISBN"><METANAME="DC.language"CONTENT="en-US"><METANAME="generator"CONTENT="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><LINKREV="made"HREF="mailto:online-books@oreilly.com"TITLE="Online Books Comments"><LINKREL="up"HREF="ch11_01.htm"TITLE="11. The Lessons of History"><LINKREL="prev"HREF="ch11_12.htm"TITLE="11.12 Pass History to Another Shell "><LINKREL="next"HREF="ch11_14.htm"TITLE="11.14 More Ways to Do Interactive History Editing "></HEAD><BODYBGCOLOR="#FFFFFF"TEXT="#000000"><DIVCLASS="htmlnav"><H1><IMGSRC="gifs/smbanner.gif"ALT="UNIX Power Tools"USEMAP="#srchmap"BORDER="0"></H1><MAPNAME="srchmap"><AREASHAPE="RECT"COORDS="0,0,466,58"HREF="index.htm"ALT="UNIX Power Tools"><AREASHAPE="RECT"COORDS="467,0,514,18"HREF="../search/psrch.htm"ALT="Search this book"></MAP><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch11_12.htm"TITLE="11.12 Pass History to Another Shell "><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 11.12 Pass History to Another Shell "BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><B><FONTFACE="ARIEL,HELVETICA,HELV,SANSERIF"SIZE="-1">Chapter 11<BR>The Lessons of History</FONT></B></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch11_14.htm"TITLE="11.14 More Ways to Do Interactive History Editing "><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 11.14 More Ways to Do Interactive History Editing "BORDER="0"></A></TD></TR></TABLE>&nbsp;<HRALIGN="LEFT"WIDTH="515"TITLE="footer"></DIV><DIVCLASS="SECT1"><H2CLASS="sect1"><ACLASS="title"NAME="UPT-ART-2200">11.13 Shell Command-Line Editing </A></H2><PCLASS="para">[This article was written for the Korn Shell.<ACLASS="indexterm"NAME="AUTOID-13151"></A><ACLASS="indexterm"NAME="AUTOID-13154"></A>It also applies to <EMCLASS="emphasis">bash</EM> and <EMCLASS="emphasis">tcsh</EM>, though there are somedifferences.Check your shell's manpage. <ICLASS="filename">-JP]</I></P><PCLASS="para">If you make a typing mistake in your shell command line and press RETURN, it's gone. After you get the pesky error message, you'llhave to type the whole thing in again&nbsp;- unless you happen to beusing the C shell <EMCLASS="emphasis">and</EM> happen to remember its<SPANCLASS="link">Byzantine &quot;history&quot; commands (<ACLASS="linkend"HREF="ch11_02.htm"TITLE="History in a Nutshell ">11.2</A>)</SPAN>.If you use the Korn shell, you may know that it givesyou a <EMCLASS="emphasis">vi</EM>-like editing capability; if you've actually triedthis, you probably agree that <EMCLASS="emphasis">vi</EM> makes a lousy command-lineeditor.[I don't agree. <CODECLASS="literal">:-)</CODE>If you know <EMCLASS="emphasis">vi</EM>, hit ESC on a command line to go to <EMCLASS="emphasis">vi</EM>command mode; <EMCLASS="emphasis">a</EM> or <EMCLASS="emphasis">i</EM> takes you to input mode, as always.Hit RETURN from either mode to execute a command line&nbsp;- orCTRL-c to cancel it. <EMCLASS="emphasis">-JP</EM>&nbsp;]</P><PCLASS="para">However, fewer people know that the Korn shell has another editingmode, one that emulates the<SPANCLASS="link">Emacs (<ACLASS="linkend"HREF="ch32_01.htm#UPT-ART-5540"TITLE="Emacs: The Other Editor ">32.1</A>)</SPAN>editor.The emacsmode editing commands act like a natural extension to traditional,simple shell editing commands (like Delete or Backspacefor character erase), so even if youaren't familiar with the <EMCLASS="emphasis">emacs</EM> editor, you should find emacsmode useful. To use emacs mode, put this line in your <EMCLASS="emphasis">.profile</EM>:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">set -o emacs</PRE></BLOCKQUOTE></P><PCLASS="para">We'll cover only the most useful emacs mode commands here. Fora more complete description, see O'Reilly &amp; Associates' <EMCLASS="emphasis">Learning the Korn Shell</EM>, by Bill Rosenblatt.</P><PCLASS="para">Emacs mode figures out what your<SPANCLASS="link">character-erase key (<ACLASS="linkend"HREF="ch05_09.htm"TITLE="Setting Your Erase, Kill, and Interrupt Characters ">5.9</A>)</SPAN>is and lets youuse it in the same way.In addition, it gives you thebasic commands for editing a line listed in<ACLASS="indexterm"NAME="AUTOID-13181"></A><ACLASS="indexterm"NAME="AUTOID-13184"></A><ACLASS="xref"HREF="ch11_13.htm#UPT-ART-2200-TAB-0"TITLE="Korn Shell Emacs Mode Line Editing Commands">Table 11.1</A>.</P><TABLECLASS="table"><CAPTIONCLASS="table"><ACLASS="title"NAME="UPT-ART-2200-TAB-0">Table 11.1: Korn Shell Emacs Mode Line Editing Commands</A></CAPTION><THEADCLASS="thead"><TRCLASS="row"VALIGN="TOP"><THCLASS="entry"ALIGN="LEFT"ROWSPAN="1"COLSPAN="1">Command</TH><THCLASS="entry"ALIGN="LEFT"ROWSPAN="1"COLSPAN="1">Function</TH></TR></THEAD><TBODYCLASS="tbody"><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">CTRL-b</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Move backward one character (without deleting).</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">CTRL-f</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Move forward one character.</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">CTRL-d</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Delete one character forward.</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">CTRL-z</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Move to beginning of line.</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">CTRL-e</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Move to end of line.</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">CTRL-k</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Delete (&quot;kill&quot;) forward to end of line.</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">CTRL-w</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Delete (&quot;wipe&quot;) backward to beginning of line.</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">CTRL-y</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Retrieve (&quot;yank&quot;) last deleted item.</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">CTRL-c</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Delete entire line.</TD></TR></TBODY></TABLE><PCLASS="para">In addition, emacs mode maintains a history file that enables youto recall previous commands.The commands in<ACLASS="xref"HREF="ch11_13.htm#UPT-ART-2200-TAB-1"TITLE="Korn Shell Emacs Mode History Commands">Table 11.2</A>are the mostimportant of those that let you navigate the history file.</P><TABLECLASS="table"><CAPTIONCLASS="table"><ACLASS="title"NAME="UPT-ART-2200-TAB-1">Table 11.2: Korn Shell Emacs Mode History Commands</A></CAPTION><THEADCLASS="thead"><TRCLASS="row"VALIGN="TOP"><THCLASS="entry"ALIGN="LEFT"ROWSPAN="1"COLSPAN="1">Command</TH><THCLASS="entry"ALIGN="LEFT"ROWSPAN="1"COLSPAN="1">Function</TH></TR></THEAD><TBODYCLASS="tbody"><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">CTRL-p</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Go to previous command.</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">CTRL-n</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Go to next command.</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">CTRL-r<EMCLASS="emphasis">string</EM></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Search backward for command containing <EMCLASS="emphasis">string</EM>.</TD></TR></TBODY></TABLE><PCLASS="para">The first of these is the most useful by far&nbsp;- it's the &quot;I madea mistake, so I'll go back and fix it&quot; key. The search capabilitylets you bring back specific commands you may have typed awhileago without having to go through the history file line by linewith CTRL-p. Just enter CTRL-r followed by a search string and RETURN,and the Korn shell will bring back the <EMCLASS="emphasis">most recent</EM> commandthat contains the search string (or beep at you if it finds no match).Assuming it is the command you want, you would then press RETURNagain to run the command.If you begin your search string with a caret (<CODECLASS="literal">^</CODE>), it will only matchcommands that begin with the search string; this will be familiarbehavior to users of such UNIX tools as <EMCLASS="emphasis">grep</EM>, <EMCLASS="emphasis">sed</EM>, and<EMCLASS="emphasis">awk</EM>.</P><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-13251"></A><ACLASS="indexterm"NAME="AUTOID-13254"></A>Another extremely useful feature of emacs mode is the <EMCLASS="emphasis">filenamecompletion</EM> facility, which should be familiar to C shell expertsas well as Emacs users (see article<ACLASS="xref"HREF="ch09_08.htm"TITLE="Filename Completion: Faster Filename Typing ">9.8</A>).Emacs mode supports two completion commands, the most useful of whichis ESC&nbsp;ESC (the Escape key pressed twice).If you type in a word and press ESC&nbsp;ESC, the shell will search for a filenamethat begins with what you typed and try to finish it. If there isonly one filename that begins with your word, the shell will completethe name. If there is more than one, it will only complete out asfar as it can without having to make a choice.</P><PCLASS="para">For example, if your directory contained the file <EMCLASS="emphasis">program.c</EM>and you typed <CODECLASS="literal">pro</CODE> followed by ESC&nbsp;ESC, the shell would automaticallycomplete the filename and leave you an extra space. But if yourdirectory also contained the file <EMCLASS="emphasis">program.o</EM>, the shell wouldonly complete out to <CODECLASS="literal">program.</CODE> and let you complete the filenameyourself.</P><PCLASS="para">[Another way to do history editing is with your own editor:the<SPANCLASS="link"><EMCLASS="emphasis">fc</EM> command (<ACLASS="linkend"HREF="ch11_14.htm"TITLE="More Ways to Do Interactive History Editing ">11.14</A>)</SPAN>.<EMCLASS="emphasis">-JP</EM>&nbsp;]</P><DIVCLASS="sect1info"><PCLASS="SECT1INFO">- <SPANCLASS="authorinitials">BR</SPAN></P></DIV></DIV><DIVCLASS="htmlnav"><P></P><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch11_12.htm"TITLE="11.12 Pass History to Another Shell "><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 11.12 Pass History to Another Shell "BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="book"HREF="index.htm"TITLE="UNIX Power Tools"><IMGSRC="../gifs/txthome.gif"ALT="UNIX Power Tools"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch11_14.htm"TITLE="11.14 More Ways to Do Interactive History Editing "><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 11.14 More Ways to Do Interactive History Editing "BORDER="0"></A></TD></TR><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172">11.12 Pass History to Another Shell </TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="index"HREF="index/idx_0.htm"TITLE="Book Index"><IMGSRC="../gifs/index.gif"ALT="Book Index"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172">11.14 More Ways to Do Interactive History Editing </TD></TR></TABLE><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><IMGSRC="../gifs/smnavbar.gif"USEMAP="#map"BORDER="0"ALT="The UNIX CD Bookshelf Navigation"><MAPNAME="map"><AREASHAPE="RECT"COORDS="0,0,73,21"HREF="../index.htm"ALT="The UNIX CD Bookshelf"><AREASHAPE="RECT"COORDS="74,0,163,21"HREF="index.htm"ALT="UNIX Power Tools"><AREASHAPE="RECT"COORDS="164,0,257,21"HREF="../unixnut/index.htm"ALT="UNIX in a Nutshell"><AREASHAPE="RECT"COORDS="258,0,321,21"HREF="../vi/index.htm"ALT="Learning the vi Editor"><AREASHAPE="RECT"COORDS="322,0,378,21"HREF="../sedawk/index.htm"ALT="sed &amp; awk"><AREASHAPE="RECT"COORDS="379,0,438,21"HREF="../ksh/index.htm"ALT="Learning the Korn Shell"><AREASHAPE="RECT"COORDS="439,0,514,21"HREF="../lrnunix/index.htm"ALT="Learning the UNIX Operating System"></MAP></DIV></BODY></HTML>