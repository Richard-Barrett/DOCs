<HTML><HEAD><TITLE>[Chapter 14] 14.6 The Shells' pushd and popd Commands </TITLE><METANAME="DC.title"CONTENT="UNIX Power Tools"><METANAME="DC.creator"CONTENT="Jerry Peek, Tim O'Reilly &amp; Mike Loukides"><METANAME="DC.publisher"CONTENT="O'Reilly &amp; Associates, Inc."><METANAME="DC.date"CONTENT="1998-08-04T21:37:03Z"><METANAME="DC.type"CONTENT="Text.Monograph"><METANAME="DC.format"CONTENT="text/html"SCHEME="MIME"><METANAME="DC.source"CONTENT="1-56592-260-3"SCHEME="ISBN"><METANAME="DC.language"CONTENT="en-US"><METANAME="generator"CONTENT="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><LINKREV="made"HREF="mailto:online-books@oreilly.com"TITLE="Online Books Comments"><LINKREL="up"HREF="ch14_01.htm"TITLE="14. Moving Around in a Hurry"><LINKREL="prev"HREF="ch14_05.htm"TITLE="14.5 Saving Time When You Change Directories: cdpath "><LINKREL="next"HREF="ch14_07.htm"TITLE="14.7 Nice Aliases for pushd "></HEAD><BODYBGCOLOR="#FFFFFF"TEXT="#000000"><DIVCLASS="htmlnav"><H1><IMGSRC="gifs/smbanner.gif"ALT="UNIX Power Tools"USEMAP="#srchmap"BORDER="0"></H1><MAPNAME="srchmap"><AREASHAPE="RECT"COORDS="0,0,466,58"HREF="index.htm"ALT="UNIX Power Tools"><AREASHAPE="RECT"COORDS="467,0,514,18"HREF="../search/psrch.htm"ALT="Search this book"></MAP><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch14_05.htm"TITLE="14.5 Saving Time When You Change Directories: cdpath "><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 14.5 Saving Time When You Change Directories: cdpath "BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><B><FONTFACE="ARIEL,HELVETICA,HELV,SANSERIF"SIZE="-1">Chapter 14<BR>Moving Around in a Hurry</FONT></B></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch14_07.htm"TITLE="14.7 Nice Aliases for pushd "><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 14.7 Nice Aliases for pushd "BORDER="0"></A></TD></TR></TABLE>&nbsp;<HRALIGN="LEFT"WIDTH="515"TITLE="footer"></DIV><DIVCLASS="SECT1"><H2CLASS="sect1"><ACLASS="title"NAME="UPT-ART-1390">14.6 The Shells' pushd and popd Commands </A></H2><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-15346"></A><ACLASS="indexterm"NAME="AUTOID-15348"></A><ACLASS="indexterm"NAME="AUTOID-15350"></A>How often do you need to move to some other directory temporarily,look at some file, and then move back to the directory where youstarted?If you're like most users, you do this all the time.<EMCLASS="emphasis">csh</EM> and <EMCLASS="emphasis">bash</EM> have<EMCLASS="emphasis">pushd</EM> and <EMCLASS="emphasis">popd</EM> commands make this a lot easier.(If you use <EMCLASS="emphasis">ksh</EM>, O'Reilly &amp;amp; Associates' <EMCLASS="emphasis">Learning the KornShell</EM> shows you shell functions that do the same thing.)</P><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-15359"></A><ACLASS="indexterm"NAME="AUTOID-15362"></A>These commands implement a &quot;directory stack.&quot;The classicalanalogy for a stack is one of those spring-loaded plate stackers in aschool cafeteria.The last plate put (&quot;pushed&quot;) onto the stack is thefirst plate taken (&quot;popped&quot;) from the stack.It's just the same withdirectories: each time you use <EMCLASS="emphasis">pushd</EM>, the shell adds yourcurrent directory to the stack and moves you to the new directory.When youuse <EMCLASS="emphasis">popd</EM>, the shell takes the top directory off the stack,and moves you to the directory underneath.</P><PCLASS="para">You may as well learn about <EMCLASS="emphasis">pushd</EM> the way I did: by watching.Let's say that I'm in the directory <EMCLASS="emphasis">~/power</EM>, working on thisbook. I want to change to my <EMCLASS="emphasis">Mail</EM> directory briefly, to look atsome old correspondence.Here's how:[1]</P><BLOCKQUOTECLASS="footnote"><PCLASS="para">[1] If you've set a<SPANCLASS="link">cdpath (<ACLASS="linkend"HREF="ch14_05.htm"TITLE="Saving Time When You Change Directories: cdpath ">14.5</A>)</SPAN>you can use those short directory names with <EMCLASS="emphasis">pushd</EM>.</P></BLOCKQUOTE><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">los% <CODECLASS="userinput"><B>pushd ~/Mail</B></CODE>   ...<EMCLASS="emphasis">current directory becomes ~/Mail</EM>~/Mail ~/power </PRE></BLOCKQUOTE></P><PCLASS="para"><EMCLASS="emphasis">pushd</EM> prints the entire stack, giving me some confirmation aboutwhere I am, and where I can go.When I'm done reading the old mail,I want to move back:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">los% <CODECLASS="userinput"><B>popd</B></CODE>   ...<EMCLASS="emphasis">current directory becomes ~/power</EM>~/power </PRE></BLOCKQUOTE></P><PCLASS="para">We're back where we started; the <EMCLASS="emphasis">Mail</EM> directory is no longer onthe stack.</P><PCLASS="para">What if you want to move back and forth repeatedly?<EMCLASS="emphasis">pushd</EM>, withno arguments, just switches the two top directories on the stack.Like this:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">los% <CODECLASS="userinput"><B>pwd</B></CODE>   ...<EMCLASS="emphasis">current directory is ~/power</EM>/home/los/mikel/powerlos% <CODECLASS="userinput"><B>pushd ~/Mail</B></CODE>   ...<EMCLASS="emphasis">current directory becomes ~/Mail</EM>~/Mail ~/power los% <CODECLASS="userinput"><B>pushd</B></CODE>   ...<EMCLASS="emphasis">current directory becomes ~/power</EM>~/power ~/Mail los% <CODECLASS="userinput"><B>pushd</B></CODE>   ...<EMCLASS="emphasis">current directory becomes ~/Mail</EM>~/Mail ~/power </PRE></BLOCKQUOTE></P><PCLASS="para">And so on.</P><PCLASS="para">If you like, you can let your directory stack get really long.Inthis case, two special commands are useful.<CODECLASS="literal">popd&amp;nbsp;</CODE>+<CODECLASS="replaceable"><I>n</I></CODE>deletes the <EMCLASS="emphasis">n</EM> entry in the stack.Entries are counted &quot;down&quot;from the top, starting with zero; that is, your current directory is 0.So <CODECLASS="literal">popd +0</CODE> and <CODECLASS="literal">popd</CODE> are the same.If <EMCLASS="emphasis">n</EM> is greaterthan 0, your current directory does not change.This may seemsurprising, but it isn't; after all, you haven't changed the top ofthe stack.</P><PCLASS="para">The command <CODECLASS="literal">pushd +</CODE><CODECLASS="replaceable"><I>n</I></CODE> &quot;rotates&quot; the stack, so that the<EMCLASS="emphasis">n</EM>th directory moves to the top, becoming the current directory.Note that this is a &quot;rotation&quot;: the whole stack moves.I don't findthe <CODECLASS="literal">+</CODE><CODECLASS="replaceable"><I>n</I></CODE> commands too useful, but you should know about them.</P><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-15413"></A>The <EMCLASS="emphasis">dirs</EM> command prints the directory stack.It's a good way tofind out where you are.Some people like to <SPANCLASS="link">put the <EMCLASS="emphasis">dirs</EM> command in their prompt (<ACLASS="linkend"HREF="ch07_11.htm"TITLE="dirs in Your Prompt: Better than $cwd ">7.11</A>)</SPAN>,but I personally find incredibly long prompts more annoying than helpful.</P><PCLASS="para">The one drawback to <EMCLASS="emphasis">pushd</EM> and <EMCLASS="emphasis">popd</EM> is that you can easilybuild up a gigantic directory stack full of useless directories.Isuppose this doesn't really hurt anything, but it's needless clutter.The only way to clear the stack is to <EMCLASS="emphasis">popd</EM> repeatedly (except,in <EMCLASS="emphasis">tcsh</EM>, the command <EMCLASS="emphasis">dirs&amp;nbsp;-c</EM> clears the stack).More tothe point, the directories you're most likely to <EMCLASS="emphasis">want</EM> are at thetop of the stack.There's no really convenient way to save them.I mean, with 7 directories in the stack, you could conceivably dosomething like:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">% <CODECLASS="userinput"><B>pushd +5 ; popd ; popd</B></CODE></PRE></BLOCKQUOTE></P><PCLASS="para">to get rid of the bottom two elements.The <EMCLASS="emphasis">pushd</EM> moves thebottom two elements of a 7-directory stack to the top.A bitinconvenient.[Clearing the whole stack is a good use for the C shell<SPANCLASS="link"><EMCLASS="emphasis">repeat</EM> (<ACLASS="linkend"HREF="ch09_25.htm"TITLE="The C Shell repeat Command ">9.25</A>)</SPAN>command.For example, if the stack has 7 directories, type:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">% <CODECLASS="userinput"><B>repeat 6 popd</B></CODE></PRE></BLOCKQUOTE></P><PCLASS="para">That's an easy way to start over when the stack gets too messy. <EMCLASS="emphasis">&amp;ndash;JP</EM>&amp;nbsp;]</P><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-15438"></A><EMCLASS="emphasis">tcsh</EM> has a <EMCLASS="emphasis">savedirs</EM><SPANCLASS="link">shell variable  (<ACLASS="linkend"HREF="ch06_08.htm"TITLE="Shell Variables ">6.8</A>)</SPAN>.If you set <EMCLASS="emphasis">savedirs</EM>, <EMCLASS="emphasis">tcsh</EM> will save your directory stack to thefile <CODECLASS="replaceable"><I>~/.cshdirs</I></CODE> when you log out, and reset the same stack when youlog in again.</P><BLOCKQUOTECLASS="note"><PCLASS="para"><STRONG>NOTE:</STRONG> <ACLASS="indexterm"NAME="AUTOID-15448"></A><ACLASS="indexterm"NAME="AUTOID-15451"></A>The Korn shell has some similar (but not quite as general)features.  It keeps track of your previous working directory, and thendefines the special command <CODECLASS="literal">cd -</CODE> as &quot;change to the previousworking directory.&quot;</P></BLOCKQUOTE><DIVCLASS="sect1info"><PCLASS="SECT1INFO">- <SPANCLASS="authorinitials">ML</SPAN></P></DIV></DIV><DIVCLASS="htmlnav"><P></P><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch14_05.htm"TITLE="14.5 Saving Time When You Change Directories: cdpath "><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 14.5 Saving Time When You Change Directories: cdpath "BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="book"HREF="index.htm"TITLE="UNIX Power Tools"><IMGSRC="../gifs/txthome.gif"ALT="UNIX Power Tools"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch14_07.htm"TITLE="14.7 Nice Aliases for pushd "><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 14.7 Nice Aliases for pushd "BORDER="0"></A></TD></TR><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172">14.5 Saving Time When You Change Directories: cdpath </TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="index"HREF="index/idx_0.htm"TITLE="Book Index"><IMGSRC="../gifs/index.gif"ALT="Book Index"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172">14.7 Nice Aliases for pushd </TD></TR></TABLE><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><IMGSRC="../gifs/smnavbar.gif"USEMAP="#map"BORDER="0"ALT="The UNIX CD Bookshelf Navigation"><MAPNAME="map"><AREASHAPE="RECT"COORDS="0,0,73,21"HREF="../index.htm"ALT="The UNIX CD Bookshelf"><AREASHAPE="RECT"COORDS="74,0,163,21"HREF="index.htm"ALT="UNIX Power Tools"><AREASHAPE="RECT"COORDS="164,0,257,21"HREF="../unixnut/index.htm"ALT="UNIX in a Nutshell"><AREASHAPE="RECT"COORDS="258,0,321,21"HREF="../vi/index.htm"ALT="Learning the vi Editor"><AREASHAPE="RECT"COORDS="322,0,378,21"HREF="../sedawk/index.htm"ALT="sed &amp; awk"><AREASHAPE="RECT"COORDS="379,0,438,21"HREF="../ksh/index.htm"ALT="Learning the Korn Shell"><AREASHAPE="RECT"COORDS="439,0,514,21"HREF="../lrnunix/index.htm"ALT="Learning the UNIX Operating System"></MAP></DIV></BODY></HTML>