<HTML><HEAD><TITLE>[Chapter 15] 15.7 Getting a List of Matching Files with grep -l </TITLE><METANAME="DC.title"CONTENT="UNIX Power Tools"><METANAME="DC.creator"CONTENT="Jerry Peek, Tim O'Reilly &amp; Mike Loukides"><METANAME="DC.publisher"CONTENT="O'Reilly &amp; Associates, Inc."><METANAME="DC.date"CONTENT="1998-08-04T21:37:26Z"><METANAME="DC.type"CONTENT="Text.Monograph"><METANAME="DC.format"CONTENT="text/html"SCHEME="MIME"><METANAME="DC.source"CONTENT="1-56592-260-3"SCHEME="ISBN"><METANAME="DC.language"CONTENT="en-US"><METANAME="generator"CONTENT="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><LINKREV="made"HREF="mailto:online-books@oreilly.com"TITLE="Online Books Comments"><LINKREL="up"HREF="ch15_01.htm"TITLE="15. Wildcards"><LINKREL="prev"HREF="ch15_06.htm"TITLE="15.6 Maybe You Shouldn't Use Wildcards in Pathnames "><LINKREL="next"HREF="ch15_08.htm"TITLE="15.8 Getting a List of Non-Matching Files with grep -c "></HEAD><BODYBGCOLOR="#FFFFFF"TEXT="#000000"><DIVCLASS="htmlnav"><H1><IMGSRC="gifs/smbanner.gif"ALT="UNIX Power Tools"USEMAP="#srchmap"BORDER="0"></H1><MAPNAME="srchmap"><AREASHAPE="RECT"COORDS="0,0,466,58"HREF="index.htm"ALT="UNIX Power Tools"><AREASHAPE="RECT"COORDS="467,0,514,18"HREF="../search/psrch.htm"ALT="Search this book"></MAP><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch15_06.htm"TITLE="15.6 Maybe You Shouldn't Use Wildcards in Pathnames "><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 15.6 Maybe You Shouldn't Use Wildcards in Pathnames "BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><B><FONTFACE="ARIEL,HELVETICA,HELV,SANSERIF"SIZE="-1">Chapter 15<BR>Wildcards</FONT></B></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch15_08.htm"TITLE="15.8 Getting a List of Non-Matching Files with grep -c "><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 15.8 Getting a List of Non-Matching Files with grep -c "BORDER="0"></A></TD></TR></TABLE>&nbsp;<HRALIGN="LEFT"WIDTH="515"TITLE="footer"></DIV><DIVCLASS="SECT1"><H2CLASS="sect1"><ACLASS="title"NAME="UPT-ART-1510">15.7 Getting a List of Matching Files with grep -l </A></H2><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-16427"></A>Normally when you run<SPANCLASS="link"><EMCLASS="emphasis">grep</EM> (<ACLASS="linkend"HREF="ch27_01.htm#UPT-ART-7420"TITLE="Different Versions of grep ">27.1</A>)</SPAN>on a group of files, the output lists thefilename along with the line containing the search pattern. Sometimes youwant to know only the names of the files, and you don't care to know theline (or lines) that match.In this case, use the <EMCLASS="emphasis">-l</EM> (lowercase letter &quot;l&quot;)option to list only filenames wherematches occur.For example, the command:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">% <CODECLASS="userinput"><B>grep -l R5 </B></CODE><CODECLASS="replaceable"><I>file1 file2 ... </I></CODE><CODECLASS="userinput"><B>&gt; r5.filelist</B></CODE></PRE></BLOCKQUOTE></P><PCLASS="para">searches the files for a line containing the string <CODECLASS="literal">R5</CODE>,produces a list of those filenames, andstores the list in <EMCLASS="emphasis">r5.filelist</EM>. (This list might represent the filescontaining Release 5 documentation of a particular product.) Because theseRelease 5 files can now be referenced by one list, you can treat them as asingle entity and run various commands on them all at once:</P><PCLASS="para"><TABLECLASS="screen.co"BORDER="1"><TR><THVALIGN="TOP"><PRECLASS="calloutlist"><ACLASS="co"HREF="ch09_16.htm"TITLE="9.16 Command Substitution ">`...`</A> &#13;</PRE></TH><TDVALIGN="TOP"><PRECLASS="screen">% <CODECLASS="userinput"><B>print `cat r5.filelist`   </B></CODE><EMCLASS="emphasis">Print only the Release 5 files</EM>% <CODECLASS="userinput"><B>grep UNIX `cat r5.filelist`   </B></CODE><EMCLASS="emphasis">Search limited to the Release 5 files</EM></PRE></TD></TR></TABLE></P><PCLASS="para">You don't have to create a file list, though.You can insert the output of a <EMCLASS="emphasis">grep</EM> directly into a command linewith command substitution.For example, to edit only the subset of files containing <CODECLASS="literal">R5</CODE>, you would type:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">% <CODECLASS="userinput"><B>vi `grep -l R5 <CODECLASS="replaceable"><I>files</I></CODE>`</B></CODE></PRE></BLOCKQUOTE></P><PCLASS="para"><EMCLASS="emphasis">grep&nbsp;-l</EM> is also good for shell programs that need to checkwhether a file contains a particular string.The traditional way to do that test is by throwing away <EMCLASS="emphasis">grep</EM>'soutput and checking its exit status:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">if grep <CODECLASS="replaceable"><I>something somefile</I></CODE> &gt;/dev/nullthen ...</PRE></BLOCKQUOTE></P><PCLASS="para">If <EMCLASS="emphasis">somefile</EM> is huge, though, <EMCLASS="emphasis">grep</EM> has to search all of it.Adding the <EMCLASS="emphasis">grep -l</EM> option saves time because <EMCLASS="emphasis">grep</EM> can stopsearching after it finds the first matching line.</P><DIVCLASS="sect1info"><PCLASS="SECT1INFO">- <SPANCLASS="authorinitials">DG</SPAN>, <SPANCLASS="authorinitials">JP</SPAN></P></DIV></DIV><DIVCLASS="htmlnav"><P></P><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch15_06.htm"TITLE="15.6 Maybe You Shouldn't Use Wildcards in Pathnames "><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 15.6 Maybe You Shouldn't Use Wildcards in Pathnames "BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="book"HREF="index.htm"TITLE="UNIX Power Tools"><IMGSRC="../gifs/txthome.gif"ALT="UNIX Power Tools"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch15_08.htm"TITLE="15.8 Getting a List of Non-Matching Files with grep -c "><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 15.8 Getting a List of Non-Matching Files with grep -c "BORDER="0"></A></TD></TR><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172">15.6 Maybe You Shouldn't Use Wildcards in Pathnames </TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="index"HREF="index/idx_0.htm"TITLE="Book Index"><IMGSRC="../gifs/index.gif"ALT="Book Index"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172">15.8 Getting a List of Non-Matching Files with grep -c </TD></TR></TABLE><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><IMGSRC="../gifs/smnavbar.gif"USEMAP="#map"BORDER="0"ALT="The UNIX CD Bookshelf Navigation"><MAPNAME="map"><AREASHAPE="RECT"COORDS="0,0,73,21"HREF="../index.htm"ALT="The UNIX CD Bookshelf"><AREASHAPE="RECT"COORDS="74,0,163,21"HREF="index.htm"ALT="UNIX Power Tools"><AREASHAPE="RECT"COORDS="164,0,257,21"HREF="../unixnut/index.htm"ALT="UNIX in a Nutshell"><AREASHAPE="RECT"COORDS="258,0,321,21"HREF="../vi/index.htm"ALT="Learning the vi Editor"><AREASHAPE="RECT"COORDS="322,0,378,21"HREF="../sedawk/index.htm"ALT="sed &amp; awk"><AREASHAPE="RECT"COORDS="379,0,438,21"HREF="../ksh/index.htm"ALT="Learning the Korn Shell"><AREASHAPE="RECT"COORDS="439,0,514,21"HREF="../lrnunix/index.htm"ALT="Learning the UNIX Operating System"></MAP></DIV></BODY></HTML>