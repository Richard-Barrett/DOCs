<HTML><HEAD><TITLE>[Chapter 16] 16.2 Finding Oldest or Newest Files with ls -t and ls -u </TITLE><METANAME="DC.title"CONTENT="UNIX Power Tools"><METANAME="DC.creator"CONTENT="Jerry Peek, Tim O'Reilly &amp; Mike Loukides"><METANAME="DC.publisher"CONTENT="O'Reilly &amp; Associates, Inc."><METANAME="DC.date"CONTENT="1998-08-04T21:37:35Z"><METANAME="DC.type"CONTENT="Text.Monograph"><METANAME="DC.format"CONTENT="text/html"SCHEME="MIME"><METANAME="DC.source"CONTENT="1-56592-260-3"SCHEME="ISBN"><METANAME="DC.language"CONTENT="en-US"><METANAME="generator"CONTENT="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><LINKREV="made"HREF="mailto:online-books@oreilly.com"TITLE="Online Books Comments"><LINKREL="up"HREF="ch16_01.htm"TITLE="16. Where Did I Put That?"><LINKREL="prev"HREF="ch16_01.htm"TITLE="16.1 Everything but the find Command "><LINKREL="next"HREF="ch16_03.htm"TITLE="16.3 Reordering ls Listings "></HEAD><BODYBGCOLOR="#FFFFFF"TEXT="#000000"><DIVCLASS="htmlnav"><H1><IMGSRC="gifs/smbanner.gif"ALT="UNIX Power Tools"USEMAP="#srchmap"BORDER="0"></H1><MAPNAME="srchmap"><AREASHAPE="RECT"COORDS="0,0,466,58"HREF="index.htm"ALT="UNIX Power Tools"><AREASHAPE="RECT"COORDS="467,0,514,18"HREF="../search/psrch.htm"ALT="Search this book"></MAP><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch16_01.htm"TITLE="16.1 Everything but the find Command "><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 16.1 Everything but the find Command "BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><B><FONTFACE="ARIEL,HELVETICA,HELV,SANSERIF"SIZE="-1">Chapter 16<BR>Where Did I Put That?</FONT></B></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch16_03.htm"TITLE="16.3 Reordering ls Listings "><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 16.3 Reordering ls Listings "BORDER="0"></A></TD></TR></TABLE>&nbsp;<HRALIGN="LEFT"WIDTH="515"TITLE="footer"></DIV><DIVCLASS="SECT1"><H2CLASS="sect1"><ACLASS="title"NAME="UPT-ART-1570">16.2 Finding Oldest or Newest Files with ls -t and ls -u </A></H2><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-16682"></A><ACLASS="indexterm"NAME="AUTOID-16685"></A><ACLASS="indexterm"NAME="AUTOID-16688"></A>Your directory might have 50, 100, or more files.Which files haven't been used for a while?You might be able to save space by removing them.You read or edited a file yesterday but you can't remember its name?These commands will help you find it.(If you want a quick review of UNIX file times, see article<ACLASS="xref"HREF="ch16_05.htm"TITLE="The Three UNIX File Times ">16.5</A>.)</P><PCLASS="para">In this example, I'll show you my<SPANCLASS="link"><EMCLASS="emphasis">bin</EM> (<ACLASS="linkend"HREF="ch04_02.htm"TITLE="A bin Directory for Your Programs and Scripts ">4.2</A>)</SPAN>directory full of shell scripts and other programs-I want to see whichprograms I don't use very often.You can use the same technique for directories with text or other files.</P><PCLASS="para">The <EMCLASS="emphasis">ls</EM> command has options to change the way it orders files.By default, <EMCLASS="emphasis">ls</EM> lists files alphabetically&nbsp;- that probably won'thelp you find old files, but it's a good place to start this explanation.<ACLASS="indexterm"NAME="AUTOID-16697"></A>For finding old files, use the <EMCLASS="emphasis">-t</EM> option. This sorts files bytheir <EMCLASS="emphasis">modification time</EM>, orthe last time the file was changed. Thenewest files are listed first. Here's what happens:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">jerry@ora ~/.bin 60 % <CODECLASS="userinput"><B>ls -t</B></CODE>weather       unshar        scandrafts    rn2mh         recompcrontab       zloop         tofrom        rmmer         mhprofilerhyes         showpr        incc          mhadd         appendrhno          rfl           drmm          fixsubj       READMEpickthis      maillog       reheader      distprompter  rtfmcgrep         c-w           zrefile       xmhprint      saveartdirtop        cw            zscan         replf         echoerrwhich         cx            zfolders      folstcx           showmult      alifile       incs</PRE></BLOCKQUOTE></P><PCLASS="para">I just added a shell script named <EMCLASS="emphasis">weather</EM> yesterday; you can seeit as the first file in the first column.I also made a change to my script named <EMCLASS="emphasis">crontab</EM> last week;it's shown next.The oldest program in here is <EMCLASS="emphasis">echoerr</EM>; it's listed last.[1]</P><BLOCKQUOTECLASS="footnote"><PCLASS="para">[1] On some systems, <EMCLASS="emphasis">ls -t</EM> will list the files inone column, with the newest file first. Although that's usually apain, I actually find that more convenient when I'm interested in themost recent files. If your system does that and you don't like thesingle-column display, you can use <EMCLASS="emphasis">ls -Ct</EM>.On other systems, if a single column display would be handy, use <EMCLASS="emphasis">ls -1t</EM>;the &quot;1&quot; option means &quot;one column.&quot;Throughout this article, we'll assume you're using a multi-column display.</P></BLOCKQUOTE><PCLASS="para"><EMCLASS="emphasis">ls -t</EM> is also great for file time comparisons<SPANCLASS="link">in a script (<ACLASS="linkend"HREF="ch02_15.htm"TITLE="Unclutter Logins: Show Login Messages Just Once ">2.15</A>, <ACLASS="linkend"HREF="ch16_27.htm"TITLE="newer: Print the Name of the Newest File ">16.27</A>)</SPAN>.[Personally, I find <EMCLASS="emphasis">ls -t</EM> most useful when I've forgottenwhether or not I've edited a file recently. If I've changed a file,it will be at or near the top of the <EMCLASS="emphasis">ls -t</EM> listing. Forexample, I might ask, &quot;Have I made the changes to that letter I wasgoing to send?&quot; If I haven't made the changes (but only think I have),my letter will most likely appear somewhere in the middle of the listing. <EMCLASS="emphasis">-ML</EM>&nbsp;]</P><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-16721"></A>The <EMCLASS="emphasis">-u</EM> option shows the files' last-access time instead of thelast-modification time.The <EMCLASS="emphasis">-u</EM> option doesn't do anything with plain <EMCLASS="emphasis">ls</EM>-you have to useit with another option like <EMCLASS="emphasis">-t</EM> or <EMCLASS="emphasis">-l</EM>.The next listing shows that I've recently used the <EMCLASS="emphasis">rtfm</EM> and<EMCLASS="emphasis">rmmer</EM> files.I haven't read <EMCLASS="emphasis">README</EM> in a long time, though&nbsp;- oops:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">jerry@ora ~/.bin62 % <CODECLASS="userinput"><B>ls -tu</B></CODE>rtfm          cx            drmm          saveart       fixsubjrmmer         c-w           zscan         scandrafts    echoerrrfl           cw            zrefile       rhno          dirtopmhprofile     distprompter  xmhprint      rhyes         cgrepshowmult      recomp        zloop         replf         appendtcx           crontab       zfolders      reheader      alifiletofrom        mhadd         which         incs          READMErn2mh         pickthis      unshar        maillogweather       incc          showpr        fols</PRE></BLOCKQUOTE></P><PCLASS="para">(Some UNIXes<SPANCLASS="link">don't update the last-access time of executable files (<ACLASS="linkend"HREF="ch21_05.htm"TITLE="What Good Is a File's Last Access Time? ">21.5</A>)</SPAN>when you run them.Shell scripts are always read, so their last-access times will always beupdated.)</P><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-16738"></A><ACLASS="indexterm"NAME="AUTOID-16741"></A><ACLASS="indexterm"NAME="AUTOID-16744"></A>The <EMCLASS="emphasis">-c</EM> option shows when the file's<SPANCLASS="link">inode information (<ACLASS="linkend"HREF="ch01_22.htm"TITLE="How UNIX Keeps Track of Files: Inodes ">1.22</A>, <ACLASS="linkend"HREF="ch21_06.htm"TITLE="A File's Inode Change (not  &#34;Creation&quot;!) Time">21.6</A>)</SPAN>was last changed.The inode time tells when the file was created, when you used <EMCLASS="emphasis">chmod</EM>to change thepermissions, and so on.That doesn't help you find &quot;stale&quot; files:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">jerry@ora ~/.bin 64 % <CODECLASS="userinput"><B>ls -tc</B></CODE>weather      maillog       reheader      recomp        incs          crontab      tcx           rn2mh         fols          cx            cgrep        zscan         tofrom        rmmer         cw            zloop        zrefile       mhadd         fixsubj       c-w           dirtop       rfl           drmm          mhprofile     echoerr       pickthis     showmult      alifile       append        which         rhno         rtfm          showpr        saveart       README        unshar       incc          scandrafts    distprompter  rhyes        zfolders      xmhprint      replf</PRE></BLOCKQUOTE></P><PCLASS="para">If you're wondering just how long ago a file was modified (or accessed),add the <EMCLASS="emphasis">-l</EM> option for a long listing.As before, adding <EMCLASS="emphasis">-u</EM> shows the last-access time; <EMCLASS="emphasis">-c</EM> showsinode change time.If I look at the access times of a few specific files, I find that Ihaven't read <EMCLASS="emphasis">README</EM> since 1989...</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">jerry@ora ~/.bin 65 % <CODECLASS="userinput"><B>ls -ltu README alifile maillog</B></CODE>-rwxr-xr-x   1 jerry    ora           59 Feb  2  1991 maillog-rwxrwxr-x   1 jerry    ora          213 Nov 29  1989 alifile-rw-r--r--   1 jerry    ora         3654 Nov 27  1989 README</PRE></BLOCKQUOTE></P><DIVCLASS="sect1info"><PCLASS="SECT1INFO">- <SPANCLASS="authorinitials">JP</SPAN></P></DIV></DIV><DIVCLASS="htmlnav"><P></P><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch16_01.htm"TITLE="16.1 Everything but the find Command "><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 16.1 Everything but the find Command "BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="book"HREF="index.htm"TITLE="UNIX Power Tools"><IMGSRC="../gifs/txthome.gif"ALT="UNIX Power Tools"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch16_03.htm"TITLE="16.3 Reordering ls Listings "><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 16.3 Reordering ls Listings "BORDER="0"></A></TD></TR><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172">16.1 Everything but the find Command </TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="index"HREF="index/idx_0.htm"TITLE="Book Index"><IMGSRC="../gifs/index.gif"ALT="Book Index"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172">16.3 Reordering ls Listings </TD></TR></TABLE><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><IMGSRC="../gifs/smnavbar.gif"USEMAP="#map"BORDER="0"ALT="The UNIX CD Bookshelf Navigation"><MAPNAME="map"><AREASHAPE="RECT"COORDS="0,0,73,21"HREF="../index.htm"ALT="The UNIX CD Bookshelf"><AREASHAPE="RECT"COORDS="74,0,163,21"HREF="index.htm"ALT="UNIX Power Tools"><AREASHAPE="RECT"COORDS="164,0,257,21"HREF="../unixnut/index.htm"ALT="UNIX in a Nutshell"><AREASHAPE="RECT"COORDS="258,0,321,21"HREF="../vi/index.htm"ALT="Learning the vi Editor"><AREASHAPE="RECT"COORDS="322,0,378,21"HREF="../sedawk/index.htm"ALT="sed &amp; awk"><AREASHAPE="RECT"COORDS="379,0,438,21"HREF="../ksh/index.htm"ALT="Learning the Korn Shell"><AREASHAPE="RECT"COORDS="439,0,514,21"HREF="../lrnunix/index.htm"ALT="Learning the UNIX Operating System"></MAP></DIV></BODY></HTML>