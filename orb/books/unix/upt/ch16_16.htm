<HTML><HEAD><TITLE>[Chapter 16] 16.16 Picking a Unique Filename Automatically </TITLE><METANAME="DC.title"CONTENT="UNIX Power Tools"><METANAME="DC.creator"CONTENT="Jerry Peek, Tim O'Reilly &amp; Mike Loukides"><METANAME="DC.publisher"CONTENT="O'Reilly &amp; Associates, Inc."><METANAME="DC.date"CONTENT="1998-08-04T21:37:50Z"><METANAME="DC.type"CONTENT="Text.Monograph"><METANAME="DC.format"CONTENT="text/html"SCHEME="MIME"><METANAME="DC.source"CONTENT="1-56592-260-3"SCHEME="ISBN"><METANAME="DC.language"CONTENT="en-US"><METANAME="generator"CONTENT="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><LINKREV="made"HREF="mailto:online-books@oreilly.com"TITLE="Online Books Comments"><LINKREL="up"HREF="ch16_01.htm"TITLE="16. Where Did I Put That?"><LINKREL="prev"HREF="ch16_15.htm"TITLE="16.15 Script with a :-) for UNIX Converts: dir, ..., ... "><LINKREL="next"HREF="ch16_17.htm"TITLE="16.17 Getting Directory Name from a File's Pathname "></HEAD><BODYBGCOLOR="#FFFFFF"TEXT="#000000"><DIVCLASS="htmlnav"><H1><IMGSRC="gifs/smbanner.gif"ALT="UNIX Power Tools"USEMAP="#srchmap"BORDER="0"></H1><MAPNAME="srchmap"><AREASHAPE="RECT"COORDS="0,0,466,58"HREF="index.htm"ALT="UNIX Power Tools"><AREASHAPE="RECT"COORDS="467,0,514,18"HREF="../search/psrch.htm"ALT="Search this book"></MAP><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch16_15.htm"TITLE="16.15 Script with a :-) for UNIX Converts: dir, ..., ... "><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 16.15 Script with a :-) for UNIX Converts: dir, ..., ... "BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><B><FONTFACE="ARIEL,HELVETICA,HELV,SANSERIF"SIZE="-1">Chapter 16<BR>Where Did I Put That?</FONT></B></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch16_17.htm"TITLE="16.17 Getting Directory Name from a File's Pathname "><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 16.17 Getting Directory Name from a File's Pathname "BORDER="0"></A></TD></TR></TABLE>&nbsp;<HRALIGN="LEFT"WIDTH="515"TITLE="footer"></DIV><DIVCLASS="SECT1"><H2CLASS="sect1"><ACLASS="title"NAME="UPT-ART-0007">16.16 Picking a Unique Filename Automatically </A></H2><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-17425"></A><ACLASS="indexterm"NAME="AUTOID-17428"></A><ACLASS="indexterm"NAME="AUTOID-17431"></A>Shell scripts, aliases, and other programs can need temporary filesto hold data used later.If the program will be run more than once, or if the temp file needsto stay around after the program is done, you need some way to make aunique filename.</P><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-17435"></A>One way is with the shell's<SPANCLASS="link">process ID number (<ACLASS="linkend"HREF="ch38_03.htm"TITLE="Managing Processes: Overall Concepts ">38.3</A>)</SPAN>,available in the<SPANCLASS="link"> <EMCLASS="emphasis">$$</EM> parameter and often used in the <EMCLASS="emphasis">/tmp</EM> directory . (<ACLASS="linkend"HREF="ch21_03.htm"TITLE="Unique Names for Temporary Files ">21.3</A>)</SPAN>You might name a file <EMCLASS="emphasis">/tmp/MYPROG$$</EM>; the shell will turn that into something like <EMCLASS="emphasis">/tmp/MYPROG1234</EM> or <EMCLASS="emphasis">/tmp/MYPROG28471</EM>.If your program needs more than one temporary file, add an extra unique character to the names:</P><PCLASS="para"> <BLOCKQUOTECLASS="screen"><PRECLASS="screen">errs=/tmp/MYPROGe$$ output=/tmp/MYPROGo$$</PRE></BLOCKQUOTE> </P><PCLASS="para">Remember the 14-character filename limit on some older UNIXes. <EMCLASS="emphasis">$$</EM> usually makes two to five characters.</P><PCLASS="para"> If your UNIX doesn't have a <ACLASS="indexterm"NAME="AUTOID-17449"></A> <EMCLASS="emphasis">date</EM> command that takes a <CODECLASS="literal">+</CODE> parameter to change its output format, you should<SPANCLASS="link">get one (<ACLASS="linkend"HREF="ch51_10.htm"TITLE="The date Command ">51.10</A>)</SPAN>. For example, to outputthe <EMCLASS="emphasis">m</EM>onth, <EMCLASS="emphasis">d</EM>ay, <EMCLASS="emphasis">H</EM>our, <EMCLASS="emphasis">M</EM>inute, and <EMCLASS="emphasis">S</EM>econd:</P><PCLASS="para"> <BLOCKQUOTECLASS="screen"><PRECLASS="screen">% <CODECLASS="userinput"><B>date</B></CODE> Thu May 30 07:21:13 EDT 1991% <CODECLASS="userinput"><B>date +'%m%d%H%M%S'</B></CODE> 0530072124</PRE></BLOCKQUOTE> </P><PCLASS="para">Use a <CODECLASS="literal">+</CODE> parameter and <SPANCLASS="link"> backquotes (<CODECLASS="literal">``</CODE>) (<ACLASS="linkend"HREF="ch09_16.htm"TITLE="Command Substitution ">9.16</A>)</SPAN>to get a temp file named for the current date and/or time.For instance, on May 31 the command below would store <EMCLASS="emphasis">foo.0531</EM> in the Bourne shell variable <EMCLASS="emphasis">temp</EM>.On December 7, it would store <EMCLASS="emphasis">foo.1207</EM>: </P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen"> temp=foo.`date +'%m%d'`</PRE></BLOCKQUOTE> </P><PCLASS="para">Article <ACLASS="xref"HREF="ch21_03.htm"TITLE="Unique Names for Temporary Files ">21.3</A>shows another system for temporary files. </P><DIVCLASS="sect1info"><PCLASS="SECT1INFO">- <SPANCLASS="authorinitials">JP</SPAN></P></DIV></DIV><DIVCLASS="htmlnav"><P></P><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch16_15.htm"TITLE="16.15 Script with a :-) for UNIX Converts: dir, ..., ... "><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 16.15 Script with a :-) for UNIX Converts: dir, ..., ... "BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="book"HREF="index.htm"TITLE="UNIX Power Tools"><IMGSRC="../gifs/txthome.gif"ALT="UNIX Power Tools"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch16_17.htm"TITLE="16.17 Getting Directory Name from a File's Pathname "><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 16.17 Getting Directory Name from a File's Pathname "BORDER="0"></A></TD></TR><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172">16.15 Script with a :-) for UNIX Converts: dir, ..., ... </TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="index"HREF="index/idx_0.htm"TITLE="Book Index"><IMGSRC="../gifs/index.gif"ALT="Book Index"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172">16.17 Getting Directory Name from a File's Pathname </TD></TR></TABLE><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><IMGSRC="../gifs/smnavbar.gif"USEMAP="#map"BORDER="0"ALT="The UNIX CD Bookshelf Navigation"><MAPNAME="map"><AREASHAPE="RECT"COORDS="0,0,73,21"HREF="../index.htm"ALT="The UNIX CD Bookshelf"><AREASHAPE="RECT"COORDS="74,0,163,21"HREF="index.htm"ALT="UNIX Power Tools"><AREASHAPE="RECT"COORDS="164,0,257,21"HREF="../unixnut/index.htm"ALT="UNIX in a Nutshell"><AREASHAPE="RECT"COORDS="258,0,321,21"HREF="../vi/index.htm"ALT="Learning the vi Editor"><AREASHAPE="RECT"COORDS="322,0,378,21"HREF="../sedawk/index.htm"ALT="sed &amp; awk"><AREASHAPE="RECT"COORDS="379,0,438,21"HREF="../ksh/index.htm"ALT="Learning the Korn Shell"><AREASHAPE="RECT"COORDS="439,0,514,21"HREF="../lrnunix/index.htm"ALT="Learning the UNIX Operating System"></MAP></DIV></BODY></HTML>