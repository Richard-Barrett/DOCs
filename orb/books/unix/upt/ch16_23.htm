<HTML><HEAD><TITLE>[Chapter 16] 16.23 Comparing Filenames in Two Directory Trees </TITLE><METANAME="DC.title"CONTENT="UNIX Power Tools"><METANAME="DC.creator"CONTENT="Jerry Peek, Tim O'Reilly &amp; Mike Loukides"><METANAME="DC.publisher"CONTENT="O'Reilly &amp; Associates, Inc."><METANAME="DC.date"CONTENT="1998-08-04T21:37:59Z"><METANAME="DC.type"CONTENT="Text.Monograph"><METANAME="DC.format"CONTENT="text/html"SCHEME="MIME"><METANAME="DC.source"CONTENT="1-56592-260-3"SCHEME="ISBN"><METANAME="DC.language"CONTENT="en-US"><METANAME="generator"CONTENT="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><LINKREV="made"HREF="mailto:online-books@oreilly.com"TITLE="Online Books Comments"><LINKREL="up"HREF="ch16_01.htm"TITLE="16. Where Did I Put That?"><LINKREL="prev"HREF="ch16_22.htm"TITLE="16.22 Comparing Two Directory Trees with dircmp "><LINKREL="next"HREF="ch16_24.htm"TITLE="16.24 Counting Files by Types "></HEAD><BODYBGCOLOR="#FFFFFF"TEXT="#000000"><DIVCLASS="htmlnav"><H1><IMGSRC="gifs/smbanner.gif"ALT="UNIX Power Tools"USEMAP="#srchmap"BORDER="0"></H1><MAPNAME="srchmap"><AREASHAPE="RECT"COORDS="0,0,466,58"HREF="index.htm"ALT="UNIX Power Tools"><AREASHAPE="RECT"COORDS="467,0,514,18"HREF="../search/psrch.htm"ALT="Search this book"></MAP><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch16_22.htm"TITLE="16.22 Comparing Two Directory Trees with dircmp "><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 16.22 Comparing Two Directory Trees with dircmp "BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><B><FONTFACE="ARIEL,HELVETICA,HELV,SANSERIF"SIZE="-1">Chapter 16<BR>Where Did I Put That?</FONT></B></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch16_24.htm"TITLE="16.24 Counting Files by Types "><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 16.24 Counting Files by Types "BORDER="0"></A></TD></TR></TABLE>&nbsp;<HRALIGN="LEFT"WIDTH="515"TITLE="footer"></DIV><DIVCLASS="SECT1"><H2CLASS="sect1"><ACLASS="title"NAME="UPT-ART-0433">16.23 Comparing Filenames in Two Directory Trees </A></H2><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-17733"></A><ACLASS="indexterm"NAME="AUTOID-17736"></A><ACLASS="indexterm"NAME="AUTOID-17739"></A><ACLASS="indexterm"NAME="AUTOID-17742"></A>Do you have two directory trees full of subdirectories and files?Would you like to compare the filenames to see if there are some files onlyin one tree or the other?If you don't have<SPANCLASS="link"><EMCLASS="emphasis">dircmp</EM> (<ACLASS="linkend"HREF="ch16_22.htm"TITLE="Comparing Two Directory Trees with dircmp ">16.22</A>)</SPAN>,look at the quick-and-dirty substitute in the example below.The<SPANCLASS="link">numbered prompts (<ACLASS="linkend"HREF="ch07_02.htm"TITLE="Basics of Setting the Prompt ">7.2</A>)</SPAN>like <CODECLASS="literal">3%</CODE> are just for reference:</P><PCLASS="para"><TABLECLASS="screen.co"BORDER="1"><TR><THVALIGN="TOP"><PRECLASS="calloutlist">&#13;<ACLASS="co"HREF="ch15_02.htm"TITLE="15.2 Filename Wildcards in a Nutshell ">[..]</A> </PRE></TH><TDVALIGN="TOP"><PRECLASS="screen">1% <CODECLASS="userinput"><B>cd </B></CODE><CODECLASS="replaceable"><I>directory1</I></CODE>2% <CODECLASS="userinput"><B>find . -type f -print | sort &gt;/tmp/dir1</B></CODE>3% <CODECLASS="userinput"><B>cd </B></CODE><CODECLASS="replaceable"><I>directory2</I></CODE>4% <CODECLASS="userinput"><B>find . -type f -print | sort &gt;/tmp/dir2</B></CODE>5% <CODECLASS="userinput"><B>comm -3 /tmp/dir[12]6% rm /tmp/dir[12]</B></CODE></PRE></TD></TR></TABLE></P><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-17759"></A>The<SPANCLASS="link"><EMCLASS="emphasis">comm</EM> (<ACLASS="linkend"HREF="ch28_12.htm"TITLE="Comparing Two Files with comm ">28.12</A>)</SPAN>command will give you two columns: files in the left-handcolumn are only in <EMCLASS="emphasis">directory1</EM>.Files in the right-hand column are only in <EMCLASS="emphasis">directory2</EM>.You can get other information, too, like a list of files inboth trees.</P><PCLASS="para">&#13;This works nicely for directory trees on other computers, too.Run one <CODECLASS="literal">find</CODE>&nbsp;<CODECLASS="literal">|</CODE>&nbsp;<CODECLASS="literal">sort</CODE> on the remote system.Transferthat file to the computer with the other directory treeand run <EMCLASS="emphasis">comm</EM> there.Or do the <EMCLASS="emphasis">diff</EM> across the network by replacing commands 3-5 above with:</P><PCLASS="para"><TABLECLASS="screen.co"BORDER="1"><TR><THVALIGN="TOP"><PRECLASS="calloutlist"><ACLASS="co"HREF="ch01_33.htm"TITLE="1.33 UNIX Networking and Communications ">rsh</A> </PRE></TH><TDVALIGN="TOP"><PRECLASS="screen">% <CODECLASS="userinput"><B>rsh <CODECLASS="replaceable"><I>host</I></CODE> \  'cd <CODECLASS="replaceable"><I>directory2</I></CODE>; find . -type f -print | sort' | \  comm -e /tmp/dir1 -</B></CODE></PRE></TD></TR></TABLE></P><PCLASS="para">&#13;The <CODECLASS="literal">-</CODE> argument tells <EMCLASS="emphasis">comm</EM> to read its standard input (fromthe remote <EMCLASS="emphasis">find</EM> command).Article<ACLASS="xref"HREF="ch13_13.htm"TITLE='The "Filename&quot; - '>13.13</A>shows a similar trick for a filesystem across a network.Articles<ACLASS="xref"HREF="ch16_19.htm"TITLE="stree: Simple Directory Tree ">16.19</A>and<ACLASS="xref"HREF="ch16_20.htm"TITLE="The vtree Visual Directory Tree Programs ">16.20</A>are about programs that help you see a directory tree.</P><DIVCLASS="sect1info"><PCLASS="SECT1INFO">- <SPANCLASS="authorinitials">JP</SPAN></P></DIV></DIV><DIVCLASS="htmlnav"><P></P><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch16_22.htm"TITLE="16.22 Comparing Two Directory Trees with dircmp "><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 16.22 Comparing Two Directory Trees with dircmp "BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="book"HREF="index.htm"TITLE="UNIX Power Tools"><IMGSRC="../gifs/txthome.gif"ALT="UNIX Power Tools"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch16_24.htm"TITLE="16.24 Counting Files by Types "><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 16.24 Counting Files by Types "BORDER="0"></A></TD></TR><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172">16.22 Comparing Two Directory Trees with dircmp </TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="index"HREF="index/idx_0.htm"TITLE="Book Index"><IMGSRC="../gifs/index.gif"ALT="Book Index"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172">16.24 Counting Files by Types </TD></TR></TABLE><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><IMGSRC="../gifs/smnavbar.gif"USEMAP="#map"BORDER="0"ALT="The UNIX CD Bookshelf Navigation"><MAPNAME="map"><AREASHAPE="RECT"COORDS="0,0,73,21"HREF="../index.htm"ALT="The UNIX CD Bookshelf"><AREASHAPE="RECT"COORDS="74,0,163,21"HREF="index.htm"ALT="UNIX Power Tools"><AREASHAPE="RECT"COORDS="164,0,257,21"HREF="../unixnut/index.htm"ALT="UNIX in a Nutshell"><AREASHAPE="RECT"COORDS="258,0,321,21"HREF="../vi/index.htm"ALT="Learning the vi Editor"><AREASHAPE="RECT"COORDS="322,0,378,21"HREF="../sedawk/index.htm"ALT="sed &amp; awk"><AREASHAPE="RECT"COORDS="379,0,438,21"HREF="../ksh/index.htm"ALT="Learning the Korn Shell"><AREASHAPE="RECT"COORDS="439,0,514,21"HREF="../lrnunix/index.htm"ALT="Learning the UNIX Operating System"></MAP></DIV></BODY></HTML>