<HTML><HEAD><TITLE>[Chapter 16] 16.29 sls: Super ls with Format You Can Choose </TITLE><METANAME="DC.title"CONTENT="UNIX Power Tools"><METANAME="DC.creator"CONTENT="Jerry Peek, Tim O'Reilly &amp; Mike Loukides"><METANAME="DC.publisher"CONTENT="O'Reilly &amp; Associates, Inc."><METANAME="DC.date"CONTENT="1998-08-04T21:38:08Z"><METANAME="DC.type"CONTENT="Text.Monograph"><METANAME="DC.format"CONTENT="text/html"SCHEME="MIME"><METANAME="DC.source"CONTENT="1-56592-260-3"SCHEME="ISBN"><METANAME="DC.language"CONTENT="en-US"><METANAME="generator"CONTENT="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><LINKREV="made"HREF="mailto:online-books@oreilly.com"TITLE="Online Books Comments"><LINKREL="up"HREF="ch16_01.htm"TITLE="16. Where Did I Put That?"><LINKREL="prev"HREF="ch16_28.htm"TITLE="16.28 oldlinks: Find Unconnected Symbolic Links "><LINKREL="next"HREF="ch17_01.htm"TITLE="17. Finding Files with find"></HEAD><BODYBGCOLOR="#FFFFFF"TEXT="#000000"><DIVCLASS="htmlnav"><H1><IMGSRC="gifs/smbanner.gif"ALT="UNIX Power Tools"USEMAP="#srchmap"BORDER="0"></H1><MAPNAME="srchmap"><AREASHAPE="RECT"COORDS="0,0,466,58"HREF="index.htm"ALT="UNIX Power Tools"><AREASHAPE="RECT"COORDS="467,0,514,18"HREF="../search/psrch.htm"ALT="Search this book"></MAP><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch16_28.htm"TITLE="16.28 oldlinks: Find Unconnected Symbolic Links "><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 16.28 oldlinks: Find Unconnected Symbolic Links "BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><B><FONTFACE="ARIEL,HELVETICA,HELV,SANSERIF"SIZE="-1">Chapter 16<BR>Where Did I Put That?</FONT></B></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="CHAPTER"HREF="ch17_01.htm"TITLE="17. Finding Files with find"><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 17. Finding Files with find"BORDER="0"></A></TD></TR></TABLE>&nbsp;<HRALIGN="LEFT"WIDTH="515"TITLE="footer"></DIV><DIVCLASS="SECT1"><H2CLASS="sect1"><ACLASS="title"NAME="UPT-ART-7560">16.29 sls: Super ls with Format You Can Choose </A></H2><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-18024"></A><ACLASS="indexterm"NAME="AUTOID-18026"></A>The <EMCLASS="emphasis">ls -l</EM> command, and related commands like<SPANCLASS="link"><EMCLASS="emphasis">stat</EM> (<ACLASS="linkend"HREF="ch21_13.htm"TITLE="Read an Inode with stat ">21.13</A>)</SPAN>,give lots of information about a file (more exactly, about a file's<SPANCLASS="link">inode (<ACLASS="linkend"HREF="ch01_22.htm"TITLE="How UNIX Keeps Track of Files: Inodes ">1.22</A>)</SPAN>).The information is printed in a way that's (sort of) nice to look at.But the format might not be exactly what you want.That format can be tough for shell programmers to use:parsing the output with <EMCLASS="emphasis">sed</EM>, <EMCLASS="emphasis">awk</EM>, and others is trickyand a pain (article<ACLASS="xref"HREF="ch16_25.htm"TITLE="Listing Files by Age and Size ">16.25</A>has an example).Finally, the <EMCLASS="emphasis">ls -l</EM> output is different on BSD and System V systems.</P><TABLECLASS="para.programreference"BORDER="1"><TR><THVALIGN="TOP"><ACLASS="programreference"HREF="examples/index.htm"TITLE="sls">sls</A><BR></TH><TDVALIGN="TOP">&#13;The <EMCLASS="emphasis">sls</EM> command solves those problems and more.It lets you:</TD></TR></TABLE><ULCLASS="itemizedlist"><LICLASS="listitem"><PCLASS="para">Make your own output format: pick the information you want to seeand the order it's shown.</P></LI><LICLASS="listitem"><PCLASS="para">Sort the output on one or more fields.</P></LI><LICLASS="listitem"><PCLASS="para">Make a consistent date format: numeric or in words, include the secondsif you want to, and more.Best of all, the date format won't change for files more than six months old(unless you use the <EMCLASS="emphasis">-u</EM> option).</P></LI></UL><PCLASS="para">And there's much more.</P><PCLASS="para">The manual page on the disc explains <EMCLASS="emphasis">sls</EM> formatting in detail.Here are a few examples.Let's start with the style of <EMCLASS="emphasis">ls -l</EM> output that hasfixed-width columns and doesn't show group ownership.(The default <EMCLASS="emphasis">sls -l</EM> is similar, but itsdate format doesn't change after six months and it doesn't have the<EMCLASS="emphasis">total</EM> line.)</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">% <CODECLASS="userinput"><B>ls -l</B></CODE>total 3-rw-r-----  1 jerry        1641 Feb 29  1992 afilelrwxrwxrwx  1 jerry           8 Nov 18 00:38 bfile -&gt; ../bfile</PRE></BLOCKQUOTE></P><PCLASS="para">Here's a more user-friendly format for people who aren't UNIX hackers(it might be best to put this into an<SPANCLASS="link">alias or shell function (<ACLASS="linkend"HREF="ch10_01.htm#UPT-ART-4930"TITLE="Creating Custom Commands ">10.1</A>)</SPAN>).The date and time are shown, followed by the owner's name, the size inkbytes, and the filename without the symbolic link information like<CODECLASS="literal">-&gt;&nbsp;../bfile</CODE>:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">% <CODECLASS="userinput"><B>sls -p '%m&quot;%F %d, 19%y  %r&quot; %u %4skK %n'</B></CODE>February 29, 1992  03:43:00 PM    jerry    2K afileNovember 18, 1992  00:38:22 AM    jerry    1K bfile</PRE></BLOCKQUOTE></P><PCLASS="para">How about a simple <EMCLASS="emphasis">ls</EM> output that shows all three<SPANCLASS="link">file dates (<ACLASS="linkend"HREF="ch16_05.htm"TITLE="The Three UNIX File Times ">16.5</A>)</SPAN>:modification, access, and inode change?We'll use<SPANCLASS="link"><EMCLASS="emphasis">echo</EM> (<ACLASS="linkend"HREF="ch08_06.htm"TITLE="Output Command-Line Arguments ">8.6</A>)</SPAN>to print a title first:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">% <CODECLASS="userinput"><B>echo 'modify   access   inode'; \sls -p '%m&quot;%D&quot; %a&quot;%D&quot; %c&quot;%D&quot; %n'</B></CODE>modify   access   inode02/29/92 09/17/92 11/18/92 afile11/18/92 11/18/92 11/18/92 bfile</PRE></BLOCKQUOTE></P><PCLASS="para">Finally, let's ask <EMCLASS="emphasis">sls</EM> to make a set of UNIX commands that could beused at the end of a<SPANCLASS="link">shell archive (<ACLASS="linkend"HREF="ch19_02.htm"TITLE="Introduction to Shell Archives ">19.2</A>)</SPAN>file.These commands would recreate the modes, date and owner (with a numeric UID)as the files are extracted from the archive:</P><PCLASS="para"><TABLECLASS="screen.co"BORDER="1"><TR><THVALIGN="TOP"><PRECLASS="calloutlist"><ACLASS="co"HREF="ch21_07.htm"TITLE="21.7 Setting File Modification Time with touch ">touch</A> &#13;</PRE></TH><TDVALIGN="TOP"><PRECLASS="screen">% <CODECLASS="userinput"><B>sls -p 'chmod %P %n; chown %U %n; touch %m&quot;%m%d%H%M%y&quot; %n'</B></CODE>chmod 640 afile; chown  225 afile; touch 0229154392 afilechmod 777 bfile; chown  225 bfile; touch 1118003892 bfile</PRE></TD></TR></TABLE></P><PCLASS="para">I didn't show the sorting options or many of the other output formatcharacters.But I hope I've given you an idea (or ten).<ACLASS="indexterm"NAME="AUTOID-18079"></A></P><DIVCLASS="sect1info"><PCLASS="SECT1INFO">- <SPANCLASS="authorinitials">JP</SPAN></P></DIV></DIV><DIVCLASS="htmlnav"><P></P><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch16_28.htm"TITLE="16.28 oldlinks: Find Unconnected Symbolic Links "><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 16.28 oldlinks: Find Unconnected Symbolic Links "BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="book"HREF="index.htm"TITLE="UNIX Power Tools"><IMGSRC="../gifs/txthome.gif"ALT="UNIX Power Tools"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="CHAPTER"HREF="ch17_01.htm"TITLE="17. Finding Files with find"><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 17. Finding Files with find"BORDER="0"></A></TD></TR><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172">16.28 oldlinks: Find Unconnected Symbolic Links </TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="index"HREF="index/idx_0.htm"TITLE="Book Index"><IMGSRC="../gifs/index.gif"ALT="Book Index"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172">17. Finding Files with find</TD></TR></TABLE><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><IMGSRC="../gifs/smnavbar.gif"USEMAP="#map"BORDER="0"ALT="The UNIX CD Bookshelf Navigation"><MAPNAME="map"><AREASHAPE="RECT"COORDS="0,0,73,21"HREF="../index.htm"ALT="The UNIX CD Bookshelf"><AREASHAPE="RECT"COORDS="74,0,163,21"HREF="index.htm"ALT="UNIX Power Tools"><AREASHAPE="RECT"COORDS="164,0,257,21"HREF="../unixnut/index.htm"ALT="UNIX in a Nutshell"><AREASHAPE="RECT"COORDS="258,0,321,21"HREF="../vi/index.htm"ALT="Learning the vi Editor"><AREASHAPE="RECT"COORDS="322,0,378,21"HREF="../sedawk/index.htm"ALT="sed &amp; awk"><AREASHAPE="RECT"COORDS="379,0,438,21"HREF="../ksh/index.htm"ALT="Learning the Korn Shell"><AREASHAPE="RECT"COORDS="439,0,514,21"HREF="../lrnunix/index.htm"ALT="Learning the UNIX Operating System"></MAP></DIV></BODY></HTML>