<HTML><HEAD><TITLE>[Chapter 18] 18.10 There's More than One Way to Do It </TITLE><METANAME="DC.title"CONTENT="UNIX Power Tools"><METANAME="DC.creator"CONTENT="Jerry Peek, Tim O'Reilly &amp; Mike Loukides"><METANAME="DC.publisher"CONTENT="O'Reilly &amp; Associates, Inc."><METANAME="DC.date"CONTENT="1998-08-04T21:39:06Z"><METANAME="DC.type"CONTENT="Text.Monograph"><METANAME="DC.format"CONTENT="text/html"SCHEME="MIME"><METANAME="DC.source"CONTENT="1-56592-260-3"SCHEME="ISBN"><METANAME="DC.language"CONTENT="en-US"><METANAME="generator"CONTENT="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><LINKREV="made"HREF="mailto:online-books@oreilly.com"TITLE="Online Books Comments"><LINKREL="up"HREF="ch18_01.htm"TITLE="18. Linking, Renaming, and Copying Files"><LINKREL="prev"HREF="ch18_09.htm"TITLE="18.9 Renaming, Copying, or Comparing a Set of Files "><LINKREL="next"HREF="ch18_11.htm"TITLE="18.11 Renaming Files with ren "></HEAD><BODYBGCOLOR="#FFFFFF"TEXT="#000000"><DIVCLASS="htmlnav"><H1><IMGSRC="gifs/smbanner.gif"ALT="UNIX Power Tools"USEMAP="#srchmap"BORDER="0"></H1><MAPNAME="srchmap"><AREASHAPE="RECT"COORDS="0,0,466,58"HREF="index.htm"ALT="UNIX Power Tools"><AREASHAPE="RECT"COORDS="467,0,514,18"HREF="../search/psrch.htm"ALT="Search this book"></MAP><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch18_09.htm"TITLE="18.9 Renaming, Copying, or Comparing a Set of Files "><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 18.9 Renaming, Copying, or Comparing a Set of Files "BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><B><FONTFACE="ARIEL,HELVETICA,HELV,SANSERIF"SIZE="-1">Chapter 18<BR>Linking, Renaming, and Copying Files</FONT></B></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch18_11.htm"TITLE="18.11 Renaming Files with ren "><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 18.11 Renaming Files with ren "BORDER="0"></A></TD></TR></TABLE>&nbsp;<HRALIGN="LEFT"WIDTH="515"TITLE="footer"></DIV><DIVCLASS="SECT1"><H2CLASS="sect1"><ACLASS="title"NAME="UPT-ART-8013">18.10 There's More than One Way to Do It </A></H2><PCLASS="para">[In article<ACLASS="xref"HREF="ch18_09.htm"TITLE="Renaming, Copying, or Comparing a Set of Files ">18.9</A>,Jerry Peek shows how if you really understand the shell andutilities like <ICLASS="filename">sed</I>, you can easily construct custom commands tochange one set offilenames to another according to some regular pattern.In article<ACLASS="xref"HREF="ch18_11.htm"TITLE="Renaming Files with ren ">18.11</A>,<ACLASS="indexterm"NAME="AUTOID-20713"></A>Linda Mui explains a C program that makes the job easier&nbsp;- and hassome built-in safeguards that prevent any renames if some of the movescould cause problems.Here, Larry Wall and Randal Schwartz present a <SPANCLASS="link">Perl (<ACLASS="linkend"HREF="ch37_01.htm#UPT-ART-5560"TITLE="What We Do and Don't Tell You About Perl ">37.1</A>)</SPAN>script that gives you a different kind of power and flexibility.By the way, that's thePerl slogan: &quot;There's more than one way to do it.&quot; -TOR&nbsp;]</P><TABLECLASS="para.programreference"BORDER="1"><TR><THVALIGN="TOP"><ACLASS="programreference"HREF="examples/index.htm"TITLE="rename">rename</A><BR></TH><TDVALIGN="TOP">There are many ways of renaming multiple files under UNIX. Mostof these ways are kludges. They force you to use ad hoc shell variablemodifiers or multiple processes. With the <EMCLASS="emphasis">rename</EM> Perl script,you can rename files according to the rule specified as the firstargument. The argument is simply a Perl expression that is expected tomodify the <CODECLASS="literal">$_</CODE> string in Perl [the current input line<EMCLASS="emphasis">-TOR</EM>&nbsp;]for at least some of the filenamesspecified. Thus you can rename files using the very same<CODECLASS="literal">s///</CODE> notation you're already<SPANCLASS="link">familiar with (<ACLASS="linkend"HREF="ch34_24.htm"TITLE="Quick Reference: sed ">34.24</A>)</SPAN>.If a givenfilename is not modified by the expression, it will not be renamed. Ifno filenames are given on the command line, filenames will be read viastandard input.</TD></TR></TABLE><PCLASS="para">For example, to rename all files matching<CODECLASS="literal">*.bak</CODE>to strip the extension,you might say:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">% <CODECLASS="userinput"><B>rename 's/\.bak$//' *.bak</B></CODE></PRE></BLOCKQUOTE></P><PCLASS="para">But you're not limited to simple substitutions&nbsp;- you have at yourdisposal the full expressive power of Perl.To add those extensions back on, for instance, say this:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">% <CODECLASS="userinput"><B>rename '$_ .= &quot;.bak&quot;' *</B></CODE></PRE></BLOCKQUOTE></P><PCLASS="para">or even:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">% <CODECLASS="userinput"><B>rename 's/$/.bak/' *</B></CODE></PRE></BLOCKQUOTE></P><PCLASS="para">To translate uppercase names to lowercase, you'd use:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">% <CODECLASS="userinput"><B>rename 'tr/A-Z/a-z/' *</B></CODE></PRE></BLOCKQUOTE></P><PCLASS="para">And how about these?</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">% <CODECLASS="userinput"><B>rename 's/foo/bar/; $_ = $was if -e' *foo*</B></CODE>% <CODECLASS="userinput"><B>find . -print | rename 's/readme/README/i'</B></CODE>% <CODECLASS="userinput"><B>find . -print | rename 's/$/.old/ if -M $_ &gt; 0.5'</B></CODE>% <CODECLASS="userinput"><B>find . -name '*,v' -print | \  rename 's#(.*)/#$1/RCS/#, $x{$1}++ || mkdir(&quot;$1/RCS&quot;, 0777)'</B></CODE></PRE></BLOCKQUOTE></P><PCLASS="para">[Of course, to even understand some of these more complexincantations, you have to learn more about Perl, which is just thepoint... It's worth taking the time to learn. <EMCLASS="emphasis">-TOR</EM>&nbsp;]</P><DIVCLASS="sect1info"><PCLASS="SECT1INFO">- <SPANCLASS="authorinitials">LW</SPAN>, <SPANCLASS="authorinitials">RS</SPAN></P></DIV></DIV><DIVCLASS="htmlnav"><P></P><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch18_09.htm"TITLE="18.9 Renaming, Copying, or Comparing a Set of Files "><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 18.9 Renaming, Copying, or Comparing a Set of Files "BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="book"HREF="index.htm"TITLE="UNIX Power Tools"><IMGSRC="../gifs/txthome.gif"ALT="UNIX Power Tools"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch18_11.htm"TITLE="18.11 Renaming Files with ren "><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 18.11 Renaming Files with ren "BORDER="0"></A></TD></TR><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172">18.9 Renaming, Copying, or Comparing a Set of Files </TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="index"HREF="index/idx_0.htm"TITLE="Book Index"><IMGSRC="../gifs/index.gif"ALT="Book Index"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172">18.11 Renaming Files with ren </TD></TR></TABLE><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><IMGSRC="../gifs/smnavbar.gif"USEMAP="#map"BORDER="0"ALT="The UNIX CD Bookshelf Navigation"><MAPNAME="map"><AREASHAPE="RECT"COORDS="0,0,73,21"HREF="../index.htm"ALT="The UNIX CD Bookshelf"><AREASHAPE="RECT"COORDS="74,0,163,21"HREF="index.htm"ALT="UNIX Power Tools"><AREASHAPE="RECT"COORDS="164,0,257,21"HREF="../unixnut/index.htm"ALT="UNIX in a Nutshell"><AREASHAPE="RECT"COORDS="258,0,321,21"HREF="../vi/index.htm"ALT="Learning the vi Editor"><AREASHAPE="RECT"COORDS="322,0,378,21"HREF="../sedawk/index.htm"ALT="sed &amp; awk"><AREASHAPE="RECT"COORDS="379,0,438,21"HREF="../ksh/index.htm"ALT="Learning the Korn Shell"><AREASHAPE="RECT"COORDS="439,0,514,21"HREF="../lrnunix/index.htm"ALT="Learning the UNIX Operating System"></MAP></DIV></BODY></HTML>