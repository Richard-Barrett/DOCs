<HTML><HEAD><TITLE>[Chapter 20] Backing Up Files</TITLE><METANAME="DC.title"CONTENT="UNIX Power Tools"><METANAME="DC.creator"CONTENT="Jerry Peek, Tim O'Reilly &amp; Mike Loukides"><METANAME="DC.publisher"CONTENT="O'Reilly &amp; Associates, Inc."><METANAME="DC.date"CONTENT="1998-10-23T15:44:47Z"><METANAME="DC.type"CONTENT="Text.Monograph"><METANAME="DC.format"CONTENT="text/html"SCHEME="MIME"><METANAME="DC.source"CONTENT="1-56592-260-3"SCHEME="ISBN"><METANAME="DC.language"CONTENT="en-US"><METANAME="generator"CONTENT="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><LINKREV="made"HREF="mailto:online-books@oreilly.com"TITLE="Online Books Comments"><LINKREL="up"HREF="part03.htm"TITLE="III. Working with the Filesystem "><LINKREL="prev"HREF="ch19_09.htm"TITLE="19.9 A System V Tape Archiver: cpio "><LINKREL="next"HREF="ch20_02.htm"TITLE="20.2 Make Your Own Backups "></HEAD><BODYBGCOLOR="#FFFFFF"TEXT="#000000"><DIVCLASS="htmlnav"><H1><IMGSRC="gifs/smbanner.gif"ALT="UNIX Power Tools"USEMAP="#srchmap"BORDER="0"></H1><MAPNAME="srchmap"><AREASHAPE="RECT"COORDS="0,0,466,58"HREF="index.htm"ALT="UNIX Power Tools"><AREASHAPE="RECT"COORDS="467,0,514,18"HREF="../search/psrch.htm"ALT="Search this book"></MAP><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch19_09.htm"TITLE="19.9 A System V Tape Archiver: cpio "><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 19.9 A System V Tape Archiver: cpio "BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><B><FONTFACE="ARIEL,HELVETICA,HELV,SANSERIF"SIZE="-1">Chapter 20</FONT></B></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch20_02.htm"TITLE="20.2 Make Your Own Backups "><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 20.2 Make Your Own Backups "BORDER="0"></A></TD></TR></TABLE>&nbsp;<HRALIGN="LEFT"WIDTH="515"TITLE="footer"></DIV><DIVCLASS="CHAPTER"><H1CLASS="chapter"><ACLASS="title"NAME="UPT-CHP-20">20. Backing Up Files</A></H1><DIVCLASS="htmltoc"><P><B>Contents:</B><BR><ACLASS="sect1"HREF="#UPT-ART-8024"TITLE="20.1 tar in a Nutshell ">tar in a Nutshell </A><BR><ACLASS="sect1"HREF="ch20_02.htm"TITLE="20.2 Make Your Own Backups ">Make Your Own Backups </A><BR><ACLASS="sect1"HREF="ch20_03.htm"TITLE="20.3 How to Make Backups with a Local Tape Drive ">How to Make Backups with a Local Tape Drive </A><BR><ACLASS="sect1"HREF="ch20_04.htm"TITLE="20.4 Restoring Files from Tape with tar ">Restoring Files from Tape with tar </A><BR><ACLASS="sect1"HREF="ch20_05.htm"TITLE="20.5 Using tar to a Remote Tape Drive ">Using tar to a Remote Tape Drive </A><BR><ACLASS="sect1"HREF="ch20_06.htm"TITLE="20.6 Writing a Tape Drive on a Remote Machine ">Writing a Tape Drive on a Remote Machine </A><BR><ACLASS="sect1"HREF="ch20_07.htm"TITLE="20.7 Creating a Timestamp File for Selective Backups ">Creating a Timestamp File for Selective Backups </A><BR><ACLASS="sect1"HREF="ch20_08.htm"TITLE="20.8 Telling tar Which Files to Exclude or Include ">Telling tar Which Files to Exclude or Include </A><BR><ACLASS="sect1"HREF="ch20_09.htm"TITLE="20.9 When a Program Doesn't Understand Wildcards ">When a Program Doesn't Understand Wildcards </A><BR><ACLASS="sect1"HREF="ch20_10.htm"TITLE="20.10 Avoid Absolute Paths with tar ">Avoid Absolute Paths with tar </A><BR><ACLASS="sect1"HREF="ch20_11.htm"TITLE="20.11 Getting tar's Arguments in the Right Order ">Getting tar's Arguments in the Right Order </A><BR><ACLASS="sect1"HREF="ch20_12.htm"TITLE="20.12 Protecting Files with SCCS or RCS ">Protecting Files with SCCS or RCS </A><BR><ACLASS="sect1"HREF="ch20_13.htm"TITLE="20.13 SCCS Basics ">SCCS Basics </A><BR><ACLASS="sect1"HREF="ch20_14.htm"TITLE="20.14 RCS Basics ">RCS Basics </A><BR><ACLASS="sect1"HREF="ch20_15.htm"TITLE="20.15 List RCS Revision Numbers with rcsrevs ">List RCS Revision Numbers with rcsrevs </A></P><P></P></DIV><DIVCLASS="sect1"><H2CLASS="sect1"><ACLASS="title"NAME="UPT-ART-8024">20.1 tar in a Nutshell </A></H2><PCLASS="para"><ACLASS="indexterm"NAME="UPT-ART-8024-IX-FILES-BACKING-UP"></A><ACLASS="indexterm"NAME="UPT-ART-8024-IX-BACKUPS"></A><ACLASS="indexterm"NAME="AUTOID-21701"></A><ACLASS="indexterm"NAME="AUTOID-21703"></A>When many UNIX users think of file archives, on tape or in an archivefile, they think of the <EMCLASS="emphasis">tar</EM> utility.There are other ways to make archives and handle tapes&nbsp;- including<SPANCLASS="link"><EMCLASS="emphasis">cpio</EM> (<ACLASS="linkend"HREF="ch19_09.htm"TITLE="A System V Tape Archiver: cpio ">19.9</A>)</SPAN>,<SPANCLASS="link"><EMCLASS="emphasis">shar</EM> (<ACLASS="linkend"HREF="ch19_02.htm"TITLE="Introduction to Shell Archives ">19.2</A>)</SPAN>,and<SPANCLASS="link"><EMCLASS="emphasis">dd</EM> (<ACLASS="linkend"HREF="ch20_06.htm"TITLE="Writing a Tape Drive on a Remote Machine ">20.6</A>)</SPAN>.This article summarizes articles about <EMCLASS="emphasis">tar</EM>-in this chapter and others.</P><ULCLASS="itemizedlist"><LICLASS="listitem"><PCLASS="para">Although <EMCLASS="emphasis">tar</EM> is a <EMCLASS="emphasis">t</EM>ape <EMCLASS="emphasis">ar</EM>chiver,one of its common uses is<SPANCLASS="link">making an archive file on disk (<ACLASS="linkend"HREF="ch19_05.htm"TITLE="Using tar to Create and Unpack Archives ">19.5</A>)</SPAN>.Because <EMCLASS="emphasis">tar</EM> &quot;pads&quot; its archives with<SPANCLASS="link">NUL characters (<ACLASS="linkend"HREF="ch51_03.htm"TITLE="ASCII Characters: Listing and Getting Values ">51.3</A>)</SPAN>,on-disk <EMCLASS="emphasis">tar</EM> archive files can be much bigger than the size of theindividual files put together.The file can be compressed&nbsp;- so you may need to<SPANCLASS="link">uncompress an archive (<ACLASS="linkend"HREF="ch19_07.htm"TITLE="Extracting Files from a Compressed Archive ">19.7</A>)</SPAN>.The<SPANCLASS="link">GNU <EMCLASS="emphasis">tar</EM> (<ACLASS="linkend"HREF="ch19_06.htm"TITLE="GNU tar Sampler ">19.6</A>)</SPAN>can compress files while storing them.If you make on-disk archives,be careful with <EMCLASS="emphasis">tar</EM>'s <EMCLASS="emphasis">v</EM> (verbose) flag or you could endup with a corrupted archive that holds<SPANCLASS="link">more than your files (<ACLASS="linkend"HREF="ch19_08.htm"TITLE="Problems with Verbose tar ">19.8</A>)</SPAN>.</P><PCLASS="para">With compression, a <EMCLASS="emphasis">tar</EM> archive<SPANCLASS="link">can take less disk space (<ACLASS="linkend"HREF="ch24_08.htm"TITLE="Save Space: tar and compress a Directory Tree ">24.8</A>)</SPAN>than compressing individual small files.</P><PCLASS="para">Because <EMCLASS="emphasis">tar</EM> keeps most of a file's<SPANCLASS="link">inode (<ACLASS="linkend"HREF="ch01_22.htm"TITLE="How UNIX Keeps Track of Files: Inodes ">1.22</A>)</SPAN>information, it can make a<SPANCLASS="link">more complete copy (<ACLASS="linkend"HREF="ch18_16.htm"TITLE="Copying Directory Trees with (tar | tar) ">18.16</A>)</SPAN>of a file or directory tree than utilities like <EMCLASS="emphasis">cp</EM>.</P></LI><LICLASS="listitem"><PCLASS="para">Yes, we do have articles about archives on tape.Bruce Barnett's article<ACLASS="xref"HREF="ch20_02.htm"TITLE="Make Your Own Backups ">20.2</A>has enough information to make your own archive... although you mightneed the details from article<ACLASS="xref"HREF="ch20_03.htm"TITLE="How to Make Backups with a Local Tape Drive ">20.3</A>,too.After you've made an archive, you'll probably want to restoreit&nbsp;- at least as a test to be sure your archive is okay.Article<ACLASS="xref"HREF="ch20_04.htm"TITLE="Restoring Files from Tape with tar ">20.4</A>explains how.</P><PCLASS="para">If there isn't a tape drive on your computer, read article<ACLASS="xref"HREF="ch20_05.htm"TITLE="Using tar to a Remote Tape Drive ">20.5</A>about using a drive on another computer.If that isn't enough information, read the gory details from another of ourlong-time UNIX and tape experts, Chris Torek, in article<ACLASS="xref"HREF="ch20_06.htm"TITLE="Writing a Tape Drive on a Remote Machine ">20.6</A>.</P></LI></UL><PCLASS="para"></P><ULCLASS="itemizedlist"><LICLASS="listitem"><PCLASS="para"><EMCLASS="emphasis">tar</EM> copies<ACLASS="indexterm"NAME="AUTOID-21750"></A><ACLASS="indexterm"NAME="AUTOID-21753"></A>a directory tree, recursively, from top to bottom.What if you don't want to archive everything?You can back up just some files by<SPANCLASS="link">combining <EMCLASS="emphasis">ls -lt</EM> and <EMCLASS="emphasis">find</EM> (<ACLASS="linkend"HREF="ch20_07.htm"TITLE="Creating a Timestamp File for Selective Backups ">20.7</A>)</SPAN>.Some versions of <EMCLASS="emphasis">tar</EM> have options for<SPANCLASS="link">including or excluding certain files and directories (<ACLASS="linkend"HREF="ch20_08.htm"TITLE="Telling tar Which Files to Exclude or Include ">20.8</A>, <ACLASS="linkend"HREF="ch19_06.htm"TITLE="GNU tar Sampler ">19.6</A>)</SPAN>.</P></LI></UL><DIVCLASS="sect1info"><PCLASS="SECT1INFO">- <SPANCLASS="authorinitials">JP</SPAN></P></DIV></DIV></DIV><DIVCLASS="htmlnav"><P></P><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch19_09.htm"TITLE="19.9 A System V Tape Archiver: cpio "><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 19.9 A System V Tape Archiver: cpio "BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="book"HREF="index.htm"TITLE="UNIX Power Tools"><IMGSRC="../gifs/txthome.gif"ALT="UNIX Power Tools"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch20_02.htm"TITLE="20.2 Make Your Own Backups "><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 20.2 Make Your Own Backups "BORDER="0"></A></TD></TR><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172">19.9 A System V Tape Archiver: cpio </TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="index"HREF="index/idx_0.htm"TITLE="Book Index"><IMGSRC="../gifs/index.gif"ALT="Book Index"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172">20.2 Make Your Own Backups </TD></TR></TABLE><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><IMGSRC="../gifs/smnavbar.gif"USEMAP="#map"BORDER="0"ALT="The UNIX CD Bookshelf Navigation"><MAPNAME="map"><AREASHAPE="RECT"COORDS="0,0,73,21"HREF="../index.htm"ALT="The UNIX CD Bookshelf"><AREASHAPE="RECT"COORDS="74,0,163,21"HREF="index.htm"ALT="UNIX Power Tools"><AREASHAPE="RECT"COORDS="164,0,257,21"HREF="../unixnut/index.htm"ALT="UNIX in a Nutshell"><AREASHAPE="RECT"COORDS="258,0,321,21"HREF="../vi/index.htm"ALT="Learning the vi Editor"><AREASHAPE="RECT"COORDS="322,0,378,21"HREF="../sedawk/index.htm"ALT="sed &amp; awk"><AREASHAPE="RECT"COORDS="379,0,438,21"HREF="../ksh/index.htm"ALT="Learning the Korn Shell"><AREASHAPE="RECT"COORDS="439,0,514,21"HREF="../lrnunix/index.htm"ALT="Learning the UNIX Operating System"></MAP></DIV></BODY></HTML>