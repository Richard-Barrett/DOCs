<HTML><HEAD><TITLE>[Chapter 22] 22.3 Who Will Own a New File? </TITLE><METANAME="DC.title"CONTENT="UNIX Power Tools"><METANAME="DC.creator"CONTENT="Jerry Peek, Tim O'Reilly &amp; Mike Loukides"><METANAME="DC.publisher"CONTENT="O'Reilly &amp; Associates, Inc."><METANAME="DC.date"CONTENT="1998-08-04T21:40:24Z"><METANAME="DC.type"CONTENT="Text.Monograph"><METANAME="DC.format"CONTENT="text/html"SCHEME="MIME"><METANAME="DC.source"CONTENT="1-56592-260-3"SCHEME="ISBN"><METANAME="DC.language"CONTENT="en-US"><METANAME="generator"CONTENT="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><LINKREV="made"HREF="mailto:online-books@oreilly.com"TITLE="Online Books Comments"><LINKREL="up"HREF="ch22_01.htm"TITLE="22. File Security, Ownership, and Sharing"><LINKREL="prev"HREF="ch22_02.htm"TITLE="22.2 Tutorial on File and Directory Permissions "><LINKREL="next"HREF="ch22_04.htm"TITLE="22.4 Setting an Exact umask "></HEAD><BODYBGCOLOR="#FFFFFF"TEXT="#000000"><DIVCLASS="htmlnav"><H1><IMGSRC="gifs/smbanner.gif"ALT="UNIX Power Tools"USEMAP="#srchmap"BORDER="0"></H1><MAPNAME="srchmap"><AREASHAPE="RECT"COORDS="0,0,466,58"HREF="index.htm"ALT="UNIX Power Tools"><AREASHAPE="RECT"COORDS="467,0,514,18"HREF="../search/psrch.htm"ALT="Search this book"></MAP><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch22_02.htm"TITLE="22.2 Tutorial on File and Directory Permissions "><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 22.2 Tutorial on File and Directory Permissions "BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><B><FONTFACE="ARIEL,HELVETICA,HELV,SANSERIF"SIZE="-1">Chapter 22<BR>File Security, Ownership, and Sharing</FONT></B></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch22_04.htm"TITLE="22.4 Setting an Exact umask "><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 22.4 Setting an Exact umask "BORDER="0"></A></TD></TR></TABLE>&nbsp;<HRALIGN="LEFT"WIDTH="515"TITLE="footer"></DIV><DIVCLASS="SECT1"><H2CLASS="sect1"><ACLASS="title"NAME="UPT-ART-0002">22.3 Who Will Own a New File? </A></H2><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-23913"></A><ACLASS="indexterm"NAME="AUTOID-23915"></A>If you share files with other users, it's good to be able to tell whowill own each file.On BSD-based systems, this is even more important because<SPANCLASS="link">only the superuser can change file ownership (<ACLASS="linkend"HREF="ch22_20.htm"TITLE="Why Can't You Change File Ownership Under BSD UNIX?">22.20</A>, <ACLASS="linkend"HREF="ch22_21.htm"TITLE="How to Change File Ownership Without chown">22.21</A>)</SPAN>.</P><OLCLASS="orderedlist"><LICLASS="listitem"><PCLASS="para">When you create a new file, it belongs to you.</P></LI><LICLASS="listitem"><PCLASS="para">When you append to a file with <CODECLASS="literal">&gt;&gt;</CODE><CODECLASS="replaceable"><I>file</I></CODE>, the owner doesn't changebecause UNIX doesn't have to create a new file.</P></LI><LICLASS="listitem"><PCLASS="para">When you rename a file with <EMCLASS="emphasis">mv</EM>, the ownership doesn't change.</P><PCLASS="para">Exception: if you use <EMCLASS="emphasis">mv</EM> to move a file to<SPANCLASS="link">another filesystem (<ACLASS="linkend"HREF="ch01_22.htm"TITLE="How UNIX Keeps Track of Files: Inodes ">1.22</A>)</SPAN>,the moved file will belong to you&nbsp;- because, to move across filesystems,<EMCLASS="emphasis">mv</EM> actually has to copy the file and delete the original.</P></LI><LICLASS="listitem"><PCLASS="para">When you copy a file,<SPANCLASS="link">the copy belongs to you because you created it (<ACLASS="linkend"HREF="ch22_11.htm"TITLE="A Loophole: Modifying Files Without Write Access">22.11</A>)</SPAN>.</P></LI><LICLASS="listitem"><PCLASS="para">When you edit a file:</P><ULCLASS="itemizedlist"><LICLASS="listitem"><PCLASS="para">With an editor like<SPANCLASS="link"><EMCLASS="emphasis">vi</EM> (<ACLASS="linkend"HREF="ch30_02.htm"TITLE="What We Cover ">30.2</A>)</SPAN>,the file keeps its originalowner because a new file is never created.</P></LI><LICLASS="listitem"><PCLASS="para">An editor like<SPANCLASS="link">Emacs (<ACLASS="linkend"HREF="ch32_01.htm#UPT-ART-5540"TITLE="Emacs: The Other Editor ">32.1</A>)</SPAN>,which makes a backup copy, can be different.The backup copy could belong to you or to the original owner.If you replace the edited file with its backup, the file's ownershipmight have changed:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">% <CODECLASS="userinput"><B>emacs filea</B></CODE>   ...<EMCLASS="emphasis">Edit a lot, then decide you don't want your changes</EM>...% <CODECLASS="userinput"><B>mv filea~ filea</B></CODE></PRE></BLOCKQUOTE></P></LI></UL></LI></OL><PCLASS="para">If you aren't sure, use<SPANCLASS="link"><EMCLASS="emphasis">ls -l</EM> (<ACLASS="linkend"HREF="ch22_02.htm"TITLE="Tutorial on File and Directory Permissions ">22.2</A>)</SPAN>.</P><DIVCLASS="sect1info"><PCLASS="SECT1INFO">- <SPANCLASS="authorinitials">JP</SPAN></P></DIV></DIV><DIVCLASS="htmlnav"><P></P><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch22_02.htm"TITLE="22.2 Tutorial on File and Directory Permissions "><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 22.2 Tutorial on File and Directory Permissions "BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="book"HREF="index.htm"TITLE="UNIX Power Tools"><IMGSRC="../gifs/txthome.gif"ALT="UNIX Power Tools"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch22_04.htm"TITLE="22.4 Setting an Exact umask "><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 22.4 Setting an Exact umask "BORDER="0"></A></TD></TR><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172">22.2 Tutorial on File and Directory Permissions </TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="index"HREF="index/idx_0.htm"TITLE="Book Index"><IMGSRC="../gifs/index.gif"ALT="Book Index"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172">22.4 Setting an Exact umask </TD></TR></TABLE><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><IMGSRC="../gifs/smnavbar.gif"USEMAP="#map"BORDER="0"ALT="The UNIX CD Bookshelf Navigation"><MAPNAME="map"><AREASHAPE="RECT"COORDS="0,0,73,21"HREF="../index.htm"ALT="The UNIX CD Bookshelf"><AREASHAPE="RECT"COORDS="74,0,163,21"HREF="index.htm"ALT="UNIX Power Tools"><AREASHAPE="RECT"COORDS="164,0,257,21"HREF="../unixnut/index.htm"ALT="UNIX in a Nutshell"><AREASHAPE="RECT"COORDS="258,0,321,21"HREF="../vi/index.htm"ALT="Learning the vi Editor"><AREASHAPE="RECT"COORDS="322,0,378,21"HREF="../sedawk/index.htm"ALT="sed &amp; awk"><AREASHAPE="RECT"COORDS="379,0,438,21"HREF="../ksh/index.htm"ALT="Learning the Korn Shell"><AREASHAPE="RECT"COORDS="439,0,514,21"HREF="../lrnunix/index.htm"ALT="Learning the UNIX Operating System"></MAP></DIV></BODY></HTML>