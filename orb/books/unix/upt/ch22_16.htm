<HTML><HEAD><TITLE>[Chapter 22] 22.16 Copying Permissions with cpmod </TITLE><METANAME="DC.title"CONTENT="UNIX Power Tools"><METANAME="DC.creator"CONTENT="Jerry Peek, Tim O'Reilly &amp; Mike Loukides"><METANAME="DC.publisher"CONTENT="O'Reilly &amp; Associates, Inc."><METANAME="DC.date"CONTENT="1998-08-04T21:40:37Z"><METANAME="DC.type"CONTENT="Text.Monograph"><METANAME="DC.format"CONTENT="text/html"SCHEME="MIME"><METANAME="DC.source"CONTENT="1-56592-260-3"SCHEME="ISBN"><METANAME="DC.language"CONTENT="en-US"><METANAME="generator"CONTENT="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><LINKREV="made"HREF="mailto:online-books@oreilly.com"TITLE="Online Books Comments"><LINKREL="up"HREF="ch22_01.htm"TITLE="22. File Security, Ownership, and Sharing"><LINKREL="prev"HREF="ch22_15.htm"TITLE="22.15 Juggling Permissions "><LINKREL="next"HREF="ch22_17.htm"TITLE="22.17 Ways of Improving the Security of crypt "></HEAD><BODYBGCOLOR="#FFFFFF"TEXT="#000000"><DIVCLASS="htmlnav"><H1><IMGSRC="gifs/smbanner.gif"ALT="UNIX Power Tools"USEMAP="#srchmap"BORDER="0"></H1><MAPNAME="srchmap"><AREASHAPE="RECT"COORDS="0,0,466,58"HREF="index.htm"ALT="UNIX Power Tools"><AREASHAPE="RECT"COORDS="467,0,514,18"HREF="../search/psrch.htm"ALT="Search this book"></MAP><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch22_15.htm"TITLE="22.15 Juggling Permissions "><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 22.15 Juggling Permissions "BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><B><FONTFACE="ARIEL,HELVETICA,HELV,SANSERIF"SIZE="-1">Chapter 22<BR>File Security, Ownership, and Sharing</FONT></B></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch22_17.htm"TITLE="22.17 Ways of Improving the Security of crypt "><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 22.17 Ways of Improving the Security of crypt "BORDER="0"></A></TD></TR></TABLE>&nbsp;<HRALIGN="LEFT"WIDTH="515"TITLE="footer"></DIV><DIVCLASS="SECT1"><H2CLASS="sect1"><ACLASS="title"NAME="UPT-ART-9025">22.16 Copying Permissions with cpmod </A></H2><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-24676"></A><ACLASS="indexterm"NAME="AUTOID-24678"></A><ACLASS="indexterm"NAME="AUTOID-24681"></A>A utility to help facilitate permission juggling is <EMCLASS="emphasis">cpmod</EM>.This program lets you copy the group ownership and permission modesof one file to another.</P><PCLASS="para">For example, suppose you just <SPANCLASS="link">juggled permissions (<ACLASS="linkend"HREF="ch22_15.htm"TITLE="Juggling Permissions ">22.15</A>)</SPAN>using <EMCLASS="emphasis">chmod</EM> and <EMCLASS="emphasis">chgrp</EM>to give another user access to a file called <EMCLASS="emphasis">ch01</EM>, and now she wants permission for three more files in the same directory.You could repeat the process, or you could just use <EMCLASS="emphasis">cpmod</EM>to copy the permissions from the first file:</P><PCLASS="para"><TABLECLASS="screen.co"BORDER="1"><TR><THVALIGN="TOP"><PRECLASS="calloutlist">&#13;<ACLASS="co"HREF="ch15_02.htm"TITLE="15.2 Filename Wildcards in a Nutshell ">[..]</A> &#13;</PRE></TH><TDVALIGN="TOP"><PRECLASS="screen">&#13;% <CODECLASS="userinput"><B>ls -lg ch01</B></CODE>-rw-rw----  1 lmui     authors        13727 Sep 21 07:43 ch01% <CODECLASS="userinput"><B>ls -lg ch0[234]</B></CODE>-rw-------  1 lmui     book           34020 Oct 15 11:13 ch02-rw-r-----  1 lmui     acct           11207 Oct 13 09:49 ch03-rw-r--r--  1 lmui     book           29239 Oct 07 18:12 ch03% <CODECLASS="userinput"><B>cpmod ch01 ch0[234]</B></CODE>% <CODECLASS="userinput"><B>ls -lg ch0?</B></CODE>-rw-rw----  1 lmui     authors        13727 Sep 21 07:43 ch01-rw-rw----  1 lmui     authors        34020 Sep 21 07:43 ch02-rw-rw----  1 lmui     authors        11207 Sep 21 07:43 ch03-rw-rw----  1 lmui     authors        29239 Sep 21 07:43 ch04</PRE></TD></TR></TABLE></P><PCLASS="para">Use <EMCLASS="emphasis">cpmod</EM> to say, &quot;Make these files just like this other one.&quot;</P><PCLASS="para">In this example, we used it to quickly give write permissionto several files at once.But notice thatthe new files also inherit the same modification times.This is another feature of <EMCLASS="emphasis">cpmod</EM>, which comes in useful for programmers and other users of <SPANCLASS="link"><EMCLASS="emphasis">make</EM> (<ACLASS="linkend"HREF="ch28_13.htm"TITLE="make Isn't Just for Programmers! ">28.13</A>)</SPAN>.The <EMCLASS="emphasis">make</EM> program uses modification dates on filesto determine whether it should recompile source code. <EMCLASS="emphasis">cpmod</EM>provides a way to manipulate the modification dates when you need to.Article<ACLASS="xref"HREF="ch21_07.htm"TITLE="Setting File Modification Time with touch ">21.7</A>explains the version of the <EMCLASS="emphasis">touch</EM> command that can set a fileto have any modification date.</P><DIVCLASS="sect1info"><PCLASS="SECT1INFO">- <SPANCLASS="authorinitials">LM</SPAN></P></DIV></DIV><DIVCLASS="htmlnav"><P></P><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch22_15.htm"TITLE="22.15 Juggling Permissions "><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 22.15 Juggling Permissions "BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="book"HREF="index.htm"TITLE="UNIX Power Tools"><IMGSRC="../gifs/txthome.gif"ALT="UNIX Power Tools"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch22_17.htm"TITLE="22.17 Ways of Improving the Security of crypt "><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 22.17 Ways of Improving the Security of crypt "BORDER="0"></A></TD></TR><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172">22.15 Juggling Permissions </TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="index"HREF="index/idx_0.htm"TITLE="Book Index"><IMGSRC="../gifs/index.gif"ALT="Book Index"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172">22.17 Ways of Improving the Security of crypt </TD></TR></TABLE><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><IMGSRC="../gifs/smnavbar.gif"USEMAP="#map"BORDER="0"ALT="The UNIX CD Bookshelf Navigation"><MAPNAME="map"><AREASHAPE="RECT"COORDS="0,0,73,21"HREF="../index.htm"ALT="The UNIX CD Bookshelf"><AREASHAPE="RECT"COORDS="74,0,163,21"HREF="index.htm"ALT="UNIX Power Tools"><AREASHAPE="RECT"COORDS="164,0,257,21"HREF="../unixnut/index.htm"ALT="UNIX in a Nutshell"><AREASHAPE="RECT"COORDS="258,0,321,21"HREF="../vi/index.htm"ALT="Learning the vi Editor"><AREASHAPE="RECT"COORDS="322,0,378,21"HREF="../sedawk/index.htm"ALT="sed &amp; awk"><AREASHAPE="RECT"COORDS="379,0,438,21"HREF="../ksh/index.htm"ALT="Learning the Korn Shell"><AREASHAPE="RECT"COORDS="439,0,514,21"HREF="../lrnunix/index.htm"ALT="Learning the UNIX Operating System"></MAP></DIV></BODY></HTML>