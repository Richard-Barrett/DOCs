<HTML><HEAD><TITLE>[Chapter 24] 24.7 Compressing Files to Save Space </TITLE><METANAME="DC.title"CONTENT="UNIX Power Tools"><METANAME="DC.creator"CONTENT="Jerry Peek, Tim O'Reilly &amp; Mike Loukides"><METANAME="DC.publisher"CONTENT="O'Reilly &amp; Associates, Inc."><METANAME="DC.date"CONTENT="1998-08-04T21:41:32Z"><METANAME="DC.type"CONTENT="Text.Monograph"><METANAME="DC.format"CONTENT="text/html"SCHEME="MIME"><METANAME="DC.source"CONTENT="1-56592-260-3"SCHEME="ISBN"><METANAME="DC.language"CONTENT="en-US"><METANAME="generator"CONTENT="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><LINKREV="made"HREF="mailto:online-books@oreilly.com"TITLE="Online Books Comments"><LINKREL="up"HREF="ch24_01.htm"TITLE="24. Other Ways to Get Disk Space"><LINKREL="prev"HREF="ch24_06.htm"TITLE="24.6 Save Space with Tab Characters "><LINKREL="next"HREF="ch24_08.htm"TITLE="24.8 Save Space: tar and compress a Directory Tree "></HEAD><BODYBGCOLOR="#FFFFFF"TEXT="#000000"><DIVCLASS="htmlnav"><H1><IMGSRC="gifs/smbanner.gif"ALT="UNIX Power Tools"USEMAP="#srchmap"BORDER="0"></H1><MAPNAME="srchmap"><AREASHAPE="RECT"COORDS="0,0,466,58"HREF="index.htm"ALT="UNIX Power Tools"><AREASHAPE="RECT"COORDS="467,0,514,18"HREF="../search/psrch.htm"ALT="Search this book"></MAP><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch24_06.htm"TITLE="24.6 Save Space with Tab Characters "><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 24.6 Save Space with Tab Characters "BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><B><FONTFACE="ARIEL,HELVETICA,HELV,SANSERIF"SIZE="-1">Chapter 24<BR>Other Ways to Get Disk Space</FONT></B></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch24_08.htm"TITLE="24.8 Save Space: tar and compress a Directory Tree "><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 24.8 Save Space: tar and compress a Directory Tree "BORDER="0"></A></TD></TR></TABLE>&nbsp;<HRALIGN="LEFT"WIDTH="515"TITLE="footer"></DIV><DIVCLASS="SECT1"><H2CLASS="sect1"><ACLASS="title"NAME="UPT-ART-6130">24.7 Compressing Files to Save Space </A></H2><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-26426"></A><ACLASS="indexterm"NAME="AUTOID-26428"></A>Most files can be &quot;squeezed&quot; to take up less space.Let's say you have a text file. Each letter occupies a byte, butalmost all of the characters in the file are alphanumeric orpunctuation, and there are only about 70 such characters.Furthermore, most of the characters are (usually) lowercase;furthermore, the letter &quot;e&quot; turns up more often than &quot;z,&quot; the letter&quot;e&quot; often shows up in pairs, and so on.All in all, you don't really need a full eight-bit byte per character. Ifyou're clever, you can reduce the amount of space a file occupies by50 percent or more.</P><TABLECLASS="para.programreference"BORDER="1"><TR><THVALIGN="TOP"><ACLASS="programreference"HREF="examples/index.htm"TITLE="gzip">gzip</A><BR></TH><TDVALIGN="TOP"><ACLASS="indexterm"NAME="AUTOID-26433"></A>Compression algorithms are a complex topic that we can't discuss here.Fortunately, you don't need to know anything about them. Many UNIXsystems have a good compression utility built in. It's called<EMCLASS="emphasis">compress</EM>.Unfortunately, though, the <EMCLASS="emphasis">compress</EM> algorithm seems to becovered by software patents; many users avoid it for that reason.A newer utility that's even better, and doesn't have patent problems,is GNU's <EMCLASS="emphasis">gzip</EM>.<ACLASS="indexterm"NAME="AUTOID-26438"></A>Those of you who don't have <EMCLASS="emphasis">gzip</EM> can find it on theCD-ROM.</TD></TR></TABLE><PCLASS="para">To compress a file, just give thecommand:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">% <CODECLASS="userinput"><B>gzip</B></CODE> <CODECLASS="replaceable"><I>filename</I></CODE></PRE></BLOCKQUOTE></P><PCLASS="para">The file's name is changed to <CODECLASS="replaceable"><I>filename</I></CODE><CODECLASS="literal">.gz</CODE>.The <EMCLASS="emphasis">-v</EM> option asks <EMCLASS="emphasis">gzip</EM> totell you how much space you saved. The savings are usuallybetween 40 and 90 percent.</P><PCLASS="para">If the file <EMCLASS="emphasis">shouldn't</EM> be compressed&nbsp;- that is, if the file has<SPANCLASS="link">hard links (<ACLASS="linkend"HREF="ch18_04.htm"TITLE="More About Links ">18.4</A>)</SPAN>or the corresponding file already exists-<EMCLASS="emphasis">gzip</EM> prints a message.You can use the <EMCLASS="emphasis">-f</EM> option to &quot;force&quot; <EMCLASS="emphasis">gzip</EM> to compress such a file.This might be better if you're using <EMCLASS="emphasis">gzip</EM> within a shellscript and don't want to worry about files that might <EMCLASS="emphasis">not</EM> becompressed.</P><PCLASS="para">Compressed files are always binary files; even if they started out astext files, you can't read them. To get back the original file, usethe <EMCLASS="emphasis">gunzip</EM> utility:<ACLASS="indexterm"NAME="AUTOID-26462"></A></P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">% <CODECLASS="userinput"><B>gunzip</B></CODE> <CODECLASS="replaceable"><I>filename</I></CODE></PRE></BLOCKQUOTE></P><PCLASS="para">(<EMCLASS="emphasis">gunzip</EM> also handles files from <EMCLASS="emphasis">compress</EM>,or you can use <EMCLASS="emphasis">uncompress</EM> if you'd rather.)You can omit the <EMCLASS="emphasis">.gz</EM> at the end of the filename. If youjust want to read the file but don't want to restore the original <ACLASS="indexterm"NAME="AUTOID-26473"></A>version, use the command <EMCLASS="emphasis">gzcat</EM>; this justdecodes the file and dumps it to standard output.It's particularly convenient to pipe <EMCLASS="emphasis">gzcat</EM> into<SPANCLASS="link"><EMCLASS="emphasis">more</EM> (<ACLASS="linkend"HREF="ch25_03.htm"TITLE="Using more to Page Through Files ">25.3</A>)</SPAN>or<SPANCLASS="link"><EMCLASS="emphasis">grep</EM> (<ACLASS="linkend"HREF="ch27_01.htm#UPT-ART-7420"TITLE="Different Versions of grep ">27.1</A>)</SPAN>.(There's a <EMCLASS="emphasis">zcat</EM> for <EMCLASS="emphasis">compress</EM>ed files, but <EMCLASS="emphasis">gzcat</EM>can handle those files too.)</P><PCLASS="para">The CD-ROM has several scripts that work on compressed files,uncompressing and recompressing them automatically:editing with<SPANCLASS="link"><EMCLASS="emphasis">zvi</EM>, <EMCLASS="emphasis">zex</EM>, and <EMCLASS="emphasis">zed</EM> (<ACLASS="linkend"HREF="ch24_11.htm"TITLE="Edit Compressed Files with zvi, zex, and zed ">24.11</A>)</SPAN>;viewing with<SPANCLASS="link"><EMCLASS="emphasis">zmore</EM>, <EMCLASS="emphasis">zless</EM>, and <EMCLASS="emphasis">zpg</EM> (<ACLASS="linkend"HREF="ch25_05.htm"TITLE="Page Through Compressed, RCS, Unprintable Files ">25.5</A>)</SPAN>;or running almost any command that can read from a pipe with<SPANCLASS="link"><EMCLASS="emphasis">zloop</EM> (<ACLASS="linkend"HREF="ch24_10.htm"TITLE="zloop: Run a Command on Compressed Files ">24.10</A>)</SPAN>.</P><PCLASS="para">There are a number of other compression utilities floating around theUNIX world.<EMCLASS="emphasis">gzip</EM> also works on other operating systems, though.It's reliable and freely available.So <EMCLASS="emphasis">gzip</EM> has become the utility that more people choose.</P><DIVCLASS="sect1info"><PCLASS="SECT1INFO">- <SPANCLASS="authorinitials">ML</SPAN>, <SPANCLASS="authorinitials">JP</SPAN></P></DIV></DIV><DIVCLASS="htmlnav"><P></P><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch24_06.htm"TITLE="24.6 Save Space with Tab Characters "><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 24.6 Save Space with Tab Characters "BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="book"HREF="index.htm"TITLE="UNIX Power Tools"><IMGSRC="../gifs/txthome.gif"ALT="UNIX Power Tools"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch24_08.htm"TITLE="24.8 Save Space: tar and compress a Directory Tree "><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 24.8 Save Space: tar and compress a Directory Tree "BORDER="0"></A></TD></TR><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172">24.6 Save Space with Tab Characters </TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="index"HREF="index/idx_0.htm"TITLE="Book Index"><IMGSRC="../gifs/index.gif"ALT="Book Index"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172">24.8 Save Space: tar and compress a Directory Tree </TD></TR></TABLE><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><IMGSRC="../gifs/smnavbar.gif"USEMAP="#map"BORDER="0"ALT="The UNIX CD Bookshelf Navigation"><MAPNAME="map"><AREASHAPE="RECT"COORDS="0,0,73,21"HREF="../index.htm"ALT="The UNIX CD Bookshelf"><AREASHAPE="RECT"COORDS="74,0,163,21"HREF="index.htm"ALT="UNIX Power Tools"><AREASHAPE="RECT"COORDS="164,0,257,21"HREF="../unixnut/index.htm"ALT="UNIX in a Nutshell"><AREASHAPE="RECT"COORDS="258,0,321,21"HREF="../vi/index.htm"ALT="Learning the vi Editor"><AREASHAPE="RECT"COORDS="322,0,378,21"HREF="../sedawk/index.htm"ALT="sed &amp; awk"><AREASHAPE="RECT"COORDS="379,0,438,21"HREF="../ksh/index.htm"ALT="Learning the Korn Shell"><AREASHAPE="RECT"COORDS="439,0,514,21"HREF="../lrnunix/index.htm"ALT="Learning the UNIX Operating System"></MAP></DIV></BODY></HTML>