<HTML><HEAD><TITLE>[Chapter 24] 24.15 Trimming a Directory </TITLE><METANAME="DC.title"CONTENT="UNIX Power Tools"><METANAME="DC.creator"CONTENT="Jerry Peek, Tim O'Reilly &amp; Mike Loukides"><METANAME="DC.publisher"CONTENT="O'Reilly &amp; Associates, Inc."><METANAME="DC.date"CONTENT="1998-08-04T21:41:44Z"><METANAME="DC.type"CONTENT="Text.Monograph"><METANAME="DC.format"CONTENT="text/html"SCHEME="MIME"><METANAME="DC.source"CONTENT="1-56592-260-3"SCHEME="ISBN"><METANAME="DC.language"CONTENT="en-US"><METANAME="generator"CONTENT="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><LINKREV="made"HREF="mailto:online-books@oreilly.com"TITLE="Online Books Comments"><LINKREL="up"HREF="ch24_01.htm"TITLE="24. Other Ways to Get Disk Space"><LINKREL="prev"HREF="ch24_14.htm"TITLE="24.14 Don't Use strip Carelessly "><LINKREL="next"HREF="ch24_16.htm"TITLE="24.16 Trimming a Huge Directory "></HEAD><BODYBGCOLOR="#FFFFFF"TEXT="#000000"><DIVCLASS="htmlnav"><H1><IMGSRC="gifs/smbanner.gif"ALT="UNIX Power Tools"USEMAP="#srchmap"BORDER="0"></H1><MAPNAME="srchmap"><AREASHAPE="RECT"COORDS="0,0,466,58"HREF="index.htm"ALT="UNIX Power Tools"><AREASHAPE="RECT"COORDS="467,0,514,18"HREF="../search/psrch.htm"ALT="Search this book"></MAP><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch24_14.htm"TITLE="24.14 Don't Use strip Carelessly "><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 24.14 Don't Use strip Carelessly "BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><B><FONTFACE="ARIEL,HELVETICA,HELV,SANSERIF"SIZE="-1">Chapter 24<BR>Other Ways to Get Disk Space</FONT></B></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch24_16.htm"TITLE="24.16 Trimming a Huge Directory "><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 24.16 Trimming a Huge Directory "BORDER="0"></A></TD></TR></TABLE>&nbsp;<HRALIGN="LEFT"WIDTH="515"TITLE="footer"></DIV><DIVCLASS="SECT1"><H2CLASS="sect1"><ACLASS="title"NAME="UPT-ART-5150">24.15 Trimming a Directory </A></H2><PCLASS="para">In article<ACLASS="xref"HREF="ch04_07.htm"TITLE="Make More Directories! ">4.7</A>,<ACLASS="indexterm"NAME="UPT-ART-5150-IX-DIRECTORIES-TRIMMING"></A><ACLASS="indexterm"NAME="UPT-ART-5150-IX-TRIMMING-DIRECTORIES"></A><ACLASS="indexterm"NAME="UPT-ART-5150-IX-DISK-SPACE-TRIMMING-DIRECTORIES-AND"></A>we mentioned that it's good to keep directoriesrelatively small. Large directories can make your system seemslower because it takes more time to look up files.How small is &quot;small&quot;? Under 60 files is great.</P><PCLASS="para">However, there's a problem: the size of a directory can <EMCLASS="emphasis">only</EM>increase. That is, creating new files can make a directory bigger;deleting new files doesn't, in itself, make the directory any smaller.I'm not saying that a directory grows every time youcreate a new file. That's not true; if you've deleted a file, thedirectory will have an empty entry in it, and UNIX can re-use theempty entry. But the fact remains: a directory can only get bigger;it can never get smaller, unless you delete it.[Some BSD systems will &quot;squeeze&quot; directories smaller. <EMCLASS="emphasis">-JP</EM>&nbsp;]</P><PCLASS="para">So let's say you've been sloppy and have a few directories around withhundreds of files, a lot of which is junk you don't need (I've beenthere). You could just delete the junk, which would make your diskhappier, but you haven't reduced the directory's size.What do you do? Here's a trick:</P><OLCLASS="orderedlist"><LICLASS="listitem"><PCLASS="para">Rename the old directory: </P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">% <CODECLASS="userinput"><B>mv project project.toobig</B></CODE></PRE></BLOCKQUOTE></P><PCLASS="para"></P></LI><LICLASS="listitem"><PCLASS="para">Create a new directory with the old directory's name: </P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">% <CODECLASS="userinput"><B>mkdir project</B></CODE></PRE></BLOCKQUOTE></P><PCLASS="para"></P></LI><LICLASS="listitem"><PCLASS="para">Move <EMCLASS="emphasis">only</EM> the files you want from the old directory into the newdirectory: </P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">% <CODECLASS="userinput"><B>mv project.toobig/*.txt project</B></CODE></PRE></BLOCKQUOTE></P><PCLASS="para"></P></LI><LICLASS="listitem"><PCLASS="para">Now the old directory contains only junk. Delete the old obesedirectory and everything in it: </P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">% <CODECLASS="userinput"><B>rm -r project.toobig</B></CODE></PRE></BLOCKQUOTE></P></LI></OL><DIVCLASS="sect1info"><PCLASS="SECT1INFO">- <SPANCLASS="authorinitials">ML</SPAN></P></DIV></DIV><DIVCLASS="htmlnav"><P></P><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch24_14.htm"TITLE="24.14 Don't Use strip Carelessly "><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 24.14 Don't Use strip Carelessly "BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="book"HREF="index.htm"TITLE="UNIX Power Tools"><IMGSRC="../gifs/txthome.gif"ALT="UNIX Power Tools"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch24_16.htm"TITLE="24.16 Trimming a Huge Directory "><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 24.16 Trimming a Huge Directory "BORDER="0"></A></TD></TR><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172">24.14 Don't Use strip Carelessly </TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="index"HREF="index/idx_0.htm"TITLE="Book Index"><IMGSRC="../gifs/index.gif"ALT="Book Index"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172">24.16 Trimming a Huge Directory </TD></TR></TABLE><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><IMGSRC="../gifs/smnavbar.gif"USEMAP="#map"BORDER="0"ALT="The UNIX CD Bookshelf Navigation"><MAPNAME="map"><AREASHAPE="RECT"COORDS="0,0,73,21"HREF="../index.htm"ALT="The UNIX CD Bookshelf"><AREASHAPE="RECT"COORDS="74,0,163,21"HREF="index.htm"ALT="UNIX Power Tools"><AREASHAPE="RECT"COORDS="164,0,257,21"HREF="../unixnut/index.htm"ALT="UNIX in a Nutshell"><AREASHAPE="RECT"COORDS="258,0,321,21"HREF="../vi/index.htm"ALT="Learning the vi Editor"><AREASHAPE="RECT"COORDS="322,0,378,21"HREF="../sedawk/index.htm"ALT="sed &amp; awk"><AREASHAPE="RECT"COORDS="379,0,438,21"HREF="../ksh/index.htm"ALT="Learning the Korn Shell"><AREASHAPE="RECT"COORDS="439,0,514,21"HREF="../lrnunix/index.htm"ALT="Learning the UNIX Operating System"></MAP></DIV></BODY></HTML>