<HTML><HEAD><TITLE>[Chapter 25] 25.5 Page Through Compressed, RCS, Unprintable Files </TITLE><METANAME="DC.title"CONTENT="UNIX Power Tools"><METANAME="DC.creator"CONTENT="Jerry Peek, Tim O'Reilly &amp; Mike Loukides"><METANAME="DC.publisher"CONTENT="O'Reilly &amp; Associates, Inc."><METANAME="DC.date"CONTENT="1998-08-04T21:43:09Z"><METANAME="DC.type"CONTENT="Text.Monograph"><METANAME="DC.format"CONTENT="text/html"SCHEME="MIME"><METANAME="DC.source"CONTENT="1-56592-260-3"SCHEME="ISBN"><METANAME="DC.language"CONTENT="en-US"><METANAME="generator"CONTENT="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><LINKREV="made"HREF="mailto:online-books@oreilly.com"TITLE="Online Books Comments"><LINKREL="up"HREF="ch25_01.htm"TITLE="25. Showing What's in a File"><LINKREL="prev"HREF="ch25_04.htm"TITLE='25.4 The "less&quot; Pager: More than "more&quot;'><LINKREL="next"HREF="ch25_06.htm"TITLE="25.6 What's in That White Space? "></HEAD><BODYBGCOLOR="#FFFFFF"TEXT="#000000"><DIVCLASS="htmlnav"><H1><IMGSRC="gifs/smbanner.gif"ALT="UNIX Power Tools"USEMAP="#srchmap"BORDER="0"></H1><MAPNAME="srchmap"><AREASHAPE="RECT"COORDS="0,0,466,58"HREF="index.htm"ALT="UNIX Power Tools"><AREASHAPE="RECT"COORDS="467,0,514,18"HREF="../search/psrch.htm"ALT="Search this book"></MAP><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch25_04.htm"TITLE='25.4 The "less&quot; Pager: More than "more&quot;'><IMGSRC="../gifs/txtpreva.gif"ALT='Previous: 25.4 The "less&quot; Pager: More than "more&quot;'BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><B><FONTFACE="ARIEL,HELVETICA,HELV,SANSERIF"SIZE="-1">Chapter 25<BR>Showing What's in a File</FONT></B></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch25_06.htm"TITLE="25.6 What's in That White Space? "><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 25.6 What's in That White Space? "BORDER="0"></A></TD></TR></TABLE>&nbsp;<HRALIGN="LEFT"WIDTH="515"TITLE="footer"></DIV><DIVCLASS="SECT1"><H2CLASS="sect1"><ACLASS="title"NAME="UPT-ART-7170">25.5 Page Through Compressed, RCS, Unprintable Files </A></H2><TABLECLASS="para.programreference"BORDER="1"><TR><THVALIGN="TOP"><ACLASS="programreference"HREF="examples/index.htm"TITLE="zmore">zmore</A><BR></TH><TDVALIGN="TOP"><ACLASS="indexterm"NAME="AUTOID-27381"></A><ACLASS="indexterm"NAME="AUTOID-27384"></A><ACLASS="indexterm"NAME="AUTOID-27386"></A><ACLASS="indexterm"NAME="AUTOID-27389"></A><SPANCLASS="link">Compressed (<ACLASS="linkend"HREF="ch24_07.htm"TITLE="Compressing Files to Save Space ">24.7</A>)</SPAN>files save disk space.But compressed files aren't as convenient to work with: you have touncompress them before you can read or edit them.<ACLASS="indexterm"NAME="AUTOID-27392"></A>The <EMCLASS="emphasis">zmore</EM> script (also named <EMCLASS="emphasis">zpg</EM> and <EMCLASS="emphasis">zless</EM>)makes the job easier.It uncompresses one or more files and feeds them to a pager:<SPANCLASS="link"><EMCLASS="emphasis">more</EM> (<ACLASS="linkend"HREF="ch25_03.htm"TITLE="Using more to Page Through Files ">25.3</A>)</SPAN>,<EMCLASS="emphasis">pg</EM>, or<SPANCLASS="link"><EMCLASS="emphasis">less</EM> (<ACLASS="linkend"HREF="ch25_04.htm"TITLE='The "less&quot; Pager: More than "more&quot;'>25.4</A>)</SPAN>.(The script uses GNU <EMCLASS="emphasis">gzcat</EM>, which can read both<EMCLASS="emphasis">gzip</EM> and <EMCLASS="emphasis">compress</EM> format.)<ACLASS="indexterm"NAME="AUTOID-27406"></A>The script can also page through files that have been made printable by<SPANCLASS="link"><EMCLASS="emphasis">cat -v -t -e</EM> (<ACLASS="linkend"HREF="ch25_07.htm"TITLE="Show Non-Printing Characters with cat -v or od -c ">25.7</A>, <ACLASS="linkend"HREF="ch25_06.htm"TITLE="What's in That White Space? ">25.6</A>)</SPAN>.This is a safe way to page through files that might have unprintablecharacters that could mess up your terminal if they weren't filtered.Finally, the script can page through the latest revision of an<SPANCLASS="link">RCS file (<ACLASS="linkend"HREF="ch20_14.htm"TITLE="RCS Basics ">20.14</A>)</SPAN>.</TD></TR></TABLE><PCLASS="para">Here's an example.Let's page through the <EMCLASS="emphasis">gzip</EM>ped files <EMCLASS="emphasis">data.gz</EM> and<EMCLASS="emphasis">../summary.gz</EM>.Then we'll read the suspiciously named file <EMCLASS="emphasis">Ex034912</EM> to see what's in it:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">% <CODECLASS="userinput"><B>zmore data ../summary</B></CODE>      <EMCLASS="emphasis">You don't need to type the .gz</EM>   ...<EMCLASS="emphasis">First screen of data.gz, uncompressed</EM>...--More--   ...<EMCLASS="emphasis">The rest of data.gz, uncompressed</EM>...zmore: Press RETURN to see next file, '../summary':   ...<EMCLASS="emphasis">First screen of ../summary.gz, uncompressed</EM>...% <CODECLASS="userinput"><B>vmore Ex034912</B></CODE>   ...<EMCLASS="emphasis">First screen of Ex034912, filtered with cat -t -v -e</EM>...</PRE></BLOCKQUOTE></P><PCLASS="para">The same script file does all those things.It's written to have eight other<SPANCLASS="link">links (<ACLASS="linkend"HREF="ch18_03.htm"TITLE="Files with Two or More Names">18.3</A>)</SPAN>:<EMCLASS="emphasis">zpg</EM>, <EMCLASS="emphasis">zless</EM>, <EMCLASS="emphasis">vmore</EM>, <EMCLASS="emphasis">vpg</EM>, <EMCLASS="emphasis">vless</EM>,<EMCLASS="emphasis">rcsmore</EM>, <EMCLASS="emphasis">rcspg</EM>, and <EMCLASS="emphasis">rcsless</EM>.The script tests the name it was called with, from <CODECLASS="literal">$0</CODE>, to decidewhether to use <EMCLASS="emphasis">gzcat</EM>, <EMCLASS="emphasis">cat -t -v -e</EM>, or<EMCLASS="emphasis">co&nbsp;-p</EM>, and which pager to run.This trick saves disk space.You can change the pagers used by modifying the script and adding orremoving links to it.The absolute pathnames at the start of the script may need to be changedfor your system.</P><PCLASS="para">Most pager programs can't back up or move around as easily when they'rereading from a pipe.(<EMCLASS="emphasis">less</EM> can.)You can use a temporary file instead.That's not as efficient as using a pipe, but it's good to be able to do.To dothat, add the following two lines after the second <EMCLASS="emphasis">case</EM>statement:</P><PCLASS="para"><TABLECLASS="screen.co"BORDER="1"><TR><THVALIGN="TOP"><PRECLASS="calloutlist"><ACLASS="co"HREF="ch21_03.htm"TITLE="21.3 Unique Names for Temporary Files ">/tmp..$$</A> <ACLASS="co"HREF="ch44_12.htm"TITLE="44.12 Trapping Exits Caused by Interrupts ">trap</A> </PRE></TH><TDVALIGN="TOP"><PRECLASS="screen">temp=/tmp/$myname$$trap 'rm -f $temp; exit' 0 1 2 15</PRE></TD></TR></TABLE></P><PCLASS="para">And change this line inside the <EMCLASS="emphasis">while</EM> loop, around line 38:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">*) $cat &quot;$1&quot; | $prog $opts ;;</PRE></BLOCKQUOTE></P><PCLASS="para">&#13;to these three lines:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">*) $cat &quot;$1&quot; &gt; $temp   $prog $opts $temp   ;;</PRE></BLOCKQUOTE></P><DIVCLASS="sect1info"><PCLASS="SECT1INFO">- <SPANCLASS="authorinitials">JP</SPAN></P></DIV></DIV><DIVCLASS="htmlnav"><P></P><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch25_04.htm"TITLE='25.4 The "less&quot; Pager: More than "more&quot;'><IMGSRC="../gifs/txtpreva.gif"ALT='Previous: 25.4 The "less&quot; Pager: More than "more&quot;'BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="book"HREF="index.htm"TITLE="UNIX Power Tools"><IMGSRC="../gifs/txthome.gif"ALT="UNIX Power Tools"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch25_06.htm"TITLE="25.6 What's in That White Space? "><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 25.6 What's in That White Space? "BORDER="0"></A></TD></TR><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172">25.4 The "less&quot; Pager: More than "more&quot;</TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="index"HREF="index/idx_0.htm"TITLE="Book Index"><IMGSRC="../gifs/index.gif"ALT="Book Index"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172">25.6 What's in That White Space? </TD></TR></TABLE><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><IMGSRC="../gifs/smnavbar.gif"USEMAP="#map"BORDER="0"ALT="The UNIX CD Bookshelf Navigation"><MAPNAME="map"><AREASHAPE="RECT"COORDS="0,0,73,21"HREF="../index.htm"ALT="The UNIX CD Bookshelf"><AREASHAPE="RECT"COORDS="74,0,163,21"HREF="index.htm"ALT="UNIX Power Tools"><AREASHAPE="RECT"COORDS="164,0,257,21"HREF="../unixnut/index.htm"ALT="UNIX in a Nutshell"><AREASHAPE="RECT"COORDS="258,0,321,21"HREF="../vi/index.htm"ALT="Learning the vi Editor"><AREASHAPE="RECT"COORDS="322,0,378,21"HREF="../sedawk/index.htm"ALT="sed &amp; awk"><AREASHAPE="RECT"COORDS="379,0,438,21"HREF="../ksh/index.htm"ALT="Learning the Korn Shell"><AREASHAPE="RECT"COORDS="439,0,514,21"HREF="../lrnunix/index.htm"ALT="Learning the UNIX Operating System"></MAP></DIV></BODY></HTML>