<HTML><HEAD><TITLE>[Chapter 27] 27.2 Searching for Text with grep </TITLE><METANAME="DC.title"CONTENT="UNIX Power Tools"><METANAME="DC.creator"CONTENT="Jerry Peek, Tim O'Reilly &amp; Mike Loukides"><METANAME="DC.publisher"CONTENT="O'Reilly &amp; Associates, Inc."><METANAME="DC.date"CONTENT="1998-08-04T21:44:17Z"><METANAME="DC.type"CONTENT="Text.Monograph"><METANAME="DC.format"CONTENT="text/html"SCHEME="MIME"><METANAME="DC.source"CONTENT="1-56592-260-3"SCHEME="ISBN"><METANAME="DC.language"CONTENT="en-US"><METANAME="generator"CONTENT="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><LINKREV="made"HREF="mailto:online-books@oreilly.com"TITLE="Online Books Comments"><LINKREL="up"HREF="ch27_01.htm"TITLE="27. Searching Through Files"><LINKREL="prev"HREF="ch27_01.htm"TITLE="27.1 Different Versions of grep "><LINKREL="next"HREF="ch27_03.htm"TITLE="27.3 Finding Text That Doesn't Match "></HEAD><BODYBGCOLOR="#FFFFFF"TEXT="#000000"><DIVCLASS="htmlnav"><H1><IMGSRC="gifs/smbanner.gif"ALT="UNIX Power Tools"USEMAP="#srchmap"BORDER="0"></H1><MAPNAME="srchmap"><AREASHAPE="RECT"COORDS="0,0,466,58"HREF="index.htm"ALT="UNIX Power Tools"><AREASHAPE="RECT"COORDS="467,0,514,18"HREF="../search/psrch.htm"ALT="Search this book"></MAP><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch27_01.htm"TITLE="27.1 Different Versions of grep "><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 27.1 Different Versions of grep "BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><B><FONTFACE="ARIEL,HELVETICA,HELV,SANSERIF"SIZE="-1">Chapter 27<BR>Searching Through Files</FONT></B></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch27_03.htm"TITLE="27.3 Finding Text That Doesn't Match "><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 27.3 Finding Text That Doesn't Match "BORDER="0"></A></TD></TR></TABLE>&nbsp;<HRALIGN="LEFT"WIDTH="515"TITLE="footer"></DIV><DIVCLASS="SECT1"><H2CLASS="sect1"><ACLASS="title"NAME="UPT-ART-2550">27.2 Searching for Text with grep </A></H2><PCLASS="para">There are many well-known benefits provided by <EMCLASS="emphasis">grep</EM> to the user who doesn't rememberwhat his or her files contain. Even users of non-UNIX systems who make fun of its obscure name wishthey had a utility with its power to search through a set of filesfor an arbitrary text pattern, known as a<ACLASS="indexterm"NAME="AUTOID-29972"></A><SPANCLASS="link">regular expression (<ACLASS="linkend"HREF="ch26_04.htm"TITLE="Using Metacharacters in Regular Expressions ">26.4</A>)</SPAN>.</P><PCLASS="para">The main function of <EMCLASS="emphasis">grep</EM> is to look for strings matching a regularexpression and print only the lines found.Use <EMCLASS="emphasis">grep</EM> when you want to look at how aparticular word is used in one or more files.For example, here's how to list the lines in the file <EMCLASS="emphasis">ch04</EM> that contain either <EMCLASS="emphasis">run-time</EM> or <EMCLASS="emphasis">run time</EM>:</P><PCLASS="para"><TABLECLASS="screen.co"BORDER="1"><TR><THVALIGN="TOP"><PRECLASS="calloutlist"><ACLASS="co"HREF="ch08_14.htm"TITLE="8.14 Bourne Shell Quoting ">&quot;..&quot;</A> &#13;</PRE></TH><TDVALIGN="TOP"><PRECLASS="screen">$ <CODECLASS="userinput"><B>grep &quot;run[- ]time&quot; ch04</B></CODE>This procedure avoids run-time errors for not-assignedand a run-time error message is produced.run-time error message is produced.program aborts and a run-time error message is produced.DIMENSION statement in BASIC is executable at run time.This means that arrays can be redimensioned at run time.accessible or not open, the program aborts and a run-time</PRE></TD></TR></TABLE></P><PCLASS="para">Another use might be to look for a specific<SPANCLASS="link"><EMCLASS="emphasis">nroff</EM>/<EMCLASS="emphasis">troff</EM> macro (<ACLASS="linkend"HREF="ch43_14.htm"TITLE="nroff/troff and Macro Packages ">43.14</A>)</SPAN>in a file.In a file coded with mm macros, the following command will listtop-level (<CODECLASS="literal">.H1</CODE>) and second-level (<CODECLASS="literal">.H2</CODE>) headings:</P><PCLASS="para"><TABLECLASS="screen.co"BORDER="1"><TR><THVALIGN="TOP"><PRECLASS="calloutlist"><ACLASS="co"HREF="ch15_02.htm"TITLE="15.2 Filename Wildcards in a Nutshell ">[..]</A> &#13;</PRE></TH><TDVALIGN="TOP"><PRECLASS="screen">$ <CODECLASS="userinput"><B>grep &quot;^\.H[12]&quot; ch0[12]</B></CODE>ch01:.H1 &quot;Introduction&quot;ch01:.H1 &quot;Windows, Screens, and Images&quot;ch01:.H2 &quot;The Standard Screen-stdscr&quot;ch01:.H2 &quot;Adding Characters&quot;ch02:.H1 &quot;Introduction&quot;ch02:.H1 &quot;What Is Terminal Independence?&quot;ch02:.H2 &quot;Termcap&quot;ch02:.H2 &quot;Terminfo&quot;</PRE></TD></TR></TABLE></P><PCLASS="para">In effect, it produces a quick outline of the contents of these files.</P><PCLASS="para"><EMCLASS="emphasis">grep</EM> is also often used as a <SPANCLASS="link">filter (<ACLASS="linkend"HREF="ch01_03.htm"TITLE="Programs Are Designed to Work Together ">1.3</A>)</SPAN>,to select from the output of some other program.For example,not all versions of<SPANCLASS="link"><EMCLASS="emphasis">ps</EM> (<ACLASS="linkend"HREF="ch38_05.htm"TITLE="The ps Command ">38.5</A>)</SPAN>allow you to print out the processes belonging to another user, butit's easy to simulate this behavior by listing all processes andpiping the output to <EMCLASS="emphasis">grep</EM>:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">% <CODECLASS="userinput"><B>ps -aux | grep jerry</B></CODE></PRE></BLOCKQUOTE></P><PCLASS="para">There are several options commonly used with <EMCLASS="emphasis">grep</EM>.The <EMCLASS="emphasis">-i</EM> option specifiesthat the search ignore the distinction between uppercase and lowercase.The<SPANCLASS="link"><EMCLASS="emphasis">-c</EM> option (<ACLASS="linkend"HREF="ch15_08.htm"TITLE="Getting a List of Non-Matching Files with grep -c ">15.8</A>)</SPAN>tells <EMCLASS="emphasis">grep</EM> to return only a count of the number of lines matched.The <EMCLASS="emphasis">-w</EM> option searches for the pattern &quot;as a word.&quot;For example, <CODECLASS="literal">grep&nbsp;if</CODE> would match words like <EMCLASS="emphasis">cliff</EM> or<EMCLASS="emphasis">knife</EM>, but <CODECLASS="literal">grep&nbsp;-w&nbsp;if</CODE> wouldn't.The<SPANCLASS="link"><EMCLASS="emphasis">-l</EM> option (<ACLASS="linkend"HREF="ch15_07.htm"TITLE="Getting a List of Matching Files with grep -l ">15.7</A>)</SPAN>returns only the name of the file when <EMCLASS="emphasis">grep</EM> finds a match.This can be used to prepare a list of files for another command.The<SPANCLASS="link"><EMCLASS="emphasis">-v</EM> option (<ACLASS="linkend"HREF="ch27_03.htm"TITLE="Finding Text That Doesn't Match ">27.3</A>)</SPAN>reverses the normal action, and only prints out lines that don'tmatch the search pattern.</P><DIVCLASS="sect1info"><PCLASS="SECT1INFO">- <SPANCLASS="authorinitials">DD</SPAN> <SPANCLASS="bibliomisc">from <CITECLASS="citetitle">UNIX Text Processing</CITE>, Hayden Books, 1987, Chapter 11</SPAN></P></DIV></DIV><DIVCLASS="htmlnav"><P></P><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch27_01.htm"TITLE="27.1 Different Versions of grep "><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 27.1 Different Versions of grep "BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="book"HREF="index.htm"TITLE="UNIX Power Tools"><IMGSRC="../gifs/txthome.gif"ALT="UNIX Power Tools"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch27_03.htm"TITLE="27.3 Finding Text That Doesn't Match "><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 27.3 Finding Text That Doesn't Match "BORDER="0"></A></TD></TR><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172">27.1 Different Versions of grep </TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="index"HREF="index/idx_0.htm"TITLE="Book Index"><IMGSRC="../gifs/index.gif"ALT="Book Index"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172">27.3 Finding Text That Doesn't Match </TD></TR></TABLE><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><IMGSRC="../gifs/smnavbar.gif"USEMAP="#map"BORDER="0"ALT="The UNIX CD Bookshelf Navigation"><MAPNAME="map"><AREASHAPE="RECT"COORDS="0,0,73,21"HREF="../index.htm"ALT="The UNIX CD Bookshelf"><AREASHAPE="RECT"COORDS="74,0,163,21"HREF="index.htm"ALT="UNIX Power Tools"><AREASHAPE="RECT"COORDS="164,0,257,21"HREF="../unixnut/index.htm"ALT="UNIX in a Nutshell"><AREASHAPE="RECT"COORDS="258,0,321,21"HREF="../vi/index.htm"ALT="Learning the vi Editor"><AREASHAPE="RECT"COORDS="322,0,378,21"HREF="../sedawk/index.htm"ALT="sed &amp; awk"><AREASHAPE="RECT"COORDS="379,0,438,21"HREF="../ksh/index.htm"ALT="Learning the Korn Shell"><AREASHAPE="RECT"COORDS="439,0,514,21"HREF="../lrnunix/index.htm"ALT="Learning the UNIX Operating System"></MAP></DIV></BODY></HTML>