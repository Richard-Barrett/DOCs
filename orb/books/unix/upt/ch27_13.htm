<HTML><HEAD><TITLE>[Chapter 27] 27.13 More grep-like Programs Written in Perl </TITLE><METANAME="DC.title"CONTENT="UNIX Power Tools"><METANAME="DC.creator"CONTENT="Jerry Peek, Tim O'Reilly &amp; Mike Loukides"><METANAME="DC.publisher"CONTENT="O'Reilly &amp; Associates, Inc."><METANAME="DC.date"CONTENT="1998-08-04T21:44:30Z"><METANAME="DC.type"CONTENT="Text.Monograph"><METANAME="DC.format"CONTENT="text/html"SCHEME="MIME"><METANAME="DC.source"CONTENT="1-56592-260-3"SCHEME="ISBN"><METANAME="DC.language"CONTENT="en-US"><METANAME="generator"CONTENT="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><LINKREV="made"HREF="mailto:online-books@oreilly.com"TITLE="Online Books Comments"><LINKREL="up"HREF="ch27_01.htm"TITLE="27. Searching Through Files"><LINKREL="prev"HREF="ch27_12.htm"TITLE="27.12 Make Custom grep Commands (etc.) with perl "><LINKREL="next"HREF="ch27_14.htm"TITLE="27.14 Compound Searches "></HEAD><BODYBGCOLOR="#FFFFFF"TEXT="#000000"><DIVCLASS="htmlnav"><H1><IMGSRC="gifs/smbanner.gif"ALT="UNIX Power Tools"USEMAP="#srchmap"BORDER="0"></H1><MAPNAME="srchmap"><AREASHAPE="RECT"COORDS="0,0,466,58"HREF="index.htm"ALT="UNIX Power Tools"><AREASHAPE="RECT"COORDS="467,0,514,18"HREF="../search/psrch.htm"ALT="Search this book"></MAP><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch27_12.htm"TITLE="27.12 Make Custom grep Commands (etc.) with perl "><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 27.12 Make Custom grep Commands (etc.) with perl "BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><B><FONTFACE="ARIEL,HELVETICA,HELV,SANSERIF"SIZE="-1">Chapter 27<BR>Searching Through Files</FONT></B></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch27_14.htm"TITLE="27.14 Compound Searches "><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 27.14 Compound Searches "BORDER="0"></A></TD></TR></TABLE>&nbsp;<HRALIGN="LEFT"WIDTH="515"TITLE="footer"></DIV><DIVCLASS="SECT1"><H2CLASS="sect1"><ACLASS="title"NAME="UPT-ART-8012">27.13 More grep-like Programs Written in Perl </A></H2><PCLASS="para">[Article<ACLASS="xref"HREF="ch27_12.htm"TITLE="Make Custom grep Commands (etc.) with perl ">27.12</A>gave a sense of how easy it might be to write custom search programsin Perl...but until you learn the language, you can't rip these offwhenever you find yourself in need. This article describes a fewmore custom greps written in Perl. It doesn't show the scriptsthemselves, just how to use them. If you like them, they are on thedisc and the online archive. -TOR&nbsp;] </P><TABLECLASS="para.programreference"BORDER="1"><TR><THVALIGN="TOP"><ACLASS="programreference"HREF="examples/index.htm"TITLE="tgrep">tgrep</A><BR></TH><TDVALIGN="TOP"><ACLASS="indexterm"NAME="AUTOID-30589"></A>The <EMCLASS="emphasis">tgrep</EM> program <EMCLASS="emphasis">grep</EM>s only those files containing textualdata. It's useful in a directory that has mixed binary and textualfiles, when the filenames aren't a sufficient clue to the nature of thefile. <EMCLASS="emphasis">tgrep</EM> has one option, <EMCLASS="emphasis">-l</EM>, which causes it to listthe files containing the pattern rather than listing the linescontaining the pattern.</TD></TR></TABLE><TABLECLASS="para.programreference"BORDER="1"><TR><THVALIGN="TOP"><ACLASS="programreference"HREF="examples/index.htm"TITLE="pipegrep">pipegrep</A><BR></TH><TDVALIGN="TOP"><ACLASS="indexterm"NAME="AUTOID-30597"></A>The <EMCLASS="emphasis">pipegrep</EM> program <EMCLASS="emphasis">grep</EM>s the output of a series of commands.The difficulty with doing this using the normal <EMCLASS="emphasis">grep</EM> program isthat you lose track of which file was being processed. This programprints out the command it was executing at the time, including thefilename. The command, which is a single argument, will be executedonce for each file in the list. If you give the string <CODECLASS="literal">{}</CODE>anywhere in the command, the filename will be substituted at thatpoint. Otherwise the filename will be added on tothe end of thecommand. This program has one option, <EMCLASS="emphasis">-l</EM>, which causes it tolist the files containing the pattern.For example [<EMCLASS="emphasis">nm</EM> is a programmers' utility that prints symbol namelists-<EMCLASS="emphasis">JP</EM>&nbsp;]:</TD></TR></TABLE><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">$ <CODECLASS="userinput"><B>cd /usr/lib</B></CODE>$ <CODECLASS="userinput"><B>pipegrep 'sys_nerr' nm lib*.a</B></CODE>nm /usr/lib/libX11.a |:          U _sys_nerrnm /usr/lib/libXaw.a |:          U _sys_nerrnm /usr/lib/libXaw.a |:          U _sys_nerrnm /usr/lib/libc.a |:            U _sys_nerr           .           .           .</PRE></BLOCKQUOTE></P><TABLECLASS="para.programreference"BORDER="1"><TR><THVALIGN="TOP"><ACLASS="programreference"HREF="examples/index.htm"TITLE="cgrep">cgrep</A><BR></TH><TDVALIGN="TOP"><ACLASS="indexterm"NAME="AUTOID-30612"></A>The <EMCLASS="emphasis">cgrep</EM> program <EMCLASS="emphasis">grep</EM>s for a pattern in the specified files, andprints out that line with several lines of surrounding context.This context grep scriptlets you specify how many lines of context you want if youwant more or less than the default. For example:</TD></TR></TABLE><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">$ <CODECLASS="userinput"><B>cgrep -3 </B></CODE><CODECLASS="replaceable"><I>pattern files</I></CODE></PRE></BLOCKQUOTE></P><PCLASS="para">would give you three lines of context above and below the matchingline. Each occurrence is separated from the next by a shorthorizontal line (<CODECLASS="literal">-----</CODE>).<ACLASS="indexterm"NAME="AUTOID-30623"></A><ACLASS="indexterm"NAME="AUTOID-30624"></A><ACLASS="indexterm"NAME="AUTOID-30625"></A><ACLASS="indexterm"NAME="AUTOID-30626"></A></P><DIVCLASS="sect1info"><PCLASS="SECT1INFO">- <SPANCLASS="authorinitials">LW</SPAN>, <SPANCLASS="authorinitials">RS</SPAN>, <SPANCLASS="authorinitials">TC</SPAN> <SPANCLASS="bibliomisc">from O'Reilly &amp; Associates' <CITECLASS="citetitle">Programming Perl</CITE></SPAN></P></DIV></DIV><DIVCLASS="htmlnav"><P></P><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch27_12.htm"TITLE="27.12 Make Custom grep Commands (etc.) with perl "><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 27.12 Make Custom grep Commands (etc.) with perl "BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="book"HREF="index.htm"TITLE="UNIX Power Tools"><IMGSRC="../gifs/txthome.gif"ALT="UNIX Power Tools"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch27_14.htm"TITLE="27.14 Compound Searches "><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 27.14 Compound Searches "BORDER="0"></A></TD></TR><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172">27.12 Make Custom grep Commands (etc.) with perl </TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="index"HREF="index/idx_0.htm"TITLE="Book Index"><IMGSRC="../gifs/index.gif"ALT="Book Index"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172">27.14 Compound Searches </TD></TR></TABLE><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><IMGSRC="../gifs/smnavbar.gif"USEMAP="#map"BORDER="0"ALT="The UNIX CD Bookshelf Navigation"><MAPNAME="map"><AREASHAPE="RECT"COORDS="0,0,73,21"HREF="../index.htm"ALT="The UNIX CD Bookshelf"><AREASHAPE="RECT"COORDS="74,0,163,21"HREF="index.htm"ALT="UNIX Power Tools"><AREASHAPE="RECT"COORDS="164,0,257,21"HREF="../unixnut/index.htm"ALT="UNIX in a Nutshell"><AREASHAPE="RECT"COORDS="258,0,321,21"HREF="../vi/index.htm"ALT="Learning the vi Editor"><AREASHAPE="RECT"COORDS="322,0,378,21"HREF="../sedawk/index.htm"ALT="sed &amp; awk"><AREASHAPE="RECT"COORDS="379,0,438,21"HREF="../ksh/index.htm"ALT="Learning the Korn Shell"><AREASHAPE="RECT"COORDS="439,0,514,21"HREF="../lrnunix/index.htm"ALT="Learning the UNIX Operating System"></MAP></DIV></BODY></HTML>