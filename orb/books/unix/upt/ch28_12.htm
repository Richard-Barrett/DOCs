<HTML><HEAD><TITLE>[Chapter 28] 28.12 Comparing Two Files with comm </TITLE><METANAME="DC.title"CONTENT="UNIX Power Tools"><METANAME="DC.creator"CONTENT="Jerry Peek, Tim O'Reilly &amp; Mike Loukides"><METANAME="DC.publisher"CONTENT="O'Reilly &amp; Associates, Inc."><METANAME="DC.date"CONTENT="1998-08-04T21:44:50Z"><METANAME="DC.type"CONTENT="Text.Monograph"><METANAME="DC.format"CONTENT="text/html"SCHEME="MIME"><METANAME="DC.source"CONTENT="1-56592-260-3"SCHEME="ISBN"><METANAME="DC.language"CONTENT="en-US"><METANAME="generator"CONTENT="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><LINKREV="made"HREF="mailto:online-books@oreilly.com"TITLE="Online Books Comments"><LINKREL="up"HREF="ch28_01.htm"TITLE="28. Comparing Files"><LINKREL="prev"HREF="ch28_11.htm"TITLE="28.11 cmp and diff "><LINKREL="next"HREF="ch28_13.htm"TITLE="28.13 make Isn't Just for Programmers! "></HEAD><BODYBGCOLOR="#FFFFFF"TEXT="#000000"><DIVCLASS="htmlnav"><H1><IMGSRC="gifs/smbanner.gif"ALT="UNIX Power Tools"USEMAP="#srchmap"BORDER="0"></H1><MAPNAME="srchmap"><AREASHAPE="RECT"COORDS="0,0,466,58"HREF="index.htm"ALT="UNIX Power Tools"><AREASHAPE="RECT"COORDS="467,0,514,18"HREF="../search/psrch.htm"ALT="Search this book"></MAP><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch28_11.htm"TITLE="28.11 cmp and diff "><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 28.11 cmp and diff "BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><B><FONTFACE="ARIEL,HELVETICA,HELV,SANSERIF"SIZE="-1">Chapter 28<BR>Comparing Files</FONT></B></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch28_13.htm"TITLE="28.13 make Isn't Just for Programmers! "><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 28.13 make Isn't Just for Programmers! "BORDER="0"></A></TD></TR></TABLE>&nbsp;<HRALIGN="LEFT"WIDTH="515"TITLE="footer"></DIV><DIVCLASS="SECT1"><H2CLASS="sect1"><ACLASS="title"NAME="UPT-ART-2710">28.12 Comparing Two Files with comm </A></H2><PCLASS="para"><ACLASS="indexterm"NAME="UPT-ART-2710-IX-COMM-COMMAND"></A><ACLASS="indexterm"NAME="UPT-ART-2710-IX-COMPARING-FILES-COMM-COMMAND"></A>The <EMCLASS="emphasis">comm</EM> command can tell you what information is common to two lists,and what information appears uniquely in one list or the other.For example, let's say you're compiling information on the favorite moviesof critics Siskel and Ebert. The movies are listed in separate files(and must be<SPANCLASS="link">sorted (<ACLASS="linkend"HREF="ch36_01.htm#UPT-ART-7640"TITLE="Putting Things in Order ">36.1</A>)</SPAN>-if they aren't sorted, the <SPANCLASS="link"><CODECLASS="replaceable"><I>!</I></CODE> script (<ACLASS="linkend"HREF="ch09_18.htm"TITLE="Process Substitution ">9.18</A>)</SPAN>will help).For the sake of illustration, assume each list isshort:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">% <CODECLASS="userinput"><B>cat siskel</B></CODE>Citizen KaneHalloween VINinja IIIRambo IIStar Trek VZelig% <CODECLASS="userinput"><B>cat ebert</B></CODE>Cat PeopleCitizen KaneMy Life as a DogQZZelig</PRE></BLOCKQUOTE></P><PCLASS="para">&#13;To compare the favorite movies of your favorite critics, type:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">% <CODECLASS="userinput"><B>comm siskel ebert</B></CODE>                  Cat People                                         Citizen KaneHalloween VI                  My Life as a DogNinja III                  QRambo IIStar Trek V                  Z                                         Zelig</PRE></BLOCKQUOTE></P><PCLASS="para">Column 1 shows the movies that only Siskel likes; Column 2 shows those thatonly Ebert likes; and Column 3 shows the movies that they both like.You can suppress one or more columns of output by specifying that column as acommand-line option. For example, to suppress Columns 1 and 2 (displaying onlythe movies <EMCLASS="emphasis">both</EM> critics like), you would type:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">% <CODECLASS="userinput"><B>comm -12 siskel ebert</B></CODE>Citizen KaneZelig</PRE></BLOCKQUOTE></P><PCLASS="para">As another example, say you've just received a new software release (Release 4),and it's your job to figure out which library functions have been added so thatthey can be documented along with the old ones.Let's assume you already have a list of the Release 3 functions(<EMCLASS="emphasis">r3_list</EM>) and a list of the Release 4 functions (<EMCLASS="emphasis">r4_list</EM>).(If you didn't, you could create them by changing to the directory thathas the function manual pages, listing the files with <EMCLASS="emphasis">ls</EM>, and savingeach list to a file.) In the listsbelow,we've used letters of the alphabet to represent the functions:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">% <CODECLASS="userinput"><B>cat r3_list</B></CODE>bcdfgh% <CODECLASS="userinput"><B>cat r4_list</B></CODE>abcdef</PRE></BLOCKQUOTE></P><PCLASS="para">You can now use the <EMCLASS="emphasis">comm</EM> command to answer several questions you mighthave:</P><ULCLASS="itemizedlist"><LICLASS="listitem"><PCLASS="para">Which functions are new to Release 4? Answer:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">% <CODECLASS="userinput"><B>comm -13 r3_list r4_list    </B></CODE><EMCLASS="emphasis">Show 2nd column, which is &quot;Release 4 only&quot;</EM> ae</PRE></BLOCKQUOTE></P><PCLASS="para"></P></LI><LICLASS="listitem"><PCLASS="para">Which Release 3 functions have been dropped in Release 4? Answer:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">% <CODECLASS="userinput"><B>comm -23 r3_list r4_list    </B></CODE><EMCLASS="emphasis">Show 1st column, which is &quot;Release 3 only&quot;</EM> gh</PRE></BLOCKQUOTE></P><PCLASS="para"></P></LI><LICLASS="listitem"><PCLASS="para">Which Release 3 functions have been retained in Release 4? Answer:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">% <CODECLASS="userinput"><B>comm -12 r3_list r4_list    </B></CODE><EMCLASS="emphasis">Show 3rd column, which is &quot;common functions&quot;</EM> bcdf</PRE></BLOCKQUOTE></P></LI></UL><PCLASS="para">You can create partial lists by saving the above output to three separate files.</P><PCLASS="para"><EMCLASS="emphasis">comm</EM> can only compare sorted files.If you can't sort the files, look at the trick in article<ACLASS="xref"HREF="ch02_14.htm"TITLE="motd.diff: Show New Lines in Login Messages">2.14</A>:&nbsp;using <EMCLASS="emphasis">diff</EM> and <EMCLASS="emphasis">grep</EM>.</P><ACLASS="indexterm"NAME="AUTOID-31603"></A><ACLASS="indexterm"NAME="AUTOID-31604"></A><DIVCLASS="sect1info"><PCLASS="SECT1INFO">- <SPANCLASS="authorinitials">DG</SPAN></P></DIV></DIV><DIVCLASS="htmlnav"><P></P><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch28_11.htm"TITLE="28.11 cmp and diff "><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 28.11 cmp and diff "BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="book"HREF="index.htm"TITLE="UNIX Power Tools"><IMGSRC="../gifs/txthome.gif"ALT="UNIX Power Tools"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch28_13.htm"TITLE="28.13 make Isn't Just for Programmers! "><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 28.13 make Isn't Just for Programmers! "BORDER="0"></A></TD></TR><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172">28.11 cmp and diff </TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="index"HREF="index/idx_0.htm"TITLE="Book Index"><IMGSRC="../gifs/index.gif"ALT="Book Index"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172">28.13 make Isn't Just for Programmers! </TD></TR></TABLE><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><IMGSRC="../gifs/smnavbar.gif"USEMAP="#map"BORDER="0"ALT="The UNIX CD Bookshelf Navigation"><MAPNAME="map"><AREASHAPE="RECT"COORDS="0,0,73,21"HREF="../index.htm"ALT="The UNIX CD Bookshelf"><AREASHAPE="RECT"COORDS="74,0,163,21"HREF="index.htm"ALT="UNIX Power Tools"><AREASHAPE="RECT"COORDS="164,0,257,21"HREF="../unixnut/index.htm"ALT="UNIX in a Nutshell"><AREASHAPE="RECT"COORDS="258,0,321,21"HREF="../vi/index.htm"ALT="Learning the vi Editor"><AREASHAPE="RECT"COORDS="322,0,378,21"HREF="../sedawk/index.htm"ALT="sed &amp; awk"><AREASHAPE="RECT"COORDS="379,0,438,21"HREF="../ksh/index.htm"ALT="Learning the Korn Shell"><AREASHAPE="RECT"COORDS="439,0,514,21"HREF="../lrnunix/index.htm"ALT="Learning the UNIX Operating System"></MAP></DIV></BODY></HTML>