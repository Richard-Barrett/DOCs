<HTML><HEAD><TITLE>[Chapter 30] 30.4 Editing Multiple Files with vi </TITLE><METANAME="DC.title"CONTENT="UNIX Power Tools"><METANAME="DC.creator"CONTENT="Jerry Peek, Tim O'Reilly &amp; Mike Loukides"><METANAME="DC.publisher"CONTENT="O'Reilly &amp; Associates, Inc."><METANAME="DC.date"CONTENT="1998-08-04T21:45:21Z"><METANAME="DC.type"CONTENT="Text.Monograph"><METANAME="DC.format"CONTENT="text/html"SCHEME="MIME"><METANAME="DC.source"CONTENT="1-56592-260-3"SCHEME="ISBN"><METANAME="DC.language"CONTENT="en-US"><METANAME="generator"CONTENT="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><LINKREV="made"HREF="mailto:online-books@oreilly.com"TITLE="Online Books Comments"><LINKREL="up"HREF="ch30_01.htm"TITLE="30. vi Tips and Tricks"><LINKREL="prev"HREF="ch30_03.htm"TITLE="30.3 Mice vs. vi "><LINKREL="next"HREF="ch30_05.htm"TITLE="30.5 Edits Between Files "></HEAD><BODYBGCOLOR="#FFFFFF"TEXT="#000000"><DIVCLASS="htmlnav"><H1><IMGSRC="gifs/smbanner.gif"ALT="UNIX Power Tools"USEMAP="#srchmap"BORDER="0"></H1><MAPNAME="srchmap"><AREASHAPE="RECT"COORDS="0,0,466,58"HREF="index.htm"ALT="UNIX Power Tools"><AREASHAPE="RECT"COORDS="467,0,514,18"HREF="../search/psrch.htm"ALT="Search this book"></MAP><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch30_03.htm"TITLE="30.3 Mice vs. vi "><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 30.3 Mice vs. vi "BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><B><FONTFACE="ARIEL,HELVETICA,HELV,SANSERIF"SIZE="-1">Chapter 30<BR>vi Tips and Tricks</FONT></B></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch30_05.htm"TITLE="30.5 Edits Between Files "><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 30.5 Edits Between Files "BORDER="0"></A></TD></TR></TABLE>&nbsp;<HRALIGN="LEFT"WIDTH="515"TITLE="footer"></DIV><DIVCLASS="SECT1"><H2CLASS="sect1"><ACLASS="title"NAME="UPT-ART-6150">30.4 Editing Multiple Files with vi </A></H2><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-32627"></A><ACLASS="indexterm"NAME="AUTOID-32630"></A><ACLASS="indexterm"NAME="AUTOID-32633"></A><ACLASS="indexterm"NAME="AUTOID-32636"></A><ACLASS="indexterm"NAME="AUTOID-32639"></A><ACLASS="indexterm"NAME="AUTOID-32642"></A><ACLASS="indexterm"NAME="AUTOID-32645"></A><ACLASS="indexterm"NAME="AUTOID-32649"></A><EMCLASS="emphasis">ex</EM> commands enable you to switch between multiple files.The advantage is speed. When you are sharing the system withother users, it takes time to exit and re-enter <EMCLASS="emphasis">vi</EM> for eachfile you want to edit. Staying in thesame editing session and traveling between files is not only fasterfor access, but you also save abbreviations and command sequences that you have defined,and you keep <SPANCLASS="link">yank buffers (<ACLASS="linkend"HREF="ch30_05.htm"TITLE="Edits Between Files ">30.5</A>)</SPAN>so that you can copy text from one file to another.</P><PCLASS="para">When you first invoke <EMCLASS="emphasis">vi</EM>, you can name more than one fileto edit, and then use <EMCLASS="emphasis">ex</EM> commands totravel between the files:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">% <CODECLASS="userinput"><B>vi file1 file2</B></CODE></PRE></BLOCKQUOTE></P><PCLASS="para">This edits <EMCLASS="emphasis">file1</EM> first.  After you have finished editing thefirst file, the <EMCLASS="emphasis">ex</EM> command <CODECLASS="literal">:w</CODE> writes (saves) <EMCLASS="emphasis">file1</EM>and <CODECLASS="literal">:n</CODE> calls in the next file (<EMCLASS="emphasis">file2</EM>).  You can evensay <CODECLASS="literal">vi&nbsp;*</CODE> to edit all the files in a directory.  TypeCTRL-g or <CODECLASS="literal">:f</CODE> to get the name of your current file;<CODECLASS="literal">:args</CODE> lists all filenames from the command line and putsbrackets around the <CODECLASS="literal">[</CODE><CODECLASS="replaceable"><I>current</I></CODE><CODECLASS="literal">]</CODE> file.</P><PCLASS="para">You can also switch at any time to another file that you didn'tspecify on the command line with the <EMCLASS="emphasis">ex</EM> command <CODECLASS="literal">:e</CODE>.  Ifyou want to edit another file within <EMCLASS="emphasis">vi</EM>, you first need to saveyour current file (<CODECLASS="literal">:w</CODE>), then you can type the following command:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen"><CODECLASS="userinput"><B>:e</B></CODE> <CODECLASS="replaceable"><I>filename</I></CODE></PRE></BLOCKQUOTE></P><PCLASS="para"><EMCLASS="emphasis">vi</EM> &quot;remembers&quot; two filenames at a time as the current andalternate filenames.These can be referred to by the symbols <CODECLASS="literal">%</CODE> (current filename)and <CODECLASS="literal">#</CODE> (alternate filename).</P><PCLASS="para"><CODECLASS="literal">#</CODE> is particularly useful with <CODECLASS="literal">:e</CODE>, since it allows you toswitch easily back and forth between two files.The command <CODECLASS="literal">:e#</CODE> is always &quot;switch to the other one.&quot;(On some systems, the <EMCLASS="emphasis">vi</EM> command CTRL-<CODECLASS="literal">^</CODE>(control-caret) is a synonym for<CODECLASS="literal">:e#</CODE>.)</P><PCLASS="para">If you have not first saved the current file, <EMCLASS="emphasis">vi</EM> will not allowyou to switch files with <CODECLASS="literal">:e</CODE> or <CODECLASS="literal">:n</CODE> unless you tell itimperatively to do so by adding an exclamation point after the command.</P><PCLASS="para">The command:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen"><CODECLASS="userinput"><B>:e!</B></CODE></PRE></BLOCKQUOTE></P><PCLASS="para">is also useful.It discards your edits and returns to the last savedversion of the current file.</P><PCLASS="para">In contrast to the <CODECLASS="literal">#</CODE> symbol, <CODECLASS="literal">%</CODE> is useful mainly when writing out the contents of the current buffer to a new file.For example, you could  save a secondversion of the file <EMCLASS="emphasis">letter</EM> with the command:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen"><CODECLASS="userinput"><B>:w %.new</B></CODE></PRE></BLOCKQUOTE></P><PCLASS="para">&#13;instead of:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen"><CODECLASS="userinput"><B>:w letter.new</B></CODE></PRE></BLOCKQUOTE></P><DIVCLASS="sect1info"><PCLASS="SECT1INFO">- <SPANCLASS="authorinitials">LL</SPAN> <SPANCLASS="bibliomisc">from O'Reilly &amp; Associates' <CITECLASS="citetitle">Learning the vi Editor</CITE>, Chapter 5</SPAN></P></DIV></DIV><DIVCLASS="htmlnav"><P></P><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch30_03.htm"TITLE="30.3 Mice vs. vi "><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 30.3 Mice vs. vi "BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="book"HREF="index.htm"TITLE="UNIX Power Tools"><IMGSRC="../gifs/txthome.gif"ALT="UNIX Power Tools"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch30_05.htm"TITLE="30.5 Edits Between Files "><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 30.5 Edits Between Files "BORDER="0"></A></TD></TR><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172">30.3 Mice vs. vi </TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="index"HREF="index/idx_0.htm"TITLE="Book Index"><IMGSRC="../gifs/index.gif"ALT="Book Index"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172">30.5 Edits Between Files </TD></TR></TABLE><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><IMGSRC="../gifs/smnavbar.gif"USEMAP="#map"BORDER="0"ALT="The UNIX CD Bookshelf Navigation"><MAPNAME="map"><AREASHAPE="RECT"COORDS="0,0,73,21"HREF="../index.htm"ALT="The UNIX CD Bookshelf"><AREASHAPE="RECT"COORDS="74,0,163,21"HREF="index.htm"ALT="UNIX Power Tools"><AREASHAPE="RECT"COORDS="164,0,257,21"HREF="../unixnut/index.htm"ALT="UNIX in a Nutshell"><AREASHAPE="RECT"COORDS="258,0,321,21"HREF="../vi/index.htm"ALT="Learning the vi Editor"><AREASHAPE="RECT"COORDS="322,0,378,21"HREF="../sedawk/index.htm"ALT="sed &amp; awk"><AREASHAPE="RECT"COORDS="379,0,438,21"HREF="../ksh/index.htm"ALT="Learning the Korn Shell"><AREASHAPE="RECT"COORDS="439,0,514,21"HREF="../lrnunix/index.htm"ALT="Learning the UNIX Operating System"></MAP></DIV></BODY></HTML>