<HTML><HEAD><TITLE>[Chapter 30] 30.27 vi Compound Searches </TITLE><METANAME="DC.title"CONTENT="UNIX Power Tools"><METANAME="DC.creator"CONTENT="Jerry Peek, Tim O'Reilly &amp; Mike Loukides"><METANAME="DC.publisher"CONTENT="O'Reilly &amp; Associates, Inc."><METANAME="DC.date"CONTENT="1998-08-04T21:45:46Z"><METANAME="DC.type"CONTENT="Text.Monograph"><METANAME="DC.format"CONTENT="text/html"SCHEME="MIME"><METANAME="DC.source"CONTENT="1-56592-260-3"SCHEME="ISBN"><METANAME="DC.language"CONTENT="en-US"><METANAME="generator"CONTENT="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><LINKREV="made"HREF="mailto:online-books@oreilly.com"TITLE="Online Books Comments"><LINKREL="up"HREF="ch30_01.htm"TITLE="30. vi Tips and Tricks"><LINKREL="prev"HREF="ch30_26.htm"TITLE="30.26 Shell Escapes: Running One UNIX Command While Using Another"><LINKREL="next"HREF="ch30_28.htm"TITLE="30.28 Keep Track of Functions and Included Files with ctags and tags"></HEAD><BODYBGCOLOR="#FFFFFF"TEXT="#000000"><DIVCLASS="htmlnav"><H1><IMGSRC="gifs/smbanner.gif"ALT="UNIX Power Tools"USEMAP="#srchmap"BORDER="0"></H1><MAPNAME="srchmap"><AREASHAPE="RECT"COORDS="0,0,466,58"HREF="index.htm"ALT="UNIX Power Tools"><AREASHAPE="RECT"COORDS="467,0,514,18"HREF="../search/psrch.htm"ALT="Search this book"></MAP><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch30_26.htm"TITLE="30.26 Shell Escapes: Running One UNIX Command While Using Another"><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 30.26 Shell Escapes: Running One UNIX Command While Using Another"BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><B><FONTFACE="ARIEL,HELVETICA,HELV,SANSERIF"SIZE="-1">Chapter 30<BR>vi Tips and Tricks</FONT></B></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch30_28.htm"TITLE="30.28 Keep Track of Functions and Included Files with ctags and tags"><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 30.28 Keep Track of Functions and Included Files with ctags and tags"BORDER="0"></A></TD></TR></TABLE>&nbsp;<HRALIGN="LEFT"WIDTH="515"TITLE="footer"></DIV><DIVCLASS="SECT1"><H2CLASS="sect1"><ACLASS="title"NAME="UPT-ART-0141">30.27 vi Compound Searches </A></H2><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-34055"></A><ACLASS="indexterm"NAME="AUTOID-34058"></A><ACLASS="indexterm"NAME="AUTOID-34061"></A>You probably know that you can search for a word or phrase with the <EMCLASS="emphasis">vi</EM>command <CODECLASS="literal">/</CODE> (slash):</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen"><CODECLASS="userinput"><B>/treasure</B></CODE></PRE></BLOCKQUOTE></P><PCLASS="para">If you have a file that uses the same word over and over again, you might want tofind one particular place that the word is used.You can repeat the search with the <EMCLASS="emphasis">n</EM> command until you find theplace you want.That can take time and work, though.</P><PCLASS="para">For example, suppose you want to find the word &quot;treasure&quot;in the sentence that haswords something like &quot;Los Alamos residents...treasure,&quot; butyou can't remember exactly how the sentence is written.You could use wildcards in your<SPANCLASS="link">regular expression (<ACLASS="linkend"HREF="ch26_04.htm"TITLE="Using Metacharacters in Regular Expressions ">26.4</A>)</SPAN>:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen"><CODECLASS="userinput"><B>/Los Alamos.*treasure</B></CODE></PRE></BLOCKQUOTE></P><PCLASS="para">but then the phrases &quot;Los Alamos&quot; and &quot;treasure&quot; have to be on the same lineof the file you're searching&nbsp;- and they won't always be.Also, you want your cursor on the word <EMCLASS="emphasis">treasure</EM>, but that search wouldput the cursor on <EMCLASS="emphasis">Los</EM> instead.</P><PCLASS="para">&quot;Hmmm,&quot; you say,&quot;How about two separate searches, like this?&quot;</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">/Los Alamos/treasure</PRE></BLOCKQUOTE></P><PCLASS="para">The problem there is: the file might have the phrase &quot;Los Alamos&quot; allthrough it; you might have to type <EMCLASS="emphasis">n</EM> over and over until you get tothe sentence with <EMCLASS="emphasis">treasure</EM>.</P><PCLASS="para">Here's the easy way: a compound search.Say your cursor is on line 1 of the following file:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">Before the second World War, there was a treasured boys' school inwhat was to become the city of Los Alamos, New Mexico. The school atLos Alamos changed the lives and made a lifelong impression on most boyswho attended. One of the boys who attended the Los Alamos school went onto propose that remote set of mesas as a site for the U.S. Government's   ...Since the war ended, most of the boys' school ranch buildings have been torndown or replaced. But there's one building that Los Alamos residents stilluse and treasure. It's The Lodge, a log building on the edge of what's now   ...</PRE></BLOCKQUOTE></P><PCLASS="para">Type the command:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen"><CODECLASS="userinput"><B>/Los Alamos/;/treasure/</B></CODE></PRE></BLOCKQUOTE></P><PCLASS="para">That means &quot;find the first occurrence of <EMCLASS="emphasis">treasure</EM> just after<EMCLASS="emphasis">Los Alamos</EM>.&quot;Starting at the top of the example above, that search will skip past all the<EMCLASS="emphasis">treasure</EM> and <EMCLASS="emphasis">Los Alamos</EM> words until it finds the word <EMCLASS="emphasis">treasure</EM>on the last line shown.(It's probably smarter to type just <CODECLASS="literal">/Alamos/;/treasure/</CODE> in case the<EMCLASS="emphasis">Los Alamos</EM> is split across two lines of the file.)</P><PCLASS="para">Another example: a C programmer who wants to find the <EMCLASS="emphasis">printf</EM> functioncall just after the line where <EMCLASS="emphasis">i</EM> is incremented by two (<CODECLASS="literal">i&nbsp;+=&nbsp;2</CODE>).She could type:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen"><CODECLASS="userinput"><B>/i += 2/;/printf/</B></CODE></PRE></BLOCKQUOTE></P><BLOCKQUOTECLASS="note"><PCLASS="para"><STRONG>NOTE:</STRONG> You can't repeat a compound search by typing <CODECLASS="literal">n</CODE>.The easiest way is to define the search as a<SPANCLASS="link">key map (<ACLASS="linkend"HREF="ch31_02.htm"TITLE="Save Time and Typing with the vi map Commands ">31.2</A>)</SPAN>:</P><PCLASS="para"><TABLECLASS="screen.co"BORDER="1"><TR><THVALIGN="TOP"><PRECLASS="calloutlist"><ACLASS="co"HREF="ch31_06.htm"TITLE="31.6 Protecting Keys from Interpretation by ex ">^M</A> </PRE></TH><TDVALIGN="TOP"><PRECLASS="screen"><CODECLASS="userinput"><B>:map g /Los Alamos/;/treasure/^M</B></CODE></PRE></TD></TR></TABLE></P><PCLASS="para">and use (in this case) <CODECLASS="literal">g</CODE> to repeat the search.</P></BLOCKQUOTE><DIVCLASS="sect1info"><PCLASS="SECT1INFO">- <SPANCLASS="authorinitials">JP</SPAN></P></DIV></DIV><DIVCLASS="htmlnav"><P></P><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch30_26.htm"TITLE="30.26 Shell Escapes: Running One UNIX Command While Using Another"><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 30.26 Shell Escapes: Running One UNIX Command While Using Another"BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="book"HREF="index.htm"TITLE="UNIX Power Tools"><IMGSRC="../gifs/txthome.gif"ALT="UNIX Power Tools"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch30_28.htm"TITLE="30.28 Keep Track of Functions and Included Files with ctags and tags"><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 30.28 Keep Track of Functions and Included Files with ctags and tags"BORDER="0"></A></TD></TR><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172">30.26 Shell Escapes: Running One UNIX Command While Using Another</TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="index"HREF="index/idx_0.htm"TITLE="Book Index"><IMGSRC="../gifs/index.gif"ALT="Book Index"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172">30.28 Keep Track of Functions and Included Files with ctags and tags</TD></TR></TABLE><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><IMGSRC="../gifs/smnavbar.gif"USEMAP="#map"BORDER="0"ALT="The UNIX CD Bookshelf Navigation"><MAPNAME="map"><AREASHAPE="RECT"COORDS="0,0,73,21"HREF="../index.htm"ALT="The UNIX CD Bookshelf"><AREASHAPE="RECT"COORDS="74,0,163,21"HREF="index.htm"ALT="UNIX Power Tools"><AREASHAPE="RECT"COORDS="164,0,257,21"HREF="../unixnut/index.htm"ALT="UNIX in a Nutshell"><AREASHAPE="RECT"COORDS="258,0,321,21"HREF="../vi/index.htm"ALT="Learning the vi Editor"><AREASHAPE="RECT"COORDS="322,0,378,21"HREF="../sedawk/index.htm"ALT="sed &amp; awk"><AREASHAPE="RECT"COORDS="379,0,438,21"HREF="../ksh/index.htm"ALT="Learning the Korn Shell"><AREASHAPE="RECT"COORDS="439,0,514,21"HREF="../lrnunix/index.htm"ALT="Learning the UNIX Operating System"></MAP></DIV></BODY></HTML>