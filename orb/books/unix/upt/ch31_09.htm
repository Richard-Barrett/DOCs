<HTML><HEAD><TITLE>[Chapter 31] 31.9 Good Stuff for Your .exrc File </TITLE><METANAME="DC.title"CONTENT="UNIX Power Tools"><METANAME="DC.creator"CONTENT="Jerry Peek, Tim O'Reilly &amp; Mike Loukides"><METANAME="DC.publisher"CONTENT="O'Reilly &amp; Associates, Inc."><METANAME="DC.date"CONTENT="1998-08-04T21:46:19Z"><METANAME="DC.type"CONTENT="Text.Monograph"><METANAME="DC.format"CONTENT="text/html"SCHEME="MIME"><METANAME="DC.source"CONTENT="1-56592-260-3"SCHEME="ISBN"><METANAME="DC.language"CONTENT="en-US"><METANAME="generator"CONTENT="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><LINKREV="made"HREF="mailto:online-books@oreilly.com"TITLE="Online Books Comments"><LINKREL="up"HREF="ch31_01.htm"TITLE="31. Creating Custom Commands in vi"><LINKREL="prev"HREF="ch31_08.htm"TITLE="31.8 More Examples of Mapping Keys in vi "><LINKREL="next"HREF="ch31_10.htm"TITLE="31.10 Repeating a vi Keymap "></HEAD><BODYBGCOLOR="#FFFFFF"TEXT="#000000"><DIVCLASS="htmlnav"><H1><IMGSRC="gifs/smbanner.gif"ALT="UNIX Power Tools"USEMAP="#srchmap"BORDER="0"></H1><MAPNAME="srchmap"><AREASHAPE="RECT"COORDS="0,0,466,58"HREF="index.htm"ALT="UNIX Power Tools"><AREASHAPE="RECT"COORDS="467,0,514,18"HREF="../search/psrch.htm"ALT="Search this book"></MAP><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch31_08.htm"TITLE="31.8 More Examples of Mapping Keys in vi "><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 31.8 More Examples of Mapping Keys in vi "BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><B><FONTFACE="ARIEL,HELVETICA,HELV,SANSERIF"SIZE="-1">Chapter 31<BR>Creating Custom Commands in vi</FONT></B></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch31_10.htm"TITLE="31.10 Repeating a vi Keymap "><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 31.10 Repeating a vi Keymap "BORDER="0"></A></TD></TR></TABLE>&nbsp;<HRALIGN="LEFT"WIDTH="515"TITLE="footer"></DIV><DIVCLASS="SECT1"><H2CLASS="sect1"><ACLASS="title"NAME="UPT-ART-0449">31.9 Good Stuff for Your .exrc File </A></H2><PCLASS="para">[You probably won't want all of these keymaps and abbreviations.<ACLASS="indexterm"NAME="UPT-ART-449-IX-EXRC-FILE-EXRC-FILE"></A>I always hate to re-map keys unless I really have to-I'd ratherremember the <ICLASS="filename">real</I> command instead of my special map thatworks only from my account.But not everyone agrees with me.And I've gotta admit that Tom has some pretty useful-looking customizationsin this file.Wherever you see <CODECLASS="literal">^V</CODE> in this printout, that means that you typeCTRL-v to<SPANCLASS="link"><EMCLASS="emphasis">protect the next key from interpretation by </EM>ex (<ACLASS="linkend"HREF="ch31_06.htm"TITLE="Protecting Keys from Interpretation by ex ">31.6</A>)</SPAN>.In that case, the <CODECLASS="literal">^V</CODE> is not stored in the macro.If you see <ICLASS="filename">two</I> of them (<CODECLASS="literal">^V^V</CODE>) that sequence will storean actual CTRL-v in the macro.The file on the CD-ROM is ready to use: it has the real controlcharacters stored in it.Try it!One more note:if your fancy hacks to the <ICLASS="filename">.exrc</I> file don't seem to be working,watch carefully for error messages just as <ICLASS="filename">vi</I> starts, before it clearsyour screen.If you can't read them quickly enough, try the tricks in article<ACLASS="xref"HREF="ch42_08.htm"TITLE="Errors Erased Too Soon? Try These Workarounds ">42.8</A>.-JP]</P><PCLASS="para"><TABLECLASS="screen.co"BORDER="1"><TR><THVALIGN="TOP"><PRECLASS="calloutlist">&#13;<ACLASS="co"HREF="ch33_04.htm"TITLE="33.4 Useful ex Commands ">:m</A> <ACLASS="co"HREF="ch30_04.htm"TITLE="30.4 Editing Multiple Files with vi ">^^</A> <ACLASS="co"HREF="ch26_04.htm"TITLE="26.4 Using Metacharacters in Regular Expressions ">\&lt;..\&gt;</A> <ACLASS="co"HREF="ch31_04.htm"TITLE="31.4 vi @-Functions ">&quot;nDdd`n@n</A> <ACLASS="co"HREF="ch30_34.htm"TITLE="30.34 vi Line Commands vs. Character Commands ">`n</A> <ACLASS="co"HREF="ch33_04.htm"TITLE="33.4 Useful ex Commands ">:r!</A> <ACLASS="co"HREF="ch25_02.htm"TITLE="25.2 Four Ways to Skin a cat ">cat</A> <ACLASS="co"HREF="ch45_20.htm"TITLE="45.20 Overview: Open Files and File Descriptors ">/dev/tty</A> <ACLASS="co"HREF="ch30_22.htm"TITLE="30.22 Filtering Text Through a UNIX Command ">:%!</A> <ACLASS="co"HREF="ch25_04.htm"TITLE='25.4 The "less&quot; Pager: More than "more&quot;'>less</A> <ACLASS="co"HREF="ch29_01.htm"TITLE="29.1 The UNIX spell Command ">spell</A> <ACLASS="co"HREF="ch30_37.htm"TITLE="30.37 Neatening Lines ">fmt</A> <ACLASS="co"HREF="ch41_04.htm"TITLE="41.4 How UNIX Handles TAB Characters ">expand</A> <ACLASS="co"HREF="ch34_24.htm"TITLE="34.24 Quick Reference: sed ">sed</A> <ACLASS="co"HREF="ch30_31.htm"TITLE="30.31 vi Word Abbreviation ">ab</A> &#13;</PRE></TH><TDVALIGN="TOP"><PRECLASS="screen">&#13;&quot;   INPUT MACROS that i always want active&quot;map! ^Z ^[:stop^M&quot;   so i can stop in input mode.  note that autowrite is set, so map! ^A ^[:stop!^M&quot;   will stop me without writing.&quot;map! ^K ^V^[O&quot;   lets me do kind of a negative carriage return in input mode.map! ^V^[^B ^[bi&quot;   non-destructive ^Wmap! ^V^[^F ^[Ea&quot;   and its inverse&quot;&quot;   EMACS Style ARROW MACROS&quot;map! ^B ^V^[imap! ^F ^V^[llimap! ^A ^V^[Imap! ^E ^V^[A&quot;&quot;&quot;   EXCHANGE MACROS - for exchanging things&quot;map v xp&quot;   exchange current char with next one in edit modemap V :m+1^M&quot;   exchange current line with next one in edit modemap! ^P ^V^[hxpa&quot;   exchange last typed char with penultimate one in insert modemap = ^^&quot;   edit previously edited file&quot;&quot;   OTHER MACROS&quot;map ^W :w^M&quot;   write out the file&quot;map * i^M^[&quot;   split line&quot;map ^A :stop!^M&quot;   unconditional stopmap Y y$&quot;   so Y is analogous to C and Dmap ^R ddu&quot;   single-line redrawmap ^N :n +/^M&quot;   go to next file in arg list, same position &quot;   useful for &quot;vi +/string file1 file2 file3&quot;&quot;&quot;&quot;   META MACROS, all begin with meta-key '\' ; more later in file&quot;map ^V^I  \&quot;   so can use both ^I <ICLASS="filename">[tab -</I><EMCLASS="emphasis">JP </EM><ICLASS="filename">]</I> and \ for meta-key&quot;map \/ dePo/\&lt;^V^[pA\&gt;^V^[&quot;wdd@w&quot;   find current word, uses w buffer&quot;&quot;&quot;   INVERT WORD CASE - V is like W, v is like w.  3V is ok, only to EOL.&quot;   uses both register n and mark n.map \v ywmno^[P:s/./\~/g^M0&quot;nDdd`n@n&quot;   abc -&gt; ABC    ABC-&gt;abcmap \V yWmno^[P:s/./\~/g^M0&quot;nDdd`n@n&quot;   abc.xyz -&gt; ABC.XYZ    ABC.XYZ-&gt;abc.xyz&quot;&quot;&quot;   EXECUTION MACROS - these two are for executing existing lines.&quot;map \@ ^V^[&quot;mdd@m&quot;   execute line as a straight vi command (buffer m, use @@ to repeat)map \! 0i:r!^V^[&quot;ndd@n&quot;   execute line as :r! command (buffer n, use @@ to repeat)&quot;map \t :r!cat /dev/tty^M&quot;   read in stuff from X put buffer [in X window system <EMCLASS="emphasis">-JP</EM> ]&quot;&quot;&quot;   BLOCK MACROS - these help when dealing with C blocks&quot;map! ^O ^V^V^V{^M^V^V^V} ^V^[O^T&quot;   this will begin a block, leaving in insert modemap! ^] ^V^[/^V^V^V}^V^Ma&quot;   and this will take you past its end, leaving in insert mode&quot;&quot;&quot;&quot;   LINT MACRO.  deletes all text from &quot;lint output:&quot; and below, (if any)&quot;   replacing it with lint output in pretty block comment form.  could&quot;   do sed work myself, but this is faster.  &quot;&quot;   the map! is for subsequent map, not by people, &quot;   though /^Lo would make sense.&quot;   this is one of those famous time/space tradeoffs &quot;map! ^Lo lint output&quot;&quot;   and now for the real workmap \l Go^M/* ^Lo^M^[/^Lo^MdG:w^Mo/*** ^Lo^[&lt;&lt;:r!lint -u -lc %^V|sed 's/^/ *  /'^MGo***/^[N&quot;   <ICLASS="filename">[NOTE: We split the macro above onto two lines for printing.</I>&quot;   <ICLASS="filename">Type it on one line in your .exrc file. </I><EMCLASS="emphasis">-JP</EM> <ICLASS="filename">]</I>&quot;&quot;   indent this for me&quot;map \i :%!indent -i4^M&quot;&quot;   COMMENTING MACROS - these are actually pretty amazing&quot;&quot;   from edit mode, this comments a line [<ICLASS="filename">for the C language </I><EMCLASS="emphasis">-JP</EM> ]map ^X ^i/* ^[A */^[^&quot;&quot;   and this undoes itmap ^Y :s/\/\* \([^*]*\) \*\//\1^[&quot;&quot;   this next one defeats vi's tail-recursion defeatism&quot;   called by 2 maps following this one map! ^N ^V^[:unmap! ^V^V^M^[&quot;&quot;   while in insert mode, this will put you &quot;inside&quot; a commentmap! ^X ^V^[:map! ^V^V^M ^V^V^[a^V^V^V^No^[a /*  */^[hhi&quot;&quot;   while in edit mode, this begins a block comment - ^N to escapemap \c O/*^M *  ^M*/^[k:map! ^V^V^M ^V^V^M*  ^MA&quot;&quot;   and this is for adding more lines to a block comment - ^N to escapemap \o :map! ^V^V^M ^V^V^M*  ^MA&quot;&quot;map _ i_^V^V^V^H^V^[ll&quot;   this character will now be underlined when less'd, rn'd, etc.&quot;&quot;   SPELL MACROS&quot;map \s :w^MGo^V^[:$r!spell %^M&quot;   spell the file, placing errors at bottom, use \n to findmap \n Gdd\/&quot;   for find next spelling error&quot;&quot;&quot;   FORMATTING MACROS&quot;map \P :.,$!fmt -75^M&quot;   format thru end of documentmap \p !}fmt -75^M&quot;   format paragraphmap \f 1G/--^Mj:.,$!fmt -75^M&quot;   format message (assumes MH Mail &quot;comp&quot; format)map \e :%!expand -4^M&quot;   expand tabs to 4 stops&quot;map \r 1G/^-/^[:r!sed -e '1,/^$/d' -e 's/^./&gt; &amp;/' @ ^[/^-/^[j&quot;   read in @, quoted (for MH replies, who link @ to current file)map \d :s/$/ $/^M$r 74^V|? ^V^Ms^M^[$xx0&quot;   split line, like !!fmt but cheaper&quot;&quot;<ACLASS="indexterm"NAME="AUTOID-35508"></A><ACLASS="indexterm"NAME="AUTOID-35511"></A><ACLASS="indexterm"NAME="AUTOID-35514"></A>ab Jan Januaryab jan january ab Feb Februaryab feb februaryab Sep Septemberab sep septemberab Oct Octoberab oct octoberab Nov Novemberab nov novemberab Dec Decemberab dec decemberab Xmas Christmasab xmas christmasab Mon Mondayab mon mondayab Tue Tuesdayab tue tuesdayab Wed Wednesdayab wed wednesdayab Thu Thursdayab thu thursdayab Fri Fridayab fri fridayab Sat Saturdayab Sun Sundayab Int Internationalab info information</PRE></TD></TR></TABLE></P><PCLASS="para">[Here's a macro by Greg Ubben that centers your current line:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">map ^K 80I ^V^[$78hd0^D:s/  / /g^V^M$p</PRE></BLOCKQUOTE></P><PCLASS="para">(<CODECLASS="literal">^K</CODE>, <CODECLASS="literal">^V</CODE>, <CODECLASS="literal">^[</CODE>, and <CODECLASS="literal">^M</CODE> are control characters,but <CODECLASS="literal">^D</CODE> is <CODECLASS="literal">^</CODE> and <CODECLASS="literal">D</CODE>.)This centers on an 80-column line.If any lines are close to 80 characters long now, the macrowill work better with your <EMCLASS="emphasis">wrapmargin</EM> set to 0. <EMCLASS="emphasis">-JP</EM>&nbsp;]<ACLASS="indexterm"NAME="AUTOID-35531"></A></P><DIVCLASS="sect1info"><PCLASS="SECT1INFO">- <SPANCLASS="authorinitials">TC</SPAN></P></DIV></DIV><DIVCLASS="htmlnav"><P></P><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch31_08.htm"TITLE="31.8 More Examples of Mapping Keys in vi "><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 31.8 More Examples of Mapping Keys in vi "BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="book"HREF="index.htm"TITLE="UNIX Power Tools"><IMGSRC="../gifs/txthome.gif"ALT="UNIX Power Tools"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch31_10.htm"TITLE="31.10 Repeating a vi Keymap "><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 31.10 Repeating a vi Keymap "BORDER="0"></A></TD></TR><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172">31.8 More Examples of Mapping Keys in vi </TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="index"HREF="index/idx_0.htm"TITLE="Book Index"><IMGSRC="../gifs/index.gif"ALT="Book Index"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172">31.10 Repeating a vi Keymap </TD></TR></TABLE><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><IMGSRC="../gifs/smnavbar.gif"USEMAP="#map"BORDER="0"ALT="The UNIX CD Bookshelf Navigation"><MAPNAME="map"><AREASHAPE="RECT"COORDS="0,0,73,21"HREF="../index.htm"ALT="The UNIX CD Bookshelf"><AREASHAPE="RECT"COORDS="74,0,163,21"HREF="index.htm"ALT="UNIX Power Tools"><AREASHAPE="RECT"COORDS="164,0,257,21"HREF="../unixnut/index.htm"ALT="UNIX in a Nutshell"><AREASHAPE="RECT"COORDS="258,0,321,21"HREF="../vi/index.htm"ALT="Learning the vi Editor"><AREASHAPE="RECT"COORDS="322,0,378,21"HREF="../sedawk/index.htm"ALT="sed &amp; awk"><AREASHAPE="RECT"COORDS="379,0,438,21"HREF="../ksh/index.htm"ALT="Learning the Korn Shell"><AREASHAPE="RECT"COORDS="439,0,514,21"HREF="../lrnunix/index.htm"ALT="Learning the UNIX Operating System"></MAP></DIV></BODY></HTML>