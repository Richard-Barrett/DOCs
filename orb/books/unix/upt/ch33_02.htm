<HTML><HEAD><TITLE>[Chapter 33] 33.2 Writing Editing Scripts </TITLE><METANAME="DC.title"CONTENT="UNIX Power Tools"><METANAME="DC.creator"CONTENT="Jerry Peek, Tim O'Reilly &amp; Mike Loukides"><METANAME="DC.publisher"CONTENT="O'Reilly &amp; Associates, Inc."><METANAME="DC.date"CONTENT="1998-08-04T21:46:46Z"><METANAME="DC.type"CONTENT="Text.Monograph"><METANAME="DC.format"CONTENT="text/html"SCHEME="MIME"><METANAME="DC.source"CONTENT="1-56592-260-3"SCHEME="ISBN"><METANAME="DC.language"CONTENT="en-US"><METANAME="generator"CONTENT="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><LINKREV="made"HREF="mailto:online-books@oreilly.com"TITLE="Online Books Comments"><LINKREL="up"HREF="ch33_01.htm"TITLE="33. Batch Editing"><LINKREL="prev"HREF="ch33_01.htm"TITLE="33.1 Why Line Editors Aren't Dinosaurs "><LINKREL="next"HREF="ch33_03.htm"TITLE="33.3 Line Addressing "></HEAD><BODYBGCOLOR="#FFFFFF"TEXT="#000000"><DIVCLASS="htmlnav"><H1><IMGSRC="gifs/smbanner.gif"ALT="UNIX Power Tools"USEMAP="#srchmap"BORDER="0"></H1><MAPNAME="srchmap"><AREASHAPE="RECT"COORDS="0,0,466,58"HREF="index.htm"ALT="UNIX Power Tools"><AREASHAPE="RECT"COORDS="467,0,514,18"HREF="../search/psrch.htm"ALT="Search this book"></MAP><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch33_01.htm"TITLE="33.1 Why Line Editors Aren't Dinosaurs "><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 33.1 Why Line Editors Aren't Dinosaurs "BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><B><FONTFACE="ARIEL,HELVETICA,HELV,SANSERIF"SIZE="-1">Chapter 33<BR>Batch Editing</FONT></B></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch33_03.htm"TITLE="33.3 Line Addressing "><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 33.3 Line Addressing "BORDER="0"></A></TD></TR></TABLE>&nbsp;<HRALIGN="LEFT"WIDTH="515"TITLE="footer"></DIV><DIVCLASS="SECT1"><H2CLASS="sect1"><ACLASS="title"NAME="UPT-ART-7975">33.2 Writing Editing Scripts </A></H2><PCLASS="para">When you write a script thatcontains a series of editing actions and then run the scripton an input file, you take whatwould be a <EMCLASS="emphasis">hands-on</EM> procedure in an editor such as <EMCLASS="emphasis">vi</EM>and transform it into a <EMCLASS="emphasis">look-no-hands</EM> procedure.</P><PCLASS="para">When performing edits manually, you get to trust the cause-and-effectrelationship of entering an editing command and seeing the immediateresult.There is usually an &quot;undo&quot; command that allows you to reversethe effect of a command and return the text file to its previous state.Once you learn an interactive text editor, you havethe feeling of making changes in a safe and controlled manner, onestep at a time.</P><PCLASS="para">Most people new to &quot;power editing&quot; will feel there is greaterrisk in writing a script to perform a series of edits thanin making those changes manually.The fear is that by automating the task,something will happen that cannot be reversed.The object of learning scripting with <EMCLASS="emphasis">ex</EM> or <EMCLASS="emphasis">sed</EM> is to understand the commands well enough tosee that your results are predictable.In other words, you come to understand thecause-and-effect relationship between your editingscript and the output that you get.</P><PCLASS="para">This requires using the editor in a controlled, methodical way.Gradually, you will developmethods for creating and testing editing scripts. You will cometo rely upon these methods and gain confidencethat you know what your script is doing and why.</P><PCLASS="para">Here are a few tips:</P><OLCLASS="orderedlist"><LICLASS="listitem"><PCLASS="para">Carefully examine your input file, using <EMCLASS="emphasis">grep</EM>,before designing your script.</P></LI><LICLASS="listitem"><PCLASS="para">Start with a small sample of occurrences in a test file.Run your script on the sample and make sure the script is working.Remember, it's just as important to make sure the script <EMCLASS="emphasis">doesn't</EM>work where you <EMCLASS="emphasis">don't</EM> want it to. Then increase the size of the sample.Try to increase the complexity of the input.</P></LI><LICLASS="listitem"><PCLASS="para">Work carefully, testing each command that you add to a script.Compare the output against the input file to see what haschanged. Prove to yourself that your script is complete.Your script may work perfectly, based on your assumptionsof what is in the input file, but your assumptionsmay be wrong.</P></LI><LICLASS="listitem"><PCLASS="para"><EMCLASS="emphasis">Be pragmatic!</EM>Try to accomplish what you can with your scriptbut understand that it doesn't have to do 100&nbsp;percent of the job.If you encounter difficult situations, check andsee how frequently they occur.Sometimes it's better to do a few remaining edits manually.</P></LI></OL><PCLASS="para">If you can add to these tips with your experience,tack them on.</P><PCLASS="para">[Okay, I will: use a<SPANCLASS="link">revision control system (<ACLASS="linkend"HREF="ch20_12.htm"TITLE="Protecting Files with SCCS or RCS ">20.12</A>)</SPAN>to keep previous versions.That makes it easy to undo your edits. -<EMCLASS="emphasis">JP</EM>&nbsp;]</P><DIVCLASS="sect1info"><PCLASS="SECT1INFO">- <SPANCLASS="authorinitials">DD</SPAN> <SPANCLASS="bibliomisc">from O'Reilly &amp; Associates' <CITECLASS="citetitle">sed &amp; awk</CITE></SPAN></P></DIV></DIV><DIVCLASS="htmlnav"><P></P><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch33_01.htm"TITLE="33.1 Why Line Editors Aren't Dinosaurs "><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 33.1 Why Line Editors Aren't Dinosaurs "BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="book"HREF="index.htm"TITLE="UNIX Power Tools"><IMGSRC="../gifs/txthome.gif"ALT="UNIX Power Tools"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch33_03.htm"TITLE="33.3 Line Addressing "><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 33.3 Line Addressing "BORDER="0"></A></TD></TR><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172">33.1 Why Line Editors Aren't Dinosaurs </TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="index"HREF="index/idx_0.htm"TITLE="Book Index"><IMGSRC="../gifs/index.gif"ALT="Book Index"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172">33.3 Line Addressing </TD></TR></TABLE><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><IMGSRC="../gifs/smnavbar.gif"USEMAP="#map"BORDER="0"ALT="The UNIX CD Bookshelf Navigation"><MAPNAME="map"><AREASHAPE="RECT"COORDS="0,0,73,21"HREF="../index.htm"ALT="The UNIX CD Bookshelf"><AREASHAPE="RECT"COORDS="74,0,163,21"HREF="index.htm"ALT="UNIX Power Tools"><AREASHAPE="RECT"COORDS="164,0,257,21"HREF="../unixnut/index.htm"ALT="UNIX in a Nutshell"><AREASHAPE="RECT"COORDS="258,0,321,21"HREF="../vi/index.htm"ALT="Learning the vi Editor"><AREASHAPE="RECT"COORDS="322,0,378,21"HREF="../sedawk/index.htm"ALT="sed &amp; awk"><AREASHAPE="RECT"COORDS="379,0,438,21"HREF="../ksh/index.htm"ALT="Learning the Korn Shell"><AREASHAPE="RECT"COORDS="439,0,514,21"HREF="../lrnunix/index.htm"ALT="Learning the UNIX Operating System"></MAP></DIV></BODY></HTML>