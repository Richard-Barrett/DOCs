<HTML><HEAD><TITLE>[Chapter 33] 33.10 Quick Globals from the Command Line with qsubst </TITLE><METANAME="DC.title"CONTENT="UNIX Power Tools"><METANAME="DC.creator"CONTENT="Jerry Peek, Tim O'Reilly &amp; Mike Loukides"><METANAME="DC.publisher"CONTENT="O'Reilly &amp; Associates, Inc."><METANAME="DC.date"CONTENT="1998-08-04T21:46:57Z"><METANAME="DC.type"CONTENT="Text.Monograph"><METANAME="DC.format"CONTENT="text/html"SCHEME="MIME"><METANAME="DC.source"CONTENT="1-56592-260-3"SCHEME="ISBN"><METANAME="DC.language"CONTENT="en-US"><METANAME="generator"CONTENT="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><LINKREV="made"HREF="mailto:online-books@oreilly.com"TITLE="Online Books Comments"><LINKREL="up"HREF="ch33_01.htm"TITLE="33. Batch Editing"><LINKREL="prev"HREF="ch33_09.htm"TITLE="33.9 patch: Generalized Updating of Files that Differ "><LINKREL="next"HREF="ch33_11.htm"TITLE="33.11 Quick Reference: awk "></HEAD><BODYBGCOLOR="#FFFFFF"TEXT="#000000"><DIVCLASS="htmlnav"><H1><IMGSRC="gifs/smbanner.gif"ALT="UNIX Power Tools"USEMAP="#srchmap"BORDER="0"></H1><MAPNAME="srchmap"><AREASHAPE="RECT"COORDS="0,0,466,58"HREF="index.htm"ALT="UNIX Power Tools"><AREASHAPE="RECT"COORDS="467,0,514,18"HREF="../search/psrch.htm"ALT="Search this book"></MAP><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch33_09.htm"TITLE="33.9 patch: Generalized Updating of Files that Differ "><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 33.9 patch: Generalized Updating of Files that Differ "BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><B><FONTFACE="ARIEL,HELVETICA,HELV,SANSERIF"SIZE="-1">Chapter 33<BR>Batch Editing</FONT></B></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch33_11.htm"TITLE="33.11 Quick Reference: awk "><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 33.11 Quick Reference: awk "BORDER="0"></A></TD></TR></TABLE>&nbsp;<HRALIGN="LEFT"WIDTH="515"TITLE="footer"></DIV><DIVCLASS="SECT1"><H2CLASS="sect1"><ACLASS="title"NAME="UPT-ART-9012">33.10 Quick Globals from the Command Line with qsubst </A></H2><PCLASS="para">Users at our office frequently have to make global changes across multiple files.<ACLASS="indexterm"NAME="AUTOID-37031"></A><ACLASS="indexterm"NAME="AUTOID-37033"></A><ACLASS="indexterm"NAME="AUTOID-37036"></A>For that purposewe encourage them to use <SPANCLASS="link"><EMCLASS="emphasis">sed</EM> (<ACLASS="linkend"HREF="ch34_24.htm"TITLE="Quick Reference: sed ">34.24</A>)</SPAN>;but <EMCLASS="emphasis">sed</EM> syntaxis tricky for new users (or even some experienced users!).</P><TABLECLASS="para.programreference"BORDER="1"><TR><THVALIGN="TOP"><ACLASS="programreference"HREF="examples/index.htm"TITLE="qsubst">qsubst</A><BR></TH><TDVALIGN="TOP">As an alternative, try the <EMCLASS="emphasis">qsubst</EM> program, available onour CD-ROM.<EMCLASS="emphasis">qsubst</EM>is a simple query-replace program that anyone can use.Forexample, to change the string &quot;Unix&quot; into &quot;UNIX&quot; in the files<EMCLASS="emphasis">ch01</EM> and <EMCLASS="emphasis">ch02</EM>, you can do:</TD></TR></TABLE><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">% <CODECLASS="userinput"><B>qsubst Unix UNIX ch01 ch02</B></CODE></PRE></BLOCKQUOTE></P><PCLASS="para">You'll be prompted with each line to be changed, in context.That is, the line containing the string will be surrounded by both the previous and the next lines in the file.The string to be changed is underlined:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">Unlike emacs, vi is available on every \o'U_'\o'n_'\o'i_'\o'x_' system.So you canthink of vi as the</PRE></BLOCKQUOTE></P><PCLASS="para">To approve the change, press the space bar.You'll then beprompted with the next occurrence in the file.To refuse thechange, press <CODECLASS="literal">n</CODE> to go on to the next occurrence of the string.You can also use the exclamation point (!) to approve this change andall future changes in this file, and CTRL-g to reject this changeand all future changes.  </P><PCLASS="para">You can also have <EMCLASS="emphasis">qsubst</EM> replace all occurrences withoutprompting, using the <EMCLASS="emphasis">-noask</EM> command-line option:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">% <CODECLASS="userinput"><B>qsubst Unix UNIX -noask ch01 ch02</B></CODE>(file: ch01)(file: ch02)</PRE></BLOCKQUOTE></P><PCLASS="para">Both files are edited without prompting.</P><PCLASS="para"><EMCLASS="emphasis">qsubst</EM> is clearly not as powerful as <EMCLASS="emphasis">sed</EM>.It doesn'tunderstand regular expressions: you can only use <EMCLASS="emphasis">qsubst</EM> to replacesimple strings.But <EMCLASS="emphasis">qsubst</EM> is clearly a useful tool for users who justwant to make a simple global change without learning <EMCLASS="emphasis">sed</EM>.</P><PCLASS="para">One word of warning about <EMCLASS="emphasis">qsubst</EM>: if you interrupt <EMCLASS="emphasis">qsubst</EM>midstream (e.g., using CTRL-c), your <EMCLASS="emphasis">stty</EM> settings are likelyto be garbled.If this happens, try the tips in article<ACLASS="xref"HREF="ch42_04.htm"TITLE="Checklist for Resetting a Messed Up Terminal ">42.4</A>to get your<EMCLASS="emphasis">stty</EM> settings correct again.</P><DIVCLASS="sect1info"><PCLASS="SECT1INFO">- <SPANCLASS="authorinitials">LM</SPAN></P></DIV></DIV><DIVCLASS="htmlnav"><P></P><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch33_09.htm"TITLE="33.9 patch: Generalized Updating of Files that Differ "><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 33.9 patch: Generalized Updating of Files that Differ "BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="book"HREF="index.htm"TITLE="UNIX Power Tools"><IMGSRC="../gifs/txthome.gif"ALT="UNIX Power Tools"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch33_11.htm"TITLE="33.11 Quick Reference: awk "><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 33.11 Quick Reference: awk "BORDER="0"></A></TD></TR><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172">33.9 patch: Generalized Updating of Files that Differ </TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="index"HREF="index/idx_0.htm"TITLE="Book Index"><IMGSRC="../gifs/index.gif"ALT="Book Index"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172">33.11 Quick Reference: awk </TD></TR></TABLE><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><IMGSRC="../gifs/smnavbar.gif"USEMAP="#map"BORDER="0"ALT="The UNIX CD Bookshelf Navigation"><MAPNAME="map"><AREASHAPE="RECT"COORDS="0,0,73,21"HREF="../index.htm"ALT="The UNIX CD Bookshelf"><AREASHAPE="RECT"COORDS="74,0,163,21"HREF="index.htm"ALT="UNIX Power Tools"><AREASHAPE="RECT"COORDS="164,0,257,21"HREF="../unixnut/index.htm"ALT="UNIX in a Nutshell"><AREASHAPE="RECT"COORDS="258,0,321,21"HREF="../vi/index.htm"ALT="Learning the vi Editor"><AREASHAPE="RECT"COORDS="322,0,378,21"HREF="../sedawk/index.htm"ALT="sed &amp; awk"><AREASHAPE="RECT"COORDS="379,0,438,21"HREF="../ksh/index.htm"ALT="Learning the Korn Shell"><AREASHAPE="RECT"COORDS="439,0,514,21"HREF="../lrnunix/index.htm"ALT="Learning the UNIX Operating System"></MAP></DIV></BODY></HTML>