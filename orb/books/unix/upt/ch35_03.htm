<HTML><HEAD><TITLE>[Chapter 35] 35.3 Alternatives to fmt </TITLE><METANAME="DC.title"CONTENT="UNIX Power Tools"><METANAME="DC.creator"CONTENT="Jerry Peek, Tim O'Reilly &amp; Mike Loukides"><METANAME="DC.publisher"CONTENT="O'Reilly &amp; Associates, Inc."><METANAME="DC.date"CONTENT="1998-08-04T21:47:58Z"><METANAME="DC.type"CONTENT="Text.Monograph"><METANAME="DC.format"CONTENT="text/html"SCHEME="MIME"><METANAME="DC.source"CONTENT="1-56592-260-3"SCHEME="ISBN"><METANAME="DC.language"CONTENT="en-US"><METANAME="generator"CONTENT="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><LINKREV="made"HREF="mailto:online-books@oreilly.com"TITLE="Online Books Comments"><LINKREL="up"HREF="ch35_01.htm"TITLE="35. You Can't Quite Call This Editing"><LINKREL="prev"HREF="ch35_02.htm"TITLE="35.2 Neatening Text with fmt "><LINKREL="next"HREF="ch35_04.htm"TITLE="35.4 recomment: Clean Up Program Comment Blocks "></HEAD><BODYBGCOLOR="#FFFFFF"TEXT="#000000"><DIVCLASS="htmlnav"><H1><IMGSRC="gifs/smbanner.gif"ALT="UNIX Power Tools"USEMAP="#srchmap"BORDER="0"></H1><MAPNAME="srchmap"><AREASHAPE="RECT"COORDS="0,0,466,58"HREF="index.htm"ALT="UNIX Power Tools"><AREASHAPE="RECT"COORDS="467,0,514,18"HREF="../search/psrch.htm"ALT="Search this book"></MAP><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch35_02.htm"TITLE="35.2 Neatening Text with fmt "><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 35.2 Neatening Text with fmt "BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><B><FONTFACE="ARIEL,HELVETICA,HELV,SANSERIF"SIZE="-1">Chapter 35<BR>You Can't Quite Call This Editing</FONT></B></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch35_04.htm"TITLE="35.4 recomment: Clean Up Program Comment Blocks "><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 35.4 recomment: Clean Up Program Comment Blocks "BORDER="0"></A></TD></TR></TABLE>&nbsp;<HRALIGN="LEFT"WIDTH="515"TITLE="footer"></DIV><DIVCLASS="SECT1"><H2CLASS="sect1"><ACLASS="title"NAME="UPT-ART-7801">35.3 Alternatives to fmt </A></H2><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-40164"></A><ACLASS="indexterm"NAME="AUTOID-40166"></A><ACLASS="indexterm"NAME="AUTOID-40169"></A><SPANCLASS="link"><EMCLASS="emphasis">fmt</EM> (<ACLASS="linkend"HREF="ch35_02.htm"TITLE="Neatening Text with fmt ">35.2</A>)</SPAN>is hard to do without once you've learned about it.Unfortunately, it's not available in some versions of UNIX.You can get the GNU version from the CD-ROM.But it's also relatively easy to emulate with<SPANCLASS="link"><EMCLASS="emphasis">sed</EM> (<ACLASS="linkend"HREF="ch34_24.htm"TITLE="Quick Reference: sed ">34.24</A>)</SPAN>and<SPANCLASS="link"><EMCLASS="emphasis">nroff</EM> (<ACLASS="linkend"HREF="ch43_13.htm"TITLE="The Text Formatters nroff, troff, ditroff, ... ">43.13</A>)</SPAN>.Using those two utilities also lets you take advantage of themore-sophisticated formatting and flexibility that <EMCLASS="emphasis">sed</EM>and <EMCLASS="emphasis">nroff</EM><SPANCLASS="link">macros (<ACLASS="linkend"HREF="ch43_15.htm"TITLE="From a Source File to the Printer ">43.15</A>)</SPAN>can give you.(If you're doing anything really fancy, like<SPANCLASS="link">tables with <EMCLASS="emphasis">tbl</EM> (<ACLASS="linkend"HREF="ch43_15.htm"TITLE="From a Source File to the Printer ">43.15</A>)</SPAN>,[1]you might need<SPANCLASS="link"><EMCLASS="emphasis">col</EM> or <EMCLASS="emphasis">colcrt</EM> (<ACLASS="linkend"HREF="ch43_18.htm"TITLE="How nroff Makes Bold and Underline; How to Remove It">43.18</A>)</SPAN>to clean up <EMCLASS="emphasis">nroff</EM>'s output.)</P><BLOCKQUOTECLASS="footnote"><PCLASS="para">[1] [The combination of <EMCLASS="emphasis">tbl</EM>, <EMCLASS="emphasis">nroff</EM>, and <EMCLASS="emphasis">col</EM> can makeASCII tables in a few quick steps.The tables aren't sexy, but they can be sophisticated.They can be emailed or printed anywhere and don't requiresophisticated viewing equipment.I'm sad that so few people know <EMCLASS="emphasis">tbl</EM> these days.It's a powerful way to describe tables without worrying aboutbalancing columns or wrapping text in them.And, if you want nicer-looking output, you can feed the same<EMCLASS="emphasis">tbl</EM> file to<SPANCLASS="link"><EMCLASS="emphasis">groff</EM> (<ACLASS="linkend"HREF="ch43_16.htm"TITLE="groff ">43.16</A>)</SPAN>. &nbsp;- <EMCLASS="emphasis">JP</EM>&nbsp;]</P></BLOCKQUOTE><PCLASS="para">Here's the script:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">&#13;#!/bin/shsed '1i\.ll 72\.na\.hy 0\.pl 1' $* | nroff</PRE></BLOCKQUOTE></P><PCLASS="para">The reason this is so complicated is that,by default, <EMCLASS="emphasis">nroff</EM> makes some assumptions you need to change.For example, it assumes an 11-inch page (66 lines), and will addblank lines to a short file (or the end of a long file).The quick-and-dirty workaround to this is to manually put the <EMCLASS="emphasis">nroff</EM>request <EMCLASS="emphasis">.pl&nbsp;1</EM> (page length 1 line) at the top of the text you want toreformat. <EMCLASS="emphasis">nroff</EM> also tends to justify lines; you want to turnthis off with the <CODECLASS="literal">.na</CODE> request. You also want to turn offhyphenation (<CODECLASS="literal">.hy 0</CODE>), and you may want to set the line lengthto 72 instead of <EMCLASS="emphasis">nroff</EM>'s default 65, if only for consistency with thereal <EMCLASS="emphasis">fmt</EM> program. All these <EMCLASS="emphasis">nroff</EM> requestsget inserted before the first line of input by the <EMCLASS="emphasis">sed</EM><CODECLASS="literal">1i</CODE> command.</P><PCLASS="para">A fancier script would take a <EMCLASS="emphasis">-nn</EM> line-length option and turn itinto a <EMCLASS="emphasis">.ll</EM> request for <EMCLASS="emphasis">nroff</EM>, etc.</P><DIVCLASS="sect1info"><PCLASS="SECT1INFO">- <SPANCLASS="authorinitials">TOR</SPAN></P></DIV></DIV><DIVCLASS="htmlnav"><P></P><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch35_02.htm"TITLE="35.2 Neatening Text with fmt "><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 35.2 Neatening Text with fmt "BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="book"HREF="index.htm"TITLE="UNIX Power Tools"><IMGSRC="../gifs/txthome.gif"ALT="UNIX Power Tools"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch35_04.htm"TITLE="35.4 recomment: Clean Up Program Comment Blocks "><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 35.4 recomment: Clean Up Program Comment Blocks "BORDER="0"></A></TD></TR><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172">35.2 Neatening Text with fmt </TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="index"HREF="index/idx_0.htm"TITLE="Book Index"><IMGSRC="../gifs/index.gif"ALT="Book Index"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172">35.4 recomment: Clean Up Program Comment Blocks </TD></TR></TABLE><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><IMGSRC="../gifs/smnavbar.gif"USEMAP="#map"BORDER="0"ALT="The UNIX CD Bookshelf Navigation"><MAPNAME="map"><AREASHAPE="RECT"COORDS="0,0,73,21"HREF="../index.htm"ALT="The UNIX CD Bookshelf"><AREASHAPE="RECT"COORDS="74,0,163,21"HREF="index.htm"ALT="UNIX Power Tools"><AREASHAPE="RECT"COORDS="164,0,257,21"HREF="../unixnut/index.htm"ALT="UNIX in a Nutshell"><AREASHAPE="RECT"COORDS="258,0,321,21"HREF="../vi/index.htm"ALT="Learning the vi Editor"><AREASHAPE="RECT"COORDS="322,0,378,21"HREF="../sedawk/index.htm"ALT="sed &amp; awk"><AREASHAPE="RECT"COORDS="379,0,438,21"HREF="../ksh/index.htm"ALT="Learning the Korn Shell"><AREASHAPE="RECT"COORDS="439,0,514,21"HREF="../lrnunix/index.htm"ALT="Learning the UNIX Operating System"></MAP></DIV></BODY></HTML>