<HTML><HEAD><TITLE>[Chapter 35] 35.9 Splitting Files at Fixed Points: split </TITLE><METANAME="DC.title"CONTENT="UNIX Power Tools"><METANAME="DC.creator"CONTENT="Jerry Peek, Tim O'Reilly &amp; Mike Loukides"><METANAME="DC.publisher"CONTENT="O'Reilly &amp; Associates, Inc."><METANAME="DC.date"CONTENT="1998-08-04T21:48:06Z"><METANAME="DC.type"CONTENT="Text.Monograph"><METANAME="DC.format"CONTENT="text/html"SCHEME="MIME"><METANAME="DC.source"CONTENT="1-56592-260-3"SCHEME="ISBN"><METANAME="DC.language"CONTENT="en-US"><METANAME="generator"CONTENT="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><LINKREV="made"HREF="mailto:online-books@oreilly.com"TITLE="Online Books Comments"><LINKREL="up"HREF="ch35_01.htm"TITLE="35. You Can't Quite Call This Editing"><LINKREL="prev"HREF="ch35_08.htm"TITLE="35.8 Centering Lines in a File "><LINKREL="next"HREF="ch35_10.htm"TITLE="35.10 Splitting Files by Context: csplit "></HEAD><BODYBGCOLOR="#FFFFFF"TEXT="#000000"><DIVCLASS="htmlnav"><H1><IMGSRC="gifs/smbanner.gif"ALT="UNIX Power Tools"USEMAP="#srchmap"BORDER="0"></H1><MAPNAME="srchmap"><AREASHAPE="RECT"COORDS="0,0,466,58"HREF="index.htm"ALT="UNIX Power Tools"><AREASHAPE="RECT"COORDS="467,0,514,18"HREF="../search/psrch.htm"ALT="Search this book"></MAP><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch35_08.htm"TITLE="35.8 Centering Lines in a File "><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 35.8 Centering Lines in a File "BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><B><FONTFACE="ARIEL,HELVETICA,HELV,SANSERIF"SIZE="-1">Chapter 35<BR>You Can't Quite Call This Editing</FONT></B></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch35_10.htm"TITLE="35.10 Splitting Files by Context: csplit "><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 35.10 Splitting Files by Context: csplit "BORDER="0"></A></TD></TR></TABLE>&nbsp;<HRALIGN="LEFT"WIDTH="515"TITLE="footer"></DIV><DIVCLASS="SECT1"><H2CLASS="sect1"><ACLASS="title"NAME="UPT-ART-2880">35.9 Splitting Files at Fixed Points: split </A></H2><PCLASS="para"><ACLASS="indexterm"NAME="UPT-ART-2880-IX-SPLIT-PROGRAM"></A>Most versions of UNIX come with a program called <EMCLASS="emphasis">split</EM> whosepurpose is to split large files into smaller files for tasks such asediting them in an editor that cannot handle large files, or mailingthem if they are so big that some mailers will refuse to deal withthem. For example, let's say you have a really big text file that youwant to mail to someone:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">% <CODECLASS="userinput"><B>ls -l bigfile</B></CODE>-r--r--r--  1 jik        139070 Oct 15 21:02 bigfile</PRE></BLOCKQUOTE></P><PCLASS="para">Running <EMCLASS="emphasis">split</EM> on that file will (by default, with most versions of<EMCLASS="emphasis">split</EM>) break it up into pieces that are each no more than 1000 lines long:<ACLASS="indexterm"NAME="UPT-ART-2880-IX-TEXT-PROCESSING-SPLITTING-FILES"></A></P><PCLASS="para"><TABLECLASS="screen.co"BORDER="1"><TR><THVALIGN="TOP"><PRECLASS="calloutlist">&#13;<ACLASS="co"HREF="ch29_06.htm"TITLE="29.6 Counting Lines, Words, and Characters: wc ">wc</A> &#13;</PRE></TH><TDVALIGN="TOP"><PRECLASS="screen">% <CODECLASS="userinput"><B>ls -l</B></CODE>total 283-r--r--r--  1 jik        139070 Oct 15 21:02 bigfile-rw-rw-r--  1 jik         46444 Oct 15 21:04 xaa-rw-rw-r--  1 jik         51619 Oct 15 21:04 xab-rw-rw-r--  1 jik         41007 Oct 15 21:04 xac% <CODECLASS="userinput"><B>wc -l x*</B></CODE>    1000 xaa    1000 xab     932 xac    2932 total</PRE></TD></TR></TABLE></P><PCLASS="para">Note the default naming scheme, which is to append &quot;aa,&quot; &quot;ab,&quot; &quot;ac,&quot;etc., to the letter &quot;x&quot; for each subsequent filename. It is possibleto modify the default behavior. For example, you can make it createfiles that are 1500 lines long instead of 1000:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">% <CODECLASS="userinput"><B>rm x??</B></CODE>% <CODECLASS="userinput"><B>split -1500 bigfile</B></CODE>% <CODECLASS="userinput"><B>ls -l</B></CODE>total 288-r--r--r--  1 jik        139070 Oct 15 21:02 bigfile-rw-rw-r--  1 jik         74016 Oct 15 21:06 xaa-rw-rw-r--  1 jik         65054 Oct 15 21:06 xab</PRE></BLOCKQUOTE></P><PCLASS="para">You can also get it to use a name prefix other than &quot;x&quot;:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">% <CODECLASS="userinput"><B>rm x??</B></CODE>% <CODECLASS="userinput"><B>split -1500 bigfile bigfile.split.</B></CODE>% <CODECLASS="userinput"><B>ls -l</B></CODE>total 288-r--r--r--  1 jik        139070 Oct 15 21:02 bigfile-rw-rw-r--  1 jik         74016 Oct 15 21:07 bigfile.split.aa-rw-rw-r--  1 jik         65054 Oct 15 21:07 bigfile.split.ab</PRE></BLOCKQUOTE></P><PCLASS="para">Although the simple behavior described above tends to be relativelyuniversal, there are differences in the functionality of <EMCLASS="emphasis">split</EM> ondifferent UNIX systems. There are four basic variants of <EMCLASS="emphasis">split</EM>as shipped with various implementations of UNIX:</P><OLCLASS="orderedlist"><LICLASS="listitem"><PCLASS="para">A <EMCLASS="emphasis">split</EM> that understands only how to deal with splitting textfiles into chunks of <EMCLASS="emphasis">n</EM> lines or less each.</P></LI><LICLASS="listitem"><TABLECLASS="para.programreference"BORDER="1"><TR><THVALIGN="TOP"><ACLASS="programreference"HREF="examples/index.htm"TITLE="bsplit">bsplit</A><BR></TH><TDVALIGN="TOP">A <EMCLASS="emphasis">split</EM>, usually called <EMCLASS="emphasis">bsplit</EM>, that understands only how todeal with splitting non-text files into <EMCLASS="emphasis">n</EM>-character chunks.A public domain version of <EMCLASS="emphasis">bsplit</EM> is available on the PowerTools disc.</TD></TR></TABLE></LI><LICLASS="listitem"><PCLASS="para">A <EMCLASS="emphasis">split</EM> that will split text files into <EMCLASS="emphasis">n</EM>-line chunks, ornon-text files into <EMCLASS="emphasis">n</EM>-character chunks, and tries to figure outautomatically whether it's working on a text file or a non-text file.<ACLASS="indexterm"NAME="AUTOID-40496"></A></P></LI><LICLASS="listitem"><PCLASS="para">A <EMCLASS="emphasis">split</EM> that will do either text files or non-text files, butneeds to be told explicitly when it is working on a non-text file.</P></LI></OL><PCLASS="para">The only way to tell which version you've got is to read themanual page for it on your system, which will also tell you the exactsyntax for using it.</P><PCLASS="para">The problem with the third variant is that although it tries to besmart andautomatically do the right thing with both text and non-text files, itsometimes guesses wrong and splits a text file as a non-text file orvice versa, with completely unsatisfactory results. Therefore, if thevariant on your system is (3), you probably want to get your hands onone of the many <EMCLASS="emphasis">split</EM> clones out there that is closer to one ofthe other variants (see below).</P><PCLASS="para">Variants (1) and (2) listed above are OK as far as they go, but theyaren't adequate if your  environment provides only one of them ratherthan both.If you find yourself needing to split a non-text file when you haveonly a text <EMCLASS="emphasis">split</EM>, or needing to split a text file when you haveonly <EMCLASS="emphasis">bsplit</EM>, you need to get one of theclones that will perform the function you need.</P><PCLASS="para">Variant (4) is the most reliable and versatile of the four listed,and is therefore what you should go with if you find it necessary toget a clone and install it on your system. There are several suchclones in the various source archives, including the freely availableBSD UNIX version.Alternatively, if you have installed<SPANCLASS="link"><EMCLASS="emphasis">perl</EM> (<ACLASS="linkend"HREF="ch37_01.htm#UPT-ART-5560"TITLE="What We Do and Don't Tell You About Perl ">37.1</A>)</SPAN>,it is quite easy to write a simple <EMCLASS="emphasis">split</EM> clone in<EMCLASS="emphasis">perl</EM>, and you don't have to worry about compiling a C program to doit; this is an especially significant advantage if you need to runyour <EMCLASS="emphasis">split</EM> on multiple architectures that would need separatebinaries.</P><PCLASS="para">If you need to split a non-text file and don't feel like going to allof the trouble of finding a <EMCLASS="emphasis">split</EM> clone that handles them, onestandard UNIX tool you can use to do the splitting is<SPANCLASS="link"><EMCLASS="emphasis">dd</EM> (<ACLASS="linkend"HREF="ch35_06.htm"TITLE="Low-Level File Butchery with dd ">35.6</A>)</SPAN>.For example, if <EMCLASS="emphasis">bigfile</EM> above were a non-text file and you wanted to split it into 20,000-byte pieces, you could do something likethis:</P><PCLASS="para"><TABLECLASS="screen.co"BORDER="1"><TR><THVALIGN="TOP"><PRECLASS="calloutlist">&#13;<ACLASS="co"HREF="ch44_16.htm"TITLE="44.16 Handling Command-Line Arguments with a for Loop ">for</A> <ACLASS="co"HREF="ch09_13.htm"TITLE="9.13 Multiline Commands, Secondary Prompts ">&gt;</A> <ACLASS="co"HREF="ch45_23.htm"TITLE="45.23 The Ins and Outs of Redirected I/O Loops ">done &lt;</A> &#13;</PRE></TH><TDVALIGN="TOP"><PRECLASS="screen">$ <CODECLASS="userinput"><B>ls -l bigfile</B></CODE>-r--r--r--  1 jik        139070 Oct 23 08:58 bigfile$ for<CODECLASS="userinput"><B> i in 1 2 3 4 5 6 7</B></CODE>   <EMCLASS="emphasis"># </EM>[2]&gt; <CODECLASS="userinput"><B>do</B></CODE>&gt;       <CODECLASS="userinput"><B>dd of=x$i bs=20000 count=1 2&gt;/dev/null</B></CODE>  <EMCLASS="emphasis"># </EM>[3]&gt; <CODECLASS="userinput"><B>done &lt; bigfile</B></CODE>$ <CODECLASS="userinput"><B>ls -l</B></CODE>total 279-r--r--r--  1 jik        139070 Oct 23 08:58 bigfile-rw-rw-r--  1 jik         20000 Oct 23 09:00 x1-rw-rw-r--  1 jik         20000 Oct 23 09:00 x2-rw-rw-r--  1 jik         20000 Oct 23 09:00 x3-rw-rw-r--  1 jik         20000 Oct 23 09:00 x4-rw-rw-r--  1 jik         20000 Oct 23 09:00 x5-rw-rw-r--  1 jik         20000 Oct 23 09:00 x6-rw-rw-r--  1 jik         19070 Oct 23 09:00 x7</PRE></TD></TR></TABLE></P><ACLASS="indexterm"NAME="AUTOID-40542"></A><DIVCLASS="sect1info"><PCLASS="SECT1INFO">- <SPANCLASS="authorinitials">JIK</SPAN></P></DIV></DIV><DIVCLASS="htmlnav"><P></P><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch35_08.htm"TITLE="35.8 Centering Lines in a File "><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 35.8 Centering Lines in a File "BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="book"HREF="index.htm"TITLE="UNIX Power Tools"><IMGSRC="../gifs/txthome.gif"ALT="UNIX Power Tools"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch35_10.htm"TITLE="35.10 Splitting Files by Context: csplit "><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 35.10 Splitting Files by Context: csplit "BORDER="0"></A></TD></TR><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172">35.8 Centering Lines in a File </TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="index"HREF="index/idx_0.htm"TITLE="Book Index"><IMGSRC="../gifs/index.gif"ALT="Book Index"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172">35.10 Splitting Files by Context: csplit </TD></TR></TABLE><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><IMGSRC="../gifs/smnavbar.gif"USEMAP="#map"BORDER="0"ALT="The UNIX CD Bookshelf Navigation"><MAPNAME="map"><AREASHAPE="RECT"COORDS="0,0,73,21"HREF="../index.htm"ALT="The UNIX CD Bookshelf"><AREASHAPE="RECT"COORDS="74,0,163,21"HREF="index.htm"ALT="UNIX Power Tools"><AREASHAPE="RECT"COORDS="164,0,257,21"HREF="../unixnut/index.htm"ALT="UNIX in a Nutshell"><AREASHAPE="RECT"COORDS="258,0,321,21"HREF="../vi/index.htm"ALT="Learning the vi Editor"><AREASHAPE="RECT"COORDS="322,0,378,21"HREF="../sedawk/index.htm"ALT="sed &amp; awk"><AREASHAPE="RECT"COORDS="379,0,438,21"HREF="../ksh/index.htm"ALT="Learning the Korn Shell"><AREASHAPE="RECT"COORDS="439,0,514,21"HREF="../lrnunix/index.htm"ALT="Learning the UNIX Operating System"></MAP></DIV></BODY></HTML>