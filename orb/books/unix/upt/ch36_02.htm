<HTML><HEAD><TITLE>[Chapter 36] 36.2 Sort Fields: How sort Sorts </TITLE><METANAME="DC.title"CONTENT="UNIX Power Tools"><METANAME="DC.creator"CONTENT="Jerry Peek, Tim O'Reilly &amp; Mike Loukides"><METANAME="DC.publisher"CONTENT="O'Reilly &amp; Associates, Inc."><METANAME="DC.date"CONTENT="1998-08-04T21:48:38Z"><METANAME="DC.type"CONTENT="Text.Monograph"><METANAME="DC.format"CONTENT="text/html"SCHEME="MIME"><METANAME="DC.source"CONTENT="1-56592-260-3"SCHEME="ISBN"><METANAME="DC.language"CONTENT="en-US"><METANAME="generator"CONTENT="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><LINKREV="made"HREF="mailto:online-books@oreilly.com"TITLE="Online Books Comments"><LINKREL="up"HREF="ch36_01.htm"TITLE="36. Sorting"><LINKREL="prev"HREF="ch36_01.htm"TITLE="36.1 Putting Things in Order "><LINKREL="next"HREF="ch36_03.htm"TITLE="36.3 Changing the Field Delimiter "></HEAD><BODYBGCOLOR="#FFFFFF"TEXT="#000000"><DIVCLASS="htmlnav"><H1><IMGSRC="gifs/smbanner.gif"ALT="UNIX Power Tools"USEMAP="#srchmap"BORDER="0"></H1><MAPNAME="srchmap"><AREASHAPE="RECT"COORDS="0,0,466,58"HREF="index.htm"ALT="UNIX Power Tools"><AREASHAPE="RECT"COORDS="467,0,514,18"HREF="../search/psrch.htm"ALT="Search this book"></MAP><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch36_01.htm"TITLE="36.1 Putting Things in Order "><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 36.1 Putting Things in Order "BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><B><FONTFACE="ARIEL,HELVETICA,HELV,SANSERIF"SIZE="-1">Chapter 36<BR>Sorting</FONT></B></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch36_03.htm"TITLE="36.3 Changing the Field Delimiter "><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 36.3 Changing the Field Delimiter "BORDER="0"></A></TD></TR></TABLE>&nbsp;<HRALIGN="LEFT"WIDTH="515"TITLE="footer"></DIV><DIVCLASS="SECT1"><H2CLASS="sect1"><ACLASS="title"NAME="UPT-ART-2925">36.2 Sort Fields: How sort Sorts </A></H2><PCLASS="para"><ACLASS="indexterm"NAME="UPT-ART-2925-IX-SORT-COMMAND-DESCRIBED"></A><ACLASS="indexterm"NAME="UPT-ART-2925-IX-SORT-COMMAND-FIELDS"></A>Unless you tell it otherwise, <EMCLASS="emphasis">sort</EM> divides each line into fieldsat white space (blanks or tabs),and sorts the lines, by field, from left to right. </P><PCLASS="para">That is, it sorts onthe basis of field 0 (leftmost); but when the leftmost fields arethe same, it sorts on the basis of field 1; and so on.This is hard to put into words, but it's really just common sense.Suppose your office inventory manager created a file like this:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">supplies     pencils  148furniture    chairs   40kitchen      knives   22kitchen      forks    20supplies     pens     236furniture    couches  10furniture    tables   7supplies     paper    29</PRE></BLOCKQUOTE></P><PCLASS="para">You'd want all the supplies sorted into categories and within eachcategory, you'd want them sorted alphabetically:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">% <CODECLASS="userinput"><B>sort supplies</B></CODE>furniture    chairs   40furniture    couches  10furniture    tables   7kitchen      forks    20kitchen      knives   22supplies     paper    29supplies     pencils  148supplies     pens     236</PRE></BLOCKQUOTE></P><PCLASS="para">Of course, you don't always want to sort from left to right. Thecommand line option <EMCLASS="emphasis">+n</EM> tells <EMCLASS="emphasis">sort</EM> to start sorting onfield <EMCLASS="emphasis">n</EM>; <EMCLASS="emphasis">-n</EM> tells <EMCLASS="emphasis">sort</EM> to stop sorting on field<EMCLASS="emphasis">n</EM>. Remember (again) that <EMCLASS="emphasis">sort</EM> counts fields from left toright, starting with 0.[1]Here's an example. We want to sort a list of telephone numbers of authors, presidents, and blues singers:</P><BLOCKQUOTECLASS="footnote"><PCLASS="para">[1] I harp on this because I always get confused and have to look it up inthe manual page.</P></BLOCKQUOTE><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">Robert M Johnson      344-0909Lyndon B Johnson      933-1423Samuel H Johnson      754-2542Michael K Loukides    112-2535Jerry O Peek          267-2345Timothy F O'Reilly    443-2434</PRE></BLOCKQUOTE></P><PCLASS="para">According to standard &quot;telephone book rules,&quot; we want these namessorted by last name, first name, and middle initial. We don'twant the phone number to play a part in the sorting.So we want to start sorting on field 2, stop sorting on field 3,continue sorting on field 0, sort on field 1, and (just to make sure)stop sorting on field 2 (the last name). We can code this as follows:&#13;</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">% <CODECLASS="userinput"><B>sort +2 -3 +0 -2 phonelist</B></CODE>Lyndon B Johnson      933-1423Robert M Johnson      344-0909Samuel H Johnson      754-2542Michael K Loukides    112-2535Timothy F O'Reilly    443-2434Jerry O Peek          267-2345</PRE></BLOCKQUOTE></P><PCLASS="para">A few notes:</P><ULCLASS="itemizedlist"><LICLASS="listitem"><PCLASS="para">We need the <EMCLASS="emphasis">-3</EM> option to prevent <EMCLASS="emphasis">sort</EM> from sorting on thetelephone number after sorting on the last name. Without <EMCLASS="emphasis">-3</EM>,the &quot;Robert Johnson&quot; entry would appear before &quot;Lyndon Johnson&quot;because it has a lower phone number.</P></LI><LICLASS="listitem"><PCLASS="para">We don't need to state <EMCLASS="emphasis">+1</EM> explicitly. Unless you give anexplicit &quot;stop&quot; field, <EMCLASS="emphasis">+1</EM> is implied after <EMCLASS="emphasis">+0</EM>.</P></LI><LICLASS="listitem"><PCLASS="para">If two names are completely identical, we probably don't care whathappens next. However, just to be sure that something unexpecteddoesn't take place, we end the option list with <EMCLASS="emphasis">-2</EM>, which says,&quot;After sorting on the middle initial, don't do any further sorting.&quot;</P></LI></UL><PCLASS="para">There are a couple of variations that are worth mentioning. You maynever need them unless you're really serious about sorting data files,but it's good to keep them in the back of your mind. First, you canadd any &quot;collation&quot; operations (discard blanks, numeric sort, etc.) tothe end of a field specifier to describe how you want that fieldsorted. Using our previous example, let's say that if two names<EMCLASS="emphasis">are</EM> identical, you want them sorted in numeric phone numberorder. The following command does the trick:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">% <CODECLASS="literal">sort +2 -3 +0 -2 +3n phonelist</CODE></PRE></BLOCKQUOTE></P><PCLASS="para">The <EMCLASS="emphasis">+3n</EM> option says &quot;do a numeric sort on the fourth field.&quot;If you're worried about initial blanks (perhaps some of the phonenumbers have area codes), use <EMCLASS="emphasis">+3nb</EM>.</P><PCLASS="para">Second, you can specify individual columns within any field forsorting, using the notation <EMCLASS="emphasis">+n.c</EM>, where <EMCLASS="emphasis">n</EM> is a fieldnumber, and <EMCLASS="emphasis">c</EM> is a character position within the field.Likewise, the notation <EMCLASS="emphasis">-n.c</EM> says &quot;stop sorting at the characterbefore character <EMCLASS="emphasis">c</EM>.&quot;If you're counting characters, be sure touse the <EMCLASS="emphasis">-b</EM> (ignore white space) option&nbsp;- otherwise, it will bevery difficult to figure out what character you're counting.<ACLASS="indexterm"NAME="AUTOID-41541"></A></P><DIVCLASS="sect1info"><PCLASS="SECT1INFO">- <SPANCLASS="authorinitials">ML</SPAN></P></DIV></DIV><DIVCLASS="htmlnav"><P></P><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch36_01.htm"TITLE="36.1 Putting Things in Order "><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 36.1 Putting Things in Order "BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="book"HREF="index.htm"TITLE="UNIX Power Tools"><IMGSRC="../gifs/txthome.gif"ALT="UNIX Power Tools"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch36_03.htm"TITLE="36.3 Changing the Field Delimiter "><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 36.3 Changing the Field Delimiter "BORDER="0"></A></TD></TR><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172">36.1 Putting Things in Order </TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="index"HREF="index/idx_0.htm"TITLE="Book Index"><IMGSRC="../gifs/index.gif"ALT="Book Index"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172">36.3 Changing the Field Delimiter </TD></TR></TABLE><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><IMGSRC="../gifs/smnavbar.gif"USEMAP="#map"BORDER="0"ALT="The UNIX CD Bookshelf Navigation"><MAPNAME="map"><AREASHAPE="RECT"COORDS="0,0,73,21"HREF="../index.htm"ALT="The UNIX CD Bookshelf"><AREASHAPE="RECT"COORDS="74,0,163,21"HREF="index.htm"ALT="UNIX Power Tools"><AREASHAPE="RECT"COORDS="164,0,257,21"HREF="../unixnut/index.htm"ALT="UNIX in a Nutshell"><AREASHAPE="RECT"COORDS="258,0,321,21"HREF="../vi/index.htm"ALT="Learning the vi Editor"><AREASHAPE="RECT"COORDS="322,0,378,21"HREF="../sedawk/index.htm"ALT="sed &amp; awk"><AREASHAPE="RECT"COORDS="379,0,438,21"HREF="../ksh/index.htm"ALT="Learning the Korn Shell"><AREASHAPE="RECT"COORDS="439,0,514,21"HREF="../lrnunix/index.htm"ALT="Learning the UNIX Operating System"></MAP></DIV></BODY></HTML>