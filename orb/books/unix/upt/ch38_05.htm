<HTML><HEAD><TITLE>[Chapter 38] 38.5 The ps Command </TITLE><METANAME="DC.title"CONTENT="UNIX Power Tools"><METANAME="DC.creator"CONTENT="Jerry Peek, Tim O'Reilly &amp; Mike Loukides"><METANAME="DC.publisher"CONTENT="O'Reilly &amp; Associates, Inc."><METANAME="DC.date"CONTENT="1998-08-04T21:49:38Z"><METANAME="DC.type"CONTENT="Text.Monograph"><METANAME="DC.format"CONTENT="text/html"SCHEME="MIME"><METANAME="DC.source"CONTENT="1-56592-260-3"SCHEME="ISBN"><METANAME="DC.language"CONTENT="en-US"><METANAME="generator"CONTENT="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><LINKREV="made"HREF="mailto:online-books@oreilly.com"TITLE="Online Books Comments"><LINKREL="up"HREF="ch38_01.htm"TITLE="38. Starting, Stopping, and Killing Processes"><LINKREL="prev"HREF="ch38_04.htm"TITLE="38.4 Subshells "><LINKREL="next"HREF="ch38_06.htm"TITLE="38.6 The Controlling Terminal "></HEAD><BODYBGCOLOR="#FFFFFF"TEXT="#000000"><DIVCLASS="htmlnav"><H1><IMGSRC="gifs/smbanner.gif"ALT="UNIX Power Tools"USEMAP="#srchmap"BORDER="0"></H1><MAPNAME="srchmap"><AREASHAPE="RECT"COORDS="0,0,466,58"HREF="index.htm"ALT="UNIX Power Tools"><AREASHAPE="RECT"COORDS="467,0,514,18"HREF="../search/psrch.htm"ALT="Search this book"></MAP><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch38_04.htm"TITLE="38.4 Subshells "><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 38.4 Subshells "BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><B><FONTFACE="ARIEL,HELVETICA,HELV,SANSERIF"SIZE="-1">Chapter 38<BR>Starting, Stopping, and Killing Processes</FONT></B></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch38_06.htm"TITLE="38.6 The Controlling Terminal "><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 38.6 The Controlling Terminal "BORDER="0"></A></TD></TR></TABLE>&nbsp;<HRALIGN="LEFT"WIDTH="515"TITLE="footer"></DIV><DIVCLASS="SECT1"><H2CLASS="sect1"><ACLASS="title"NAME="UPT-ART-1940">38.5 The ps Command </A></H2><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-42531"></A><ACLASS="indexterm"NAME="AUTOID-42533"></A><ACLASS="indexterm"NAME="AUTOID-42535"></A>The <EMCLASS="emphasis">ps</EM> command produces a report summarizing execution statistics for currentprocesses. The bare <EMCLASS="emphasis">ps</EM> commandlists the process ID, the terminal the command was started from, howmuch CPU time it has used, and the command itself. The output lookssomething like this (it differs from system to system):</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">PID TT STAT  TIME COMMAND 1803 p5 IW    0:00 -csh (csh) 1883 p5 IW    0:04 vi outline 1811 p6 IW    0:01 -csh (csh) 5353 p6 TW    0:01 vi 4890</PRE></BLOCKQUOTE></P><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-42542"></A><ACLASS="indexterm"NAME="AUTOID-42544"></A>By default, <EMCLASS="emphasis">ps</EM> lists only your own processes.There are many times, though, when it's desirable to have a morecomplete listing with alot of data about all of the processes currently running on the system.The options required to do this differ between BSD UNIX and System V. Under BSD UNIX,the command is <EMCLASS="emphasis">ps -aux</EM>, which produces a table of all processes,arranged in order of decreasing CPU usage at the moment when the <EMCLASS="emphasis">ps</EM>command was executed. [The <EMCLASS="emphasis">-a</EM> option gives processes belongingto all users, <EMCLASS="emphasis">-u</EM> gives a more detailed listing, and <EMCLASS="emphasis">-x</EM>includes processes that no longer have a<SPANCLASS="link">controlling terminal (<ACLASS="linkend"HREF="ch38_06.htm"TITLE="The Controlling Terminal ">38.6</A>)</SPAN>.<EMCLASS="emphasis">-TOR</EM>&nbsp;]It is often useful to pipe this output to<SPANCLASS="link"><EMCLASS="emphasis">head</EM> (<ACLASS="linkend"HREF="ch25_20.htm"TITLE="Printing the Top of a File ">25.20</A>)</SPAN>,which will display the most active processes:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">% <CODECLASS="userinput"><B>ps -aux | head -5</B></CODE>USER       PID %CPU %MEM   SZ  RSS TTY STAT  TIME COMMANDmartin   12923 74.2 22.5  223  376 p5  R     2:12 f77 -o foo foo.Fchavez   16725 10.9 50.8 1146 1826 p6  R N  56:04 g94 HgO.datng       17026  3.5  1.2  354  240 co  I     0:19 vi benzene.txtgull      7997  0.2  0.3  142   46 p3  S     0:04 csh</PRE></BLOCKQUOTE></P><PCLASS="para">The meanings of the fields in this output (as well as others displayed by the <EMCLASS="emphasis">-l</EM> option to <EMCLASS="emphasis">ps</EM>) are given in<ACLASS="xref"HREF="ch38_05.htm#UPT-ART-1940-TAB-0"TITLE="ps Command Output Fields">Table 38.1</A>.</P><PCLASS="para">The first line of this output shows that user <EMCLASS="emphasis">martin</EM> is running aFORTRAN compilation (<CODECLASS="literal">f77</CODE>).This process has<SPANCLASS="link">PID (<ACLASS="linkend"HREF="ch38_03.htm"TITLE="Managing Processes: Overall Concepts ">38.3</A>)</SPAN>12923 and is currently either running orrunable. User <EMCLASS="emphasis">chavez</EM>'s process (PID 16725), executing the program<EMCLASS="emphasis">g94</EM>, is also running or runable, though at a lowered priority.From this display, it's obvious who is using most system resources at thisinstant: <EMCLASS="emphasis">martin</EM> and <EMCLASS="emphasis">chavez</EM> have about 85% of the CPU and 73% ofthe memory between them. However, although it does display total CPU time,<EMCLASS="emphasis">ps</EM> does not average the <CODECLASS="literal">%CPU</CODE> or <CODECLASS="literal">%MEM</CODE> values over timein any way.<ACLASS="indexterm"NAME="AUTOID-42574"></A></P><TABLECLASS="table"><CAPTIONCLASS="table"><ACLASS="title"NAME="UPT-ART-1940-TAB-0">Table 38.1: ps Command Output Fields</A></CAPTION><THEADCLASS="thead"><TRCLASS="row"VALIGN="TOP"><THCLASS="entry"ALIGN="LEFT"ROWSPAN="1"COLSPAN="1">Column[3]</TH><THCLASS="entry"ALIGN="LEFT"ROWSPAN="1"COLSPAN="1">Contents</TH></TR></THEAD><TBODYCLASS="tbody"><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">USER (BSD)</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Username of process owner.</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">UID (System V)</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Username of process owner.</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">PID</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Process ID.</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">%CPU</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Estimated fraction of CPU consumed (BSD).</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">%MEM</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Estimated fraction of system memory consumed (BSD).</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">SZ</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Virtual memory used in K (BSD) or pages (System V).</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">RSS</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Real memory used (in same units as SZ).</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">TT, TTY</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Terminal port associated with process.</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">STAT (BSD),</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Current process state; one (or more under BSD) of:</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">    S (System V)</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"></TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">R:  Running or runnable.</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">S:  Sleeping.</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">I:  Idle (BSD). Intermediate state (System V).</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">T:  <SPANCLASS="link">Stopped (<ACLASS="linkend"HREF="ch12_08.htm"TITLE="Job Control in a Nutshell ">12.8</A>)</SPAN>.</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Z:  <SPANCLASS="link">Zombie process (<ACLASS="linkend"HREF="ch38_16.htm"TITLE="Why You Can't Kill a Zombie ">38.16</A>)</SPAN>.</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">D (BSD):  Disk wait.</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">P (BSD):  Page wait.</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">X (System V):  Growing: waiting for memory.</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">K (AIX):  Available kernel process.</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">W (BSD):  Swapped out.</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">N (BSD):  <SPANCLASS="link">Niced (<ACLASS="linkend"HREF="ch39_09.htm"TITLE='Know When to Be "nice&quot; to OTher Users...and WhenNot to'>39.9</A>, <ACLASS="linkend"HREF="ch39_11.htm"TITLE="Changing a Job's Priority Under BSD UNIX ">39.11</A>)</SPAN>:execution priority lowered.</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">&gt; (BSD):  Execution priority<SPANCLASS="link">artificially raised (<ACLASS="linkend"HREF="ch39_11.htm"TITLE="Changing a Job's Priority Under BSD UNIX ">39.11</A>)</SPAN>.</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">TIME</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Total CPU time used.</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">COMMAND</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Command line being executed (may be truncated).</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">STIME (System V)</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Time or date process started.</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">C (System V),</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Short term CPU-use factor; used by scheduler for</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">   CP (BSD)</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">computing execution priority (PRI below).</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">F</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Flags associated with process (see <EMCLASS="emphasis">ps</EM> manual page).</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">PPID</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Parent's PID.</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">PRI</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Actual execution priority (recomputed dynamically).</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">NI</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Process <SPANCLASS="link">nice number (<ACLASS="linkend"HREF="ch39_09.htm"TITLE='Know When to Be "nice&quot; to OTher Users...and WhenNot to'>39.9</A>)</SPAN>.</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">WCHAN</TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Event process is waiting for.</TD></TR></TBODY></TABLE><BLOCKQUOTECLASS="footnote"><PCLASS="para">[3] Some vendors add other fields, such as the processor number formultiprocessors and additional or different process states (as in theAIX K field). These codes may differ from vendor to vendor: forexample, the 0 code under Stardent UNIX means a process that isactually running (and R means runable) while 0 under AIX means anonexistent process.</P></BLOCKQUOTE><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-42690"></A>A vaguely similar listing is produced by the System V <EMCLASS="emphasis">ps -ef</EM> command:<BLOCKQUOTECLASS="screen"><PRECLASS="screen">$ <CODECLASS="userinput"><B>ps -ef</B></CODE>   UID   PID  PPID   C    STIME     TTY  TIME CMD  root     0     0   0 09:36:35       ?  0:00 sched  root     1     0   0 09:36:35       ?  0:02 /etc/init   ...  gull  7997     1  10 09:49:32   ttyp3  0:04 cshmartin 12923 11324   9 10:19:49   ttyp5 56:12 f77 -o foo foo.F     chavez 16725 16652  15 17:02:43   ttyp6 10:04 g94 HgO.dat    ng 17026 17012  14 17:23:12 console  0:19 vi benzene.txt</PRE></BLOCKQUOTE></P><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-42697"></A>The columns hold the username, process ID, parent's PID (thePID of the process that created it), the current schedulervalue, the time the process started, its associated terminal, itsaccumulated CPU time, and the command it is running. Note thatthe ordering is by PID, not resource usage.</P><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-42700"></A>AIX's version of the <EMCLASS="emphasis">ps</EM> command supports both BSDand System V options. The BSD options are not preceded by ahyphen (which is a legal syntax variation), and the System V optionsare. Thus, under AIX, <CODECLASS="literal">ps&nbsp;-au</CODE> is not the same as<CODECLASS="literal">ps&nbsp;au</CODE>.  The command is the System V version, however, even ifits output is displayed with the BSD column headings. Thus,<EMCLASS="emphasis">ps aux</EM> output is displayed in <CODECLASS="literal">PID</CODE> rather than<CODECLASS="literal">%CPU</CODE> order.</P><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-42710"></A><ACLASS="indexterm"NAME="AUTOID-42713"></A><EMCLASS="emphasis">ps</EM> is also useful in pipes; a common use is:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">% <CODECLASS="userinput"><B>ps -aux | grep chavez</B></CODE></PRE></BLOCKQUOTE></P><PCLASS="para">to see what user <EMCLASS="emphasis">chavez</EM> has currently running.  [Under System V,use <CODECLASS="literal">ps&nbsp;-u&nbsp;chavez</CODE>. <EMCLASS="emphasis">-JP</EM>]</P><DIVCLASS="sect1info"><PCLASS="SECT1INFO">- <SPANCLASS="authorinitials">AF</SPAN> <SPANCLASS="bibliomisc">from O'Reilly &amp; Associates' <CITECLASS="citetitle">Essential System Administration</CITE>, Chapter 7</SPAN></P></DIV></DIV><DIVCLASS="htmlnav"><P></P><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch38_04.htm"TITLE="38.4 Subshells "><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 38.4 Subshells "BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="book"HREF="index.htm"TITLE="UNIX Power Tools"><IMGSRC="../gifs/txthome.gif"ALT="UNIX Power Tools"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch38_06.htm"TITLE="38.6 The Controlling Terminal "><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 38.6 The Controlling Terminal "BORDER="0"></A></TD></TR><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172">38.4 Subshells </TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="index"HREF="index/idx_0.htm"TITLE="Book Index"><IMGSRC="../gifs/index.gif"ALT="Book Index"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172">38.6 The Controlling Terminal </TD></TR></TABLE><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><IMGSRC="../gifs/smnavbar.gif"USEMAP="#map"BORDER="0"ALT="The UNIX CD Bookshelf Navigation"><MAPNAME="map"><AREASHAPE="RECT"COORDS="0,0,73,21"HREF="../index.htm"ALT="The UNIX CD Bookshelf"><AREASHAPE="RECT"COORDS="74,0,163,21"HREF="index.htm"ALT="UNIX Power Tools"><AREASHAPE="RECT"COORDS="164,0,257,21"HREF="../unixnut/index.htm"ALT="UNIX in a Nutshell"><AREASHAPE="RECT"COORDS="258,0,321,21"HREF="../vi/index.htm"ALT="Learning the vi Editor"><AREASHAPE="RECT"COORDS="322,0,378,21"HREF="../sedawk/index.htm"ALT="sed &amp; awk"><AREASHAPE="RECT"COORDS="379,0,438,21"HREF="../ksh/index.htm"ALT="Learning the Korn Shell"><AREASHAPE="RECT"COORDS="439,0,514,21"HREF="../lrnunix/index.htm"ALT="Learning the UNIX Operating System"></MAP></DIV></BODY></HTML>