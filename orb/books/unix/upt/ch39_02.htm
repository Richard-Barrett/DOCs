<HTML><HEAD><TITLE>[Chapter 39] 39.2 Timing Programs </TITLE><METANAME="DC.title"CONTENT="UNIX Power Tools"><METANAME="DC.creator"CONTENT="Jerry Peek, Tim O'Reilly &amp; Mike Loukides"><METANAME="DC.publisher"CONTENT="O'Reilly &amp; Associates, Inc."><METANAME="DC.date"CONTENT="1998-08-04T21:50:10Z"><METANAME="DC.type"CONTENT="Text.Monograph"><METANAME="DC.format"CONTENT="text/html"SCHEME="MIME"><METANAME="DC.source"CONTENT="1-56592-260-3"SCHEME="ISBN"><METANAME="DC.language"CONTENT="en-US"><METANAME="generator"CONTENT="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><LINKREV="made"HREF="mailto:online-books@oreilly.com"TITLE="Online Books Comments"><LINKREL="up"HREF="ch39_01.htm"TITLE="39. Time and Performance"><LINKREL="prev"HREF="ch39_01.htm"TITLE="39.1 Which Time Is It? "><LINKREL="next"HREF="ch39_03.htm"TITLE="39.3 The csh time variable "></HEAD><BODYBGCOLOR="#FFFFFF"TEXT="#000000"><DIVCLASS="htmlnav"><H1><IMGSRC="gifs/smbanner.gif"ALT="UNIX Power Tools"USEMAP="#srchmap"BORDER="0"></H1><MAPNAME="srchmap"><AREASHAPE="RECT"COORDS="0,0,466,58"HREF="index.htm"ALT="UNIX Power Tools"><AREASHAPE="RECT"COORDS="467,0,514,18"HREF="../search/psrch.htm"ALT="Search this book"></MAP><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch39_01.htm"TITLE="39.1 Which Time Is It? "><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 39.1 Which Time Is It? "BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><B><FONTFACE="ARIEL,HELVETICA,HELV,SANSERIF"SIZE="-1">Chapter 39<BR>Time and Performance</FONT></B></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch39_03.htm"TITLE="39.3 The csh time variable "><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 39.3 The csh time variable "BORDER="0"></A></TD></TR></TABLE>&nbsp;<HRALIGN="LEFT"WIDTH="515"TITLE="footer"></DIV><DIVCLASS="SECT1"><H2CLASS="sect1"><ACLASS="title"NAME="UPT-ART-0073">39.2 Timing Programs </A></H2><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-43506"></A><ACLASS="indexterm"NAME="AUTOID-43508"></A><ACLASS="indexterm"NAME="AUTOID-43510"></A><ACLASS="indexterm"NAME="AUTOID-43512"></A>Two commands, <EMCLASS="emphasis">time</EM> and <EMCLASS="emphasis">/bin/time</EM>, provide simple timings.Their information is highly accurate, because no profiling overheaddistorts the program's performance. Neither programprovides any analysis on the routine or trace level. They report thetotal execution time, some other global statistics, and nothing more.You can use them on any program.</P><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-43518"></A><EMCLASS="emphasis">time</EM> and <EMCLASS="emphasis">/bin/time</EM> differ primarily in that <EMCLASS="emphasis">time</EM> isbuilt into the C shell. Therefore, it cannot be used in Bourne shell scriptsor in makefiles. It also cannot be used if you prefer the Bourneshell (<EMCLASS="emphasis">sh</EM>).<EMCLASS="emphasis">/bin/time</EM> is an independent executable fileand therefore can be used in any situation. To get a simple program timing, enter either <EMCLASS="emphasis">time</EM> or <EMCLASS="emphasis">/bin/time</EM>, followed by the command you would normally useto execute the program. For example, to time a program named <EMCLASS="emphasis">analyze</EM>, enter the following command:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">% <CODECLASS="userinput"><B>time analyze inputdata outputfile</B></CODE>9.0u 6.7s 0:30 18% 23+24k 285+148io 625pf+0w</PRE></BLOCKQUOTE></P><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-43533"></A><ACLASS="indexterm"NAME="AUTOID-43535"></A><ACLASS="indexterm"NAME="AUTOID-43538"></A><ACLASS="indexterm"NAME="AUTOID-43540"></A>This indicates that the program spent 9.0 seconds on behalf of theuser (user time), 6.7 seconds on behalf of the system (systemtime, or time spent executing UNIX kernel routines on the user'sbehalf), and a total of 30 seconds elapsed time. Elapsed time is thewall clock time from the moment you enter the command until it terminates, including time spent waiting for other users, I/O time, etc. </P><PCLASS="para">By definition, the elapsed time is greater than your total CPU time and can even be several times larger. You can set programs to be timed automatically (without typing <EMCLASS="emphasis">time</EM>first) or change the output format by setting the <EMCLASS="emphasis">csh</EM> <SPANCLASS="link"><EMCLASS="emphasis">time</EM> variable (<ACLASS="linkend"HREF="ch39_03.htm"TITLE="The csh time variable ">39.3</A>)</SPAN>.</P><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-43548"></A>The example above shows the CPU time as a percentage of the elapsed time(18&nbsp;percent). The remaining data report virtual memory management and I/O statistics. The meaning varies, depending on your shell; check youronline <EMCLASS="emphasis">csh</EM> manual page or article<ACLASS="xref"HREF="ch39_03.htm"TITLE="The csh time variable ">39.3</A>.</P><PCLASS="para">In this example, under SunOS 4.1.1, the other fields show the amount ofshared memory used, the amount of nonshared memory used (<CODECLASS="literal">k</CODE>), the number of block input and output operations (<CODECLASS="literal">io</CODE>), and the number of page faults plus the number of swaps (<CODECLASS="literal">pf</CODE> and <CODECLASS="literal">w</CODE>).The memory management figures are unreliable in many implementations, so take them with a grain of salt.</P><PCLASS="para"><EMCLASS="emphasis">/bin/time</EM> reports only the real time (elapsed time), usertime, and system time. For example:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">% <CODECLASS="userinput"><B>/bin/time analyze inputdata outputfile</B></CODE>       60.8 real        11.4 user         4.6 sys</PRE></BLOCKQUOTE></P><PCLASS="para">[If you use the Bourne shell, you can just type <CODECLASS="literal">time</CODE>. <EMCLASS="emphasis">-JP</EM>&nbsp;]This reports that the program ran for 60.8 seconds before terminating,using 11.4 seconds of user time and 4.6 seconds of system time, for a total of 16 seconds of CPU time.</P><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-43566"></A>There's a third timer on many systems: <EMCLASS="emphasis">timex</EM>.It can give much more detail if your system has process accountingenabled.Check the <EMCLASS="emphasis">timex</EM>(1) manpage.</P><PCLASS="para">Article<ACLASS="xref"HREF="ch39_05.htm"TITLE="Why Is the System So Slow? ">39.5</A>has more about the terms used in this article.</P><DIVCLASS="sect1info"><PCLASS="SECT1INFO">- <SPANCLASS="authorinitials">ML</SPAN> <SPANCLASS="bibliomisc">from O'Reilly &amp; Associates' <CITECLASS="citetitle">UNIX for FORTRAN Programmers</CITE>, Chapter 8</SPAN></P></DIV></DIV><DIVCLASS="htmlnav"><P></P><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch39_01.htm"TITLE="39.1 Which Time Is It? "><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 39.1 Which Time Is It? "BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="book"HREF="index.htm"TITLE="UNIX Power Tools"><IMGSRC="../gifs/txthome.gif"ALT="UNIX Power Tools"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch39_03.htm"TITLE="39.3 The csh time variable "><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 39.3 The csh time variable "BORDER="0"></A></TD></TR><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172">39.1 Which Time Is It? </TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="index"HREF="index/idx_0.htm"TITLE="Book Index"><IMGSRC="../gifs/index.gif"ALT="Book Index"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172">39.3 The csh time variable </TD></TR></TABLE><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><IMGSRC="../gifs/smnavbar.gif"USEMAP="#map"BORDER="0"ALT="The UNIX CD Bookshelf Navigation"><MAPNAME="map"><AREASHAPE="RECT"COORDS="0,0,73,21"HREF="../index.htm"ALT="The UNIX CD Bookshelf"><AREASHAPE="RECT"COORDS="74,0,163,21"HREF="index.htm"ALT="UNIX Power Tools"><AREASHAPE="RECT"COORDS="164,0,257,21"HREF="../unixnut/index.htm"ALT="UNIX in a Nutshell"><AREASHAPE="RECT"COORDS="258,0,321,21"HREF="../vi/index.htm"ALT="Learning the vi Editor"><AREASHAPE="RECT"COORDS="322,0,378,21"HREF="../sedawk/index.htm"ALT="sed &amp; awk"><AREASHAPE="RECT"COORDS="379,0,438,21"HREF="../ksh/index.htm"ALT="Learning the Korn Shell"><AREASHAPE="RECT"COORDS="439,0,514,21"HREF="../lrnunix/index.htm"ALT="Learning the UNIX Operating System"></MAP></DIV></BODY></HTML>