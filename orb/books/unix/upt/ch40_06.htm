<HTML><HEAD><TITLE>[Chapter 40] 40.6 System V.4 Batch Queues </TITLE><METANAME="DC.title"CONTENT="UNIX Power Tools"><METANAME="DC.creator"CONTENT="Jerry Peek, Tim O'Reilly &amp; Mike Loukides"><METANAME="DC.publisher"CONTENT="O'Reilly &amp; Associates, Inc."><METANAME="DC.date"CONTENT="1998-08-04T21:50:36Z"><METANAME="DC.type"CONTENT="Text.Monograph"><METANAME="DC.format"CONTENT="text/html"SCHEME="MIME"><METANAME="DC.source"CONTENT="1-56592-260-3"SCHEME="ISBN"><METANAME="DC.language"CONTENT="en-US"><METANAME="generator"CONTENT="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><LINKREV="made"HREF="mailto:online-books@oreilly.com"TITLE="Online Books Comments"><LINKREL="up"HREF="ch40_01.htm"TITLE="40. Delayed Execution"><LINKREL="prev"HREF="ch40_05.htm"TITLE="40.5 Avoiding Other at and cron Jobs "><LINKREL="next"HREF="ch40_07.htm"TITLE="40.7 Making Your at Jobs Quiet "></HEAD><BODYBGCOLOR="#FFFFFF"TEXT="#000000"><DIVCLASS="htmlnav"><H1><IMGSRC="gifs/smbanner.gif"ALT="UNIX Power Tools"USEMAP="#srchmap"BORDER="0"></H1><MAPNAME="srchmap"><AREASHAPE="RECT"COORDS="0,0,466,58"HREF="index.htm"ALT="UNIX Power Tools"><AREASHAPE="RECT"COORDS="467,0,514,18"HREF="../search/psrch.htm"ALT="Search this book"></MAP><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch40_05.htm"TITLE="40.5 Avoiding Other at and cron Jobs "><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 40.5 Avoiding Other at and cron Jobs "BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><B><FONTFACE="ARIEL,HELVETICA,HELV,SANSERIF"SIZE="-1">Chapter 40<BR>Delayed Execution</FONT></B></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch40_07.htm"TITLE="40.7 Making Your at Jobs Quiet "><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 40.7 Making Your at Jobs Quiet "BORDER="0"></A></TD></TR></TABLE>&nbsp;<HRALIGN="LEFT"WIDTH="515"TITLE="footer"></DIV><DIVCLASS="SECT1"><H2CLASS="sect1"><ACLASS="title"NAME="UPT-ART-2312">40.6 System V.4 Batch Queues </A></H2><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-44696"></A>At many UNIX sites, batch submission systems are considered a thing ofthe past. This is unfortunate. Batch execution is an effective way toget a lot of work done, particularly in a production-oriented environment.A batch queue is one of the best ways to ensure that a computer remainsactive during off hours. The <EMCLASS="emphasis">at</EM> command leads to &quot;bursty&quot;execution: you will see a lot of activity at midnight, 1 a.m., 2 a.m., andother popular submission times, trailing off as the jobs complete. A batch queue will keep the system running on an even keel as long as there is work left to do.</P><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-44700"></A><ACLASS="indexterm"NAME="AUTOID-44702"></A>System V.4 and SunOS have added a very simple batch queue facility. Thisfacility is really just a variation of the <EMCLASS="emphasis">at</EM> command,except that you can't specify when you want to run thejob. The system has a single batch queue that executes jobsin theorder in which they are entered into the queue. Submit a job tothe queue with the command:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">% <CODECLASS="userinput"><B>batch</B></CODE><CODECLASS="replaceable"><I>Command 1Command 2</I></CODE><KBDCLASS="keycap">[CTRL-d]</KBD></PRE></BLOCKQUOTE></P><PCLASS="para">If you have written your job as a shell script, you can submit it as:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">% <CODECLASS="userinput"><B>batch </B></CODE><CODECLASS="replaceable"><I>script-name</I></CODE></PRE></BLOCKQUOTE></P><PCLASS="para">But check your online <EMCLASS="emphasis">batch</EM> manual page to be surethat your system will run it with the right shell.To delete jobs from the queue, use <EMCLASS="emphasis">atq</EM> and <EMCLASS="emphasis">atrm</EM> (SunOS) or<EMCLASS="emphasis">at -l</EM> and <EMCLASS="emphasis">at -r</EM> (V.4).</P><PCLASS="para">The queue facility is so simple that it's pathetic: it doesn't supportmultiple queues, queue priorities, and other features that you reallyneed if you want batch submission. But it will do one importantthing. If users use batch queues for theirbig jobs, they will guarantee that, at most, one large program (whetherit is the compiler, an engineering application, or whatever) is running ata time. That may be all you need to restore order to a troubled system.</P><DIVCLASS="sect1info"><PCLASS="SECT1INFO">- <SPANCLASS="authorinitials">ML</SPAN> <SPANCLASS="bibliomisc">from O'Reilly &amp; Associates' <CITECLASS="citetitle">System Performance Tuning</CITE>, Chapter 3</SPAN></P></DIV></DIV><DIVCLASS="htmlnav"><P></P><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch40_05.htm"TITLE="40.5 Avoiding Other at and cron Jobs "><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 40.5 Avoiding Other at and cron Jobs "BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="book"HREF="index.htm"TITLE="UNIX Power Tools"><IMGSRC="../gifs/txthome.gif"ALT="UNIX Power Tools"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch40_07.htm"TITLE="40.7 Making Your at Jobs Quiet "><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 40.7 Making Your at Jobs Quiet "BORDER="0"></A></TD></TR><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172">40.5 Avoiding Other at and cron Jobs </TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="index"HREF="index/idx_0.htm"TITLE="Book Index"><IMGSRC="../gifs/index.gif"ALT="Book Index"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172">40.7 Making Your at Jobs Quiet </TD></TR></TABLE><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><IMGSRC="../gifs/smnavbar.gif"USEMAP="#map"BORDER="0"ALT="The UNIX CD Bookshelf Navigation"><MAPNAME="map"><AREASHAPE="RECT"COORDS="0,0,73,21"HREF="../index.htm"ALT="The UNIX CD Bookshelf"><AREASHAPE="RECT"COORDS="74,0,163,21"HREF="index.htm"ALT="UNIX Power Tools"><AREASHAPE="RECT"COORDS="164,0,257,21"HREF="../unixnut/index.htm"ALT="UNIX in a Nutshell"><AREASHAPE="RECT"COORDS="258,0,321,21"HREF="../vi/index.htm"ALT="Learning the vi Editor"><AREASHAPE="RECT"COORDS="322,0,378,21"HREF="../sedawk/index.htm"ALT="sed &amp; awk"><AREASHAPE="RECT"COORDS="379,0,438,21"HREF="../ksh/index.htm"ALT="Learning the Korn Shell"><AREASHAPE="RECT"COORDS="439,0,514,21"HREF="../lrnunix/index.htm"ALT="Learning the UNIX Operating System"></MAP></DIV></BODY></HTML>