<HTML><HEAD><TITLE>[Chapter 40] 40.8 Automatically Restarting at Jobs </TITLE><METANAME="DC.title"CONTENT="UNIX Power Tools"><METANAME="DC.creator"CONTENT="Jerry Peek, Tim O'Reilly &amp; Mike Loukides"><METANAME="DC.publisher"CONTENT="O'Reilly &amp; Associates, Inc."><METANAME="DC.date"CONTENT="1998-08-04T21:50:38Z"><METANAME="DC.type"CONTENT="Text.Monograph"><METANAME="DC.format"CONTENT="text/html"SCHEME="MIME"><METANAME="DC.source"CONTENT="1-56592-260-3"SCHEME="ISBN"><METANAME="DC.language"CONTENT="en-US"><METANAME="generator"CONTENT="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><LINKREV="made"HREF="mailto:online-books@oreilly.com"TITLE="Online Books Comments"><LINKREL="up"HREF="ch40_01.htm"TITLE="40. Delayed Execution"><LINKREL="prev"HREF="ch40_07.htm"TITLE="40.7 Making Your at Jobs Quiet "><LINKREL="next"HREF="ch40_09.htm"TITLE="40.9 Checking and Removing Jobs "></HEAD><BODYBGCOLOR="#FFFFFF"TEXT="#000000"><DIVCLASS="htmlnav"><H1><IMGSRC="gifs/smbanner.gif"ALT="UNIX Power Tools"USEMAP="#srchmap"BORDER="0"></H1><MAPNAME="srchmap"><AREASHAPE="RECT"COORDS="0,0,466,58"HREF="index.htm"ALT="UNIX Power Tools"><AREASHAPE="RECT"COORDS="467,0,514,18"HREF="../search/psrch.htm"ALT="Search this book"></MAP><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch40_07.htm"TITLE="40.7 Making Your at Jobs Quiet "><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 40.7 Making Your at Jobs Quiet "BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><B><FONTFACE="ARIEL,HELVETICA,HELV,SANSERIF"SIZE="-1">Chapter 40<BR>Delayed Execution</FONT></B></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch40_09.htm"TITLE="40.9 Checking and Removing Jobs "><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 40.9 Checking and Removing Jobs "BORDER="0"></A></TD></TR></TABLE>&nbsp;<HRALIGN="LEFT"WIDTH="515"TITLE="footer"></DIV><DIVCLASS="SECT1"><H2CLASS="sect1"><ACLASS="title"NAME="UPT-ART-7240">40.8 Automatically Restarting at Jobs </A></H2><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-44785"></A><ACLASS="indexterm"NAME="AUTOID-44788"></A>In some situations, it's convenient to create jobs that do their work,finish, and automatically reschedule themselves at some time in thefuture.  Here's how to do this:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">#!/bin/shmyself=/home/mikel/bin/restarter# Add any commands you want to do real work here...sleep 60at -s 0123 tomorrow $myself</PRE></BLOCKQUOTE></P><PCLASS="para">Once you've started this script, it will run every day at 1:23 a.m.The<SPANCLASS="link"><EMCLASS="emphasis">sleep</EM> (<ACLASS="linkend"HREF="ch40_02.htm"TITLE="Waiting a Little While: sleep ">40.2</A>)</SPAN>makes sure that the following <EMCLASS="emphasis">at</EM> command is executed after 1:23a.m.; this guarantees that the next job will run at 1:23 a.m. tomorrowinstead of 1:23 a.m. today. This trick isn't needed on most versionsof <EMCLASS="emphasis">at</EM>, but it isn't a bad idea.</P><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-44798"></A>Note that self-restarting jobs really are an artifact of an earlierera, when mortal users were supposed to stay away from the <SPANCLASS="link"><EMCLASS="emphasis">cron</EM> (<ACLASS="linkend"HREF="ch40_12.htm"TITLE="Periodic Program Execution: The cron Facility ">40.12</A>)</SPAN>facility.  Now that users can have personal <EMCLASS="emphasis">crontab</EM> files, theneed for self-restarting jobs should diminish.</P><PCLASS="para">If you find that you do need to create scripts that reschedulethemselves, please make sure to clean up after yourself!  When yourprogram is no longer needed, remember to delete it with<SPANCLASS="link"><EMCLASS="emphasis">atq</EM> and <EMCLASS="emphasis">atrm</EM> (<ACLASS="linkend"HREF="ch40_09.htm"TITLE="Checking and Removing Jobs ">40.9</A>)</SPAN>.</P><DIVCLASS="sect1info"><PCLASS="SECT1INFO">- <SPANCLASS="authorinitials">ML</SPAN></P></DIV></DIV><DIVCLASS="htmlnav"><P></P><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch40_07.htm"TITLE="40.7 Making Your at Jobs Quiet "><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 40.7 Making Your at Jobs Quiet "BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="book"HREF="index.htm"TITLE="UNIX Power Tools"><IMGSRC="../gifs/txthome.gif"ALT="UNIX Power Tools"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch40_09.htm"TITLE="40.9 Checking and Removing Jobs "><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 40.9 Checking and Removing Jobs "BORDER="0"></A></TD></TR><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172">40.7 Making Your at Jobs Quiet </TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="index"HREF="index/idx_0.htm"TITLE="Book Index"><IMGSRC="../gifs/index.gif"ALT="Book Index"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172">40.9 Checking and Removing Jobs </TD></TR></TABLE><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><IMGSRC="../gifs/smnavbar.gif"USEMAP="#map"BORDER="0"ALT="The UNIX CD Bookshelf Navigation"><MAPNAME="map"><AREASHAPE="RECT"COORDS="0,0,73,21"HREF="../index.htm"ALT="The UNIX CD Bookshelf"><AREASHAPE="RECT"COORDS="74,0,163,21"HREF="index.htm"ALT="UNIX Power Tools"><AREASHAPE="RECT"COORDS="164,0,257,21"HREF="../unixnut/index.htm"ALT="UNIX in a Nutshell"><AREASHAPE="RECT"COORDS="258,0,321,21"HREF="../vi/index.htm"ALT="Learning the vi Editor"><AREASHAPE="RECT"COORDS="322,0,378,21"HREF="../sedawk/index.htm"ALT="sed &amp; awk"><AREASHAPE="RECT"COORDS="379,0,438,21"HREF="../ksh/index.htm"ALT="Learning the Korn Shell"><AREASHAPE="RECT"COORDS="439,0,514,21"HREF="../lrnunix/index.htm"ALT="Learning the UNIX Operating System"></MAP></DIV></BODY></HTML>