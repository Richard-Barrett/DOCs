<HTML><HEAD><TITLE>[Chapter 41] 41.5 Why Some Systems Backspace over Prompts </TITLE><METANAME="DC.title"CONTENT="UNIX Power Tools"><METANAME="DC.creator"CONTENT="Jerry Peek, Tim O'Reilly &amp; Mike Loukides"><METANAME="DC.publisher"CONTENT="O'Reilly &amp; Associates, Inc."><METANAME="DC.date"CONTENT="1998-08-04T21:51:58Z"><METANAME="DC.type"CONTENT="Text.Monograph"><METANAME="DC.format"CONTENT="text/html"SCHEME="MIME"><METANAME="DC.source"CONTENT="1-56592-260-3"SCHEME="ISBN"><METANAME="DC.language"CONTENT="en-US"><METANAME="generator"CONTENT="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><LINKREV="made"HREF="mailto:online-books@oreilly.com"TITLE="Online Books Comments"><LINKREL="up"HREF="ch41_01.htm"TITLE="41. Terminal and Serial Line Settings"><LINKREL="prev"HREF="ch41_04.htm"TITLE="41.4 How UNIX Handles TAB Characters "><LINKREL="next"HREF="ch41_06.htm"TITLE="41.6 Using sleep to Keep Port Settings "></HEAD><BODYBGCOLOR="#FFFFFF"TEXT="#000000"><DIVCLASS="htmlnav"><H1><IMGSRC="gifs/smbanner.gif"ALT="UNIX Power Tools"USEMAP="#srchmap"BORDER="0"></H1><MAPNAME="srchmap"><AREASHAPE="RECT"COORDS="0,0,466,58"HREF="index.htm"ALT="UNIX Power Tools"><AREASHAPE="RECT"COORDS="467,0,514,18"HREF="../search/psrch.htm"ALT="Search this book"></MAP><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch41_04.htm"TITLE="41.4 How UNIX Handles TAB Characters "><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 41.4 How UNIX Handles TAB Characters "BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><B><FONTFACE="ARIEL,HELVETICA,HELV,SANSERIF"SIZE="-1">Chapter 41<BR>Terminal and Serial Line Settings</FONT></B></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch41_06.htm"TITLE="41.6 Using sleep to Keep Port Settings "><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 41.6 Using sleep to Keep Port Settings "BORDER="0"></A></TD></TR></TABLE>&nbsp;<HRALIGN="LEFT"WIDTH="515"TITLE="footer"></DIV><DIVCLASS="SECT1"><H2CLASS="sect1"><ACLASS="title"NAME="UPT-ART-6530">41.5 Why Some Systems Backspace over Prompts </A></H2><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-45785"></A><ACLASS="indexterm"NAME="AUTOID-45788"></A><ACLASS="indexterm"NAME="AUTOID-45791"></A>[One curiosity that some people notice is that on BSD systems, youcan't backspace over shell prompts, but on System V, you can goright back to the edge of your screen or window, erasing the prompt.Brandon Allberry explains that here. -TOR&nbsp;]</P><PCLASS="para">You can make the BSD system behave like the System V one with <EMCLASS="emphasis">stty old</EM>.ButI don't think that's what you want....</P><PCLASS="para">The System V<SPANCLASS="link">terminal driver (<ACLASS="linkend"HREF="ch42_01.htm#UPT-ART-1142"TITLE="Making Sense Out of the Terminal Mess ">42.1</A>)</SPAN>makes no assumptions about the sanity orconfiguration of the terminal, and therefore doesn't try to get fancy withechoing.It can be annoying at times to see the system acting so stupidly,but it won't suddenly act up on you.</P><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-45798"></A><ACLASS="indexterm"NAME="AUTOID-45801"></A>The BSD tty driver makes the assumption that the terminal is behaving sanely,and that nothing is playing games with escape sequences, etc., so it can getaway with assuming how to stop at the prompt.To this end, it echoes controlcharacters in&quot;uparrow format&quot; [like <CODECLASS="literal">^A</CODE> for CTRL-a-<EMCLASS="emphasis">JP</EM>&nbsp;]and assumes you have the <EMCLASS="emphasis">stty tabs</EM> settingcorrect for the terminal (<CODECLASS="literal">stty tabs</CODE> only if the terminal has 8-characterhardware tabs set, otherwise <CODECLASS="literal">stty -tabs</CODE>).But it also requires variousother trickery (such as <CODECLASS="literal">stty tilde</CODE> to compensate for old Hazeltine terminals that use <CODECLASS="literal">~</CODE> instead of the ASCII ESC character) to stay in sync with strange terminals.</P><PCLASS="para">The BSD method mostly works, but has some drawbacks: for example, on aDEC-compatible terminal I sometimes have to<SPANCLASS="link">echo a control character (<ACLASS="linkend"HREF="ch41_09.htm"TITLE="Commands to Adjust Your Terminal ">41.9</A>)</SPAN>to getthe terminal to display ASCII instead of graphics characters.Under System V,this is convenient: it can be done by typing the control character at theshell command line, then backspace, then RETURN to redisplay the prompt assomething other than Greek.Under BSD I have to resort to<SPANCLASS="link"><EMCLASS="emphasis">cat</EM> (<ACLASS="linkend"HREF="ch25_02.htm"TITLE="Four Ways to Skin a cat ">25.2</A>)</SPAN>.Also,while BSD will echo &quot;typed&quot; control characters in uparrow format, it won'thelp you if a backgrounded program splatters control characters at theterminal.(Well, you can<SPANCLASS="link"><EMCLASS="emphasis">stty tostop</EM> (<ACLASS="linkend"HREF="ch12_07.htm"TITLE="Stop Background Output with stty tostop ">12.7</A>)</SPAN>,but sometimes you &quot;want&quot; thatbehavior from some particular backgrounded program: a status message, forexample.)</P><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-45817"></A><ACLASS="indexterm"NAME="AUTOID-45819"></A>Programs like <EMCLASS="emphasis">ksh</EM> and <EMCLASS="emphasis">tcsh</EM> also do &quot;smart&quot; echoing.They have the sameproblems, plus an additional one: the BSD tty driver can tell when anotherprogram scribbles on the terminal while doing a line-buffered read andautomatically redisplays the input line after the next keystroke.A userprogram has no way to find out about such scribbling, however, so you can getinto a decidedly non-WYSIWYG situation despite every attempt by the program tomake things look right.At least System V is honest in not promisinganything.</P><PCLASS="para">Such are the problems with non-regulated access by a multi-tasking system to anon-multiplexed device like a terminal, and such are the possible solutions.You choose the one that works best in your particular situation.</P><DIVCLASS="sect1info"><PCLASS="SECT1INFO">- <SPANCLASS="authorinitials">BA</SPAN> <SPANCLASS="bibliomisc">in <ACLASS="systemitem.newsgroup"HREF="news:comp.unix.misc">comp.unix.misc</A> on Usenet, 12 October 1991</SPAN></P></DIV></DIV><DIVCLASS="htmlnav"><P></P><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch41_04.htm"TITLE="41.4 How UNIX Handles TAB Characters "><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 41.4 How UNIX Handles TAB Characters "BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="book"HREF="index.htm"TITLE="UNIX Power Tools"><IMGSRC="../gifs/txthome.gif"ALT="UNIX Power Tools"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch41_06.htm"TITLE="41.6 Using sleep to Keep Port Settings "><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 41.6 Using sleep to Keep Port Settings "BORDER="0"></A></TD></TR><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172">41.4 How UNIX Handles TAB Characters </TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="index"HREF="index/idx_0.htm"TITLE="Book Index"><IMGSRC="../gifs/index.gif"ALT="Book Index"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172">41.6 Using sleep to Keep Port Settings </TD></TR></TABLE><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><IMGSRC="../gifs/smnavbar.gif"USEMAP="#map"BORDER="0"ALT="The UNIX CD Bookshelf Navigation"><MAPNAME="map"><AREASHAPE="RECT"COORDS="0,0,73,21"HREF="../index.htm"ALT="The UNIX CD Bookshelf"><AREASHAPE="RECT"COORDS="74,0,163,21"HREF="index.htm"ALT="UNIX Power Tools"><AREASHAPE="RECT"COORDS="164,0,257,21"HREF="../unixnut/index.htm"ALT="UNIX in a Nutshell"><AREASHAPE="RECT"COORDS="258,0,321,21"HREF="../vi/index.htm"ALT="Learning the vi Editor"><AREASHAPE="RECT"COORDS="322,0,378,21"HREF="../sedawk/index.htm"ALT="sed &amp; awk"><AREASHAPE="RECT"COORDS="379,0,438,21"HREF="../ksh/index.htm"ALT="Learning the Korn Shell"><AREASHAPE="RECT"COORDS="439,0,514,21"HREF="../lrnunix/index.htm"ALT="Learning the UNIX Operating System"></MAP></DIV></BODY></HTML>