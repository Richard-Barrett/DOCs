<HTML><HEAD><TITLE>[Chapter 41] 41.9 Commands to Adjust Your Terminal </TITLE><METANAME="DC.title"CONTENT="UNIX Power Tools"><METANAME="DC.creator"CONTENT="Jerry Peek, Tim O'Reilly &amp; Mike Loukides"><METANAME="DC.publisher"CONTENT="O'Reilly &amp; Associates, Inc."><METANAME="DC.date"CONTENT="1998-08-04T21:52:04Z"><METANAME="DC.type"CONTENT="Text.Monograph"><METANAME="DC.format"CONTENT="text/html"SCHEME="MIME"><METANAME="DC.source"CONTENT="1-56592-260-3"SCHEME="ISBN"><METANAME="DC.language"CONTENT="en-US"><METANAME="generator"CONTENT="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><LINKREV="made"HREF="mailto:online-books@oreilly.com"TITLE="Online Books Comments"><LINKREL="up"HREF="ch41_01.htm"TITLE="41. Terminal and Serial Line Settings"><LINKREL="prev"HREF="ch41_08.htm"TITLE="41.8 ptys and Window Systems "><LINKREL="next"HREF="ch41_10.htm"TITLE="41.10 Using terminfo Capabilities in Shell Programs "></HEAD><BODYBGCOLOR="#FFFFFF"TEXT="#000000"><DIVCLASS="htmlnav"><H1><IMGSRC="gifs/smbanner.gif"ALT="UNIX Power Tools"USEMAP="#srchmap"BORDER="0"></H1><MAPNAME="srchmap"><AREASHAPE="RECT"COORDS="0,0,466,58"HREF="index.htm"ALT="UNIX Power Tools"><AREASHAPE="RECT"COORDS="467,0,514,18"HREF="../search/psrch.htm"ALT="Search this book"></MAP><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch41_08.htm"TITLE="41.8 ptys and Window Systems "><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 41.8 ptys and Window Systems "BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><B><FONTFACE="ARIEL,HELVETICA,HELV,SANSERIF"SIZE="-1">Chapter 41<BR>Terminal and Serial Line Settings</FONT></B></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch41_10.htm"TITLE="41.10 Using terminfo Capabilities in Shell Programs "><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 41.10 Using terminfo Capabilities in Shell Programs "BORDER="0"></A></TD></TR></TABLE>&nbsp;<HRALIGN="LEFT"WIDTH="515"TITLE="footer"></DIV><DIVCLASS="SECT1"><H2CLASS="sect1"><ACLASS="title"NAME="UPT-ART-0426">41.9 Commands to Adjust Your Terminal </A></H2><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-45935"></A><ACLASS="indexterm"NAME="AUTOID-45938"></A><ACLASS="indexterm"NAME="AUTOID-45941"></A>Most terminals and window systems read every character that the hostcomputer sends to them.They're watching for an <EMCLASS="emphasis">escape sequence</EM>, a series of charactersthat give commands to the terminal or window.(From now on, I'll just say &quot;terminal.&quot;But this article applies to windows, too.)When the terminal sees an escape sequence, it performs the commandinstead of showing you the characters.</P><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-45945"></A>You can send these escape sequences yourself, from your UNIX account.For instance, maybe some program has accidentally left your terminal set toreverse video.If you're using an ANSI terminal (like a VT100) you couldtype an<SPANCLASS="link"><EMCLASS="emphasis">echo</EM> command (<ACLASS="linkend"HREF="ch08_06.htm"TITLE="Output Command-Line Arguments ">8.6</A>)</SPAN>to send the sequence<CODECLASS="literal">^[[0m</CODE> (where <CODECLASS="literal">^[</CODE> is an ESCape character) toturn off reverse video.However, it's usually easier to make aliases,a shell function or script that doesthe same thing.</P><PCLASS="para">These escape sequences should be documented in your terminal's manual.In this article, I'll use sequences for a VT102 or compatible terminal.If you're trying to make your setup more general so that it works on lots ofterminals, you should use a command like<SPANCLASS="link"><EMCLASS="emphasis">tput</EM> or <EMCLASS="emphasis">tcap</EM> (<ACLASS="linkend"HREF="ch41_10.htm"TITLE="Using terminfo Capabilities in Shell Programs ">41.10</A>)</SPAN>that reads your terminal's <EMCLASS="emphasis">terminfo</EM> or <EMCLASS="emphasis">termcap</EM> information.</P><PCLASS="para">For example, you might decide that it's easier to read a complicateddisplay when it's in reverse video.To put it in reverse video and go back to normal video later:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">% <CODECLASS="userinput"><B>Revvid</B></CODE>%   <ICLASS="lineannotation">...type commands; all text shows in reverse video...</I>% <CODECLASS="userinput"><B>Normal</B></CODE>%   <ICLASS="lineannotation">...now everything is in normal video...</I></PRE></BLOCKQUOTE></P><PCLASS="para">Most full-screen programs (<EMCLASS="emphasis">vi</EM>, etc.) re-initialize your terminal.That can undo some of what these commands do.</P><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-45968"></A>To write the script, make a file named for one of the aliases, like<EMCLASS="emphasis">Clear</EM>.The first line of the script stores an ESC character in a<SPANCLASS="link">shell variable (<ACLASS="linkend"HREF="ch06_08.htm"TITLE="Shell Variables ">6.8</A>)</SPAN>named <EMCLASS="emphasis">e</EM>.It's used in all the other aliases as <CODECLASS="literal">${e}</CODE>:</P><PCLASS="para"><TABLECLASS="screen.co"BORDER="1"><TR><THVALIGN="TOP"><PRECLASS="calloutlist">&#13;<ACLASS="co"HREF="ch45_35.htm"TITLE="45.35 Using a Control Character in a Script ">echo..3'</A> <ACLASS="co"HREF="ch44_15.htm"TITLE="44.15 Handling Command-Line Arguments in Shell Scripts ">$*</A> &#13;</PRE></TH><TDVALIGN="TOP"><PRECLASS="screen">&#13;#! /bin/sh# SENDS VT102 AND COMPATIBLE TERMINAL CONTROL ESCAPE SEQUENCESe=&quot;`echo e | tr e '\033'`&quot;  # Make an ESCape character portablycase &quot;$0&quot; in*Clear) seq=&quot;${e}[;H${e}[2J&quot;  ;;# move to top left, clear screen# ALTERNATE CHARACTER SETS.  YOU USUALLY WANT &quot;NOG&quot; TO CLEAR THESE# WHEN YOUR TERMINAL GETS IN THIS MODE ACCIDENTALLY:*NOG) seq=&quot;${e}(B&quot; ;;       # cancel graphics*Graphics) seq=&quot;${e}(0&quot; ;;  # lower-case letters become graphics# NOTE: THESE WON'T WORK FOR FULL-SCREEN APPLICATIONS LIKE vi.# BETTER TO RESET YOUR TERMINAL PARAMETERS (tset, stty):*C132) seq=&quot;${e}[?3;h&quot; ;;   # 132-column mode*C80) seq=&quot;${e}[?3;l&quot; ;;    # 80-column mode*Revvid) seq=&quot;${e}[?5;h&quot; ;; # Reverse video*Normal) seq=&quot;${e}[?5;l&quot; ;; # Normal video# WRITE MESSAGE TO TERMINAL STATUS LINE (NICE FOR REMINDERS)#       EXAMPLE: ToStatus Clean out your files!# AND CLEAR IT.*ToStatus) seq=&quot;${e}7${e}[25;1f${e}[0K$*${e}8&quot; ;;*ClrStatus) seq=&quot;${e}7${e}[25;1f${e}[0K${e}8&quot; ;;*) echo &quot;$0: HELP - can't run myself.&quot; 1&gt;&amp;2; exit 1;;esac# SEND $seq TO TERMINAL WITHOUT INTERPRETATION BY SYSTEM V echo:cat &lt;&lt; END_OF_seq$seqEND_OF_seqexit 0</PRE></TD></TR></TABLE></P><PCLASS="para">You can install this script from the CD-ROMor from the<SPANCLASS="link">online archive (<ACLASS="linkend"HREF="ch52_07.htm"TITLE="Other Ways to Get the Software ">52.7</A>)</SPAN>.If you don't get the file from the disc,be careful to type those escape sequences exactly.The <EMCLASS="emphasis">Graphics</EM> command uses the digit 0, not the letter O.The <EMCLASS="emphasis">ToStatus</EM> and<EMCLASS="emphasis">ClrStatus</EM> commands use the digit 1 (one), not the letter l (L).If you get the script from the archive,ask <EMCLASS="emphasis">tar</EM> to install <EMCLASS="emphasis">Clear</EM> and its eight other links:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">% <CODECLASS="userinput"><B>tar xvf </B></CODE><CODECLASS="replaceable"><I>archive.tar</I></CODE><CODECLASS="userinput"><B> Clear NOG Graphics C132 \C80 Revvid Normal ToStatus ClrStatus</B></CODE>x Clear, 1371 bytes, 3 tape blocksNOG linked to ClearGraphics linked to Clear   ...</PRE></BLOCKQUOTE></P><PCLASS="para">&#13;The script<SPANCLASS="link">tests the name it was called with (<ACLASS="linkend"HREF="ch44_22.htm"TITLE="Finding a Program Name; Multiple Program Names ">44.22</A>)</SPAN>,in <CODECLASS="literal">$0</CODE>, to decidewhich string to output (the asterisk (<CODECLASS="literal">*</CODE>) matches any pathnamebefore the command name).This trick saves disk space.You can add other commands, too, by adding a line to the <CODECLASS="literal">case</CODE>and another link.</P><DIVCLASS="sect1info"><PCLASS="SECT1INFO">- <SPANCLASS="authorinitials">JP</SPAN> <SPANCLASS="bibliomisc">based on a suggestion and aliases by Bruce Barnett</SPAN></P></DIV></DIV><DIVCLASS="htmlnav"><P></P><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch41_08.htm"TITLE="41.8 ptys and Window Systems "><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 41.8 ptys and Window Systems "BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="book"HREF="index.htm"TITLE="UNIX Power Tools"><IMGSRC="../gifs/txthome.gif"ALT="UNIX Power Tools"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch41_10.htm"TITLE="41.10 Using terminfo Capabilities in Shell Programs "><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 41.10 Using terminfo Capabilities in Shell Programs "BORDER="0"></A></TD></TR><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172">41.8 ptys and Window Systems </TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="index"HREF="index/idx_0.htm"TITLE="Book Index"><IMGSRC="../gifs/index.gif"ALT="Book Index"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172">41.10 Using terminfo Capabilities in Shell Programs </TD></TR></TABLE><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><IMGSRC="../gifs/smnavbar.gif"USEMAP="#map"BORDER="0"ALT="The UNIX CD Bookshelf Navigation"><MAPNAME="map"><AREASHAPE="RECT"COORDS="0,0,73,21"HREF="../index.htm"ALT="The UNIX CD Bookshelf"><AREASHAPE="RECT"COORDS="74,0,163,21"HREF="index.htm"ALT="UNIX Power Tools"><AREASHAPE="RECT"COORDS="164,0,257,21"HREF="../unixnut/index.htm"ALT="UNIX in a Nutshell"><AREASHAPE="RECT"COORDS="258,0,321,21"HREF="../vi/index.htm"ALT="Learning the vi Editor"><AREASHAPE="RECT"COORDS="322,0,378,21"HREF="../sedawk/index.htm"ALT="sed &amp; awk"><AREASHAPE="RECT"COORDS="379,0,438,21"HREF="../ksh/index.htm"ALT="Learning the Korn Shell"><AREASHAPE="RECT"COORDS="439,0,514,21"HREF="../lrnunix/index.htm"ALT="Learning the UNIX Operating System"></MAP></DIV></BODY></HTML>