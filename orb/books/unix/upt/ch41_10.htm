<HTML><HEAD><TITLE>[Chapter 41] 41.10 Using terminfo Capabilities in Shell Programs </TITLE><METANAME="DC.title"CONTENT="UNIX Power Tools"><METANAME="DC.creator"CONTENT="Jerry Peek, Tim O'Reilly &amp; Mike Loukides"><METANAME="DC.publisher"CONTENT="O'Reilly &amp; Associates, Inc."><METANAME="DC.date"CONTENT="1998-08-04T21:52:07Z"><METANAME="DC.type"CONTENT="Text.Monograph"><METANAME="DC.format"CONTENT="text/html"SCHEME="MIME"><METANAME="DC.source"CONTENT="1-56592-260-3"SCHEME="ISBN"><METANAME="DC.language"CONTENT="en-US"><METANAME="generator"CONTENT="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><LINKREV="made"HREF="mailto:online-books@oreilly.com"TITLE="Online Books Comments"><LINKREL="up"HREF="ch41_01.htm"TITLE="41. Terminal and Serial Line Settings"><LINKREL="prev"HREF="ch41_09.htm"TITLE="41.9 Commands to Adjust Your Terminal "><LINKREL="next"HREF="ch41_11.htm"TITLE="41.11 How termcap and terminfo Describe Terminals "></HEAD><BODYBGCOLOR="#FFFFFF"TEXT="#000000"><DIVCLASS="htmlnav"><H1><IMGSRC="gifs/smbanner.gif"ALT="UNIX Power Tools"USEMAP="#srchmap"BORDER="0"></H1><MAPNAME="srchmap"><AREASHAPE="RECT"COORDS="0,0,466,58"HREF="index.htm"ALT="UNIX Power Tools"><AREASHAPE="RECT"COORDS="467,0,514,18"HREF="../search/psrch.htm"ALT="Search this book"></MAP><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch41_09.htm"TITLE="41.9 Commands to Adjust Your Terminal "><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 41.9 Commands to Adjust Your Terminal "BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><B><FONTFACE="ARIEL,HELVETICA,HELV,SANSERIF"SIZE="-1">Chapter 41<BR>Terminal and Serial Line Settings</FONT></B></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch41_11.htm"TITLE="41.11 How termcap and terminfo Describe Terminals "><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 41.11 How termcap and terminfo Describe Terminals "BORDER="0"></A></TD></TR></TABLE>&nbsp;<HRALIGN="LEFT"WIDTH="515"TITLE="footer"></DIV><DIVCLASS="SECT1"><H2CLASS="sect1"><ACLASS="title"NAME="UPT-ART-6720">41.10 Using terminfo Capabilities in Shell Programs </A></H2><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-46002"></A>The weakness of the technique described in article<ACLASS="xref"HREF="ch41_09.htm"TITLE="Commands to Adjust Your Terminal ">41.9</A>is that it requires you to hardcode the escape sequences for aparticular terminal.If you use more than one kind of terminal, youhave to create separate aliases for each one.That's exactly thekind of problem that the <EMCLASS="emphasis">termcap</EM> and <EMCLASS="emphasis">terminfo</EM> databases were designed to solve.</P><TABLECLASS="para.programreference"BORDER="1"><TR><THVALIGN="TOP"><ACLASS="programreference"HREF="examples/index.htm"TITLE="tcap">tcap</A><BR></TH><TDVALIGN="TOP"><ACLASS="indexterm"NAME="AUTOID-46009"></A><ACLASS="indexterm"NAME="AUTOID-46011"></A><ACLASS="indexterm"NAME="AUTOID-46013"></A><ACLASS="indexterm"NAME="AUTOID-46015"></A>For each terminal in the database, there is a list of <SPANCLASS="link">terminal capabilities (<ACLASS="linkend"HREF="ch41_11.htm"TITLE="How termcap and terminfo Describe Terminals ">41.11</A>)</SPAN>.The <EMCLASS="emphasis">tput</EM> program (standard on any system with <EMCLASS="emphasis">terminfo</EM>)lets you print out the value of any individual capability.The <EMCLASS="emphasis">tcap</EM> program does the same for systems using <EMCLASS="emphasis">termcap</EM>.(<EMCLASS="emphasis">tcap</EM> was originally named <EMCLASS="emphasis">tc</EM>.We renamed it to avoid conflicts with <EMCLASS="emphasis">tc</EM>, the <EMCLASS="emphasis">ditroff</EM>interpreter program for Tektronix 4015 terminals.)This makes it possible to use terminalcapabilities such as those for standout mode in shell programs.</TD></TR></TABLE><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-46028"></A>For example, a prompt issued by a shell program could behighlighted by the following code using <EMCLASS="emphasis">tput</EM>:</P><PCLASS="para"><TABLECLASS="screen.co"BORDER="1"><TR><THVALIGN="TOP"><PRECLASS="calloutlist">&#13;<ACLASS="co"HREF="ch08_06.htm"TITLE="8.6 Output Command-Line Arguments ">echo...\c</A> </PRE></TH><TDVALIGN="TOP"><PRECLASS="screen"># Store the terminfo capability to start standout mode into# the variable HIGHLIGHT; this might be bold, or inverse videoHIGHLIGHT=`tput smso` # Store the terminfo capability to end standout mode into# the variable NORMAL NORMAL=`tput rmso` # Echo a highlighted promptecho &quot;${HIGHLIGHT}Press Return to accept value: ${NORMAL}\c&quot;</PRE></TD></TR></TABLE></P><PCLASS="para">Capabilities that accept arguments (such as cursor movement sequences) will interpolate values that follow thecapability name on the command line.For example, to issuethe cursor motion sequence to move to the upper-left corner ofthe screen (row 0, column 0), you could type:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">$ <CODECLASS="userinput"><B>tput cup 0 0</B></CODE></PRE></BLOCKQUOTE></P><PCLASS="para">Another case where <EMCLASS="emphasis">tput</EM> comes in useful is when commandsequences accidentally get sent to the screen, leaving output garbledor in a distracting highlight mode.It sometimes happens that a userreads a non-ASCII file, or reads a mail message with a control characteraccidentally imbedded, and ends up with gibberish.This is oftenbecause the sequence for entering an alternate character set has beensent to the terminal, and the screen is no longer readable to thehuman eye.The user can return to the normal character set two ways: by rebooting the terminal, or by entering <SPANCLASS="link"><EMCLASS="emphasis">tput init</EM> (<ACLASS="linkend"HREF="ch05_12.htm"TITLE="Initializing the Terminal with tput ">5.12</A>)</SPAN>on the command line.Using <EMCLASS="emphasis">tput</EM>, obviously, is much more efficient.</P><DIVCLASS="sect1info"><PCLASS="SECT1INFO">- <SPANCLASS="authorinitials">JS</SPAN>, <SPANCLASS="authorinitials">TOR</SPAN></P></DIV></DIV><DIVCLASS="htmlnav"><P></P><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch41_09.htm"TITLE="41.9 Commands to Adjust Your Terminal "><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 41.9 Commands to Adjust Your Terminal "BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="book"HREF="index.htm"TITLE="UNIX Power Tools"><IMGSRC="../gifs/txthome.gif"ALT="UNIX Power Tools"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch41_11.htm"TITLE="41.11 How termcap and terminfo Describe Terminals "><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 41.11 How termcap and terminfo Describe Terminals "BORDER="0"></A></TD></TR><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172">41.9 Commands to Adjust Your Terminal </TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="index"HREF="index/idx_0.htm"TITLE="Book Index"><IMGSRC="../gifs/index.gif"ALT="Book Index"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172">41.11 How termcap and terminfo Describe Terminals </TD></TR></TABLE><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><IMGSRC="../gifs/smnavbar.gif"USEMAP="#map"BORDER="0"ALT="The UNIX CD Bookshelf Navigation"><MAPNAME="map"><AREASHAPE="RECT"COORDS="0,0,73,21"HREF="../index.htm"ALT="The UNIX CD Bookshelf"><AREASHAPE="RECT"COORDS="74,0,163,21"HREF="index.htm"ALT="UNIX Power Tools"><AREASHAPE="RECT"COORDS="164,0,257,21"HREF="../unixnut/index.htm"ALT="UNIX in a Nutshell"><AREASHAPE="RECT"COORDS="258,0,321,21"HREF="../vi/index.htm"ALT="Learning the vi Editor"><AREASHAPE="RECT"COORDS="322,0,378,21"HREF="../sedawk/index.htm"ALT="sed &amp; awk"><AREASHAPE="RECT"COORDS="379,0,438,21"HREF="../ksh/index.htm"ALT="Learning the Korn Shell"><AREASHAPE="RECT"COORDS="439,0,514,21"HREF="../lrnunix/index.htm"ALT="Learning the UNIX Operating System"></MAP></DIV></BODY></HTML>