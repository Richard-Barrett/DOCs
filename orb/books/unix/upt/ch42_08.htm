<HTML><HEAD><TITLE>[Chapter 42] 42.8 Errors Erased Too Soon? Try These Workarounds </TITLE><METANAME="DC.title"CONTENT="UNIX Power Tools"><METANAME="DC.creator"CONTENT="Jerry Peek, Tim O'Reilly &amp; Mike Loukides"><METANAME="DC.publisher"CONTENT="O'Reilly &amp; Associates, Inc."><METANAME="DC.date"CONTENT="1998-08-04T21:52:38Z"><METANAME="DC.type"CONTENT="Text.Monograph"><METANAME="DC.format"CONTENT="text/html"SCHEME="MIME"><METANAME="DC.source"CONTENT="1-56592-260-3"SCHEME="ISBN"><METANAME="DC.language"CONTENT="en-US"><METANAME="generator"CONTENT="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><LINKREV="made"HREF="mailto:online-books@oreilly.com"TITLE="Online Books Comments"><LINKREL="up"HREF="ch42_01.htm"TITLE="42. Problems with Terminals"><LINKREL="prev"HREF="ch42_07.htm"TITLE="42.7 termtest: Send Repeated Characters to Terminal "><LINKREL="next"HREF="ch43_01.htm"TITLE="43. Printing"></HEAD><BODYBGCOLOR="#FFFFFF"TEXT="#000000"><DIVCLASS="htmlnav"><H1><IMGSRC="gifs/smbanner.gif"ALT="UNIX Power Tools"USEMAP="#srchmap"BORDER="0"></H1><MAPNAME="srchmap"><AREASHAPE="RECT"COORDS="0,0,466,58"HREF="index.htm"ALT="UNIX Power Tools"><AREASHAPE="RECT"COORDS="467,0,514,18"HREF="../search/psrch.htm"ALT="Search this book"></MAP><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch42_07.htm"TITLE="42.7 termtest: Send Repeated Characters to Terminal "><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 42.7 termtest: Send Repeated Characters to Terminal "BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><B><FONTFACE="ARIEL,HELVETICA,HELV,SANSERIF"SIZE="-1">Chapter 42<BR>Problems with Terminals</FONT></B></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="CHAPTER"HREF="ch43_01.htm"TITLE="43. Printing"><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 43. Printing"BORDER="0"></A></TD></TR></TABLE>&nbsp;<HRALIGN="LEFT"WIDTH="515"TITLE="footer"></DIV><DIVCLASS="SECT1"><H2CLASS="sect1"><ACLASS="title"NAME="UPT-ART-7899">42.8 Errors Erased Too Soon? Try These Workarounds </A></H2><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-47269"></A>I just made a change to my<SPANCLASS="link"><EMCLASS="emphasis">.exrc</EM> file (<ACLASS="linkend"HREF="ch04_09.htm"TITLE="Setting Up vi with the .exrc File ">4.9</A>)</SPAN>.Then I started <EMCLASS="emphasis">vi</EM> and noticed a message in reverse video before thescreen cleared and my file was displayed.It was probably an error message.But <EMCLASS="emphasis">vi</EM>, like some other programs, shows errors and thenclears (erases) the screen before you can read them.Great design, eh?</P><PCLASS="para">Here are some workarounds:</P><ULCLASS="itemizedlist"><LICLASS="listitem"><PCLASS="para">When my terminal used to run at a slow data rate (1200 baud or less),I could usually read an error message before the screen cleared.In these days of 28,800 bps and above, you can still fake that.Log out.Then set your terminal or communicationspackage to a slow data rate and log in again.Now look fast.</P></LI><LICLASS="listitem"><PCLASS="para">Way back, when<SPANCLASS="link">ttys were real teletypes (<ACLASS="linkend"HREF="ch41_02.htm"TITLE="stty and All That Stuff ">41.2</A>)</SPAN>,finding errors was easy: there was no screen to clear; the error wasright there on the paper.</P><PCLASS="para">So, if your terminal has a printer, turn it on.(On DOS, try doing <KBDCLASS="keycap">[CTRL]</KBD>+<KBDCLASS="keycap">[PrtSC]</KBD>.)Re-run your program and read the error on the paper.</P></LI><LICLASS="listitem"><PCLASS="para">If your window or communications program has a &quot;capture to file&quot; function,turn it on.Make the error happen.Turn off the capture function (important!).Then read the file&nbsp;- you'll probably need to use a program like<SPANCLASS="link"><EMCLASS="emphasis">cat -v</EM> (<ACLASS="linkend"HREF="ch25_07.htm"TITLE="Show Non-Printing Characters with cat -v or od -c ">25.7</A>)</SPAN>or<SPANCLASS="link"><EMCLASS="emphasis">vmore</EM> (<ACLASS="linkend"HREF="ch25_05.htm"TITLE="Page Through Compressed, RCS, Unprintable Files ">25.5</A>)</SPAN>to keep the screen-clearing characters stored in the file from erasingyour screen as you read the file!</P></LI><LICLASS="listitem"><PCLASS="para">If you don't have a screen-capture function, but you do have the<SPANCLASS="link"><EMCLASS="emphasis">script</EM> (<ACLASS="linkend"HREF="ch51_05.htm"TITLE="Copy What You Do with script ">51.5</A>)</SPAN>program,use it with the technique in the step above.</P></LI><LICLASS="listitem"><PCLASS="para">If your window has a scroll bar or a &quot;page up&quot; command, try it.Some screen-clear commands won't clear the scrolling memory.</P></LI><LICLASS="listitem"><PCLASS="para">Use<SPANCLASS="link"><EMCLASS="emphasis">tee</EM> (<ACLASS="linkend"HREF="ch13_09.htm"TITLE="Send Output Two or More Places with tee ">13.9</A>)</SPAN>to grab the standard output and standard error to a filewhile you're viewing:</P><PCLASS="para"><TABLECLASS="screen.co"BORDER="1"><TR><THVALIGN="TOP"><PRECLASS="calloutlist"><ACLASS="co"HREF="ch13_05.htm"TITLE="13.5 Redirection in C Shell: Capture Errors, Too? ">|&amp;</A> <ACLASS="co"HREF="ch08_13.htm"TITLE='8.13 Is It "2&gt;&amp;1 file&quot; or "&gt; file 2&gt;&amp;1&quot;? Why?'>2&gt;&amp;1</A> </PRE></TH><TDVALIGN="TOP"><PRECLASS="screen">% <CODECLASS="userinput"><B>vi foo |&amp; tee saved_stuff</B></CODE>   <ICLASS="lineannotation">...csh</I>$ <CODECLASS="userinput"><B>vi foo 2&gt;&amp;1 | tee saved_stuff</B></CODE>   <ICLASS="lineannotation">...sh</I></PRE></TD></TR></TABLE></P><PCLASS="para">Then look at the saved file with a pager program, possibly filteringit through <SPANCLASS="link"><EMCLASS="emphasis">cat&nbsp;-v</EM> (<ACLASS="linkend"HREF="ch25_07.htm"TITLE="Show Non-Printing Characters with cat -v or od -c ">25.7</A>)</SPAN>and/or <SPANCLASS="link"><EMCLASS="emphasis">fold</EM> (<ACLASS="linkend"HREF="ch43_08.htm"TITLE="Fixing Margins with pr and fold ">43.8</A>)</SPAN>first. (The <SPANCLASS="link"><EMCLASS="emphasis">vmore</EM> script (<ACLASS="linkend"HREF="ch25_05.htm"TITLE="Page Through Compressed, RCS, Unprintable Files ">25.5</A>)</SPAN>was made for just this kind of job.)</P></LI><LICLASS="listitem"><PCLASS="para">Restart the program and get to the point just before the error will happen.Try to hitCTRL-s orHOLD SCREENbetween the time the error is output and the screen clears.That can be tough to doover a networkor on a high-speed connection, though, because of the delay between thetime you press the key and the time when all the output finally stopscoming.</P></LI><LICLASS="listitem"><PCLASS="para"><SPANCLASS="link">Temporarily switch (<ACLASS="linkend"HREF="ch06_10.htm"TITLE="Running a Command with a Temporarily Different Environment ">6.10</A>)</SPAN>to a <EMCLASS="emphasis">termcap/terminfo</EM> definition that doesn'thave a clear-screen capability.Two good settings for TERM are <EMCLASS="emphasis">dumb</EM> and <EMCLASS="emphasis">unknown</EM>.</P></LI><LICLASS="listitem"><PCLASS="para">That previous trick will leave your program almost useless, if it runs at all.If you do a lot of troubleshooting of full-screen programs like <EMCLASS="emphasis">vi</EM>or writing startup files such as <EMCLASS="emphasis">.exrc</EM>,it's worth your time to find a <EMCLASS="emphasis">termcap</EM> or <EMCLASS="emphasis">terminfo</EM> definitionthat has all the capabilities of the usual definition&nbsp;- except that itwon't clear the screen.(You'll probably want to check the termcap capabilities <EMCLASS="emphasis">cl=</EM>,<EMCLASS="emphasis">is=</EM>, <EMCLASS="emphasis">if=</EM>, <EMCLASS="emphasis">rs=</EM>, <EMCLASS="emphasis">rf=</EM>, <EMCLASS="emphasis">r2=</EM>, and maybe <EMCLASS="emphasis">ti=</EM>.Or, for <EMCLASS="emphasis">terminfo</EM>, look at <EMCLASS="emphasis">clear=</EM>, <EMCLASS="emphasis">iprog=</EM>, <EMCLASS="emphasis">is2=</EM>,<EMCLASS="emphasis">if=</EM>, <EMCLASS="emphasis">rs2=</EM>, <EMCLASS="emphasis">rf=</EM>, and maybe <EMCLASS="emphasis">smcup=</EM>.)If you don't know how, read O'Reilly &amp; Associates' <EMCLASS="emphasis">termcap &amp; terminfo</EM>-orlure a UNIX guru from down the hall somewhere.[1]</P><BLOCKQUOTECLASS="footnote"><PCLASS="para">[1] Hint: all computer gurus like pizza.</P></BLOCKQUOTE></LI></UL><DIVCLASS="sect1info"><PCLASS="SECT1INFO">- <SPANCLASS="authorinitials">JP</SPAN></P></DIV></DIV><DIVCLASS="htmlnav"><P></P><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch42_07.htm"TITLE="42.7 termtest: Send Repeated Characters to Terminal "><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 42.7 termtest: Send Repeated Characters to Terminal "BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="book"HREF="index.htm"TITLE="UNIX Power Tools"><IMGSRC="../gifs/txthome.gif"ALT="UNIX Power Tools"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="CHAPTER"HREF="ch43_01.htm"TITLE="43. Printing"><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 43. Printing"BORDER="0"></A></TD></TR><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172">42.7 termtest: Send Repeated Characters to Terminal </TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="index"HREF="index/idx_0.htm"TITLE="Book Index"><IMGSRC="../gifs/index.gif"ALT="Book Index"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172">43. Printing</TD></TR></TABLE><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><IMGSRC="../gifs/smnavbar.gif"USEMAP="#map"BORDER="0"ALT="The UNIX CD Bookshelf Navigation"><MAPNAME="map"><AREASHAPE="RECT"COORDS="0,0,73,21"HREF="../index.htm"ALT="The UNIX CD Bookshelf"><AREASHAPE="RECT"COORDS="74,0,163,21"HREF="index.htm"ALT="UNIX Power Tools"><AREASHAPE="RECT"COORDS="164,0,257,21"HREF="../unixnut/index.htm"ALT="UNIX in a Nutshell"><AREASHAPE="RECT"COORDS="258,0,321,21"HREF="../vi/index.htm"ALT="Learning the vi Editor"><AREASHAPE="RECT"COORDS="322,0,378,21"HREF="../sedawk/index.htm"ALT="sed &amp; awk"><AREASHAPE="RECT"COORDS="379,0,438,21"HREF="../ksh/index.htm"ALT="Learning the Korn Shell"><AREASHAPE="RECT"COORDS="439,0,514,21"HREF="../lrnunix/index.htm"ALT="Learning the UNIX Operating System"></MAP></DIV></BODY></HTML>