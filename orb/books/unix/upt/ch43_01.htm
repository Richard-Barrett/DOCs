<HTML><HEAD><TITLE>[Chapter 43] Printing</TITLE><METANAME="DC.title"CONTENT="UNIX Power Tools"><METANAME="DC.creator"CONTENT="Jerry Peek, Tim O'Reilly &amp; Mike Loukides"><METANAME="DC.publisher"CONTENT="O'Reilly &amp; Associates, Inc."><METANAME="DC.date"CONTENT="1998-10-23T15:51:40Z"><METANAME="DC.type"CONTENT="Text.Monograph"><METANAME="DC.format"CONTENT="text/html"SCHEME="MIME"><METANAME="DC.source"CONTENT="1-56592-260-3"SCHEME="ISBN"><METANAME="DC.language"CONTENT="en-US"><METANAME="generator"CONTENT="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><LINKREV="made"HREF="mailto:online-books@oreilly.com"TITLE="Online Books Comments"><LINKREL="up"HREF="part07.htm"TITLE="VII. Terminals and Printers "><LINKREL="prev"HREF="ch42_08.htm"TITLE="42.8 Errors Erased Too Soon? Try These Workarounds "><LINKREL="next"HREF="ch43_02.htm"TITLE="43.2 Introduction to Printing on UNIX "></HEAD><BODYBGCOLOR="#FFFFFF"TEXT="#000000"><DIVCLASS="htmlnav"><H1><IMGSRC="gifs/smbanner.gif"ALT="UNIX Power Tools"USEMAP="#srchmap"BORDER="0"></H1><MAPNAME="srchmap"><AREASHAPE="RECT"COORDS="0,0,466,58"HREF="index.htm"ALT="UNIX Power Tools"><AREASHAPE="RECT"COORDS="467,0,514,18"HREF="../search/psrch.htm"ALT="Search this book"></MAP><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch42_08.htm"TITLE="42.8 Errors Erased Too Soon? Try These Workarounds "><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 42.8 Errors Erased Too Soon? Try These Workarounds "BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><B><FONTFACE="ARIEL,HELVETICA,HELV,SANSERIF"SIZE="-1">Chapter 43</FONT></B></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch43_02.htm"TITLE="43.2 Introduction to Printing on UNIX "><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 43.2 Introduction to Printing on UNIX "BORDER="0"></A></TD></TR></TABLE>&nbsp;<HRALIGN="LEFT"WIDTH="515"TITLE="footer"></DIV><DIVCLASS="CHAPTER"><H1CLASS="chapter"><ACLASS="title"NAME="UPT-CHP-43">43. Printing</A></H1><DIVCLASS="htmltoc"><P><B>Contents:</B><BR><ACLASS="sect1"HREF="#UPT-ART-4960"TITLE="43.1 Introduction to Printing ">Introduction to Printing </A><BR><ACLASS="sect1"HREF="ch43_02.htm"TITLE="43.2 Introduction to Printing on UNIX ">Introduction to Printing on UNIX </A><BR><ACLASS="sect1"HREF="ch43_03.htm"TITLE="43.3 Printer Control with lpc ">Printer Control with lpc </A><BR><ACLASS="sect1"HREF="ch43_04.htm"TITLE="43.4 Using Different Printers ">Using Different Printers </A><BR><ACLASS="sect1"HREF="ch43_05.htm"TITLE="43.5 Using Symbolic Links for Spooling ">Using Symbolic Links for Spooling </A><BR><ACLASS="sect1"HREF="ch43_06.htm"TITLE="43.6 Printing to a Terminal Printer ">Printing to a Terminal Printer </A><BR><ACLASS="sect1"HREF="ch43_07.htm"TITLE="43.7 Quick-and-Dirty Formatting Before Printing ">Quick-and-Dirty Formatting Before Printing </A><BR><ACLASS="sect1"HREF="ch43_08.htm"TITLE="43.8 Fixing Margins with pr and fold ">Fixing Margins with pr and fold </A><BR><ACLASS="sect1"HREF="ch43_09.htm"TITLE="43.9 Indenting Text for Printing ">Indenting Text for Printing </A><BR><ACLASS="sect1"HREF="ch43_10.htm"TITLE="43.10 Filename Headers Above Files Without pr ">Filename Headers Above Files Without pr </A><BR><ACLASS="sect1"HREF="ch43_11.htm"TITLE="43.11 Big Letters: banner ">Big Letters: banner </A><BR><ACLASS="sect1"HREF="ch43_12.htm"TITLE="43.12 Typesetting Overview ">Typesetting Overview </A><BR><ACLASS="sect1"HREF="ch43_13.htm"TITLE="43.13 The Text Formatters nroff, troff, ditroff, ... ">The Text Formatters nroff, troff, ditroff, ... </A><BR><ACLASS="sect1"HREF="ch43_14.htm"TITLE="43.14 nroff/troff and Macro Packages ">nroff/troff and Macro Packages </A><BR><ACLASS="sect1"HREF="ch43_15.htm"TITLE="43.15 From a Source File to the Printer ">From a Source File to the Printer </A><BR><ACLASS="sect1"HREF="ch43_16.htm"TITLE="43.16 groff ">groff </A><BR><ACLASS="sect1"HREF="ch43_17.htm"TITLE="43.17 Don't Have nroff?  Try gnroff or awf ">Don't Have nroff?  Try gnroff or awf </A><BR><ACLASS="sect1"HREF="ch43_18.htm"TITLE="43.18 How nroff Makes Bold and Underline; How to Remove It">How nroff Makes Bold and Underline; How to Remove It</A><BR><ACLASS="sect1"HREF="ch43_19.htm"TITLE="43.19 Removing Leading Tabs and Other Trivia ">Removing Leading Tabs and Other Trivia </A><BR><ACLASS="sect1"HREF="ch43_20.htm"TITLE="43.20 Displaying a troff Macro Definition ">Displaying a troff Macro Definition </A><BR><ACLASS="sect1"HREF="ch43_21.htm"TITLE="43.21 Preprocessing troff Input with sed ">Preprocessing troff Input with sed </A><BR><ACLASS="sect1"HREF="ch43_22.htm"TITLE="43.22 Converting Text Files to PostScript ">Converting Text Files to PostScript </A><BR><ACLASS="sect1"HREF="ch43_23.htm"TITLE="43.23 psselect: Print Some Pages from a PostScript file">psselect: Print Some Pages from a PostScript file</A><BR><ACLASS="sect1"HREF="ch43_24.htm"TITLE="43.24 Other PostScript Utilities ">Other PostScript Utilities </A><BR><ACLASS="sect1"HREF="ch43_25.htm"TITLE="43.25 The Portable Bitmap Package ">The Portable Bitmap Package </A></P><P></P></DIV><DIVCLASS="sect1"><H2CLASS="sect1"><ACLASS="title"NAME="UPT-ART-4960">43.1 Introduction to Printing </A></H2><PCLASS="para"><ACLASS="indexterm"NAME="UPT-ART-4960-IX-PRINTING-SPOOLING-SYSTEM-DESCRIBED"></A><ACLASS="indexterm"NAME="UPT-ART-4960-IX-SPOOLING-SYSTEM-DESCRIBED"></A><ACLASS="indexterm"NAME="AUTOID-47364"></A>This chapter discusses printing, which is a surprisinglycomplicated subject.To understand why printing is so complicated,though, let's think a little bit about what you might want to print.</P><PCLASS="para">First, in the &quot;olden days&quot; we had line printers and their relatives:daisy wheel printers, dot matrix printers, and other pieces ofequipment that generated typewriter-like output.Printing a simpletext file was easy: you didn't need any special processing, you onlyneeded some software to shove the file into the printer.If youwanted, you might add a banner page and do a little simpleformatting, but that was really pretty trivial.</P><PCLASS="para">The one area of complexity in the printing system was the &quot;spooling system,&quot;which had to do several things in addition to force-feeding the printer.Most printers were (and still are) shared devices.This means thatmany people can send jobs to the printer at the same time.There mayalso be several printers on which your file gets printed; you may carewhich one is used, you may not.The spooling system needs to manageall this: receiving data from users, figuring out whether or not anappropriate printer is in use, and sending the file to the printer (ifit's free) or storing the file somewhere (if the printer isn't free).</P><PCLASS="para">Historical note: why is this called the &quot;spooling system&quot;?Dave Birnbaum, a Principal Scientist at Xerox, says:<BLOCKQUOTECLASS="blockquote"><PCLASS="para">&quot;SPOOL (Simultaneous Printing Off and On Line)&quot;<ACLASS="indexterm"NAME="AUTOID-47372"></A>It was written for the early IBM mainframes (of the 3 digit, i.e.,709 kind) and extended to the early 1401 machines.Output for the printer was sent to the spool system which eitherprinted it directly or queued it (on tape) for later printing (hencethe on/off line).There was also a 2nd generation version where the 1401 would act as theprinter controller for the (by then) 7094.The two were usually connected by a switchabletape drive that could be driven by either machine.&quot;[There's some controversy about exactly what the acronym means,but Dave's is as good as any I've heard. -<EMCLASS="emphasis">JP</EM>&nbsp;]</P></BLOCKQUOTE></P><PCLASS="para">The first few articles in this chapter,<ACLASS="xref"HREF="ch43_02.htm"TITLE="Introduction to Printing on UNIX ">43.2</A>,<ACLASS="xref"HREF="ch43_03.htm"TITLE="Printer Control with lpc ">43.3</A>,<ACLASS="xref"HREF="ch43_04.htm"TITLE="Using Different Printers ">43.4</A>,and <ACLASS="xref"HREF="ch43_05.htm"TITLE="Using Symbolic Links for Spooling ">43.5</A>,discuss the basic UNIX spooling system, and how to workwith it as a user.(We don't discuss the administrative aspects of spooling;that's a much more complicated topic, and not really appropriate forthis book.)Article<ACLASS="xref"HREF="ch43_06.htm"TITLE="Printing to a Terminal Printer ">43.6</A>shows one way to print to a terminal with its own printer.</P><PCLASS="para">The next few articles talk about how to format articles for printing&nbsp;- notthe kind of fancy formatting people think of nowadays, but simpler thingslike pagination, margins, and so on, for text files that are to be sent tothe line printer. Articles<ACLASS="xref"HREF="ch43_07.htm"TITLE="Quick-and-Dirty Formatting Before Printing ">43.7</A>through<ACLASS="xref"HREF="ch43_10.htm"TITLE="Filename Headers Above Files Without pr ">43.10</A>describe this kind of simple formatting.</P><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-47385"></A><ACLASS="indexterm"NAME="AUTOID-47388"></A><ACLASS="indexterm"NAME="AUTOID-47391"></A><ACLASS="indexterm"NAME="AUTOID-47393"></A>Historical note number two: why is the print spooler called <EMCLASS="emphasis">lp</EM> or<EMCLASS="emphasis">lpr</EM>?Because it typically spooled text to a line printer, a fastprinter that used a wide head to print an entire line at a time.These printers are still common in data processing applications, and theycan really fly!</P><PCLASS="para">In the mid-'70s, lots of UNIX people got excited about typesetting.Some typesetters were available that could be connected to computers,most notably the C/A/T phototypesetter.Programs like <EMCLASS="emphasis">troff</EM> andTeX were developed to format texts for phototypesetters: lettingcomputer people think that, because they could produce fancy output,they actually had some sense of design.Most of them didn't; if yougo back to the early days of typesetting, or even of laser printers,you probably remember lots of incredibly ugly documents masqueradingas &quot;good designs.&quot;(Gothic fonts on a dot matrix printer?Get real.)But that's another story.Tools like <EMCLASS="emphasis">troff</EM>,<EMCLASS="emphasis">nroff</EM> (a <EMCLASS="emphasis">troff</EM> equivalent that produces output for astandard terminal), and TeX are still with us, and still veryvaluable.They're discussed in articles<ACLASS="xref"HREF="ch43_12.htm"TITLE="Typesetting Overview ">43.12</A>through<ACLASS="xref"HREF="ch43_21.htm"TITLE="Preprocessing troff Input with sed ">43.21</A>.</P><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-47405"></A>Laser printers became commonplace in the mid-80s, allowing commonpeople to do high-quality printing: almost as good (but not quite) astrue typesetting.With laser printers came a widely used standardlanguage, called PostScript, to drive the printer.Tools like<EMCLASS="emphasis">troff</EM> and TeX now generated PostScript output files, which couldbe printed on any printer that understood the PostScript language.This was a big advantage: if you bought a new printer, you didn't haveto change your software; you could ship a PostScript filecross-country and be reasonably sure the recipient could print itcorrectly.[1]However, another problem appeared.PostScript is a complicatedlanguage; things that were easy with a simple text file were nowrather difficult.You can't just type up a letter and send it to your daisy wheel printer; you need to convert it into PostScript.It used to be easy to print &quot;just afew pages&quot; from the middle of a file, <EMCLASS="emphasis">grep</EM> through a file tofind something interesting, or to look at the file on yourscreen and read it.Not any more.We've ended this chapter with a few utilities forworking with PostScript files.Unfortunately, not enough; I playedwith lots of them, and while there were some winners, there were manymore losers: programs that worked sometimes but not most of the time.The winners are discussed in articles<ACLASS="xref"HREF="ch43_22.htm"TITLE="Converting Text Files to PostScript ">43.22</A>,<ACLASS="xref"HREF="ch43_23.htm"TITLE="psselect: Print Some Pages from a PostScript file">43.23</A>,and<ACLASS="xref"HREF="ch43_24.htm"TITLE="Other PostScript Utilities ">43.24</A>.</P><BLOCKQUOTECLASS="footnote"><PCLASS="para">[1] Documents were reasonably &quot;portable&quot; back in the line-printer era.Portability disappeared in the early days of computer typesetting, andonly reappeared when PostScript became the dominant page descriptionlanguage.[PostScript doesn't help someone who doesn't have the exact fontsused in the PostScript file&nbsp;- unless the person who created the fileincluded the fonts in it. <EMCLASS="emphasis">-JP</EM>&nbsp;]</P></BLOCKQUOTE><PCLASS="para">Finally, article<ACLASS="xref"HREF="ch43_25.htm"TITLE="The Portable Bitmap Package ">43.25</A>is about the <EMCLASS="emphasis">netpbm</EM> package.It's a useful tool for people who deal with graphics files.<EMCLASS="emphasis">netpbm</EM> converts between different graphics formats.<ACLASS="indexterm"NAME="AUTOID-47421"></A><ACLASS="indexterm"NAME="AUTOID-47422"></A></P><DIVCLASS="sect1info"><PCLASS="SECT1INFO">- <SPANCLASS="authorinitials">ML</SPAN></P></DIV></DIV></DIV><DIVCLASS="htmlnav"><P></P><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch42_08.htm"TITLE="42.8 Errors Erased Too Soon? Try These Workarounds "><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 42.8 Errors Erased Too Soon? Try These Workarounds "BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="book"HREF="index.htm"TITLE="UNIX Power Tools"><IMGSRC="../gifs/txthome.gif"ALT="UNIX Power Tools"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch43_02.htm"TITLE="43.2 Introduction to Printing on UNIX "><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 43.2 Introduction to Printing on UNIX "BORDER="0"></A></TD></TR><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172">42.8 Errors Erased Too Soon? Try These Workarounds </TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="index"HREF="index/idx_0.htm"TITLE="Book Index"><IMGSRC="../gifs/index.gif"ALT="Book Index"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172">43.2 Introduction to Printing on UNIX </TD></TR></TABLE><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><IMGSRC="../gifs/smnavbar.gif"USEMAP="#map"BORDER="0"ALT="The UNIX CD Bookshelf Navigation"><MAPNAME="map"><AREASHAPE="RECT"COORDS="0,0,73,21"HREF="../index.htm"ALT="The UNIX CD Bookshelf"><AREASHAPE="RECT"COORDS="74,0,163,21"HREF="index.htm"ALT="UNIX Power Tools"><AREASHAPE="RECT"COORDS="164,0,257,21"HREF="../unixnut/index.htm"ALT="UNIX in a Nutshell"><AREASHAPE="RECT"COORDS="258,0,321,21"HREF="../vi/index.htm"ALT="Learning the vi Editor"><AREASHAPE="RECT"COORDS="322,0,378,21"HREF="../sedawk/index.htm"ALT="sed &amp; awk"><AREASHAPE="RECT"COORDS="379,0,438,21"HREF="../ksh/index.htm"ALT="Learning the Korn Shell"><AREASHAPE="RECT"COORDS="439,0,514,21"HREF="../lrnunix/index.htm"ALT="Learning the UNIX Operating System"></MAP></DIV></BODY></HTML>