<HTML><HEAD><TITLE>[Chapter 43] 43.2 Introduction to Printing on UNIX </TITLE><METANAME="DC.title"CONTENT="UNIX Power Tools"><METANAME="DC.creator"CONTENT="Jerry Peek, Tim O'Reilly &amp; Mike Loukides"><METANAME="DC.publisher"CONTENT="O'Reilly &amp; Associates, Inc."><METANAME="DC.date"CONTENT="1998-10-23T15:51:42Z"><METANAME="DC.type"CONTENT="Text.Monograph"><METANAME="DC.format"CONTENT="text/html"SCHEME="MIME"><METANAME="DC.source"CONTENT="1-56592-260-3"SCHEME="ISBN"><METANAME="DC.language"CONTENT="en-US"><METANAME="generator"CONTENT="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><LINKREV="made"HREF="mailto:online-books@oreilly.com"TITLE="Online Books Comments"><LINKREL="up"HREF="ch43_01.htm"TITLE="43. Printing"><LINKREL="prev"HREF="ch43_01.htm"TITLE="43.1 Introduction to Printing "><LINKREL="next"HREF="ch43_03.htm"TITLE="43.3 Printer Control with lpc "></HEAD><BODYBGCOLOR="#FFFFFF"TEXT="#000000"><DIVCLASS="htmlnav"><H1><IMGSRC="gifs/smbanner.gif"ALT="UNIX Power Tools"USEMAP="#srchmap"BORDER="0"></H1><MAPNAME="srchmap"><AREASHAPE="RECT"COORDS="0,0,466,58"HREF="index.htm"ALT="UNIX Power Tools"><AREASHAPE="RECT"COORDS="467,0,514,18"HREF="../search/psrch.htm"ALT="Search this book"></MAP><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch43_01.htm"TITLE="43.1 Introduction to Printing "><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 43.1 Introduction to Printing "BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><B><FONTFACE="ARIEL,HELVETICA,HELV,SANSERIF"SIZE="-1">Chapter 43<BR>Printing</FONT></B></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch43_03.htm"TITLE="43.3 Printer Control with lpc "><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 43.3 Printer Control with lpc "BORDER="0"></A></TD></TR></TABLE>&nbsp;<HRALIGN="LEFT"WIDTH="515"TITLE="footer"></DIV><DIVCLASS="SECT1"><H2CLASS="sect1"><ACLASS="title"NAME="UPT-ART-2390">43.2 Introduction to Printing on UNIX </A></H2><PCLASS="para">Personal computers often have dedicated printers.A dedicated printer is connected to your machine and only you can use it.You can send it only one print job at a time and haveto wait until the printing finishes before you can go back to work.</P><PCLASS="para">UNIX uses a print spooler to allow many users to share a single printer.A user canmake a printing request at any time, even if the printer is currently busy.Requests are queued and processed in order as the printer becomes available.</P><PCLASS="para">UNIX permits multiple printers to be connected to the same system.If there is more than one printer, one printer is set up as the defaultprinter and print jobs are automatically sent there.</P><DIVCLASS="sect2"><H3CLASS="sect2"><ACLASS="title"NAME="UPT-ART-2390-SECT-1.1">43.2.1 System V Printing Commands </A></H3><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-47435"></A><ACLASS="indexterm"NAME="AUTOID-47439"></A><ACLASS="indexterm"NAME="AUTOID-47441"></A><ACLASS="indexterm"NAME="AUTOID-47443"></A><ACLASS="indexterm"NAME="AUTOID-47446"></A>In System V, the <EMCLASS="emphasis">lp</EM> command is used to queue a print job.(Berkeley systems' printer commands are explained below.)When you use <EMCLASS="emphasis">lp</EM>, it spools the file for printing and returns the requestid of your print job.The request id can later be used to cancel the print job, if youdecide to do so.</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">$ <CODECLASS="userinput"><B>lp notes</B></CODE>request-id is lp-2354 (1 file)</PRE></BLOCKQUOTE></P><PCLASS="para">The <EMCLASS="emphasis">lpstat</EM> command can be used to check on the status of your print jobs.The <EMCLASS="emphasis">lpstat</EM> command will tell whether your job is in the queue.</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">$ <CODECLASS="userinput"><B>lpstat</B></CODE>lp-2354          14519 fred     on lp</PRE></BLOCKQUOTE></P><PCLASS="para">The message <CODECLASS="literal">on lp</CODE> indicates that the job is currently printing.If your job does notappear at all on the listing, it means your job has finished printing.If the job is listed, but the <CODECLASS="literal">on lp</CODE> message does not appear, then thejob is still in the queue.You can see the status of all jobs in the queue with the <EMCLASS="emphasis">-u</EM> option.You can cancel a job with the <EMCLASS="emphasis">cancel</EM> command.</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">$ <CODECLASS="userinput"><B>lpstat -u</B></CODE>lp-2354          14519 fred     on lplp-2355          21321 alicelp-2356           9065 john$ <CODECLASS="userinput"><B>cancel lp-2356</B></CODE>lp-2356: cancelled</PRE></BLOCKQUOTE></P><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-47470"></A>The <EMCLASS="emphasis">lpstat</EM> command can be used to determine what printers areconnected to your system and their names.If there is more than one printer, you can then use the <EMCLASS="emphasis">-d</EM>option with <EMCLASS="emphasis">lp</EM> to specify a printer destinationother than the default.For instance,if a laser printer is configured as <EMCLASS="emphasis">laserp</EM>, then you can enter:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">$ <CODECLASS="userinput"><B>lp -dlaserp myfile</B></CODE></PRE></BLOCKQUOTE></P></DIV><DIVCLASS="sect2"><H3CLASS="sect2"><ACLASS="title"NAME="UPT-ART-2390-SECT-1.2">43.2.2 Berkeley Printing Commands </A></H3><PCLASS="para">BSD UNIX uses the <EMCLASS="emphasis">lpr</EM> command to queue a print job.<ACLASS="indexterm"NAME="AUTOID-47483"></A><ACLASS="indexterm"NAME="AUTOID-47485"></A><ACLASS="indexterm"NAME="AUTOID-47487"></A><ACLASS="indexterm"NAME="AUTOID-47490"></A><ACLASS="indexterm"NAME="AUTOID-47492"></A>When you use <EMCLASS="emphasis">lpr</EM>, it spools the file for printing.</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">$ <CODECLASS="userinput"><B>lpr notes</B></CODE></PRE></BLOCKQUOTE></P><PCLASS="para">Unlike System V <EMCLASS="emphasis">lp</EM>, the <EMCLASS="emphasis">lpr</EM> command doesn't print a request id.If you need to kill the job, use <EMCLASS="emphasis">lpq</EM> first.The <EMCLASS="emphasis">lpq</EM> command tells you the status of your print jobs.</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">$ <CODECLASS="userinput"><B>lpq</B></CODE>lp is ready and printingRank   Owner      Job  Files                Total Sizeactive fred       876  notes                7122 bytes1st    alice      877  standard input       28372 bytes2nd    john       878  afile bfile ...      985733 bytes</PRE></BLOCKQUOTE></P><PCLASS="para">The word <CODECLASS="literal">active</CODE> in the <CODECLASS="literal">Rank</CODE> column shows the job that'scurrently printing.If your job does notappear at all on the listing, it means your job has finished printing.If a job is not <EMCLASS="emphasis">active</EM>, it's still in the queue.</P><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-47512"></A>You can remove a job with the <EMCLASS="emphasis">lprm</EM> command.(First, run <EMCLASS="emphasis">lpq</EM> to get the job number.)</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">$ <CODECLASS="userinput"><B>lprm 877</B></CODE>dfA877<CODECLASS="replaceable"><I>host</I></CODE> dequeuedcfA877<CODECLASS="replaceable"><I>host</I></CODE> dequeued</PRE></BLOCKQUOTE></P><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-47522"></A>The command<SPANCLASS="link"><EMCLASS="emphasis">lpc status</EM> (<ACLASS="linkend"HREF="ch43_03.htm"TITLE="Printer Control with lpc ">43.3</A>)</SPAN>can be used to determine which printers areconnected to your system and their names.If there is more than one printer, you can then use the <EMCLASS="emphasis">-P</EM>option with <EMCLASS="emphasis">lpr</EM> to specify a printer destination other than the default.For instance,if a laser printer is configured as <EMCLASS="emphasis">laserp</EM>, then you can enter:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">$ <CODECLASS="userinput"><B>lpr -Plaserp myfile</B></CODE></PRE></BLOCKQUOTE></P><PCLASS="para">The <EMCLASS="emphasis">-P</EM> option also works with <EMCLASS="emphasis">lpq</EM> and <EMCLASS="emphasis">lprm</EM>.If you'll be using a certain printer often, put its name in the<SPANCLASS="link"><EMCLASS="emphasis">PRINTER</EM> environment variable (<ACLASS="linkend"HREF="ch43_04.htm"TITLE="Using Different Printers ">43.4</A>)</SPAN>.</P></DIV><DIVCLASS="sect1info"><PCLASS="SECT1INFO">- <SPANCLASS="authorinitials">DD</SPAN>, <SPANCLASS="authorinitials">TOR</SPAN>, <SPANCLASS="authorinitials">JP</SPAN></P></DIV></DIV><DIVCLASS="htmlnav"><P></P><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch43_01.htm"TITLE="43.1 Introduction to Printing "><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 43.1 Introduction to Printing "BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="book"HREF="index.htm"TITLE="UNIX Power Tools"><IMGSRC="../gifs/txthome.gif"ALT="UNIX Power Tools"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch43_03.htm"TITLE="43.3 Printer Control with lpc "><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 43.3 Printer Control with lpc "BORDER="0"></A></TD></TR><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172">43.1 Introduction to Printing </TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="index"HREF="index/idx_0.htm"TITLE="Book Index"><IMGSRC="../gifs/index.gif"ALT="Book Index"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172">43.3 Printer Control with lpc </TD></TR></TABLE><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><IMGSRC="../gifs/smnavbar.gif"USEMAP="#map"BORDER="0"ALT="The UNIX CD Bookshelf Navigation"><MAPNAME="map"><AREASHAPE="RECT"COORDS="0,0,73,21"HREF="../index.htm"ALT="The UNIX CD Bookshelf"><AREASHAPE="RECT"COORDS="74,0,163,21"HREF="index.htm"ALT="UNIX Power Tools"><AREASHAPE="RECT"COORDS="164,0,257,21"HREF="../unixnut/index.htm"ALT="UNIX in a Nutshell"><AREASHAPE="RECT"COORDS="258,0,321,21"HREF="../vi/index.htm"ALT="Learning the vi Editor"><AREASHAPE="RECT"COORDS="322,0,378,21"HREF="../sedawk/index.htm"ALT="sed &amp; awk"><AREASHAPE="RECT"COORDS="379,0,438,21"HREF="../ksh/index.htm"ALT="Learning the Korn Shell"><AREASHAPE="RECT"COORDS="439,0,514,21"HREF="../lrnunix/index.htm"ALT="Learning the UNIX Operating System"></MAP></DIV></BODY></HTML>