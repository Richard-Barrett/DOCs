<HTML><HEAD><TITLE>[Chapter 43] 43.19 Removing Leading Tabs and Other Trivia </TITLE><METANAME="DC.title"CONTENT="UNIX Power Tools"><METANAME="DC.creator"CONTENT="Jerry Peek, Tim O'Reilly &amp; Mike Loukides"><METANAME="DC.publisher"CONTENT="O'Reilly &amp; Associates, Inc."><METANAME="DC.date"CONTENT="1998-10-23T15:52:03Z"><METANAME="DC.type"CONTENT="Text.Monograph"><METANAME="DC.format"CONTENT="text/html"SCHEME="MIME"><METANAME="DC.source"CONTENT="1-56592-260-3"SCHEME="ISBN"><METANAME="DC.language"CONTENT="en-US"><METANAME="generator"CONTENT="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><LINKREV="made"HREF="mailto:online-books@oreilly.com"TITLE="Online Books Comments"><LINKREL="up"HREF="ch43_01.htm"TITLE="43. Printing"><LINKREL="prev"HREF="ch43_18.htm"TITLE="43.18 How nroff Makes Bold and Underline; How to Remove It"><LINKREL="next"HREF="ch43_20.htm"TITLE="43.20 Displaying a troff Macro Definition "></HEAD><BODYBGCOLOR="#FFFFFF"TEXT="#000000"><DIVCLASS="htmlnav"><H1><IMGSRC="gifs/smbanner.gif"ALT="UNIX Power Tools"USEMAP="#srchmap"BORDER="0"></H1><MAPNAME="srchmap"><AREASHAPE="RECT"COORDS="0,0,466,58"HREF="index.htm"ALT="UNIX Power Tools"><AREASHAPE="RECT"COORDS="467,0,514,18"HREF="../search/psrch.htm"ALT="Search this book"></MAP><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch43_18.htm"TITLE="43.18 How nroff Makes Bold and Underline; How to Remove It"><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 43.18 How nroff Makes Bold and Underline; How to Remove It"BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><B><FONTFACE="ARIEL,HELVETICA,HELV,SANSERIF"SIZE="-1">Chapter 43<BR>Printing</FONT></B></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch43_20.htm"TITLE="43.20 Displaying a troff Macro Definition "><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 43.20 Displaying a troff Macro Definition "BORDER="0"></A></TD></TR></TABLE>&nbsp;<HRALIGN="LEFT"WIDTH="515"TITLE="footer"></DIV><DIVCLASS="SECT1"><H2CLASS="sect1"><ACLASS="title"NAME="UPT-ART-2432">43.19 Removing Leading Tabs and Other Trivia </A></H2><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-48655"></A><ACLASS="indexterm"NAME="AUTOID-48658"></A><ACLASS="indexterm"NAME="AUTOID-48661"></A>In article <ACLASS="xref"HREF="ch43_18.htm"TITLE="How nroff Makes Bold and Underline; How to Remove It">43.18</A>we discussed several techniques for removing overstriking andunderlining from <EMCLASS="emphasis">nroff</EM> output.Of course, that's not the onlyproblem you'll face when you're working with <EMCLASS="emphasis">nroff</EM>.Here aresome more postprocessing tricks for <EMCLASS="emphasis">nroff</EM> files.</P><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-48669"></A>You may also want to remove strange escape sequences thatproduce formfeeds or various other printer functions.For example,you sometimes see the sequence<CODECLASS="literal">^[9</CODE> at the top of the formatted manual page.This escape sequence can be removed with the <EMCLASS="emphasis">sed</EM> command:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">s/^[9//g</PRE></BLOCKQUOTE></P><PCLASS="para">The ESC character is entered in <EMCLASS="emphasis">vi</EM> by typing <SPANCLASS="link">CTRL-v (<ACLASS="linkend"HREF="ch31_06.htm"TITLE="Protecting Keys from Interpretation by ex ">31.6</A>)</SPAN>followed by theESCkey.In Emacs, use<SPANCLASS="link">CTRL-q&nbsp;ESC (<ACLASS="linkend"HREF="ch32_10.htm"TITLE="Inserting Binary Characters into Files ">32.10</A>)</SPAN>.The number 9 is literal.</P><PCLASS="para">The typical manual page also uses leading spaces to establish theleft margin and to indent most of the text.On further inspection, you'll see that leading spaces precede headings (such as &quot;NAME&quot;), buta single tab precedes each line of text.Tabs may also appear unexpectedly in the text.Of course, using TABswherever possible is a good idea on the whole; on a mechanicalprinter, and even on modern CRT displays, it's much quicker to print aTAB than to move the cursor over several spaces.However, the TABs can cause trouble if your printer (or terminal) isn'tset correctly, or when you're trying to search for something in the text.</P><PCLASS="para">To eliminate the left margin and the unwanted TABs, use the followingtwo <EMCLASS="emphasis">sed</EM> commands:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">s/^[ <KBDCLASS="keycap">[TAB]</KBD>]*//s/<KBDCLASS="keycap">[TAB]</KBD>/ /g</PRE></BLOCKQUOTE></P><PCLASS="para">The first command looks for any number of TABs or spacesat the beginning of a line.The second command looks for a tab and replaces it with a singlespace.</P><PCLASS="para">Now, let's put all these pieces together&nbsp;- including the script tostrip underlines and overstrikes (from article<ACLASS="xref"HREF="ch43_18.htm"TITLE="How nroff Makes Bold and Underline; How to Remove It">43.18</A>).Here's a script called <EMCLASS="emphasis">sedman</EM> that incorporates all of thesetricks.</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">&#13;#!/bin/sed -f#sedman - deformat nroff-formatted man pages/.^H//gs/^[9//gs/^[ <KBDCLASS="keycap">[TAB]</KBD>]*//s/<KBDCLASS="keycap">[TAB]</KBD>/ /g</PRE></BLOCKQUOTE></P><PCLASS="para">Running this script on a typical manual pageproduces a file that looks like this:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">who                                                     whoNAMEwho - who is on the system?SYNOPSISwho [-a] [-b] [-d] [-H] [-l] [-p] [-q] [-r] [-s] [-t] [-T][-u] [file]who am iDESCRIPTIONwho can list the user's name, terminal line, login time,elapsed time since activity occurred on the line, and the...</PRE></BLOCKQUOTE></P><PCLASS="para">This doesn'teliminate the unnecessary blank linescaused by paging.See articles<ACLASS="xref"HREF="ch34_18.htm"TITLE="Multiline Delete ">34.18</A>,<ACLASS="xref"HREF="ch25_11.htm"TITLE="crush: A cat that Skips all Blank Lines ">25.11</A>,and<ACLASS="xref"HREF="ch25_10.htm"TITLE="Squash Extra Blank Lines ">25.10</A>for help with that.</P><DIVCLASS="sect1info"><PCLASS="SECT1INFO">- <SPANCLASS="authorinitials">DD</SPAN>, <SPANCLASS="authorinitials">ML</SPAN></P></DIV></DIV><DIVCLASS="htmlnav"><P></P><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch43_18.htm"TITLE="43.18 How nroff Makes Bold and Underline; How to Remove It"><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 43.18 How nroff Makes Bold and Underline; How to Remove It"BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="book"HREF="index.htm"TITLE="UNIX Power Tools"><IMGSRC="../gifs/txthome.gif"ALT="UNIX Power Tools"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch43_20.htm"TITLE="43.20 Displaying a troff Macro Definition "><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 43.20 Displaying a troff Macro Definition "BORDER="0"></A></TD></TR><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172">43.18 How nroff Makes Bold and Underline; How to Remove It</TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="index"HREF="index/idx_0.htm"TITLE="Book Index"><IMGSRC="../gifs/index.gif"ALT="Book Index"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172">43.20 Displaying a troff Macro Definition </TD></TR></TABLE><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><IMGSRC="../gifs/smnavbar.gif"USEMAP="#map"BORDER="0"ALT="The UNIX CD Bookshelf Navigation"><MAPNAME="map"><AREASHAPE="RECT"COORDS="0,0,73,21"HREF="../index.htm"ALT="The UNIX CD Bookshelf"><AREASHAPE="RECT"COORDS="74,0,163,21"HREF="index.htm"ALT="UNIX Power Tools"><AREASHAPE="RECT"COORDS="164,0,257,21"HREF="../unixnut/index.htm"ALT="UNIX in a Nutshell"><AREASHAPE="RECT"COORDS="258,0,321,21"HREF="../vi/index.htm"ALT="Learning the vi Editor"><AREASHAPE="RECT"COORDS="322,0,378,21"HREF="../sedawk/index.htm"ALT="sed &amp; awk"><AREASHAPE="RECT"COORDS="379,0,438,21"HREF="../ksh/index.htm"ALT="Learning the Korn Shell"><AREASHAPE="RECT"COORDS="439,0,514,21"HREF="../lrnunix/index.htm"ALT="Learning the UNIX Operating System"></MAP></DIV></BODY></HTML>