<HTML><HEAD><TITLE>[Chapter 44] 44.5 Test String Values with Bourne Shell case </TITLE><METANAME="DC.title"CONTENT="UNIX Power Tools"><METANAME="DC.creator"CONTENT="Jerry Peek, Tim O'Reilly &amp; Mike Loukides"><METANAME="DC.publisher"CONTENT="O'Reilly &amp; Associates, Inc."><METANAME="DC.date"CONTENT="1998-08-04T21:53:35Z"><METANAME="DC.type"CONTENT="Text.Monograph"><METANAME="DC.format"CONTENT="text/html"SCHEME="MIME"><METANAME="DC.source"CONTENT="1-56592-260-3"SCHEME="ISBN"><METANAME="DC.language"CONTENT="en-US"><METANAME="generator"CONTENT="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><LINKREV="made"HREF="mailto:online-books@oreilly.com"TITLE="Online Books Comments"><LINKREL="up"HREF="ch44_01.htm"TITLE="44. Shell Programming for the Uninitiated"><LINKREL="prev"HREF="ch44_04.htm"TITLE="44.4 Testing How Your System Executes Files "><LINKREL="next"HREF="ch44_06.htm"TITLE="44.6 Pattern Matching in case Statements "></HEAD><BODYBGCOLOR="#FFFFFF"TEXT="#000000"><DIVCLASS="htmlnav"><H1><IMGSRC="gifs/smbanner.gif"ALT="UNIX Power Tools"USEMAP="#srchmap"BORDER="0"></H1><MAPNAME="srchmap"><AREASHAPE="RECT"COORDS="0,0,466,58"HREF="index.htm"ALT="UNIX Power Tools"><AREASHAPE="RECT"COORDS="467,0,514,18"HREF="../search/psrch.htm"ALT="Search this book"></MAP><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch44_04.htm"TITLE="44.4 Testing How Your System Executes Files "><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 44.4 Testing How Your System Executes Files "BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><B><FONTFACE="ARIEL,HELVETICA,HELV,SANSERIF"SIZE="-1">Chapter 44<BR>Shell Programming for the Uninitiated</FONT></B></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch44_06.htm"TITLE="44.6 Pattern Matching in case Statements "><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 44.6 Pattern Matching in case Statements "BORDER="0"></A></TD></TR></TABLE>&nbsp;<HRALIGN="LEFT"WIDTH="515"TITLE="footer"></DIV><DIVCLASS="SECT1"><H2CLASS="sect1"><ACLASS="title"NAME="UPT-ART-7090">44.5 Test String Values with Bourne Shell case </A></H2><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-50410"></A><ACLASS="indexterm"NAME="AUTOID-50413"></A><ACLASS="indexterm"NAME="AUTOID-50416"></A><ACLASS="indexterm"NAME="AUTOID-50418"></A><ACLASS="indexterm"NAME="AUTOID-50421"></A><ACLASS="indexterm"NAME="AUTOID-50424"></A><ACLASS="indexterm"NAME="AUTOID-50427"></A><ACLASS="indexterm"NAME="AUTOID-50430"></A><ACLASS="indexterm"NAME="AUTOID-50433"></A><ACLASS="indexterm"NAME="AUTOID-50436"></A><ACLASS="indexterm"NAME="AUTOID-50439"></A>Each time you type a command line at a shell prompt, you can see whathappens and decide what command to run next.But a shell script needs to make decisions like that itself.A <EMCLASS="emphasis">case</EM> statement helps the script make decisions.A <EMCLASS="emphasis">case</EM> statement compares a string (usually taken from a<SPANCLASS="link">shell or environment variable (<ACLASS="linkend"HREF="ch06_08.htm"TITLE="Shell Variables ">6.8</A>, <ACLASS="linkend"HREF="ch06_01.htm#UPT-ART-1170"TITLE="What Environment Variables Are Good For ">6.1</A>)</SPAN>)to one or more patterns.The patterns can be simple strings (words, digits, etc.) or they can be<SPANCLASS="link"><EMCLASS="emphasis">case</EM> wildcard expressions (<ACLASS="linkend"HREF="ch44_06.htm"TITLE="Pattern Matching in case Statements ">44.6</A>)</SPAN>.When the <EMCLASS="emphasis">case</EM> finds a pattern that matches the string, it executes oneor more commands.</P><PCLASS="para">Here's an example.It tests your<SPANCLASS="link"><EMCLASS="emphasis">TERM</EM> (<ACLASS="linkend"HREF="ch05_10.htm"TITLE="Finding What Terminal Names You Can Use ">5.10</A>)</SPAN>environment variable.If you're using a vt100 or tk4023 terminal, it runs a commandto send some characters to your terminal.If you aren't on either of those, it prints an error and quits:</P><PCLASS="para"><TABLECLASS="screen.co"BORDER="1"><TR><THVALIGN="TOP"><PRECLASS="calloutlist">&#13;<ACLASS="co"HREF="ch45_35.htm"TITLE="45.35 Using a Control Character in a Script ">echo...\027'</A> <ACLASS="co"HREF="ch08_06.htm"TITLE="8.6 Output Command-Line Arguments ">1&gt;&amp;2</A> <ACLASS="co"HREF="ch44_11.htm"TITLE="44.11 Set Exit Status of a Shell (Script) ">exit</A> &#13;</PRE></TH><TDVALIGN="TOP"><PRECLASS="screen">case &quot;$TERM&quot; invt100)   echo 'ea[w' | tr 'eaw' '\033\001\027' ;;tk4023)  echo &quot;*[p23&quot; ;;*)  # Not a VT100 or tk4023.  Print error message:    echo &quot;progname: quitting: you aren't on a VT100 or tk4023.&quot; 1&gt;&amp;2    exit    ;;esac</PRE></TD></TR></TABLE></P><PCLASS="para">Here are more details about how this works.The statement compares the string between the words<CODECLASS="literal">case</CODE> and <CODECLASS="literal">in</CODE> to the strings at the left-hand edge of thelines ending with a <CODECLASS="literal">)</CODE> (right parenthesis) character.If it matches the first case (in this example, if it's the <CODECLASS="literal">vt100</CODE>),the command up to the <CODECLASS="literal">;;</CODE> is executed.The <CODECLASS="literal">;;</CODE> means &quot;jump to the <CODECLASS="literal">esac</CODE>&quot; (<EMCLASS="emphasis">esac</EM> is &quot;case&quot;spelled backwards).You can put as many commands as you want before each <CODECLASS="literal">;;</CODE>, butput each command on a separate line (or separate commands on a line with<SPANCLASS="link">semicolons (<ACLASS="linkend"HREF="ch08_05.htm"TITLE="Command-Line Evaluation ">8.5</A>)</SPAN>).</P><PCLASS="para">If the first pattern doesn't match, the shell tries the nextcase&nbsp;- here, <EMCLASS="emphasis">tk4023</EM>.As above, a match runs the command and jumps to the <EMCLASS="emphasis">esac</EM>.No match?The next pattern is the wildcard <CODECLASS="literal">*</CODE>.It matches any answer other than <EMCLASS="emphasis">vt100</EM> or <EMCLASS="emphasis">tk4023</EM>(such as <EMCLASS="emphasis">xterm</EM> or an empty string).</P><PCLASS="para">You can use as many patterns as you want to.The first one that matches is used.It's okay if none of them match.The style doesn't matter much.Pick one that's readable and be consistent.</P><DIVCLASS="sect1info"><PCLASS="SECT1INFO">- <SPANCLASS="authorinitials">JP</SPAN></P></DIV></DIV><DIVCLASS="htmlnav"><P></P><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch44_04.htm"TITLE="44.4 Testing How Your System Executes Files "><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 44.4 Testing How Your System Executes Files "BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="book"HREF="index.htm"TITLE="UNIX Power Tools"><IMGSRC="../gifs/txthome.gif"ALT="UNIX Power Tools"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch44_06.htm"TITLE="44.6 Pattern Matching in case Statements "><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 44.6 Pattern Matching in case Statements "BORDER="0"></A></TD></TR><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172">44.4 Testing How Your System Executes Files </TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="index"HREF="index/idx_0.htm"TITLE="Book Index"><IMGSRC="../gifs/index.gif"ALT="Book Index"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172">44.6 Pattern Matching in case Statements </TD></TR></TABLE><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><IMGSRC="../gifs/smnavbar.gif"USEMAP="#map"BORDER="0"ALT="The UNIX CD Bookshelf Navigation"><MAPNAME="map"><AREASHAPE="RECT"COORDS="0,0,73,21"HREF="../index.htm"ALT="The UNIX CD Bookshelf"><AREASHAPE="RECT"COORDS="74,0,163,21"HREF="index.htm"ALT="UNIX Power Tools"><AREASHAPE="RECT"COORDS="164,0,257,21"HREF="../unixnut/index.htm"ALT="UNIX in a Nutshell"><AREASHAPE="RECT"COORDS="258,0,321,21"HREF="../vi/index.htm"ALT="Learning the vi Editor"><AREASHAPE="RECT"COORDS="322,0,378,21"HREF="../sedawk/index.htm"ALT="sed &amp; awk"><AREASHAPE="RECT"COORDS="379,0,438,21"HREF="../ksh/index.htm"ALT="Learning the Korn Shell"><AREASHAPE="RECT"COORDS="439,0,514,21"HREF="../lrnunix/index.htm"ALT="Learning the UNIX Operating System"></MAP></DIV></BODY></HTML>