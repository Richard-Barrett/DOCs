<HTML><HEAD><TITLE>[Chapter 45] 45.2 The Story of  : #  #! </TITLE><METANAME="DC.title"CONTENT="UNIX Power Tools"><METANAME="DC.creator"CONTENT="Jerry Peek, Tim O'Reilly &amp; Mike Loukides"><METANAME="DC.publisher"CONTENT="O'Reilly &amp; Associates, Inc."><METANAME="DC.date"CONTENT="1998-08-04T21:54:20Z"><METANAME="DC.type"CONTENT="Text.Monograph"><METANAME="DC.format"CONTENT="text/html"SCHEME="MIME"><METANAME="DC.source"CONTENT="1-56592-260-3"SCHEME="ISBN"><METANAME="DC.language"CONTENT="en-US"><METANAME="generator"CONTENT="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><LINKREV="made"HREF="mailto:online-books@oreilly.com"TITLE="Online Books Comments"><LINKREL="up"HREF="ch45_01.htm"TITLE="45. Shell Programming for the Initiated"><LINKREL="prev"HREF="ch45_01.htm"TITLE="45.1 Beyond the Basics "><LINKREL="next"HREF="ch45_03.htm"TITLE="45.3 Don't Need a Shell for Your Script?  Don't Use One "></HEAD><BODYBGCOLOR="#FFFFFF"TEXT="#000000"><DIVCLASS="htmlnav"><H1><IMGSRC="gifs/smbanner.gif"ALT="UNIX Power Tools"USEMAP="#srchmap"BORDER="0"></H1><MAPNAME="srchmap"><AREASHAPE="RECT"COORDS="0,0,466,58"HREF="index.htm"ALT="UNIX Power Tools"><AREASHAPE="RECT"COORDS="467,0,514,18"HREF="../search/psrch.htm"ALT="Search this book"></MAP><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch45_01.htm"TITLE="45.1 Beyond the Basics "><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 45.1 Beyond the Basics "BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><B><FONTFACE="ARIEL,HELVETICA,HELV,SANSERIF"SIZE="-1">Chapter 45<BR>Shell Programming for the Initiated</FONT></B></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch45_03.htm"TITLE="45.3 Don't Need a Shell for Your Script?  Don't Use One "><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 45.3 Don't Need a Shell for Your Script?  Don't Use One "BORDER="0"></A></TD></TR></TABLE>&nbsp;<HRALIGN="LEFT"WIDTH="515"TITLE="footer"></DIV><DIVCLASS="SECT1"><H2CLASS="sect1"><ACLASS="title"NAME="UPT-ART-0375">45.2 The Story of  : #  #! </A></H2><PCLASS="para">Once upon a time, there was the Bourne shell. Since there was only &quot;the&quot;shell, there was no trouble deciding how to run a script: run itwith <EMCLASS="emphasis">the</EM> shell. It worked, and everyone was happy.</P><PCLASS="para">Along came progress, and wrote another shell. The people thoughtthis was good, for now they could choose their own shell. So somechose the one, and some the other, and they wrote shell scripts andwere happy. But one day someone who used the &quot;other&quot; shell rana script by someone who used the &quot;other other&quot; shell, and alas! itbombed spectacularly. The people wailed and called upon theirGuru for help.</P><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-52239"></A><ACLASS="indexterm"NAME="AUTOID-52242"></A><ACLASS="indexterm"NAME="AUTOID-52245"></A><ACLASS="indexterm"NAME="AUTOID-52248"></A>&quot;Well,&quot; said the Guru, &quot;I see the problem. The one shell and theother are not compatible. We need to make sure that the shells knowwhich other shell to use to run each script. And lo! the one shellhas a `comment' called <CODECLASS="literal">:</CODE>, and the other a true comment called<CODECLASS="literal">#</CODE>. I hereby decree that henceforth, the one shell will runscripts that start with <CODECLASS="literal">:</CODE>, and the other those that start with<CODECLASS="literal">#</CODE>.&quot; And it was so, and the people were happy.</P><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-52256"></A><ACLASS="indexterm"NAME="AUTOID-52259"></A>But progress was not finished. This time he noticed that onlyshells ran scripts, and thought that if the kernel too could runscripts, that this would be good, and the people would be happy.So he wrote more code, and now the kernel could run scripts,but only if they began with the magic incantation: <CODECLASS="literal">#!</CODE>, andtold the kernel which shell ran the script. And it was so, andthe people were confused.</P><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-52264"></A>For the <CODECLASS="literal">#!</CODE> looked like a &quot;comment.&quot; Though the kernel could seethe <CODECLASS="literal">#!</CODE> and run a shell, it would not do so unless certain magicbits were set. And if the incantation were mispronounced, thattoo could stop the kernel, which, after all, was not omniscient.And so the people wailed, but alas!, the Guru did not respond.And so it was, and still it is today.Anyway, you will get best results from a 4BSD machine by using</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">#! /bin/sh</PRE></BLOCKQUOTE></P><PCLASS="para">or</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">#! /bin/csh</PRE></BLOCKQUOTE></P><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-52275"></A><ACLASS="indexterm"NAME="AUTOID-52278"></A><ACLASS="indexterm"NAME="AUTOID-52281"></A>as the first line of your script.<CODECLASS="literal">#!</CODE>&nbsp;<CODECLASS="literal">/bin/csh&nbsp;-f</CODE> is also helpfulon occasion [it's usually faster because <EMCLASS="emphasis">csh</EM> won't read your<SPANCLASS="link"><EMCLASS="emphasis">.cshrc</EM> file (<ACLASS="linkend"HREF="ch02_02.htm"TITLE="Shell Setup Files-Which, Where, and Why ">2.2</A>)</SPAN>. <EMCLASS="emphasis">-JP</EM>&nbsp;].</P><DIVCLASS="sect1info"><PCLASS="SECT1INFO">- <SPANCLASS="authorinitials">CT</SPAN></P></DIV></DIV><DIVCLASS="htmlnav"><P></P><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch45_01.htm"TITLE="45.1 Beyond the Basics "><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 45.1 Beyond the Basics "BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="book"HREF="index.htm"TITLE="UNIX Power Tools"><IMGSRC="../gifs/txthome.gif"ALT="UNIX Power Tools"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch45_03.htm"TITLE="45.3 Don't Need a Shell for Your Script?  Don't Use One "><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 45.3 Don't Need a Shell for Your Script?  Don't Use One "BORDER="0"></A></TD></TR><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172">45.1 Beyond the Basics </TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="index"HREF="index/idx_0.htm"TITLE="Book Index"><IMGSRC="../gifs/index.gif"ALT="Book Index"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172">45.3 Don't Need a Shell for Your Script?  Don't Use One </TD></TR></TABLE><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><IMGSRC="../gifs/smnavbar.gif"USEMAP="#map"BORDER="0"ALT="The UNIX CD Bookshelf Navigation"><MAPNAME="map"><AREASHAPE="RECT"COORDS="0,0,73,21"HREF="../index.htm"ALT="The UNIX CD Bookshelf"><AREASHAPE="RECT"COORDS="74,0,163,21"HREF="index.htm"ALT="UNIX Power Tools"><AREASHAPE="RECT"COORDS="164,0,257,21"HREF="../unixnut/index.htm"ALT="UNIX in a Nutshell"><AREASHAPE="RECT"COORDS="258,0,321,21"HREF="../vi/index.htm"ALT="Learning the vi Editor"><AREASHAPE="RECT"COORDS="322,0,378,21"HREF="../sedawk/index.htm"ALT="sed &amp; awk"><AREASHAPE="RECT"COORDS="379,0,438,21"HREF="../ksh/index.htm"ALT="Learning the Korn Shell"><AREASHAPE="RECT"COORDS="439,0,514,21"HREF="../lrnunix/index.htm"ALT="Learning the UNIX Operating System"></MAP></DIV></BODY></HTML>