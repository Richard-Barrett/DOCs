<HTML><HEAD><TITLE>[Chapter 45] 45.13 Save Disk Space and Programming: Multiple Names for a Program</TITLE><METANAME="DC.title"CONTENT="UNIX Power Tools"><METANAME="DC.creator"CONTENT="Jerry Peek, Tim O'Reilly &amp; Mike Loukides"><METANAME="DC.publisher"CONTENT="O'Reilly &amp; Associates, Inc."><METANAME="DC.date"CONTENT="1998-08-04T21:54:36Z"><METANAME="DC.type"CONTENT="Text.Monograph"><METANAME="DC.format"CONTENT="text/html"SCHEME="MIME"><METANAME="DC.source"CONTENT="1-56592-260-3"SCHEME="ISBN"><METANAME="DC.language"CONTENT="en-US"><METANAME="generator"CONTENT="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><LINKREV="made"HREF="mailto:online-books@oreilly.com"TITLE="Online Books Comments"><LINKREL="up"HREF="ch45_01.htm"TITLE="45. Shell Programming for the Initiated"><LINKREL="prev"HREF="ch45_12.htm"TITLE="45.12 Parameter Substitution "><LINKREL="next"HREF="ch45_14.htm"TITLE="45.14 Finding the Last Command-Line Argument "></HEAD><BODYBGCOLOR="#FFFFFF"TEXT="#000000"><DIVCLASS="htmlnav"><H1><IMGSRC="gifs/smbanner.gif"ALT="UNIX Power Tools"USEMAP="#srchmap"BORDER="0"></H1><MAPNAME="srchmap"><AREASHAPE="RECT"COORDS="0,0,466,58"HREF="index.htm"ALT="UNIX Power Tools"><AREASHAPE="RECT"COORDS="467,0,514,18"HREF="../search/psrch.htm"ALT="Search this book"></MAP><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch45_12.htm"TITLE="45.12 Parameter Substitution "><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 45.12 Parameter Substitution "BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><B><FONTFACE="ARIEL,HELVETICA,HELV,SANSERIF"SIZE="-1">Chapter 45<BR>Shell Programming for the Initiated</FONT></B></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch45_14.htm"TITLE="45.14 Finding the Last Command-Line Argument "><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 45.14 Finding the Last Command-Line Argument "BORDER="0"></A></TD></TR></TABLE>&nbsp;<HRALIGN="LEFT"WIDTH="515"TITLE="footer"></DIV><DIVCLASS="SECT1"><H2CLASS="sect1"><ACLASS="title"NAME="UPT-ART-6190">45.13 Save Disk Space and Programming: Multiple Names for a Program</A></H2><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-53166"></A><ACLASS="indexterm"NAME="AUTOID-53169"></A><ACLASS="indexterm"NAME="AUTOID-53172"></A><ACLASS="indexterm"NAME="AUTOID-53175"></A><ACLASS="indexterm"NAME="AUTOID-53178"></A><ACLASS="indexterm"NAME="AUTOID-53181"></A>If you're writing:</P><ULCLASS="itemizedlist"><LICLASS="listitem"><PCLASS="para">several programs that do the same kinds of things,</P></LI><LICLASS="listitem"><PCLASS="para">programs that use a lot of the same code (as you're writing the second,third, etc., programs, you copy a lot of lines from the first program), or</P></LI><LICLASS="listitem"><PCLASS="para">a program with several options that make a big change in the way it works,</P></LI></UL><PCLASS="para">you might want to write just one program and make<SPANCLASS="link">links (<ACLASS="linkend"HREF="ch18_04.htm"TITLE="More About Links ">18.4</A>, <ACLASS="linkend"HREF="ch18_03.htm"TITLE="Files with Two or More Names">18.3</A>)</SPAN>to it instead.The program can find the name you called it with and, through <EMCLASS="emphasis">case</EM> or<EMCLASS="emphasis">test</EM> commands, work in different ways.For instance, the Berkeley UNIX commands <EMCLASS="emphasis">ex</EM>, <EMCLASS="emphasis">vi</EM>, <EMCLASS="emphasis">view</EM>,<EMCLASS="emphasis">edit</EM>, and others are all links to the same executable file.This takes less disk space and makes maintenance easier.It's usually only sensible when most of the code is the same in eachprogram.If the program is full of name tests and lots of separate code,this technique may be more trouble than it's worth.</P><PCLASS="para">Depending on how the script program is called, this name can bea simplerelative pathname like <CODECLASS="literal">prog</CODE> or <CODECLASS="literal">./prog</CODE>-it can also be anabsolute pathname like <CODECLASS="literal">/usr/joe/bin/prog</CODE>(article<ACLASS="xref"HREF="ch14_02.htm"TITLE="Using Relative and Absolute Pathnames ">14.2</A>explains pathnames).There are a couple of ways to handle this in a shell script.If there's just one main piece of code in the script, as in the<SPANCLASS="link"><EMCLASS="emphasis">lf</EM> script (<ACLASS="linkend"HREF="ch16_07.htm"TITLE="ls Shortcuts: ll, lf, lg, etc. ">16.7</A>)</SPAN>,a <EMCLASS="emphasis">case</EM> that tests <CODECLASS="literal">$0</CODE> might be best.The asterisk (<CODECLASS="literal">*</CODE>) wildcard at the start of each case(see article<ACLASS="xref"HREF="ch44_06.htm"TITLE="Pattern Matching in case Statements ">44.6</A>)handles thedifferent pathnames that might be used to call the script:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">case &quot;$0&quot; in*<CODECLASS="replaceable"><I>name1</I></CODE>)    <ICLASS="lineannotation">...do this when called as name1...</I>    ;;*<CODECLASS="replaceable"><I>name2</I></CODE>)    <ICLASS="lineannotation">...do this when called as name2...</I>    ;;    ...*)  <ICLASS="lineannotation">...print error and exit if $0 doesn't match...</I>    ;;esac</PRE></BLOCKQUOTE></P><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-53218"></A>You might also want to use<SPANCLASS="link"><EMCLASS="emphasis">basename</EM> (<ACLASS="linkend"HREF="ch45_18.htm"TITLE="Using basename and dirname ">45.18</A>)</SPAN>to strip off any leading pathname and store the cleaned-up <CODECLASS="literal">$0</CODE> in avariable called <EMCLASS="emphasis">myname</EM>.You can test <CODECLASS="literal">$myname</CODE> anywhere in the script and also use it for errormessages:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">myname=`basename $0`   ...case &quot;$myname&quot; in   ...echo &quot;$myname: aborting; error in xxxxxx&quot; 1&gt;&amp;2   ...</PRE></BLOCKQUOTE></P><DIVCLASS="sect1info"><PCLASS="SECT1INFO">- <SPANCLASS="authorinitials">JP</SPAN></P></DIV></DIV><DIVCLASS="htmlnav"><P></P><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch45_12.htm"TITLE="45.12 Parameter Substitution "><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 45.12 Parameter Substitution "BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="book"HREF="index.htm"TITLE="UNIX Power Tools"><IMGSRC="../gifs/txthome.gif"ALT="UNIX Power Tools"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch45_14.htm"TITLE="45.14 Finding the Last Command-Line Argument "><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 45.14 Finding the Last Command-Line Argument "BORDER="0"></A></TD></TR><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172">45.12 Parameter Substitution </TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="index"HREF="index/idx_0.htm"TITLE="Book Index"><IMGSRC="../gifs/index.gif"ALT="Book Index"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172">45.14 Finding the Last Command-Line Argument </TD></TR></TABLE><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><IMGSRC="../gifs/smnavbar.gif"USEMAP="#map"BORDER="0"ALT="The UNIX CD Bookshelf Navigation"><MAPNAME="map"><AREASHAPE="RECT"COORDS="0,0,73,21"HREF="../index.htm"ALT="The UNIX CD Bookshelf"><AREASHAPE="RECT"COORDS="74,0,163,21"HREF="index.htm"ALT="UNIX Power Tools"><AREASHAPE="RECT"COORDS="164,0,257,21"HREF="../unixnut/index.htm"ALT="UNIX in a Nutshell"><AREASHAPE="RECT"COORDS="258,0,321,21"HREF="../vi/index.htm"ALT="Learning the vi Editor"><AREASHAPE="RECT"COORDS="322,0,378,21"HREF="../sedawk/index.htm"ALT="sed &amp; awk"><AREASHAPE="RECT"COORDS="379,0,438,21"HREF="../ksh/index.htm"ALT="Learning the Korn Shell"><AREASHAPE="RECT"COORDS="439,0,514,21"HREF="../lrnunix/index.htm"ALT="Learning the UNIX Operating System"></MAP></DIV></BODY></HTML>