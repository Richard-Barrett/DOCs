<HTML><HEAD><TITLE>[Chapter 48] 48.9 PostScript Calendars with pcal </TITLE><METANAME="DC.title"CONTENT="UNIX Power Tools"><METANAME="DC.creator"CONTENT="Jerry Peek, Tim O'Reilly &amp; Mike Loukides"><METANAME="DC.publisher"CONTENT="O'Reilly &amp; Associates, Inc."><METANAME="DC.date"CONTENT="1998-10-23T15:55:33Z"><METANAME="DC.type"CONTENT="Text.Monograph"><METANAME="DC.format"CONTENT="text/html"SCHEME="MIME"><METANAME="DC.source"CONTENT="1-56592-260-3"SCHEME="ISBN"><METANAME="DC.language"CONTENT="en-US"><METANAME="generator"CONTENT="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><LINKREV="made"HREF="mailto:online-books@oreilly.com"TITLE="Online Books Comments"><LINKREL="up"HREF="ch48_01.htm"TITLE="48. Office Automation"><LINKREL="prev"HREF="ch48_08.htm"TITLE="48.8 Calendar for 132-Column Terminals or Printers "><LINKREL="next"HREF="ch48_10.htm"TITLE="48.10 Working with Names and Addresses "></HEAD><BODYBGCOLOR="#FFFFFF"TEXT="#000000"><DIVCLASS="htmlnav"><H1><IMGSRC="gifs/smbanner.gif"ALT="UNIX Power Tools"USEMAP="#srchmap"BORDER="0"></H1><MAPNAME="srchmap"><AREASHAPE="RECT"COORDS="0,0,466,58"HREF="index.htm"ALT="UNIX Power Tools"><AREASHAPE="RECT"COORDS="467,0,514,18"HREF="../search/psrch.htm"ALT="Search this book"></MAP><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch48_08.htm"TITLE="48.8 Calendar for 132-Column Terminals or Printers "><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 48.8 Calendar for 132-Column Terminals or Printers "BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><B><FONTFACE="ARIEL,HELVETICA,HELV,SANSERIF"SIZE="-1">Chapter 48<BR>Office Automation</FONT></B></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch48_10.htm"TITLE="48.10 Working with Names and Addresses "><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 48.10 Working with Names and Addresses "BORDER="0"></A></TD></TR></TABLE>&nbsp;<HRALIGN="LEFT"WIDTH="515"TITLE="footer"></DIV><DIVCLASS="SECT1"><H2CLASS="sect1"><ACLASS="title"NAME="UPT-ART-9011">48.9 PostScript Calendars with pcal </A></H2><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-58073"></A>Sometimes you want a hardcopy calendar.You can generateone using <SPANCLASS="link"><EMCLASS="emphasis">cal</EM> (<ACLASS="linkend"HREF="ch48_06.htm"TITLE="Get Calendar for Any Month or Year: cal ">48.6</A>)</SPAN>and an ASCII-to-PostScript filter like<SPANCLASS="link"><EMCLASS="emphasis">pstext</EM> (<ACLASS="linkend"HREF="ch43_22.htm"TITLE="Converting Text Files to PostScript ">43.22</A>)</SPAN>,but the resulting calendar is nothingto write home about.</P><TABLECLASS="para.programreference"BORDER="1"><TR><THVALIGN="TOP"><ACLASS="programreference"HREF="examples/index.htm"TITLE="pcal">pcal</A><BR></TH><TDVALIGN="TOP"><ACLASS="indexterm"NAME="UPT-ART-9011-IX-PCAL-PROGRAM"></A>A nifty alternative for printing calendars is <EMCLASS="emphasis">pcal</EM>.<EMCLASS="emphasis">pcal</EM>isn't just a pretty face: yes, it prints nice calendars, but you can also configure it to do quite a lot more.I just discovered <EMCLASS="emphasis">pcal</EM>, and it already has potential forbecoming one of my favorite utilities. </TD></TR></TABLE><PCLASS="para">In its default form, <EMCLASS="emphasis">pcal</EM> just creates a PostScriptcalendar for the current month.The PostScript commands are writtento standard output, so you need to pipe it to <EMCLASS="emphasis">lpr</EM> for BSD-based systems, or <EMCLASS="emphasis">lp</EM>for System V-based systems.(Of course, your printer has to be able to print PostScript.)For example:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">% <CODECLASS="userinput"><B>pcal | lpr</B></CODE></PRE></BLOCKQUOTE></P><PCLASS="para">You'll get a full-page calendar of the current month.The dates for Saturdays and Sundays are printed in gray.To get a differentmonth, you can specify it the same way you would using <EMCLASS="emphasis">cal</EM>.For a calendar for November 1992, you could do:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">% <CODECLASS="userinput"><B>pcal 11 1992 | lpr</B></CODE></PRE></BLOCKQUOTE></P><PCLASS="para">&#13;For a calendar for the whole year, use the <EMCLASS="emphasis">-w</EM> option to<EMCLASS="emphasis">pcal</EM>.</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">% <CODECLASS="userinput"><B>pcal -w | lpr</B></CODE></PRE></BLOCKQUOTE></P><PCLASS="para">Once you get a chance to see the <EMCLASS="emphasis">pcal</EM> output, you'll alreadysee how big an improvement it is over just printing the output of the<EMCLASS="emphasis">cal</EM> program.But <EMCLASS="emphasis">pcal</EM> also gives you the opportunity toconfigure your calendars.</P><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-58110"></A><EMCLASS="emphasis">pcal</EM> looks for a file called <EMCLASS="emphasis">.calendar</EM> in either your home directory or your current directory.(This is a<SPANCLASS="link">hidden file (<ACLASS="linkend"HREF="ch16_11.htm"TITLE="Showing Hidden Files with ls -A and -a ">16.11</A>)</SPAN>because the name starts with a dot.)You can use this file to mark days in the year.For example, you can use it to define particular days as holidays:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">1/1                           New Year's DayFeb 14                        Valentine's Day</PRE></BLOCKQUOTE></P><PCLASS="para">But <EMCLASS="emphasis">pcal</EM> also understands a limited set of relational words as well.For example:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">Second Sunday in May          Mother's Day4th thu of nov                Thanksgiving</PRE></BLOCKQUOTE></P><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-58122"></A>For each of these examples, the given day will have the specifiedtext written in.If you use an asterisk (<CODECLASS="literal">*</CODE>) after the date, the day ismarked as a holiday.</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">1/1*                          New Year's DayFeb 14                        Valentine's DaySecond Sunday in May          Mother's Day4th thu of nov*               Thanksgiving</PRE></BLOCKQUOTE></P><PCLASS="para">This means that the day appears in gray on the calendar, like Saturdayand Sunday.But more important, it means that <EMCLASS="emphasis">pcal</EM> will understand that the marked day isn't a working day.</P><PCLASS="para">In addition to holidays,you can use <EMCLASS="emphasis">pcal</EM> to mark things like birthdays andanniversaries.</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">June 4                        My Birthday!!!September 3                   Peter's birthdayApril 1                       Mom and Dad's anniversary</PRE></BLOCKQUOTE></P><PCLASS="para">Now here's where <EMCLASS="emphasis">pcal</EM> starts to get useful.You can use <EMCLASS="emphasis">pcal</EM>to mark meetings you have scheduled:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">april 14                      Meet with tax attorney at 4:45last day of october           Dr. Jekyll's office, 5:30</PRE></BLOCKQUOTE></P><PCLASS="para">Or for regular appointments:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">Each Friday of July           Leave early for Cape</PRE></BLOCKQUOTE></P><PCLASS="para">As you can probably tell by now, the syntax accepted by <EMCLASS="emphasis">pcal</EM> is very flexible.It's actually much too complicated to be ableto explain in full here, but <EMCLASS="emphasis">pcal</EM> comes with a completemanual page, and <EMCLASS="emphasis">pcal -h</EM> will give you a list ofsyntax and command-line options.And if you just wing it, you're likely to comeup with syntax that works. </P><PCLASS="para">I don't want to leave it at that, though.Let's get on with a few more examples of some of the nicer features.</P><PCLASS="para">In place of the name of a month, you can use the <CODECLASS="literal">all</CODE> keyword to mean all months, i.e., the entire year.For example:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">First day of all              Send monthly report to bossEach Monday in all            Status meeting at 11:30</PRE></BLOCKQUOTE></P><PCLASS="para">Now, we used <CODECLASS="literal">First</CODE> <CODECLASS="literal">day</CODE> <CODECLASS="literal">of</CODE> <CODECLASS="literal">all</CODE>, above,to specify whenwe should send our monthly report.What about when the first ofthe month falls on a weekend or holiday?Well, <EMCLASS="emphasis">pcal</EM> alsounderstands phrases like <CODECLASS="literal">workday</CODE> and <CODECLASS="literal">holiday</CODE>.To make sure that your reminder to submit your report appears on the first workday of the month, you can write:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">First workday of all          Send monthly report to boss</PRE></BLOCKQUOTE></P><PCLASS="para">By default, <EMCLASS="emphasis">pcal</EM> considers only Saturdays and Sundaysto be non-workdays.You add days to this list when you define holidays with asterisks (*) as described previously.[1]</P><BLOCKQUOTECLASS="footnote"><PCLASS="para">[1] Note that <EMCLASS="emphasis">pcal</EM> only knows about holidays that have alreadybeen declared in your specification file.So in general, youwant to define your holidays early in your <EMCLASS="emphasis">.calendar</EM> fileso that later references to workdays will be up-to-date.</P></BLOCKQUOTE><PCLASS="para">Another feature of <EMCLASS="emphasis">pcal</EM> is that you can use the phases ofthe moon in your date specifications.  </P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">2nd full_moon in all          Blue moon!</PRE></BLOCKQUOTE></P><PCLASS="para"><EMCLASS="emphasis">pcal</EM> supplies format specifiers for writing moredetailed descriptions.For example, suppose you want to be reminded atthe beginning of each month to make your monthly schedule.You can make up an entry that reads:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">First workday of all          Write schedule for %B</PRE></BLOCKQUOTE></P><PCLASS="para">The special format specifier <CODECLASS="literal">%B</CODE> expands into the name of the current month.So the first workday of Octoberwill read, &quot;Write schedule for October.&quot;</P><PCLASS="para">Some other modifiers defined by <EMCLASS="emphasis">pcal</EM> are <CODECLASS="literal">%A</CODE> for the nameof the weekday,<CODECLASS="literal">%d</CODE> for the day of the month, <CODECLASS="literal">%Y</CODE> for the year,<CODECLASS="literal">%j</CODE> for the day of theyear, and <CODECLASS="literal">%l</CODE> for the number of days remaining in the year.There are also a few modifiers available.The most useful ones are <CODECLASS="literal">%+</CODE> and <CODECLASS="literal">%-</CODE> for using the following or previousmonth or year. For example, suppose you want a reminder on the last dayof the month to pay the rent for the nextmonth.You can write:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">Last day of all               Pay rent for month of %+B</PRE></BLOCKQUOTE></P><PCLASS="para">In our office, we're expected to turn in time sheets for each2-week period, on the 1st and 16th of each month.We can write:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">first workday of all          Time sheet due for end of %-Bworkday on_or_after all 16    Time sheet due for beginning of %B</PRE></BLOCKQUOTE></P><PCLASS="para">&#13;You can also specify command-line options to <EMCLASS="emphasis">pcal</EM> inyour <EMCLASS="emphasis">.calendar</EM> file, using the <CODECLASS="literal">opt</CODE> keyword.For example:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">opt   -n Times-Italic -m</PRE></BLOCKQUOTE></P><PCLASS="para">The <EMCLASS="emphasis">-n Times-Italic</EM> option tells <EMCLASS="emphasis">pcal</EM> to use theTimes Italic font to display the text within the dates. The <EMCLASS="emphasis">-m</EM> option tells <EMCLASS="emphasis">pcal</EM> to show the new, half, and full moons in the month.<ACLASS="indexterm"NAME="AUTOID-58202"></A></P><DIVCLASS="sect1info"><PCLASS="SECT1INFO">- <SPANCLASS="authorinitials">LM</SPAN></P></DIV></DIV><DIVCLASS="htmlnav"><P></P><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch48_08.htm"TITLE="48.8 Calendar for 132-Column Terminals or Printers "><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 48.8 Calendar for 132-Column Terminals or Printers "BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="book"HREF="index.htm"TITLE="UNIX Power Tools"><IMGSRC="../gifs/txthome.gif"ALT="UNIX Power Tools"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch48_10.htm"TITLE="48.10 Working with Names and Addresses "><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 48.10 Working with Names and Addresses "BORDER="0"></A></TD></TR><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172">48.8 Calendar for 132-Column Terminals or Printers </TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="index"HREF="index/idx_0.htm"TITLE="Book Index"><IMGSRC="../gifs/index.gif"ALT="Book Index"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172">48.10 Working with Names and Addresses </TD></TR></TABLE><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><IMGSRC="../gifs/smnavbar.gif"USEMAP="#map"BORDER="0"ALT="The UNIX CD Bookshelf Navigation"><MAPNAME="map"><AREASHAPE="RECT"COORDS="0,0,73,21"HREF="../index.htm"ALT="The UNIX CD Bookshelf"><AREASHAPE="RECT"COORDS="74,0,163,21"HREF="index.htm"ALT="UNIX Power Tools"><AREASHAPE="RECT"COORDS="164,0,257,21"HREF="../unixnut/index.htm"ALT="UNIX in a Nutshell"><AREASHAPE="RECT"COORDS="258,0,321,21"HREF="../vi/index.htm"ALT="Learning the vi Editor"><AREASHAPE="RECT"COORDS="322,0,378,21"HREF="../sedawk/index.htm"ALT="sed &amp; awk"><AREASHAPE="RECT"COORDS="379,0,438,21"HREF="../ksh/index.htm"ALT="Learning the Korn Shell"><AREASHAPE="RECT"COORDS="439,0,514,21"HREF="../lrnunix/index.htm"ALT="Learning the UNIX Operating System"></MAP></DIV></BODY></HTML>