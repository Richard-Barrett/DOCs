<HTML><HEAD><TITLE>[Chapter 48] 48.11 The index Database Program </TITLE><METANAME="DC.title"CONTENT="UNIX Power Tools"><METANAME="DC.creator"CONTENT="Jerry Peek, Tim O'Reilly &amp; Mike Loukides"><METANAME="DC.publisher"CONTENT="O'Reilly &amp; Associates, Inc."><METANAME="DC.date"CONTENT="1998-10-23T15:55:37Z"><METANAME="DC.type"CONTENT="Text.Monograph"><METANAME="DC.format"CONTENT="text/html"SCHEME="MIME"><METANAME="DC.source"CONTENT="1-56592-260-3"SCHEME="ISBN"><METANAME="DC.language"CONTENT="en-US"><METANAME="generator"CONTENT="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><LINKREV="made"HREF="mailto:online-books@oreilly.com"TITLE="Online Books Comments"><LINKREL="up"HREF="ch48_01.htm"TITLE="48. Office Automation"><LINKREL="prev"HREF="ch48_10.htm"TITLE="48.10 Working with Names and Addresses "><LINKREL="next"HREF="ch48_12.htm"TITLE="48.12 Using index with a Filter "></HEAD><BODYBGCOLOR="#FFFFFF"TEXT="#000000"><DIVCLASS="htmlnav"><H1><IMGSRC="gifs/smbanner.gif"ALT="UNIX Power Tools"USEMAP="#srchmap"BORDER="0"></H1><MAPNAME="srchmap"><AREASHAPE="RECT"COORDS="0,0,466,58"HREF="index.htm"ALT="UNIX Power Tools"><AREASHAPE="RECT"COORDS="467,0,514,18"HREF="../search/psrch.htm"ALT="Search this book"></MAP><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch48_10.htm"TITLE="48.10 Working with Names and Addresses "><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 48.10 Working with Names and Addresses "BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><B><FONTFACE="ARIEL,HELVETICA,HELV,SANSERIF"SIZE="-1">Chapter 48<BR>Office Automation</FONT></B></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch48_12.htm"TITLE="48.12 Using index with a Filter "><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 48.12 Using index with a Filter "BORDER="0"></A></TD></TR></TABLE>&nbsp;<HRALIGN="LEFT"WIDTH="515"TITLE="footer"></DIV><DIVCLASS="SECT1"><H2CLASS="sect1"><ACLASS="title"NAME="UPT-ART-9022">48.11 The index Database Program </A></H2><PCLASS="para"><ACLASS="indexterm"NAME="UPT-ART-9022-IX-ADDRESS-DATABASES-INDEX-PROGRAM-FOR-CREATING"></A><ACLASS="indexterm"NAME="UPT-ART-9022-IX-DATABASES-INDEX-PROGRAM-FOR-CREATING"></A><ACLASS="indexterm"NAME="UPT-ART-9022-IX-INDEX-PROGRAM"></A>The <EMCLASS="emphasis">index</EM> program is a flexibledatabase management program.<EMCLASS="emphasis">index</EM> is pretty neat: it works by keeping two files for each database, a field description file and a file of sorted data.It's also fairly intuitive to use, once you get started.</P><PCLASS="para">To use index, you should first set up a database directory. By default,<EMCLASS="emphasis">index</EM> looks for the directory <EMCLASS="emphasis">$HOME/.index</EM>. </P><PCLASS="para"><TABLECLASS="screen.co"BORDER="1"><TR><THVALIGN="TOP"><PRECLASS="calloutlist"><ACLASS="co"HREF="ch14_11.htm"TITLE="14.11 Finding (Anyone's) Home Directory, Quickly ">~</A> </PRE></TH><TDVALIGN="TOP"><PRECLASS="screen">% <CODECLASS="userinput"><B>mkdir ~/.index</B></CODE></PRE></TD></TR></TABLE></P><TABLECLASS="para.programreference"BORDER="1"><TR><THVALIGN="TOP"><ACLASS="programreference"HREF="examples/index.htm"TITLE="index">index</A><BR></TH><TDVALIGN="TOP">&#13;Then when you start up <EMCLASS="emphasis">index</EM> for the first time, you're asked toselect a name for the database you want to use. </TD></TR></TABLE><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">Select a database:</PRE></BLOCKQUOTE></P><PCLASS="para">If you specify thename of a database that doesn't exist yet, <EMCLASS="emphasis">index</EM> assumesthat you want to create it.<EMCLASS="emphasis">index</EM> puts you in the editor specified in your <SPANCLASS="link"><EMCLASS="emphasis">EDITOR</EM> (<ACLASS="linkend"HREF="ch06_03.htm"TITLE="Predefined Environment Variables ">6.3</A>)</SPAN>environment variableso you can list the titles for each field in the new database.Up to 16 fields can be supported. For example, you can create a database called <EMCLASS="emphasis">addresses</EM>, defined tohave the following fields:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">NAMETITLEORGANIZATIONSTREET ADDRESSCITYSTATEZIP CODEVOICE PHONE NUMBERFAX PHONE NUMBEREMAIL ADDRESS</PRE></BLOCKQUOTE></P><PCLASS="para">After exiting the editor, you are put into the main menu:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">Database: addresses  (0 entries)        a - Add new entry to database        f - Find entry in database        r - Read database entry by entry        s - Save modifications, do not exit        q - Save modifications, exit        x - ExitCommand:</PRE></BLOCKQUOTE></P><PCLASS="para">&#13;There are no entries in the new database. You can start adding entriesnow by pressing <CODECLASS="literal">a</CODE>. </P><PCLASS="para">When editing an entry in the database, you'reprompted by each of the fields that were set up when the databasewas defined.After completing a field, press RETURN to get to the nextfield. There are also a limited number of escape sequences supported for editing and movingaround&nbsp;- for example, CTRL-d to delete to the end of the line,or CTRL-p to move up a line.When you're done with the entire entry, press ESCAPE. </P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">NAME:               <CODECLASS="userinput"><B>Stella Rosenzweig</B></CODE>TITLE:              <CODECLASS="userinput"><B>Mom</B></CODE>ORGANIZATION:STREET ADDRESS:     <CODECLASS="userinput"><B>2456 Bronx Park East</B></CODE>CITY:               <CODECLASS="userinput"><B>Bronx</B></CODE>STATE:              <CODECLASS="userinput"><B>NY</B></CODE>ZIP CODE:           <CODECLASS="userinput"><B>10467</B></CODE>VOICE PHONE NUMBER: <CODECLASS="userinput"><B>718-231-2618</B></CODE>FAX PHONE NUMBER:EMAIL ADDRESS:</PRE></BLOCKQUOTE></P><PCLASS="para">Once you've saved the new entry, you'll be back to the main menu.You can now add more entries, look at existing entries, search for astring in one of the existing entries, or exit.</P><PCLASS="para">&#13;To search for an existing entry, press <CODECLASS="literal">f</CODE> at the main menu. You'll be asked for the searchpattern:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">Pattern to search for: <CODECLASS="userinput"><B>Ben</B></CODE></PRE></BLOCKQUOTE></P><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-58356"></A>The <EMCLASS="emphasis">index</EM> program searches all fields matching the string.<SPANCLASS="link">Regular expressions (<ACLASS="linkend"HREF="ch26_04.htm"TITLE="Using Metacharacters in Regular Expressions ">26.4</A>)</SPAN>are also accepted in the search string.Each entry with the matching string is shown, one-by-one:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">NAME:               Benjamin BraddockTITLE:              Sales ManagerORGANIZATION:       Acme Plastics, Inc.STREET ADDRESS:     103 Morris St., Suite ACITY:               TucsonSTATE:              AZZIP CODE:           85472VOICE PHONE NUMBER: 800-998-9938FAX PHONE NUMBER:   800-999-9999EMAIL ADDRESS:      ben@acme.com      &lt;RET&gt; = next entry               &quot;d&quot; = delete this entry      &quot;-&quot; = previous entry             &quot;e&quot; = edit this entry      &quot;q&quot; = return to main menuCommand:</PRE></BLOCKQUOTE></P><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-58364"></A>You can also search for strings on the <EMCLASS="emphasis">index</EM> command line.To do so, specify both the database name and the string. (Enclosethe search string in<SPANCLASS="link">single quotes (<ACLASS="linkend"HREF="ch08_14.htm"TITLE="Bourne Shell Quoting ">8.14</A>)</SPAN>if you want to use aregular expression.)</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">% <CODECLASS="userinput"><B>index addresses '[bB]en'</B></CODE></PRE></BLOCKQUOTE></P><PCLASS="para">All matching entries will be printed to standard output.</P><PCLASS="para">The most common use for a database like this is to maintaininformation about people. But youcan use <EMCLASS="emphasis">index</EM> to maintain all sorts of information.For example, you might keep one for information about local restaurants:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">NAME:                           Rooster BBQ &amp; GrillSTREET ADDRESS:                 1122 Rooster Ave.CITY:                           CambridgePHONE:                          555-1212RESERVATIONS (y,n):             nFOOD (1=poor, 10=excellent):    8DECOR (1=poor, 10=excellent):   2SERVICE (1=poor, 10=excellent): 6RECOMMENDED DISHES:             Baby-back ribs, Elvis pizzaSTAY AWAY FROM:                 Pulled turkey plate, mango pieRECOMMENDED BY:                 Jerry, Boston Phoenix</PRE></BLOCKQUOTE></P><PCLASS="para">For even more flexibility, <EMCLASS="emphasis">index</EM> can run a<SPANCLASS="link">filter program (<ACLASS="linkend"HREF="ch48_12.htm"TITLE="Using index with a Filter ">48.12</A>)</SPAN>.<ACLASS="indexterm"NAME="AUTOID-58380"></A><ACLASS="indexterm"NAME="AUTOID-58381"></A><ACLASS="indexterm"NAME="AUTOID-58382"></A></P><DIVCLASS="sect1info"><PCLASS="SECT1INFO">- <SPANCLASS="authorinitials">LM</SPAN></P></DIV></DIV><DIVCLASS="htmlnav"><P></P><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch48_10.htm"TITLE="48.10 Working with Names and Addresses "><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 48.10 Working with Names and Addresses "BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="book"HREF="index.htm"TITLE="UNIX Power Tools"><IMGSRC="../gifs/txthome.gif"ALT="UNIX Power Tools"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch48_12.htm"TITLE="48.12 Using index with a Filter "><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 48.12 Using index with a Filter "BORDER="0"></A></TD></TR><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172">48.10 Working with Names and Addresses </TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="index"HREF="index/idx_0.htm"TITLE="Book Index"><IMGSRC="../gifs/index.gif"ALT="Book Index"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172">48.12 Using index with a Filter </TD></TR></TABLE><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><IMGSRC="../gifs/smnavbar.gif"USEMAP="#map"BORDER="0"ALT="The UNIX CD Bookshelf Navigation"><MAPNAME="map"><AREASHAPE="RECT"COORDS="0,0,73,21"HREF="../index.htm"ALT="The UNIX CD Bookshelf"><AREASHAPE="RECT"COORDS="74,0,163,21"HREF="index.htm"ALT="UNIX Power Tools"><AREASHAPE="RECT"COORDS="164,0,257,21"HREF="../unixnut/index.htm"ALT="UNIX in a Nutshell"><AREASHAPE="RECT"COORDS="258,0,321,21"HREF="../vi/index.htm"ALT="Learning the vi Editor"><AREASHAPE="RECT"COORDS="322,0,378,21"HREF="../sedawk/index.htm"ALT="sed &amp; awk"><AREASHAPE="RECT"COORDS="379,0,438,21"HREF="../ksh/index.htm"ALT="Learning the Korn Shell"><AREASHAPE="RECT"COORDS="439,0,514,21"HREF="../lrnunix/index.htm"ALT="Learning the UNIX Operating System"></MAP></DIV></BODY></HTML>