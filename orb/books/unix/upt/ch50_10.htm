<HTML><HEAD><TITLE>[Chapter 50] 50.10 Make Your Own Man Pages Without Learning troff</TITLE><METANAME="DC.title"CONTENT="UNIX Power Tools"><METANAME="DC.creator"CONTENT="Jerry Peek, Tim O'Reilly &amp; Mike Loukides"><METANAME="DC.publisher"CONTENT="O'Reilly &amp; Associates, Inc."><METANAME="DC.date"CONTENT="1998-08-04T21:57:00Z"><METANAME="DC.type"CONTENT="Text.Monograph"><METANAME="DC.format"CONTENT="text/html"SCHEME="MIME"><METANAME="DC.source"CONTENT="1-56592-260-3"SCHEME="ISBN"><METANAME="DC.language"CONTENT="en-US"><METANAME="generator"CONTENT="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><LINKREV="made"HREF="mailto:online-books@oreilly.com"TITLE="Online Books Comments"><LINKREL="up"HREF="ch50_01.htm"TITLE="50. Help--Online Documentation, etc."><LINKREL="prev"HREF="ch50_09.htm"TITLE="50.9 Reading a Permuted Index "><LINKREL="next"HREF="ch50_11.htm"TITLE="50.11 Writing a Simple Man Page with the -man Macros "></HEAD><BODYBGCOLOR="#FFFFFF"TEXT="#000000"><DIVCLASS="htmlnav"><H1><IMGSRC="gifs/smbanner.gif"ALT="UNIX Power Tools"USEMAP="#srchmap"BORDER="0"></H1><MAPNAME="srchmap"><AREASHAPE="RECT"COORDS="0,0,466,58"HREF="index.htm"ALT="UNIX Power Tools"><AREASHAPE="RECT"COORDS="467,0,514,18"HREF="../search/psrch.htm"ALT="Search this book"></MAP><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch50_09.htm"TITLE="50.9 Reading a Permuted Index "><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 50.9 Reading a Permuted Index "BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><B><FONTFACE="ARIEL,HELVETICA,HELV,SANSERIF"SIZE="-1">Chapter 50<BR>Help--Online Documentation, etc.</FONT></B></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch50_11.htm"TITLE="50.11 Writing a Simple Man Page with the -man Macros "><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 50.11 Writing a Simple Man Page with the -man Macros "BORDER="0"></A></TD></TR></TABLE>&nbsp;<HRALIGN="LEFT"WIDTH="515"TITLE="footer"></DIV><DIVCLASS="SECT1"><H2CLASS="sect1"><ACLASS="title"NAME="UPT-ART-1030">50.10 Make Your Own Man Pages Without Learning troff</A></H2><PCLASS="para"><ACLASS="indexterm"NAME="UPT-ART-1030-IX-COMMANDS-WRITING-MANUAL-PAGES-FOR"></A><ACLASS="indexterm"NAME="UPT-ART-1030-IX-MANUAL-PAGES-WRITING"></A><ACLASS="indexterm"NAME="UPT-ART-1030-IX-MANUAL-PAGES-FORMATTING"></A>We strongly suggest that you write a manual page for each command thatyou place in your <EMCLASS="emphasis">bin</EM> directory. UNIX manual pages typicallyhave the following format, which we suggest you follow:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">NAME     the program's name - one line summary of what it doesSYNOPSIS     how to invoke the program, including all arguments and     command-line options. (Optional arguments     are placed in square brackets)DESCRIPTION     a description of what the program does-as long as is necessaryOPTIONS     an explanation of each optionEXAMPLES     One or more examples of how to use the programENVIRONMENT     Any environment variables that control the program's behaviorFILES     Files the program internals will read or write.  May include     temporary files.  Doesn't include files on the command line.BUGS     Any known bugs. The standard manual pages don't take     bug-recording seriously, but this can be very helpful.AUTHOR     Who wrote the program</PRE></BLOCKQUOTE></P><PCLASS="para">To see how a &quot;real&quot; manual page looks, type <CODECLASS="literal">man&nbsp;ls</CODE>.</P><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-59538"></A><ACLASS="indexterm"NAME="AUTOID-59540"></A>Feel free to add any other sections that you think are necessary.You can use the<SPANCLASS="link"><EMCLASS="emphasis">nroff</EM> (<ACLASS="linkend"HREF="ch43_13.htm"TITLE="The Text Formatters nroff, troff, ditroff, ... ">43.13</A>)</SPAN><SPANCLASS="link"><EMCLASS="emphasis">-man</EM> macros (<ACLASS="linkend"HREF="ch50_11.htm"TITLE="Writing a Simple Man Page with the -man Macros ">50.11</A>)</SPAN>if you want a nicely formattedmanual page. However, <EMCLASS="emphasis">nroff</EM> is fairly complicated and, for this purpose,not really necessary. Just create a text file that looks like the onewe showed above. If you are using a BSD system and want your manualpages formatted with <EMCLASS="emphasis">nroff</EM>, look at any of thefiles in <EMCLASS="emphasis">/usr/man/man1</EM> and copy it.</P><PCLASS="para">Hint: If you insist on formatting your manual page properly, using the<EMCLASS="emphasis">troff</EM> or <EMCLASS="emphasis">groff</EM>&quot;man&quot; macros, you can use <EMCLASS="emphasis">nroff</EM> to preview the file.The<SPANCLASS="link"><EMCLASS="emphasis">man</EM> (<ACLASS="linkend"HREF="ch50_01.htm#UPT-ART-4910"TITLE="UNIX Online Documentation ">50.1</A>)</SPAN>command is essentially the same as:</P><PCLASS="para"><TABLECLASS="screen.co"BORDER="1"><TR><THVALIGN="TOP"><PRECLASS="calloutlist"><ACLASS="co"HREF="ch25_03.htm"TITLE="25.3 Using more to Page Through Files ">more</A> <ACLASS="co"HREF="ch25_10.htm"TITLE="25.10 Squash Extra Blank Lines ">-s</A> </PRE></TH><TDVALIGN="TOP"><PRECLASS="screen">% <CODECLASS="userinput"><B>nroff -e -man </B></CODE><CODECLASS="replaceable"><I>filename</I></CODE><CODECLASS="userinput"><B> | more -s</B></CODE></PRE></TD></TR></TABLE></P><PCLASS="para">You can safely omit the <EMCLASS="emphasis">-e</EM> option to <EMCLASS="emphasis">nroff</EM> and the <EMCLASS="emphasis">-s</EM>option to <EMCLASS="emphasis">more</EM>. And remember that <EMCLASS="emphasis">nroff</EM> may not beavailable on many versions of System V UNIX, but the Power Toolsdisc has<SPANCLASS="link"><EMCLASS="emphasis">gnroff</EM> and <EMCLASS="emphasis">awf</EM> (<ACLASS="linkend"HREF="ch43_17.htm"TITLE="Don't Have nroff?  Try gnroff or awf ">43.17</A>)</SPAN>.</P><PCLASS="para">Now, you want to make this manual page &quot;readable&quot; by the standard<EMCLASS="emphasis">man</EM>command.For BSD systems, there are a few ways to do this. Create the directory <EMCLASS="emphasis">man</EM> in your home directory; create the directory<EMCLASS="emphasis">cat1</EM> as a subdirectory of <EMCLASS="emphasis">man</EM>; then copy your manualentry into <EMCLASS="emphasis">cat1</EM>, with the name <EMCLASS="emphasis">program.1</EM> (where<EMCLASS="emphasis">program</EM> is the name of your special command). When you want toread the manual page, give the command:</P><PCLASS="para"><TABLECLASS="screen.co"BORDER="1"><TR><THVALIGN="TOP"><PRECLASS="calloutlist"><ACLASS="co"HREF="ch14_11.htm"TITLE="14.11 Finding (Anyone's) Home Directory, Quickly ">~</A> </PRE></TH><TDVALIGN="TOP"><PRECLASS="screen">% <CODECLASS="userinput"><B>man -M ~/man </B></CODE><CODECLASS="replaceable"><I>program</I></CODE></PRE></TD></TR></TABLE></P><PCLASS="para">Shortcut: We like to be more strict about naming things properly,but you can omit the <EMCLASS="emphasis">man</EM> directory, and just put the <EMCLASS="emphasis">cat1</EM>directory into your home directory. In this case, the command wouldbe:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">% <CODECLASS="userinput"><B>man -M ~ </B></CODE><CODECLASS="replaceable"><I>program</I></CODE></PRE></BLOCKQUOTE></P><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-59593"></A>Some systems have a<EMCLASS="emphasis">MANPATH</EM><SPANCLASS="link">environment variable (<ACLASS="linkend"HREF="ch06_01.htm#UPT-ART-1170"TITLE="What Environment Variables Are Good For ">6.1</A>)</SPAN>,a colon-separated list of directories where the <EMCLASS="emphasis">man</EM> command should look.For example, my <EMCLASS="emphasis">MANPATH</EM> contains:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">/home/mike/man:/usr/local/man:/usr/man</PRE></BLOCKQUOTE></P><PCLASS="para"><EMCLASS="emphasis">MANPATH</EM> can be more convenient than the <EMCLASS="emphasis">-M</EM> option.</P><PCLASS="para">HINT: We are telling you to put the manual page into the <EMCLASS="emphasis">cat1</EM>directory rather than the <EMCLASS="emphasis">man1</EM> directorybecause the <EMCLASS="emphasis">man</EM> program assumes that files in <EMCLASS="emphasis">cat1</EM> arealready formatted.</P><PCLASS="para">If you are sharing your program with other people on the system, youshould put your manual entry in a public place. Become superuser andcopy your documentation into<EMCLASS="emphasis">/usr/local/man/catl</EM>, giving it the name <EMCLASS="emphasis">program.l</EM>(the &quot;l&quot; stands for &quot;local&quot;). If you can't become superuser, get thesystem administrator to do it for you. Make sure that everyone canread the manual page; the permissions should be something like this:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">% <CODECLASS="userinput"><B>ls -l /usr/local/man/catl</B></CODE>-r--r--r--  1 root          468 Aug  5 09:21 program.l</PRE></BLOCKQUOTE></P><PCLASS="para">Then give the command <CODECLASS="literal">man</CODE>&nbsp;<CODECLASS="replaceable"><I>program</I></CODE> to read your documentation.</P><PCLASS="para">If you are working on some System V variants, therules are a little different.The organization of the manual pages andthe <EMCLASS="emphasis">man</EM> command itself are slightly different&nbsp;- and really, notas good. Write your manual entry and place it in your <EMCLASS="emphasis">doc</EM>directory. Then create the following<SPANCLASS="link">C shell alias (<ACLASS="linkend"HREF="ch10_03.htm"TITLE="C Shell Aliases with Command-Line Arguments ">10.3</A>)</SPAN>:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">alias myman &quot;(cd ~/doc; man -d \!$ | pg)&quot;</PRE></BLOCKQUOTE></P><PCLASS="para">or<SPANCLASS="link">shell function (<ACLASS="linkend"HREF="ch10_09.htm"TITLE="Shell Functions ">10.9</A>)</SPAN>:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">myman() { (cd $HOME/doc; man -d &quot;$1&quot; | pg); }</PRE></BLOCKQUOTE></P><PCLASS="para">Now the command <EMCLASS="emphasis">myman docfilename</EM> will retrieve your manual page.Note that if you use a section-number extension like <CODECLASS="literal">.1</CODE>,you have to give the entire filename (e.g., <EMCLASS="emphasis">program.1</EM>),not just the program's name.</P><PCLASS="para">If you want to makeyour manual page publicly available, copy the file into the directory<EMCLASS="emphasis">/usr/man/u_man/man1</EM>; you may have to become superuser to do so.Make sure that anyone on the system can read your file.If the entryis extremely long and you want to save space in your filesystem, youcan use the <EMCLASS="emphasis">pack</EM> utilityon your documentation file.The resulting filewill have the name <EMCLASS="emphasis">program.1.z</EM>; the <EMCLASS="emphasis">man</EM> command willautomatically unpack the file whenever anyone reads it.<ACLASS="indexterm"NAME="AUTOID-59638"></A><ACLASS="indexterm"NAME="AUTOID-59639"></A><ACLASS="indexterm"NAME="AUTOID-59640"></A></P><DIVCLASS="sect1info"><PCLASS="SECT1INFO">- <SPANCLASS="authorinitials">ML</SPAN></P></DIV></DIV><DIVCLASS="htmlnav"><P></P><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch50_09.htm"TITLE="50.9 Reading a Permuted Index "><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 50.9 Reading a Permuted Index "BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="book"HREF="index.htm"TITLE="UNIX Power Tools"><IMGSRC="../gifs/txthome.gif"ALT="UNIX Power Tools"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch50_11.htm"TITLE="50.11 Writing a Simple Man Page with the -man Macros "><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 50.11 Writing a Simple Man Page with the -man Macros "BORDER="0"></A></TD></TR><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172">50.9 Reading a Permuted Index </TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="index"HREF="index/idx_0.htm"TITLE="Book Index"><IMGSRC="../gifs/index.gif"ALT="Book Index"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172">50.11 Writing a Simple Man Page with the -man Macros </TD></TR></TABLE><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><IMGSRC="../gifs/smnavbar.gif"USEMAP="#map"BORDER="0"ALT="The UNIX CD Bookshelf Navigation"><MAPNAME="map"><AREASHAPE="RECT"COORDS="0,0,73,21"HREF="../index.htm"ALT="The UNIX CD Bookshelf"><AREASHAPE="RECT"COORDS="74,0,163,21"HREF="index.htm"ALT="UNIX Power Tools"><AREASHAPE="RECT"COORDS="164,0,257,21"HREF="../unixnut/index.htm"ALT="UNIX in a Nutshell"><AREASHAPE="RECT"COORDS="258,0,321,21"HREF="../vi/index.htm"ALT="Learning the vi Editor"><AREASHAPE="RECT"COORDS="322,0,378,21"HREF="../sedawk/index.htm"ALT="sed &amp; awk"><AREASHAPE="RECT"COORDS="379,0,438,21"HREF="../ksh/index.htm"ALT="Learning the Korn Shell"><AREASHAPE="RECT"COORDS="439,0,514,21"HREF="../lrnunix/index.htm"ALT="Learning the UNIX Operating System"></MAP></DIV></BODY></HTML>