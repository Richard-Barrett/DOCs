<HTML><HEAD><TITLE>[Chapter 51] 51.2 How UNIX Keeps Time</TITLE><METANAME="DC.title"CONTENT="UNIX Power Tools"><METANAME="DC.creator"CONTENT="Jerry Peek, Tim O'Reilly &amp; Mike Loukides"><METANAME="DC.publisher"CONTENT="O'Reilly &amp; Associates, Inc."><METANAME="DC.date"CONTENT="1998-08-04T21:57:16Z"><METANAME="DC.type"CONTENT="Text.Monograph"><METANAME="DC.format"CONTENT="text/html"SCHEME="MIME"><METANAME="DC.source"CONTENT="1-56592-260-3"SCHEME="ISBN"><METANAME="DC.language"CONTENT="en-US"><METANAME="generator"CONTENT="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><LINKREV="made"HREF="mailto:online-books@oreilly.com"TITLE="Online Books Comments"><LINKREL="up"HREF="ch51_01.htm"TITLE="51. Miscellaneous Useful Programs and Curiosities"><LINKREL="prev"HREF="ch51_01.htm"TITLE="51.1 We Are Finally Getting to the Bottom of the Bucket "><LINKREL="next"HREF="ch51_03.htm"TITLE="51.3 ASCII Characters: Listing and Getting Values "></HEAD><BODYBGCOLOR="#FFFFFF"TEXT="#000000"><DIVCLASS="htmlnav"><H1><IMGSRC="gifs/smbanner.gif"ALT="UNIX Power Tools"USEMAP="#srchmap"BORDER="0"></H1><MAPNAME="srchmap"><AREASHAPE="RECT"COORDS="0,0,466,58"HREF="index.htm"ALT="UNIX Power Tools"><AREASHAPE="RECT"COORDS="467,0,514,18"HREF="../search/psrch.htm"ALT="Search this book"></MAP><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch51_01.htm"TITLE="51.1 We Are Finally Getting to the Bottom of the Bucket "><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 51.1 We Are Finally Getting to the Bottom of the Bucket "BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><B><FONTFACE="ARIEL,HELVETICA,HELV,SANSERIF"SIZE="-1">Chapter 51<BR>Miscellaneous Useful Programs and Curiosities</FONT></B></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch51_03.htm"TITLE="51.3 ASCII Characters: Listing and Getting Values "><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 51.3 ASCII Characters: Listing and Getting Values "BORDER="0"></A></TD></TR></TABLE>&nbsp;<HRALIGN="LEFT"WIDTH="515"TITLE="footer"></DIV><DIVCLASS="SECT1"><H2CLASS="sect1"><ACLASS="title"NAME="UPT-ART-1028">51.2 How UNIX Keeps Time</A></H2><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-59961"></A><ACLASS="indexterm"NAME="AUTOID-59963"></A>Like all other operating systems, UNIX has a concept of the time.And virtually all UNIX systems, even the smallest, include a clockwith some sort of battery backup built in.</P><PCLASS="para">All UNIX systems keep time by counting the number of microsecondssince midnight, January 1, 1970, Greenwich Mean Time. This date iscommonly called the <EMCLASS="emphasis">epoch</EM>, and has folk-significance as the begining of the UNIXera. Although the first work on UNIX began in the late '60s, the firstversions of UNIX were available (within Bell Laboratories) in the early'70s.</P><PCLASS="para">This count gets updated roughly 60 times per second. The exactrate depends on your particular UNIX system and is determined bythe constant, HZ, defined in the header file<EMCLASS="emphasis">/usr/include/sys/param.h</EM>:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">#define   HZ   60</PRE></BLOCKQUOTE></P><PCLASS="para">&#13;This is the time's &quot;resolution,&quot; and is often referred to as theclock's &quot;tick.&quot; Note that it has nothing to do with your system'sCPU clock rate. Time measurements are normally no more precise thanyour system's clock resolution, although some systems have addedfacilities for more precise timing.</P><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-59974"></A>If your UNIX system belongs to a network, it is important to keepall the clocks on the network &quot;in sync.&quot; Strange things happen ifyou copy a file from one system to another and its date appears to besome time in the future. Many UNIX systems run a<EMCLASS="emphasis">time daemon</EM> (one of those mysterious<SPANCLASS="link">helper programs (<ACLASS="linkend"HREF="ch01_14.htm"TITLE="The Kernel and Daemons ">1.14</A>)</SPAN>),which takes care of this.</P><PCLASS="para">UNIX automatically keeps track of daylight savings time, leap years,and other chronological trivia. When the system is installed, youhave to tell it your time zone and the style of daylight savings timeyou want to observe. As UNIX has become an international standard,the number of time zones (and obscure ways of handling daylight savingstime) it can handle correctly has proliferated. In a few cases, youstill have to handle these things by hand; for example, in GreatBritain, the beginning and end of daylight savings time are setannually by Parliament, on advice from the Navy, and thus changesevery year. Care for Libyan Standard Time?</P><PCLASS="para">UNIX's internal routines compute time in relation to the epoch, but thereis no reason for you to worry about it unless you're a C programmer.A library of time routines can convert between this internalrepresentation and more usable representations; see the UNIXmanual page for <EMCLASS="emphasis">ctime</EM>(3).</P><DIVCLASS="sect1info"><PCLASS="SECT1INFO">- <SPANCLASS="authorinitials">ML</SPAN></P></DIV></DIV><DIVCLASS="htmlnav"><P></P><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch51_01.htm"TITLE="51.1 We Are Finally Getting to the Bottom of the Bucket "><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 51.1 We Are Finally Getting to the Bottom of the Bucket "BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="book"HREF="index.htm"TITLE="UNIX Power Tools"><IMGSRC="../gifs/txthome.gif"ALT="UNIX Power Tools"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch51_03.htm"TITLE="51.3 ASCII Characters: Listing and Getting Values "><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 51.3 ASCII Characters: Listing and Getting Values "BORDER="0"></A></TD></TR><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172">51.1 We Are Finally Getting to the Bottom of the Bucket </TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="index"HREF="index/idx_0.htm"TITLE="Book Index"><IMGSRC="../gifs/index.gif"ALT="Book Index"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172">51.3 ASCII Characters: Listing and Getting Values </TD></TR></TABLE><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><IMGSRC="../gifs/smnavbar.gif"USEMAP="#map"BORDER="0"ALT="The UNIX CD Bookshelf Navigation"><MAPNAME="map"><AREASHAPE="RECT"COORDS="0,0,73,21"HREF="../index.htm"ALT="The UNIX CD Bookshelf"><AREASHAPE="RECT"COORDS="74,0,163,21"HREF="index.htm"ALT="UNIX Power Tools"><AREASHAPE="RECT"COORDS="164,0,257,21"HREF="../unixnut/index.htm"ALT="UNIX in a Nutshell"><AREASHAPE="RECT"COORDS="258,0,321,21"HREF="../vi/index.htm"ALT="Learning the vi Editor"><AREASHAPE="RECT"COORDS="322,0,378,21"HREF="../sedawk/index.htm"ALT="sed &amp; awk"><AREASHAPE="RECT"COORDS="379,0,438,21"HREF="../ksh/index.htm"ALT="Learning the Korn Shell"><AREASHAPE="RECT"COORDS="439,0,514,21"HREF="../lrnunix/index.htm"ALT="Learning the UNIX Operating System"></MAP></DIV></BODY></HTML>