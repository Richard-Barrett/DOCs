<HTML><HEAD><TITLE>[Chapter 51] 51.5 Copy What You Do with script </TITLE><METANAME="DC.title"CONTENT="UNIX Power Tools"><METANAME="DC.creator"CONTENT="Jerry Peek, Tim O'Reilly &amp; Mike Loukides"><METANAME="DC.publisher"CONTENT="O'Reilly &amp; Associates, Inc."><METANAME="DC.date"CONTENT="1998-08-04T21:57:20Z"><METANAME="DC.type"CONTENT="Text.Monograph"><METANAME="DC.format"CONTENT="text/html"SCHEME="MIME"><METANAME="DC.source"CONTENT="1-56592-260-3"SCHEME="ISBN"><METANAME="DC.language"CONTENT="en-US"><METANAME="generator"CONTENT="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><LINKREV="made"HREF="mailto:online-books@oreilly.com"TITLE="Online Books Comments"><LINKREL="up"HREF="ch51_01.htm"TITLE="51. Miscellaneous Useful Programs and Curiosities"><LINKREL="prev"HREF="ch51_04.htm"TITLE="51.4 Who's On? "><LINKREL="next"HREF="ch51_06.htm"TITLE="51.6 Cleaning script Files "></HEAD><BODYBGCOLOR="#FFFFFF"TEXT="#000000"><DIVCLASS="htmlnav"><H1><IMGSRC="gifs/smbanner.gif"ALT="UNIX Power Tools"USEMAP="#srchmap"BORDER="0"></H1><MAPNAME="srchmap"><AREASHAPE="RECT"COORDS="0,0,466,58"HREF="index.htm"ALT="UNIX Power Tools"><AREASHAPE="RECT"COORDS="467,0,514,18"HREF="../search/psrch.htm"ALT="Search this book"></MAP><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch51_04.htm"TITLE="51.4 Who's On? "><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 51.4 Who's On? "BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><B><FONTFACE="ARIEL,HELVETICA,HELV,SANSERIF"SIZE="-1">Chapter 51<BR>Miscellaneous Useful Programs and Curiosities</FONT></B></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch51_06.htm"TITLE="51.6 Cleaning script Files "><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 51.6 Cleaning script Files "BORDER="0"></A></TD></TR></TABLE>&nbsp;<HRALIGN="LEFT"WIDTH="515"TITLE="footer"></DIV><DIVCLASS="SECT1"><H2CLASS="sect1"><ACLASS="title"NAME="UPT-ART-4120">51.5 Copy What You Do with script </A></H2><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-60112"></A><ACLASS="indexterm"NAME="AUTOID-60114"></A>Are you typing a complicated set of commands that you need to showsomeone else or keep &quot;on file&quot; for documentation?Are you debugging a program that goes wrong somewhere&nbsp;- but the errormessage flashes by so fast that you can't see it?Do you want to show a &quot;pre-recorded&quot; demonstration of an interactiveprogram?The <EMCLASS="emphasis">script</EM> program can help with all of these problems.</P><BLOCKQUOTECLASS="note"><PCLASS="para"><STRONG>NOTE:</STRONG> Versions of <EMCLASS="emphasis">script</EM> on UNIX systems without<SPANCLASS="link"><EMCLASS="emphasis">pty</EM>s (<ACLASS="linkend"HREF="ch41_08.htm"TITLE="ptys and Window Systems ">41.8</A>)</SPAN>aren't as flexible as the version I'm explaining here.For instance, those versions won't let you use<SPANCLASS="link">job control (<ACLASS="linkend"HREF="ch12_01.htm#UPT-ART-0439"TITLE="Job Control: Work Faster, Stop Runaway Jobs ">12.1</A>)</SPAN>during the script.</P></BLOCKQUOTE><PCLASS="para">To copy everything you do into a file, just type:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">% <CODECLASS="userinput"><B>script</B></CODE>Script started, file is typescript%</PRE></BLOCKQUOTE></P><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-60129"></A><ACLASS="indexterm"NAME="AUTOID-60131"></A><ACLASS="indexterm"NAME="AUTOID-60134"></A><ACLASS="indexterm"NAME="AUTOID-60137"></A>Now you can type any UNIX command that you'd use at a shell prompt.Everything you do is copied into a file named <EMCLASS="emphasis">typescript</EM> in thecurrent directory.(To use a different filename, type its<SPANCLASS="link">pathname (<ACLASS="linkend"HREF="ch01_21.htm"TITLE="Making Pathnames ">1.21</A>)</SPAN>on the command line, like <CODECLASS="literal">script </CODE><CODECLASS="replaceable"><I>scriptfile</I></CODE>.)When you're done, type CTRL-d or<SPANCLASS="link"><EMCLASS="emphasis">exit</EM> (<ACLASS="linkend"HREF="ch38_04.htm"TITLE="Subshells ">38.4</A>)</SPAN>at a shell prompt.</P><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-60147"></A>One thing that surprises people is that <EMCLASS="emphasis">everything</EM> will be copiedinto the script file.That includes<SPANCLASS="link">escape sequences (<ACLASS="linkend"HREF="ch05_08.htm"TITLE="Terminal Escape Sequences ">5.8</A>)</SPAN>that programs send to your terminal.This is both good and bad.</P><PCLASS="para">The good part is that you can &quot;play back&quot; whatever happened by<SPANCLASS="link"><EMCLASS="emphasis">cat</EM>ting (<ACLASS="linkend"HREF="ch25_02.htm"TITLE="Four Ways to Skin a cat ">25.2</A>)</SPAN>the script to your screen.When things get boring, you can run an interactive program like<EMCLASS="emphasis">vi</EM> inside the script&nbsp;- then quit the script andplay it back with <EMCLASS="emphasis">cat typescript</EM>.The cursor will fly across the screen and your file will be re-editedbefore your eyes.(This is easier to see if the terminal is set to a slow data rate.)</P><PCLASS="para">The bad part is that errors you correct and other terminal-control sequenceswill be in the file, too.If you edit or print the script file, it may be full of &quot;junk&quot; like<CODECLASS="literal">^M</CODE> (carriage return) and <CODECLASS="literal">^H</CODE> (backspace) characters.(A command like<SPANCLASS="link"><EMCLASS="emphasis">cat -v</EM> or <EMCLASS="emphasis">od -c</EM> (<ACLASS="linkend"HREF="ch25_07.htm"TITLE="Show Non-Printing Characters with cat -v or od -c ">25.7</A>)</SPAN>will show you these characters.)If the file has just a few of these characters, you can clean it up byhand with your text editor's global substitution commands.You can alsoautomate your &quot;script cleaning&quot; with techniques likethe ones in articles<ACLASS="xref"HREF="ch35_11.htm"TITLE="Hacking on Characters with tr ">35.11</A>,<ACLASS="xref"HREF="ch43_18.htm"TITLE="How nroff Makes Bold and Underline; How to Remove It">43.18</A>,and<ACLASS="xref"HREF="ch51_06.htm"TITLE="Cleaning script Files ">51.6</A>.</P><DIVCLASS="sect1info"><PCLASS="SECT1INFO">- <SPANCLASS="authorinitials">JP</SPAN></P></DIV></DIV><DIVCLASS="htmlnav"><P></P><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch51_04.htm"TITLE="51.4 Who's On? "><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 51.4 Who's On? "BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="book"HREF="index.htm"TITLE="UNIX Power Tools"><IMGSRC="../gifs/txthome.gif"ALT="UNIX Power Tools"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch51_06.htm"TITLE="51.6 Cleaning script Files "><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 51.6 Cleaning script Files "BORDER="0"></A></TD></TR><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172">51.4 Who's On? </TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="index"HREF="index/idx_0.htm"TITLE="Book Index"><IMGSRC="../gifs/index.gif"ALT="Book Index"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172">51.6 Cleaning script Files </TD></TR></TABLE><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><IMGSRC="../gifs/smnavbar.gif"USEMAP="#map"BORDER="0"ALT="The UNIX CD Bookshelf Navigation"><MAPNAME="map"><AREASHAPE="RECT"COORDS="0,0,73,21"HREF="../index.htm"ALT="The UNIX CD Bookshelf"><AREASHAPE="RECT"COORDS="74,0,163,21"HREF="index.htm"ALT="UNIX Power Tools"><AREASHAPE="RECT"COORDS="164,0,257,21"HREF="../unixnut/index.htm"ALT="UNIX in a Nutshell"><AREASHAPE="RECT"COORDS="258,0,321,21"HREF="../vi/index.htm"ALT="Learning the vi Editor"><AREASHAPE="RECT"COORDS="322,0,378,21"HREF="../sedawk/index.htm"ALT="sed &amp; awk"><AREASHAPE="RECT"COORDS="379,0,438,21"HREF="../ksh/index.htm"ALT="Learning the Korn Shell"><AREASHAPE="RECT"COORDS="439,0,514,21"HREF="../lrnunix/index.htm"ALT="Learning the UNIX Operating System"></MAP></DIV></BODY></HTML>