<HTML><HEAD><TITLE>[Chapter 4] 4.3 Making Use of Buffers </TITLE><METANAME="DC.title"CONTENT="Learning the vi Editor"><METANAME="DC.creator"CONTENT="Linda Lamb"><METANAME="DC.publisher"CONTENT="O'Reilly &amp; Associates, Inc."><METANAME="DC.date"CONTENT="1998-08-03T20:51:09Z"><METANAME="DC.type"CONTENT="Text.Monograph"><METANAME="DC.format"CONTENT="text/html"SCHEME="MIME"><METANAME="DC.source"CONTENT="0-937175-67-6"SCHEME="ISBN"><METANAME="DC.language"CONTENT="en-US"><METANAME="generator"CONTENT="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><LINKREV="made"HREF="mailto:online-books@oreilly.com"TITLE="Online Books Comments"><LINKREL="up"HREF="ch04_01.htm"TITLE="4. Beyond the Basics "><LINKREL="prev"HREF="ch04_02.htm"TITLE="4.2 Options When Starting vi  "><LINKREL="next"HREF="ch04_04.htm"TITLE="4.4 Marking Your Place "></HEAD><BODYBGCOLOR="#FFFFFF"TEXT="#000000"><DIVCLASS="htmlnav"><H1><IMGSRC="gifs/smbanner.gif"ALT="Learning the vi Editor"USEMAP="#srchmap"BORDER="0"></H1><MAPNAME="srchmap"><AREASHAPE="RECT"COORDS="0,0,466,65"HREF="index.htm"ALT="Learning the vi Editor"><AREASHAPE="RECT"COORDS="467,0,514,18"HREF="../search/vsrch.htm"ALT="Search this book"></MAP><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch04_02.htm"TITLE="4.2 Options When Starting vi  "><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 4.2 Options When Starting vi  "BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><B><FONTFACE="ARIEL,HELVETICA,HELV,SANSERIF"SIZE="-1">Chapter 4<BR>Beyond the Basics </FONT></B></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch04_04.htm"TITLE="4.4 Marking Your Place "><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 4.4 Marking Your Place "BORDER="0"></A></TD></TR></TABLE>&nbsp;<HRALIGN="LEFT"WIDTH="515"TITLE="footer"></DIV><DIVCLASS="SECT1"><H2CLASS="sect1"><ACLASS="title"NAME="VI6-CH-4-SECT-3">4.3 Making Use of Buffers </A></H2><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-3976"></A>You have seen that while you are editing, your last deletion(<CODECLASS="literal">d</CODE> or <CODECLASS="literal">x</CODE>) or yank (<CODECLASS="literal">y</CODE>) is saved in a buffer (aplace in stored memory).You can access the contents of that buffer and put the saved textback in your file with the put command (<CODECLASS="literal">p</CODE> or <CODECLASS="literal">P</CODE>).</P><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-3985"></A><ACLASS="indexterm"NAME="AUTOID-3987"></A>The last nine deletions are stored by <EMCLASS="emphasis">vi</EM> in numbered buffers.  You can access any of these numbered buffers to restore any (orall) of the last nine deletions.(Small deletions, of only parts of lines, are not saved in numbered buffers, however.)These deletions can only be recovered by using the <CODECLASS="literal">p</CODE> or <CODECLASS="literal">P</CODE> commandimmediately after you've made the deletion.</P><PCLASS="para"><EMCLASS="emphasis">vi</EM> also allows you to place yanks (copied text) in buffersidentified by letters.  <ACLASS="indexterm"NAME="AUTOID-3995"></A><ACLASS="indexterm"NAME="AUTOID-3999"></A><ACLASS="indexterm"NAME="AUTOID-4002"></A>You can fill up to 26 (a-z) buffers with yanked text and restore thattext with a put command at any time in your editing session.</P><DIVCLASS="sect2"><H3CLASS="sect2"><ACLASS="title"NAME="VI6-CH-4-SECT-3.1">4.3.1 Recovering Deletions </A></H3><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-4008"></A><ACLASS="indexterm"NAME="AUTOID-4011"></A><ACLASS="indexterm"NAME="AUTOID-4015"></A><ACLASS="indexterm"NAME="AUTOID-4018"></A>Being able to delete large blocks of text at a single bound isall very well and good, but what if you mistakenly delete 53 linesthat you need?  There is a way to recover any of your past <EMCLASS="emphasis">nine</EM> deletions, forthey are saved in numbered buffers.  The last delete is saved in buffer&nbsp;1, the second-to-last in buffer&nbsp;2,and so on.</P><PCLASS="para">To recover a deletion, type <CODECLASS="literal">&lt;&quot;&gt;</CODE> (double quote), identify thebuffered text by number, then give the put command.  To recover your second-to-last deletion from buffer 2, type:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">&quot;2p</PRE></BLOCKQUOTE></P><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-4027"></A><ACLASS="indexterm"NAME="AUTOID-4031"></A><ACLASS="indexterm"NAME="AUTOID-4035"></A><ACLASS="indexterm"NAME="AUTOID-4038"></A>The deletion in buffer 2 is placed after the cursor.</P><PCLASS="para">If you're not sure which buffer contains the deletion you want torestore, you don't have to keep typing <CODECLASS="literal">&quot;</CODE><EMCLASS="emphasis">n</EM><CODECLASS="literal">p</CODE> overand over again.If you use the repeat command (.) with <CODECLASS="literal">p</CODE> after <CODECLASS="literal">u</CODE>,it automatically increments the buffer number.  As a result, you can search through the numbered buffers as follows:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">&quot;1pu.u.u <ICLASS="lineannotation">etc.</I></PRE></BLOCKQUOTE></P><PCLASS="para">to put the contents of each succeeding buffer in the fileone after the other.Each time you type <CODECLASS="literal">u</CODE>, the restored text is removed;  whenyou type a dot (.), the contents of the <EMCLASS="emphasis">next</EM> buffer is restored toyour file.Keep typing <CODECLASS="literal">u</CODE> and . until you've recovered the textyou're looking for.</P></DIV><DIVCLASS="sect2"><H3CLASS="sect2"><ACLASS="title"NAME="VI6-CH-4-SECT-3.2">4.3.2 Yanking to Named Buffers </A></H3><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-4057"></A><ACLASS="indexterm"NAME="AUTOID-4060"></A><ACLASS="indexterm"NAME="AUTOID-4063"></A><ACLASS="indexterm"NAME="AUTOID-4067"></A><ACLASS="indexterm"NAME="AUTOID-4070"></A><ACLASS="indexterm"NAME="AUTOID-4073"></A><ACLASS="indexterm"NAME="AUTOID-4076"></A><ACLASS="indexterm"NAME="AUTOID-4078"></A>You have seen that you must &quot;put&quot; (<CODECLASS="literal">p</CODE> or <CODECLASS="literal">P</CODE>) the contents ofan unnamed buffer before you make any other edit, or thebuffer will be overwritten.You can also use <CODECLASS="literal">y</CODE> and <CODECLASS="literal">d</CODE> with a set of 26 named buffers (a-z) which are specifically available forcopying and moving text.  If you name a buffer to store the yankedtext, you can place the contents of the named buffer at any timeduring your editing session.</P><PCLASS="para">To yank into a named buffer, precede the yank command with a double quote (<CODECLASS="literal">&quot;</CODE>) and the character forthe name of the buffer you want to load.  For example:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">	<CODECLASS="literal">&quot;dyy</CODE>	<ICLASS="lineannotation">Yank current line into buffer&nbsp;d.</I>	<CODECLASS="literal">&quot;a7yy</CODE>	<ICLASS="lineannotation">Yank next seven lines into buffer&nbsp;a.</I></PRE></BLOCKQUOTE></P><PCLASS="para">After loading the named buffers and moving to the new position, use<CODECLASS="literal">p</CODE> or <CODECLASS="literal">P</CODE> to put the text back:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">	<CODECLASS="literal">&quot;dP</CODE>	<ICLASS="lineannotation">Put the contents of buffer&nbsp;d before cursor.</I>	<CODECLASS="literal">&quot;ap</CODE>	<ICLASS="lineannotation">Put the contents of buffer&nbsp;a after cursor.</I></PRE></BLOCKQUOTE></P><PCLASS="para">There is no way to put part of a buffer into the text&nbsp;- it is all or nothing.</P><PCLASS="para">In the next chapter, you'll learn to edit multiple files.  Once you know how totravel between files without leaving <EMCLASS="emphasis">vi</EM>, you can use namedbuffers to selectively transfer text between files.</P><PCLASS="para">You can also delete text into named buffers using much the sameprocedure.  For example: <ACLASS="indexterm"NAME="AUTOID-4105"></A><ACLASS="indexterm"NAME="AUTOID-4108"></A><ACLASS="indexterm"NAME="AUTOID-4111"></A><ACLASS="indexterm"NAME="AUTOID-4115"></A><ACLASS="indexterm"NAME="AUTOID-4118"></A><ACLASS="indexterm"NAME="AUTOID-4121"></A><ACLASS="indexterm"NAME="AUTOID-4124"></A><ACLASS="indexterm"NAME="AUTOID-4126"></A></P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">	<CODECLASS="literal">&quot;a5dd</CODE>	<ICLASS="lineannotation">Delete five lines into buffer&nbsp;a.</I></PRE></BLOCKQUOTE></P><PCLASS="para">If you specify a buffer name with a capital letter, your yanked ordeleted text will be appended to the current contents of that buffer.  This allows you to be selective in what you move or copy.  For example:<DLCLASS="variablelist"><DTCLASS="term"><CODECLASS="literal">&quot;zd)</CODE></DT><DDCLASS="listitem"><PCLASS="para">Delete from cursor to end of current sentence and save in buffer&nbsp;z.</P></DD><DTCLASS="term"><CODECLASS="literal">2)</CODE></DT><DDCLASS="listitem"><PCLASS="para">Move two sentences further on.</P></DD><DTCLASS="term"><CODECLASS="literal">&quot;Zy)</CODE></DT><DDCLASS="listitem"><PCLASS="para">Add the next sentence to buffer&nbsp;z.Note that you can continue adding more text to a named buffer for as long as you like&nbsp;- but be warned:  if you once forget, and yank or delete to the buffer without specifying its name in capitalized form, you'll overwrite the buffer, losing whatever you previously accumulated in it.</P></DD></DL></P></DIV></DIV><DIVCLASS="htmlnav"><P></P><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch04_02.htm"TITLE="4.2 Options When Starting vi  "><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 4.2 Options When Starting vi  "BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="book"HREF="index.htm"TITLE="Learning the vi Editor"><IMGSRC="../gifs/txthome.gif"ALT="Learning the vi Editor"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch04_04.htm"TITLE="4.4 Marking Your Place "><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 4.4 Marking Your Place "BORDER="0"></A></TD></TR><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172">4.2 Options When Starting vi  </TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="index"HREF="index/idx_a.htm"TITLE="Book Index"><IMGSRC="../gifs/index.gif"ALT="Book Index"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172">4.4 Marking Your Place </TD></TR></TABLE><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><IMGSRC="../gifs/smnavbar.gif"USEMAP="#map"BORDER="0"ALT="The UNIX CD Bookshelf Navigation"><MAPNAME="map"><AREASHAPE="RECT"COORDS="0,0,73,21"HREF="../index.htm"ALT="The UNIX CD Bookshelf"><AREASHAPE="RECT"COORDS="74,0,163,21"HREF="../upt/index.htm"ALT="UNIX Power Tools"><AREASHAPE="RECT"COORDS="164,0,257,21"HREF="../unixnut/index.htm"ALT="UNIX in a Nutshell"><AREASHAPE="RECT"COORDS="258,0,321,21"HREF="index.htm"ALT="Learning the vi Editor"><AREASHAPE="RECT"COORDS="322,0,378,21"HREF="../sedawk/index.htm"ALT="sed &amp; awk"><AREASHAPE="RECT"COORDS="379,0,438,21"HREF="../ksh/index.htm"ALT="Learning the Korn Shell"><AREASHAPE="RECT"COORDS="439,0,514,21"HREF="../lrnunix/index.htm"ALT="Learning the UNIX Operating System"></MAP></DIV></BODY></HTML>