<HTML><HEAD><TITLE>[Chapter 5] Introducing the ex Editor </TITLE><METANAME="DC.title"CONTENT="Learning the vi Editor"><METANAME="DC.creator"CONTENT="Linda Lamb"><METANAME="DC.publisher"CONTENT="O'Reilly &amp; Associates, Inc."><METANAME="DC.date"CONTENT="1998-08-03T20:51:18Z"><METANAME="DC.type"CONTENT="Text.Monograph"><METANAME="DC.format"CONTENT="text/html"SCHEME="MIME"><METANAME="DC.source"CONTENT="0-937175-67-6"SCHEME="ISBN"><METANAME="DC.language"CONTENT="en-US"><METANAME="generator"CONTENT="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><LINKREV="made"HREF="mailto:online-books@oreilly.com"TITLE="Online Books Comments"><LINKREL="up"HREF="index.htm"TITLE="Learning the vi Editor"><LINKREL="prev"HREF="ch04_05.htm"TITLE="4.5 Other Advanced Edits "><LINKREL="next"HREF="ch05_02.htm"TITLE="5.2 Editing with ex "></HEAD><BODYBGCOLOR="#FFFFFF"TEXT="#000000"><DIVCLASS="htmlnav"><H1><IMGSRC="gifs/smbanner.gif"ALT="Learning the vi Editor"USEMAP="#srchmap"BORDER="0"></H1><MAPNAME="srchmap"><AREASHAPE="RECT"COORDS="0,0,466,65"HREF="index.htm"ALT="Learning the vi Editor"><AREASHAPE="RECT"COORDS="467,0,514,18"HREF="../search/vsrch.htm"ALT="Search this book"></MAP><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch04_05.htm"TITLE="4.5 Other Advanced Edits "><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 4.5 Other Advanced Edits "BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><B><FONTFACE="ARIEL,HELVETICA,HELV,SANSERIF"SIZE="-1">Chapter 5</FONT></B></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch05_02.htm"TITLE="5.2 Editing with ex "><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 5.2 Editing with ex "BORDER="0"></A></TD></TR></TABLE>&nbsp;<HRALIGN="LEFT"WIDTH="515"TITLE="footer"></DIV><DIVCLASS="CHAPTER"><H1CLASS="chapter"><ACLASS="title"NAME="VI6-CH-5">5. Introducing the ex Editor </A></H1><DIVCLASS="htmltoc"><P><B>Contents:</B><BR><ACLASS="sect1"HREF="#VI6-CH-5-SECT-1"TITLE="5.1 ex Commands ">ex Commands </A><BR><ACLASS="sect1"HREF="ch05_02.htm"TITLE="5.2 Editing with ex ">Editing with ex </A><BR><ACLASS="sect1"HREF="ch05_03.htm"TITLE="5.3 Saving and Exiting Files ">Saving and Exiting Files </A><BR><ACLASS="sect1"HREF="ch05_04.htm"TITLE="5.4 Copying a File into Another File ">Copying a File into Another File </A><BR><ACLASS="sect1"HREF="ch05_05.htm"TITLE="5.5 Editing Multiple Files ">Editing Multiple Files </A></P><P></P></DIV><PCLASS="para">If this is a handbook on <EMCLASS="emphasis">vi</EM>, why would we include achapter on another editor?<ACLASS="indexterm"NAME="AUTOID-4207"></A><EMCLASS="emphasis">ex</EM> is not really another editor.<EMCLASS="emphasis">vi</EM> is the visual mode of the more general, underlying lineeditor, <EMCLASS="emphasis">ex</EM>.  Some <EMCLASS="emphasis">ex</EM> commands can be useful to you while you are workingin <EMCLASS="emphasis">vi</EM>, for they can save you a lot of editing time.  Most of these commands can be used without ever leaving <EMCLASS="emphasis">vi</EM>.</P><PCLASS="para">You already know how to think of files as a sequence of numbered lines.<EMCLASS="emphasis">ex</EM> simply gives you editing commands with greater mobility and scope.  With <EMCLASS="emphasis">ex</EM> you can move easily between files andtransfer text from one file to another in a variety of ways.  You can quickly edit blocks of text larger than a single screen.  And with global replacementyou can make substitutions throughout a file for a given pattern.</P><PCLASS="para">This chapter introduces <EMCLASS="emphasis">ex</EM> and its commands.  You will learn how to:  </P><ULCLASS="itemizedlist"><LICLASS="listitem"><PCLASS="para">Move around a file by using line numbers.</P></LI><LICLASS="listitem"><PCLASS="para">Use <EMCLASS="emphasis">ex</EM> commands to copy, move, and delete blocks of text.</P></LI><LICLASS="listitem"><PCLASS="para">Save files and parts of files.</P></LI><LICLASS="listitem"><PCLASS="para">Work with multiple files (reading in text or commands,traveling between files).</P></LI></UL><DIVCLASS="sect1"><H2CLASS="sect1"><ACLASS="title"NAME="VI6-CH-5-SECT-1">5.1 ex Commands </A></H2><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-4234"></A><ACLASS="indexterm"NAME="AUTOID-4237"></A><ACLASS="indexterm"NAME="AUTOID-4241"></A>Long before <EMCLASS="emphasis">vi</EM> or any other screen editor was invented,people communicated with computers on printing terminals, rather than on today's CRTs.  Line numbers were a way to quickly identify a part of a file to be worked on,and line editors evolved to edit those files.A&nbsp;programmer or other computer user would typically print out a line(or lines) on the printing terminal, give the editing commands tochange just that line, then reprint to check the edited line.  </P><PCLASS="para">People rarely edit files on printing terminals any more, but some <EMCLASS="emphasis">ex</EM> line editor commands are still useful tousers of the more sophisticated visual editor built on top of <EMCLASS="emphasis">ex</EM>.  Although it is simpler to make most edits with <EMCLASS="emphasis">vi</EM>,  the line orientation of <EMCLASS="emphasis">ex</EM> gives it an advantage when you wantto make large-scale changes to more than one part of a file.</P><PCLASS="para">Before you start off simply memorizing <EMCLASS="emphasis">ex</EM> commands (or worse,ignoring them), let's first take some of the mystery out of line editors.Seeing how <EMCLASS="emphasis">ex</EM> works when it is invoked directly willhelp make sense of the sometimes obscure command syntax.</P><PCLASS="para">Open a file that is familiar to you and try a few <EMCLASS="emphasis">ex</EM>commands.  Just as you can invoke the <EMCLASS="emphasis">vi</EM> editor on a file, you caninvoke the <EMCLASS="emphasis">ex</EM> line editor on a file.  If you invoke <EMCLASS="emphasis">ex</EM>,you will see a message about the total number of lines in the file,and a colon command prompt.  </P><PCLASS="para">For example:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">$ <CODECLASS="userinput"><B>ex practice</B></CODE><CODECLASS="literal">&quot;practice&quot; 6 lines, 320 characters:</CODE></PRE></BLOCKQUOTE></P><PCLASS="para">You won't see any lines in the file unless you give an <EMCLASS="emphasis">ex</EM>command that causes one or more lines to be displayed.</P><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-4266"></A><ACLASS="indexterm"NAME="AUTOID-4269"></A><EMCLASS="emphasis">ex</EM> commands consist of a line address (which can simply be aline number) plus a command;  they are finished with a carriage return.One of the most basic commands is <CODECLASS="literal">p</CODE> for print (to the screen).So, for example, if you type <CODECLASS="literal">1p</CODE> at the prompt, you will seethe first line of the file:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">:<CODECLASS="literal">1p</CODE>With a screen editor you can :</PRE></BLOCKQUOTE></P><PCLASS="para">In fact, you can leave off the <CODECLASS="literal">p</CODE>, because a linenumber by itself is equivalent to a print command for that line.  To print more than one line, you can specify a range of line numbers (for example, <CODECLASS="literal">1,3</CODE>&nbsp;- two numbers separated by commas, with orwithout spaces in between).  For example:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">:<CODECLASS="literal">1,3</CODE>With a screen editor you can scroll the page, move the cursor, delete lines, insert characters, and more,</PRE></BLOCKQUOTE></P><PCLASS="para">A command without a line number is assumed to affect the current line.So, for example, the substitute command (<CODECLASS="literal">s</CODE>),which allows you to substitute one word for another, could be entered like this:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">:<CODECLASS="literal">1</CODE>With a screen editor you can :<CODECLASS="literal">s/screen/line/</CODE>With a line editor you can</PRE></BLOCKQUOTE></P><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-4291"></A><ACLASS="indexterm"NAME="AUTOID-4294"></A>Notice that the changed line is reprinted after the command is issued.You could also make the same change like this:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">:<CODECLASS="literal">1s/screen/line/</CODE>With a line editor you can</PRE></BLOCKQUOTE></P><PCLASS="para">Even though you will be invoking <EMCLASS="emphasis">ex</EM> commands from <EMCLASS="emphasis">vi</EM> andwill not be using them directly, it is worthwhile to spend a fewminutes in <EMCLASS="emphasis">ex</EM> itself.  You will get a feel for how you need to tell the editor which line(or lines) to work on, as well as which command to execute.</P><PCLASS="para">After you have given a few <EMCLASS="emphasis">ex</EM> commands on your<EMCLASS="emphasis">practice</EM> file, you should invoke <EMCLASS="emphasis">vi</EM> on that same file,so that you can see it in the more familiar visual mode.The command <CODECLASS="literal">:vi</CODE> will get you from <EMCLASS="emphasis">ex</EM> to <EMCLASS="emphasis">vi</EM>.<ACLASS="indexterm"NAME="AUTOID-4311"></A><ACLASS="indexterm"NAME="AUTOID-4314"></A></P><PCLASS="para">To invoke an <EMCLASS="emphasis">ex</EM> command from <EMCLASS="emphasis">vi</EM>, you must type the specialbottom line character <CODECLASS="literal">:</CODE> (colon).Then type the command and press <KBDCLASS="keycap">[RETURN]</KBD>to execute it.  So, for example, in the <EMCLASS="emphasis">ex</EM> editor you move to a line simply by typing the number of the line at the colon prompt.  To move to line&nbsp;6 of a file using this command from within <EMCLASS="emphasis">vi</EM>, enter:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">:<CODECLASS="literal">6</CODE></PRE></BLOCKQUOTE></P><PCLASS="para">Press <KBDCLASS="keycap">[RETURN]</KBD>.</P><PCLASS="para">Following the exercise, we will be discussing <EMCLASS="emphasis">ex</EM> commands onlyas they are executed from <EMCLASS="emphasis">vi</EM>.</P><DIVCLASS="sect2"><H3CLASS="sect2"><ACLASS="title"NAME="VI6-CH-5-SECT-1.1">5.1.1 Exercise:  The <EMCLASS="emphasis">ex</EM> Editor </A></H3><PCLASS="para"><TABLECLASS="informaltable"><TBODYCLASS="tbody"><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><PCLASS="para"><EMCLASS="emphasis">At the UNIX prompt, invoke ex editor on a practice file</EM></P></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><CODECLASS="literal">ex practice</CODE></TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><PCLASS="para"><EMCLASS="emphasis">A message appears</EM></P></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><PCLASS="para"><CODECLASS="literal">&quot;practice&quot; 6 lines 320 characters</CODE></P></TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><PCLASS="para"><EMCLASS="emphasis">Go to and print (display) first line</EM></P></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><CODECLASS="literal">:1</CODE></TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><PCLASS="para"><EMCLASS="emphasis">Print (display) lines 1 through 3</EM></P></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><CODECLASS="literal">:1,3</CODE></TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><PCLASS="para"><EMCLASS="emphasis">Substitute screen for line on line 1</EM></P></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><CODECLASS="literal">:1s/screen/line</CODE></TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><PCLASS="para"><EMCLASS="emphasis">Invoke vi editor on file</EM></P></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><CODECLASS="literal">:vi</CODE></TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><PCLASS="para"><EMCLASS="emphasis">Go to first line</EM></P></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><CODECLASS="literal">:1</CODE></TD></TR></TBODY></TABLE></P></DIV><DIVCLASS="sect2"><H3CLASS="sect2"><ACLASS="title"NAME="VI6-CH-5-SECT-1.2">5.1.2 Problem Checklist </A></H3><ULCLASS="itemizedlist"><LICLASS="listitem"><PCLASS="para"><EMCLASS="emphasis">While editing in vi, you accidentally end up in the ex editor.</EM>A <CODECLASS="literal">Q</CODE> in the command mode of <EMCLASS="emphasis">vi</EM> invokes <EMCLASS="emphasis">ex</EM>.  Any time you are in <EMCLASS="emphasis">ex</EM>, the command <CODECLASS="literal">:vi</CODE> returns you tothe <EMCLASS="emphasis">vi</EM> editor.</P></LI></UL></DIV></DIV></DIV><DIVCLASS="htmlnav"><P></P><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch04_05.htm"TITLE="4.5 Other Advanced Edits "><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 4.5 Other Advanced Edits "BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="book"HREF="index.htm"TITLE="Learning the vi Editor"><IMGSRC="../gifs/txthome.gif"ALT="Learning the vi Editor"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch05_02.htm"TITLE="5.2 Editing with ex "><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 5.2 Editing with ex "BORDER="0"></A></TD></TR><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172">4.5 Other Advanced Edits </TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="index"HREF="index/idx_a.htm"TITLE="Book Index"><IMGSRC="../gifs/index.gif"ALT="Book Index"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172">5.2 Editing with ex </TD></TR></TABLE><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><IMGSRC="../gifs/smnavbar.gif"USEMAP="#map"BORDER="0"ALT="The UNIX CD Bookshelf Navigation"><MAPNAME="map"><AREASHAPE="RECT"COORDS="0,0,73,21"HREF="../index.htm"ALT="The UNIX CD Bookshelf"><AREASHAPE="RECT"COORDS="74,0,163,21"HREF="../upt/index.htm"ALT="UNIX Power Tools"><AREASHAPE="RECT"COORDS="164,0,257,21"HREF="../unixnut/index.htm"ALT="UNIX in a Nutshell"><AREASHAPE="RECT"COORDS="258,0,321,21"HREF="index.htm"ALT="Learning the vi Editor"><AREASHAPE="RECT"COORDS="322,0,378,21"HREF="../sedawk/index.htm"ALT="sed &amp; awk"><AREASHAPE="RECT"COORDS="379,0,438,21"HREF="../ksh/index.htm"ALT="Learning the Korn Shell"><AREASHAPE="RECT"COORDS="439,0,514,21"HREF="../lrnunix/index.htm"ALT="Learning the UNIX Operating System"></MAP></DIV></BODY></HTML>