<HTML><HEAD><TITLE>[Chapter 5] 5.2 Editing with ex </TITLE><METANAME="DC.title"CONTENT="Learning the vi Editor"><METANAME="DC.creator"CONTENT="Linda Lamb"><METANAME="DC.publisher"CONTENT="O'Reilly &amp; Associates, Inc."><METANAME="DC.date"CONTENT="1998-08-03T20:51:21Z"><METANAME="DC.type"CONTENT="Text.Monograph"><METANAME="DC.format"CONTENT="text/html"SCHEME="MIME"><METANAME="DC.source"CONTENT="0-937175-67-6"SCHEME="ISBN"><METANAME="DC.language"CONTENT="en-US"><METANAME="generator"CONTENT="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><LINKREV="made"HREF="mailto:online-books@oreilly.com"TITLE="Online Books Comments"><LINKREL="up"HREF="ch05_01.htm"TITLE="5. Introducing the ex Editor "><LINKREL="prev"HREF="ch05_01.htm"TITLE="5.1 ex Commands "><LINKREL="next"HREF="ch05_03.htm"TITLE="5.3 Saving and Exiting Files "></HEAD><BODYBGCOLOR="#FFFFFF"TEXT="#000000"><DIVCLASS="htmlnav"><H1><IMGSRC="gifs/smbanner.gif"ALT="Learning the vi Editor"USEMAP="#srchmap"BORDER="0"></H1><MAPNAME="srchmap"><AREASHAPE="RECT"COORDS="0,0,466,65"HREF="index.htm"ALT="Learning the vi Editor"><AREASHAPE="RECT"COORDS="467,0,514,18"HREF="../search/vsrch.htm"ALT="Search this book"></MAP><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch05_01.htm"TITLE="5.1 ex Commands "><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 5.1 ex Commands "BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><B><FONTFACE="ARIEL,HELVETICA,HELV,SANSERIF"SIZE="-1">Chapter 5<BR>Introducing the ex Editor </FONT></B></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch05_03.htm"TITLE="5.3 Saving and Exiting Files "><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 5.3 Saving and Exiting Files "BORDER="0"></A></TD></TR></TABLE>&nbsp;<HRALIGN="LEFT"WIDTH="515"TITLE="footer"></DIV><DIVCLASS="SECT1"><H2CLASS="sect1"><ACLASS="title"NAME="VI6-CH-5-SECT-2">5.2 Editing with ex </A></H2><PCLASS="para">Many <EMCLASS="emphasis">ex</EM> commands that perform normal editing operations have anequivalent in <EMCLASS="emphasis">vi</EM> that does the job more simply.Obviously, you will use <CODECLASS="literal">dw</CODE> or <CODECLASS="literal">dd</CODE> to delete a single wordor line rather than using the <CODECLASS="literal">delete</CODE> command in <EMCLASS="emphasis">ex</EM>.However, when you want to make changes that affect numerous lines, youwill find the <EMCLASS="emphasis">ex</EM> commands more useful.  They allow you to modify large blocks of text with a single command.</P><PCLASS="para">These <EMCLASS="emphasis">ex</EM> commands are listed below, along with abbreviationsfor those commands.  Remember that in <EMCLASS="emphasis">vi</EM> each <EMCLASS="emphasis">ex</EM> command must be precededwith a colon.You can use the full commandname or the abbreviation, whichever is easier to remember.<ACLASS="indexterm"NAME="AUTOID-4410"></A><ACLASS="indexterm"NAME="AUTOID-4413"></A><ACLASS="indexterm"NAME="AUTOID-4416"></A><TABLECLASS="informaltable"><TBODYCLASS="tbody"><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><CODECLASS="literal">delete</CODE></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><CODECLASS="literal">d</CODE></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Delete lines.</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><CODECLASS="literal">move</CODE></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><CODECLASS="literal">m</CODE></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Move lines.</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><CODECLASS="literal">copy</CODE></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><CODECLASS="literal">co</CODE></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Copy lines.</TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><CODECLASS="literal">t</CODE></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1">Copy lines (a synonym for <CODECLASS="literal">co</CODE>).</TD></TR></TBODY></TABLE>You can separate the different elements of an <EMCLASS="emphasis">ex</EM> commandwith spaces, if you find the command easier to read that way.  For example, you can separate line addresses, patterns, and commandsin this way.  You cannot, however, use a space as a separator inside a patternor at the end of a substitute command.</P><DIVCLASS="sect2"><H3CLASS="sect2"><ACLASS="title"NAME="VI6-CH-5-SECT-2.1">5.2.1 Line Addresses </A></H3><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-4450"></A><ACLASS="indexterm"NAME="AUTOID-4452"></A>For each <EMCLASS="emphasis">ex</EM> editing command, you have to tell <EMCLASS="emphasis">ex</EM>which line number(s) to edit.  And for the <EMCLASS="emphasis">ex</EM> <CODECLASS="literal">move</CODE>and <CODECLASS="literal">copy</CODE> commands, you also need to tell <EMCLASS="emphasis">ex</EM> where tomove or copy the text to.  </P><PCLASS="para">You can specify line addresses in several ways:  </P><ULCLASS="itemizedlist"><LICLASS="listitem"><PCLASS="para">With explicit line numbers.</P></LI><LICLASS="listitem"><PCLASS="para">With symbols that help you to specify line numbers relative toyour current position in the file.</P></LI><LICLASS="listitem"><PCLASS="para">With search patterns as <EMCLASS="emphasis">addresses</EM> that identify the lines tobe affected.</P></LI></UL><PCLASS="para">Let's look at some examples.</P></DIV><DIVCLASS="sect2"><H3CLASS="sect2"><ACLASS="title"NAME="VI6-CH-5-SECT-2.2">5.2.2 Defining a Range of Lines </A></H3><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-4473"></A><ACLASS="indexterm"NAME="AUTOID-4476"></A><ACLASS="indexterm"NAME="AUTOID-4479"></A>You can use line numbers to define explicitly a line or range oflines.Addresses that use explicit numbers are called <EMCLASS="emphasis">absolute</EM> lineaddresses.   <ACLASS="indexterm"NAME="AUTOID-4483"></A>For example:<TABLECLASS="informaltable"><TBODYCLASS="tbody"><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><CODECLASS="literal">:3,18d</CODE></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><PCLASS="para">Delete lines 3 through 18.</P></TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><CODECLASS="literal">:160,224m23</CODE></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><PCLASS="para">Move lines 160 through 244 to follow line 23. (Like <CODECLASS="literal">delete</CODE> and <CODECLASS="literal">put</CODE> in <EMCLASS="emphasis">vi</EM>.)</P></TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><CODECLASS="literal">:23,29co100</CODE></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><PCLASS="para">Copy lines 23 through 29 and put after line 100. (Like <CODECLASS="literal">yank</CODE> and <CODECLASS="literal">put</CODE> in <EMCLASS="emphasis">vi</EM>.)</P></TD></TR></TBODY></TABLE>To make editing with line numbers easier, you can also display all linenumbers on the left of the screen.  The command:<ACLASS="indexterm"NAME="AUTOID-4510"></A><ACLASS="indexterm"NAME="AUTOID-4513"></A></P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">:set number</PRE></BLOCKQUOTE></P><PCLASS="para">or its abbreviation:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">:set nu</PRE></BLOCKQUOTE></P><PCLASS="para">displays line numbers.  The file <EMCLASS="emphasis">practice</EM> then appears:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">1  With a screen editor2  you can scroll the page,3  move the cursor, delete lines,4  insert characters and more</PRE></BLOCKQUOTE></P><PCLASS="para">The displayed line numbers are not saved when you write a file, and they do not print if you print the file.  Line numbers are displayed either until youquit the <EMCLASS="emphasis">vi</EM> session or until you disable the <EMCLASS="emphasis">set</EM> option:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">:set nonumber</PRE></BLOCKQUOTE></P><PCLASS="para">or:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">:set nonu</PRE></BLOCKQUOTE></P><PCLASS="para">To temporarily display the line numbers for a set of lines, you can usethe <CODECLASS="literal">#</CODE> sign.  For example:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">:1,10#</PRE></BLOCKQUOTE></P><PCLASS="para">would display the line numbers from line one to line ten.</P><PCLASS="para">As described in <ACLASS="xref"HREF="ch03_01.htm"TITLE="Moving Around in a Hurry ">Chapter 3, Moving Around in a Hurry </A>, you can also use the <KBDCLASS="keycap">[CTRL-G]</KBD>command to display the current line number.  You can thus identify the line numbers corresponding to the start and end of a block of text by moving to the start of the block, typing <KBDCLASS="keycap">[CTRL-G]</KBD>then moving to the end of the block and typing <KBDCLASS="keycap">[CTRL-G]</KBD>again.</P><PCLASS="para">Yet another way to identify line numbers is with the <EMCLASS="emphasis">ex</EM><CODECLASS="literal">=</CODE> command:<DLCLASS="variablelist"><DTCLASS="term"><CODECLASS="literal">:=</CODE></DT><DDCLASS="listitem"><PCLASS="para">Print the total number of lines.</P></DD><DTCLASS="term"><CODECLASS="literal">:.=</CODE></DT><DDCLASS="listitem"><PCLASS="para">Print the line number of the current line.</P></DD><DTCLASS="term"><CODECLASS="literal">:/</CODE><CODECLASS="replaceable"><I>pattern</I></CODE><CODECLASS="literal">/=</CODE></DT><DDCLASS="listitem"><PCLASS="para">Print the line number of the first line that matches <EMCLASS="emphasis">pattern</EM>.</P></DD></DL></P></DIV><DIVCLASS="sect2"><H3CLASS="sect2"><ACLASS="title"NAME="VI6-CH-5-SECT-2.3">5.2.3 Line Addressing Symbols </A></H3><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-4568"></A><ACLASS="indexterm"NAME="AUTOID-4571"></A><ACLASS="indexterm"NAME="AUTOID-4574"></A>You can also use symbols for line addresses.A dot (<CODECLASS="literal">.</CODE>) stands for the current line;  <CODECLASS="literal">$</CODE> stands for thelast line of the file.<CODECLASS="literal">%</CODE> stands for every line in the file;  it's the same as thecombination <CODECLASS="literal">1,$</CODE>.  These symbols can also be combined with absolute line addresses.For example:<DLCLASS="variablelist"><DTCLASS="term"><CODECLASS="literal">:.,$d</CODE></DT><DDCLASS="listitem"><PCLASS="para">Delete from current line to end of file.</P></DD><DTCLASS="term"><CODECLASS="literal">:20,.m$</CODE></DT><DDCLASS="listitem"><PCLASS="para">Move from line 20 through the current line to the end of the file.</P></DD><DTCLASS="term"><CODECLASS="literal">:%d</CODE></DT><DDCLASS="listitem"><PCLASS="para">Delete all the lines in a file.</P></DD><DTCLASS="term"><CODECLASS="literal">:%t$</CODE></DT><DDCLASS="listitem"><PCLASS="para">Copy all lines and place them at the end of the file (making aconsecutive duplicate).</P></DD></DL></P><PCLASS="para">In addition to an absolute line address, you can specify an addressrelative to the current line.The symbols + and - work like arithmetic operators.When placed before a number, these symbols add or subtract the value that follow.For example:<DLCLASS="variablelist"><DTCLASS="term"><CODECLASS="literal">:.,.+20d</CODE></DT><DDCLASS="listitem"><PCLASS="para">Delete from current line through the next 20 lines.</P></DD><DTCLASS="term"><CODECLASS="literal">:226,$m.-2</CODE></DT><DDCLASS="listitem"><PCLASS="para">Move lines 226 through the end of the file to two lines above the current line.</P></DD><DTCLASS="term"><CODECLASS="literal">:.,+20#</CODE></DT><DDCLASS="listitem"><PCLASS="para">Display line numbers from the current line to 20 lines further on in the file.</P></DD></DL></P><PCLASS="para">In fact, you don't need to type the dot (.) when you use + or -,because the current line is the assumed starting position.</P><PCLASS="para">Without a number following them, + and - are equivalent to +1 and-1, respectively.[1]Similarly, ++ and -- each extend the range byan additional line, and so on.The + and - can also be used withsearch patterns, as shown in the next section.</P><BLOCKQUOTECLASS="footnote"><PCLASS="para">[1] In a relative address, you shouldn't separate the plus or minussymbol from the number that follows it.For example, <CODECLASS="literal">+10</CODE> means &quot;10 lines following,&quot; but <CODECLASS="literal">+</CODE> <CODECLASS="literal">10</CODE>means &quot;11 lines following (<CODECLASS="literal">1</CODE> <CODECLASS="literal">+</CODE> <CODECLASS="literal">10</CODE>),&quot; which is probably not what you mean.</P></BLOCKQUOTE><PCLASS="para">The number <CODECLASS="literal">0</CODE> stands for the top of the file (imaginary line 0).<CODECLASS="literal">0</CODE> is equivalent to <CODECLASS="literal">1-</CODE>, and both allow you to move or copy lines to the very start of a file,before the first line of existing text.  For example:<DLCLASS="variablelist"><DTCLASS="term"><CODECLASS="literal">:-,+t0</CODE></DT><DDCLASS="listitem"><PCLASS="para">Copy three lines (the line above the cursor through the line below thecursor) and put them at the top of the file.  </P></DD></DL>&#13;</P></DIV><DIVCLASS="sect2"><H3CLASS="sect2"><ACLASS="title"NAME="VI6-CH-5-SECT-2.4">5.2.4 Search Patterns </A></H3><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-4642"></A><ACLASS="indexterm"NAME="AUTOID-4645"></A>Another way that <EMCLASS="emphasis">ex</EM> can address lines is by using searchpatterns.  For example:<DLCLASS="variablelist"><DTCLASS="term"><CODECLASS="literal">:/</CODE><CODECLASS="replaceable"><I>pattern</I></CODE><CODECLASS="literal">/d</CODE></DT><DDCLASS="listitem"><PCLASS="para">Delete the next line containing <EMCLASS="emphasis">pattern</EM>.</P></DD><DTCLASS="term"><CODECLASS="literal">:</CODE>/<CODECLASS="replaceable"><I>pattern</I></CODE><CODECLASS="literal">/+d</CODE></DT><DDCLASS="listitem"><PCLASS="para">Delete the line <EMCLASS="emphasis">below</EM> the next line containing <EMCLASS="emphasis">pattern</EM>.(You could also use <CODECLASS="literal">+1</CODE> instead of <CODECLASS="literal">+</CODE> alone.)</P></DD><DTCLASS="term"><CODECLASS="literal">:</CODE>/<CODECLASS="replaceable"><I>pattern1</I></CODE><CODECLASS="literal">/,/</CODE><CODECLASS="replaceable"><I>pattern2</I></CODE><CODECLASS="literal">/d</CODE></DT><DDCLASS="listitem"><PCLASS="para">Delete from the first line containing <EMCLASS="emphasis">pattern1</EM> through the first line containing <EMCLASS="emphasis">pattern2</EM>.</P></DD><DTCLASS="term"><CODECLASS="literal">:.,/</CODE><CODECLASS="replaceable"><I>pattern</I></CODE><CODECLASS="literal">/m23</CODE></DT><DDCLASS="listitem"><PCLASS="para">Take text from current line (<CODECLASS="literal">.</CODE>) through the firstline containing <EMCLASS="emphasis">pattern</EM> and put after line&nbsp;23.</P></DD></DL>&#13;</P><PCLASS="para">Note that patterns are delimited by a slash both <EMCLASS="emphasis">before</EM> and <EMCLASS="emphasis">after</EM>.</P><PCLASS="para">If you make deletions by pattern with <EMCLASS="emphasis">vi</EM> and <EMCLASS="emphasis">ex</EM>, there isa difference in the way the two editors operate.  Suppose you have in your file <EMCLASS="emphasis">practice</EM> the lines:<TABLECLASS="informaltable"><TBODYCLASS="tbody"><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">With a screen editor you can scroll the page, move the cursor, <UCLASS="cursor">d</U>elete lines, insertcharacters and more, while seeing results  of your edits as you make them.</PRE></BLOCKQUOTE></TD></TR></TBODY></TABLE></P><PCLASS="para"><TABLECLASS="informaltable"><THEADCLASS="thead"><TRCLASS="row"VALIGN="TOP"><THCLASS="entry"ALIGN="LEFT"ROWSPAN="1"COLSPAN="1">Keystrokes</TH><THCLASS="entry"ALIGN="LEFT"ROWSPAN="1"COLSPAN="1">Results</TH></TR></THEAD><TBODYCLASS="tbody"><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><CODECLASS="literal">d/while</CODE></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">With a screen editor you can scroll the page, move the cursor, <UCLASS="cursor">w</U>hile seeing results  of your edits as you make them.</PRE></BLOCKQUOTE></TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><PCLASS="para">The <EMCLASS="emphasis">vi</EM> delete to <EMCLASS="emphasis">pattern</EM> command deletes from the cursor up to the word <EMCLASS="emphasis">while</EM> but leaves the remainder of both lines.</P></TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><CODECLASS="literal">:.,/while/d</CODE></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">With a screen editor you can scroll the <UCLASS="cursor">o</U>f your edits as you make them.</PRE></BLOCKQUOTE></TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><PCLASS="para">The <EMCLASS="emphasis">ex</EM> command deletes the entire range of addressed lines; in this case both the current line and the line containing the pattern.  All lines are deleted in their entirety.</P></TD></TR></TBODY></TABLE></P></DIV><DIVCLASS="sect2"><H3CLASS="sect2"><ACLASS="title"NAME="VI6-CH-5-SECT-2.5">5.2.5 Redefining the Current Line Position </A></H3><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-4743"></A>Sometimes, using a relative line address in a commandcan give you unexpected results.For example, suppose the cursor is online 1, and you want to print line 100 plus the five lines below it.  If you type:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">:100,+5 p</PRE></BLOCKQUOTE></P><PCLASS="para">you'll get an error message saying, &quot;First address exceedssecond.&quot;  The reason the command fails is that the secondaddress is calculated relative to the current cursorposition (line 1), so your command is really saying this:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">:100,6 p</PRE></BLOCKQUOTE></P><PCLASS="para">What you need is some way to tell the command to think ofline 100 as the &quot;current line,&quot; even though the cursor ison line 1.  </P><PCLASS="para"><EMCLASS="emphasis">ex</EM> provides such a way.When you use a semicolon instead of a comma, the first line address is recalculated as the current line.For example, the command:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">:100;+5 p</PRE></BLOCKQUOTE></P><PCLASS="para">prints the desired lines.  The +5 is now calculatedrelative to line 100.  A semicolon is useful with search patterns as well as absolute addresses.For example,to print the next line containing <EMCLASS="emphasis">pattern</EM>, plusthe 10 lines that follow it, enter the command:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">:/pattern/;+10 p</PRE></BLOCKQUOTE></P></DIV><DIVCLASS="sect2"><H3CLASS="sect2"><ACLASS="title"NAME="VI6-CH-5-SECT-2.6">5.2.6 Global Searches </A></H3><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-4763"></A>You already know how to use <CODECLASS="literal">/</CODE> (slash) in <EMCLASS="emphasis">vi</EM> to search forpatterns of characters in your files.<EMCLASS="emphasis">ex</EM> has a global command, <CODECLASS="literal">g</CODE>, that lets you search fora pattern and display all lines containing the pattern when it findsthem.The command <CODECLASS="literal">:g!</CODE> does the opposite of <CODECLASS="literal">:g</CODE>.  Use<CODECLASS="literal">:g!</CODE> (or its synonym <CODECLASS="literal">:v</CODE>) to search for all lines thatdo <EMCLASS="emphasis">not</EM> contain <EMCLASS="emphasis">pattern</EM>.</P><PCLASS="para">You can use the global command on all lines in the file, or you canuse line addresses to limit a global search to specified lines or to arange of lines.</P><DLCLASS="variablelist"><DTCLASS="term"><CODECLASS="literal">:g/</CODE><CODECLASS="replaceable"><I>pattern</I></CODE></DT><DDCLASS="listitem"><PCLASS="para">Finds (moves to) the last occurrence of <EMCLASS="emphasis">pattern</EM> in the file.</P></DD><DTCLASS="term"><CODECLASS="literal">:g/</CODE><CODECLASS="replaceable"><I>pattern</I></CODE><CODECLASS="literal">/p</CODE></DT><DDCLASS="listitem"><PCLASS="para">Finds and displays all lines in the file containing <EMCLASS="emphasis">pattern</EM>.</P></DD><DTCLASS="term"><CODECLASS="literal">:g!/</CODE><CODECLASS="replaceable"><I>pattern</I></CODE><CODECLASS="literal">/nu</CODE></DT><DDCLASS="listitem"><PCLASS="para">Finds and displays all lines in the file that don't contain <EMCLASS="emphasis">pattern</EM>;also displays line number for each line found.</P></DD><DTCLASS="term"><CODECLASS="literal">:60,124g/</CODE><CODECLASS="replaceable"><I>pattern</I></CODE><CODECLASS="literal">/p</CODE></DT><DDCLASS="listitem"><PCLASS="para">Finds and displays any lines between lines 60 and 124 containing<EMCLASS="emphasis">pattern</EM>.</P></DD></DL><PCLASS="para">As you might expect, <CODECLASS="literal">g</CODE> can also be used for global replacements.  We'll talk about that in <ACLASS="xref"HREF="ch06_01.htm"TITLE="Global Replacement ">Chapter 6, Global Replacement </A>. </P></DIV><DIVCLASS="sect2"><H3CLASS="sect2"><ACLASS="title"NAME="VI6-CH-5-SECT-2.7">5.2.7 Combining ex Commands </A></H3><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-4815"></A>You don't always need to type a colon to begin a new <EMCLASS="emphasis">ex</EM> command.  In <EMCLASS="emphasis">ex</EM>, the vertical bar (<CODECLASS="literal">|</CODE>) is a command separator, allowing you tocombine multiple commands from the same <EMCLASS="emphasis">ex</EM> prompt (in muchthe same way that a semicolon separates multiple commands at theUNIX shell prompt).  When you use the <CODECLASS="literal">|</CODE>, keep track of the line addresses you specify.If one command affects the order of lines in the file,the next command does its work using the new line positions.For example:</P><DLCLASS="variablelist"><DTCLASS="term"><CODECLASS="literal">:1,3d&nbsp;|&nbsp;s/thier/their/</CODE></DT><DDCLASS="listitem"><PCLASS="para">Delete lines 1 through 3 (leaving you now on the top line of thefile); then make a substitution on the current line (which wasline 4 before you invoked the <EMCLASS="emphasis">ex</EM> prompt).</P></DD><DTCLASS="term"><CODECLASS="literal">:1,5&nbsp;m&nbsp;10&nbsp;|&nbsp;g/<CODECLASS="replaceable"><I>pattern</I></CODE>/nu</CODE></DT><DDCLASS="listitem"><PCLASS="para">Move lines 1 through 5 after line 10, and then display alllines (with numbers) containing <EMCLASS="emphasis">pattern</EM>.</P></DD></DL><PCLASS="para">Note the use of spaces to make the commands easier to see.</P></DIV></DIV><DIVCLASS="htmlnav"><P></P><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch05_01.htm"TITLE="5.1 ex Commands "><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 5.1 ex Commands "BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="book"HREF="index.htm"TITLE="Learning the vi Editor"><IMGSRC="../gifs/txthome.gif"ALT="Learning the vi Editor"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch05_03.htm"TITLE="5.3 Saving and Exiting Files "><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 5.3 Saving and Exiting Files "BORDER="0"></A></TD></TR><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172">5.1 ex Commands </TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="index"HREF="index/idx_a.htm"TITLE="Book Index"><IMGSRC="../gifs/index.gif"ALT="Book Index"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172">5.3 Saving and Exiting Files </TD></TR></TABLE><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><IMGSRC="../gifs/smnavbar.gif"USEMAP="#map"BORDER="0"ALT="The UNIX CD Bookshelf Navigation"><MAPNAME="map"><AREASHAPE="RECT"COORDS="0,0,73,21"HREF="../index.htm"ALT="The UNIX CD Bookshelf"><AREASHAPE="RECT"COORDS="74,0,163,21"HREF="../upt/index.htm"ALT="UNIX Power Tools"><AREASHAPE="RECT"COORDS="164,0,257,21"HREF="../unixnut/index.htm"ALT="UNIX in a Nutshell"><AREASHAPE="RECT"COORDS="258,0,321,21"HREF="index.htm"ALT="Learning the vi Editor"><AREASHAPE="RECT"COORDS="322,0,378,21"HREF="../sedawk/index.htm"ALT="sed &amp; awk"><AREASHAPE="RECT"COORDS="379,0,438,21"HREF="../ksh/index.htm"ALT="Learning the Korn Shell"><AREASHAPE="RECT"COORDS="439,0,514,21"HREF="../lrnunix/index.htm"ALT="Learning the UNIX Operating System"></MAP></DIV></BODY></HTML>