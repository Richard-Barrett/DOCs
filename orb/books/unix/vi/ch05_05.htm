<HTML><HEAD><TITLE>[Chapter 5] 5.5 Editing Multiple Files </TITLE><METANAME="DC.title"CONTENT="Learning the vi Editor"><METANAME="DC.creator"CONTENT="Linda Lamb"><METANAME="DC.publisher"CONTENT="O'Reilly &amp; Associates, Inc."><METANAME="DC.date"CONTENT="1998-08-03T20:51:46Z"><METANAME="DC.type"CONTENT="Text.Monograph"><METANAME="DC.format"CONTENT="text/html"SCHEME="MIME"><METANAME="DC.source"CONTENT="0-937175-67-6"SCHEME="ISBN"><METANAME="DC.language"CONTENT="en-US"><METANAME="generator"CONTENT="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><LINKREV="made"HREF="mailto:online-books@oreilly.com"TITLE="Online Books Comments"><LINKREL="up"HREF="ch05_01.htm"TITLE="5. Introducing the ex Editor "><LINKREL="prev"HREF="ch05_04.htm"TITLE="5.4 Copying a File into Another File "><LINKREL="next"HREF="ch06_01.htm"TITLE="6. Global Replacement "></HEAD><BODYBGCOLOR="#FFFFFF"TEXT="#000000"><DIVCLASS="htmlnav"><H1><IMGSRC="gifs/smbanner.gif"ALT="Learning the vi Editor"USEMAP="#srchmap"BORDER="0"></H1><MAPNAME="srchmap"><AREASHAPE="RECT"COORDS="0,0,466,65"HREF="index.htm"ALT="Learning the vi Editor"><AREASHAPE="RECT"COORDS="467,0,514,18"HREF="../search/vsrch.htm"ALT="Search this book"></MAP><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch05_04.htm"TITLE="5.4 Copying a File into Another File "><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 5.4 Copying a File into Another File "BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><B><FONTFACE="ARIEL,HELVETICA,HELV,SANSERIF"SIZE="-1">Chapter 5<BR>Introducing the ex Editor </FONT></B></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="CHAPTER"HREF="ch06_01.htm"TITLE="6. Global Replacement "><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 6. Global Replacement "BORDER="0"></A></TD></TR></TABLE>&nbsp;<HRALIGN="LEFT"WIDTH="515"TITLE="footer"></DIV><DIVCLASS="SECT1"><H2CLASS="sect1"><ACLASS="title"NAME="VI6-CH-5-SECT-5">5.5 Editing Multiple Files </A></H2><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-5074"></A><ACLASS="indexterm"NAME="AUTOID-5077"></A><EMCLASS="emphasis">ex</EM> commands enable you to switch between multiple files.  The advantage to editing multiple files is speed.  When you are sharing the system withother users, it takes time to exit and reenter <EMCLASS="emphasis">vi</EM> for eachfile you want to edit.  Staying in thesame editing session and traveling between files is not only fasterfor access, but you also save abbreviations and command sequences that you have defined (see <ACLASS="xref"HREF="ch07_01.htm"TITLE="Advanced Editing ">Chapter 7, Advanced Editing </A>,and you keep yank buffers so that you can copy text from one file to another.</P><DIVCLASS="sect2"><H3CLASS="sect2"><ACLASS="title"NAME="VI6-CH-5-SECT-5.1">5.5.1 Invoking vi on Multiple Files one</A></H3><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-5086"></A><ACLASS="indexterm"NAME="AUTOID-5089"></A>When you first invoke <EMCLASS="emphasis">vi</EM>, you can name more than one fileto edit, and then use <EMCLASS="emphasis">ex</EM> commands totravel between the files.</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">$ <CODECLASS="userinput"><B>vi file1 file2</B></CODE></PRE></BLOCKQUOTE></P><PCLASS="para">invokes <EMCLASS="emphasis">file1</EM> first.  After you have finished editing the first file,the <EMCLASS="emphasis">ex</EM> command <CODECLASS="literal">:w</CODE> writes (saves) <EMCLASS="emphasis">file1</EM>and <CODECLASS="literal">:n</CODE> calls in the next file (<EMCLASS="emphasis">file2</EM>).</P><PCLASS="para">Suppose you want to edit two files, <EMCLASS="emphasis">practice</EM>and <EMCLASS="emphasis">note</EM>.<TABLECLASS="informaltable"><THEADCLASS="thead"><TRCLASS="row"VALIGN="TOP"><THCLASS="entry"ALIGN="LEFT"ROWSPAN="1"COLSPAN="1">Keystrokes</TH><THCLASS="entry"ALIGN="LEFT"ROWSPAN="1"COLSPAN="1">Results</TH></TR></THEAD><TBODYCLASS="tbody"><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><CODECLASS="literal">vi practice note</CODE></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><BLOCKQUOTECLASS="screen"><PRECLASS="screen"><UCLASS="cursor">W</U>ith a screen editor you can scroll the the page, move the cursor, delete lines, insert characters, and more, while seeing</PRE></BLOCKQUOTE></TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><PCLASS="para">Open the two files <EMCLASS="emphasis">practice</EM> and <EMCLASS="emphasis">note</EM>.  The first-named file, <EMCLASS="emphasis">practice</EM>, appears on your screen.Perform any edits.</P></TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><CODECLASS="literal">:w</CODE></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">&quot;practice&quot; 6 lines 328 characters</PRE></BLOCKQUOTE></TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><PCLASS="para">Save the edited file <EMCLASS="emphasis">practice</EM> with the <EMCLASS="emphasis">ex</EM> command <CODECLASS="literal">w</CODE>.  Press RETURN.</P></TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><CODECLASS="literal">:n</CODE></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><BLOCKQUOTECLASS="screen"><PRECLASS="screen"><UCLASS="cursor">D</U>ear Mr.  Henshaw:Thank you for the prompt . . .</PRE></BLOCKQUOTE></TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><PCLASS="para">Call in the next file, <EMCLASS="emphasis">note</EM>, with the <EMCLASS="emphasis">ex</EM> command <CODECLASS="literal">n</CODE>.  Press RETURN.  Perform any edits.</P></TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><CODECLASS="literal">:x</CODE></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">&quot;note&quot; 23 lines 1343 characters</PRE></BLOCKQUOTE></TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><PCLASS="para">Save the second file, <EMCLASS="emphasis">note</EM>, and quit the editing session.</P></TD></TR></TBODY></TABLE></P></DIV><DIVCLASS="sect2"><H3CLASS="sect2"><ACLASS="title"NAME="VI6-CH-5-SECT-5.2">5.5.2 Calling In New Files </A></H3><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-5167"></A><ACLASS="indexterm"NAME="AUTOID-5170"></A>You don't have to call in multiple files at the beginning of yourediting session.  You can switch to another file at any time with the<EMCLASS="emphasis">ex</EM> command <CODECLASS="literal">:e</CODE>.  If you want to edit another file within <EMCLASS="emphasis">vi</EM>, you first need to save your current file(<CODECLASS="literal">:w</CODE>), then give the command:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">:e <EMCLASS="emphasis">filename</EM></PRE></BLOCKQUOTE></P><PCLASS="para">Suppose you are editing the file <EMCLASS="emphasis">practice</EM> and want to edit the file<EMCLASS="emphasis">letter</EM>, then return to <EMCLASS="emphasis">practice</EM>.  <TABLECLASS="informaltable"><THEADCLASS="thead"><TRCLASS="row"VALIGN="TOP"><THCLASS="entry"ALIGN="LEFT"ROWSPAN="1"COLSPAN="1">Keystrokes</TH><THCLASS="entry"ALIGN="LEFT"ROWSPAN="1"COLSPAN="1">Results</TH></TR></THEAD><TBODYCLASS="tbody"><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><CODECLASS="literal">:w</CODE></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">&quot;practice&quot; 6 lines 328 characters</PRE></BLOCKQUOTE></TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><PCLASS="para">Save <EMCLASS="emphasis">practice</EM> with <CODECLASS="literal">w</CODE> and press RETURN.<EMCLASS="emphasis">practice</EM> is saved and remains on the screen.  You can now switch to another file, because your edits are saved.</P></TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><CODECLASS="literal">:e letter</CODE></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">&quot;letter&quot; 23 lines 1344 characters</PRE></BLOCKQUOTE></TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><PCLASS="para">Call in the file <EMCLASS="emphasis">letter</EM> with <CODECLASS="literal">e</CODE> and press RETURN.Perform any edits.</P></TD></TR></TBODY></TABLE> </P><PCLASS="para"><EMCLASS="emphasis">vi</EM> &quot;remembers&quot; two filenames at a time as the current andalternate filenames.  These can be referred to by the symbols <CODECLASS="literal">%</CODE> (current filename)and <CODECLASS="literal">#</CODE> (alternate filename).# is particularly useful with <CODECLASS="literal">:e</CODE>, since it allows you toswitch easily back and forth between two files.  In the example given just above, you could return tothe first file, <EMCLASS="emphasis">practice</EM>, by typing the command <CODECLASS="literal">:e#</CODE>.You could also read the file <EMCLASS="emphasis">practice</EM> into the current fileby typing <CODECLASS="literal">:r#</CODE>.</P><PCLASS="para">If you have not first saved the current file, <EMCLASS="emphasis">vi</EM> will not allowyou to switch files with <CODECLASS="literal">:e</CODE> or <CODECLASS="literal">:n</CODE> unless you tell it imperatively todo so by adding an exclamation point after the command.</P><PCLASS="para">For example, if after making some edits to <EMCLASS="emphasis">letter</EM>, you wanted to discard the edits and return to <EMCLASS="emphasis">practice</EM>, you could type <CODECLASS="literal">:e!#</CODE>.</P><PCLASS="para">The command:<ACLASS="indexterm"NAME="AUTOID-5234"></A><ACLASS="indexterm"NAME="AUTOID-5237"></A><ACLASS="indexterm"NAME="AUTOID-5240"></A></P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">:e!</PRE></BLOCKQUOTE></P><PCLASS="para">is also useful.  It discards your edits and returns to the last savedversion of the current file.</P><PCLASS="para">In contrast to the <CODECLASS="literal">#</CODE> symbol, <CODECLASS="literal">%</CODE> is useful mainly when writing out the contents of the current buffer to a new file.  For example, a few pages earlier,in the section &quot;Renaming the Buffer,&quot; we showed how to save a secondversion of the file <EMCLASS="emphasis">practice</EM> with the command:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">:w practice.new</PRE></BLOCKQUOTE></P><PCLASS="para">Since <CODECLASS="literal">%</CODE> stands for the current filename, the previous line could also have been typed:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">:w %.new</PRE></BLOCKQUOTE></P></DIV><DIVCLASS="sect2"><H3CLASS="sect2"><ACLASS="title"NAME="VI6-CH-5-SECT-5.3">5.5.3 Edits Between Files </A></H3><PCLASS="para"><ACLASS="indexterm"NAME="AUTOID-5259"></A><ACLASS="indexterm"NAME="AUTOID-5262"></A><ACLASS="indexterm"NAME="AUTOID-5265"></A><ACLASS="indexterm"NAME="VI6-CH-5-IX-VI-YANK-BETWEEN"></A>When you give a yank buffer a one-letter name,you have a convenient way to move text from one file toanother.  Named buffers are not cleared when a new file is loaded intothe <EMCLASS="emphasis">vi</EM> buffer with the <CODECLASS="literal">:e</CODE> command.  Thus, by yanking or deleting text from one file (into multiple named buffers ifnecessary), calling in a new file with <CODECLASS="literal">:e</CODE>, and putting thenamed buffer into the new file, you can transfer material between files.</P><PCLASS="para">The following example illustrates how to transfer text from one file toanother.</P><TABLECLASS="informaltable"><THEADCLASS="thead"><TRCLASS="row"VALIGN="TOP"><THCLASS="entry"ALIGN="LEFT"ROWSPAN="1"COLSPAN="1">Keystrokes</TH><THCLASS="entry"ALIGN="LEFT"ROWSPAN="1"COLSPAN="1">Results</TH></TR></THEAD><TBODYCLASS="tbody"><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><CODECLASS="literal">&quot;f4yy</CODE></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">With a <UCLASS="cursor">s</U>creen editor you can scrollthe page, move the cursor, delete lines,insert characters, and more, while seeingthe results of the edits as you make them</PRE></BLOCKQUOTE></TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><PCLASS="para">Yank four lines into buffer f.</P></TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><CODECLASS="literal">:w</CODE></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">&quot;practice&quot; 6 lines 238 characters</PRE></BLOCKQUOTE></TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><PCLASS="para">Save the file.</P></TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><CODECLASS="literal">:e letter</CODE></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">Dear Mr.  Henshaw:I thought that you would<UCLASS="cursor">b</U>e interested to know that:Yours truly,</PRE></BLOCKQUOTE></TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><PCLASS="para">Enter the file <EMCLASS="emphasis">letter</EM> with <CODECLASS="literal">:e</CODE>.  Move cursor to where the copied text will be placed.</P></TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><CODECLASS="literal">&quot;fp</CODE></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">Dear Mr.  Henshaw:I thought that you wouldbe interested to know that:<UCLASS="cursor">W</U>ith a screen editor you can scrollthe page, move the cursor, delete lines,insert characters, and more, while seeingthe results of the edits as you make themYours truly,</PRE></BLOCKQUOTE></TD></TR><TRCLASS="row"VALIGN="TOP"><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"></TD><TDCLASS="entry"ROWSPAN="1"COLSPAN="1"><PCLASS="para">Place yanked text from named buffer f below the cursor.</P></TD></TR></TBODY></TABLE><PCLASS="para">Another way to move text from one file to another is to use the<EMCLASS="emphasis">ex</EM> commands <CODECLASS="literal">:ya</CODE> (yank) and <CODECLASS="literal">:pu</CODE> (put).These commands work the same way as the equivalent <EMCLASS="emphasis">vi</EM> commands<CODECLASS="literal">y</CODE> and <CODECLASS="literal">p</CODE>, but they are used with <EMCLASS="emphasis">ex</EM>'s lineaddressing capability and named buffers.For example:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen"><CODECLASS="literal">:160,224ya  a</CODE></PRE></BLOCKQUOTE></P><PCLASS="para">would yank (copy) lines 160 through 224 into buffer a.Next you would move with <CODECLASS="literal">:e</CODE> to the file where you wantto put these lines.Place the cursor on the line where you want to put the yanked lines.Then type:</P><PCLASS="para"><BLOCKQUOTECLASS="screen"><PRECLASS="screen">:pu a</PRE></BLOCKQUOTE></P><PCLASS="para">to put the contents of buffer <CODECLASS="literal">a</CODE> after the current line.<ACLASS="indexterm"NAME="AUTOID-5343"></A></P></DIV></DIV><DIVCLASS="htmlnav"><P></P><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><TABLEWIDTH="515"BORDER="0"CELLSPACING="0"CELLPADDING="0"><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172"><ACLASS="SECT1"HREF="ch05_04.htm"TITLE="5.4 Copying a File into Another File "><IMGSRC="../gifs/txtpreva.gif"ALT="Previous: 5.4 Copying a File into Another File "BORDER="0"></A></TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="book"HREF="index.htm"TITLE="Learning the vi Editor"><IMGSRC="../gifs/txthome.gif"ALT="Learning the vi Editor"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172"><ACLASS="CHAPTER"HREF="ch06_01.htm"TITLE="6. Global Replacement "><IMGSRC="../gifs/txtnexta.gif"ALT="Next: 6. Global Replacement "BORDER="0"></A></TD></TR><TR><TDALIGN="LEFT"VALIGN="TOP"WIDTH="172">5.4 Copying a File into Another File </TD><TDALIGN="CENTER"VALIGN="TOP"WIDTH="171"><ACLASS="index"HREF="index/idx_a.htm"TITLE="Book Index"><IMGSRC="../gifs/index.gif"ALT="Book Index"BORDER="0"></A></TD><TDALIGN="RIGHT"VALIGN="TOP"WIDTH="172">6. Global Replacement </TD></TR></TABLE><HRALIGN="LEFT"WIDTH="515"TITLE="footer"><IMGSRC="../gifs/smnavbar.gif"USEMAP="#map"BORDER="0"ALT="The UNIX CD Bookshelf Navigation"><MAPNAME="map"><AREASHAPE="RECT"COORDS="0,0,73,21"HREF="../index.htm"ALT="The UNIX CD Bookshelf"><AREASHAPE="RECT"COORDS="74,0,163,21"HREF="../upt/index.htm"ALT="UNIX Power Tools"><AREASHAPE="RECT"COORDS="164,0,257,21"HREF="../unixnut/index.htm"ALT="UNIX in a Nutshell"><AREASHAPE="RECT"COORDS="258,0,321,21"HREF="index.htm"ALT="Learning the vi Editor"><AREASHAPE="RECT"COORDS="322,0,378,21"HREF="../sedawk/index.htm"ALT="sed &amp; awk"><AREASHAPE="RECT"COORDS="379,0,438,21"HREF="../ksh/index.htm"ALT="Learning the Korn Shell"><AREASHAPE="RECT"COORDS="439,0,514,21"HREF="../lrnunix/index.htm"ALT="Learning the UNIX Operating System"></MAP></DIV></BODY></HTML>