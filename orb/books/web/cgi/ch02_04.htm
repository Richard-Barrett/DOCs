<!DOCTYPE HTML PUBLIC "-//ORA//DTD CD HTML 3.2//EN"><HTML><HEAD><TITLE>[Chapter 2] 2.4 Extra Path Information</TITLE><META NAME="author" CONTENT="Shishir Gundavaram"><META NAME="date" CONTENT="Mon Mar 17 13:21:14 1997"><META NAME="form" CONTENT="html"><META NAME="metadata" CONTENT="dublincore.0.1"><META NAME="objecttype" CONTENT="book part"><META NAME="otheragent" CONTENT="gmat dbtohtml"><META NAME="publisher" CONTENT="O'Reilly &amp; Associates, Inc."><META NAME="source" CONTENT="SGML"><META NAME="subject" CONTENT="cgi programming"><META NAME="title" CONTENT="CGI Programming on the World Wide Web"><!-- JavaScript: pathcont.js --></HEAD><BODY BGCOLOR="#FFFFFF"><DIV CLASS=htmlnav><H1><IMG SRC="gifs/smbanner.gif" ALT="CGI Programming on the World Wide Web"></H1><table width=515 border=0 cellpadding=0 cellspacing=0><tr><td width=172 align=left valign=top><A HREF="ch02_03.htm"><IMG SRC="gifs/txtpreva.gif" ALT="Previous" border=0></A></td><td width=171 align=center valign=top><b>Chapter 2</b></td><td width=172 align=right valign=top><A HREF="ch02_05.htm"><IMG SRC="gifs/txtnexta.gif" ALT="Next" border=0></A></td></tr></table><!-- JavaScript: prev.js -->&nbsp;<!-- JavaScript: next.js --><hr align=left width=515></DIV><DIV CLASS=sect1><h2 CLASS=sect1><A CLASS="TITLE" NAME="CGI-CHP-2-SECT-4">2.4 Extra Path Information</A></h2><P CLASS=para>Besides passingquery information to a CGI script, you can also pass additionaldata, known as extra path information, as part of the URL. The extrapath information depends on the server knowing where the name ofthe program ends, and understanding that anything following theprogram name is "extra." Here is how you would call a script withextra path information:<DIV CLASS=screen><P><PRE>http://some.machine/cgi-bin/display.pl/cgi/cgi_doc.txt</PRE></DIV><P CLASS=para>Since the server knows that <I CLASS=emphasis>display.pl</I>is the name of the program, the string "/cgi/cgi_doc.txt" is storedin the environment variable PATH_INFO. Meanwhile, thevariable PATH_TRANSLATED is also set, which mapsthe information stored in PATH_INFO to the documentroot directory (e.g., <I CLASS=emphasis>/usr/local/etc/httpd/ public/cgi/cgi-doc.txt</I>).<P CLASS=para>Here is a CGI script-<I CLASS=emphasis>display.pl</I>-thatcan be used to display text files located in the document root hierarchy:<DIV CLASS=screen><P><PRE>#!/usr/local/bin/perl$plaintext_file = $ENV{'PATH_TRANSLATED'};print "Content-type: text/plain", "\n\n";if ($plaintext_file =~ /\.\./) {    print "Sorry! You have entered invalid characters in the filename.", "\n";	   print "Please check your specification and try again.", "\n";} else {    if (open (FILE, "&lt;" . $plaintext_file)) {        while (&lt;FILE&gt;) {             print;        }        close (FILE);    } else {        print "Sorry! The file you specified cannot be read!", "\n";		  }}exit (0);</PRE></DIV><P CLASS=para>In this example, we perform a simple security check. We makesure that the user didn't pass path information containing "..".This is so that the user cannot access files located outside ofthe document root directory.<P CLASS=para>Instead of using the PATH_TRANSLATED environmentvariable, you can use a combination of PATH_INFOand DOCUMENT_ROOT,which contains the physical path to the document root directory.The variable PATH_TRANSLATED is equal to thefollowing statement:<DIV CLASS=screen><P><PRE>$path_translated = join ("/", $ENV{'DOCUMENT_ROOT'}, $ENV{'PATH_INFO'};</PRE></DIV><P CLASS=para>However, the DOCUMENT_ROOT variable isnot set by all servers, and so it is much safer and easier to usePATH_TRANSLATED.</DIV><DIV CLASS=htmlnav><P><HR align=left width=515><table width=515 border=0 cellpadding=0 cellspacing=0><tr><td width=172 align=left valign=top><A HREF="ch02_03.htm"><IMG SRC="gifs/txtpreva.gif" ALT="Previous" border=0></A></td><td width=171 align=center valign=top><a href="index.htm"><IMG SRC="gifs/txthome.gif" ALT="Home" border=0></a></td><td width=172 align=right valign=top><A HREF="ch02_05.htm"><IMG SRC="gifs/txtnexta.gif" ALT="Next" border=0></A></td></tr><tr><td width=172 align=left valign=top>Accessing Form Input</td><td width=171 align=center valign=top><a href="index/idx_0.htm">Book Index</a></td><td width=172 align=right valign=top>Other Languages Under UNIX</td></tr></table><!-- JavaScript: prev.js -->&nbsp;<!-- JavaScript: next.js --></DIV></BODY></HTML>