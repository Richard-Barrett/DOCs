<!DOCTYPE HTML PUBLIC "-//ORA//DTD CD HTML 3.2//EN"><HTML><HEAD><TITLE>[Chapter 12] 12.6 Transparent Images</TITLE><META NAME="author" CONTENT="Chuck Musciano and Bill Kennedy"><META NAME="date" CONTENT="Mon Mar 17 09:04:03 1997"><META NAME="form" CONTENT="html"><META NAME="metadata" CONTENT="dublincore.0.1"><META NAME="objecttype" CONTENT="book part"><META NAME="otheragent" CONTENT="gmat dbtohtml"><META NAME="publisher" CONTENT="O'Reilly &amp; Associates, Inc."><META NAME="source" CONTENT="SGML"><META NAME="subject" CONTENT="HTML"><META NAME="title" CONTENT="HTML: The Definitive Guide"><!-- JavaScript: pathcont.js --></HEAD><BODY BGCOLOR="#FFFFFF"><DIV CLASS=htmlnav><H1><IMG SRC="gifs/smbanner.gif" ALT="HTML: The Definitive Guide"></H1><table width=515 border=0 cellpadding=0 cellspacing=0><tr><td width=172 align=left valign=top><A HREF="ch12_05.htm"><IMG SRC="gifs/txtpreva.gif" ALT="Previous" border=0></A></td><td width=171 align=center valign=top><b>Chapter 12</b></td><td width=172 align=right valign=top><A HREF="appa_01.htm"><IMG SRC="gifs/txtnexta.gif" ALT="Next" border=0></A></td></tr></table><!-- JavaScript: prev.js -->&nbsp;<!-- JavaScript: next.js --><hr align=left width=515></DIV><DIV CLASS=sect1><h2 CLASS=sect1><A CLASS="TITLE" NAME="USING-HTML-CH12-SECT-6">12.6 Transparent Images</A></h2><P CLASS=para><A NAME="CH12.TRANS1"></A><A NAME="CH12.TRANS2"></A>One of the most popular tricks you'll find on everyone'sHTML pages is the transparent image. They let thebackground show through, giving the remainder of the image theappearance of floating on the page. The effect is clever and is theonly way to put nonrectangular images in your HTMLdocument displays. <I CLASS=emphasis>[image formats, <A HREF="ch05_02.htm#USING-HTML-CH05-SECT-2.1">5.2.1</A>]</I><P CLASS=para>Creating a transparent image is easy, once you understand how theprocess works and which images are candidates for transparency.<DIV CLASS=sect2><h3 CLASS=sect2><A CLASS="TITLE" NAME="USING-HTML-CH12-SECT-6.1">Colors, Maps, and Indices</A></h3><P CLASS=para><A NAME="CH12.COLOR"></A><A NAME="CH12.COLORMAPS"></A>Images represent their colors in one of two ways: directly, or througha <I CLASS=emphasis>colormap</I>.<P CLASS=para>In the direct method, each pixel in the image contains the actualRGB values that define the color of thatpixel. Such images are often called <I CLASS=emphasis>true color</I> images, since the number of distinct colors in the image isgenerally quite large. It is often the case that very few pixels in atrue color image share the same color, with many pixels having subtlydifferent variations of the same color. The most popular image formatusing this representation method is the JPEG format.<P CLASS=para>Colormap-based images keep all the different colors used in the imagein a table known as the colormap. Each pixel in the image contains anindex into the table of that pixel's color. In general, thetable is fairly small, usually less than 256 colors. This means thatmany pixels share the same color, and that whole groups of pixels canhave their color changed by simply altering the appropriate entry inthe colormap. The most common image format using colormaps is theGIF format.<P CLASS=para>Image transparency is only possible with images containing a colormap,and is currently only defined for images using the GIF89a format. Inthis format, one entry in the colormap is tagged as the transparentcolor. All pixels containing the index of that entry will be madetransparent when the image is displayed.<P CLASS=para>For example, consider an image containing eight colors. The colormapis eight entries long, with indices numbered zero through seven. Eachpixel in the image contains a value from zero to seven, correspondingto its color in the colormap. If you indicate that the second entry inthe color map, whose index is one, will be transparent, all pixelswith the value one will be made transparent when the image isrendered.</DIV><DIV CLASS=sect2><h3 CLASS=sect2><A CLASS="TITLE" NAME="USING-HTML-CH12-SECT-6.2">Creating a Potentially Transparent Image</A></h3><P CLASS=para>The cookbook way to create a transparent image is easy: take aconventional image; determine the color to be made transparent; andconvert the image to GIF89a format, marking that color as transparent.<P CLASS=para>The most difficult part for most people is finding a conventionalimage that is suitable for conversion. To make the background of animage transparent, the <I CLASS=emphasis>entire</I> background must beone color. Unfortunately, many images do not meet this simplecriteria. Scanned images, for example, usually have backgrounds thatare a mix of several slightly different shades of one color. Sinceonly one color can be made transparent, the result is a mottledbackground, part transparent and part opaque.<P CLASS=para>Many image-editing tools use a process known as<I CLASS=emphasis>dithering</I> to create certain colors in animage. Dithered colors are not pure, but are a mix of several othercolors. This mixture is not amenable to transparency. You'lloften find dithering being used on systems with small colormaps, likeconventional 16-color VGA displays on some PCs.<P CLASS=para>Finally, some images have a pure background color, but that color isalso used in parts of the image you want to keep opaque. Since everypixel having the appropriate colormap index is made transparent, theseportions of the image become transparent as well.<P CLASS=para>In all cases, the problem can be solved by loading the image into animage editor, turning off dithering, and painting the backgroundareas, usually by hand, to be a single color not used anywhere else inthe image. Make sure you save the result as a GIFimage, so that the colormap and pixel indexes will be retained.</DIV><DIV CLASS=sect2><h3 CLASS=sect2><A CLASS="TITLE" NAME="USING-HTML-CH12-SECT-6.3">Converting the Image</A></h3><P CLASS=para>Once you have an acceptable image, and you've determined thecolor you wish to make transparent, you'll need to convert theimage to GIF89a format.<P CLASS=para>For PC and UNIX users, a public-domain utility called<I CLASS=emphasis>giftrans</I> does the job nicely. To convert animage, use this command:<P CLASS=para><DIV CLASS=screen><P><PRE>giftrans <tt CLASS=replaceable><i>-t index original.gif &gt; new.gif</i></tt></PRE></DIV><P CLASS=para>Replace <I CLASS=emphasis>index</I> with the numeric index of the colorto be made transparent. <I CLASS=emphasis>Original.gif</I> and<I CLASS=emphasis>new.gif</I> are the original nontransparent imageand the resulting transparent image.<P CLASS=para>Apple Macintosh users have the advantage, though: they can use asingle tool named <I CLASS=emphasis>Transparency</I> to accomplish theconversion. It was written by Aaron Giles at Cornell University, whogenerously makes it available for free over the Internet. Check Yahooor your favorite Archie resource to locate it on a server near you.<P CLASS=para>These tools can do far more than simply convert transparentimages. For a complete discussion of transparency and imageconversion, including links to the actual tools, visit:<DIV CLASS=screen><P><PRE>http://melmac.corp.harris.com/transparent_images.html</PRE></DIV></DIV></DIV><DIV CLASS=htmlnav><P><HR align=left width=515><table width=515 border=0 cellpadding=0 cellspacing=0><tr><td width=172 align=left valign=top><A HREF="ch12_05.htm"><IMG SRC="gifs/txtpreva.gif" ALT="Previous" border=0></A></td><td width=171 align=center valign=top><a href="index.htm"><IMG SRC="gifs/txthome.gif" ALT="Home" BORDER=0></a></td><td width=172 align=right valign=top><A HREF="appa_01.htm"><IMG SRC="gifs/txtnexta.gif" ALT="Next" border=0></A></td></tr><tr><td width=172 align=left valign=top>Tricks with Tables</td><td width=171 align=center valign=top><a href="index/idx_0.htm">Book Index</a></td><td width=172 align=right valign=top>HTML Grammar</td></tr></table><!-- JavaScript: prev.js -->&nbsp;<!-- JavaScript: next.js --></DIV></BODY></HTML>