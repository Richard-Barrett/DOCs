<!DOCTYPE HTML PUBLIC "-//ORA//DTD CD HTML 3.2//EN"><HTML><HEAD><TITLE>[Chapter 7] 7.2 Creating New Objects with Constructors</TITLE><META NAME="author" CONTENT="David Flanagan"><META NAME="date" CONTENT="Wed Apr 23 18:08:52 1997"><META NAME="form" CONTENT="html"><META NAME="metadata" CONTENT="dublincore.0.1"><META NAME="objecttype" CONTENT="book part"><META NAME="otheragent" CONTENT="gmat dbtohtml"><META NAME="publisher" CONTENT="O'Reilly &amp; Associates, Inc."><META NAME="source" CONTENT="SGML"><META NAME="subject" CONTENT="JavaScript"><META NAME="title" CONTENT="JavaScript: The Definitive Guide"><!-- JavaScript: pathcont.js --></HEAD><BODY BGCOLOR="#FFFFFF"><DIV CLASS=htmlnav><H1><IMG SRC="gifs/smbanner.gif" ALT="Javascript: The Definitive Guide"></H1><table width=515 border=0 cellpadding=0 cellspacing=0><tr><td width=172 align=left valign=top><A HREF="ch07_01.htm"><IMG SRC="gifs/txtpreva.gif" ALT="Previous" border=0></A></td><td width=171 align=center valign=top><b>Chapter 7</b></td><td width=172 align=right valign=top><A HREF="ch07_03.htm"><IMG SRC="gifs/txtnexta.gif" ALT="Next" border=0></A></td></tr></table><!-- JavaScript: prev.js -->&nbsp;<!-- JavaScript: next.js --><hr align=left width=515></DIV><DIV CLASS=sect1><h2 CLASS=sect1><A CLASS="TITLE" NAME="ch07-SECT1-AUTOID.2">7.2 Creating New Objects with Constructors</A></h2><P CLASS=para>      As we saw briefly in <A HREF="ch04_01.htm">Chapter 4, <i>Expressions and Operators</i></A>, the      <tt CLASS=literal>new</tt> operator creates a new object. For      example:      <DIV CLASS=programlisting><P><PRE>o = new Object();</PRE></DIV>    <P CLASS=para>      This syntax creates an "empty" object, one that has no properties      defined. There are certain occasions in which you might want to      start with an empty object of this sort, but in "object-oriented"      programming, it is more common to work with objects that have a      predefined set of properties. For example, you might want to      define one or more objects that represent rectangles. In this      case, each rectangle object should have a <tt CLASS=literal>width</tt>      property and a <tt CLASS=literal>height</tt> property.    <P CLASS=para>      To create objects with properties such as <tt CLASS=literal>width</tt>      and <tt CLASS=literal>height</tt> already defined, we need to write      a <I CLASS=emphasis>constructor</I> to create and initialize these      properties in a new object. A constructor is a JavaScript      function with three special features:    <P><UL CLASS=itemizedlist><li CLASS=listitem>	  It is invoked through the <tt CLASS=literal>new</tt> operator.	<P><li CLASS=listitem>	  It is passed a reference to a newly created, "empty" object	  as the value of the special <tt CLASS=literal>this</tt> keyword,	  and it is responsible for performing appropriate	  initialization for that new object. 	<P><li CLASS=listitem>	  It should not return a value; if it uses the	  <tt CLASS=literal>return</tt> statement, it should do so without	  a value to be returned.	<P></UL><P CLASS=para>      <A HREF="ch07_02.htm#JSCRIPT-CH-OBJECTS-EX-1">Example 7-1</A> shows how the constructor      function for a rectangle object might be defined and invoked.    <DIV CLASS=example><h4 CLASS=example><A CLASS="TITLE" NAME="JSCRIPT-CH-OBJECTS-EX-1">Example 7-1: A Rectangle Object Constructor Function</A></h4><DIV CLASS=programlisting><P><PRE>//<tt CLASS=replaceable><i> define the constructor.</i></tt>//<tt CLASS=replaceable><i> Note how it initializes the object referred to by "this"</i></tt>function Rectangle(w, h) {    this.width = w;    this.height = h;}//<tt CLASS=replaceable><i> invoke the constructor to create two rectangle objects</i></tt>//<tt CLASS=replaceable><i> Notice that we pass the width and height to the constructor, so it</i></tt>//<tt CLASS=replaceable><i> can initialize each new object appropriately.</i></tt>rect1 = new Rectangle(2, 4);rect2 = new Rectangle(8.5, 11);</PRE></DIV></DIV><P CLASS=para>      Notice how the constructor performs its initialization on the      object referred to by the <tt CLASS=literal>this</tt> keyword. A      constructor will generally perform initialization based on the      argument values that are passed to it. Some constructors may also      initialize other properties of a new object (setting them to      constant values, for example). Keep in mind that a constructor      function simply initializes the specified object; it does not have      to return that object.    <P CLASS=para>      Also notice how we define a "class" of objects simply by defining an      appropriate constructor function--all objects created with      that constructor will have the same properties. It is      stylistically important to give constructor functions a name      that indicates the class of objects they will "construct."  For      example, creating a rectangle with      <tt CLASS=literal>new construct_rect(1,2)</tt> is a lot less intuitive      than <tt CLASS=literal>new Rectangle(1,2)</tt>.    <DIV CLASS=sect2><h3 CLASS=sect2><A CLASS="TITLE" NAME="ch07-SECT2-AUTOID.4">The constructor Property</A></h3><P CLASS=para>	In Navigator 3.0, but not in Internet Explorer 3.0, all objects	have a <tt CLASS=literal>constructor</tt> property that refers to	the constructor function that was used to create the object.	Since the constructor function determines the "class" of an	object, the <tt CLASS=literal>constructor</tt> property in a sense	specifies the "type" of any given object. For example, you	might use code like the following to determine the type of an	unknown object:	<DIV CLASS=programlisting><P><PRE>if ((typeof n == "object") &amp;&amp; (n.constructor == Number))   //<tt CLASS=replaceable><i> then do something with the Number object...</i></tt></PRE></DIV>      </DIV></DIV><DIV CLASS=htmlnav><P><HR align=left width=515><table width=515 border=0 cellpadding=0 cellspacing=0><tr><td width=172 align=left valign=top><A HREF="ch07_01.htm"><IMG SRC="gifs/txtpreva.gif" ALT="Previous" border=0></A></td><td width=171 align=center valign=top><a href="index.htm"><IMG SRC="gifs/txthome.gif" ALT="Home" border=0></a></td><td width=172 align=right valign=top><A HREF="ch07_03.htm"><IMG SRC="gifs/txtnexta.gif" ALT="Next" border=0></A></td></tr><tr><td width=172 align=left valign=top>Object Properties</td><td width=171 align=center valign=top><a href="index/idx_0.htm">Book Index</a></td><td width=172 align=right valign=top>Methods</td></tr></table><!-- JavaScript: prev.js -->&nbsp;<!-- JavaScript: next.js --></DIV></BODY></HTML>