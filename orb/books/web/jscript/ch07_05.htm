<!DOCTYPE HTML PUBLIC "-//ORA//DTD CD HTML 3.2//EN"><HTML><HEAD><TITLE>[Chapter 7] 7.5 Classes in JavaScript</TITLE><META NAME="author" CONTENT="David Flanagan"><META NAME="date" CONTENT="Wed Apr 23 18:08:57 1997"><META NAME="form" CONTENT="html"><META NAME="metadata" CONTENT="dublincore.0.1"><META NAME="objecttype" CONTENT="book part"><META NAME="otheragent" CONTENT="gmat dbtohtml"><META NAME="publisher" CONTENT="O'Reilly &amp; Associates, Inc."><META NAME="source" CONTENT="SGML"><META NAME="subject" CONTENT="JavaScript"><META NAME="title" CONTENT="JavaScript: The Definitive Guide"><!-- JavaScript: pathcont.js --></HEAD><BODY BGCOLOR="#FFFFFF"><DIV CLASS=htmlnav><H1><IMG SRC="gifs/smbanner.gif" ALT="Javascript: The Definitive Guide"></H1><table width=515 border=0 cellpadding=0 cellspacing=0><tr><td width=172 align=left valign=top><A HREF="ch07_04.htm"><IMG SRC="gifs/txtpreva.gif" ALT="Previous" border=0></A></td><td width=171 align=center valign=top><b>Chapter 7</b></td><td width=172 align=right valign=top><A HREF="ch07_06.htm"><IMG SRC="gifs/txtnexta.gif" ALT="Next" border=0></A></td></tr></table><!-- JavaScript: prev.js -->&nbsp;<!-- JavaScript: next.js --><hr align=left width=515></DIV><DIV CLASS=sect1><h2 CLASS=sect1><A CLASS="TITLE" NAME="ch07-SECT1-AUTOID.5">7.5 Classes in JavaScript</A></h2><P CLASS=para><A NAME="CH07.CLASS1"></A>      Although JavaScript supports a data type we call an "object", the      language's lack of strong typing and a formal inheritance      mechanism mean that it is not a truly object-oriented language.      Still, JavaScript does a good job of simulating the features of      object-oriented languages like Java and C++. For example, we've      been using the term "class" in the last few sections of this      chapter, despite the fact that JavaScript does not officially      define or support classes. This section will explore some of the      parallels between JavaScript and the true object-oriented features      of Java and C++.    <P CLASS=para>      We start by defining some basic terminology. An object, as we've      already seen, is a data structure that "contains" various pieces      of named data, and may also contain various methods to operate on      those pieces of data. An object groups related data values and      methods into a single convenient package, which generally makes      programming easier, by increasing the modularity and reusability      of code. Objects in JavaScript may have any number of properties,      and properties may be added to an object dynamically. This is not      the case in strictly typed languages like Java and C++--in those      languages, each object has a predefined set of properties, (or      fields, as they are often called) and each property contains a      value of a predefined type. So when we are using JavaScript      objects to simulate object-oriented programming techniques, we      will generally define in advance the set of properties that each      object will have, and the type of data that each property will      hold.    <P CLASS=para>      In Java and C++, a <I CLASS=emphasis>class</I> is thing that      defines the structure of an object. It is the class that      specifies exactly what fields an object contains, and what types      of data each holds. It is also the class that defines the methods      that operate on an object. JavaScript does not have a formal      notion of a class, but, as we've seen, it approximates classes      with its constructors. A constructor function can create a      standard set of properties for each object it initializes.      Similarly, in Navigator 3.0, the prototype object associated with      the constructor can define the methods and constants that will be      shared by each object initialized by the constructor.    <P CLASS=para>      In both JavaScript and true object-oriented languages, there may      be multiple objects of the same class. We often say that an      object is an <I CLASS=emphasis>instance</I> of its class. Thus,      there may be many instances of any class. Sometimes we use the      term <I CLASS=emphasis>instantiate</I> to describe the process of      creating an object (an instance of a class).    <P CLASS=para>      In Java, it is a common programming convention to name classes with      an initial capital letter, and to name objects with lower case      letters. This helps to keep classes and objects distinct from      each other in our code, and this is a useful convention to follow      in JavaScript programming as well. In previous sections, for      example, we've defined the <tt CLASS=literal>Circle</tt> and      <tt CLASS=literal>Rectangle</tt> "classes," for example, and have      created instances of those classes named <tt CLASS=literal>c</tt> and      <tt CLASS=literal>rect</tt>.    <P CLASS=para>      The fields defined by a Java class may be of four basic types:      "instance" variables, "instance" methods, "static" or "class"      variables, and "static" or "class" methods. The paragraphs below      explain the differences between these types of fields, and show      how they are simulated in JavaScript.    <P CLASS=para>      An "instance variable" is a variable of an instance, or object.      It is a variable contained in an object. Each object has its own      separate copy of this variable; if there are ten objects of a      given class, then there are ten copies of this variable. In our      Circle class, for example, every circle object has a      <tt CLASS=literal>r</tt> property that specifies the radius of the      circle. In this case <tt CLASS=literal>r</tt> is an instance      variable. Since each object has its own copy of instance      variables, these variables are accessed through individual      objects. If <tt CLASS=literal>c</tt> is an object that is an instance      of the Circle class, for example, then we refer to its radius as:<DIV CLASS=programlisting><P><PRE>c.r</PRE></DIV>      By default, any object property in JavaScript is an instance      variable, but to truly simulate object-oriented programming, we      will say that instance variables in JavaScript are those      properties that are created and/or initialize in an object by the      constructor function.     <P CLASS=para>      An "instance method" is much like an "instance variable" except      that it is a method rather than a data value. (In Java, functions      and methods are not data types, as they are in JavaScript, so this      distinction is more clear). Instance methods are invoked on a      particular "instance" or object. The <tt CLASS=literal>area()</tt>      method of our Circle class is an instance method. It is invoked      on a Circle object <tt CLASS=literal>c</tt> like this:      <DIV CLASS=programlisting><P><PRE>a = c.area();</PRE></DIV>      Instance methods use the <tt CLASS=literal>this</tt> keyword to refer      to the object or instance they are operating on. An instance      method can be invoked for any instance of a class, but this does      not mean that each object contains its own private copy of the      method, as it does its instance variables. Instead, each instance      method is shared by all instances of a class. In JavaScript, we      define an instance method for a class by setting a property in the      constructor's prototype object to a function value. This way, all      objects created by that constructor share a reference to the      function, and can invoke it using the method invocation syntax      shown above. (Prior to Navigator 3.0, instance methods can be      defined in a constructor function, as instance variables are; this      is less efficient, though.)    <P CLASS=para>      A "class" or "static" variable in Java is a variable that is      associated with a class itself, rather than with each instance of      a class. No matter how many instances of the class are created,      there is only one copy of each class variable. Just as instance      variables are accessed through an instance of a class, class      variables are accessed through the class itself.      <tt CLASS=literal>Number.MAX_VALUE</tt> is an example of a class      variable in JavaScript--the <tt CLASS=literal>MAX_VALUE</tt> property      is accessed through the <tt CLASS=literal>Number</tt> class. Because      there is only one copy of each class variable, class variables are      essentially global variables. What is nice about them, however,      is that by being associated with a class, they have a logical      niche, a position in the JavaScript name space, where they are not      likely to be overwritten by other variables with the same name.      As is probably clear, we simulate a class variable in JavaScript      simply by defining a property of the constructor function itself.      For example, to create a class variable      <tt CLASS=literal>Circle.PI</tt> to store the mathematical constant,      often used with circles, we could do the following:      <DIV CLASS=programlisting><P><PRE>Circle.PI = 3.14;</PRE></DIV>    <P CLASS=para>      Finally, we come to class methods. A "class" or "static" method      is a method associated with a class rather than with an instance      of a class. Class methods are invoked through the class, rather      than through a particular instance of the class.      <tt CLASS=literal>Math.sqrt()</tt>, <tt CLASS=literal>Math.sin()</tt>, and      other methods of the <tt CLASS=literal>Math</tt> object are class      methods. Because class methods are not invoked through a      particular object, they cannot use the <tt CLASS=literal>this</tt>      keyword--<tt CLASS=literal>this</tt> refers to the object that an      <I CLASS=emphasis>instance</I> method is invoked for. Like class      variables, class methods are "global." Because they do not      operate on a particular object, static methods can often more      easily be thought of as functions that happen to be invoked      through a class. Again, associating these functions with a class      gives them a convenient niche in the JavaScript name space, and      prevents "name space collisions" from occurring in case some other      class happens to define a function with the same name. To define      a class method in JavaScript, we simply set the appropriate      function as a property of the constructor.    <P CLASS=para>      <A HREF="ch07_05.htm#JSCRIPT-CH-OBJECTS-EX-5">Example 7-5</A> is a re-implementation of      our Circle class that contains examples of each of these four      basic types of fields.    <DIV CLASS=example><h4 CLASS=example><A CLASS="TITLE" NAME="JSCRIPT-CH-OBJECTS-EX-5">Example 7-5: Defining Instance/Class Variables and Methods</A></h4><DIV CLASS=programlisting><P><PRE>function Circle(radius) {   //<tt CLASS=replaceable><i> the constructor defines the class itself</i></tt>    //<tt CLASS=replaceable><i> r is an instance variable; defined and initialized in the constructor</i></tt>    this.r = radius;    }//<tt CLASS=replaceable><i> Circle.PI is a class variable--it is a property of the constructor function</i></tt>Circle.PI = 3.14159;//<tt CLASS=replaceable><i> Here is a function that computes a circle area.</i></tt>function Circle_area() { return Circle.PI * this.r * this.r; }//<tt CLASS=replaceable><i> Here we make the function into an instance method by assigning it</i></tt>//<tt CLASS=replaceable><i> to the prototype object of the constructor. Remember that we have to</i></tt>//<tt CLASS=replaceable><i> create and discard one object before the prototype object exists</i></tt>new Circle(0);Circle.prototype.area = Circle_area;//<tt CLASS=replaceable><i> Here's another function. It takes two circle objects are arguments and</i></tt>//<tt CLASS=replaceable><i> returns the one that is larger (has the larger radius). </i></tt>function Circle_max(a,b) {    if (a.r &gt; b.r) return a;    else return b;}//<tt CLASS=replaceable><i> Since this function compares two circle objects, it doesn't make sense as </i></tt>//<tt CLASS=replaceable><i> an instance method operating on a single circle object. But we don't want</i></tt>//<tt CLASS=replaceable><i> it to be a standalone function either, so we make it into a class method</i></tt>//<tt CLASS=replaceable><i> by assigning it to the constructor function:</i></tt>Circle.max = Circle_max;//<tt CLASS=replaceable><i> Here is some code that uses each of these fields:</i></tt>c = new Circle(1.0);       //<tt CLASS=replaceable><i> create an instance of the Circle class</i></tt>c.r = 2.2;                 //<tt CLASS=replaceable><i> set the r instance variable</i></tt>a = c.area();              //<tt CLASS=replaceable><i> invoke the area() instance method </i></tt>x = Math.exp(Circle.PI);   //<tt CLASS=replaceable><i> use the PI class variable in our own computation.</i></tt>d = new Circle(1.2);       //<tt CLASS=replaceable><i> create another Circle instance</i></tt>bigger = Circle.max(c,d);  //<tt CLASS=replaceable><i> use the max() class method.</i></tt></PRE></DIV></DIV></DIV><DIV CLASS=htmlnav><P><HR align=left width=515><table width=515 border=0 cellpadding=0 cellspacing=0><tr><td width=172 align=left valign=top><A HREF="ch07_04.htm"><IMG SRC="gifs/txtpreva.gif" ALT="Previous" border=0></A></td><td width=171 align=center valign=top><a href="index.htm"><IMG SRC="gifs/txthome.gif" ALT="Home" border=0></a></td><td width=172 align=right valign=top><A HREF="ch07_06.htm"><IMG SRC="gifs/txtnexta.gif" ALT="Next" border=0></A></td></tr><tr><td width=172 align=left valign=top>Object Prototypes</td><td width=171 align=center valign=top><a href="index/idx_0.htm">Book Index</a></td><td width=172 align=right valign=top>Objects as Associative Arrays</td></tr></table><!-- JavaScript: prev.js -->&nbsp;<!-- JavaScript: next.js --></DIV></BODY></HTML>