<!DOCTYPE HTML PUBLIC "-//ORA//DTD CD HTML 3.2//EN"><HTML><HEAD><TITLE>[Chapter 13] 13.3 The History Object</TITLE><META NAME="author" CONTENT="David Flanagan"><META NAME="date" CONTENT="Wed Apr 23 18:17:13 1997"><META NAME="form" CONTENT="html"><META NAME="metadata" CONTENT="dublincore.0.1"><META NAME="objecttype" CONTENT="book part"><META NAME="otheragent" CONTENT="gmat dbtohtml"><META NAME="publisher" CONTENT="O'Reilly &amp; Associates, Inc."><META NAME="source" CONTENT="SGML"><META NAME="subject" CONTENT="JavaScript"><META NAME="title" CONTENT="JavaScript: The Definitive Guide"><!-- JavaScript: pathcont.js --></HEAD><BODY BGCOLOR="#FFFFFF"><DIV CLASS=htmlnav><H1><IMG SRC="gifs/smbanner.gif" ALT="Javascript: The Definitive Guide"></H1><table width=515 border=0 cellpadding=0 cellspacing=0><tr><td width=172 align=left valign=top><A HREF="ch13_02.htm"><IMG SRC="gifs/txtpreva.gif" ALT="Previous" border=0></A></td><td width=171 align=center valign=top><b>Chapter 13</b></td><td width=172 align=right valign=top><A HREF="ch14_01.htm"><IMG SRC="gifs/txtnexta.gif" ALT="Next" border=0></A></td></tr></table><!-- JavaScript: prev.js -->&nbsp;<!-- JavaScript: next.js --><hr align=left width=515></DIV><DIV CLASS=sect1><h2 CLASS=sect1><A CLASS="TITLE" NAME="ch13-SECT1-AUTOID.3">13.3 The History Object</A></h2><P CLASS=para><A NAME="CH13.HIST1"></A>            The <tt CLASS=literal>history</tt> property of the Window object      refers to a History object for the window. The History object is      an array of the URLs in the browsing history of the window or      frame. For a top-level Navigator window, the History object is a      representation of the contents of the browser's <b>Go</b> menu.    <P CLASS=para>      A user's browsing session history is private information and, so      for security reasons, there are heavy restrictions on how the      History object can be used. In Navigator 3.0, with the      data-tainting security model enabled, (see <A HREF="ch20_01.htm">Chapter 20, <i>JavaScript Security</i></A>) the elements of the      <tt CLASS=literal>history</tt> array are accessible to JavaScript      programs. On all other platforms, however, they are never      accessible, and the History object is much less useful. In      Navigator, the <tt CLASS=literal>length</tt> property of the History      object can be read, although it is not actually good for      much. In Internet Explorer, even this <tt CLASS=literal>length</tt>      property is hidden for security reasons--querying it always      returns 0.    <P CLASS=para>      Besides its array elements and <tt CLASS=literal>length</tt> property,      the History object also supports three methods. The      <tt CLASS=literal>back()</tt> and <tt CLASS=literal>forward()</tt> methods      perform the same action as clicking on the <b>Back</b> and <b>Forward</b> browser buttons. The third method,      <tt CLASS=literal>go()</tt>, suffers from bugs in Navigator 2.0 and      3.0, and has incompatible behavior in Internet Explorer; it is      best avoided. <A HREF="ch13_03.htm#JSCRIPT-CH-NAVIGATION-EX-3">Example 13-3</A> shows      how you might use the <tt CLASS=literal>back()</tt> and      <tt CLASS=literal>forward()</tt> methods of the History object, and      also the Location object to add a "navigation bar" to a framed      web site. <A HREF="ch13_03.htm#JSCRIPT-CH-NAVIGATION-FIG-1">Figure 13-1</A> shows what      it looks like.    <DIV CLASS=figure><h4 CLASS=figure><A CLASS="TITLE" NAME="JSCRIPT-CH-NAVIGATION-FIG-1">Figure 13-1: A navigation bar</A></h4><p><img align=middle src="./figs/js1301.gif" alt="[Graphic: Figure 13-1]" width=407 height=166></DIV><DIV CLASS=example><h4 CLASS=example><A CLASS="TITLE" NAME="JSCRIPT-CH-NAVIGATION-EX-3">Example 13-3: A Navigation Bar Using the History and Location Objects</A></h4><DIV CLASS=programlisting><P><PRE>&lt;!--<tt CLASS=replaceable><i>  This file implements a navigation bar, designed to go in a frame at      the bottom of a window. Include it in a frameset like the following:        &lt;frameset rows="*,75"&gt;        &lt;frame src="about:blank"&gt;        &lt;frame src="navigation.html"&gt;        &lt;/frameset&gt;</i></tt>--&gt;&lt;SCRIPT&gt;//<tt CLASS=replaceable><i> The function is invoked by the Back button in our navigation bar.</i></tt>function go_back() {    //<tt CLASS=replaceable><i> First, clear the URL entry field in our form</i></tt>    document.navbar.url.value = "";    //<tt CLASS=replaceable><i> Then use the History object of the main frame to go back.</i></tt>    parent.frames[0].history.back();    //<tt CLASS=replaceable><i> Wait a second, and then update the URL entry field in the form</i></tt>    //<tt CLASS=replaceable><i> from the location.href property of the main frame. The wait seems</i></tt>    //<tt CLASS=replaceable><i> to be necessary to allow the location.href property to get in sync.</i></tt>    setTimeout("document.navbar.url.value = parent.frames[0].location.href;",               1000);}//<tt CLASS=replaceable><i> This function is invoked by the Forward button in the navigation bar.</i></tt>//<tt CLASS=replaceable><i> It works just like the one above.</i></tt>function go_forward(){    document.navbar.url.value = "";    parent.frames[0].history.forward();    setTimeout("document.navbar.url.value = parent.frames[0].location.href;",               1000);}//<tt CLASS=replaceable><i> This function is invoked by the Go button in the navigation bar, and also</i></tt>//<tt CLASS=replaceable><i> when the form is submitted (when the user hits the Return key).</i></tt>function go_to(){    //<tt CLASS=replaceable><i> Just set the location property of the main frame to the URL</i></tt>    //<tt CLASS=replaceable><i> that the user typed in.</i></tt>    parent.frames[0].location = document.navbar.url.value;}&lt;/SCRIPT&gt;&lt;!--<tt CLASS=replaceable><i> Here's the form, with event handlers that invoke the functions above </i></tt>--&gt;&lt;FORM NAME="navbar" onSubmit="go_to(); return false"&gt;&lt;INPUT TYPE="button" VALUE="Back"  onClick="go_back();"&gt;&lt;INPUT TYPE="button" VALUE="Forward"  onClick="go_forward()"&gt;URL:&lt;INPUT TYPE="text" NAME="url" SIZE=50"&gt;&lt;INPUT TYPE="button" VALUE="Go" onClick="go_to()"&gt;&lt;/FORM&gt;</PRE></DIV></DIV></DIV><DIV CLASS=htmlnav><P><HR align=left width=515><table width=515 border=0 cellpadding=0 cellspacing=0><tr><td width=172 align=left valign=top><A HREF="ch13_02.htm"><IMG SRC="gifs/txtpreva.gif" ALT="Previous" border=0></A></td><td width=171 align=center valign=top><a href="index.htm"><IMG SRC="gifs/txthome.gif" ALT="Home" border=0></a></td><td width=172 align=right valign=top><A HREF="ch14_01.htm"><IMG SRC="gifs/txtnexta.gif" ALT="Next" border=0></A></td></tr><tr><td width=172 align=left valign=top>The Location Object</td><td width=171 align=center valign=top><a href="index/idx_0.htm">Book Index</a></td><td width=172 align=right valign=top>Documents and Their Contents</td></tr></table><!-- JavaScript: prev.js -->&nbsp;<!-- JavaScript: next.js --></DIV></BODY></HTML>