<!DOCTYPE HTML PUBLIC "-//ORA//DTD CD HTML 3.2//EN"><HTML><HEAD><TITLE>[Chapter 14] 14.2 The Link Object</TITLE><META NAME="author" CONTENT="David Flanagan"><META NAME="date" CONTENT="Thu Apr 24 13:35:31 1997"><META NAME="form" CONTENT="html"><META NAME="metadata" CONTENT="dublincore.0.1"><META NAME="objecttype" CONTENT="book part"><META NAME="otheragent" CONTENT="gmat dbtohtml"><META NAME="publisher" CONTENT="O'Reilly &amp; Associates, Inc."><META NAME="source" CONTENT="SGML"><META NAME="subject" CONTENT="JavaScript"><META NAME="title" CONTENT="JavaScript: The Definitive Guide"><!-- JavaScript: pathcont.js --></HEAD><BODY BGCOLOR="#FFFFFF"><DIV CLASS=htmlnav><H1><IMG SRC="gifs/smbanner.gif" ALT="Javascript: The Definitive Guide"></H1><table width=515 border=0 cellpadding=0 cellspacing=0><tr><td width=172 align=left valign=top><A HREF="ch14_01.htm"><IMG SRC="gifs/txtpreva.gif" ALT="Previous" border=0></A></td><td width=171 align=center valign=top><b>Chapter 14</b></td><td width=172 align=right valign=top><A HREF="ch14_03.htm"><IMG SRC="gifs/txtnexta.gif" ALT="Next" border=0></A></td></tr></table><!-- JavaScript: prev.js -->&nbsp;<!-- JavaScript: next.js --><hr align=left width=515></DIV><DIV CLASS=sect1><h2 CLASS=sect1><A CLASS="TITLE" NAME="ch14-SECT1-AUTOID.2">14.2 The Link Object</A></h2><P CLASS=para><A NAME="CH14.LINK1"></A><A NAME="CH14.LINK2"></A>      The previous section has described the Document object and some of      its important methods and properties. The Document object has a      number of other properties that we have not discussed yet. These      properties are arrays, each of which contains references to other      important JavaScript objects. This and the following sections      explain the <tt CLASS=literal>links[]</tt>,      <tt CLASS=literal>anchors[]</tt>, <tt CLASS=literal>applets[]</tt>,      <tt CLASS=literal>embeds[]</tt>, <tt CLASS=literal>images[]</tt>, and      <tt CLASS=literal>forms[]</tt> properties of the Document object, and      the Link, JavaObject, Image, and Form objects those array      properties refer to.    <P CLASS=para>      The Link object represents a hypertext link in a document, and      is created with an <tt CLASS=literal>&lt;A      HREF="</tt><tt CLASS=replaceable><i>hyperlink</i></tt><tt CLASS=literal>"&gt;</tt>      HTML tag, or, in Navigator 3.0, with an      <tt CLASS=literal>&lt;AREA&gt;</tt> tag within a client-side image      map <tt CLASS=literal>&lt;MAP&gt;</tt> tag. The      <tt CLASS=literal>links[]</tt> property of the Document      object is an array that contains a complete list of hypertext      links in the document. The <tt CLASS=literal>Link</tt> object      represents the URL of the hypertext link, and contains all of      the properties that the <tt CLASS=literal>Location</tt> object      does. For example, the <tt CLASS=literal>href</tt> property of a      Link object contains the complete text of the URL that is linked      to, and the <tt CLASS=literal>hostname</tt> property contains only      the hostname portion of that URL. See the reference section for      a complete list of these URL-related properties.    <P CLASS=para>      One obvious use of the Link object and the      <tt CLASS=literal>links[]</tt> array is to write a "web crawler"      program. This program would run in one browser window or frame      and read web pages into another window or frame (by setting the      <tt CLASS=literal>location</tt> property of the Window object). For      each page it reads in, it would look through the      <tt CLASS=literal>links[]</tt> array and recursively follow them. If      carefully written (so it doesn't get caught in infinite recursion      or doesn't start going in circles) such a program can, for      example, be used to generate a list of all web pages that are      accessible from a given starting page, and can be quite useful in      web site maintenance. <A HREF="ch14_02.htm#JSCRIPT-CH-DOCUMENTS-EX-3">Example 14-3</A>      shows a simple function that can be used to generate a list of all      the links in a specified Document object.    <DIV CLASS=example><h4 CLASS=example><A CLASS="TITLE" NAME="JSCRIPT-CH-DOCUMENTS-EX-3">Example 14-3: Listing the Links in a Document</A></h4><DIV CLASS=programlisting><P><PRE>//<tt CLASS=replaceable><i> Create a new window and list the destinations of all links in document d </i></tt>//<tt CLASS=replaceable><i> in that window. Note that we use a text/plain document.</i></tt>function listlinks(d){    var newwin = window.open("", "linklist",                     "menubar,scrollbars,resizable,width=600,height=300");    newwin.document.open("text/plain");    for (var i = 0; i &lt; d.links.length; i++)        newwin.document.writeln(d.links[i]);    newwin.document.close();}</PRE></DIV></DIV><P CLASS=para>      Don't expect to search the entire Internet with this technique,      however. For security reasons, JavaScript in Navigator 2.0 and      Navigator 3.0 is "hobbled" so that it cannot steal data that may      be private. The restriction is this:  a script running in one      window or frame can read properties from other windows or      frames only if the contents of the other window or frame were loaded      from the same web server as the script. While our "web crawler"      program as we've described it above is not a threat to Internet      security or privacy, this general security restriction will      prevent it from crawling very far beyond the site from which it      was loaded. (When the crawler loads a page from a different site,      it will appear as if that page simply has no links on it.)      See <A HREF="ch20_01.htm">Chapter 20, <i>JavaScript Security</i></A>, for a complete discussion      of JavaScript security, including a description of how to      partially lift the restriction described here with the      <tt CLASS=literal>domain</tt> property, or to fully lift it by      enabling the data-tainting security model.    <P CLASS=para>      More interesting than the URL-related properties of the Link      object are the event handlers it supports. We saw the      <tt CLASS=literal>onMouseOver()</tt> event handler previously in <A HREF="ch12_03.htm#JSCRIPT-CH-WINDOWS-EX-3">Example 12-3</A> where it was used with both      <tt CLASS=literal>&lt;A&gt;</tt> and <tt CLASS=literal>&lt;AREA&gt;</tt>      to change the message in the browser's status line when the mouse      moved over the link.     <P CLASS=para>      In addition to this <tt CLASS=literal>onMouseOver()</tt> event      handler, the link object supports two others. The      <tt CLASS=literal>onClick()</tt> event handler is invoked when the      user clicks on a hypertext link. In Navigator 3.0, if this event      handler returns <tt CLASS=literal>false</tt> then the browser won't      follow the link, as it would otherwise. Note that      <tt CLASS=literal>onClick()</tt> only works for Link objects created      with the <tt CLASS=literal>&lt;A&gt;</tt> tag; it should work for      those created with the <tt CLASS=literal>&lt;AREA&gt;</tt> tag in a      future version of the language.    <P CLASS=para>      In Navigator 3.0, both the <tt CLASS=literal>&lt;A&gt;</tt> and      <tt CLASS=literal>&lt;AREA&gt;</tt> tags support an      <tt CLASS=literal>onMouseOut()</tt> event handler. This is simply the      opposite of the <tt CLASS=literal>onMouseOver()</tt> handler--it is      run when the mouse pointer moves off of a hypertext link. If you      used <tt CLASS=literal>onMouseOver()</tt> to display a message in the      status line, you can use <tt CLASS=literal>onMouseOut()</tt> to clear      it; as we saw in <A HREF="ch12_01.htm">Chapter 12, <i>Programming with Windows</i></A>, the status      line is not automatically cleared, as it should be, on Windows      platforms.     <P CLASS=para>      Finally, it is worth mentioning that the <tt CLASS=literal>href</tt>      and other URL properties of the Link object are read/write. Thus,      you can write JavaScript programs that dynamically modify the      destinations of hypertext links!      <A HREF="ch14_02.htm#JSCRIPT-CH-DOCUMENTS-EX-4">Example 14-4</A> is a frivolous piece      of JavaScript-enhanced HTML that implements a random hypertext      link. It demonstrates each of the features of the Link object that      we've considered: the <tt CLASS=literal>links[]</tt> array, the use of      the Link event handlers, and dynamic setting of the destination of      a Link. Note that the example sets the <tt CLASS=literal>href</tt>      property of the Link, but doesn't bother to read the      <tt CLASS=literal>href</tt> property of the link it randomly chooses.      Instead, it simply relies on the <tt CLASS=literal>toString()</tt>      method of the Link object to return the URL.    <DIV CLASS=example><h4 CLASS=example><A CLASS="TITLE" NAME="JSCRIPT-CH-DOCUMENTS-EX-4">Example 14-4: A Random Hypertext Link</A></h4><DIV CLASS=programlisting><P><PRE>&lt;A HREF="about:"     onMouseOver="status = 'Take a chance... Click me.'; return true;"    onMouseOut="status = ''"    onClick="this.href =               document.links[Math.floor(Math.random()*document.links.length)]"&gt;Random Link&lt;/A&gt;</PRE></DIV></DIV></DIV><DIV CLASS=htmlnav><P><HR align=left width=515><table width=515 border=0 cellpadding=0 cellspacing=0><tr><td width=172 align=left valign=top><A HREF="ch14_01.htm"><IMG SRC="gifs/txtpreva.gif" ALT="Previous" border=0></A></td><td width=171 align=center valign=top><a href="index.htm"><IMG SRC="gifs/txthome.gif" ALT="Home" border=0></a></td><td width=172 align=right valign=top><A HREF="ch14_03.htm"><IMG SRC="gifs/txtnexta.gif" ALT="Next" border=0></A></td></tr><tr><td width=172 align=left valign=top>The Document Object</td><td width=171 align=center valign=top><a href="index/idx_0.htm">Book Index</a></td><td width=172 align=right valign=top>The Anchor Object</td></tr></table><!-- JavaScript: prev.js -->&nbsp;<!-- JavaScript: next.js --></DIV></BODY></HTML>