<!DOCTYPE HTML PUBLIC "-//ORA//DTD CD HTML 3.2//EN"><HTML><HEAD><TITLE>[Chapter 11] CGI Environment Variables</TITLE><META NAME="author" CONTENT="Stephen Spainhour and Valerie Quercia"><META NAME="date" CONTENT="Mon Mar 17 14:28:14 1997"><META NAME="form" CONTENT="html"><META NAME="metadata" CONTENT="dublincore.0.1"><META NAME="objecttype" CONTENT="book part"><META NAME="otheragent" CONTENT="gmat dbtohtml"><META NAME="publisher" CONTENT="O'Reilly &amp; Associates, Inc."><META NAME="source" CONTENT="SGML"><META NAME="subject" CONTENT="Webmaster in a Nutshell"><META NAME="title" CONTENT="Webmaster in a Nutshell"><!-- JavaScript: pathcont.js --></HEAD><BODY BGCOLOR="#FFFFFF" TEXT="#000000"><DIV CLASS=htmlnav><H1><IMG SRC="gifs/smbanner.gif" ALT="Webmaster in a Nutshell"></H1><table width=515 border=0 cellpadding=0 cellspacing=0><tr><td width=172 align=left valign=top><A HREF="ch10_02.htm"><IMG SRC="gifs/txtpreva.gif" ALT="Previous" border=0></A></td><td width=171 align=center valign=top><b>Chapter 11</b></td><td width=172 align=right valign=top><A HREF="ch12_01.htm"><IMG SRC="gifs/txtnexta.gif" ALT="Next" border=0></A></td></tr></table><!-- JavaScript: prev.js -->&nbsp;<!-- JavaScript: next.js --><hr align=left width=515></DIV><H1 CLASS=chapter><A CLASS="TITLE" NAME="WEB-CH-11">CGI Environment Variables</A></H1><P CLASS=para>Much of the information needed by CGI programs is made availablevia UNIX environment variables. Programs can access this informationas they would any environment variable (e.g., via the <I CLASS=emphasis>%ENV</I>associative array in Perl).   The table below lists the environment variables commonly available through CGI. However, since servers occasionally vary on the names of environment variables they assign, check with yourown server documentation for more information.<DIV CLASS=informaltable><P><A NAME="WEB-CH-11-TAB-1"></A><TABLE CLASS=INFORMALTABLE><TR CLASS=row><TH ALIGN="left">Environment Variable</TH><TH ALIGN="left">Content Returned</TH></TR><TR CLASS=row><TD ALIGN="left">AUTH_TYPE</TD><TD ALIGN="left"><P CLASS=para>The authentication method used to validate a user. See REMOTE_USERand REMOTE_IDENT.</TD></TR><TR CLASS=row><TD ALIGN="left">CONTENT_LENGTH</TD><TD ALIGN="left"><P CLASS=para>The length of the query data (in bytes or the number of characters)passed to the CGI program through standard input. </TD></TR><TR CLASS=row><TD ALIGN="left">CONTENT_TYPE</TD><TD ALIGN="left"><P CLASS=para>The media type of the query data, such as "<tt CLASS=literal>text/html</tt>." See<A HREF="ch20_01.htm">Chapter 20, <i>Media Types and Subtypes</i></A>, for a listing of commonly-used content types.</TD></TR><TR CLASS=row><TD ALIGN="left">DOCUMENT_ROOT</TD><TD ALIGN="left"><P CLASS=para>The directory from which Web documents are served.</TD></TR><TR CLASS=row><TD ALIGN="left">GATEWAY_INTERFACE</TD><TD ALIGN="left"><P CLASS=para>The revision of the Common Gateway Interface that the server uses.</TD></TR><TR CLASS=row><TD ALIGN="left">HTTP_ACCEPT</TD><TD ALIGN="left"><P CLASS=para>A list of the media types that the client can accept.</TD></TR><TR CLASS=row><TD ALIGN="left">HTTP_FROM</TD><TD ALIGN="left"><P CLASS=para>The email address of the user making the query (manybrowsers do not support this variable).</TD></TR><TR CLASS=row><TD ALIGN="left">HTTP_REFERER</TD><TD ALIGN="left"><P CLASS=para>The URL of the document that the client points to before accessingthe CGI program.</TD></TR><TR CLASS=row><TD ALIGN="left">HTTP_USER_AGENT</TD><TD ALIGN="left"><P CLASS=para>The browser the client is using to issue the request.</TD></TR><TR CLASS=row><TD ALIGN="left">PATH_INFO</TD><TD ALIGN="left"><P CLASS=para>Extra path information passed to a CGI program. See \<A HREF="ch09_01.htm">Chapter 9, <i>CGI Overview</i></A>, for more information on extra path information.</TD></TR><TR CLASS=row><TD ALIGN="left">PATH_TRANSLATED</TD><TD ALIGN="left"><P CLASS=para>The translated version of the path given by thevariable PATH_INFO.</TD></TR><TR CLASS=row><TD ALIGN="left">QUERY_STRING</TD><TD ALIGN="left"><P CLASS=para>The query information passed to the program. It is appended to the URL following a question mark (<tt CLASS=literal>?</tt>). See <A HREF="ch09_01.htm">Chapter 9, <i>CGI Overview</i></A> formore information on query strings.</TD></TR><TR CLASS=row><TD ALIGN="left">REMOTE_ADDR</TD><TD ALIGN="left"><P CLASS=para>The remote IP address from which the user is making the request.</TD></TR><TR CLASS=row><TD ALIGN="left">REMOTE_HOST</TD><TD ALIGN="left"><P CLASS=para>The remote hostname from which the user is making the request.</TD></TR><TR CLASS=row><TD ALIGN="left">REMOTE_IDENT</TD><TD ALIGN="left"><P CLASS=para>The user making the request.</TD></TR><TR CLASS=row><TD ALIGN="left">REMOTE_USER</TD><TD ALIGN="left"><P CLASS=para>The authenticated name of the user making the query.</TD></TR><TR CLASS=row><TD ALIGN="left">REQUEST_METHOD</TD><TD ALIGN="left"><P CLASS=para>The method with which the information request was issued (e.g., GET,POST, HEAD). See  <A HREF="ch09_01.htm">Chapter 9, <i>CGI Overview</i></A> and <A HREF="ch17_01.htm">Chapter 17, <i>HTTP Overview</i></A> for moreinformation on request methods.</TD></TR><TR CLASS=row><TD ALIGN="left">SCRIPT_NAME</TD><TD ALIGN="left"><P CLASS=para>The virtual path (e.g., <I CLASS=emphasis>/cgi-bin/program.pl</I>&nbsp;) of thescript being executed.</TD></TR><TR CLASS=row><TD ALIGN="left">SERVER_NAME</TD><TD ALIGN="left"><P CLASS=para>The server's hostname or IP address.</TD></TR><TR CLASS=row><TD ALIGN="left">SERVER_PORT</TD><TD ALIGN="left"><P CLASS=para>The port number of the host on which the server is running.</TD></TR><TR CLASS=row><TD ALIGN="left">SERVER_PROTOCOL</TD><TD ALIGN="left"><P CLASS=para>The name and revision of the information protocol the request camein with.</TD></TR><TR CLASS=row><TD ALIGN="left">SERVER_SOFTWARE</TD><TD ALIGN="left"><P CLASS=para>The name and version of the server software that is answering theclient request.</TD></TR></TABLE><P></DIV><P CLASS=para>Here's a simple Perl CGI script that uses environment variablesto display various information about the server:<P CLASS=para><DIV CLASS=screen><P><PRE>#!/usr/local/bin/perlprint "Content-type: text/html", "\n\n";print "&lt;HTML&gt;", "\n";print "&lt;HEAD&gt;&lt;TITLE&gt;About this Server&lt;/TITLE&gt;&lt;/HEAD&gt;", "\n";print "&lt;BODY&gt;&lt;H1&gt;About this Server&lt;/H1&gt;", "\n";print "&lt;HR&gt;&lt;PRE&gt;";print "Server Name:       ", $ENV{'SERVER_NAME'}, "&lt;BR&gt;", "\n";print "Running on Port:   ", $ENV{'SERVER_PORT'}, "&lt;BR&gt;", "\n";print "Server Software:   ", $ENV{'SERVER_SOFTWARE'}, "&lt;BR&gt;", "\n";print "Server Protocol:   ", $ENV{'SERVER_PROTOCOL'}, "&lt;BR&gt;", "\n";print "CGI Revision:      ", $ENV{'GATEWAY_INTERFACE'}, "&lt;BR&gt;", "\n";print "&lt;HR&gt;&lt;/PRE&gt;", "\n";print "&lt;/BODY&gt;&lt;/HTML&gt;", "\n";exit (0);</PRE></DIV><P CLASS=para>The preceding program outputs the contents of five environmentvariables into an HTML document. In Perl, you can access the environment variables using the <I CLASS=emphasis>%ENV</I> associative array.Here's a typical output of the program:<P CLASS=para><DIV CLASS=screen><P><PRE>&lt;HTML&gt;&lt;HEAD&gt;&lt;TITLE&gt;About this Server&lt;/TITLE&gt;&lt;/HEAD&gt;&lt;BODY&gt;&lt;H1&gt;About this Server&lt;/H1&gt;&lt;HR&gt;&lt;PRE&gt;Server Name:          ora.comRunning on Port:      80Server Software:      NCSA/1.4.2Server Protocol:      HTTP/1.0CGI Revision:         CGI/1.1&lt;HR&gt;&lt;/PRE&gt;&lt;/BODY&gt;&lt;/HTML&gt;</PRE></DIV><P CLASS=para><DIV CLASS=htmlnav><P><HR align=left width=515><table width=515 border=0 cellpadding=0 cellspacing=0><tr><td width=172 align=left valign=top><A HREF="ch10_02.htm"><IMG SRC="gifs/txtpreva.gif" ALT="Previous" border=0></A></td><td width=171 align=center valign=top><a href="index.htm"><IMG SRC="gifs/txthome.gif" ALT="Home" border=0></a></td><td width=172 align=right valign=top><A HREF="ch12_01.htm"><IMG SRC="gifs/txtnexta.gif" ALT="Next" border=0></A></td></tr><tr><td width=172 align=left valign=top>An Example Form</td><td width=171 align=center valign=top><a href="index/idx_0.htm">Book Index</a></td><td width=172 align=right valign=top>Cookies</td></tr></table><!-- JavaScript: prev.js -->&nbsp;<!-- JavaScript: next.js --></DIV></body></html>