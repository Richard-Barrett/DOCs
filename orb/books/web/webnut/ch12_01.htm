<!DOCTYPE HTML PUBLIC "-//ORA//DTD CD HTML 3.2//EN"><HTML><HEAD><TITLE>[Chapter 12] Cookies</TITLE><META NAME="author" CONTENT="Stephen Spainhour and Valerie Quercia"><META NAME="date" CONTENT="Mon Mar 17 14:28:40 1997"><META NAME="form" CONTENT="html"><META NAME="metadata" CONTENT="dublincore.0.1"><META NAME="objecttype" CONTENT="book part"><META NAME="otheragent" CONTENT="gmat dbtohtml"><META NAME="publisher" CONTENT="O'Reilly &amp; Associates, Inc."><META NAME="source" CONTENT="SGML"><META NAME="subject" CONTENT="Webmaster in a Nutshell"><META NAME="title" CONTENT="Webmaster in a Nutshell"><!-- JavaScript: pathcont.js --></HEAD><BODY BGCOLOR="#FFFFFF" TEXT="#000000"><DIV CLASS=htmlnav><H1><IMG SRC="gifs/smbanner.gif" ALT="Webmaster in a Nutshell"></H1><table width=515 border=0 cellpadding=0 cellspacing=0><tr><td width=172 align=left valign=top><A HREF="ch11_01.htm"><IMG SRC="gifs/txtpreva.gif" ALT="Previous" border=0></A></td><td width=171 align=center valign=top><b>Chapter 12</b></td><td width=172 align=right valign=top><A HREF="ch12_02.htm"><IMG SRC="gifs/txtnexta.gif" ALT="Next" border=0></A></td></tr></table><!-- JavaScript: prev.js -->&nbsp;<!-- JavaScript: next.js --><hr align=left width=515></DIV><H1 CLASS=chapter><A CLASS="TITLE" NAME="WEB-CH-12">Cookies</A></H1><DIV CLASS=htmltoc><p><b>Contents:</b><br>The Set-Cookie Response Header<br><A HREF="ch12_02.htm">The Cookie Request Header</A><BR></DIV><P CLASS=para>Persistent state, client side cookies were introduced by NetscapeNavigator to enable a server to store client-specific informationon the client's machine, and use that information when a serveror a particular page is accessed again by the client. The cookiemechanism allows servers to personalize pages for each client, orremember selections the client has made when browsing through variouspages of a site--all without having to use a complicated (or moretime-consuming) CGI/databasesystem on the server's side.    <P CLASS=para>Cookies work in the following way: When a CGI program identifies a newuser, it adds an extra header to its response containing an identifierfor that user and other information that the server may glean fromthe client's input. This header informs the cookie-enabled browserto add this information to the client's <I CLASS=emphasis>cookies</I> file. Afterthis, all requests to that URL from the browser will include thecookie information as an extra header in the request. The CGI programuses this information to return a documenttailored to that specific client.The cookies are stored on the client user's hard drive, so the informationremains even when the browser is closed and reopened. <DIV CLASS=sect1><h2 CLASS=sect1><A CLASS="TITLE" NAME="WEB-CH-12-SECT-1">12.1 The Set-Cookie Response Header</A></h2><P CLASS=para>A cookie is created when a client visits a site or page for thefirst time. A CGI program will look for previous cookieinformation in the client request, and if it is  not there, will send aresponse containing a <tt CLASS=literal>Set-Cookie</tt> header. This header containsa name/value pair (the actual cookie) which comprises the specialinformation you want the client to maintain. There are other optionalfields you may include in the header.<P CLASS=para>The <tt CLASS=literal>Set-Cookie</tt> header uses the following syntax:<P CLASS=para><DIV CLASS=screen><P><PRE>Set-Cookie: <tt CLASS=literal>name</tt>=<I CLASS=emphasis>value</I>; expires=<I CLASS=emphasis>date</I>;path=<I CLASS=emphasis>pathname</I>; domain=<I CLASS=emphasis>domain-name</I>; secure</PRE></DIV><P CLASS=para>Multiple <tt CLASS=literal>Set-Cookie</tt> headers may be included in the server response.The <I CLASS=emphasis>name</I>&nbsp;=<I CLASS=emphasis>value</I> pair is the only required attribute for thisheader, and it should come first. The remaining attributes can be in any orderand are defined as follows:<P><DL CLASS=variablelist><DT CLASS=varlistentry><I CLASS=emphasis>name</I>&nbsp;=<I CLASS=emphasis>value</I><DD><P CLASS=para>Both <I CLASS=emphasis>name</I> and <I CLASS=emphasis>value</I> can be any strings that do notcontain either a semi-colon, space, or tab. Encoding such asURL encoding may be used if these entities are required in the<I CLASS=emphasis>name</I> or <I CLASS=emphasis>value</I>, as long as your script is preparedto handle it.<p><DT CLASS=varlistentry><tt CLASS=literal>expires=</tt><I CLASS=emphasis>date</I><DD><P CLASS=para>This attribute sets the date when a cookie becomes invalid. Thedate is formatted in a nonstandard way like this: <P CLASS=para><DIV CLASS=screen><P><PRE>Wednesday, 01-Sep-96 00:00:00 GMT</PRE></DIV><P CLASS=para>After this date, the cookie will become invalid, and the browserwill no longer send it. Only GMT (Greenwich Mean Time) is used.If no <tt CLASS=literal>expires</tt> date is given, the cookie is used only for thecurrent session.<p><DT CLASS=varlistentry><tt CLASS=literal>path=</tt><I CLASS=emphasis>pathname</I><DD><P CLASS=para>The <tt CLASS=literal>path</tt> attribute supplies a URL range for which thecookie is valid. If <tt CLASS=literal>path</tt> is set to <tt CLASS=literal>/pub</tt>, for example,the cookie will be sent for URLs in <tt CLASS=literal>/pub</tt> as well aslower levels such as<tt CLASS=literal>/pub/docs</tt> and <tt CLASS=literal>/pub/images</tt>.A <I CLASS=emphasis>pathname</I> of "&nbsp;/&nbsp;" indicates that thecookie will be used for all URLs at the site from which the cookieoriginated. No <tt CLASS=literal>path</tt> attribute means that the cookie isvalid only for the originating URL. <p><DT CLASS=varlistentry><tt CLASS=literal>domain=</tt><I CLASS=emphasis>domain-name</I><DD><P CLASS=para>This attribute specifies a domain name range for which thecookie will be returned. The <I CLASS=emphasis>domain-name</I> must containat least two dots (.), e.g., <tt CLASS=literal>.ora.com</tt>. This valuewould cover both <tt CLASS=literal>www.ora.com</tt> and <tt CLASS=literal>software.ora.com</tt>,and any other server in the <I CLASS=emphasis>ora.com</I> domain.<p><DT CLASS=varlistentry><tt CLASS=literal>secure</tt><DD><P CLASS=para>The <tt CLASS=literal>secure</tt> attribute tells the client to return thecookie only over a secure connection (via SHTTP and SSL). Leavingout this attribute means that the cookie will always be returnedregardless of the connection.</DL></DIV><DIV CLASS=htmlnav><P><HR align=left width=515><table width=515 border=0 cellpadding=0 cellspacing=0><tr><td width=172 align=left valign=top><A HREF="ch11_01.htm"><IMG SRC="gifs/txtpreva.gif" ALT="Previous" border=0></A></td><td width=171 align=center valign=top><a href="index.htm"><IMG SRC="gifs/txthome.gif" ALT="Home" border=0></a></td><td width=172 align=right valign=top><A HREF="ch12_02.htm"><IMG SRC="gifs/txtnexta.gif" ALT="Next" border=0></A></td></tr><tr><td width=172 align=left valign=top>CGI Environment Variables</td><td width=171 align=center valign=top><a href="index/idx_0.htm">Book Index</a></td><td width=172 align=right valign=top>The Cookie Request Header</td></tr></table><!-- JavaScript: prev.js -->&nbsp;<!-- JavaScript: next.js --></DIV></BODY></HTML>