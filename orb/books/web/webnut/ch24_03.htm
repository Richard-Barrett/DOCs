<!DOCTYPE HTML PUBLIC "-//ORA//DTD CD HTML 3.2//EN"><HTML><HEAD><TITLE>[Chapter 24] 24.3 Translation Rules</TITLE><META NAME="author" CONTENT="Stephen Spainhour and Valerie Quercia"><META NAME="date" CONTENT="Mon Mar 17 14:42:50 1997"><META NAME="form" CONTENT="html"><META NAME="metadata" CONTENT="dublincore.0.1"><META NAME="objecttype" CONTENT="book part"><META NAME="otheragent" CONTENT="gmat dbtohtml"><META NAME="publisher" CONTENT="O'Reilly &amp; Associates, Inc."><META NAME="source" CONTENT="SGML"><META NAME="subject" CONTENT="Webmaster in a Nutshell"><META NAME="title" CONTENT="Webmaster in a Nutshell"><!-- JavaScript: pathcont.js --></HEAD><BODY BGCOLOR="#FFFFFF"><DIV CLASS=htmlnav><H1><IMG SRC="gifs/smbanner.gif" ALT="Webmaster in a Nutshell"></H1><table width=515 border=0 cellpadding=0 cellspacing=0><tr><td width=172 align=left valign=top><A HREF="ch24_02.htm"><IMG SRC="gifs/txtpreva.gif" ALT="Previous" border=0></A></td><td width=171 align=center valign=top><b>Chapter 24</b></td><td width=172 align=right valign=top><A HREF="ch24_04.htm"><IMG SRC="gifs/txtnexta.gif" ALT="Next" border=0></A></td></tr></table><!-- JavaScript: prev.js -->&nbsp;<!-- JavaScript: next.js --><hr align=left width=515></DIV><DIV CLASS=sect1><h2 CLASS=sect1><A CLASS="TITLE" NAME="WEB-CH-24-SECT-3">24.3 Translation Rules</A></h2><P CLASS=para>Under the CERN server, each document request is filtered through a series of translation rules to determine what local resource should be used to handle the request. The document name is matched against a filename expressionin each rule; if it matches, the rule is applied.The end result may be a file to send or a CGI program to run, or it may be a redirection to another document, either locally or at another site. <P CLASS=para>The most important thing to remember about CERN translation rules isthat they are applied in the order that they appear in the configuration file. So if you have a rule thatdisallows access to a given document, it doesn't matter if there is a rule later that allows it. The request will already have been denied.<DIV CLASS=sect2><h3 CLASS=sect2><DIV CLASS=sect3><h4 CLASS=sect3><A CLASS="TITLE" NAME="WEB-CH-24-SECT-3.1">DefProt</A></h4><P CLASS=para><tt CLASS=literal>DefProt</tt> <I CLASS=emphasis>expression setup_file</I> <P CLASS=para>Associate a fileor group of files with the protection setup file. Any filesmatching <I CLASS=emphasis>expression</I> are affected. The protectionsetup fileis a file that sets the protection parameters to be usedon the specified files. See the section entitled"Access Control Configuration" at the end of this chapter.</DIV><DIV CLASS=sect3><h4 CLASS=sect3><A CLASS="TITLE" NAME="WEB-CH-24-SECT-3.2">Exec</A></h4><P CLASS=para><tt CLASS=literal>Exec</tt> <I CLASS=emphasis>expression script</I> <P CLASS=para>Specifies the pathname to yourCGI program directory. This directive also tells the server to runrequested documents in that directory as CGI programs and return theresults.For example, suppose your main CGI directory is <I CLASS=emphasis>/www/cgi-bin/</I>, while your server root directory is <I CLASS=emphasis>/usr/local/etc/httpd/docs/</I>. To make <I CLASS=emphasis>/cgi-bin/</I> the server path to your actual CGI directory and to tell the server that <I CLASS=emphasis>/cgi-bin/</I> is a CGI directory, use the following setting:<P CLASS=para><DIV CLASS=screen><P><PRE>Exec /cgi-bin/* /www/cgi-bin/*</PRE></DIV></DIV><DIV CLASS=sect3><h4 CLASS=sect3><A CLASS="TITLE" NAME="WEB-CH-24-SECT-3.3">Fail</A></h4><P CLASS=para><tt CLASS=literal>Fail</tt> <I CLASS=emphasis>expression</I>  <P CLASS=para>Tells the server that the document matching <I CLASS=emphasis>expression</I>may not be served. The server returns a 403 (Permission Denied) error to the user and closes the connection. </DIV><DIV CLASS=sect3><h4 CLASS=sect3><A CLASS="TITLE" NAME="WEB-CH-24-SECT-3.4">Map</A></h4><P CLASS=para><tt CLASS=literal>Map</tt> <I CLASS=emphasis>expression new_path</I> <P CLASS=para>The <tt CLASS=literal>Map</tt> directive tells the server to rewrite a request for a document to use a different path. It is theCERN server's way of creating virtual pathnames.The directive can specify any directory to be mapped to one relativeto the ServerRoot directory. For example, to map the directory<I CLASS=emphasis>/WWW/sales/web/docs/</I> to the directory <I CLASS=emphasis>/sales/</I> underthe ServerRoot directory, use this directive:<P CLASS=para><DIV CLASS=screen><P><PRE>Map /sales/* /www/sales/web/docs/*</PRE></DIV></DIV><DIV CLASS=sect3><h4 CLASS=sect3><A CLASS="TITLE" NAME="WEB-CH-24-SECT-3.5">Pass</A></h4><P CLASS=para><tt CLASS=literal>Pass</tt> <I CLASS=emphasis>expression [new_path]</I> <P CLASS=para>The <tt CLASS=literal>Pass</tt> directive is used to specify directories where documentscan be served from. For example, to allow documents to be served fromthe directory <I CLASS=emphasis>/WWW/sales/web/docs/</I>, use this directive:<P CLASS=para><DIV CLASS=screen><P><PRE>Pass /WWW/sales/web/docs/*</PRE></DIV><P CLASS=para><tt CLASS=literal>Pass</tt> can also map a pathname, like the <tt CLASS=literal>Map</tt> directive, atthe same time that it permits access to the directory. </DIV><DIV CLASS=sect3><h4 CLASS=sect3><A CLASS="TITLE" NAME="WEB-CH-24-SECT-3.6">Protect</A></h4><P CLASS=para><tt CLASS=literal>Protect</tt> <I CLASS=emphasis>expression setup_file uid.gid</I><P CLASS=para>The <tt CLASS=literal>Protect</tt> directive is used to declare a fileor set of files to be subject to access control, and indicatesa protection setup file to be used for the specifiedfiles. This directive is discussed in the <I CLASS=emphasis>Access Control</I>section at the end of this chapter.</DIV><DIV CLASS=sect3><h4 CLASS=sect3><A CLASS="TITLE" NAME="WEB-CH-24-SECT-3.7">Redirect</A></h4><P CLASS=para><tt CLASS=literal>Redirect</tt> <I CLASS=emphasis>expression url</I> <P CLASS=para>The <tt CLASS=literal>Redirect</tt> directive is useful when you have had to move resources around either within the server or across servers. The new path is a full URL, possibly on another server.For example, if you have moved all documents from the <I CLASS=emphasis>/www/</I>directory on your server to another server, use:<P CLASS=para><DIV CLASS=screen><P><PRE>Redirect /www/* http://www.acme.com/products/*</PRE></DIV></DIV></DIV></DIV><DIV CLASS=htmlnav><P><HR align=left width=515><table width=515 border=0 cellpadding=0 cellspacing=0><tr><td width=172 align=left valign=top><A HREF="ch24_02.htm"><IMG SRC="gifs/txtpreva.gif" ALT="Previous" border=0></A></td><td width=171 align=center valign=top><a href="index.htm"><IMG SRC="gifs/txthome.gif" ALT="Home" border=0></a></td><td width=172 align=right valign=top><A HREF="ch24_04.htm"><IMG SRC="gifs/txtnexta.gif" ALT="Next" border=0></A></td></tr><tr><td width=172 align=left valign=top>Resource Configuration</td><td width=171 align=center valign=top><a href="index/idx_0.htm">Book Index</a></td><td width=172 align=right valign=top>Logging</td></tr></table><!-- JavaScript: prev.js -->&nbsp;<!-- JavaScript: next.js --></DIV></BODY></HTML>